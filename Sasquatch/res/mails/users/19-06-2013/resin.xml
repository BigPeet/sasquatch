<?xml version="1.0" encoding="UTF-8"?>
<mails>
  <mail>
    <header>[Resin-interest] difference between http request and forward()</header>
    <date>Fri May 10 13:35:38 CEST 2013</date>
    <body>Hello I use resin 4.0.13 and I would like to put my jsp page near my javascript files, to have them near each-other which seems logical, and helps saving time to search for files. My javascripts are in the directory "/res/js", and are available to http requests. So I would like to put my jsp pages in directory "/res/jsp". When I do so, all works fine. But unfortunately the browser can request the jsp page : " http://domain/res/jsp/home.jsp" ;. I don't want this behavior because all my pages are sent through a forward() after url parsing and query processing. I tried to put in the conf : This answers 404 for all " http://domain/res/jsp/home.jsp" ; requests, fine. But I found strange that my java calls to request.getRequestDispatcher("/res/jsp/home.jsp"). forward(request,response); answer also 404... then nothing works at all. Another way would be to set a password on the directory : This works all right and forbid only the external http request, but it is rather complicate (and by the way password-digest-realm does not seems to work on resin 4,0,13) Is there any way to simply tell that path mapping should be applied only to external request and not to forward() calls ? Thanks -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 16 rue de Belle Isle 37100 Tours France http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] difference between http request and forward()</header>
    <date>Fri May 10 15:05:13 CEST 2013</date>
    <body>Is writing your own filter no option, whose logic decides, what is external and what is internal?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] difference between http request and forward()</header>
    <date>Sat May 11 10:23:35 CEST 2013</date>
    <body>Well I wanted something simple... Is it possible to know if the file requested is from a http request or a forward() in a filter ? How do you do this ? Thanks http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 16 rue de Belle Isle 37100 Tours France http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] difference between http request and forward()</header>
    <date>Sat May 11 13:05:26 CEST 2013</date>
    <body>An idea is to put an attribute "INTERNAL" (not as parameter) to the request when forwarding. The next one in the chain could read this attribute and decide to not executing the "prevent direct/external access" logic. Am 11.05.2013 10:23, schrieb Riccardo Cohen:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] difference between http request and forward()</header>
    <date>Mon May 13 10:59:21 CEST 2013</date>
    <body>Thanks a lot, I'll try that http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 16 rue de Belle Isle 37100 Tours France http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>[Resin-interest] How do I limit the number concurrent requests from mod_caucho in Apache to Resin?</header>
    <date>Tue Apr 16 17:25:29 CEST 2013</date>
    <body>Hi. We have a web app that uses quite a bit of memory, so after roughly 20 instances per GB allocated memory it starts to spend more and more time doing garbage collection. With enough concurrent connections it grinds to a halt. I've been trying to limit the number of threads that are started at once. &amp;lt;port-thread-max&amp;gt; seems to work for this, and does what I want when I setup Resin as a http server. However I've been unable to get it to work with mod_caucho. Setting &amp;lt;port-thread-max&amp;gt; in &amp;lt;port-default&amp;gt; or setting port_thread_max in resin.properties does not seem to affect the traffic coming in from mod_caucho. The only way I've been able to limit it at all is to set thread-max in working). Of course I don't want to do this, since this limits all system threads and setting it too low causes weird problems if resin runs out of threads. Setting keepalive-max, connection-max, or thread-idle-max in server doesn't help, and accept-thread-max isn't applicable. Is there a setting I'm overlooking somewhere? Regards - Vidar Engh Skaugen</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I limit the number concurrent requests from mod_caucho in Apache to Resin?</header>
    <date>Tue Apr 16 18:12:26 CEST 2013</date>
    <body>If this is for Resin 4.0, you might try &amp;lt;cluster-port&amp;gt;, which has the same syntax as &amp;lt;http&amp;gt; and lets you configure the 6800 port properties. The config looks like: ... If you're in a clustered environment, that limit might cause problems with the clustering. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I limit the number concurrent requests from mod_caucho in Apache to Resin?</header>
    <date>Wed Apr 17 12:02:51 CEST 2013</date>
    <body>Thank you very much for the reply Scott. I wasn't aware that was an option. After extrapolating from your reply I ended up using: Also, sorry for the late reply. I've been testing it quite a bit since there's still a problem somewhere with an occasional response getting dropped, but I'm pretty sure now that the port-thread-max bit works perfectly and it's an unrelated issue (there are quite a few places if could happen since it goes through apache and mod_caucho before reaching resin). Regards - Vidar Engh Skaugen</body>
  </mail>
  <mail>
    <header>[Resin-interest] URL Rewrite Rules Lost After Webapp Deploy?</header>
    <date>Fri Apr 12 00:40:31 CEST 2013</date>
    <body>It seems like the URL rewrite rules defined at the cluster level (and I believe at other levels too) are not preserved after a deploy or undeploy operation. For example, starting with a stock installation of Resin Pro 4.0.35, and two versions of a simple web app war file (containing a single index.html file for its web content that does nothing more than display some text in the body), performing the following will demonstrate the issue: - edit resin.properties, enabling webapp_multiversion_routing. - edit resin.xml and add a rewrite rule directly underneath the 'app' cluster: e.g.: ... - start resin - deploy and test version 1 of a simple web app. The rewrite rule should work as expected, forcing a 404. - deploy and test version 2 of your web app (without restarting resin). The rewrite rule no longer takes effect. You will see your page. Has anyone else experienced this? Dan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] URL Rewrite Rules Lost After Webapp Deploy?</header>
    <date>Fri Apr 12 17:10:44 CEST 2013</date>
    <body>Hi Dan, Thanks, I confirmed this is a bug related to multi-version routing, and have entered a bug report: http://bugs.caucho.com/view.php?id=5418 The issue clears after a Resin restart.  You can also work around this by putting the rewrite rule in the web app rather than the cluster level.  For example, add a file named resin-web.xml in your WEB-INF directory: http://caucho.com/ns/resin" I understand this may not be as convenient as placing the rewrite at the cluster level depending on how many webapps you have deployed… Although it's preferable in some cases, as modifying resin.xml triggers a Resin restart, while modifying resin-web.xml, only the web app will restart. Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest ======================= Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] URL Rewrite Rules Lost After Webapp Deploy?</header>
    <date>Fri Apr 12 19:34:37 CEST 2013</date>
    <body>Thanks Paul. Yeah, I had started with the rules defined at the web app level, but some of them need access to the host name and port from the URL. Maybe I missed it, but I couldn't find a stock way of getting that info at the web app level. I have since played around with custom rules and think I can get it done that way, but if there's an easier way, I'm all ears. :) Dan http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Versioned Deploy from Command Line</header>
    <date>Thu Apr 11 23:30:20 CEST 2013</date>
    <body>The following command works as expected in 4.0.32: It's not working for me in 4.0.33 and later. The command returns almost instantaneously and the web app is not deployed. Is this a known issue -- related to http://bugs.caucho.com/view.php?id=5415 ? Dan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Versioned Deploy from Command Line</header>
    <date>Fri Apr 12 16:09:05 CEST 2013</date>
    <body>http://bugs.caucho.com/view.php?id=5415 ? Hi Dan, Yes, it's the same bug, sorry, we were too aggressive on trapping "--version" on the command line. You should still be able to deploy via REST or the resin-admin web app until we patch the issue in the next release. Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest ======================= Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>[Resin-interest] Non-pro Question</header>
    <date>Wed Apr 10 22:38:13 CEST 2013</date>
    <body>In resin-4.0.35 I am spinning on a typical BufferedInputStream read loop to read from a multipart stream.  It works great, but for some reason a large percent of the connections hang at some point on the blocked read call.   I thought that the default SocketTimeout setting in Resin would cause that to eventually throw an exception, but that does not appear to be happening. Here is a partial thread dump of the blocked call: at java.net.SocketInputStream.socketRead0 (SocketInputStream.java:-2) at java.net.SocketInputStream.read (SocketInputStream.java:150) at java.net.SocketInputStream.read (SocketInputStream.java:121) at sun.security.ssl.InputRecord.readFully (InputRecord.java:442) at sun.security.ssl.InputRecord.read (InputRecord.java:480) -- locked java.lang.Object@0x627eabb3 at sun.security.ssl.SSLSocketImpl.readRecord (SSLSocketImpl.java:927) at sun.security.ssl.SSLSocketImpl.readDataRecord (SSLSocketImpl.java:884) at sun.security.ssl.AppInputStream.read (AppInputStream.java:102) at com.caucho.vfs.SocketStream.read (SocketStream.java:187) at com.caucho.vfs.ReadStream.read (ReadStream.java:472) at com.caucho.server.http.ContentLengthStream.read (ContentLengthStream.java:79) .... Any ideas why the socketRead0 just hangs and the SocketTimeout never fires? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Non-pro Question</header>
    <date>Thu Apr 11 00:51:28 CEST 2013</date>
    <body>Some of our internal stream wrappers swallow the exception, log it, and return -1. You're saying it's just blocking, but as a first step I recommend you turn on FINER logging for "com.caucho.vfs", and maybe "com.caucho.server.http" also. Then check the logs for exceptions logged when you would expect the timeout. Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest ======================= Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0.35 works great locally on OS X,	slightly busted on Rackspace Ubuntu 12.04</header>
    <date>Tue Apr 09 04:37:28 CEST 2013</date>
    <body>I have a server that's completely annotation-driven, and it was mostly working on .33, but .35 fixes an issue I had with mappings. Now it works perfectly locally on my OS X laptop, but when I run it on the server, everything seems to load except some resources under /css, which come back as 404. I get errors like this in the log: 19:32:14.099 WARN  servlet.DispatcherServlet (DispatcherServlet.java:1108) No mapping found for HTTP request with URI [/css/tt.css] in DispatcherServlet with name 'dispatcher' 19:32:14.102 WARN  servlet.DispatcherServlet (DispatcherServlet.java:1108) No mapping found for HTTP request with URI [/css/foundation.css] in DispatcherServlet with name 'dispatcher' It's very nearly an out-of-box installation. The only differences I can think of: - on OS X, I didn't run configure/make/make install. On Ubuntu I did. On OS X, I just unzipped and dragged to the install location. - on OS X, resin.properties is more stock, without an admin user, no setuid user/group, port 8080. As to the dispatcher servlet, getServletMappings looks like this: protected java.lang.String[] getServletMappings() I have a Spring controller at /service/* that works great. Just stuff under /css is 404. Any ideas? -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.35 works great locally on OS X,	slightly busted on Rackspace Ubuntu 12.04</header>
    <date>Tue Apr 09 04:42:49 CEST 2013</date>
    <body>I may have spoken too soon. Looks like they might've been cached locally, as now it's also failing locally. More investigating... http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.35 works great locally on OS X, slightly busted on Rackspace Ubuntu 12.04</header>
    <date>Tue Apr 09 04:45:51 CEST 2013</date>
    <body>That's not a Resin message (I just searched to make sure), so I'm not sure what the context is. From that getServletMappings() method, I'm wondering if you've overridden the default servlet. If you have, then it makes sense that Resin is no longer service static files like css, because your servlet has taken over for Resin's default servlet ("resin-file"). -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.35 works great locally on OS X,	slightly busted on Rackspace Ubuntu 12.04</header>
    <date>Tue Apr 09 04:53:18 CEST 2013</date>
    <body>You're right, that's from Spring, I'm pretty sure. I'm not sure. I still don't know how the new servlet hotness is supposed to work. So, *something* is still serving up *.jsp. I can even find /css/test.jsp. I see that in app-default.xml, it has: servlet-name="resin-file" Can I change that to "*.css" and "*.js", etc? I wish there was a way to say, "anything one of my Spring controllers maps, let my code handle it, anything else, resin should try." -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.35 works great locally on OS X,	slightly busted on Rackspace Ubuntu 12.04</header>
    <date>Tue Apr 09 05:08:45 CEST 2013</date>
    <body>So, the answer appears to be "no." Not sure how it is that *.jsp is handled but *.css isn't. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.35 works great locally on OS X, slightly busted on Rackspace Ubuntu 12.04</header>
    <date>Wed Apr 10 02:05:48 CEST 2013</date>
    <body>Check your web.xml.  You're probably sending /* or /service/* to your servlet, which means YOU have to handle serving the CSS files.  If you'd rather let Resin handle those, try using /*.jsp or /service/*.jsp (or something more specific to your situation). (*Chris*) http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.35 works great locally on OS X,	slightly busted on Rackspace Ubuntu 12.04</header>
    <date>Tue Apr 09 04:59:17 CEST 2013</date>
    <body>Trying changing my mappings to: /service/               didn't work /service/*              didn't work But I noticed requesting "/service" (no trailing slash) actually did hit the right method, but none of the others under /service, including "/", work. Is there an explanation of how a request is handled in a purely annotation-configured webapp? -- Rick http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] calling JspServlet instance directly</header>
    <date>Thu Mar 21 18:52:06 CET 2013</date>
    <body>Hello I'm refactoring my url requests processing and need some advice. I've learnt mostly by myself, and I'm not sure to make the good choices. Presently my request processing is a mixing of servlet configurations like : and some java code in UrlManager.java servlet, analysing the url request, processing the request, and calling at the end : QUESTION 1: When I call req.getRequestDispatcher("/page.jsp").forward(req,res); this goes through a certain process depending on resin.xml conf (first line above), analysing the pseudo-request "/page.jsp", and finally calling service() of the instance of com.caucho.jsp.JspServlet created by resin. I was wondering how to call directly the JspServlet instance myself ? It would be much quicker because I know this is a jsp page (systematic final step of the processing). QUESTION 2 What I would like is having a better control on requests, by gathering all the processing in one point, not half configuration, half java code. My solution would be to have all requests handled by my unique urlmanager servlet, and I would dispatch them myself with built-in resin servlets. Any suggestion will be appreciated, as long as performance is "very" good. I must say I'm a bit afraid of these big frameworks like spring/struts that brings many features that already exists in Resin, like persistency, tag library, dependency injection etc. One of the reason I like resin, apart from performances, is that there is everything in it. Thanks for your help. -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] calling JspServlet instance directly</header>
    <date>Thu Mar 21 19:00:19 CET 2013</date>
    <body>Since all that processing is cached, the cost is really just a hash map lookup, which probably isn't noticeable. You could also use ServletContext.getRequestDispatcher("...") in an init() method (or lazily) and save the RequestDispatcher object. The RequestDispatcher is reusable. So calling directly shouldn't actually be a measurable gain. Someone else would be in a better position to answer, but that sounds like a reasonable architecture to me. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] calling JspServlet instance directly</header>
    <date>Thu Mar 21 19:44:30 CET 2013</date>
    <body>I share your fear of frameworks so I created my own request handlers using Resin 4 and a couple of simple classes. Not sure why you specifically want to handle JSP requests with a servlet so I might be missing something but: I put all my JSPs under WEB-INF for privatization (WEB-INF/views/*.jsp). Set a regex in web.xml to send everything except WEB-INF (and other non-logic requests like css, js, images, etc) to a single controller*. Controller inspects the URL (using an enumeration for speed and simplicity) and then calls a POJO via reflection**. In addition, the Controller holds injected resources (Datasource, Hessian services) that it can then pass to the POJO along with the request and response. It also performs authorization and access control checks. When I want to hand the request to a JSP for rendering, I simply call: WEB.XML What this leaves is a very minor configuration in web.xml (2 lines) and complete control over the URL handling in a single class. To add a new URL, I add a new enum entry (URL path, fully-qualified POJO name, method to invoke on the POJO) and I add the POJO java file. As an aside, Resin has a couple other features that I absolutely love. 1. XML configuration injection into resin.xml I utilize Resin's configuration injection to automatically load app/environment-specific configuration into Resin from a single external XML file. I create an app-env.xml and deploy it along with my war files. My Resin config is set to load all XML files in the web apps directory so when Resin starts, it loads the XML and the WAR; datasource, hessian services, and other environment data defined in the XML is loaded into/injected into the app automatically which makes multi-environment (dev, qa, prod) deployment trivial and allows the exact same WAR file to travel through all the stages since there isn't any environment-specific data in the WAR itself. 2. Multipart form request handling I add "&amp;lt;multipart-form enable="true" /&amp;gt;" to web-app-default and then multipart requests provide all the uploaded file details as request parameters. Super convenient. Hope this is useful. I too am self-taught and certainly no expert but what works and is simple tends to rule my development. matt * Controller is a simple extension of HttpServlet and I send both GET and POST requests to a single custom "execute" method. The execute method just passes along the request so that the handlers can decide to treat GETs and POSTs however they choose. The execute method is also where all the URL handling, authorization, etc is performed. ** The POJOs could be threaded for more scalability but I haven't yet hit a threshold where I need to take on the cost of reprogramming these for concurrency. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] calling JspServlet instance directly</header>
    <date>Fri Mar 22 10:07:25 CET 2013</date>
    <body>Hi Matthew, Thanks for your sharing. It helps me a lot. I was wondering why you talked about "POJOs could be threaded" ? The request processing itself is already multi-threaded before your pojos are called, so I don't see the need to worry about it. Resin and all application server start a thread from a pool at each request as far as I know. I use the "service()" function of httpservlet, it handles get and post transparantly. Thanks a lot. bye mailto:f...@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] calling JspServlet instance directly</header>
    <date>Fri Mar 22 17:47:20 CET 2013</date>
    <body>Ricardo, Should have said thread safe. I was thinking to make the POJOs reusable to allow for fewer objects to be created. As it stands now, every requests instantiates and destroys a handler POJO. From time to time I consider restructuring these into a worker queue of instantiated objects to eliminate the overhead of creating so many objects. Like I said, haven't had any performance issues yet but I do worry about large amounts of object creation under load. When I first started programming I remember being told not to use the service method. Not sure why and never really investigated it since but glad to know you don't have any issues. m mailto:f...@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.appartement-maison.fr http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] calling JspServlet instance directly</header>
    <date>Fri Mar 22 18:23:41 CET 2013</date>
    <body>I have one singleton instance of each of my "pojos", processing the requests. They are created only at startup time by the main controller, and called by my main controller depending of the request url. I don't think there is any refactoring difficulties changing a per request creation into a singleton : FROM: urlmanager.service(request,response) if (url like this) pj=new pojo pj.service(request,response) TO: urlmanager() pj=new pojo urlmanager.service(request,response) if (url like this) pj.service(request,response) The only thing to be aware is that there must not be any data stored in the pojo. Only in request or session if necessary. Anyway thanks for your help mailto:f...@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.appartement-maison.fr http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>[Resin-interest] adding to library path</header>
    <date>Tue Mar 12 09:49:13 CET 2013</date>
    <body>Hello I added a jni library (jmagick) to my web application. The C library is in a folder in the application and I set the library path with resin.xml : The problem is that this line replaces the full libary path instead of adding the path to it. How can I add it without deleting the content set by resin ? Thanks for your help. -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin Pro 4.0.34 with Eclipselink 2.4.0.v20120608-r11652 - @Inject UserTransaction null</header>
    <date>Sat Feb 23 12:59:58 CET 2013</date>
    <body>I have a rather long servlet which I'm trying to refactor such that separate helper objects perform the same work. The trouble is, I think I'm missing some config setting because the same working code from the servlet gives npe's when moved to another class. What's special about having these annotation in the servlet class (where ultimately I don't line of APICommand below is null, whereas in the APIServlet it's fine. Thanks. ---------------------------------------------- Servlet definition: @WebServlet(value="/api", name="api-servlet") @PersistenceUnit(unitName="my_persistence_unit") @Inject public void service(HttpServletRequest req, HttpServletResponse ... ... ... ... Helper class definition: ---------------------------------------------- @PersistenceUnit(unitName="my_persistence_unit") @Inject ... ... ...</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.34 with Eclipselink 2.4.0.v20120608-r11652 - @Inject UserTransaction null</header>
    <date>Sun Feb 24 06:50:08 CET 2013</date>
    <body>The reason you're getting NPE's is that your instances of APICommand are not themselves injected by the container (you are instantiating them in code somewhere...indicated by the fact that APICommand has a non-injected parameterized constructor). Dan http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.34 with Eclipselink 2.4.0.v20120608-r11652 - @Inject UserTransaction null</header>
    <date>Sun Feb 24 11:07:11 CET 2013</date>
    <body>Hi Dan &amp;amp; thanks for this, I looked more at this and realised I need to do as you say, and it seems I need Webbeans and the @Component annotation, plus token META-INF/web-beans.xml to mark it as so? If that's right, I'm now struggling to even get the @Component to resolve - does the webbeans package come with Resin or is it an external download? -- Carl Whalley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.34 with Eclipselink 2.4.0.v20120608-r11652 - @Inject UserTransaction null</header>
    <date>Sun Feb 24 18:21:19 CET 2013</date>
    <body>For Resin 4.0, it's CDI and all the names changed: the magic file in META-INF/beans.xml in a jar or WEB-INF/beans.xml for the WEB-INF/classes. The smallest content of that file "&amp;lt;beans/&amp;gt;". You don't need an annotation on the bean, but you can use something like @javax.inject.Singleton if you want it to be a single instance. The default behavior instantiates a new instance of your bean at each @Inject point. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] custom component providers for injection</header>
    <date>Sun Feb 24 23:07:45 CET 2013</date>
    <body>Hello, by the way, about injection, is there an tutorial out there on how to bind custom component providers to Resin's CDI? For example, i use picocontainer and i would like to have Resin ask picocontainer as well (mostly singletons) For Jersey, which also uses Injection, i have created a bridge, so that it can ask picocontainer, which is stored in the servlet context.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] custom component providers for injection</header>
    <date>Mon Feb 25 19:53:19 CET 2013</date>
    <body>@Produces is probably what you need. You can create a factory/bridge class to return CDI objects. Resin itself does this for the predefined objects. @Singleton probably would be @Produces public static MyObject _myField; // you can use static methods @Produces MyFactory would need to know how to get the picocontainer objects. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] custom component providers for injection</header>
    <date>Wed Feb 27 15:40:12 CET 2013</date>
    <body>Hello, thanks for the answer, Scott. Its confusing. For example, as suggested by you: @Singleton @Produces 1) I get an exception: Can't find a bean for 'class ServiceService' Do i need to register the MyFactory anywhere manually? 2) I have a listener, that starts/stops the ComponentProvider (like pico) and put/removes it into/from the servlet context. Can MyFactory already be given the @inject ServletContext"? So that filters/servlets can be given @inject stuff from MyFactory, that would now implicitly depend on ServletContext? 3) Do i really have to write explicitly, what MyFactory can produce? I have hundreds of components in my provider, that potentially could be used. I would like to be able to define a chain, like, look first in my own ComponentProvider, and then maybe lookup somewhere else. Hm. That all is very confusing. :-) Thx -------- Original-Nachricht --------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] custom component providers for injection</header>
    <date>Wed Feb 27 20:36:56 CET 2013</date>
    <body>Ole! Yes. I have to put at least an empty beans.xml into META-INF of the jar to include. Yes! Tried and works. Did not find a solution for that one yet. I can give my produce method an InjectionPoint to get more info about the context, but i still have to create a produce method for each type to produce. Any ideas? Nice tutorial by the way: - http://code.google.com/p/jee6-cdi/wiki/DependencyInjectionAnIntroductoryTutorial_Part1</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] custom component providers for injection</header>
    <date>Wed Feb 27 22:18:37 CET 2013</date>
    <body>You could use the extension mechanism. I'm not sure if there's a good tutorial. It's a bit more complicated than basic CDI use. (And I'm not sure I can quickly explain it here.) -- Scott http://code.google.com/p/jee6-cdi/wiki/DependencyInjectionAnIntroductoryTutorial_Part1 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.34 with Eclipselink 2.4.0.v20120608-r11652 - @Inject UserTransaction null</header>
    <date>Sun Feb 24 23:55:02 CET 2013</date>
    <body>Umm ... I hope I read you right - I just added beans.xml to WEB-INF with just "&amp;lt;beans/&amp;gt;" as its content and that ut is still null. I did change it slightly from the code I posted earlier to ensure it really is a bean, in case that was significant: private static final Logger log = @PersistenceUnit(unitName="my_persistence_unit") @Inject ... ... http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.34 with Eclipselink 2.4.0.v20120608-r11652 - @Inject UserTransaction null</header>
    <date>Mon Feb 25 19:49:52 CET 2013</date>
    <body>How are you instantiating APICommand? For example, are you injecting it into your servlet? If you used "new APICommand()", CDI wouldn't be invoked, because it's not doing that kind of bytecode generation on the constructor. Two general patterns are: @Inject APICommand _command; // injecting into another bean @Inject Instance&amp;lt;APICommand&amp;gt; _factory; // creates a factory to return new instances -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.34 with Eclipselink 2.4.0.v20120608-r11652 - @Inject UserTransaction null</header>
    <date>Tue Feb 26 08:25:49 CET 2013</date>
    <body>That was it - much clearer now, thanks &amp;amp; it all working beautifully;-)</body>
  </mail>
  <mail>
    <header>[Resin-interest] mod_caucho again with resin4</header>
    <date>Wed Feb 13 17:12:17 CET 2013</date>
    <body>Hello again, working with: - resin-pro 4.0.34 (eval license), - two instances (app-0,app-1) - mod_caucho.so for loadbalancing on apache 2.2 prefork Lets start: - resin's /resin-admin: System Health is OK, i see both servers - apache's /caucho-status: i see both servers green as ok Now i disable app-0 for load balancing, so that i can maintain the server: app-0$ ./resinctl disable -server app-0 - resin's access.log no longer has entries. OK. - apache's access.log is now full of "503". Not OK. All traffic should go to app-1. - apache's /caucho-status: both servers show up as green ok. Not OK. app-0 should be red. - app-0/resin-admin is delivering "503". Not OK. How to maintain the server app-0 now? Lets see, if it helps to stop the whole web-app to get it out of load balancing: app-0$ ./resinctl web-app-stop myapp No further change. Not ok. Is it because there are other apps still enabled, thats why mod_caucho keeps the server? But why do i get so many "503" for my webapp context, that i have disabled? Should i probably disable /resin-admin, /resin-rest on "Host: default" as well? app-0$ ./resinctl stop Finally a change: - apache's /caucho-status: app-0 is getting red. Juhu. But still: - apache's access.log is full with "503" (why oh why its not going to app-1, because) - app-1 almost gets almost gets no traffic. app-0$ ./resinctl start - app-0/1 slowly start get request again according to resin's access.log - in between i even start to see "404" in apache's log. Hm, this could be my fault, though resin should not start to deliver, when the webapp is not fully app. In any way, i am pretty lost. The only properties i have overwritten: dev_mode : false app_servers      : 172.17.32.4:6800 172.17.32.5:6800 session_store : false remote_admin_enable : true web_admin_enable : true web_admin_external : true rest_admin_enable : true admin_user : admin admin_password : ... And i have put those two ResinConfigServer ("config triad") into the httpd.conf: ResinConfigServer 172.17.32.4 6800 ResinConfigServer 172.17.32.5 6800 Is anyone using mod_caucho in production and has no problems with it? Am i missing something here? :-) Thanks!</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] mod_caucho again with resin4</header>
    <date>Wed Feb 13 18:21:51 CET 2013</date>
    <body>This is a case where Resin's load balancer is more capable than mod_caucho (we have some open bugs to upgrade it.) mod_caucho primarily handles connection failures. It's not aware of 503's. Currently, neither load balancer is precise enough to handle per-web-app disables (again, an open bug, although it might require Resin 7 for that enhancement because we're revamping the load balancing.) This should work with mod_caucho. We'll need to check on this. With the backend stopped, mod_caucho should failover to the existing servers. If you're using the pre-fork model, though, it may take a number of requests before the Apache processes become aware of the closed server, because each process is independent. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] mod_caucho again with resin4</header>
    <date>Wed Feb 13 18:32:05 CET 2013</date>
    <body>Or in short: Whenever i disable or even stop a resin in a cluster, then i see a lot of 503 in apache's access.log. This should not happen. Why is that so? Why the other servers do not take over? And second: when i disable (not stop) a resin in a cluster, why caucho-status still shows it in green as "ok"?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] mod_caucho again with resin4</header>
    <date>Wed Feb 13 18:41:33 CET 2013</date>
    <body>For stopping, is this transient or permanent? Because mod_caucho can still connect to the backend Resin. When Resin is disabled, it's still accepting connections; it's just returning 503s. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] mod_caucho again with resin4</header>
    <date>Wed Feb 13 19:46:51 CET 2013</date>
    <body>Scott, thanks for your quick response. Permanent. And i know why. Because when i stop app-1, mod_caucho also stops to deliver to app-0, even caucho-status shows green for it. Also the other way around, if i stop app-0, it also stops delivering to app-1. Interesting is also, what caucho-status shows: Default Virtual Host Error: host unavailable/busy Source: Cache File (/tmp/172.17.32.4_6800, Thu Jan 1 01:00:00 1970 ) Last-Update: Thu Jan 1 01:00:00 1970 And shortly later without "host unavailable/busy": Default Virtual Host Source: Cache File (/tmp/172.17.32.4_6800, Thu Jan 1 01:00:00 1970 ) Last-Update: Thu Jan 1 01:00:00 1970 And then again later: Default Virtual Host Source: Resin-ETag (Wed Feb 13 19:26:21 2013 ) Last-Update: Wed Feb 13 19:26:21 2013 And hopping between all that. Alright. It would be totally awesome to have a way to take the server out of load balancing for mod_caucho, without having to stop it. The server should be happy and alive for whatever, maintenaince, calming down, resin-admin and so on. In the old days, there i would just remove the server from apache's local resin.conf and mod_caucho was happy with it. And Resin as Loadbalancer: this would open more issues for me right now and is a tough decision: perl, mod_proxy, lots of rewrite rules to convert. First i need to sell resin4 anyways. :)</body>
  </mail>
  <mail>
    <header>[Resin-interest]  which version of ActiveMQ works with Resin 3.1?</header>
    <date>Tue Feb 12 22:08:01 CET 2013</date>
    <body>Hello, I was wondering if anyone has tried the latest version of ActiveMQ 5.x with Resin 3.1? Does Resin support only a particular version of ActiveMQ or will any version of ActiveMQ work with any version of Resin? Thank you, Sadhana -- View this message in context: http://old.nabble.com/which-version-of-ActiveMQ-works-with-Resin-3.1--tp35015859p35015859.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] which version of ActiveMQ works with Resin 3.1?</header>
    <date>Wed Feb 13 01:05:51 CET 2013</date>
    <body>There shouldn't be a version dependency, particularly if you use the non-JCA version. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Watchdog loglevel</header>
    <date>Tue Feb 12 10:50:57 CET 2013</date>
    <body>Hi We're running Resin 3.1.11 (soon to be 3.1.12 in the next servicewindow) in our production environment, and a few days ago we had an app that was restarted several times by the watchdog - with no apparent reason. The watchdog-log contains this: [2013/02/08 11:17:46.478] WatchdogProcess[Watchdog[results],1] stopping Resin [2013/02/08 11:17:46.478] WatchdogProcess[Watchdog[results],2] starting Resin [2013/02/08 11:20:37.256] WatchdogProcess[Watchdog[results],2] stopping Resin [2013/02/08 11:20:37.256] WatchdogProcess[Watchdog[results],3] starting Resin [2013/02/08 11:23:24.221] WatchdogProcess[Watchdog[results],3] stopping Resin [2013/02/08 11:23:24.221] WatchdogProcess[Watchdog[results],4] starting Resin There was a lot of regular and normal activity in our apps stdout-log before and inbetween all the restarts, but nothing that - in our opinion - should cause a restart by the watchdog. The JVM log has no mention of problems (performing CMS and young generation GC as expected) and load on the server was also low - no automatic stacktraces were taken. We have been running with the same resin configuration, app codebase and OS software-stack for a long time, so we are quite baffeled, as this struck us as lightning from a clear sky. Is there any way of getting more verbose output about the watchdog and what it decides to do? We tried setting  &amp;lt;logger name="com.caucho" level="fine"/&amp;gt; and restarting Resin completely (not just a restart of the JVM), but that did not seem to help. Regards, Jens Dueholm Christensen Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Watchdog loglevel</header>
    <date>Tue Feb 12 18:25:17 CET 2013</date>
    <body>Hi We're running Resin 3.1.11 (soon to be 3.1.12 in the next servicewindow) in our production environment, and a few days ago we had an app that was restarted several times by the watchdog -- with no apparent reason. The watchdog-log contains this: [2013/02/08 11:17:46.478] WatchdogProcess[Watchdog[results],1] stopping Resin [2013/02/08 11:17:46.478] WatchdogProcess[Watchdog[results],2] starting Resin [2013/02/08 11:20:37.256] WatchdogProcess[Watchdog[results],2] stopping Resin [2013/02/08 11:20:37.256] WatchdogProcess[Watchdog[results],3] starting Resin [2013/02/08 11:23:24.221] WatchdogProcess[Watchdog[results],3] stopping Resin [2013/02/08 11:23:24.221] WatchdogProcess[Watchdog[results],4] starting Resin There was a lot of regular and normal activity in our apps stdout-log before and inbetween all the restarts, but nothing that -- in our opinion -- should cause a restart by the watchdog. The JVM log has no mention of problems (performing CMS and young generation GC as expected) and load on the server was also low -- no automatic stacktraces were taken. Well, remember that the watchdog itself doesn't normally shutdown Resin on errors. Resin exits itself and the watchdog just starts a new instance. (Resin 4.0 communicates the reason better to the watchdog through exit codes.) So the problem is in the Resin instance itself. Are there hs_err* files or something similar? -- Scott We have been running with the same resin configuration, app codebase and OS software-stack for a long time, so we are quite baffeled, as this struck us as lightning from a clear sky. Is there any way of getting more verbose output about the watchdog and what it decides to do? We tried setting &amp;lt;logger name="com.caucho" level="fine"/&amp;gt; and restarting Resin completely (not just a restart of the JVM), but that did not seem to help. Regards, *Jens Dueholm Christensen *Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Watchdog loglevel</header>
    <date>Wed Feb 13 13:42:23 CET 2013</date>
    <body>From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson No, not from this particular incident, but we have an older hr_err-file and an old watchdog-log that does show a restart around the same time as the hs_err file was created. *Eeeek* (the same sound a small animal that's about to get squished makes!) - Seems the JVM crashed at that time due to: # Problematic frame: # C  [libawt.so+0x6f881]  IntRgbSrcMaskFill+0x1b1 Java frames: (J=compiled Java code, j=interpreted, Vv=VM code) J sun.java2d.loops.MaskFill.MaskFill(Lsun/java2d/SunGraphics2D;Lsun/java2d/SurfaceData;Ljava/awt/Composite;IIII[BII)V J sun.java2d.pipe.TextRenderer.drawGlyphList(Lsun/java2d/SunGraphics2D;Lsun/font/GlyphList;)V J sun.java2d.pipe.GlyphListPipe.drawString(Lsun/java2d/SunGraphics2D;Ljava/lang/String;DD)V J  sun.java2d.SunGraphics2D.drawString(Ljava/lang/String;FF)V J org.jfree.text.TextLine.draw(Ljava/awt/Graphics2D;FFLorg/jfree/ui/TextAnchor;FFD)V This app creates thousands upon thousands of PDF reports with jFreeChart every day.. We'll have to dig into this - thanks Scott. Regards, Jens Dueholm Christensen  Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin-interest Digest, Vol 80, Issue 3</header>
    <date>Thu Feb 07 12:06:31 CET 2013</date>
    <body>Using JMagick on resin 3.0.23 (IIRC) we were able to handle a portal where customers used to upload their photos which got resized to required 600x600. Did not notice any CPU usage or memory usage issues. Sandeep -- This message has been scanned for viruses and dangerous content by MailScanner, and is believed to be clean.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin-interest Digest, Vol 80, Issue 3</header>
    <date>Thu Feb 07 12:18:28 CET 2013</date>
    <body>Thanks a lot! -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>[Resin-interest]  help on resizing image</header>
    <date>Thu Feb 07 11:26:01 CET 2013</date>
    <body>We use JAI in one of our web apps. Have you set system properties java.awt.headless=true and java.awt.headlesslib=true ...? (Btw, for full performance, you should install JNI binaries. Thought that wouldn't be 100% Java either. And I haven't tried it.) ----- Original Message ----- Subject: [Resin-interest] help on resizing image Date: Thu, 07 Feb 2013 11:14:00 +0100 Hello On my web application, I need to resize images sent via multipart forms. When I try a console application using awt on my mac (see attached code), the console application starts a real Mac application with window and menu, while my code is only calling non-gui functions (ImageIO.read...) . I'm really affraid to add this code on my server, and I wonder if this may have impact on memory, performance and stability of the server. I would rather prefer a little imaging library like jmagick or gd for java, small and efficient. It's not 100% java but it does not create windows and menus... What do you use to resize images on the server size ? Thanks a lot. -- Riccardo Cohen +33 (0)6 09 83 64 49 SociÃ©tÃ© Realty-Property.com 1 rue de la Monnaie 37000 Tours France http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] help on resizing image</header>
    <date>Thu Feb 07 11:30:43 CET 2013</date>
    <body>I didn't know about properties "java.awt.headless=true". I'll try jmagick wich seems to be a good choice for performance. Thanks a lot -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] help on resizing image</header>
    <date>Thu Mar 14 08:36:14 CET 2013</date>
    <body>Hello After some test with jmagick, I found the solution difficult to rely on : - difficult to compile (but succeed at the end) - unstable (some jvm crash) - outputting some unwanted report on stdout (could not stop the verbose option) - strange API (which is not the main point) I finally go back to 100% pure java with awt, but with headless=true which sould solve my problem. Thanks -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>[Resin-interest] help on resizing image</header>
    <date>Thu Feb 07 11:15:44 CET 2013</date>
    <body>Hello On my web application, I need to resize images sent via multipart forms. When I try a console application using awt on my mac (see attached code), the console application starts a real Mac application with window and menu, while my code is only calling non-gui functions (ImageIO.read...) . I'm really affraid to add this code on my server, and I wonder if this may have impact on memory, performance and stability of the server. I would rather prefer a little imaging library like jmagick or gd for java, small and efficient. It's not 100% java but it does not create windows and menus... What do you use to resize images on the server size ? Thanks a lot. -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France http://www.appartement-maison.fr public static void main(String[] args) if(mode.equals("resize")) image1_converted = new BufferedImage(outputWidth, g1.drawImage(image1, 0, 0, outputWidth, outputHeight, image2_converted = new BufferedImage(outputWidth, g2.drawImage(image2, 0, 0, outputWidth, outputHeight, image3_converted = new BufferedImage(outputWidth, g3.drawImage(image3, 0, 0, outputWidth, outputHeight, else image1_converted = new BufferedImage(width1, height1, image2_converted = new BufferedImage(width2, height2, image3_converted = new BufferedImage(width3, height3, ImageIO.write(image1_converted, ext1, new ImageIO.write(image2_converted, ext2, new ImageIO.write(image3_converted, ext3, new</body>
  </mail>
  <mail>
    <header>[Resin-interest] Does Resin 4.0 support integration with ActiveMQ	via JCA?</header>
    <date>Wed Feb 06 19:16:00 CET 2013</date>
    <body>Hello Resin Developers, Could you please confirm if the ActiveMQ integration is supported and will work with Resin 4.0? I don't see any documentation on it and therefore am unable to figure out how to configure the jms queue in the resin-web.xml file. The old way (resin 3.x) of configuring it doesn't seem to work. Also, I am trying to find out how to get the sources for JMSQueue implementation so I can debug the issue myself. Could someone please help me? Thanks a lot, Sadhana</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Does Resin 4.0 support integration with ActiveMQ via JCA?</header>
    <date>Wed Feb 06 19:19:28 CET 2013</date>
    <body>Hello Resin Developers, Could you please confirm if the ActiveMQ integration is supported and will work with Resin 4.0? I don't see any documentation on it and therefore am unable to figure out how to configure the jms queue in the resin-web.xml file. The old way (resin 3.x) of configuring it doesn't seem to work. Also, I am trying to find out how to get the sources for JMSQueue implementation so I can debug the issue myself. Could someone please help me? I'll need to update the docs (and test with ActiveMQ). The example you gave used a very old draft of CDI (before it was called CDI.) The injection annotation is @javax.inject.Inject. Do you need JCA? (For example, for XA support.) If you don't, the non-JCA configuration would be simpler. -- Scott Thanks a lot, Sadhana</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Does Resin 4.0 support integration with ActiveMQ via JCA?</header>
    <date>Wed Feb 06 22:19:16 CET 2013</date>
    <body>Hello Scott, Thank you very much for replying! I have switched to using resin 4.0 now and I did use @javax.inject.Inject annotation but that didn't seem to work either. My configuration in the resin-web.xml file is: class="org.apache.activemq.ra.ActiveMQManagedConnectionFactory" I have added in the resin.xml, the resource-deploy path .... And I have put activeMQ .rar file in the deploy dir. I have modififed ra.xml and brokerConfig.xml to use the vm://localhost as I want to use the ActiveMQ embedded broker. I don't need JCA configuration if by that you mean XA transaction.  A simple configuration (non-JCA) one would be great! I was unable to get connectionFactory reference using the Inject annotation but if I do jndi lookup, it is able to find it: ConnectionFactory cFactory = (ConnectionFactory) I can't get jms queue references either using @Named annotation but I can create the queue after I get the connection and the session. My next issue is how to make MDB listener listen on the same queue since now it's not wired through the configuration. Is my MDB ejb configuration in the resin-web.xml file correct? did it change in 4.0? Thank you so much for helping out! Sadhana http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- View this message in context: http://old.nabble.com/Does-Resin-4.0-support-integration-with-ActiveMQ-via-JCA--tp34990885p34991764.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Does Resin 4.0 support integration with ActiveMQ via JCA?</header>
    <date>Mon Feb 11 18:48:47 CET 2013</date>
    <body>Hello Scott, I checked that you have updated the docs: http://wiki4.caucho.com/Resin_ActiveMQ_How_to And http://wiki4.caucho.com/Resin_JCA_ActiveMQ_How_to . I followed the document to change my code (I was not using both @Inject and @Named together) but it still didn't work for me. By this I mean I don't get reference to the injected factory or Queue in my code. One question I have is that I should be able to use these annotations in any class not just in the servlet, right? I tried both with and without JCA... Did the code you posted in the document work for you with ActiveMQ? Could you give me any idea what I could be doing wrong? I will post my code below. Thank you very much, Sadhana resin-web.xml ========= class="org.apache.activemq.ra.ActiveMQManagedConnectionFactory" Class JobManager.java ============== ================= I'll need to update the docs (and test with ActiveMQ). The example you gave used a very old draft of CDI (before it was called CDI.) The injection annotation is @javax.inject.Inject. Do you need JCA? (For example, for XA support.) If you don't, the non-JCA configuration would be simpler. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Urgent: Help needed using ActiveMQ with Resin 3.1	and Resin 4.0</header>
    <date>Tue Feb 05 01:14:30 CET 2013</date>
    <body>Hi All, I am trying to make ActiveMQ work with resin 3.1 first and then will be moving it to resin 4.0. I am new to Resin, could someone please point me to Resin documentation showing an example/tutorial to use activeMQ with resin? I tried with page: http://wiki.caucho.com/ActiveMQ but am unable to make it work!  I have following issues: The @In annotation doesn't return me a reference to a connection factory. I get null pointer. I have declared my connection factory in resin-web.xml as follows: and in my class called JobManager.java I have am using it as follows: Could you please help to see what I am doing wrong? How can I code it without using the @In annotation? Thank you so much for your help! Sadhana</body>
  </mail>
  <mail>
    <header>[Resin-interest] Disable archive/rollback?</header>
    <date>Wed Jan 23 14:36:47 CET 2013</date>
    <body>Is it possible to completely disable deployment archiving as described on http://www.caucho.com/resin-4.0/admin/deploy.xtp ? Or at least disable the undocumented(?) automatic rollback? Background: We made some configuration changes that seemed to work fine, but turned out to be invalid. Trying to deploying a new .war resulted in getting the contents of the previous one in the exploaded dir. Changing config back did not help. Upon further examination of the logs, there was an error (see below) which might itself be some kind of bug in Resin (version 4.0.29). Fortunately I remembered having similar symptoms a while back and then spent loads of time before we found and deleted the .git directory under resin-data. We tried that again and then was able to boot our application. We would prefer disabling the archive + rollback feature altogether, as in our case it seems only to cause confusion and problems. The error: 'ddd10c59a0204e29d950c6dc5c863d4a24c59ef5' has an unknown type null at com.caucho.env.repository.RepositoryTagMap.&amp;lt;init&amp;gt;(RepositoryTagMap.java:151) at com.caucho.env.repository.AbstractRepository.addTagData(AbstractRepository.java:345) at com.caucho.env.repository.FileRepository.putTag(FileRepository.java:104) at com.caucho.env.repository.AbstractRepository.commitArchive(AbstractRepository.java:243) at com.caucho.env.deploy.ExpandDeployController.commitArchive(ExpandDeployController.java:510) at com.caucho.env.deploy.ExpandDeployController.extractApplication(ExpandDeployController.java:383) at com.caucho.env.deploy.ExpandDeployController.preConfigureInstance(ExpandDeployController.java:340) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:674) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:77) at com.caucho.env.deploy.DeployController.startOnInit(DeployController.java:530) at com.caucho.env.deploy.DeployContainer.start(DeployContainer.java:170) at com.caucho.server.webapp.WebAppContainer.start(WebAppContainer.java:728) at com.caucho.server.host.Host.start(Host.java:677) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:680) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:77) at com.caucho.env.deploy.DeployController.startOnInit(DeployController.java:530) at com.caucho.env.deploy.DeployContainer.start(DeployContainer.java:170) at com.caucho.server.host.HostContainer.start(HostContainer.java:542) at com.caucho.server.cluster.ServletService.start(ServletService.java:1337) at com.caucho.server.cluster.ServletSystem.start(ServletSystem.java:72) at com.caucho.env.service.ResinSystem.startServices(ResinSystem.java:529) at com.caucho.env.service.ResinSystem.start(ResinSystem.java:496) at com.caucho.server.resin.Resin.start(Resin.java:817) at com.caucho.server.resin.Resin.initMain(Resin.java:949) at com.caucho.server.resin.Resin.main(Resin.java:1398) --</body>
  </mail>
  <mail>
    <header>[Resin-interest] Simple loadbalancing per mod_caucho, without using cluster-functionality in resin4</header>
    <date>Mon Jan 21 20:14:58 CET 2013</date>
    <body>Hi, with resin2 a setup to loadbalance was pretty simple: LoadModule caucho_module  modules/mod_caucho.so CauchoConfigFile /home/krische/resin/current/conf/resin.conf And "resin.conf" would contain N "srun" entries for N backend servers. Done. Even when resin.conf changes, mod_caucho would react accordingly. No restart of apache was necessary. My question: is that possible in resin4 without using any fancy resin pro functionality? Because in the community edition i already fail to add N server into a And to add N CauchoHosts manually in the httpd.conf and reload the whole apache is a pita. Also i need root-access for that. What would you guys recommend? Or has anyone ever tried a different kind of loadbalancing than e.g. mod_proxy on apache? Thanks.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Simple loadbalancing per mod_caucho, without using cluster-functionality in resin4</header>
    <date>Mon Jan 21 22:36:17 CET 2013</date>
    <body>Since the resin.xml is now too flexible for a C-based parser to handle, the backend Resin does the parsing and then forwards the configuration on to mod_caucho. So that's no longer possible. Well, we'd recommend buying a license, of course :) mod_proxy should work fine too. I think we added a session option to make sticky sessions easier for mod_proxy to handle. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] JMS messaging with ClusterTopic not working in	resin &amp;gt; 4.0.27</header>
    <date>Mon Jan 14 20:56:55 CET 2013</date>
    <body>Below is a simple servlet/MDB/resin-web combo that sends/reads a message. It works in 4.0.27 but does not work in later versions. By "does not work" I mean that the message does not appear to be sent at all. At the 'fine' logging level there is an entry like: ClusterTopic[TestClusterTopic] sending TextMessageImpl[ID:5dQYaEuP/vkAE8OpoeJQAA] but never a subsequent entry like: [13-01-14 13:51:22.083] FileSubscriberQueue[TestClusterTopic] send message TextMessageImpl[ID:/bKgP3znGffAE8Op2cowAA] and never an entry indicating that the message was received by either server in the cluster. For my testing, the only configuration changes that I made to resin's out-of-the-box config were the following properties: log_level      : fine app_servers    : 127.0.0.1:6801 127.0.0.1:6802 app-0.http     : 8080 app-1.http     : 8081 admin_user     : test Am I doing something wrong and I just got lucky that it worked in earlier versions? Dan /** * Servlet implementation class CtTest */ @javax.inject.Inject @Resource(mappedName = "jms/TestConnectionFactory") JmsConnectionFactory factory = new /** * @see HttpServlet#HttpServlet() */ /** * @see Servlet#init(ServletConfig) */ // Initialize JMS objects Session session = conn.createSession(false, MessageConsumer consumer = // Subscribe to the topic. /** * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse *      response) */ protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, // Initialize JMS objects // Publish the message. TopicSession jmsSession = TopicPublisher publisher = // Do exception handling @MessageDriven(mappedName="TestClusterTopic", public TestListener() public void onMessage(Message msg) System.out.println(String.format("**** Received message: '%s'", // TODO Auto-generated catch block http://caucho.com/ns/resin ' xmlns:jms="urn:java:com.caucho.jms" xmlns:resin="urn:java:com.caucho.resin"</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JMS messaging with ClusterTopic not working in	resin &amp;gt; 4.0.27</header>
    <date>Fri Feb 01 17:54:36 CET 2013</date>
    <body>Has anyone used ClusterTopic successfully in versions &amp;gt; 4.0.27? Dan http://caucho.com/ns/resin ' http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] System.getenv() behaves differently</header>
    <date>Mon Jan 14 15:16:31 CET 2013</date>
    <body>I have noticed that System.getenv() behaves differently on our different Linux servers. When running stand-alone Java applications there is no issue, but on at least one server the environment variables are inherited from the watchdog process to the Resin process, and on others they are not. This can be verified with -verbose when starting Resin. I cannot find any difference in the setup (startup script + config), but on the other hand I'm not sure what I should be looking for. Any ideas? (Resin version is 4.0.29) --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] System.getenv() behaves differently</header>
    <date>Mon Jan 14 17:41:13 CET 2013</date>
    <body>Can you send a -verbose? When the watchdog spawns Resin, the env is built using System.getenv() on the watchdog, and then a few overrides extend the environment (CLASSPATH, LD_LIBRARY_PATH). -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Easing Development</header>
    <date>Thu Jan 03 23:22:19 CET 2013</date>
    <body>I typically work on web apps as a component of other projects. At any given time on my local machine I've got three or four web apps that I rotate through. To speed things up, I reconfigure resin.xml each time I switch to a new one, so I don't have to wait for the others to start up. I run resin in console mode to make it easy to kill and restart I find it a little cumbersome to go to resin.xml and uncomment one &amp;lt;webapp&amp;gt; and comment out another. I'm wondering if I can't accomplish the same thing by moving the &amp;lt;webapp&amp;gt; declarations to separate files in a known directory, and just have resin.xml include all the files in that directory. That way, I can just move the fragment files in and out of this "enabled apps" directory. So, I tried changing resin.xml to: and I'm trying to include a file that contains: ... tags, but it doesn't like that, either. Can I not do this? -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Easing Development</header>
    <date>Thu Jan 03 23:33:08 CET 2013</date>
    <body>You need to use &amp;lt;host&amp;gt; in this case. The &amp;lt;resin:import&amp;gt; expects the current tag as the included top-level tag. That way, your foo.xml could have multiple &amp;lt;web-app&amp;gt; items or other -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Easing Development</header>
    <date>Thu Jan 03 23:40:15 CET 2013</date>
    <body>I tried that, too, but got the same error. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Easing Development</header>
    <date>Fri Jan 04 18:47:31 CET 2013</date>
    <body>Rick, I've been using resin's import ability with 3.0, 3.1 and now 4.0. I had some issues in 4.0 that required tweaking my namespaces on the imported xml file so below is an example of my resin.xml and app.xml that I am now using in 4.0.32. If you are using 3, you might have to change the location in resin.xml and/or the namespaces on the included files. I am not sure about moving the files in and out of the directory without restarting resin…if the war file is still in the web apps directory resin will try to run it without the config. You would have to experiment with that as I usually run all the apps all the time. My primary purpose for using the import is to have an app xml file for each environment (production, qa, dev, etc) which allows me to deploy the war and xml to whichever environment without touching the resin.xml and also using the exact same war file in every environment. resin.xml http://caucho.com/ns/resin" ... ... ... ... ... myapp-environment.xml Inside the webapps folder, I then add a file for each app that needs a configuration. I set various things in this file but below are a force-to-SSL redirect, database connection pool, a hessian service used by the app, and a simple JNDI string. http://caucho.com/ns/resin" https://www.mydomain.com/aws/" http://localhost/hessianapp/service/sample http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Easing Development</header>
    <date>Sat Jan 05 12:58:34 CET 2013</date>
    <body>Thanks, that seems to have done the trick. I thought I tried that, but perhaps not. http://caucho.com/ns/resin" http://caucho.com/ns/resin" https://www.mydomain.com/aws/" http://localhost/hessianapp/service/sample http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Enforcing single session per user name</header>
    <date>Tue Feb 05 09:57:38 CET 2013</date>
    <body>Hi We are using customised JDBC authenticator for login. Users are meant to use individual accounts but we suspect users are sharing accounts. We would like to implement a login scheme that checked for existing sessions for the same user name and closed them. Is this something that should be possible to do with the current API? Does it need to be done in code or is there a configuration option for this? What are the classes/methods that I should be looking at to research the implementation? Any pointers would be most welcome. thanks Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>[Resin-interest] Hessian between servers on different versions of	Resin</header>
    <date>Fri Jun 07 18:36:59 CEST 2013</date>
    <body>Hi We are sending messages using hessian from our server to another server. When both servers were on Resin 2.1.17 all was OK. We have since upgraded to Resin 4.0.36 on our server (when will the 4.1 series come out by the way?) Now the client code no longer works - throwing the following error on our server (the client) at the point where the remote method is invoked. I am I doing something stupid expecting the 2 to communicate. Is it possible to get a Hessian 2 client to talk to a hessian 1 server? com.caucho.hessian.client.HessianRuntimeException: com.caucho.hessian.io.HessianProtocolException: ' ' is an unknown code at com.caucho.hessian.client.HessianProxy.invoke(HessianProxy.java:222) at $Proxy0.addRegistrant(Unknown Source) at com.athene.jaffa.xbatch.admin.MarketMakerTransferXBatch.main(MarketMakerTransferXBatch.java:77) Caused by: com.caucho.hessian.io.HessianProtocolException: ' ' is an unknown code at com.caucho.hessian.client.HessianProxy.invoke(HessianProxy.java:220) ... 2 more Thanks Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hessian between servers on different versions of Resin</header>
    <date>Fri Jun 07 22:01:29 CEST 2013</date>
    <body>Hmm. I'm not sure. We've been working on getting a usable 7.0.0 out. I'm not sure about 2.1.17. It's very old. Hessian 2/1 are designed to interoperate (basically the caller sends at Hessian 1 call with a note that it can upgrade to Hessian 2.) -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Easing Development</header>
    <date>Fri Jan 04 09:54:08 CET 2013</date>
    <body>I personnaly have multiple resin.xml, and launch resin on the one I want to see. The only difference in the resin.xml is some path and database access. I use this because my application is twice on my mac : one for development, and one copy of the production. They have different directories and different databases. You could also run all applications in the same resin instance, thanks to different ports, 8000 for the first, 8001 for the second etc. then you don't have to restart resin each time you want to change the application. For this I guess you'd have to put multiple &amp;lt;host&amp;gt; with different port (never done that). -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Easing Development</header>
    <date>Fri Jan 04 13:31:13 CET 2013</date>
    <body>I actually deliberately restart resin quite frequently. It doesn't pick up certain changes just reloading the class (for example, a Spring @Controller reload won't cause Spring to notice a new handler mapping). Add to that a persistent leak that causes resin to gobble up memory after a few app reloads, and it's best (for me) to restart resin frequently. Which is, more or less, orthogonal to easily switching configurations. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Easing Development</header>
    <date>Fri Jan 04 13:39:54 CET 2013</date>
    <body>Riccardo has it right - the easiest way to do this is to simply have a resin.xml for each webapp - and then just start resin using the resin.xml that is configured for the app you want to run.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Easing Development</header>
    <date>Mon Jan 07 09:25:34 CET 2013</date>
    <body>I have reported a classloader / memory leak that I believe Scott tried to fix for 4.0.33. Haven't had time to verify yet though. Then add this library to your web app, to get rid of third party leaks: http://java.jiderhamn.se/2012/03/04/classloader-leaks-vi-this-means-war-leak-prevention-library/ ----- Original Message ----- Subject: Re: [Resin-interest] Easing Development Date: Fri, 4 Jan 2013 04:31:03 -0800 I actually deliberately restart resin quite frequently. ... Add to that a persistent leak that causes resin to gobble up memory after a few app reloads, and it's best (for me) to restart resin frequently.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Easing Development</header>
    <date>Mon Jan 07 10:04:53 CET 2013</date>
    <body>http://java.jiderhamn.se/2012/03/04/classloader-leaks-vi-this-means-war-leak-prevention-library/ I'll check it out. I often need to restart, anyway, because I use Spring MVC, but that might help.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resource bundle errors in jvm log</header>
    <date>Sat Dec 29 03:40:16 CET 2012</date>
    <body>I have been getting the error below in my jvm log frequently. Odd thing is that it is not just a single page throwing the error and the pages that sometimes throw the error work perfectly fine (e.g. the message is found and displayed in the resulting HTML). Is this a false warning? Is there something wrong with my setup? I configure JSTL in web.xml using: The offending line from the stack trace seems to lead to the following in the JSP files: The file "messages.properties" is in WEB-INF/classes. Any ideas? System Information Debian 6.0.6 Java 1.6.0_26 Resin Pro 4.0.32 Error from jvm log java.lang.ClassNotFoundException: messages in EnvironmentClassLoader[web-app:production/webapp/default/aws] at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1502) at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1479) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:247) at com.caucho.jsp.BundleManager.getBaseBundle(BundleManager.java:254) at com.caucho.jsp.BundleManager.getBundle(BundleManager.java:147) at com.caucho.jsp.PageContextImpl.getBundle(PageContextImpl.java:1558) at com.caucho.jsp.PageContextImpl.getLocalizedMessage(PageContextImpl.java:1515) at _jsp._WEB_22dINF._views._auth._login__jsp$_CauchoFragment_0._jsp_invoke(_login__jsp.java:221)</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin on Raspberry Pi?</header>
    <date>Fri Dec 21 08:50:09 CET 2012</date>
    <body>Has anyone tried running resin on Raspberry Pi? So far I've got the JDK up, but it won't run in server mode (it's an armv6, and the JVM says server mode requires armv7+). -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin on Raspberry Pi?</header>
    <date>Fri Dec 21 20:15:40 CET 2012</date>
    <body>Well funny you should ask, that is my current pet project when I'm not doing bug fixes and customer support :) I've been keeping a journal on our wiki that may interest you: http://wiki4.caucho.com/Paul%27s_Raspberry_Pi_Journal I ran into the same JDK/ARMv7 issue as you.  Resin adds -server automatically and you can't work around it in the current version. The alternatives are to use the Oracle's embedded JRE or OpenJDK.  The ejre doesn't have a compiler, so JSP won't work.  OpenJDK is very slow, but does work fully.  There also, the -server locks you into the Zero VM, which is slow. I've done some performance testing (mostly outside of Resin) of the various VM's available for Raspberry Pi: http://wiki4.caucho.com/Java_On_Raspberry_Pi_Performance If you come up with anything interesting related to Java/Resin on a Pi I would love to hear it.  Otherwise I'm currently working on a new cut of Resin for this: http://wiki4.caucho.com/Resin_Changes_To_Support_Raspberry_Pi Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest ======================= Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin on Raspberry Pi?</header>
    <date>Sat Dec 22 01:07:25 CET 2012</date>
    <body>http://wiki4.caucho.com/Paul%27s_Raspberry_Pi_Journal http://wiki4.caucho.com/Java_On_Raspberry_Pi_Performance http://wiki4.caucho.com/Resin_Changes_To_Support_Raspberry_Pi Well, this is excellent news! I was afraid I was going to have to roll my own little HTTP server to handle REST requests. I'll take a look at your other links over the weekend. Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] More servlet 3.0 issues</header>
    <date>Thu Dec 20 00:22:16 CET 2012</date>
    <body>Hi. I'm able to register a servlet to match "/*" (and my servlet ends up matching only some paths under "/service"). But if I register it under "/service/*", then none of the paths match (well, only "/service" matches, anything else, include "/service/", doesn't match. "/service": 15:19:49.771 WARN  springframework.web.servlet.DispatcherServlet (DispatcherServlet.java:1108) No mapping found for HTTP request with URI [/service/] in DispatcherServlet with name 'dispatcher' -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] server 'app-0' is an unknown server in the	configuration file?</header>
    <date>Wed Dec 19 07:47:22 CET 2012</date>
    <body>I just built a new machine, by installing resin .33-snap, and copying over the resin.xml and resin.properties files from a working machine with .32 on it. When I launch with resin.sh console, I get: com.caucho.config.ConfigException: -server 'app-0' is an unknown server in the configuration file. at com.caucho.server.resin.Resin.initTopology(Resin.java:1069) at com.caucho.server.resin.Resin.initServletSystem(Resin.java:1275) at com.caucho.server.resin.Resin.configure(Resin.java:997) at com.caucho.server.resin.Resin.initMain(Resin.java:979) at com.caucho.server.resin.Resin.main(Resin.java:1437) -server 'app-0' is an unknown server in the configuration file. Am I missing something? -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] server 'app-0' is an unknown server in the	configuration file?</header>
    <date>Wed Dec 19 09:22:13 CET 2012</date>
    <body>My .properties file: # resin.properties - configuration variable values # # See resin.xml, cluster-default.xml, and health.xml for full configuration. # # Individual server overrides can be specified by prepending the server.id. # For example, increasing the log level for an individual server: # # log_level : info # app-0.log_level : finest # # Like Resin XML configuration, modification of this file will trigger # a restart. # # General log level (modify resin.xml for more granular log level adjustments) log_level     : finer # Enable verbose browser error reporting dev_mode      : true # How often Resin should check for updated files. # dependency_check_interval : 5m # Enable /resin-doc Resin documentation resin_doc     : false # List Triad server ip-addresses:hmux-port for each tier, space separated # App tier Triad servers must be listed to enable web-tier to # app-tier load-balancing # web-tier Triad servers: web-0 web-1 web-2 # web_servers      : 127.0.0.1:6810 # app-tier Triad servers: app-0 app-1 app-2 app_servers      : 127.0.0.1:6800 # Configures Resin for a memcached server tier # memcached-tier Triad servers: memcached-0 memcached-1 memcached-2 # memcached_servers    : 127.0.0.1:6820 # memcached_port : 11211 # Allow elastic nodes to join the cluster (enable for cloud mode) # elastic_cloud_enable : true # The cluster that elastic nodes should join - each will contact a Triad server # Use a separate resin.properties file for each cluster home_cluster : app # Used for an elastic server to join the cluster in home_cluster # elastic_server : true # Create a distinct webapps/ directory for each server, for vertical scaling # elastic_webapp : true # Used for cloud servers with dynamic IP addresses where the DNS name for the # server is assigned after the server starts. Resin will retry the start. # elastic_dns : true # specifies the --server in the config file # home_server : app-0 # Set HTTP and HTTPS bind address # http_address  : * # Set HTTP and HTTPS ports. # Use overrides for individual server control, for example: app-0.http : 8081 app.http          : 80 # app.https         : 8443 web.http          : 80 # web.https         : 8443 # memcached.http      : 8080 # memcached.https     : 8443 # For security, Resin can switch to a non-root user after binding to port 80 setuid_user   : www setuid_group  : www # Arg passed directly to the JVM # jvm_args  : -Xmx2048m -XX:MaxPermSize=256m # Local URLs for the watchdog to check to ensure the server is up, # space separated # http_ping_urls : http://127.0.0.1/test.jsp # Throttle the number of active threads for a port port_thread_max   : 256 accept_thread_max : 32 accept_thread_min : 4 # Enable JNI TCP speed optimizations tcp_cork : true sendfile : true # OpenSSL certificate configuration # Keys are typically stored in the resin configuration directory. # openssl_file : keys/test.crt # openssl_key : keys/test.key # openssl_password : changeme # JSSE certificate configuration # Keys are typically stored in the resin configuration directory. # jsse_keystore_type : jks # jsse_keystore_file : /etc/resin/keys/server.keystore # jsse_keystore_password : changeme # In absence of a signed certificate, Resin will fallback to using a # self-signed development certificate if HTTPS is enabled # Enable the proxy-cache - for caching static content in memory proxy_cache_enable : true # Sets the proxy cache memory size # proxy_cache_size : 256m # Enable clustered persistent sessions (for failover) session_store : true # disable the quercus *.php mapping when using Apache for PHP quercus_disable : true # Web-apps named with numeric suffixes, e.g. foo-10.0.war and can be browsed # as /foo. When a new version of the web-app is deployed, Resin continues # to route active session requests to the previous web-app version while # new sessions go to the new version, so users will not be aware of the # application upgrade. # webapp_multiversion_routing : true # Set the email address to receive weekly and restart PDF reports # email : ad...@example.com # Set a global password to prevent foreign Resin instances from connecting. # Must be identical between web, app, and cache clusters. # cluster_system_key : changeme # Enable remote admin (for remote CLI and for EC2 ext: triad discovery) # remote_admin_enable : true # Enable /resin-admin web administration console web_admin_enable : true # Permit access to /resin-admin from non-local network ip-addresses # web_admin_external : true # Require HTTPS to access /resin-admin # web_admin_ssl : true # Enable Resin REST Admin # rest_admin_enable : true # Require SSL for REST Admin # rest_admin_ssl : true # Access to /resin-admin and remote CLI is password restricted. # Use "resinctl generate-password" and copy/paste here to set the admin admin_user : admin_password : # Enable reading EC2 user data as resin properties # properties_import_url : http://169.254.169.254/latest/user-data http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] server 'app-0' is an unknown server in the	configuration file?</header>
    <date>Wed Dec 19 16:28:46 CET 2012</date>
    <body>Hi Rick, I tried the .properties you sent but can't replicate.  Can you send me your resin.xml directly? (co...@caucho.com) Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest ======================= Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>[Resin-interest] java.lang.ClassFormatError: Absent Code attribute	in method that is not native or abstract in class file	javax/servlet/ServletException</header>
    <date>Fri Dec 14 10:41:14 CET 2012</date>
    <body>I've been working on this Spring-based webapp. It was originally a servlet-2.5, XML-configured webapp that ran great under Resin and I had a nice spring-test-mvc-based test class for it, and it all worked well. After upgrading it to servlet-3.0, and using only annotations to configure (no XML!), the webapp works, but I can't get my test class to work. I'm fairly sure I still haven't configured it correctly, but in the Spring forums I'm being told that I'm linking against the javaee-web-api 6.0 jar, which contains no implementation. While this is true, it was also true before the configuration changes. So the guy (a fair expert on Spring) tells me it must be due to some JAR load order difference that's causing the error to appear now. Thing is, in the test environment, I don't have any part of resin involved. I don't know where else I might be getting an implementation. The exception is [junit] java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/servlet/ServletException [junit]     at java.lang.ClassLoader.defineClass1(Native Method) ... [junit]     at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:230) ... [junit]     at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148) [junit]     at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:105) ... So, I'm just curious if anyone here can shed some light on how this can come to be. Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/servlet/ServletException</header>
    <date>Fri Dec 14 18:10:03 CET 2012</date>
    <body>Try looking at System.getProperty("java.class.path"). That might help track down the jar order. jar order can sometimes be random, depending on how the classpath is built. That's a very strange error message. It shouldn't even be possible with normal complication. It seems to be saying that someone took a post-processor to a compiled class that stripped out parts of the .class file, specifically the "Code" attribute, which is the part of the .class file that contains the actual code for a method. So whatever jar is containing that class is a weird/broken jar. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.33 not dispatching servlet-3.0?</header>
    <date>Thu Dec 13 12:56:31 CET 2012</date>
    <body>Hi guys. The .33 snapshot is instantiating my initializer correctly, and that code is calling this: ServletRegistration.Dynamic registration = However, I don't see anything in the Caucho logging indicating that it registered a servlet (not sure if there is anything). I did see this, which doesn't seem right: [12-12-13 03:50:11.038] CONFIG com.caucho.server.dispatch.ServletMapper addUrlMapping: servlet-mapping / -&amp;gt; resin-file It also doesn't respond to a request for http://localhost:8080/ . I see this much: [12-12-13 03:50:22.636] FINER com.caucho.network.listen.TcpSocketLink requestAccept: TcpSocketLink[id= http://*:8080-5,http://*:8080,INIT ] request-accept http://*:8080-5 (count=4, idle=3) [12-12-13 03:50:22.636] FINEST com.caucho.network.listen.TcpSocketLink startThread: TcpSocketLink[id= http://*:8080-5,http://*:8080,INIT ] start thread resin-port-8080-22 (count=5, idle=4) [12-12-13 03:50:22.637] FINEST com.caucho.network.listen.TcpSocketLink initSocket: TcpSocketLink[id=1,app-0] starting connection TcpSocketLink[id= http://*:8080-1,http://*:8080,ACCEPT ], total=5 [12-12-13 03:50:22.637] FINER com.caucho.network.listen.TcpSocketLink handleAcceptTaskImpl: TcpSocketLink[id= http://*:8080-1,http://*:8080,ACCEPT ] accept from [::1]:8080 [12-12-13 03:50:22.645] FINE com.caucho.server.http.HttpRequest parseRequest: Http[app-0, 1] GET / HTTP/1.1 [12-12-13 03:50:22.645] FINE com.caucho.server.http.HttpRequest parseRequest: Http[app-0, 1] Remote-IP: [::1]:8080 [12-12-13 03:50:22.645] FINE com.caucho.server.http.HttpRequest parseHeaders: Http[app-0, 1] Host: localhost:8080 [12-12-13 03:50:22.645] FINE com.caucho.server.http.HttpRequest parseHeaders: Http[app-0, 1] User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.17 (KHTML, like Gecko) Version/6.0.2 Safari/536.26.17 [12-12-13 03:50:22.645] FINE com.caucho.server.http.HttpRequest parseHeaders: Http[app-0, 1] Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 [12-12-13 03:50:22.646] FINE com.caucho.server.http.HttpRequest parseHeaders: Http[app-0, 1] DNT: 1 [12-12-13 03:50:22.646] FINE com.caucho.server.http.HttpRequest parseHeaders: Http[app-0, 1] Cache-Control: max-age=0 [12-12-13 03:50:22.646] FINE com.caucho.server.http.HttpRequest parseHeaders: Http[app-0, 1] Accept-Language: en-us [12-12-13 03:50:22.646] FINE com.caucho.server.http.HttpRequest parseHeaders: Http[app-0, 1] Accept-Encoding: gzip, deflate [12-12-13 03:50:22.646] FINE com.caucho.server.http.HttpRequest parseHeaders: Http[app-0, 1] Cookie: remember=rmann:0:cb76f8d95c02b5fae41a3fa0206a927c [12-12-13 03:50:22.647] FINE com.caucho.server.http.HttpRequest parseHeaders: Http[app-0, 1] Connection: keep-alive [12-12-13 03:50:22.651] FINEST com.caucho.server.webapp.WebApp getRealPath: /Users/rmann/Projects/Clients/RedBirdStudios/repo/web/trunk/target/build/ [12-12-13 03:50:22.651] FINEST com.caucho.server.webapp.ServletContextImpl getResourceAsStream: java.io.FileNotFoundException: /Users/rmann/Projects/Clients/RedBirdStudios/repo/web/trunk/target/build/ at com.caucho.vfs.JniFilePathImpl.openReadImpl(JniFilePathImpl.java:402) at com.caucho.vfs.Path.openRead(Path.java:1149) at com.caucho.server.webapp.ServletContextImpl.getResourceAsStream(ServletContextImpl.java:404) at com.caucho.server.dispatch.ServletMapper.mapServlet(ServletMapper.java:252) at com.caucho.server.webapp.WebApp.buildInvocation(WebApp.java:3906) at com.caucho.server.webapp.WebAppContainer.buildInvocation(WebAppContainer.java:781) at com.caucho.server.host.Host.buildInvocation(Host.java:752) at com.caucho.server.host.HostContainer.buildInvocation(HostContainer.java:319) at com.caucho.server.cluster.ServletService.buildInvocation(ServletService.java:1014) at com.caucho.server.dispatch.InvocationServer.buildInvocation(InvocationServer.java:247) at com.caucho.server.dispatch.InvocationServer.buildInvocation(InvocationServer.java:220) at com.caucho.server.http.AbstractHttpRequest.buildInvocation(AbstractHttpRequest.java:1597) at com.caucho.server.http.AbstractHttpRequest.getInvocation(AbstractHttpRequest.java:1570) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:820) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:1345) at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:1301) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:1285) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:1193) at com.caucho.network.listen.TcpSocketLink.handleAcceptTaskImpl(TcpSocketLink.java:992) at com.caucho.network.listen.ConnectionTask.runThread(ConnectionTask.java:117) at com.caucho.network.listen.ConnectionTask.run(ConnectionTask.java:93) at com.caucho.network.listen.SocketLinkThreadLauncher.handleTasks(SocketLinkThreadLauncher.java:169) at com.caucho.network.listen.TcpSocketAcceptThread.run(TcpSocketAcceptThread.java:61) at com.caucho.env.thread2.ResinThread2.runTasks(ResinThread2.java:173) at com.caucho.env.thread2.ResinThread2.run(ResinThread2.java:118) [12-12-13 03:50:22.652] FINEST com.caucho.server.webapp.WebApp getRealPath: /Users/rmann/Projects/Clients/RedBirdStudios/repo/web/trunk/target/build/index.jsp [12-12-13 03:50:22.652] FINEST com.caucho.server.webapp.WebApp getRealPath: /Users/rmann/Projects/Clients/RedBirdStudios/repo/web/trunk/target/build/index.php [12-12-13 03:50:22.652] FINEST com.caucho.server.webapp.WebApp getRealPath: /Users/rmann/Projects/Clients/RedBirdStudios/repo/web/trunk/target/build/index.html [12-12-13 03:50:22.652] FINER com.caucho.server.dispatch.ServletMapper mapServlet: WebApp[production/webapp/default/ROOT] map (uri:/ -&amp;gt; resin-file) [12-12-13 03:50:22.654] FINEST com.caucho.server.webapp.ServletContextImpl getResourceAsStream: java.io.FileNotFoundException: /Users/rmann/Projects/Clients/RedBirdStudios/repo/web/trunk/target/build/ at com.caucho.vfs.JniFilePathImpl.openReadImpl(JniFilePathImpl.java:402) at com.caucho.vfs.Path.openRead(Path.java:1149) at com.caucho.server.webapp.ServletContextImpl.getResourceAsStream(ServletContextImpl.java:404) at com.caucho.rewrite.WelcomeFile.matchWelcomeUri(WelcomeFile.java:207) at com.caucho.rewrite.WelcomeFile.matchWelcomeFileResource(WelcomeFile.java:150) at com.caucho.rewrite.WelcomeFile.map(WelcomeFile.java:125) at com.caucho.server.webapp.WebApp.applyWelcomeFile(WebApp.java:3986) at com.caucho.server.webapp.WebApp.buildInvocation(WebApp.java:3912) at com.caucho.server.webapp.WebAppContainer.buildInvocation(WebAppContainer.java:781) at com.caucho.server.host.Host.buildInvocation(Host.java:752) at com.caucho.server.host.HostContainer.buildInvocation(HostContainer.java:319) at com.caucho.server.cluster.ServletService.buildInvocation(ServletService.java:1014) at com.caucho.server.dispatch.InvocationServer.buildInvocation(InvocationServer.java:247) at com.caucho.server.dispatch.InvocationServer.buildInvocation(InvocationServer.java:220) at com.caucho.server.http.AbstractHttpRequest.buildInvocation(AbstractHttpRequest.java:1597) at com.caucho.server.http.AbstractHttpRequest.getInvocation(AbstractHttpRequest.java:1570) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:820) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:1345) at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:1301) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:1285) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:1193) at com.caucho.network.listen.TcpSocketLink.handleAcceptTaskImpl(TcpSocketLink.java:992) at com.caucho.network.listen.ConnectionTask.runThread(ConnectionTask.java:117) at com.caucho.network.listen.ConnectionTask.run(ConnectionTask.java:93) at com.caucho.network.listen.SocketLinkThreadLauncher.handleTasks(SocketLinkThreadLauncher.java:169) at com.caucho.network.listen.TcpSocketAcceptThread.run(TcpSocketAcceptThread.java:61) at com.caucho.env.thread2.ResinThread2.runTasks(ResinThread2.java:173) at com.caucho.env.thread2.ResinThread2.run(ResinThread2.java:118) [12-12-13 03:50:22.655] FINEST com.caucho.server.webapp.WebApp getRealPath: /Users/rmann/Projects/Clients/RedBirdStudios/repo/web/trunk/target/build/index.jsp [12-12-13 03:50:22.656] FINEST com.caucho.server.webapp.WebApp getRealPath: /Users/rmann/Projects/Clients/RedBirdStudios/repo/web/trunk/target/build/index.php [12-12-13 03:50:22.656] FINEST com.caucho.server.webapp.WebApp getRealPath: /Users/rmann/Projects/Clients/RedBirdStudios/repo/web/trunk/target/build/index.html [12-12-13 03:50:22.658] FINER com.caucho.server.dispatch.ServletInvocation service: Dispatch '/' to AccessLogFilterChain[ http://localhost:8080 , next=WebAppFilterChain[ http://localhost:8080 , next=ServletFilterChain[resin-file]]] [12-12-13 03:50:22.661] FINEST com.caucho.config.inject.InjectManager resolveRec: InjectManager[web-app:production/webapp/default/ROOT] [12-12-13 03:50:22.665] FINER com.caucho.server.dispatch.ServletConfigImpl createServlet: Servlet[resin-file] active [12-12-13 03:50:22.666] FINER com.caucho.server.dispatch.ServletConfigImpl createServlet: Servlet[resin-file] active [12-12-13 03:50:22.667] FINEST com.caucho.config.inject.InjectManager resolveRec: InjectManager[web-app:production/webapp/default/ROOT] bind(DirectoryServlet,[@Default()]) -&amp;gt; [ManagedBeanImpl[DirectoryServlet, [12-12-13 03:50:22.669] FINER com.caucho.server.dispatch.ServletConfigImpl createServlet: Servlet[directory] active [12-12-13 03:50:22.669] FINER com.caucho.server.dispatch.ServletConfigImpl createServlet: Servlet[directory] active [12-12-13 03:50:22.671] FINE com.caucho.server.http.HttpResponse writeHeadersInt: Http[app-0, 1] HTTP/1.1 404 Not Found [12-12-13 03:50:22.671] FINE com.caucho.server.http.HttpResponse writeHeadersInt: Http[app-0, 1] Content-Type: text/html; charset=utf-8 [12-12-13 03:50:22.671] FINE com.caucho.server.http.HttpResponse writeHeadersInt: Http[app-0, 1] Content-Length: 184 [12-12-13 03:50:22.671] FINER com.caucho.server.http.HttpResponseStream setNextBufferOffsetImpl: Http[app-0, 1] write-set-offset(330) [12-12-13 03:50:22.672] FINE com.caucho.server.http.HttpResponseStream closeNextImpl: Http[app-0, 1] finish/keepalive [12-12-13 03:50:22.688] FINER com.caucho.db.Database parseQuery: Database[/Library/Resin/current/resin-data/app-0/distcache]: SELECT value_hash,value_data_id,value_length,     cache_id,flags, item_version,server_version,     access_timeout,modified_timeout, access_time,modified_time FROM mnode WHERE id=? [12-12-13 03:50:22.689] FINEST com.caucho.db.sql.Query generateWhere: where-1: static null [12-12-13 03:50:22.690] FINEST com.caucho.db.sql.Query generateWhere: index-0: FromItem[mnode AS mnode] (mnode.id = ?1) [12-12-13 03:50:22.690] FINEST com.caucho.db.sql.Query generateWhere: where-0: FromItem[mnode AS mnode] null [12-12-13 03:50:22.691] FINEST com.caucho.server.distcache.MnodeStore load: MnodeStore[app-0] load: no mnode for cache key HashKey[231b7531] [12-12-13 03:50:22.692] FINEST com.caucho.server.distcache.MnodeStore load: MnodeStore[app-0] load: no mnode for cache key HashKey[231b7531] [12-12-13 03:50:22.693] FINE com.caucho.network.listen.TcpSocketLink threadKeepalive: TcpSocketLink[id=1,app-0]  keepalive (thread) [12-12-13 03:51:13.085] FINER com.caucho.network.listen.TcpSocketLink closeConnection: TcpSocketLink[id=1,app-0] closing connection TcpSocketLink[id= http://*:8080-1,http://*:8080,CLOSED ], total=5 Near the end there you can see [12-12-13 03:50:22.658] FINER com.caucho.server.dispatch.ServletInvocation service: Dispatch '/' to AccessLogFilterChain[ http://localhost:8080 , next=WebAppFilterChain[ http://localhost:8080 , next=ServletFilterChain[resin-file]]] -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.33 not dispatching servlet-3.0?</header>
    <date>Thu Dec 13 20:33:19 CET 2012</date>
    <body>That behavior is part of the spec. If the mapping already exists, the addMapping does nothing. It's not an override. I've added a bug report so we might special case the Resin defaults somehow, so those are overridable. -- Scott http://localhost:8080/ . I see this http://*:8080-5,http://*:8080,INIT ] http://*:8080-5 (count=4, idle=3) http://*:8080-5,http://*:8080,INIT ] start http://*:8080-1,http://*:8080,ACCEPT ], total=5 http://*:8080-1,http://*:8080,ACCEPT ] http://localhost:8080 , http://localhost:8080 , http://*:8080-1,http://*:8080,CLOSED ], total=5 http://localhost:8080 , http://localhost:8080 ,</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.33 not dispatching servlet-3.0?</header>
    <date>Thu Dec 13 21:17:00 CET 2012</date>
    <body>Wait, really? In my web.xml, I used to have: And you're saying that the new hotness doesn't allow me to do that? Or is there a way to avoid the resin mapping? -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.33 not dispatching servlet-3.0?</header>
    <date>Thu Dec 13 21:37:16 CET 2012</date>
    <body>Yep, the new spec feature works backwards from Resin's configuration behavior. (No, I don't know why they chose that definition.) That's what the bug report would be. We'd have to add some kind of configuration or marker to let Resin's configuration be a lower priority. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.33 not dispatching servlet-3.0?</header>
    <date>Thu Dec 13 21:49:32 CET 2012</date>
    <body>Okay, so it sounds like I'll have to go back to pre-3.0 configuration for the foreseeable future. Hate to say it, because you guys do such great work, but it seems that as currently implemented, resin can't be used as a servlet 3.0 container. Let me ask this: the only URL I really need to run through Spring's DispatcherServet is /service/**. I had been running everything through it so my Spring controllers could handle everything, but I don't need that right now. Should I be able to register it for "/service" and get what I need? Also, is resin creating that ContextLoaderListener on its own? Sent from my iPhone http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.33 not dispatching servlet-3.0?</header>
    <date>Thu Dec 13 22:11:17 CET 2012</date>
    <body>Yep. You can use "/*" as well. It's only exact matches that are rejected, and "/" exactly matches the default file servlet. I'm not sure what you mean. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin .33 loading listener?</header>
    <date>Thu Dec 13 12:13:46 CET 2012</date>
    <body>It seems, but I can't be sure, that resin is taking it upon itself to load a ServletContextListener implementation in Spring. Unfortunately, doing so causes an error. [12-13 02:10:06.091] WARNING com.caucho.server.webapp.WebApp start: java.lang.IllegalStateException: Cannot initialize context because there is already a root application context present - check whether you have multiple ContextLoader* definitions in your web.xml! at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:264) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112) at com.caucho.server.webapp.WebApp.start(WebApp.java:3637) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:688) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:77) ... I have no .xml files in my webapp, so I'm not sure where this is coming from. Any ideas? -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Deprecation warnings in 4.0.33 snap</header>
    <date>Thu Dec 13 07:30:56 CET 2012</date>
    <body>FYI, I get a bunch of warnings building on OS X 10.8.2 gcc -g -O2 -D_POSIX_PTHREAD_SEMANTICS -DB64 -DHAS_SOCK_TIMEOUT -DHAS_JVMTI -DRESIN_HOME=\"/Library/Resin/current\" -I/usr/include -I/System/Library/Frameworks/JavaVM.framework/Headers -I../common -I../resin_os -DCPU=\"x86_64\" -DOS=  -DSHARED_MODULE  -DSSL_ENGINE   -c -o ssl.o ssl.c ssl.c: In function ‘ssl_verify_callback’: ssl.c:266: warning: ‘X509_STORE_CTX_get_ex_data’ is deprecated (declared at /usr/include/openssl/x509_vfy.h:450) ssl.c:272: warning: ‘X509_STORE_CTX_get_error_depth’ is deprecated (declared at /usr/include/openssl/x509_vfy.h:453) ssl.c:274: warning: ‘SSL_get_ex_data’ is deprecated (declared at /usr/include/openssl/ssl.h:1587) ssl.c:296: warning: ‘X509_STORE_CTX_get_error’ is deprecated (declared at /usr/include/openssl/x509_vfy.h:451) ssl.c: In function ‘ssl_new_session_cache_callback’: ssl.c:327: warning: ‘SSL_get_ex_data’ is deprecated (declared at /usr/include/openssl/ssl.h:1587) ssl.c: In function ‘ssl_init_locks’: ssl.c:426: warning: ‘CRYPTO_num_locks’ is deprecated (declared at /usr/include/openssl/crypto.h:415) ssl.c:444: warning: ‘CRYPTO_set_id_callback’ is deprecated (declared at /usr/include/openssl/crypto.h:425) ssl.c:445: warning: ‘CRYPTO_set_locking_callback’ is deprecated (declared at /usr/include/openssl/crypto.h:418) ssl.c:447: warning: ‘CRYPTO_set_dynlock_create_callback’ is deprecated (declared at /usr/include/openssl/crypto.h:438) ssl.c:448: warning: ‘CRYPTO_set_dynlock_lock_callback’ is deprecated (declared at /usr/include/openssl/crypto.h:439) ssl.c:449: warning: ‘CRYPTO_set_dynlock_destroy_callback’ is deprecated (declared at /usr/include/openssl/crypto.h:440) ssl.c: In function ‘ssl_create_context’: ssl.c:469: warning: ‘SSLv23_server_method’ is deprecated (declared at /usr/include/openssl/ssl.h:1516) ssl.c:473: warning: ‘ENGINE_by_id’ is deprecated (declared at /usr/include/openssl/engine.h:324) ssl.c:480: warning: ‘ENGINE_set_default’ is deprecated (declared at /usr/include/openssl/engine.h:588) ssl.c:482: warning: ‘ERR_print_errors_cb’ is deprecated (declared at /usr/include/openssl/err.h:285) ssl.c:492: warning: ‘ENGINE_free’ is deprecated (declared at /usr/include/openssl/engine.h:457) ssl.c:496: warning: ‘SSL_CTX_new’ is deprecated (declared at /usr/include/openssl/ssl.h:1346) ssl.c:496: warning: passing argument 1 of ‘SSL_CTX_new’ discards qualifiers from pointer target type ssl.c:500: warning: ‘ERR_print_errors_cb’ is deprecated (declared at /usr/include/openssl/err.h:285) ssl.c:510: warning: ‘SSL_CTX_ctrl’ is deprecated (declared at /usr/include/openssl/ssl.h:1498) ssl.c:512: warning: ‘SSL_CTX_ctrl’ is deprecated (declared at /usr/include/openssl/ssl.h:1498) ssl.c:514: warning: ‘SSL_CTX_ctrl’ is deprecated (declared at /usr/include/openssl/ssl.h:1498) ssl.c:516: warning: ‘SSL_CTX_ctrl’ is deprecated (declared at /usr/include/openssl/ssl.h:1498) ssl.c:524: warning: ‘SSL_CTX_set_default_passwd_cb’ is deprecated (declared at /usr/include/openssl/ssl.h:1472) ssl.c:525: warning: ‘SSL_CTX_set_default_passwd_cb_userdata’ is deprecated (declared at /usr/include/openssl/ssl.h:1473) ssl.c:528: warning: ‘SSL_CTX_use_certificate_file’ is deprecated (declared at /usr/include/openssl/ssl.h:1402) ssl.c:536: warning: ‘SSL_CTX_use_PrivateKey_file’ is deprecated (declared at /usr/include/openssl/ssl.h:1401) ssl.c:545: warning: ‘SSL_CTX_check_private_key’ is deprecated (declared at /usr/include/openssl/ssl.h:1475) ssl.c:552: warning: ‘SSL_CTX_use_certificate_chain_file’ is deprecated (declared at /usr/include/openssl/ssl.h:1403) ssl.c:566: warning: ‘SSL_CTX_set_verify’ is deprecated (declared at /usr/include/openssl/ssl.h:1459) ssl.c:572: warning: ‘SSL_CTX_ctrl’ is deprecated (declared at /usr/include/openssl/ssl.h:1498) ssl.c:573: warning: ‘SSL_CTX_set_session_id_context’ is deprecated (declared at /usr/include/openssl/ssl.h:1479) ssl.c:579: warning: ‘SSL_CTX_set_timeout’ is deprecated (declared at /usr/include/openssl/ssl.h:1348) ssl.c:588: warning: ‘SSL_CTX_ctrl’ is deprecated (declared at /usr/include/openssl/ssl.h:1498) ssl.c:593: warning: ‘SSL_CTX_set_cipher_list’ is deprecated (declared at /usr/include/openssl/ssl.h:1345) ssl.c:601: warning: ‘RSA_generate_key’ is deprecated (declared at /usr/include/openssl/rsa.h:261) ssl.c:611: warning: ‘RSA_generate_key’ is deprecated (declared at /usr/include/openssl/rsa.h:261) ssl.c:621: warning: ‘SSL_CTX_load_verify_locations’ is deprecated (declared at /usr/include/openssl/ssl.h:1572) ssl.c:633: warning: ‘SSL_CTX_set_default_verify_paths’ is deprecated (declared at /usr/include/openssl/ssl.h:1570) ssl.c:641: warning: ‘SSL_load_client_CA_file’ is deprecated (declared at /usr/include/openssl/ssl.h:1404) ssl.c:643: warning: ‘SSL_CTX_set_client_CA_list’ is deprecated (declared at /usr/include/openssl/ssl.h:1542) ssl.c:653: warning: ‘X509_STORE_load_locations’ is deprecated (declared at /usr/include/openssl/x509_vfy.h:443) ssl.c:653: warning: ‘SSL_CTX_get_cert_store’ is deprecated (declared at /usr/include/openssl/ssl.h:1350) ssl.c: In function ‘ssl_safe_free’: ssl.c:683: warning: ‘SSL_set_shutdown’ is deprecated (declared at /usr/include/openssl/ssl.h:1567) ssl.c:685: warning: ‘SSL_set_shutdown’ is deprecated (declared at /usr/include/openssl/ssl.h:1567) ssl.c:687: warning: ‘SSL_set_shutdown’ is deprecated (declared at /usr/include/openssl/ssl.h:1567) ssl.c:690: warning: ‘SSL_shutdown’ is deprecated (declared at /usr/include/openssl/ssl.h:1532) ssl.c:693: warning: ‘SSL_set_ex_data’ is deprecated (declared at /usr/include/openssl/ssl.h:1586) ssl.c:698: warning: ‘SSL_free’ is deprecated (declared at /usr/include/openssl/ssl.h:1490) ssl.c: In function ‘ssl_open’: ssl.c:763: warning: ‘SSL_new’ is deprecated (declared at /usr/include/openssl/ssl.h:1481) ssl.c:780: warning: ‘SSL_set_fd’ is deprecated (declared at /usr/include/openssl/ssl.h:1370) ssl.c:781: warning: ‘SSL_set_ex_data’ is deprecated (declared at /usr/include/openssl/ssl.h:1586) ssl.c:783: warning: ‘SSL_set_tmp_rsa_callback’ is deprecated (declared at /usr/include/openssl/ssl.h:1635) ssl.c:786: warning: ‘SSL_accept’ is deprecated (declared at /usr/include/openssl/ssl.h:1491) ssl.c:788: warning: ‘SSL_get_error’ is deprecated (declared at /usr/include/openssl/ssl.h:1501) ssl.c:794: warning: ‘SSL_get_error’ is deprecated (declared at /usr/include/openssl/ssl.h:1501) ssl.c:806: warning: ‘ERR_print_errors_cb’ is deprecated (declared at /usr/include/openssl/err.h:285) ssl.c:820: warning: ‘SSL_set_ex_data’ is deprecated (declared at /usr/include/openssl/ssl.h:1586) ssl.c:821: warning: ‘SSL_free’ is deprecated (declared at /usr/include/openssl/ssl.h:1490) ssl.c:826: warning: ‘SSL_get_current_cipher’ is deprecated (declared at /usr/include/openssl/ssl.h:1357) ssl.c:829: warning: ‘SSL_CIPHER_get_name’ is deprecated (declared at /usr/include/openssl/ssl.h:1360) ssl.c:830: warning: ‘SSL_CIPHER_get_bits’ is deprecated (declared at /usr/include/openssl/ssl.h:1358) ssl.c: In function ‘ssl_read’: ssl.c:893: warning: ‘SSL_pending’ is deprecated (declared at /usr/include/openssl/ssl.h:1368) ssl.c:916: warning: ‘SSL_read’ is deprecated (declared at /usr/include/openssl/ssl.h:1493) ssl.c:922: warning: ‘SSL_get_error’ is deprecated (declared at /usr/include/openssl/ssl.h:1501) ssl.c:971: warning: ‘ERR_print_errors_cb’ is deprecated (declared at /usr/include/openssl/err.h:285) ssl.c: In function ‘ssl_write’: ssl.c:1040: warning: ‘SSL_write’ is deprecated (declared at /usr/include/openssl/ssl.h:1495) ssl.c:1052: warning: ‘SSL_get_error’ is deprecated (declared at /usr/include/openssl/ssl.h:1501) ssl.c:1081: warning: ‘ERR_print_errors_cb’ is deprecated (declared at /usr/include/openssl/err.h:285) ssl.c: In function ‘ssl_close’: ssl.c:1114: warning: ‘SSL_set_ex_data’ is deprecated (declared at /usr/include/openssl/ssl.h:1586) ssl.c: In function ‘ssl_read_client_certificate’: ssl.c:1153: warning: ‘SSL_get_peer_certificate’ is deprecated (declared at /usr/include/openssl/ssl.h:1450) ssl.c:1158: warning: ‘BIO_new’ is deprecated (declared at /usr/include/openssl/bio.h:581) ssl.c:1158: warning: ‘BIO_s_mem’ is deprecated (declared at /usr/include/openssl/bio.h:616) ssl.c:1160: warning: ‘BIO_ctrl’ is deprecated (declared at /usr/include/openssl/bio.h:590) ssl.c:1163: warning: ‘BIO_read’ is deprecated (declared at /usr/include/openssl/bio.h:585) ssl.c:1165: warning: ‘BIO_free’ is deprecated (declared at /usr/include/openssl/bio.h:583) ssl.c: In function ‘Java_com_caucho_vfs_OpenSSLFactory_nativeInit’: ssl.c:1380: warning: ‘OPENSSL_add_all_algorithms_noconf’ is deprecated (declared at /usr/include/openssl/evp.h:828) ssl.c:1381: warning: ‘SSL_load_error_strings’ is deprecated (declared at /usr/include/openssl/ssl.h:1416) ssl.c:1382: warning: ‘SSL_library_init’ is deprecated (declared at /usr/include/openssl/ssl.h:1553) ssl.c:1383: warning: ‘SSL_library_init’ is deprecated (declared at /usr/include/openssl/ssl.h:1553) -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Deprecation warnings in 4.0.33 snap</header>
    <date>Thu Dec 13 18:22:48 CET 2012</date>
    <body>Yes I got these also when I upgraded to Mountain Lion, on Resin 4.0.32 also. (Phew lots of OSX upgrades just to get on Java 7!) I've entered a bug report: http://bugs.caucho.com/view.php?id=5313 but it doesn't look like an urgent issue. Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest ======================= Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>[Resin-interest] Last Resource Commit Optimization / Last Resource	Gambit</header>
    <date>Wed Dec 12 20:50:27 CET 2012</date>
    <body>Is there any way to achieve Last Resource Commit Optimization / Last Resource Gambit with Resins XA/JTA implementation...? --</body>
  </mail>
  <mail>
    <header>[Resin-interest] servlet-3.0 annotation config</header>
    <date>Wed Dec 12 13:47:07 CET 2012</date>
    <body>I'm trying to implement this ("A 100% code-based approach to configuration"): http://static.springsource.org/spring/docs/3.2.0.RC2/javadoc-api/ When I run resin 4.0.30, I get: No Spring WebApplicationInitializer types detected on classpath But I definitely have a class: public class WebappInitializer implements org.springframework.web.WebApplicationInitializer ... Since it seems that message is coming from Spring, that means that resin is probably doing its job. But I thought I'd ask here anyway as to why it's missing a class that Springs docs say it should find. Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] servlet-3.0 annotation config</header>
    <date>Wed Dec 12 19:07:59 CET 2012</date>
    <body>http://static.springsource.org/spring/docs/3.2.0.RC2/javadoc-api/ It sounds like a Resin bug that will be in the next release. Servlet 3.0 added a jar scanning system that extensions can use, but we didn't implement properly (and wasn't caught by the TCK.) The issue also affects jersey. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] servlet-3.0 annotation config</header>
    <date>Wed Dec 12 20:06:04 CET 2012</date>
    <body>D'oh! I'm rather urgently needing this. Is there an ETA for .33? -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] servlet-3.0 annotation config</header>
    <date>Wed Dec 12 21:03:51 CET 2012</date>
    <body>We're working on the regressions. There was a bit of a delay because an opportunity for an early Resin 7 websocket deployment came up, so that got a bit fast-tracked. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] servlet-3.0 annotation config</header>
    <date>Thu Dec 13 03:32:21 CET 2012</date>
    <body>There's a snapshot available at http://caucho.com/download/resin-pro-4_0-snap.tar.gz . It will probably be Friday before a final release. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] servlet-3.0 annotation config</header>
    <date>Thu Dec 13 07:38:41 CET 2012</date>
    <body>http://caucho.com/download/resin-pro-4_0-snap.tar.gz . Thanks, Scott. That seemed to fix the issue. Friday will be fine. Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] servlet-3.0 annotation config</header>
    <date>Thu Dec 13 16:10:08 CET 2012</date>
    <body>Did i just read 'Resin 7'? :-) Scott Ferguson &amp;lt;f...@caucho.com&amp;gt; schrieb: http://caucho.com/download/resin-pro-4_0-snap.tar.gz . http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] servlet-3.0 annotation config</header>
    <date>Thu Dec 13 18:47:32 CET 2012</date>
    <body>Did i just read 'Resin 7'? :-) Yep. We're syncing with JavaEE 7 because I'm tired of trying to remember which versions of things go with which JavaEE version :) -- Scott Scott Ferguson &amp;lt;f...@caucho.com&amp;gt; schrieb: On Dec 12, 2012, at 10:07 , Scott Ferguson It sounds like a Resin bug that will be in the next release. Servlet 3.0 added a jar scanning system that extensions can use, but we didn't implement properly (and wasn't caught by the TCK.) The issue also affects jersey. D'oh! I'm rather urgently needing this. Is there an ETA for .33? We're working o n the regressions. There was a bit of a delay because an opportunity for an early Resin 7 websocket deployment came up, so that got a bit fast-tracked. There's a snapshot available at http://caucho.com/download/resin-pro-4_0-snap.tar.gz . It will probably be Friday before a final release. -- Scott -- Scott ------------------------------------------------------------------------ resin-interest mailing list resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest ------------------------------------------------------------------------ resin-interest mailing list resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Configuration for scaling</header>
    <date>Wed Dec 12 05:39:40 CET 2012</date>
    <body>Hi. I'm running resin 4.0.32 (?) on a couple of virtual hosts at Rackspace on Ubuntu. These are small machines, 512 MB of RAM, but they're pretty much only running their resin (free) instance. I'm doing some rudimentary load testing with JMeter. I have a script that makes three calls to the REST service implemented in my webapp. When I try to do 1000 simultaneous connections (via round-robin load balancing onto two nodes, so figure ~500 near-simultaneous connections), my app starts throwing exceptions about not being able to open connections to the DB: Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: User gcs already has more than 'max_user_connections' active connections So, clearly I need to expand the DB's capabilities. But JMeter also reports a nunch of these: HTTP response code: java.net.SocketException" rm="Non HTTP response message: My configuration is basically out-of-the-box resin.xml. I can increase the amount of RAM available, there's no session state being stored. I'm wondering what config settings to look into increasing (number of threads? Connections allowed?) Any guidance on how much RAM one needs for a given number of threads and connections? Sorry for the rudimentary question, but this is the first time I've been responsible for making sure our web app stays up, and I don't have a good idea how many requests we might need to support. Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Configuration for scaling</header>
    <date>Wed Dec 12 20:58:07 CET 2012</date>
    <body>You probably want to run "ulimit -a" in your shell and see if you may be running up against the limit for the number of open files per OS user. Also, with small heaps (256MB) and very dynamic URLs I have found that Resin's "invocation cache" takes almost the entire heap.  At least as of version 3.1.8.  Luckily it is relatively easy to configure is smaller (&amp;lt;invocation-cache-size&amp;gt;). Good luck, Knut Forkalsrud http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] BEAST SSL Attack</header>
    <date>Mon Dec 03 16:53:32 CET 2012</date>
    <body>For PCI compliance we are supposed to address the SSL BEAST attack by prioritizing SSL cipher suites. Any clue how to do that with JSSE?  We are using JSSE because we run Resin uncompiled.   Am I correct in thinking that in order to run OpenSSL we HAVE to compile Resin?  Or is there a way to make it work running uncompiled?  If so, we can prioritize the cipher suites with OpenSSL, correct? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Wed Dec 05 04:01:11 CET 2012</date>
    <body>In the days of Resin 2.1.4 and http://www.caucho.com/resin-3.1/changes/changes-2.xtp was such a feature, however it seems to have lapsed.  I remember because there was a similar issue with MSIE http://support.microsoft.com/default.aspx?scid=kb;en-us;Q305217 . I my good old copy of Resin 3.1.8 there are remains the feature. If you bring up the source code for com.caucho.vfs.JsseSSLFactory.create(host, port) you will find a block of code commented out. Then there was a second incarnation where you could specify cipher suites. That seems to have dies some time around Aug 2009 with the commit: https://github.com/mdaniel/svn-caucho-com-resin/commit/96de31370ffd0153eb45fc49725a9b796bc11224#modules/resin/src/com/caucho/vfs/JsseSSLFactory.java I suspect you could get it going again if you have the fortitude to play around with Resin's source code and build your own. Good luck, Knut Forkalsrud</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Wed Dec 05 04:31:21 CET 2012</date>
    <body>Actually, I got it wrong in my previous mail.  The feature should be working. There is a ticket describing the feature: http://bugs.caucho.com/view.php?id=3593 On Tue, Dec 4, 2012 at 7:00 PM, Knut Forkalsrud http://www.caucho.com/resin-3.1/changes/changes-2.xtp http://support.microsoft.com/default.aspx?scid=kb;en-us;Q305217 . https://github.com/mdaniel/svn-caucho-com-resin/commit/96de31370ffd0153eb45fc49725a9b796bc11224#modules/resin/src/com/caucho/vfs/JsseSSLFactory.java</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Wed Dec 05 14:13:56 CET 2012</date>
    <body>Knut, Thanks a bunch for your reply.   I saw you referencing another email you sent, but this is the only one I saw come through the group. At any rate, we are already using the cipher-suites feature, but in this case that’s not enough.   They are telling us that we actually have to be able to prioritize the order that the suites are negotiated on the server side.  The only cipher suites guaranteed not to have the BEAST attack issue are ones that aren’t wide-spread yet (TLSv1.1) however if we can put TLSv1.0 in a specific order that will suffice for PCI compliance. This bug for Tomcat addresses the issue and gives good details about a directive, SSLHonorCipherOrder, that handles the problem: https://issues.apache.org/bugzilla/show_bug.cgi?id=53481 Any other ideas for Resin? Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Knut Forkalsrud Sent: Tuesday, December 04, 2012 9:31 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack Actually, I got it wrong in my previous mail.  The feature should be working. There is a ticket describing the feature: http://bugs.caucho.com/view.php?id=3593 In the days of Resin 2.1.4 and onwards http://www.caucho.com/resin-3.1/changes/changes-2.xtp feature, however it seems to have lapsed.  I remember because there was a similar issue with MSIE http://support.microsoft.com/default.aspx?scid=kb;en-us;Q305217 . I my good old copy of Resin 3.1.8 there are remains the feature. If you bring up the source code for com.caucho.vfs.JsseSSLFactory.create(host, port) you will find a block of code commented out. Then there was a second incarnation where you could specify cipher suites. That seems to have dies some time around Aug 2009 with the commit: https://github.com/mdaniel/svn-caucho-com-resin/commit/96de31370ffd0153eb45fc49725a9b796bc11224#modules/resin/src/com/caucho/vfs/JsseSSLFactory.java I suspect you could get it going again if you have the fortitude to play around with Resin's source code and build your own. Good luck, Knut Forkalsrud SSL BEAST</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Wed Dec 05 16:02:50 CET 2012</date>
    <body>Hi Folks, Resin does not support "SSLHonorCipherOrder" yet.  We already received a request from another customer and there is a feature request for this here: http://bugs.caucho.com/view.php?id=5282 This is an OpenSSL feature, not JSSE.  We'll be implementing it in an upcoming release.  Probably it will be in 4.0.44, as .43 is due for release soon. Thanks, Paul https://issues.apache.org/bugzilla/show_bug.cgi?id=53481 mailto:resin-interest-boun...@caucho.com ] On Behalf Of Knut Forkalsrud http://bugs.caucho.com/view.php?id=3593 http://support.microsoft.com/default.aspx?scid=kb;en-us;Q305217 . https://github.com/mdaniel/svn-caucho-com-resin/commit/96de31370ffd0153eb45fc49725a9b796bc11224#modules/resin/src/com/caucho/vfs/JsseSSLFactory.java http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Wed Dec 05 17:51:13 CET 2012</date>
    <body>Very good, I appreciate the feedback. Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Paul Cowan Sent: Wednesday, December 05, 2012 9:02 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack Hi Folks, Resin does not support "SSLHonorCipherOrder" yet.  We already received a request from another customer and there is a feature request for this here: http://bugs.caucho.com/view.php?id=5282 This is an OpenSSL feature, not JSSE.  We'll be implementing it in an upcoming release.  Probably it will be in 4.0.44, as .43 is due for release soon. Thanks, Paul Knut, Thanks a bunch for your reply.   I saw you referencing another email you sent, but this is the only one I saw come through the group. At any rate, we are already using the cipher-suites feature, but in this case that's not enough.   They are telling us that we actually have to be able to prioritize the order that the suites are negotiated on the server side.  The only cipher suites guaranteed not to have the BEAST attack issue are ones that aren't wide-spread yet (TLSv1.1) however if we can put TLSv1.0 in a specific order that will suffice for PCI compliance. This bug for Tomcat addresses the issue and gives good details about a directive, SSLHonorCipherOrder, that handles the problem: https://issues.apache.org/bugzilla/show_bug.cgi?id=53481 Any other ideas for Resin? Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Knut Forkalsrud Sent: Tuesday, December 04, 2012 9:31 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack Actually, I got it wrong in my previous mail.  The feature should be working. There is a ticket describing the feature: http://bugs.caucho.com/view.php?id=3593 In the days of Resin 2.1.4 and onwards http://www.caucho.com/resin-3.1/changes/changes-2.xtp feature, however it seems to have lapsed.  I remember because there was a similar issue with MSIE http://support.microsoft.com/default.aspx?scid=kb;en-us;Q305217 . I my good old copy of Resin 3.1.8 there are remains the feature. If you bring up the source code for com.caucho.vfs.JsseSSLFactory.create(host, port) you will find a block of code commented out. Then there was a second incarnation where you could specify cipher suites. That seems to have dies some time around Aug 2009 with the commit: https://github.com/mdaniel/svn-caucho-com-resin/commit/96de31370ffd0153eb45f c49725a9b796bc11224#modules/resin/src/com/caucho/vfs/JsseSSLFactory.java I suspect you could get it going again if you have the fortitude to play around with Resin's source code and build your own. Good luck, Knut Forkalsrud SSL BEAST</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Wed Jan 02 20:58:46 CET 2013</date>
    <body>We have now been scanned and been found to be non-compliant due to lack of the ability to order ciphers.   Is there any timeframe we might expect even a snapshot to have this capability? Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Wednesday, December 05, 2012 10:51 AM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] BEAST SSL Attack Very good, I appreciate the feedback. Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Paul Cowan Sent: Wednesday, December 05, 2012 9:02 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack Hi Folks, Resin does not support "SSLHonorCipherOrder" yet.  We already received a request from another customer and there is a feature request for this here: http://bugs.caucho.com/view.php?id=5282 This is an OpenSSL feature, not JSSE.  We'll be implementing it in an upcoming release.  Probably it will be in 4.0.44, as .43 is due for release soon. Thanks, Paul Knut, Thanks a bunch for your reply.   I saw you referencing another email you sent, but this is the only one I saw come through the group. At any rate, we are already using the cipher-suites feature, but in this case that's not enough.   They are telling us that we actually have to be able to prioritize the order that the suites are negotiated on the server side.  The only cipher suites guaranteed not to have the BEAST attack issue are ones that aren't wide-spread yet (TLSv1.1) however if we can put TLSv1.0 in a specific order that will suffice for PCI compliance. This bug for Tomcat addresses the issue and gives good details about a directive, SSLHonorCipherOrder, that handles the problem: https://issues.apache.org/bugzilla/show_bug.cgi?id=53481 Any other ideas for Resin? Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Knut Forkalsrud Sent: Tuesday, December 04, 2012 9:31 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack Actually, I got it wrong in my previous mail.  The feature should be working. There is a ticket describing the feature: http://bugs.caucho.com/view.php?id=3593 In the days of Resin 2.1.4 and onwards http://www.caucho.com/resin-3.1/changes/changes-2.xtp feature, however it seems to have lapsed.  I remember because there was a similar issue with MSIE http://support.microsoft.com/default.aspx?scid=kb;en-us;Q305217 . I my good old copy of Resin 3.1.8 there are remains the feature. If you bring up the source code for com.caucho.vfs.JsseSSLFactory.create(host, port) you will find a block of code commented out. Then there was a second incarnation where you could specify cipher suites. That seems to have dies some time around Aug 2009 with the commit: https://github.com/mdaniel/svn-caucho-com-resin/commit/96de31370ffd0153eb45f c49725a9b796bc11224#modules/resin/src/com/caucho/vfs/JsseSSLFactory.java I suspect you could get it going again if you have the fortitude to play around with Resin's source code and build your own. Good luck, Knut Forkalsrud SSL BEAST</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Wed Jan 02 22:37:21 CET 2013</date>
    <body>We have now been scanned and been found to be non-compliant due to lack of the ability to order ciphers.   Is there any timeframe we might expect even a snapshot to have this capability? I'll see if I can get a snapshot this week. -- Scott Thanks, Aaron *From:*resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] *On Behalf Of *Aaron Freeman *Sent:* Wednesday, December 05, 2012 10:51 AM *To:* 'General Discussion for the Resin application server' *Subject:* Re: [Resin-interest] BEAST SSL Attack Very good, I appreciate the feedback. Thanks, Aaron *From:*resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] *On Behalf Of *Paul Cowan *Sent:* Wednesday, December 05, 2012 9:02 AM *To:* General Discussion for the Resin application server *Subject:* Re: [Resin-interest] BEAST SSL Attack Hi Folks, Resin does not support "SSLHonorCipherOrder" yet.  We already received a request from another customer and there is a feature request for this here: http://bugs.caucho.com/view.php?id=5282 This is an OpenSSL feature, not JSSE.  We'll be implementing it in an upcoming release.  Probably it will be in 4.0.44, as .43 is due for release soon. Thanks, Paul Knut, Thanks a bunch for your reply.   I saw you referencing another email you sent, but this is the only one I saw come through the group. At any rate, we are already using the cipher-suites feature, but in this case that's not enough. They are telling us that we actually have to be able to prioritize the order that the suites are negotiated on the server side.  The only cipher suites guaranteed not to have the BEAST attack issue are ones that aren't wide-spread yet (TLSv1.1) however if we can put TLSv1.0 in a specific order that will suffice for PCI compliance. This bug for Tomcat addresses the issue and gives good details about a directive, SSLHonorCipherOrder, that handles the problem: https://issues.apache.org/bugzilla/show_bug.cgi?id=53481 Any other ideas for Resin? Aaron *From:*resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com]*On Behalf Of*Knut Forkalsrud *Sent:*Tuesday, December 04, 2012 9:31 PM *To:*General Discussion for the Resin application server *Subject:*Re: [Resin-interest] BEAST SSL Attack Actually, I got it wrong in my previous mail.  The feature should be working. There is a ticket describing the feature: http://bugs.caucho.com/view.php?id=3593 On Tue, Dec 4, 2012 at 7:00 PM, Knut Forkalsrud mailto:knut-cau...@forkalsrud.org In the days of Resin2.1.4 and onwards http://www.caucho.com/resin-3.1/changes/changes-2.xtp a feature, however it seems to have lapsed.  I remember because there was a similar issue with MSIE http://support.microsoft.com/default.aspx?scid=kb;en-us;Q305217 . I my good old copy of Resin 3.1.8 there are remains the feature. If you bring up the source code for com.caucho.vfs.JsseSSLFactory.create(host, port) you will find a block of code commented out. Then there was a second incarnation where you could specify cipher suites.  That seems to have dies some time around Aug 2009 with the commit: https://github.com/mdaniel/svn-caucho-com-resin/commit/96de31370ffd0153eb45fc49725a9b796bc11224#modules/resin/src/com/caucho/vfs/JsseSSLFactory.java I suspect you could get it going again if you have the fortitude to play around with Resin's source code and build your own. Good luck, Knut Forkalsrud On Mon, Dec 3, 2012 at 7:53 AM, Aaron Freeman mailto:aaron.free...@layerz.com SSL BEAST</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Wed Jan 02 23:16:22 CET 2013</date>
    <body>Awesome, looking forward to it! -a From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Wednesday, January 02, 2013 3:37 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack We have now been scanned and been found to be non-compliant due to lack of the ability to order ciphers.   Is there any timeframe we might expect even a snapshot to have this capability? I'll see if I can get a snapshot this week. -- Scott Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Wednesday, December 05, 2012 10:51 AM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] BEAST SSL Attack Very good, I appreciate the feedback. Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Paul Cowan Sent: Wednesday, December 05, 2012 9:02 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack Hi Folks, Resin does not support "SSLHonorCipherOrder" yet.  We already received a request from another customer and there is a feature request for this here: http://bugs.caucho.com/view.php?id=5282 This is an OpenSSL feature, not JSSE.  We'll be implementing it in an upcoming release.  Probably it will be in 4.0.44, as .43 is due for release soon. Thanks, Paul Knut, Thanks a bunch for your reply.   I saw you referencing another email you sent, but this is the only one I saw come through the group. At any rate, we are already using the cipher-suites feature, but in this case that's not enough.   They are telling us that we actually have to be able to prioritize the order that the suites are negotiated on the server side.  The only cipher suites guaranteed not to have the BEAST attack issue are ones that aren't wide-spread yet (TLSv1.1) however if we can put TLSv1.0 in a specific order that will suffice for PCI compliance. This bug for Tomcat addresses the issue and gives good details about a directive, SSLHonorCipherOrder, that handles the problem: https://issues.apache.org/bugzilla/show_bug.cgi?id=53481 Any other ideas for Resin? Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Knut Forkalsrud Sent: Tuesday, December 04, 2012 9:31 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack Actually, I got it wrong in my previous mail.  The feature should be working. There is a ticket describing the feature: http://bugs.caucho.com/view.php?id=3593 In the days of Resin 2.1.4 and onwards http://www.caucho.com/resin-3.1/changes/changes-2.xtp feature, however it seems to have lapsed.  I remember because there was a similar issue with MSIE http://support.microsoft.com/default.aspx?scid=kb;en-us;Q305217 . I my good old copy of Resin 3.1.8 there are remains the feature. If you bring up the source code for com.caucho.vfs.JsseSSLFactory.create(host, port) you will find a block of code commented out. Then there was a second incarnation where you could specify cipher suites. That seems to have dies some time around Aug 2009 with the commit: https://github.com/mdaniel/svn-caucho-com-resin/commit/96de31370ffd0153eb45f c49725a9b796bc11224#modules/resin/src/com/caucho/vfs/JsseSSLFactory.java I suspect you could get it going again if you have the fortitude to play around with Resin's source code and build your own. Good luck, Knut Forkalsrud SSL BEAST</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Sun Jan 06 02:14:22 CET 2013</date>
    <body>Hi Scott, We need this too. Thanks, Keith We have now been scanned and been found to be non-compliant due to lack of the ability to order ciphers.   Is there any timeframe we might expect even a snapshot to have this capability? I'll see if I can get a snapshot this week. -- Scott Thanks, Aaron *From:*resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] *On Behalf Of *Aaron Freeman *Sent:* Wednesday, December 05, 2012 10:51 AM *To:* 'General Discussion for the Resin application server' *Subject:* Re: [Resin-interest] BEAST SSL Attack Very good, I appreciate the feedback. Thanks, Aaron *From:*resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] *On Behalf Of *Paul Cowan *Sent:* Wednesday, December 05, 2012 9:02 AM *To:* General Discussion for the Resin application server *Subject:* Re: [Resin-interest] BEAST SSL Attack Hi Folks, Resin does not support "SSLHonorCipherOrder" yet.  We already received a request from another customer and there is a feature request for this here: http://bugs.caucho.com/view.php?id=5282 This is an OpenSSL feature, not JSSE.  We'll be implementing it in an upcoming release.  Probably it will be in 4.0.44, as .43 is due for release soon. Thanks, Paul Knut, Thanks a bunch for your reply.   I saw you referencing another email you sent, but this is the only one I saw come through the group. At any rate, we are already using the cipher-suites feature, but in this case that's not enough.   They are telling us that we actually have to be able to prioritize the order that the suites are negotiated on the server side.  The only cipher suites guaranteed not to have the BEAST attack issue are ones that aren't wide-spread yet (TLSv1.1) however if we can put TLSv1.0 in a specific order that will suffice for PCI compliance. This bug for Tomcat addresses the issue and gives good details about a directive, SSLHonorCipherOrder, that handles the problem: https://issues.apache.org/bugzilla/show_bug.cgi?id=53481 Any other ideas for Resin? Aaron *From:*resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com]*On Behalf Of*Knut Forkalsrud *Sent:*Tuesday, December 04, 2012 9:31 PM *To:*General Discussion for the Resin application server *Subject:*Re: [Resin-interest] BEAST SSL Attack Actually, I got it wrong in my previous mail.  The feature should be working. There is a ticket describing the feature: http://bugs.caucho.com/view.php?id=3593 On Tue, Dec 4, 2012 at 7:00 PM, Knut Forkalsrud mailto:knut-cau...@forkalsrud.org In the days of Resin2.1.4 and onwards http://www.caucho.com/resin-3.1/changes/changes-2.xtp a feature, however it seems to have lapsed.  I remember because there was a similar issue with MSIE http://support.microsoft.com/default.aspx?scid=kb;en-us;Q305217 . I my good old copy of Resin 3.1.8 there are remains the feature. If you bring up the source code for com.caucho.vfs.JsseSSLFactory.create(host, port) you will find a block of code commented out. Then there was a second incarnation where you could specify cipher suites.  That seems to have dies some time around Aug 2009 with the commit: https://github.com/mdaniel/svn-caucho-com-resin/commit/96de31370ffd0153eb45fc49725a9b796bc11224#modules/resin/src/com/caucho/vfs/JsseSSLFactory.java I suspect you could get it going again if you have the fortitude to play around with Resin's source code and build your own. Good luck, Knut Forkalsrud On Mon, Dec 3, 2012 at 7:53 AM, Aaron Freeman mailto:aaron.free...@layerz.com SSL BEAST</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Wed Jan 09 02:42:21 CET 2013</date>
    <body>Hi Scott, We need this too. Can you try http://caucho.com/download/resin-pro-4_0-snap.tar.gz The configuration is &amp;lt;honor-cipher-order&amp;gt;true&amp;lt;/honor-cipher-order&amp;gt; in -- Scott Thanks, Keith We have now been scanned and been found to be non-compliant due to lack of the ability to order ciphers.   Is there any timeframe we might expect even a snapshot to have this capability? I'll see if I can get a snapshot this week. -- Scott Thanks, Aaron *From:*resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] *On Behalf Of *Aaron Freeman *Sent:* Wednesday, December 05, 2012 10:51 AM *To:* 'General Discussion for the Resin application server' *Subject:* Re: [Resin-interest] BEAST SSL Attack Very good, I appreciate the feedback. Thanks, Aaron *From:*resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] *On Behalf Of *Paul Cowan *Sent:* Wednesday, December 05, 2012 9:02 AM *To:* General Discussion for the Resin application server *Subject:* Re: [Resin-interest] BEAST SSL Attack Hi Folks, Resin does not support "SSLHonorCipherOrder" yet.  We already received a request from another customer and there is a feature request for this here: http://bugs.caucho.com/view.php?id=5282 This is an OpenSSL feature, not JSSE.  We'll be implementing it in an upcoming release.  Probably it will be in 4.0.44, as .43 is due for release soon. Thanks, Paul Knut, Thanks a bunch for your reply.   I saw you referencing another email you sent, but this is the only one I saw come through the group. At any rate, we are already using the cipher-suites feature, but in this case that's not enough.   They are telling us that we actually have to be able to prioritize the order that the suites are negotiated on the server side.  The only cipher suites guaranteed not to have the BEAST attack issue are ones that aren't wide-spread yet (TLSv1.1) however if we can put TLSv1.0 in a specific order that will suffice for PCI compliance. This bug for Tomcat addresses the issue and gives good details about a directive, SSLHonorCipherOrder, that handles the problem: https://issues.apache.org/bugzilla/show_bug.cgi?id=53481 Any other ideas for Resin? Aaron *From:*resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com]*On Behalf Of*Knut Forkalsrud *Sent:*Tuesday, December 04, 2012 9:31 PM *To:*General Discussion for the Resin application server *Subject:*Re: [Resin-interest] BEAST SSL Attack Actually, I got it wrong in my previous mail.  The feature should be working. There is a ticket describing the feature: http://bugs.caucho.com/view.php?id=3593 On Tue, Dec 4, 2012 at 7:00 PM, Knut Forkalsrud mailto:knut-cau...@forkalsrud.org In the days of Resin2.1.4 and onwards http://www.caucho.com/resin-3.1/changes/changes-2.xtp such a feature, however it seems to have lapsed.  I remember because there was a similar issue with MSIE http://support.microsoft.com/default.aspx?scid=kb;en-us;Q305217 . I my good old copy of Resin 3.1.8 there are remains the feature. If you bring up the source code for com.caucho.vfs.JsseSSLFactory.create(host, port) you will find a block of code commented out. Then there was a second incarnation where you could specify cipher suites.  That seems to have dies some time around Aug 2009 with the commit: https://github.com/mdaniel/svn-caucho-com-resin/commit/96de31370ffd0153eb45fc49725a9b796bc11224#modules/resin/src/com/caucho/vfs/JsseSSLFactory.java I suspect you could get it going again if you have the fortitude to play around with Resin's source code and build your own. Good luck, Knut Forkalsrud On Mon, Dec 3, 2012 at 7:53 AM, Aaron Freeman mailto:aaron.free...@layerz.com SSL BEAST</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Thu Jan 10 21:12:30 CET 2013</date>
    <body>Hmm, we were able to swap out jsse for openssl and get that working without any issues using the snapshot you recommend below.  However when we add [root@alpha bin]# ./www.sh start /opt/sendthisfile/server/conf/www.xml:80: &amp;lt;honor-cipher-order&amp;gt; is an unexpected tag (parent &amp;lt;openssl&amp;gt; starts at 75). 79: &amp;amp; (@ca-certificate-path | &amp;lt;ca-certificate-path&amp;gt;)? &amp;amp; (@ca-revocation-file | &amp;lt;ca-revocation-file&amp;gt;)? &amp;amp; (@ca-revocation-path | &amp;lt;ca-revocation-path&amp;gt;)? &amp;amp; (@certificate-file | &amp;lt;certificate-file&amp;gt;) &amp;amp; (@certificate-chain-file | &amp;lt;certificate-chain-file&amp;gt;)? &amp;amp; (@certificate-key-file | &amp;lt;certificate-key-file&amp;gt;)? &amp;amp; (@cipher-suite | &amp;lt;cipher-suite&amp;gt;)? &amp;amp; (@crypto-device | &amp;lt;crypto-device&amp;gt;)? &amp;amp; (@password | &amp;lt;password&amp;gt;) &amp;amp; (@protocol | &amp;lt;protocol&amp;gt;)? &amp;amp; (@session-cache | &amp;lt;session-cache&amp;gt;)? &amp;amp; (@session-cache-timeout | &amp;lt;session-cache-timeout&amp;gt;)? &amp;amp; (@unclean-shutdown | &amp;lt;unclean-shutdown&amp;gt;)? &amp;amp; (@verify-client | &amp;lt;verify-client&amp;gt;)? &amp;amp; (@verify-depth | &amp;lt;verify-depth&amp;gt;)?) OPENSSL     : OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008 include   : /usr/include lib       : libraries :  -lssl -lcrypto Any ideas? Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Tuesday, January 08, 2013 7:42 PM To: resin-interest@caucho.com Subject: Re: [Resin-interest] BEAST SSL Attack Hi Scott, We need this too. Can you try http://caucho.com/download/resin-pro-4_0-snap.tar.gz The configuration is &amp;lt;honor-cipher-order&amp;gt;true&amp;lt;/honor-cipher-order&amp;gt; in -- Scott Thanks, Keith We have now been scanned and been found to be non-compliant due to lack of the ability to order ciphers.   Is there any timeframe we might expect even a snapshot to have this capability? I'll see if I can get a snapshot this week. -- Scott Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Wednesday, December 05, 2012 10:51 AM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] BEAST SSL Attack Very good, I appreciate the feedback. Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Paul Cowan Sent: Wednesday, December 05, 2012 9:02 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack Hi Folks, Resin does not support "SSLHonorCipherOrder" yet.  We already received a request from another customer and there is a feature request for this here: http://bugs.caucho.com/view.php?id=5282 This is an OpenSSL feature, not JSSE.  We'll be implementing it in an upcoming release.  Probably it will be in 4.0.44, as .43 is due for release soon. Thanks, Paul Knut, Thanks a bunch for your reply.   I saw you referencing another email you sent, but this is the only one I saw come through the group. At any rate, we are already using the cipher-suites feature, but in this case that's not enough.   They are telling us that we actually have to be able to prioritize the order that the suites are negotiated on the server side.  The only cipher suites guaranteed not to have the BEAST attack issue are ones that aren't wide-spread yet (TLSv1.1) however if we can put TLSv1.0 in a specific order that will suffice for PCI compliance. This bug for Tomcat addresses the issue and gives good details about a directive, SSLHonorCipherOrder, that handles the problem: https://issues.apache.org/bugzilla/show_bug.cgi?id=53481 Any other ideas for Resin? Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Knut Forkalsrud Sent: Tuesday, December 04, 2012 9:31 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack Actually, I got it wrong in my previous mail.  The feature should be working. There is a ticket describing the feature: http://bugs.caucho.com/view.php?id=3593 In the days of Resin 2.1.4 and onwards http://www.caucho.com/resin-3.1/changes/changes-2.xtp feature, however it seems to have lapsed.  I remember because there was a similar issue with MSIE http://support.microsoft.com/default.aspx?scid=kb;en-us;Q305217 . I my good old copy of Resin 3.1.8 there are remains the feature. If you bring up the source code for com.caucho.vfs.JsseSSLFactory.create(host, port) you will find a block of code commented out. Then there was a second incarnation where you could specify cipher suites. That seems to have dies some time around Aug 2009 with the commit: https://github.com/mdaniel/svn-caucho-com-resin/commit/96de31370ffd0153eb45f c49725a9b796bc11224#modules/resin/src/com/caucho/vfs/JsseSSLFactory.java I suspect you could get it going again if you have the fortitude to play around with Resin's source code and build your own. Good luck, Knut Forkalsrud SSL BEAST</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Mon Jan 14 21:01:06 CET 2013</date>
    <body>Still needing a little assistance on this one. Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Thursday, January 10, 2013 2:12 PM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] BEAST SSL Attack Hmm, we were able to swap out jsse for openssl and get that working without any issues using the snapshot you recommend below.  However when we add [root@alpha bin]# ./www.sh start /opt/sendthisfile/server/conf/www.xml:80: &amp;lt;honor-cipher-order&amp;gt; is an unexpected tag (parent &amp;lt;openssl&amp;gt; starts at 75). 79: &amp;amp; (@ca-certificate-path | &amp;lt;ca-certificate-path&amp;gt;)? &amp;amp; (@ca-revocation-file | &amp;lt;ca-revocation-file&amp;gt;)? &amp;amp; (@ca-revocation-path | &amp;lt;ca-revocation-path&amp;gt;)? &amp;amp; (@certificate-file | &amp;lt;certificate-file&amp;gt;) &amp;amp; (@certificate-chain-file | &amp;lt;certificate-chain-file&amp;gt;)? &amp;amp; (@certificate-key-file | &amp;lt;certificate-key-file&amp;gt;)? &amp;amp; (@cipher-suite | &amp;lt;cipher-suite&amp;gt;)? &amp;amp; (@crypto-device | &amp;lt;crypto-device&amp;gt;)? &amp;amp; (@password | &amp;lt;password&amp;gt;) &amp;amp; (@protocol | &amp;lt;protocol&amp;gt;)? &amp;amp; (@session-cache | &amp;lt;session-cache&amp;gt;)? &amp;amp; (@session-cache-timeout | &amp;lt;session-cache-timeout&amp;gt;)? &amp;amp; (@unclean-shutdown | &amp;lt;unclean-shutdown&amp;gt;)? &amp;amp; (@verify-client | &amp;lt;verify-client&amp;gt;)? &amp;amp; (@verify-depth | &amp;lt;verify-depth&amp;gt;)?) OPENSSL     : OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008 include   : /usr/include lib       : libraries :  -lssl -lcrypto Any ideas? Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Tuesday, January 08, 2013 7:42 PM To: resin-interest@caucho.com Subject: Re: [Resin-interest] BEAST SSL Attack Hi Scott, We need this too. Can you try http://caucho.com/download/resin-pro-4_0-snap.tar.gz The configuration is &amp;lt;honor-cipher-order&amp;gt;true&amp;lt;/honor-cipher-order&amp;gt; in -- Scott Thanks, Keith We have now been scanned and been found to be non-compliant due to lack of the ability to order ciphers.   Is there any timeframe we might expect even a snapshot to have this capability? I'll see if I can get a snapshot this week. -- Scott Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Wednesday, December 05, 2012 10:51 AM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] BEAST SSL Attack Very good, I appreciate the feedback. Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Paul Cowan Sent: Wednesday, December 05, 2012 9:02 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack Hi Folks, Resin does not support "SSLHonorCipherOrder" yet.  We already received a request from another customer and there is a feature request for this here: http://bugs.caucho.com/view.php?id=5282 This is an OpenSSL feature, not JSSE.  We'll be implementing it in an upcoming release.  Probably it will be in 4.0.44, as .43 is due for release soon. Thanks, Paul Knut, Thanks a bunch for your reply.   I saw you referencing another email you sent, but this is the only one I saw come through the group. At any rate, we are already using the cipher-suites feature, but in this case that's not enough.   They are telling us that we actually have to be able to prioritize the order that the suites are negotiated on the server side.  The only cipher suites guaranteed not to have the BEAST attack issue are ones that aren't wide-spread yet (TLSv1.1) however if we can put TLSv1.0 in a specific order that will suffice for PCI compliance. This bug for Tomcat addresses the issue and gives good details about a directive, SSLHonorCipherOrder, that handles the problem: https://issues.apache.org/bugzilla/show_bug.cgi?id=53481 Any other ideas for Resin? Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Knut Forkalsrud Sent: Tuesday, December 04, 2012 9:31 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack Actually, I got it wrong in my previous mail.  The feature should be working. There is a ticket describing the feature: http://bugs.caucho.com/view.php?id=3593 In the days of Resin 2.1.4 and onwards http://www.caucho.com/resin-3.1/changes/changes-2.xtp feature, however it seems to have lapsed.  I remember because there was a similar issue with MSIE http://support.microsoft.com/default.aspx?scid=kb;en-us;Q305217 . I my good old copy of Resin 3.1.8 there are remains the feature. If you bring up the source code for com.caucho.vfs.JsseSSLFactory.create(host, port) you will find a block of code commented out. Then there was a second incarnation where you could specify cipher suites. That seems to have dies some time around Aug 2009 with the commit: https://github.com/mdaniel/svn-caucho-com-resin/commit/96de31370ffd0153eb45f c49725a9b796bc11224#modules/resin/src/com/caucho/vfs/JsseSSLFactory.java I suspect you could get it going again if you have the fortitude to play around with Resin's source code and build your own. Good luck, Knut Forkalsrud SSL BEAST</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Fri Jan 18 16:18:31 CET 2013</date>
    <body>We're getting scanned today.   Any hope on this? Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Monday, January 14, 2013 2:01 PM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] BEAST SSL Attack Still needing a little assistance on this one. Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Thursday, January 10, 2013 2:12 PM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] BEAST SSL Attack Hmm, we were able to swap out jsse for openssl and get that working without any issues using the snapshot you recommend below.  However when we add [root@alpha bin]# ./www.sh start /opt/sendthisfile/server/conf/www.xml:80: &amp;lt;honor-cipher-order&amp;gt; is an unexpected tag (parent &amp;lt;openssl&amp;gt; starts at 75). 79: &amp;amp; (@ca-certificate-path | &amp;lt;ca-certificate-path&amp;gt;)? &amp;amp; (@ca-revocation-file | &amp;lt;ca-revocation-file&amp;gt;)? &amp;amp; (@ca-revocation-path | &amp;lt;ca-revocation-path&amp;gt;)? &amp;amp; (@certificate-file | &amp;lt;certificate-file&amp;gt;) &amp;amp; (@certificate-chain-file | &amp;lt;certificate-chain-file&amp;gt;)? &amp;amp; (@certificate-key-file | &amp;lt;certificate-key-file&amp;gt;)? &amp;amp; (@cipher-suite | &amp;lt;cipher-suite&amp;gt;)? &amp;amp; (@crypto-device | &amp;lt;crypto-device&amp;gt;)? &amp;amp; (@password | &amp;lt;password&amp;gt;) &amp;amp; (@protocol | &amp;lt;protocol&amp;gt;)? &amp;amp; (@session-cache | &amp;lt;session-cache&amp;gt;)? &amp;amp; (@session-cache-timeout | &amp;lt;session-cache-timeout&amp;gt;)? &amp;amp; (@unclean-shutdown | &amp;lt;unclean-shutdown&amp;gt;)? &amp;amp; (@verify-client | &amp;lt;verify-client&amp;gt;)? &amp;amp; (@verify-depth | &amp;lt;verify-depth&amp;gt;)?) OPENSSL     : OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008 include   : /usr/include lib       : libraries :  -lssl -lcrypto Any ideas? Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Tuesday, January 08, 2013 7:42 PM To: resin-interest@caucho.com Subject: Re: [Resin-interest] BEAST SSL Attack Hi Scott, We need this too. Can you try http://caucho.com/download/resin-pro-4_0-snap.tar.gz The configuration is &amp;lt;honor-cipher-order&amp;gt;true&amp;lt;/honor-cipher-order&amp;gt; in -- Scott Thanks, Keith We have now been scanned and been found to be non-compliant due to lack of the ability to order ciphers.   Is there any timeframe we might expect even a snapshot to have this capability? I'll see if I can get a snapshot this week. -- Scott Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Wednesday, December 05, 2012 10:51 AM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] BEAST SSL Attack Very good, I appreciate the feedback. Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Paul Cowan Sent: Wednesday, December 05, 2012 9:02 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack Hi Folks, Resin does not support "SSLHonorCipherOrder" yet.  We already received a request from another customer and there is a feature request for this here: http://bugs.caucho.com/view.php?id=5282 This is an OpenSSL feature, not JSSE.  We'll be implementing it in an upcoming release.  Probably it will be in 4.0.44, as .43 is due for release soon. Thanks, Paul Knut, Thanks a bunch for your reply.   I saw you referencing another email you sent, but this is the only one I saw come through the group. At any rate, we are already using the cipher-suites feature, but in this case that's not enough.   They are telling us that we actually have to be able to prioritize the order that the suites are negotiated on the server side.  The only cipher suites guaranteed not to have the BEAST attack issue are ones that aren't wide-spread yet (TLSv1.1) however if we can put TLSv1.0 in a specific order that will suffice for PCI compliance. This bug for Tomcat addresses the issue and gives good details about a directive, SSLHonorCipherOrder, that handles the problem: https://issues.apache.org/bugzilla/show_bug.cgi?id=53481 Any other ideas for Resin? Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Knut Forkalsrud Sent: Tuesday, December 04, 2012 9:31 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack Actually, I got it wrong in my previous mail.  The feature should be working. There is a ticket describing the feature: http://bugs.caucho.com/view.php?id=3593 In the days of Resin 2.1.4 and onwards http://www.caucho.com/resin-3.1/changes/changes-2.xtp feature, however it seems to have lapsed.  I remember because there was a similar issue with MSIE http://support.microsoft.com/default.aspx?scid=kb;en-us;Q305217 . I my good old copy of Resin 3.1.8 there are remains the feature. If you bring up the source code for com.caucho.vfs.JsseSSLFactory.create(host, port) you will find a block of code commented out. Then there was a second incarnation where you could specify cipher suites. That seems to have dies some time around Aug 2009 with the commit: https://github.com/mdaniel/svn-caucho-com-resin/commit/96de31370ffd0153eb45f c49725a9b796bc11224#modules/resin/src/com/caucho/vfs/JsseSSLFactory.java I suspect you could get it going again if you have the fortitude to play around with Resin's source code and build your own. Good luck, Knut Forkalsrud SSL BEAST</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Fri Jan 18 17:00:55 CET 2013</date>
    <body>I just tested that Resin snapshot - the &amp;lt;honor-cipher-order&amp;gt; is not in that jar.  I think there was a mistake in the SCM checkin or Scott may have built the archive to soon.  We'll try to put up a new snapshot today/soon, but I'm not certain it's possible with various other bug fixes in progress. Thanks, Paul mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Fri Jan 18 17:09:29 CET 2013</date>
    <body>OK, just keep us posted. Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Paul Cowan Sent: Friday, January 18, 2013 10:01 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack We're getting scanned today.   Any hope on this? I just tested that Resin snapshot - the &amp;lt;honor-cipher-order&amp;gt; is not in that jar.  I think there was a mistake in the SCM checkin or Scott may have built the archive to soon.  We'll try to put up a new snapshot today/soon, but I'm not certain it's possible with various other bug fixes in progress. Thanks, Paul Thanks, Aaron mailto:resin-interest-boun...@caucho.com resin-interest-boun...@caucho.com [ mailto:resin- mailto:interest-boun...@caucho.com Of Aaron Freeman Sent: Monday, January 14, 2013 2:01 PM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] BEAST SSL Attack Still needing a little assistance on this one. Thanks, Aaron mailto:resin-interest-boun...@caucho.com resin-interest-boun...@caucho.com [ mailto:resin- mailto:interest-boun...@caucho.com Of Aaron Freeman Sent: Thursday, January 10, 2013 2:12 PM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] BEAST SSL Attack Hmm, we were able to swap out jsse for openssl and get that working without any issues using the snapshot you recommend below.  However when we add [root@alpha bin]# ./www.sh start /opt/sendthisfile/server/conf/www.xml:80: &amp;lt;honor-cipher-order&amp;gt; is an unexpected tag (parent &amp;lt;openssl&amp;gt; starts at 75). 79: &amp;amp; (@ca-certificate-path | &amp;lt;ca-certificate-path&amp;gt;)? &amp;amp; (@ca-revocation-file | &amp;lt;ca-revocation-file&amp;gt;)? &amp;amp; (@ca-revocation-path | &amp;lt;ca-revocation-path&amp;gt;)? &amp;amp; (@certificate-file | &amp;lt;certificate-file&amp;gt;) &amp;amp; (@certificate-chain-file | &amp;lt;certificate-chain-file&amp;gt;)? &amp;amp; (@certificate-key-file | &amp;lt;certificate-key-file&amp;gt;)? &amp;amp; (@cipher-suite | &amp;lt;cipher-suite&amp;gt;)? &amp;amp; (@crypto-device | &amp;lt;crypto-device&amp;gt;)? &amp;amp; (@password | &amp;lt;password&amp;gt;) &amp;amp; (@protocol | &amp;lt;protocol&amp;gt;)? &amp;amp; (@session-cache | &amp;lt;session-cache&amp;gt;)? &amp;amp; (@session-cache-timeout | &amp;lt;session-cache-timeout&amp;gt;)? &amp;amp; (@unclean-shutdown | &amp;lt;unclean-shutdown&amp;gt;)? &amp;amp; (@verify-client | &amp;lt;verify-client&amp;gt;)? &amp;amp; (@verify-depth | &amp;lt;verify-depth&amp;gt;)?) OPENSSL     : OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008 include   : /usr/include lib       : libraries :  -lssl -lcrypto Any ideas? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Wed Feb 13 02:05:38 CET 2013</date>
    <body>On a whim we looked to see if there was a new snapshot, and there was, so we tried it.  Looks like the honor-cipher-code addition is working great.   We were able to get it to show that we are compliant - so we will be doing more internal testing to make sure the snapshot is stable enough and then we will roll it out. Thanks a bunch! Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Friday, January 18, 2013 10:09 AM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] BEAST SSL Attack OK, just keep us posted. Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Paul Cowan Sent: Friday, January 18, 2013 10:01 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] BEAST SSL Attack We're getting scanned today.   Any hope on this? I just tested that Resin snapshot - the &amp;lt;honor-cipher-order&amp;gt; is not in that jar.  I think there was a mistake in the SCM checkin or Scott may have built the archive to soon.  We'll try to put up a new snapshot today/soon, but I'm not certain it's possible with various other bug fixes in progress. Thanks, Paul Thanks, Aaron mailto:resin-interest-boun...@caucho.com resin-interest-boun...@caucho.com [ mailto:resin- mailto:interest-boun...@caucho.com Of Aaron Freeman Sent: Monday, January 14, 2013 2:01 PM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] BEAST SSL Attack Still needing a little assistance on this one. Thanks, Aaron mailto:resin-interest-boun...@caucho.com resin-interest-boun...@caucho.com [ mailto:resin- mailto:interest-boun...@caucho.com Of Aaron Freeman Sent: Thursday, January 10, 2013 2:12 PM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] BEAST SSL Attack Hmm, we were able to swap out jsse for openssl and get that working without any issues using the snapshot you recommend below.  However when we add [root@alpha bin]# ./www.sh start /opt/sendthisfile/server/conf/www.xml:80: &amp;lt;honor-cipher-order&amp;gt; is an unexpected tag (parent &amp;lt;openssl&amp;gt; starts at 75). 79: &amp;amp; (@ca-certificate-path | &amp;lt;ca-certificate-path&amp;gt;)? &amp;amp; (@ca-revocation-file | &amp;lt;ca-revocation-file&amp;gt;)? &amp;amp; (@ca-revocation-path | &amp;lt;ca-revocation-path&amp;gt;)? &amp;amp; (@certificate-file | &amp;lt;certificate-file&amp;gt;) &amp;amp; (@certificate-chain-file | &amp;lt;certificate-chain-file&amp;gt;)? &amp;amp; (@certificate-key-file | &amp;lt;certificate-key-file&amp;gt;)? &amp;amp; (@cipher-suite | &amp;lt;cipher-suite&amp;gt;)? &amp;amp; (@crypto-device | &amp;lt;crypto-device&amp;gt;)? &amp;amp; (@password | &amp;lt;password&amp;gt;) &amp;amp; (@protocol | &amp;lt;protocol&amp;gt;)? &amp;amp; (@session-cache | &amp;lt;session-cache&amp;gt;)? &amp;amp; (@session-cache-timeout | &amp;lt;session-cache-timeout&amp;gt;)? &amp;amp; (@unclean-shutdown | &amp;lt;unclean-shutdown&amp;gt;)? &amp;amp; (@verify-client | &amp;lt;verify-client&amp;gt;)? &amp;amp; (@verify-depth | &amp;lt;verify-depth&amp;gt;)?) OPENSSL     : OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008 include   : /usr/include lib       : libraries :  -lssl -lcrypto Any ideas? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BEAST SSL Attack</header>
    <date>Thu Feb 14 17:40:34 CET 2013</date>
    <body>That fix is actually in 4.0.34, although 4.0.35 will be on the website today. I see we're a little behind on the release notes on caucho.com. This link is handy to refer to as it's always updated based on fixed bugs: http://bugs.caucho.com/changelog_page.php Thanks, Paul mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman mailto:resin-interest-boun...@caucho.com ] On Behalf Of Paul Cowan mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman http://maillist.caucho.com/mailman/listinfo/resin-interest ======================= Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>[Resin-interest] Form parameter limitation</header>
    <date>Wed Nov 28 06:47:18 CET 2012</date>
    <body>I ran into a limit on the number of parameters submitted by a form and found this: http://www.caucho.com/resin-4.0/changes/resin-4.0.25.xtp#POSTparameterlimitDOSProtection I changed my QA server to accept up to 20,000 as a work around to my specific problem (turns out I am submitting around 15k parameters). What is the risk of setting this max at 20k or higher? Is it simply resource utilization or is there some other risk that I should be careful to avoid? Processing my form after the change was as fast as any other form in my app. FYI, not sure I really like the idea of submitting 20k parameters but I don't think I can split this particular form into smaller sets easily…or at least not quickly. thanks matt</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Form parameter limitation</header>
    <date>Wed Nov 28 17:54:17 CET 2012</date>
    <body>http://www.caucho.com/resin-4.0/changes/resin-4.0.25.xtp#POSTparameterlimitDOSProtection Hi Matt, This change was in response to the "hashdos" attack that was widely publicized late last year. In simplest terms, form parameters are stored in a hashtable, and hashing becomes CPU intensive with increasing numbers of keys and collisions.  This leads to a DOS attack if the number of parameters is not limited. Google for "hashdos" or see: http://arstechnica.com/business/2011/12/huge-portions-of-web-vulnerable-to-hashing-denial-of-service-attack/ I believe we felt even 10k was unrealistically high and anyone coming close to that probably needed to reevaluate their form submission, but "suum cuique". Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0.33 ETA?</header>
    <date>Thu Nov 22 08:47:36 CET 2012</date>
    <body>Hi. We are anticipating the upcoming 4.0.33 release that should resolve a couple of "our" bugs. What is the ETA? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.33 ETA?</header>
    <date>Thu Nov 22 16:17:40 CET 2012</date>
    <body>We are shooting for next week for 4.0.33 release.  Depending on the regressions, it could slip until the 1st week of December but probably no later than that. http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.33 ETA?</header>
    <date>Wed Dec 12 11:10:11 CET 2012</date>
    <body>Any news on the 4.0.33 release? --- Original Message ----- Subject: Re: [Resin-interest] 4.0.33 ETA? Date: Thu, 22 Nov 2012 10:17:29 -0500 We are shooting for next week for 4.0.33 release. Depending on the regressions, it could slip until the 1st week of December but probably no later than that. --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.33 ETA?</header>
    <date>Thu Dec 13 04:50:57 CET 2012</date>
    <body>I know I keep saying this, but we're working on regressions now and shooting for this Friday. Here is a .33 snapshot build.  We would be more than happy to hear this resolves your bugs (or any feedback) before the release: http://caucho.com/download/resin-pro-4_0-snap.tar.gz Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest ======================= Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>[Resin-interest] Session death in a cluster</header>
    <date>Mon Nov 19 21:32:55 CET 2012</date>
    <body>I have a web application that creates a session for every user who logs in and also tracks logins/logouts in a database. When the user logs out or when the session is destroyed (using a SessionListener), I attempt to update the database with the session destruction time. I experience two problems in a clustered environment: 1. Shutting down one resin node in the cluster seems to kill the session on that server even though the session is transferred to the other resin server and remains available. So, in effect, we think users are logged out when they are still active on the second server. 2. My database shows that some sessions seem to stay alive for days even though there is clearly no activity on the session. For the first issue, is there a way to write my session listener so that it knows the difference between a real session death and a transfer to another clustered instance due to a shutdown? For the second issue, I found an interesting attribute on the "session-config" tag ( http://www.caucho.com/resin-4.0/admin/clustering-ref.xtp#sessionconfig ): invalidate-after-listener: If true, invalidate the sessions after the session listeners have been called The documentation doesn't specify a default. Is it possible Resin is invalidating the session before my listener has a chance to inspect it, thus the listener can't update the database because the it doesn't know the user information? What is odd is that most of time the database is updated appropriately. Anybody else track user login behavior in a clustered environment? Going to be writing a message queue analytics system that could also track this but for now direct db is too simple to drop, especially when it works most of the time. thanks matt</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Session death in a cluster</header>
    <date>Mon Nov 19 22:35:23 CET 2012</date>
    <body>As for #1, I have code in my SessionListener that first looks at the current thread and doesn't fire most of the work if it is the resin-destroy thread.  This is a bit of a hack - anyone else find a cleaner way of handling this? thanks Eric http://www.caucho.com/resin-4.0/admin/clustering-ref.xtp#sessionconfig ): http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Session death in a cluster</header>
    <date>Wed Nov 21 06:58:54 CET 2012</date>
    <body>We have seen this behavior in resin for years.  Several years ago, we wrote an administration utility for our Web site that displays the active HTTP sessions.  We wrote this utility so we could see what products shoppers were putting in the carts.  We noticed that some HTTP sessions live days after they should have been invalidated as a result of reaching the HTTP session timeout, which is set to 70 minutes.  We never researched the problem or reported it to Caucho. We saw this behavior in resin 2.X, 3.X and now in 4.X Keith -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.go2hydraulics.com http://www.shoprvparts.com</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin, EclipseLink, and Cache Coordination</header>
    <date>Thu Nov 15 06:27:50 CET 2012</date>
    <body>I am trying to figure out how to get EclipseLink's cache coordination working within a Resin cluster. I am trying to get it working using JMS. So far I haven't been able to get past the JNDI lookup of the JmsConnectionFactory (which is failing). Right now my knowledge on this subject is a shaky patchwork of tidbits from a bunch of google searches, and I'm hoping that I'm missing some simple configuration step. But, before getting into all that...Should I even be able to do this? Currently using Resin Pro  4.0.23. Thanks, Dan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin, EclipseLink, and Cache Coordination</header>
    <date>Tue Nov 27 22:47:51 CET 2012</date>
    <body>FYI, I got this working…kind of. After getting past the JNDI issue (just had to set the JNDI name of the ClusterTopic and JmsConnectionFactory), I had a problem where EclipseLink would throw an exception upon receipt of a cache coordination message because the message's destination was null. To make it work, I had to use a Message Driven Bean, inject an instance of ClusterTopic in that bean and explicitly set the message destination in the onMessage method of the MDB (setting it to the injected ClusterTopic instance). It doesn't seem right that the message destination is null, but if this is a legitimate work-around then I'm fine with it. Can anyone shed more light on this? Is this a legitimate work-around? Dan http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin, EclipseLink, and Cache Coordination</header>
    <date>Tue Nov 27 22:53:29 CET 2012</date>
    <body>I've marked this as a bug at http://bugs.caucho.com/view.php?id=5291 . I'll need to lookup the message destination. Resin's JMS passes the TCK, but there might be some requirement that's not properly tested there. your workaround sounds fine. -- Scott FYI, I got this working...kind of. After getting past the JNDI issue (just had to set the JNDI name of the ClusterTopic and JmsConnectionFactory), I had a problem where EclipseLink would throw an exception upon receipt of a cache coordination message because the message's destination was null. To make it work, I had to use a Message Driven Bean, inject an instance of ClusterTopic in that bean and explicitly set the message destination in the onMessage method of the MDB (setting it to the injected ClusterTopic instance). It doesn't seem right that the message destination is null, but if this is a legitimate work-around then I'm fine with it. Can anyone shed more light on this? Is this a legitimate work-around? Dan I am trying to figure out how to get EclipseLink's cache coordination working within a Resin cluster. I am trying to get it working using JMS. So far I haven't been able to get past the JNDI lookup of the JmsConnectionFactory (which is failing). Right now my knowledge on this subject is a shaky patchwork of tidbits from a bunch of google searches, and I'm hoping that I'm missing some simple configuration step. But, before getting into all that...Should I even be able to do this? Currently using Resin Pro  4.0.23. Thanks, Dan / /</body>
  </mail>
  <mail>
    <header>[Resin-interest] fmt.sprintf leads to NPEs</header>
    <date>Sun Nov 11 14:20:47 CET 2012</date>
    <body>When I use this format for the main log-handler in 4.0.32, I get numerous NPEs during startup: -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] fmt.sprintf leads to NPEs</header>
    <date>Wed Nov 14 15:42:40 CET 2012</date>
    <body>Hi Rick, I do not think the NPE causes any issue, as it only shows up for me using finer level logging. However it's certainly a bug, and I have entered a report: http://bugs.caucho.com/view.php?id=5274 Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] fmt.sprintf leads to NPEs</header>
    <date>Thu Nov 15 02:37:51 CET 2012</date>
    <body>http://bugs.caucho.com/view.php?id=5274 Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Aughh!!</header>
    <date>Sun Nov 11 13:24:13 CET 2012</date>
    <body>Wow, it must be dump-on-Rick day. Not only is my local resin (4.0.30) startup suddenly bonkers, so is one of my long-standing servers (4.0.19). I made some minor changes to the webapp, uploaded the changed files, saw it restart, everything was fine. Then I stopped and re-started resin, like I always do on that machine, basically running this: java -jar $RESIN_HOME/lib/resin.jar -verbose -root-directory /path/to/dir -conf /path/to/resin.xml start|stop Now, it complains about the native libraries missing and JNI being a resin pro feature (this is just resin open source), which is fine, but it finishes startup in no time at all, and near as I can tell, never starts my webapp. Like it's not even there. No error messages in the logs, nothing. Since it's 4:30 am and no one can respond to this, I don't know what else to do but install the newest resin and rebuild my server from scratch. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Aughh!!</header>
    <date>Sun Nov 11 14:31:23 CET 2012</date>
    <body>Well, even installing 4.0.32 I had very similar behavior; my webapp is just ignored. Then I noticed something. I access it via an alias. It's configured like this: Resin doesn't try to start it up if I hit "missiondb.lz.com" first. But if I hit "kepler.lz.com," then it inits. I wonder if the same thing was happening in 4.0.19. I just don't know why I've only now started seeing this. -- Rick http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Aughh!!</header>
    <date>Wed Nov 14 16:31:03 CET 2012</date>
    <body>Hi Rick, Thanks, I have verified this is a bug and entered a report: http://bugs.caucho.com/view.php?id=5275 Please try modifying the entry as I included below, it should work around the issue.  Let me know if otherwise. Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Aughh!!</header>
    <date>Thu Nov 15 02:36:23 CET 2012</date>
    <body>http://bugs.caucho.com/view.php?id=5275 Thanks, Paul. That's what I ended up doing. -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Sudden startup error	java.lang.ClassNotFoundException: com.caucho.admin.ProAdminServices</header>
    <date>Sun Nov 11 11:56:13 CET 2012</date>
    <body>I'm suddenly getting a couple of exceptions during startup (resin.sh console) on Resin 4.0.30. PDT) 1.6.0_37-b06-434-11M3909, MacRoman, en 64, mixed mode, Apple Inc. com.caucho.admin.ProAdminServices and 'resin:type=AccessLog,Host=default' in MBeanContext[EnvironmentClassLoader[host:default,NEW]] I tried removing the resin-data and watchdog-data directories to no avail. I also noticed this in the logs (on a run after the first one after deleting resin-data): CREATE TABLE data(id IDENTITY PRIMARY KEY,data BLOB) The version shown is 4.0.28, I'm running 4.0.30. The app still seems to run after this, but it's puzzling. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Sudden startup error	java.lang.ClassNotFoundException: com.caucho.admin.ProAdminServices</header>
    <date>Wed Nov 14 15:46:49 CET 2012</date>
    <body>Hi Rick, Are you still seeing this issue?  It certainly appears to be some mixup in library versions.  Perhaps resin.home and/or resin.root are set to point to an older version. Starting up Resin with -verbose will output all startup paths and options to the start of the Resin log, which should be helpful in debugging this. Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Sudden startup error	java.lang.ClassNotFoundException: com.caucho.admin.ProAdminServices</header>
    <date>Thu Nov 15 02:37:27 CET 2012</date>
    <body>Hmm. That's possible. I'll take a look next time I run into the error (I rotate between a lot of projects on vastly different platforms, seem to promptly forget what I was doing on the previous one :-) ). -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Can't enable admin access</header>
    <date>Sat Nov 10 03:55:50 CET 2012</date>
    <body>Huh. I generated a password, modified resin.properties, but resin refuses to let me log in. Nothing in the log, at level 'finer', seems to show why. It asks me to log in, then I get 403 forbidden. I even re-generated the password to make sure I got it right. -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Scaling Up</header>
    <date>Fri Nov 09 03:12:08 CET 2012</date>
    <body>I've used Resin for 6 or 8 years now, ever since working at a company that used it. I use it for a lot of little personal projects and web sites, nothing very substantial. But there's a chance that something I did recently will grow, and I'm looking at how to use Resin with Rackspace virtual hosts. I'm finding it hard to get through some of Caucho's concepts. How is a web server different from an app server? Is a web server the same as a load balancer? All my apps run completely self-contained on a single server, talking to a MySQL instance running on the same machine, using Hibernate and no special caching. I'm having a hard time quickly learning how to move from that environment to the triad and elastic servers. Can I take the intermediate step of running just two servers? How does load balancing work? I've only ever used a Big IP F5. Do I want to bother with Rackspace's load balancers? Stuff like that. Is there a good introductory document (not just a set of slides)? So far, everything I've read assumes a certain level of knowledge. Thanks, -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Scaling Up</header>
    <date>Fri Nov 09 04:08:59 CET 2012</date>
    <body>We're working on a video that should help. In the meantime: 1) Basically, we start with a single server, just like you're using now. That's an "app" server because it runs your applications (it also serves static web requests of course.). app_servers : 127.0.0.1:6800 2) Now you either want or need a second app server, either because of load or memory or reliability. That would be two servers. The two servers would be the first two in the triad. The triad stuff happens automatically. The first servers in your list are triad members. In truth, you don't usually need to know about the triad, except you should take a little care to put them on different hardware for reliability. app_servers : 192.168.0.10:6800, 192.168.0.11:6800 (You can also put two Resin servers on one box. Just use the same IP and different ports, like 6801. We use this for testing all the time, and some people do that for reliability or better memory management on one machine.) 3) load balancing But now there's a difficulty because some how the requests need to be shared across the multiple servers, so you need a load balancer of some sort. Resin doesn't care what load balancer you use. We're trying to support whatever configuration you want, assuming that you have a better idea of how you want to balance your own load. Resin's load balancer is mostly provided as an option for medium sites so you don't need to use a hardware load balancer, and because it's easy to configure. (Some sites even use a hardware load balancer in combination with Resin's load balancer.) If you're using a non-Resin load balancer, just point it to the 2 server's http ports. If you're using Resin's load balancer, just add a web_server entry: web_servers : 192.168.1.10:6820 In this case, I put the load balancer on the first machine. That's a perfectly reasonable configuration for a smallish configuration. Make sure all servers are using the same resin.xml and resin.properties. The entire point of Resin's design is to allow you to use a single configuration for your entire cluster. 4) Adding servers. You can keep adding servers to the app_servers list. The first three are automatically the triad. You don't need to do anything special, but if you have different physical servers, it's a good idea to split them for reliability. As long as every server sees that app_servers, the load balancing will just work with the new servers. 5) "web" vs "app" tiers. The idea of those two is to mirror the common Apache/Resin or nginx/Resin "reverse proxy" configuration where you replace Apache with another Resin. You can use that configuration even if you have one app-server. (Benefit is that it isolates the application from the actual network. The penalty is a bit of performance.) The "web" tier is simple and more reliable because it's only serving HTTP requests and cached data. It also isolates the web from the app tier, because only the web tier needs to worry about things like flaky network connections. When you're using Resin as a load balancer the web tier is the load balancer. 6) The triad. Mostly, it's an internal Resin clustering concept. The main purpose is to handle clustering for fairly large sites that have large variations in load where they want to add or drop servers frequently. The triad servers are the reliable servers. You don't actually need 3. If you have 2, the 2 servers act as backups for each other. The key of the triad is that every other server: 4, 5, 6 can be can be added or dropped whenever you want without affecting things like clustered sessions or caching. For example, you can configure 7 servers, and only have 3 live. Shut down the last 4 and the system just works. But _don't_ shut down the first 3, because that's the triad. That's really the only reason you need to know about the triad (other than putting on different hardware for reliability.) 7) elastic servers. The elastic server idea is just a way for you to be lazy about configuration, when you have lots of servers. Without elastic servers, you can just keep changing the app_servers in resin.properties on every machine: app_servers : 192.168.1.10:6800, 192.168.1.11:6800, 192.168.1.12:6800, 192.168.1.13:6800, ... But to make this work, you need to update every server configuration when you want to add a new server. The elastic servers lets you be lazy. You still need to configure "static" servers. A "static" server just means you have an explicit configuration in the resin.properties. But you can add elastic servers without updating all the configuration files. # static servers (you can have more or less. We recommend 3 if you have at least 3 servers.) app_servers : 192.168.1.10:6800, 192.168.1.11:6800, 192.168.1.12:6800 elastic_server : app:1 The "elastic_server" tells Resin that this server is an elastic server. Resin will automatically use the IP address and connect to the static servers, announce itself. 8) summary Basically, you can ignore most of the concepts. Just try this experiment on a single server: app_servers : 127.0.0.1:6800, 127.0.0.1:6801 web_servers : 127.0.0.1:6810 web-0.http : 8080 app-0.http : 8090 app-1.http : 8091 That will configure 1 web server at :8080 which will also act as a load balancer, and 2 app servers where your application will be deployed. Just browse to :8080 and you'll automatically be load balanced. The app-0.http :8090 isn't absolutely necessary but it's nice to be able to connect to the server directly if necessary. Also, if you use the "resinctl deploy -server app-0" to deploy your application, it will automatically get copied to app-1. You can still copy to webapps yourself, of course, if you prefer. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Scaling Up</header>
    <date>Fri Nov 09 04:18:34 CET 2012</date>
    <body>Thanks, Scott, I'll read through that more carefully shortly. One question. Do I set up one server with the multi-machine additions as you show, and then just replicate the config file (and server, webapp, et al) onto all the machines? I realize that may seem obvious, but I want to be sure. Also, how do I get them to talk to each other via private interfaces? Or does that happen magically with Rackspace? -- Rick http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Scaling Up</header>
    <date>Fri Nov 09 04:29:58 CET 2012</date>
    <body>Yes, all the servers will have the same configuration. Ah. I wasn't explicit about that. (You're right about assumptions.) The IP addresses you put in app_servers and web_servers are *private* addresses. You shouldn't put public addresses in the app_servers and web_servers, if you have the option. If you have 1 machine, you should use 127.0.0.1, otherwise use the private IP. I don't specifically know about Rackspace, but you might need to change the firewall settings so each server is allowed to connect to 6800. Amazon, for example, has a security group firewall, so only the servers in the security group are allowed to see 6800. Outside servers can't get to it. I'm sure Rackspace has something similar. When you start Resin with "start-all" (or the /etc/init.d script), Resin will compare its own IP address with the configuration IP addresses in app_servers and web_servers and start itself as the local address. (Does that make sense?) -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Scaling Up</header>
    <date>Fri Nov 09 04:40:15 CET 2012</date>
    <body>Okay, so, I can set one up with the config, make a snapshot of that machine, then bring up more instances from that snapshot. I'll have to figure out how to manage the IP addresses of the hosts that I bring up; might have to manually edit the config file after they're brought up. Similar question for elastic servers. :-) Yes, I remember dealing with that on EC2, I'll figure out what Rackspace does. I did find the two IPs, internal and external. One thing that's becoming clear is what was listening on 6800 vs 80: 6800 is for internal communication among servers. Not sure if it's used in the single-server case, but I understand. Yes, I think so. After I make some dinner I'll try to go through your original email and get a couple servers running. The first server will be my load balancer, which will hit itself and the other server. MySQL can sit on the first server (although I imagine in that configuration, it might make sense for it to sit on the other server, since the first has the added burden of being the load balancer). Thanks! I'm rather excited to try running multiple machines, and see how badly my code breaks. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Scaling Up</header>
    <date>Fri Nov 09 04:51:23 CET 2012</date>
    <body>Yep. If the IP addresses are random, like Amazon, Resin has a few tricks to help, but that's a complication that's not necessary if you can rely on an IP address. You do have to tweak the config for the first elastic server, but after that you can take a snapshot of the elastic server and just bring up lots of instances with the new snapshot without changing the configuration. Exactly. Hopefully, it won't even notice :) -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Scaling Up</header>
    <date>Fri Nov 09 04:26:00 CET 2012</date>
    <body>One more request: I really prefer text descriptions. I find videos excruciatingly difficult to sit through, whereas a well-written textual how-to allows me to skim over parts I'm familiar with. One of the keys to making it well-written is to put the actual steps to carry out in a bullet-point or numbered list, so that a crucial bit of info isn't buried in a paragraph somewhere. Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Scaling Up</header>
    <date>Sat Nov 10 05:05:05 CET 2012</date>
    <body>I might actually be wrong about this one. Without explicit (Hibernate) caching, I think it's actually creating a persistence session on each request, and so all objects are created and destroyed in the request. Hibernate caching is its own beast, I'm sure I'll have to tackle that next. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Scaling Up</header>
    <date>Sat Nov 10 05:05:49 CET 2012</date>
    <body>Does that ack happen before the session.setAttribute() call returns? If not, it seems like there might be a hole. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Scaling Up</header>
    <date>Tue Nov 13 16:22:33 CET 2012</date>
    <body>Hi Haroon, The Memcache/JCache layer really isn't intended for direct access to the user session, if that was the intention of your question.  Although theoretically that's possible. We've added these API so that your application can setup and use a distributed cache as you see fit.  This cache is based on the same technology Resin uses for session failover. There is a "memcached tier" example in resin.xml in the latest Resin releases. It sets up a Memcache network listener. Here are some links to documentation on using the distributed cache with JCache: http://www.infoq.com/news/2011/12/resin-memcached http://www.caucho.com/resin-application-server/press/caucho-features-resin-cache-an-elastic-and-persisted-alternative-memcached-solution/ http://caucho.com/resin-4.0/admin/cluster-cloud.xtp#ClusterResourcesCacheQueues http://wiki4.caucho.com/Resin_Java_Cache_using_CDI_Inject Thanks, Paul http://tinyurl.com/aprccda http://maillist.caucho.com/mailman/listinfo/resin-interest http://blog.caucho.com http://twitter.com/cauchoresin http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Scaling Up</header>
    <date>Tue Nov 13 16:50:49 CET 2012</date>
    <body>Here's a link to a handout we created for JavaOne this year.  The back (2nd page) summarizes all the recent enhancements.  It should be helpful: https://s3.amazonaws.com/caucho-web/Resin_4.x_Cloud_JAMM_overview.pdf Typically the best place to look for changes is the release notes: http://caucho.com/resin-4.0/changes/index.xtp resin.properties was added in version 4.0.24 and refined in .25. Documentation here: http://caucho.com/resin-4.0/admin/config-resin-properties.xtp Thanks, Paul =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Scaling Up</header>
    <date>Fri Nov 09 09:19:55 CET 2012</date>
    <body>Hello Rick I haven't worked a lot on this, but if you want I can provide my resin.xml : in my application I have one resin front loadbalancer, with N application servers (all IP are known) and potentially 2 mysql db servers . I use resin 4.0.13 pro on linux debian -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Scaling Up</header>
    <date>Fri Nov 09 09:52:34 CET 2012</date>
    <body>Thanks, Riccardo, couldn't hurt! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Scaling Up</header>
    <date>Sat Nov 10 12:04:56 CET 2012</date>
    <body>you'll find my 2 xml conf (resin 4.0.13) - resin.xml is the front server, I have 1 front for 2 app-tier clusters, one cluster is for the application, the other if for images only servers - resin.safe.xml is the conf for application app-tier, I did not set any http service for this because I never access it directly. (but you have to if you use resin-admin) I don't use automatic deployement or elastic server yet, but I think I'll try this on the new version of resin. good luck Hello Rick I haven't worked a lot on this, but if you want I can provide my resin.xml : in my application I have one resin front loadbalancer, with N application servers (all IP are known) and potentially 2 mysql db servers . I use resin 4.0.13 pro on linux debian Thanks, Riccardo, couldn't hurt! -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France http://www.appartement-maison.fr - Resin 4.0 configuration file for a clustered/load-balance environment http://caucho.com/ns/resin" - jars with maven dependencies can be placed in project-jars to be used - by web-apps - Resin-managed data, including sessions, administration, and clustering - Remote management requires at least one enabled admin user. - Logging configuration for the JDK logging API. rollover-size="1mb" rollover-period="1D" - 'info' for production - 'fine' or 'finer' for development and troubleshooting - For production sites, change dependency-check-interval to something - like 600s, so it only checks for updates every 10 minutes. - SMTP server for sending mail notifications - Sets the default character encoding to utf-8 - - You can change the compiler to "javac", "eclipse" or "internal". - Admin services - The JVM arguments - Uncomment to enable admin heap dumps - - Uncomment for low-memory overhead - arguments for the watchdog process - Configures the minimum free memory allowed before Resin - will force a restart. - If starting Resin as root on Unix, specify the user name - and group name for the web server user. - For security, use a different cookie for SSL sessions. - Enables the cache (available in Resin Professional) Vary header rewriting for IE - Enables periodic checking of the server status and - check for deadlocks.. - - All servers can add &amp;lt;url&amp;gt;s to be checked. http://localhost:8080/test-ping.jsp - Defaults applied to each web-app. - Enable EL expressions in Servlet and Filter init-param - Sets timeout values for cacheable pages, e.g. static pages. - for security, disable session URLs by default. - For security, set the HttpOnly flag in cookies. - Some JSP packages have incorrect .tld files.  It's possible to - set validate-taglib-schema to false to work around these packages. - Sample database pool configuration - - The JDBC name is java:comp/env/jdbc/test - Default host configuration applied to all virtual hosts. - With another web server, like Apache, this can be commented out - because the web server will log this information. - configures an explicit root web-app matching the - webapp's ROOT - Administration application /resin-admin xmlns=" http://caucho.com/ns/resin" root-directory="/home/webapps/realty" work-dir="/home/webapps.tmp/realty/work" - Resin 3.2 configuration file. http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" - For production sites, change dependency-check-interval to something - like 600s, so it only checks for updates every 10 minutes. root-directory="/home/webapps/front" work-dir="/home/webapps.tmp/front/work" root-directory="/home/webapps/front" work-dir="/home/webapps.tmp/front/work"</body>
  </mail>
  <mail>
    <header>[Resin-interest] getParameterValues returnes the parameters twice</header>
    <date>Thu Nov 01 11:03:48 CET 2012</date>
    <body>Hi! We have begun seeing that getParameterValues returns each parameter twice. logger.debug("getParameterValues: " + gives DEBUG 21.09.2012 15:35:53:733 (LoginController.java:showForm:33) - getParameter: aaa DEBUG 21.09.2012 15:35:53:733 (LoginController.java:showForm:34) - getParameterValues: [aaa, aaa] for the querystring xxx=aaa Any ideas to why? :) I would have excpected that last line to show "[aaa]" instead of "[aaa, aaa]". When running on Jetty we see "[aaa]". We are running Resin 4.0.31. -Kaj :)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] getParameterValues returnes the parameters	twice</header>
    <date>Fri Nov 09 00:47:49 CET 2012</date>
    <body>Hi Kaj, I don't think you received a response to this question. This issue is fixed in 4.0.33, which should be released next week. Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] getParameterValues returnes the parameters	twice</header>
    <date>Mon Nov 12 15:36:32 CET 2012</date>
    <body>Great! :) Thanks! -Kaj :)</body>
  </mail>
  <mail>
    <header>[Resin-interest] class-loader / fail compiling then recompile	correctly</header>
    <date>Wed Oct 31 15:20:09 CET 2012</date>
    <body>Hello To retreive google analytics data, I have added google api jars in my application and use it in some scheduled-tasks. To avoid mixing jars, I put them in a sub folder of lib : WEB-INF/lib/google For Resin to compile my source with correct libs I added in &amp;lt;web-app&amp;gt; : At first resin launch there are many errors like : package com.google.api.client.googleapis.auth.oauth2 does not exist But immediatly after Resin recompile my class properly and starts running. I've read in resin's doc that the &amp;lt;class-loader&amp;gt; can be added also in but I don't see a reason for changing the scope of those libs that are only needed in this web-app. Thanks for any help. PS:I'm running resin 4.0.13, on linux debian/sun jdk. -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin-interest Digest, Vol 76,	Issue 9 : Tenured space ratio</header>
    <date>Wed Oct 31 09:38:20 CET 2012</date>
    <body>Hello. I never saw this warning but, on our side we customized the -J-XX:NewRatio to 1 (only way to handle eden/tenured space values with G1 as we discovered) on some applications. This means 50% for eden and 50% for tenured. As default is 2, there is less space for eden and our tests showed that webapps wanted more eden than default value was giving (avoid full GCs) Anyway, tuning the GC is a hard, long but very interesting task and a recommended way to do it is to replay scenarios with various configurations... And even if that config was good for us, there is no guarantee that it will match your needs. Good luck. Jonathan http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Managing Tenured Memory in Resin</header>
    <date>Tue Oct 30 18:14:23 CET 2012</date>
    <body>Hi Everyone, I could use a little help troubleshooting some messages in my jvm-default.log.  I am seeing a lot of the following messages in our Resin logs.  We are currently running Resin 4.0.23 Pro. I did a bit of research this morning about adjusting tenured memory limits, but I didn't find anything specific to adjusting the value. Does anyone know what property I need to adjust?  I currently have the following Java settings in my resin.xml file: I could increase the -Xmx property, but I am wondering if there is a better property to tweak. I am also seeing the following warning messages: Does anyone have some advice on how to resolve these warnings?  I read the Resin documentation, but I didn't find something specific. Thanks for your help Keith -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.go2hydraulics.com http://www.shoprvparts.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Managing Tenured Memory in Resin</header>
    <date>Tue Oct 30 19:12:10 CET 2012</date>
    <body>The max heap (set with the -Xmx parameter) is shared between all generations, with the typical Sun/Oracle JVM that is eden, survivor, tenured and permanent generations. The JVM usually does a pretty good job at adjusting the individual sizes according to how much garbage your app produces. I think 2097M out of 3000M is quite reasonable for the tenured generation. You may need to give it more memory.  Is it conceivable that your app has a resource leak? If so you may be able to get in shape for a while by restarting it.  The thread count warnings may indicate that a lot of your memory is going to call stacks for the threads.  If your app was faster you would see fewer threads and hence less memory used. If you really want to get into tuning the memory/GC settings there is http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html to guide you, but I don't recommend that. Knut Forkalsrud On Tue, Oct 30, 2012 at 10:14 AM, Keith Fetterman http://www.go2marine.com kfetter...@go2marine.com http://www.go2hydraulics.com http://www.shoprvparts.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Managing Tenured Memory in Resin</header>
    <date>Tue Oct 30 21:54:49 CET 2012</date>
    <body>Hi Knut, Thanks a lot for the feed back. When you say "If your app was faster you would see fewer threads and hence less memory used. " are you thinking we need to make our app. more efficient or throw some CPU power at it? Thanks, Keith The max heap (set with the -Xmx parameter) is shared between all generations, with the typical Sun/Oracle JVM that is eden, survivor, tenured and permanent generations. The JVM usually does a pretty good job at adjusting the individual sizes according to how much garbage your app produces. I think 2097M out of 3000M is quite reasonable for the tenured generation.  You may need to give it more memory.  Is it conceivable that your app has a resource leak? If so you may be able to get in shape for a while by restarting it.  The thread count warnings may indicate that a lot of your memory is going to call stacks for the threads.  If your app was faster you would see fewer threads and hence less memory used. If you really want to get into tuning the memory/GC settings there is http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html to guide you, but I don't recommend that. Knut Forkalsrud On Tue, Oct 30, 2012 at 10:14 AM, Keith Fetterman mailto:kfetter...@go2marine.com Hi Everyone, I could use a little help troubleshooting some messages in my jvm-default.log.  I am seeing a lot of the following messages in our Resin logs.  We are currently running Resin 4.0.23 Pro. MemoryTenuredHealthCheck[WARNING:0.48% free (10.127M free, 2097.152M max, 2087.025M used)] I did a bit of research this morning about adjusting tenured memory limits, but I didn't find anything specific to adjusting the value. Does anyone know what property I need to adjust?  I currently have the following Java settings in my resin.xml file: I could increase the -Xmx property, but I am wondering if there is a better property to tweak. I am also seeing the following warning messages: AnomalyAnalyzer JVM|Thread|JVM Blocked Count WARNING AnomalyAnalyzer JVM|Thread|JVM Runnable Count WARNING Does anyone have some advice on how to resolve these warnings?  I read the Resin documentation, but I didn't find something specific. Thanks for your help Keith -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 http://www.go2marine.com kfetter...@go2marine.com mailto:kfetter...@go2marine.com http://www.go2hydraulics.com http://www.shoprvparts.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Managing Tenured Memory in Resin</header>
    <date>Tue Oct 30 22:04:53 CET 2012</date>
    <body>As Knut said, that size should be plenty. I'd look to see if you have some kind of memory leak. Take a look at either the heap section of Resin's PDF or /resin-admin. Specifically look for the ZombieClassLoaderMarker. Again, take a look at the PDF report (or thread graphs at that time.) If it's a little spike (2-3 threads), it's not a big problem, but if there are lots of threads in that spike you might have some kind of locking issue. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Managing Tenured Memory in Resin</header>
    <date>Wed Oct 31 00:24:04 CET 2012</date>
    <body>Thanks Scott, We are currently running 4.0.23 Pro.  I am getting ready to deploy 4.0.32 Pro into production.  Do you think the reporting in 4.0.32 Pro is better and would help troubleshoot the problem? Keith http://maillist.caucho.com/mailman/listinfo/resin-interest -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.go2hydraulics.com http://www.shoprvparts.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Managing Tenured Memory in Resin</header>
    <date>Wed Oct 31 00:33:31 CET 2012</date>
    <body>It should be about the same. The 4.0.23 heap dump will show the same information. There are a few reporting changes in 4.0.32, but nothing major. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] closed entity manager on night process</header>
    <date>Fri Oct 26 15:38:06 CEST 2012</date>
    <body>Hello I'm running resin 4 .0.13, on linux debian/sun jd k . I have so me cron jobs launched by resin. xml c onfiguration work perfectly on my macosx (they are l aunched every minute for testing pur pose ). On the production server some cron jobs work a ll righ t while java.lang.IllegalStateException: Attempting to execute an operation on a closed EntityManager.     at org.eclipse.persistence.internal.jpa.EntityManagerImpl.verifyOpen(EntityManagerImpl.java:1563)     at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getResultList(EJBQueryImpl.java:693)     at realty.Globalaction.reload_orgtables(Globalaction.java:947)     at reacron.Cleancache.CleanOrgCache(Cleancache.java:33)     at reacron.Cleancache.run(Cleancache.java:23)     at com.caucho.server.util.ScheduledThreadPool$TaskFuture.run(ScheduledThreadPool.java:591)     at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:182)     at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) This is t he code at Globalaction.java:947 Query qr=m_manager.createQuery("select on from e is 947 I suspect that at night time there is no particular ac tivity on the server, but wh y o ther cron jobs work all ri ght ? &lt;font face="Helvetica, Arial, sans-serif"&gt; m_manager i s created by the resin.xm l conf :   &amp;lt;ejb-server data-source="realty/jdbc" I wonder why it is "cl osed" sometimes. I even don't know how to close it. Thanks for any help. -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>[Resin-interest] Weird 404 problem</header>
    <date>Thu Oct 25 04:56:03 CEST 2012</date>
    <body>I just made a fairly minor change to a webapp that's been running well for years. I uploaded it to a new directory on the server, and then modified the resin.xml to point to the new location. I stopped and restarted resin to be sure. resin 4.0.19 I tried loading up /, and it gave me a 404 error. I double-checked the paths, tried slightly different ways of specifying them (host tag vs web-app tag), no luck. Then I loaded my server using the host name specified in the host tag (I usually use the host alias). Suddenly, things loaded. After that, I was able to go back to using the host alias. I bounced the server, and had the same issue. My host looks like this: I was unable to access it via missiondb.latencyzero.com until I had first accessed it via kepler.latencyzero.com. Note that before, when the web-app was configured to point to a different directory, I never experienced this problem. The log shows this on the 404: Resin[id=default] started in 1513ms FINE (com.caucho.network.listen.TcpSocketLink) TcpSocketLink[id=1,default] starting connection TcpSocketLink[id= http://*:80-1,http://*:80,ACCEPT ], total=4 FINE (com.caucho.server.http.HttpRequest) Http[default, 1] GET / HTTP/1.1 FINE (com.caucho.server.http.HttpRequest) Http[default, 1] Remote-IP: 24.6.132.52:39388 FINE (com.caucho.server.http.HttpRequest) Http[default, 1] Host: missiondb.latencyzero.com FINE (com.caucho.server.http.HttpRequest) Http[default, 1] User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.14 (KHTML, like Gecko) Version/6.0.1 Safari/536.26.14 FINE (com.caucho.server.http.HttpRequest) Http[default, 1] Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 FINE (com.caucho.server.http.HttpRequest) Http[default, 1] DNT: 1 FINE (com.caucho.server.http.HttpRequest) Http[default, 1] Cache-Control: max-age=0 FINE (com.caucho.server.http.HttpRequest) Http[default, 1] Accept-Language: en-us FINE (com.caucho.server.http.HttpRequest) Http[default, 1] Accept-Encoding: gzip, deflate FINE (com.caucho.server.http.HttpRequest) __utmz=268186515.1346150693.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none) FINE (com.caucho.server.http.HttpRequest) Http[default, 1] Connection: keep-alive FINE (com.caucho.env.deploy.EnvironmentDeployController) Host[error/host/error] initializing FINE (com.caucho.env.deploy.EnvironmentDeployController) Host[error/host/error] root-directory=/error FINE (com.caucho.env.deploy.EnvironmentDeployController) WebApp[error/webapp//error,NEW] initializing FINE (com.caucho.env.deploy.EnvironmentDeployController) WebApp[error/webapp//error,NEW] root-directory=/error-root CONFIG (com.caucho.server.dispatch.ServletMapper) servlet-mapping *.jsp -&amp;gt; resin-jsp CONFIG (com.caucho.server.dispatch.ServletMapper) servlet-mapping *.jspf -&amp;gt; resin-jsp CONFIG (com.caucho.server.dispatch.ServletMapper) servlet-mapping *.jspx -&amp;gt; resin-jspx CONFIG (com.caucho.server.dispatch.ServletMapper) servlet-mapping *.php -&amp;gt; resin-php CONFIG (com.caucho.server.dispatch.ServletMapper) servlet-mapping / -&amp;gt; resin-file FINE (com.caucho.server.http.AbstractHttpResponse) Http[default, 1] HTTP/1.1 404 Not Found FINE (com.caucho.server.http.AbstractHttpResponse) Http[default, 1] Content-Type: text/html; charset=utf-8 FINE (com.caucho.server.http.AbstractHttpResponse) Http[default, 1] Content-Length: 186 FINE (com.caucho.server.http.HttpResponseStream) Http[default, 1] finish/keepalive Any ideas? Thanks. -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] server-multi?</header>
    <date>Wed Oct 24 23:47:45 CEST 2012</date>
    <body>What is this tag? It's not listed in the reference: http://www.caucho.com/resin-4.0/reference.xtp -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] server-multi?</header>
    <date>Wed Oct 24 23:57:09 CEST 2012</date>
    <body>http://www.caucho.com/resin-4.0/reference.xtp Thanks. We'll need to fix that. The &amp;lt;server-multi&amp;gt; is meant to work together with the resin.properties file to simplify defining a cluster. The main purpose is to allow the resin.properties to define a 3-server cluster with a single property like: app_servers : 192.168.1.10:6800 192.168.1.11:6800 192.168.1.12:6800 Essentially, it's a macro that creates multiple &amp;lt;server&amp;gt; entries, one for each item in the address-list. The names of the servers are generated automatically, "app-0", "app-1", "app-2". It's equivalent to creating the three &amp;lt;server&amp;gt; items individually. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] server-multi?</header>
    <date>Thu Oct 25 01:47:17 CEST 2012</date>
    <body>http://www.caucho.com/resin-4.0/reference.xtp Thanks, Scott! -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] GWT - replacing Jetty with Resin in Eclipse</header>
    <date>Thu Oct 18 22:26:03 CEST 2012</date>
    <body>I created a GWT project and a Resin Server. When i right click the Resin server and try to add the project to it, I get "There are no resources that can be added". Has anyone had any success with this please? Basically my goal is to set up GWT with Resin and EclipseLink, so there're no Google App Engine needed.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] GWT - replacing Jetty with Resin in Eclipse</header>
    <date>Thu Oct 18 23:42:18 CEST 2012</date>
    <body>I think the issue is that the project ins't  nominated to become a Web Application. Please open project properties and add "Dynamic Web Module" in "Project Facets" node. Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Strange class loading issues</header>
    <date>Wed Oct 17 13:08:11 CEST 2012</date>
    <body>I have two webapps in the same &amp;lt;host&amp;gt; tag. They're nearly identical (one was cloned from the other). But when resin starts, it complains about not being able to load the MySQL driver: Thing is, the other webapp loads it exactly the same way, and has no problem. Both apps have the .jar file in the same place inside WEB-INF/lib (using the tree loader). This kind of thing seems to happen a lot, and it's always a pain to debug. Thanks, -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Strange class loading issues</header>
    <date>Wed Oct 17 13:36:52 CEST 2012</date>
    <body>I figured it out. Missing path component in the web-app config. Kinda wish it would say "NO DIRECTORY AT BLAH BLAH DUMBASS" :-) -- Rick http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin-interest Digest, Vol 76, Issue 3</header>
    <date>Wed Oct 10 19:36:23 CEST 2012</date>
    <body>Will the 4.0.33 release also fix the array out of bounds issue with the IBM J9 1.7 JVM? java.lang.ArrayIndexOutOfBoundsException: Array index out of range: -80 at com.caucho.hessian.util.IdentityIntMap.put(IdentityIntMap.java:141) at com.caucho.hessian.io.Hessian2Output.addRef(Hessian2Output.java:1407) at com.caucho.hessian.io.Hessian2Output.addRef(Hessian2Output.java:1339) at com.caucho.hessian.io.UnsafeSerializer.writeObject(UnsafeSerializer.java:163) at com.caucho.hessian.io.Hessian2Output.writeObject(Hessian2Output.java:465) at com.caucho.hmtp.HmtpWriter.message(HmtpWriter.java:128) at com.caucho.hmtp.HmtpWebSocketWriter.message(HmtpWebSocketWriter.java:107) at com.caucho.server.resin.ResinActor.sendWarning(ResinActor.java:84) at com.caucho.server.resin.ResinWarningHandler.warning(ResinWarningHandler.java:55) at com.caucho.env.warning.WarningService.sendWarning(WarningService.java:98) at com.caucho.env.shutdown.ShutdownSystem.startFailSafeShutdown(ShutdownSystem.java:268) at com.caucho.env.shutdown.ShutdownSystem.startFailSafeShutdown(ShutdownSystem.java:249) at com.caucho.env.shutdown.ShutdownSystem.shutdown(ShutdownSystem.java:228) at com.caucho.env.shutdown.ShutdownSystem.shutdownActive(ShutdownSystem.java:208) at com.caucho.server.resin.ResinActor.destroy(ResinActor.java:166) at com.caucho.server.resin.ResinLink.run(ResinLink.java:78) at com.caucho.env.thread2.ResinThread2.runTasks(ResinThread2.java:173) at com.caucho.env.thread2.ResinThread2.run(ResinThread2.java:118) Steve Francis zSeries Systems Engineer IBM SO Delivery, Server Systems Operations Office:  770-442-7157 http://maillist.caucho.com/mailman/listinfo/resin-interest http://caucho.com/ns/resin" http://bugs.caucho.com/view.php?id=5240 http://caucho.com/ns/resin" http://maillist.caucho.com/mailman/listinfo/resin-interest http://blog.caucho.com http://twitter.com/cauchoresin http://maillist.caucho.com/pipermail/resin-interest/attachments/20121010/580c50b8/attachment-0001.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin-interest Digest, Vol 76, Issue 3</header>
    <date>Thu Oct 11 03:09:48 CEST 2012</date>
    <body>Yes, this is a bug in Hessian, that will be fixed in .33 also. http://bugs.caucho.com/view.php?id=5239 -Paul</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin-pro-4.0.31 and IBM JDK 1.6.0</header>
    <date>Wed Oct 10 06:28:36 CEST 2012</date>
    <body>Greetings! I'm trying to start resin without any apps deployed with the 64bit IBM JDK on Linux. Keep getting this error. This error is also reproducible on AIX. rdeepak@rdeepak-desktop:~/Development/project/resin-pro-4.0.31$ ./bin/resin.sh start conf/resin.xml:5: java.lang.NullPointerException 4: &amp;lt;resin xmlns=" http://caucho.com/ns/resin" 6: IBM JDK details: rdeepak@rdeepak-desktop:~/Development/project/resin-pro-4.0.31$ java -version java version "1.6.0" Java(TM) SE Runtime Environment (build pxa6460sr11-20120806_01(SR11)) IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Linux amd64-64 jvmxa6460sr11-20120801_118201 (JIT enabled, AOT enabled) J9VM - 20120801_118201 JIT  - r9_20120608_24176ifx1 GC   - 20120516_AA) JCL  - 20120713_01 Thanks Deepak -- This message has been scanned for viruses and dangerous content by MailScanner, and is believed to be clean.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin-pro-4.0.31 and IBM JDK 1.6.0</header>
    <date>Wed Oct 10 16:25:11 CEST 2012</date>
    <body>Hi Deepak, We recently traced this to an apparent bug in the IBM J9 1.6 JVM.  There is a bug report with details here: http://bugs.caucho.com/view.php?id=5240 I expect we will add exception handling for it in the next Resin 4.0 release (4.0.33) which not scheduled yet, but will likely be cut in 3-6 weeks from now. Thanks, Paul http://caucho.com/ns/resin" http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.30+ NotSerializableException:	com.caucho.el.MethodExpr$MethodCall</header>
    <date>Mon Oct 01 17:06:15 CEST 2012</date>
    <body>Without having had time to look into it further, I'm wondering if anyone else has seen these exceptions moving from Resin 4.0.29 to 4.0.30 (same problem with 4.0.31 for us)? Any workaround? Caused by: java.io.NotSerializableException: com.caucho.el.MethodExpr$MethodCall at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330) ~[na:1.6.0_30] at java.util.concurrent.ConcurrentHashMap.writeObject(ConcurrentHashMap.java:1247) ~[na:1.6.0_30] at sun.reflect.GeneratedMethodAccessor160.invoke(Unknown Source) ~[na:na] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ~[na:1.6.0_30] at java.lang.reflect.Method.invoke(Method.java:597) ~[na:1.6.0_30] at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158) ~[na:1.6.0_30] at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158) ~[na:1.6.0_30] at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330) ~[na:1.6.0_30] at com.sun.faces.facelets.el.TagValueExpression.writeExternal(TagValueExpression.java:186) ~[javax.faces-2.1.11.jar:2.1.11] at java.io.ObjectOutputStream.writeExternalData(ObjectOutputStream.java:1429) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1398) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158) ~[na:1.6.0_30] at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330) ~[na:1.6.0_30] at java.util.ArrayList.writeObject(ArrayList.java:570) ~[na:1.6.0_30] at sun.reflect.GeneratedMethodAccessor72.invoke(Unknown Source) ~[na:na] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ~[na:1.6.0_30] at java.lang.reflect.Method.invoke(Method.java:597) ~[na:1.6.0_30] at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1346) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1154) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1346) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1154) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330) ~[na:1.6.0_30] at java.util.HashMap.writeObject(HashMap.java:1001) ~[na:1.6.0_30] at sun.reflect.GeneratedMethodAccessor155.invoke(Unknown Source) ~[na:na] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ~[na:1.6.0_30] at java.lang.reflect.Method.invoke(Method.java:597) ~[na:1.6.0_30] at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158) ~[na:1.6.0_30] at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330) ~[na:1.6.0_30] at com.sun.faces.renderkit.ClientSideStateHelper.doWriteState(ClientSideStateHelper.java:338) ~[javax.faces-2.1.11.jar:2.1.11] at com.sun.faces.renderkit.ClientSideStateHelper.writeState(ClientSideStateHelper.java:170) ~[javax.faces-2.1.11.jar:2.1.11] at com.sun.faces.renderkit.ResponseStateManagerImpl.getViewState(ResponseStateManagerImpl.java:135) ~[javax.faces-2.1.11.jar:2.1.11] --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.30+ NotSerializableException:	com.caucho.el.MethodExpr$MethodCall</header>
    <date>Mon Oct 01 21:07:05 CEST 2012</date>
    <body>I'm marking it as a bug. That structure is supposed to be a runtime cache, and not saved during serialization. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] jsp-config in resin 4.0.x</header>
    <date>Thu Sep 27 00:34:05 CEST 2012</date>
    <body>I am trying to test using jsp-property-group functionality to control the behavior of jspx files in an application, and am not getting the results I expect. It seems like this should work, but it has no effect: Using a prelude, I was able to accomplish basically the same thing, but that seems much less clean. I have tried putting the config in a standard web.xml and in the resin-web.xml, but neither has the intended effect. Is default-content-type not supported? I don't see it documented on the reference page of the site, but an xml error on the page lists it in the supported schema. The page-encoding doesn't seem to have an effect either, but that's not as big a concern. Thanks in advance for any insight/experience. Matt Pangaro</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] jsp-config in resin 4.0.x</header>
    <date>Thu Sep 27 00:37:03 CEST 2012</date>
    <body>To revise that, I can see that the page-encoding is taking effect, which tells me that my mapping is working, but the default-content-type doesn't do anything, so I'm thinking it must not be supported. said: http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Question about EL in JSPX</header>
    <date>Wed Sep 26 00:54:09 CEST 2012</date>
    <body>We have a number of JSPX files that work properly in 3.1.7a, but are failing now in versions 4.0.20 and 4.0.31 with problems in the encoding. The question is whether the source JSPX file needs to be parsed properly as XML prior to processing, or after. The example below illustrates it: This code works in 3.1.7a, but not 4.0.20/31: Giving the error msg: !variable2 eq 'value2'' Note that the &amp;amp;&amp;amp; are missing. Changing "&amp;amp;&amp;amp;" to "and" will make it work again in Resin 4.0.x: We also have a small number of scriptlet tags that use &amp;amp;amp; or &amp;amp;#38; for this. We just want to confirm the order parsing/processing, per the spec, and see whether the behavior we're seeing is expected. Matt Pangaro Lokitech &amp;gt;&amp;gt; software . strategy . design http://www.lokitech.com m. 1.301.728.6906 f. 1.815.364.0656 e. ma...@lokitech.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about EL in JSPX</header>
    <date>Wed Sep 26 01:10:38 CEST 2012</date>
    <body>It's an XML file first, and then the contents of the XML attribute are parsed. So the "&amp;amp;" needs to become &amp;amp;amp; (or use "and") -- Scott http://www.lokitech.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Tiles issues on 4.0.x</header>
    <date>Tue Sep 25 08:11:50 CEST 2012</date>
    <body>Hi all, I'm working to try and diagnose some issues we're seeing with an existing application that's being moved from Resin 3.1.7a to Resin 4. So far we have tested on versions 4.0.20 and 4.0.31 and have seen the same issue. The application uses Spring 3.0.4 and Struts 1.2.8 with Tiles. It currently uses c:import tags to insert tiles content in some cases, which worked fine in Resin 3.1.7a, but has caused exceptions in both Resin 4 versions. The error messages look something like: [15:24:10,597] FATAL - "Error ID: Error Msg:Unhandled exception 'javax.servlet.jsp.JspException: ServletException in '/pages/tiles/page1.jsp': ServletException in '/tiles/search/search.jsp': c:import status code 401 recieved while serving /tiles/search/page2.jsp' for request '/admin/page' As you can see, there's a  bunch of nesting going on. Using a jsp:include instead of the c:import clears up the issue, but we're trying to get to the root cause before we settle on a solution. We were hoping somebody else might have seen this. Thanks, Matt Pangaro</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tiles issues on 4.0.x</header>
    <date>Tue Sep 25 19:36:51 CEST 2012</date>
    <body>Hi all, I'm working to try and diagnose some issues we're seeing with an existing application that's being moved from Resin 3.1.7a to Resin 4. So far we have tested on versions 4.0.20 and 4.0.31 and have seen the same issue. The application uses Spring 3.0.4 and Struts 1.2.8 with Tiles. It currently uses c:import tags to insert tiles content in some cases, which worked fine in Resin 3.1.7a, but has caused exceptions in both Resin 4 versions. The error messages look something like: [15:24:10,597] FATAL - "Error ID: Error Msg:Unhandled exception 'javax.servlet.jsp.JspException: ServletException in '/pages/tiles/page1.jsp': ServletException in '/tiles/search/search.jsp': c:import status code 401 recieved while serving /tiles/search/page2.jsp' for request '/admin/page' As you can see, there's a  bunch of nesting going on. Using a jsp:include instead of the c:import clears up the issue, but we're trying to get to the root cause before we settle on a solution. We were hoping somebody else might have seen this. Can you run this with a level="finer"? 401 is an authentication issue. It's conceivable that some information isn't getting passed to the child request using c:import. -- Scott Thanks, Matt Pangaro</body>
  </mail>
  <mail>
    <header>[Resin-interest] Up-to-date remote deploy strategy</header>
    <date>Thu Sep 20 10:34:08 CEST 2012</date>
    <body>What is the current recommended approach for remote deploying from Hudson/Jenkins to recent Resin versions (4.0.29+)? It looks like the resin-maven-plugin [1] (which may have been preferable) has been abandoned? Latest version is 4.0.17 and does not seem to be working. Is command line deploy [2] the latest and greatest? What would be the recommended approach for invoking from Hudson/Jenkins? exec-maven-plugin with exec:java or exec:exec? Is the same Resin version required on both machines? 1: http://caucho.com/resin-4.0/admin/deploy-ant-maven.xtp 2: http://caucho.com/resin-4.0/admin/deploy-command-line.xtp --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Up-to-date remote deploy strategy</header>
    <date>Fri Sep 21 19:37:57 CEST 2012</date>
    <body>Command line is the best. It's current and tested nightly as part of our automated testing. The ant/maven was before we upgraded the CLI. Probably exec. On our .deb and .rpm install "resinctl" is installed in the normal search path, so exec would give the installed version. Yes, it's a good idea. We have upgraded the communication several times. -- Scott http://caucho.com/resin-4.0/admin/deploy-ant-maven.xtp http://caucho.com/resin-4.0/admin/deploy-command-line.xtp</body>
  </mail>
  <mail>
    <header>[Resin-interest] SSL redirect for specific web applications</header>
    <date>Wed Sep 12 20:46:26 CEST 2012</date>
    <body>I am trying to force all access to a specific web application to be secured under SSL. The documentation says: http://caucho.com/ns/resin" ... ... I have tried this in various forms and it does not force the security. Is there somewhere specific this needs to be placed or is there a new format for this directive? I am running resin-pro 4.0.29. Also, I import specific web-app definitions in resin.xml using resin:import to load things like database resources per application: RESIN.XML ... MYAPP.XML (placed in webapps folder) http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" ... If I try to include the resin:Redirect directive in this imported file, I get an error: 'resin:Redirect' is an unknown property of 'com.caucho.server.webapp.WebApp'. resin:Redirect is a child of web-app in the documentation so it seems something strange happens when this is imported. If I remove the import file and instead paste the entire contents of the import file directly into resin.xml I don't receive the error…but the redirect still doesn't work. I think this is the last thing I need to figure out before I can move forward with Resin Pro 4. thanks matt</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] SSL redirect for specific web applications</header>
    <date>Wed Sep 12 22:55:33 CEST 2012</date>
    <body>I am trying to force all access to a specific web application to be secured under SSL. The documentation says: http://caucho.com/ns/resin" ... https://$%7Bhost.name%7D ... I have tried this in various forms and it does not force the security. Is there somewhere specific this needs to be placed or is there a new format for this directive? I am running resin-pro 4.0.29. Can you send me an exact resin.xml? I'm trying to reproduce the problem here, but it's working for me. Also, I import specific web-app definitions in resin.xml using resin:import to load things like database resources per application: *MYAPP.XML (placed in webapps folder)* http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" If I try to include the resin:Redirect directive in this imported file, I get an error: 'resin:Redirect' is an unknown property of 'com.caucho.server.webapp.WebApp'. The xmlns:resin is incorrect for myapp.xml. It needs to be "urn:java:com.caucho.resin". -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Old files not removed at redeploy</header>
    <date>Wed Sep 12 13:30:54 CEST 2012</date>
    <body>We're in the process of setting up a new server and have installed Resin 4.0.29 from RPM. We have made minimal changes to the config to get up and running, and are facing an issue we haven't seen on any other Resin installation: When a .war is redeployed it seems the contents of the new .war is extracted, although the old content is not removed. This means, for example, if a JAR file is updated from foo-1.0.jar to foo-1.1.jar, when deployed on the new server we will have both foo-1.0.jar and foo-1.1.jar (and thus foo-1.0.jar will be used and this causes problems). Restarting Resin doesn't help. Once a file ends up in the expanded directory, I can only get rid of it by manual delete. Resin is currently running as root, so I can't really see how it could be an access issue. I have increased Resin logging but can't find anything abnormal in there. Are there any settings that can affect this? Anything I should look for in the log? (Any particular Resin package I should limit the logging to?) --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Old files not removed at redeploy</header>
    <date>Wed Sep 12 16:43:59 CEST 2012</date>
    <body>This has been fixed in 4.0.31: http://bugs.caucho.com/view.php?id=5193 As a temporary work-around, you can remove expand-preserve-fileset="WEB-INF/work/**" from your resin.xml.  But that will remove all compiled JSP causing them to be recompiled even if they have not changed in the new war. Bill http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] rollover-count question</header>
    <date>Tue Aug 28 16:03:48 CEST 2012</date>
    <body>Hello I have my resin log being changed every night with path="/home/webapps.tmp/realty/logs/jvm.log"      rollover-size="1mb"      rollover-period="1D" I thought that rollover-count="60" would make resin delete oldest file if there are more than 60. But I have 225 files in my log directory. The docs says : "maximum number of rollover files before the oldest ones get overwritten". I don't undestrand why it talks about "overwriting". What is the best way to clean old resin log files ? Thanks a lot. -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] rollover-count question</header>
    <date>Thu Aug 30 09:29:48 CEST 2012</date>
    <body>I forgot to say that I use Resin 4.0.13 on Linux Debian. Thanks for any info. Hello parameters : path="/home/webapps.tmp/realty/logs/jvm.log" rollover-size="1mb" rollover-period="1D" I thought that rollover-count="60" would make resin delete oldest file if there are more than 60. But I have 225 files in my log directory. The docs says : "maximum number of rollover files before the oldest ones get overwritten". I don't undestrand why it talks about "overwriting". What is the best way to clean old resin log files ? Thanks a lot. -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France http://www.appartement-maison.fr http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] rollover-count question</header>
    <date>Sat Sep 01 09:52:30 CEST 2012</date>
    <body>Hello I have no problem to write a shell script that will clean my log directory. All I want to know is why rollover-count="60" do not make the job and if there is something in Resin to do this. Thanks. I forgot to say that I use Resin 4.0.13 on Linux Debian. Thanks for any info. Hello parameters : path="/home/webapps.tmp/realty/logs/jvm.log" rollover-size="1mb" rollover-period="1D" I thought that rollover-count="60" would make resin delete oldest file if there are more than 60. But I have 225 files in my log directory. The docs says : "maximum number of rollover files before the oldest ones get overwritten". I don't undestrand why it talks about "overwriting". What is the best way to clean old resin log files ? Thanks a lot. -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France http://www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] javax Validation provider change between 4.0.23 and 4.0.30?</header>
    <date>Tue Aug 28 12:50:07 CEST 2012</date>
    <body>----- Original Message ----- Subject: [Resin-interest] javax Validation provider change between 4.0.23 and 4.0.30? Date: Tue, 28 Aug 2012 03:42:24 -0700 I just built a new webapp that uses javax Validation. It works on my local machine with 4.0.30, but doesn't work on my server with 4.0.23. I'm wondering if between those two, a validation provider was included in resin? The error I get on the server is: javax.validation.ValidationException: Unable to find a default provider Rick Hibernate validator implementation is under webapp-jars. Would you happen to have different classpath configs...? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] javax Validation provider change between	4.0.23 and 4.0.30?</header>
    <date>Tue Aug 28 14:07:21 CEST 2012</date>
    <body>Yes, it's possible the resin.xml or resin.sh scripts are from a version before 4.0.23. Thanks! http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] javax Validation provider change between 4.0.23	and 4.0.30?</header>
    <date>Tue Aug 28 12:44:23 CEST 2012</date>
    <body>I just built a new webapp that uses javax Validation. It works on my local machine with 4.0.30, but doesn't work on my server with 4.0.23. I'm wondering if between those two, a validation provider was included in resin? The error I get on the server is: javax.validation.ValidationException: Unable to find a default provider -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] JSP encoding issues</header>
    <date>Tue Aug 28 01:39:54 CEST 2012</date>
    <body>I'm trying to serve everything UTF-8. To this end, I wrote a request filter that sets the input and output encodings to UTF-8, and I've used that successfully in the past. I've been able to avoid putting a page encoding directive in each page. With resin 4.0.30, I'm seeing something odd. I only get the right behavior if the JSP page as an extra &amp;lt;%@ page %&amp;gt; at the top somewhere. The actual directive inside doesn't seem to matter. I had an import directive, but tried it without one and still got the right behavior. I also have, before that, at &amp;lt;%@ include directive, which must also be present. It includes the following: Without that, the resulting encoding isn't correct, either. What's odd is the empty page directive required to make it work. Any ideas? -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSP encoding issues</header>
    <date>Tue Aug 28 02:04:29 CEST 2012</date>
    <body>Oh, I can also put that empty page directive at the end of my include file, and it also triggers the correct behavior. http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSP encoding issues</header>
    <date>Tue Aug 28 19:16:06 CEST 2012</date>
    <body>What, exactly isn't working? The parsing of the page? Or the content-type header? I just created a filter and JSP to reproduce this, and in all cases the res.setCharacterEncoding or res.setContentType is passed through to the output. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSP encoding issues</header>
    <date>Tue Aug 28 22:50:23 CEST 2012</date>
    <body>Sorry, I should've been more clear. The problem I'm experiencing is not that the headers aren't being properly set. It's that UTF-8 in my source page is getting mangled. In this case, a copyright symbol (©), while still rendered in the page, is preceded by a capital A with an accent (not sure of the exact character) when finally rendered in Safari or FireFox. Somewhere in the long chain of processing, a conversion is happening. -- Rick http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSP encoding issues</header>
    <date>Tue Aug 28 23:29:24 CEST 2012</date>
    <body>Have you tried setting the When parsing the JSP page, Resin doesn't look at the dynamic value of the character encoding. And the default value is iso-8859-1 according to the spec. So when the page is parsed, that value needs to be set, either in the page itself or the &amp;lt;character-encoding&amp;gt;. Filters don't matter in this case. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSP encoding issues</header>
    <date>Wed Aug 29 00:56:13 CEST 2012</date>
    <body>I had not, but I've put that in now. I tried to first reproduce the problem as originally described, but I could not. It very clearly and reliably would reproduce as originally described, but I've made so many changes to the pages since then that whatever triggers the behavior seems to be permanently "correct." In any case, I've added the character-encoding tag to my resin.xml file. Why, oh why, did they standardize on iso-8859-1? http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Why, oh why! Re:  JSP encoding issues</header>
    <date>Wed Aug 29 10:49:49 CEST 2012</date>
    <body>Same good old question in all areas of computer stuff. :-) "Why could they not foresee?" But hey, JSP is pretty old, who would have thought, its still there? (It also took some time, before UTF-8 was standard in shell environments of linux. Or even databases such as oracle and mysql...)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSP encoding issues</header>
    <date>Wed Aug 29 01:52:39 CEST 2012</date>
    <body>We had that issue when using jsp:include (jsp:include content wouldn't get UTF-8 encoded), but switching it out for c:import worked.  Not sure if this applies in your case, but if the copyright is jsp:include'd you might try to c:import and see if you get different results.  No matter what you did in the highest level JSP (the controller if you will) it didn't encode stuff brought in via the jsp:include.  I thought that had been fixed at one point, but possibly not. Aaron mailto:resin-interest- file, filter behavior tried it http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSP encoding issues</header>
    <date>Wed Aug 29 02:33:39 CEST 2012</date>
    <body>I originally did NOT use jsp:include, just had the markup right there in the page. The only thing I did was include (using &amp;lt;%@ page include&amp;gt;) was a prefix file that included a few tag libraries, and set the content type of the page. (As I understand it, you have to set the content type of all the pages, even jsp:include ones.) In any case, I tried reverting to that same arrangement, and could no longer reproduce the problem. But I've experimented with so many ways of setting the encoding, I'm sure I didn't get back to exactly where I was (where an empty &amp;lt;%@ page%&amp;gt; directive would make the difference). mailto:resin-interest- http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Debian install still broken in 4.0.30</header>
    <date>Sat Aug 25 08:01:55 CEST 2012</date>
    <body>.... And installing 4.0.30 over previous release still barfs at the fact that the resin user already exists. Rgds Alex ----------------- sip:924110...@sip.callwithus.com ************************************************** To view the terms under which this email is distributed, please go to http://www2.hull.ac.uk/legal/disclaimer.aspx **************************************************</body>
  </mail>
  <mail>
    <header>[Resin-interest] Yup, PHP still broken in 4.0.30</header>
    <date>Sat Aug 25 05:25:29 CEST 2012</date>
    <body>I've installed the latest wordpress under the apache2 that comes with Mac OS X 10.8. Everything works fine when running under the official PHP 5.3.13 installed on my system. There's clearly something still wrong with Quercus, but in the absence of error reporting, I don't know what it is. -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] EclipseLink Upgrade Question</header>
    <date>Sat Aug 25 00:48:17 CEST 2012</date>
    <body>We are using EclipseLink and cannot use the version that ships with resin-4.0.x due to a bug in that version.  So we are having to install resin and then delete the jar file that's in the resin lib folder, which is less than desirable.  We really don't want to have to modify the resin install at all.  So two questions: 1) Is there any way to tell resin, via the resin.xml, to ignore the version found in resin-4.0.30/lib? 2) Is there any hope of you guys upgrading resin-4.0.30 to ship with version EclipseLink 2.4 instead? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>[Resin-interest] Latest WordPress 3.4.1</header>
    <date>Fri Aug 24 05:23:35 CEST 2012</date>
    <body>So, I installed 4.0.30, and a clean install of WordPress 3.4.1. I'm not seeing any of the typical NPEs that plagued me in the past (well, that's not entirely true; one plug-in was writing them to std-out), but I've tried three different syntax highlighting plug-ins, including one I've successfully used before, and none work correctly. I can't tell if it's Resin/Quercus or something else. Is there a way to ensure any weird little PHP error is logged somewhere? I'm not seeing anything else to indicate a problem, aside from the behaviors. I really don't want to run Apache. I guess I can try the PHP route, although something prevented that last time I tried. -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] app-default.xml?</header>
    <date>Fri Aug 24 03:26:44 CEST 2012</date>
    <body>In 4.0.30, this file is no longer included by resin.xml? What's the rationale here? I'm trying to add the bits from it that my app(s) relied on, one by one, but I'm curious why you're no longer using it. Thanks, -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] app-default.xml?</header>
    <date>Fri Aug 24 14:53:44 CEST 2012</date>
    <body>Hi Rick, The app-default.xml imported was moved to cluster-default.xml along with the entire &amp;lt;cluster-default&amp;gt; section, in an effort to improve readability of resin.xml. You'll also notice that we're importing app-default.xml from resin.jar with "classpath:META-INF/caucho/app-default.xml" by default, since it is not common or generally recommended to modify this file.  However we still include app-default.xml in the conf directory and you can easily modify the import line Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] app-default.xml?</header>
    <date>Fri Aug 24 15:28:17 CEST 2012</date>
    <body>-Paul</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] app-default.xml?</header>
    <date>Sat Aug 25 00:29:50 CEST 2012</date>
    <body>Ah, okay. I always change the class loader to the tree-loader. I suppose I could just do that in my resin.xml. -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.30 is available</header>
    <date>Fri Aug 24 02:12:45 CEST 2012</date>
    <body>Resin 4.0.30 is available for download at the usual: http://caucho.com/download Resin 4.0.30 is a release-candidate for 4.1.0. If no critical bugs are found after a few weeks, we'll promote it to 4.1.0. As a note, the most recent Resin 4.0.x releases beat nginx (a fast C-based web server) in stress tests using autobench. We've published the results at http://wiki4.caucho.com/NginX_1.2.0_versus_Resin_4.0.29_performance_tests -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.30 is available</header>
    <date>Fri Aug 24 02:40:37 CEST 2012</date>
    <body>What's the state of PHP support in 4.0.30? http://caucho.com/download http://wiki4.caucho.com/NginX_1.2.0_versus_Resin_4.0.29_performance_tests http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.30 is available</header>
    <date>Fri Aug 24 08:15:41 CEST 2012</date>
    <body>Hi Scott, This is excellent news. Will 4.1.0 be considered a stable release intended for production environments?  We're still running 4.0.23 because of problems in 4.0.24 - 4.0.28 Thanks, Keith Resin 4.0.30 is available for download at the usual: http://caucho.com/download Resin 4.0.30 is a release-candidate for 4.1.0. If no critical bugs are found after a few weeks, we'll promote it to 4.1.0. As a note, the most recent Resin 4.0.x releases beat nginx (a fast C-based web server) in stress tests using autobench. We've published the results at http://wiki4.caucho.com/NginX_1.2.0_versus_Resin_4.0.29_performance_tests -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.30 is available</header>
    <date>Fri Aug 24 18:19:03 CEST 2012</date>
    <body>Hi Scott, This is excellent news. Will 4.1.0 be considered a stable release intended for production environments?  We're still running 4.0.23 because of problems in 4.0.24 - 4.0.28 Yes, assuming no major problems are found in 4.0.30 in the next few weeks. -- Scott Thanks, Keith Resin 4.0.30 is available for download at the usual: http://caucho.com/download Resin 4.0.30 is a release-candidate for 4.1.0. If no critical bugs are found after a few weeks, we'll promote it to 4.1.0. As a note, the most recent Resin 4.0.x releases beat nginx (a fast C-based web server) in stress tests using autobench. We've published the results at http://wiki4.caucho.com/NginX_1.2.0_versus_Resin_4.0.29_performance_tests -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] apache resin 503 error when repeated requests from	the same IP</header>
    <date>Fri Aug 17 17:58:39 CEST 2012</date>
    <body>HI I am seeing a strange 503 error  on the server. When the repeated requests coming from the clients with the same IP address, after some time, I am seeing 503 error in apache logs. These requests are all valid requests from valid ips. I am using resin 3.1.12. and apache 2.2.3 and JDK 7. Is resin considering, the repeated request from same IP as spam? Is there any parameter that I can set to force resin to accepts the requests and not consider as spam? Please help. thanks Mani</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] apache resin 503 error when repeated requests	from the same IP</header>
    <date>Fri Aug 17 19:09:17 CEST 2012</date>
    <body>Hi Mani, A 503 error usually indicates Resin was unavailable to Apache (ie restarting) or overloaded.  The client IP address should not matter. You need to examine the Resin logs to see what is it doing during that time and if there are any errors reported. Resin may be running out of resources or paused for a long garbage collection. Often simply increasing thread-max to a larger number like 2048 helps, since the default is rather low for Resin 3.1. Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] apache resin 503 error when repeated requests from the same IP</header>
    <date>Fri Aug 17 19:19:10 CEST 2012</date>
    <body>Paul Thank you. Currently thread max is at 1400. Strange thing is, this happens on two pages where the user posts data repeatedly. Some of these IP addresses also repeating in the log. And, there are no issues with the page java code. In my previous setup, I did not gave this problem. I moved to new box and I keep the same resin configuration. However, I  switched to worker RPM in apache and using JDK 1.7 . I dont see any errors in resin log. I tried to migrate 4.x version and getting the same problem. thanks Mani http://maillist.caucho.com/mailman/listinfo/resin-interest http://blog.caucho.com http://twitter.com/cauchoresin http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] apache resin 503 error when repeated requests	from the same IP</header>
    <date>Mon Aug 20 15:33:34 CEST 2012</date>
    <body>Hi Mani, The fact that the issue is occurring with Resin 4 also leads me to think it's not an issue related to Resin at all. It could be something related to Apache.  It would help you can take that out of the equation but accessing Resin directly. The only other possibility that occurs to me right now is database lock contention for the same rows, since you say it's occurring when the same users connect. Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest http://blog.caucho.com http://twitter.com/cauchoresin http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>[Resin-interest] share session in multiple domains application</header>
    <date>Thu Aug 16 22:57:48 CEST 2012</date>
    <body>Hello I use resin 4.0.13, and I have one unique application that is accessed though 2 domains. It is configured in the front server as host alias :     &amp;lt;host id=" www.appartement-maison.fr       The 2 domains are in the same java application, but they answer completely different pages for different functions. When a user is connected to the first domain with a login/password (connection information is stored in the session), I would like him to be automatically connected in the second domain. But the JSESSIONID is different so the connection information is not found, while it is the same application and the same browser. Is it possible to share the sessions between different host aliases in one application ? If not I will have to use a subdirectory in the first domain, which is not what we want. about this, and could not find a thread in this list about it. PS: here I don't need to share cookies, only server sessions. Thanks. -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] share session in multiple domains application</header>
    <date>Fri Aug 17 01:17:55 CEST 2012</date>
    <body>Hi Riccardo, You do need to share cookies, because the session is tied to the JSESSIONID. You're getting different sessions because the Set-cookie domain defaults to the full host name, which is different in your case between www... and pro... If all your host names end with "appartement-maison.fr", then simply set ... If you have more than one domain, or need more control you can use cookie-domain-regexp. cookie-domain-regexp accepts a regular expression used to extract the domain from the requested host. Probable configuration: ... For example, using this regexp will produce the following: Host: xxx.yyy.zzz.foo.com =  Set-Cookie domain: foo.com Host: zzz.foo.com =  Set-Cookie domain: foo.com Host: foo.com =  Set-Cookie domain: foo.com Host: bar.com =  Set-Cookie domain: bar.com (I'll adding this all to wiki4.caucho.com shortly.) Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] share session in multiple domains application</header>
    <date>Fri Aug 17 01:26:36 CEST 2012</date>
    <body>Does that mean Host: foo.co.uk =  Set-Cookie domain: co.uk Host: bar.co.uk =  Set-Cookie domain: co.uk Host: foo.com.au =  Set-Cookie domain: com.au Host: bar.com.au =  Set-Cookie domain: com.au That seems sub-optimal. Regards, Knut Forkalsrud</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] share session in multiple domains application</header>
    <date>Fri Aug 17 03:22:38 CEST 2012</date>
    <body>Well yes, but that was just an example. You can certainly craft a regexp that would work for these, such as "[^.]*\.[^.]*\.[^.]*$". -Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header />
    <date>Fri Aug 17 09:50:28 CEST 2012</date>
    <body>Thanks a lot Paul, this was the solution. In the wiki, you may add that this config has to be set in the application server, not in the load-balancer server, (I was not sure and tested both). Hello I use resin 4.0.13, and I have one unique application that is accessed though 2 domains. It is configured in the front server as host alias :     &amp;lt;host id=" www.appartement-maison.fr "       The 2 domains are in the same java application, but they answer completely different pages for different functions. When a user is connected to the first domain with a login/password (connection information is stored in the session), I would like him to be automatically connected in the second domain. But the JSESSIONID is different so the connection information is not found, while it is the same application and the same browser. Is it possible to share the sessions between different host aliases in one application ? If not I will have to use a subdirectory in the first domain, which is not what we want. I found nothing in the reference doc of thread in this list about it. PS: here I don't need to share cookies, only server sessions. Hi Riccardo, You do need to share cookies, because the session is tied to the JSESSIONID.  You're getting different sessions because the Set-cookie domain defaults to the full host name, which is different in your case between www... and pro... If all your host names end with " appartement-maison.fr ", then simply set      ... If you have more than one domain, or need more control you can use cookie-domain-regexp. cookie-domain-regexp accepts a regular _expression_ used to extract the domain from the requested host. Probable configuration:     ... For example, using this regexp will produce the following: Host: xxx.yyy.zzz.foo.com =  Set-Cookie domain:  foo.com Host:  zzz.foo.com  =  Set-Cookie domain:  foo.com Host:  foo.com  =  Set-Cookie domain:  foo.com Host:  bar.com  =  Set-Cookie domain:  bar.com (I'll adding this all to wiki4.caucho.com shortly.) Thanks, Paul Thanks. -- Riccardo Cohen +33 (0)6 09 83 64 49 Société Realty-Property.com 1 rue de la Monnaie 37000 Tours France www.appartement-maison.fr</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin loads web-fragment.xml for servlet 2.5 web	applications</header>
    <date>Thu Aug 09 10:54:10 CEST 2012</date>
    <body>Hello everyone, when deploying a servlet 2.5 web application which contains a jar which itself contains a servlet 3.0 web-fragment.xml resin 4.0 will load this web fragment and initializes/enables all defined filters/listeners etc. However, I would expect that resin ignores web fragments for web applications with a servlet version less than 3.0. Is there a way to force resin to do that? Thank you and best regards, Patric</body>
  </mail>
  <mail>
    <header>[Resin-interest] 503 errors with apache resin connections</header>
    <date>Sun Aug 05 08:03:13 CEST 2012</date>
    <body>I am using apache 2.2.22 and resin 4.0.29 version in linux on the the new server. Once in a while, I see 503 errors in errors_log of apache. After research, I realize that,  this is happening when ever resin takes couple of seconds to respond to a request. What configuration will fix this problem? I used to have same issue with resin 3.x version, after increasing socket time out the problem was solved. I am using the same setting in rein 4. in server-default I have these settings: thanks Mani</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin hang</header>
    <date>Wed Aug 01 17:19:54 CEST 2012</date>
    <body>Hi, All We run resin 3.1.9 open source version in our production environment. The visit is about 5M visit/day per resin instance. We ran into the resin hang problem several times. We belive it is the same problem as bug 3509 http://bugs.caucho.com/view.php?id=3509 All the threads are deadlocked and the number of threads is approaching the thread-max setting. Is there any workaroud to bug 3509 except upgrade to 4.0? Is this bug fixed in resin 3.1 ? Can we disable access log to workaroud this problem? Besides, what's the suggested thread-max for resin ? We set it to 3000, is it too big? If we set it to a lower value, what will happen if the concurrent requests exceeds the thread-max value? Another observation is that when the problem arise, the number of threads is approaching the thread-max setting. I want to know under what condition will resin start a new thread? Our environment: Jdk 1.6.21 on CentOS 5.3 64bit Resin 3.1.9 open source version -Xms 4G -Xmx 4G -Xmn 1200m thanks.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin hang</header>
    <date>Wed Aug 01 18:22:54 CEST 2012</date>
    <body>Hi, All We run resin 3.1.9 open source version in our production environment. The visit is about 5M visit/day per resin instance. We ran into the resin hang problem several times. We belive it is the same problem as bug 3509 http://bugs.caucho.com/view.php?id=3509 All the threads are deadlocked and the number of threads is approaching the thread-max setting. Is there any workaroud to bug 3509 except upgrade to 4.0? Is this bug fixed in resin 3.1 ? Can we disable access log to workaroud this problem? Does your thread dump show the same place that it's blocking on as in that bug report? i.e. the access log. Besides, what's the suggested thread-max for resin ? We set it to 3000, is it too big? That's a good value. If we set it to a lower value, what will happen if the concurrent requests exceeds the thread-max value? In a normal situation, you shouldn't reach the thread-max ever. (Resin 4.0.x enforces that better with a port-thread-max.) If it hits thread max, Resin will queue new thread requests until one is idle. Another observation is that when the problem arise, the number of threads is approaching the thread-max setting. I want to know under what condition will resin start a new thread? There's a thread-idle-min value. When the number of idle threads drops below that value, Resin spawns a new one. That generally avoids any actual wait for a new thread to be spawned, because they're normally taken from the idle pool. Our environment: Jdk 1.6.21 on CentOS 5.3 64bit Resin 3.1.9 open source version -Xms 4G -Xmx 4G -Xmn 1200m These look fine. -- Scott thanks.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin hang</header>
    <date>Fri Aug 03 08:38:40 CEST 2012</date>
    <body>each time resin hang, we can find logs like this: [2012-07-31 16:15:51.002] use (use-count=1).  Consider increasing session-count. [2012-07-31 16:15:51.007] in use (use-count=1).  Consider increasing session-count. [2012-07-31 16:15:51.025] in use (use-count=1).  Consider increasing session-count. http://bugs.caucho.com/view.php?id=3509 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Caucho website down?</header>
    <date>Wed Jul 25 01:31:45 CEST 2012</date>
    <body>I can't seem to load www.caucho.com. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caucho website down?</header>
    <date>Wed Jul 25 01:37:42 CEST 2012</date>
    <body>Yup, seems to be down. (*Chris*) http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caucho website down?</header>
    <date>Wed Jul 25 19:17:09 CEST 2012</date>
    <body>It should be up now. It appears like the actual hardware died. -- Scott Yup, seems to be down. (*Chris*) On Tue, Jul 24, 2012 at 4:31 PM, Rick Mann &amp;lt;rm...@latencyzero.com mailto:rm...@latencyzero.com http://www.caucho.com -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4 stability</header>
    <date>Thu Jul 19 18:52:31 CEST 2012</date>
    <body>I just want to query the user community for what seems to be the most stable version of resin 4.0 out there?  We have been developing and using Rein 4.0.23 and are pretty satisfied. Has anybody been using a later version in production and development and find it to be nice and stable? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 stability</header>
    <date>Thu Jul 19 19:02:36 CEST 2012</date>
    <body>Hello Aaron I'm still with 4.0.13 and it seems all right in production. I did not upgrade because I saw many messages of errors for later versions, and did not have the time to test it. http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 - France +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 stability</header>
    <date>Thu Jul 19 19:14:01 CEST 2012</date>
    <body>FYI, our plan is for 4.0.30 to become a release candidate for 4.1.0. We're cleaning up some issues for the JavaEE TCK. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 stability</header>
    <date>Thu Jul 19 19:39:41 CEST 2012</date>
    <body>----- Original Message ----- Subject: [Resin-interest] Resin 4 stability Date: Thu, 19 Jul 2012 09:53:47 -0500 We're still on 4.0.23 in production 4.0.28 looked really promising, especially for JSF development, but then there was http://bugs.caucho.com/view.php?id=5120 Looking forward to evaluating 4.0.29! --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 stability</header>
    <date>Thu Jul 19 21:37:39 CEST 2012</date>
    <body>Ah, good to know -- that bug would also kick us in the grapes as well. I'll wait for your guys' feedback on 4.0.30 per Scott's comment. Thanks, Aaron mailto:resin-interest- http://bugs.caucho.com/view.php?id=5120 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 stability</header>
    <date>Thu Jul 19 23:18:35 CEST 2012</date>
    <body>Hi Aaron, We are also running 4.0.23 in production as well.  We have evaluated 4.0.24 - 4.0.27, but we have always encountered an issue that prevented us from rolling it out to production.  We have not evaluated 4.0.28 yet. Keith mailto:resin-interest- http://bugs.caucho.com/view.php?id=5120 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>[Resin-interest] Db Pool freezes waiting on _pool (3.1.3)</header>
    <date>Fri Jul 06 14:51:52 CEST 2012</date>
    <body>Hi, I'm using resin-3.1.3 on a busy site. Periodically the site freezes. A jstack on the server shows most threads in this state: java.lang.Thread.State: TIMED_WAITING (on object monitor) at java.lang.Object.wait(Native Method) at com.caucho.jca.ConnectionPool.create(ConnectionPool.java:897) - locked &amp;lt;0x00002aaaba60be48&amp;gt; (a java.util.ArrayList) at com.caucho.jca.ConnectionPool.allocatePool(ConnectionPool.java:779) at com.caucho.jca.ConnectionPool.allocate(ConnectionPool.java:740) at com.caucho.jca.ConnectionPool.allocateConnection(ConnectionPool.java:551) at com.caucho.sql.DataSourceImpl.getConnection(DataSourceImpl.java:65) at com.caucho.sql.DBPool.getConnection(DBPool.java:669) It looks like no thread ever gets notified and all wait indefinitely. Resin generally restarts itself about 15 minutes later if left alone. The database itself apppears idle during this time. I wondered if this might be a known problem and if upgrading to 3.1.12 would help? I don't think the pool is full. I noticed a pool timing issue was fixed in 3.1.10 (bug 3837) and the implementation of the allocate method changed, but that wasn't directly related to freezing. Perhaps we should just try it and see, but I figured I'd ask if this was noted / known behavior. Many thanks, Steven</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Db Pool freezes waiting on _pool (3.1.3)</header>
    <date>Fri Jul 06 20:47:48 CEST 2012</date>
    <body>You may want to keep track of the DB pool statistics.  Active versus maximum allocation counts.  If this is a connection leak you would notice the number of active connection creeping upwards until it reaches max and your freezing symptoms appear. Knut Forkalsrud http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Db Pool freezes waiting on _pool (3.1.3)</header>
    <date>Fri Jul 06 20:59:29 CEST 2012</date>
    <body>You may want to keep track of the DB pool statistics.  Active versus maximum allocation counts.  If this is a connection leak you would notice the number of active connection creeping upwards until it reaches max and your freezing symptoms appear. Also, which driver is this with? There's a specific synchronization problem with the mysql ConnectionPool driver that might be a problem. And, for jstack, the thread that owns the lock/counter is more important than the threads waiting. If you can find the threads that are opening the connection (in the actual driver code), that would help track this down. An upgrade might help, but it would depend on what's causing the problem. -- Scott Knut Forkalsrud On Fri, Jul 6, 2012 at 5:51 AM, Steven Cassidy mailto:steven.cass...@gmail.com Hi, I'm using resin-3.1.3 on a busy site. Periodically the site freezes. A jstack on the server shows most threads in this state: java.lang.Thread.State: TIMED_WAITING (on object monitor) at java.lang.Object.wait(Native Method) at com.caucho.jca.ConnectionPool.create(ConnectionPool.java:897) - locked &amp;lt;0x00002aaaba60be48&amp;gt; (a java.util.ArrayList) at com.caucho.jca.ConnectionPool.allocatePool(ConnectionPool.java:779) at com.caucho.jca.ConnectionPool.allocate(ConnectionPool.java:740) at com.caucho.jca.ConnectionPool.allocateConnection(ConnectionPool.java:551) at com.caucho.sql.DataSourceImpl.getConnection(DataSourceImpl.java:65) at com.caucho.sql.DBPool.getConnection(DBPool.java:669) It looks like no thread ever gets notified and all wait indefinitely. Resin generally restarts itself about 15 minutes later if left alone. The database itself apppears idle during this time. I wondered if this might be a known problem and if upgrading to 3.1.12 would help? I don't think the pool is full. I noticed a pool timing issue was fixed in 3.1.10 (bug 3837) and the implementation of the allocate method changed, but that wasn't directly related to freezing. Perhaps we should just try it and see, but I figured I'd ask if this was noted / known behavior. Many thanks, Steven</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Db Pool freezes waiting on _pool (3.1.3)</header>
    <date>Fri Jul 06 21:46:07 CEST 2012</date>
    <body>Hi, Thanks for the replies. I don't think there's a leak unless it manifests itself only very occasionally. The stats now are Active 6, Idle 133, Created 0.02% (757 / 3.3M), Failed 0, max-connections 256, idle time 30000. The active count is not increasing. The driver type in the pool definition is com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource. The connector/j version is mysql-connector-java-5.0.8-bin.jar. I'm interested that you mention a known issue with mysql - could we be seeing that possibly? Is there a fix, or somewhere I can learn about the issue? The puzzling thing is that as far as I can see from the thread lists, when these freezes happen, there is no runnable thread in any of our code at all - just the threads waiting on the lock. MySQL show processlist also claims its idle. Thanks again. Steven http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Db Pool freezes waiting on _pool (3.1.3)</header>
    <date>Fri Jul 06 22:26:57 CEST 2012</date>
    <body>The ConnectionPoolDataSource is at http://wiki4.caucho.com/Application_Server:_MySql_JDBC_Pooling and http://bugs.caucho.com/view.php?id=4734 . But if you don't have any threads waiting for a new connection in the driver (there should be at least one), it might be a different issue, and may be fixed in a later Resin version. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Db Pool freezes waiting on _pool (3.1.3)</header>
    <date>Tue Jul 10 19:36:47 CEST 2012</date>
    <body>Just to close this out, switching the mysql driver to com.mysql.jdbc.Driver does appear to have fixed the problem. Thanks very much. http://wiki4.caucho.com/Application_Server:_MySql_JDBC_Pooling and http://bugs.caucho.com/view.php?id=4734 .</body>
  </mail>
  <mail>
    <header>[Resin-interest] changes page broker</header>
    <date>Thu Jul 05 20:16:46 CEST 2012</date>
    <body>http://caucho.com/resin-4.0/changes/changes.xtp 500 Servlet Exception /var/www/hosts/www.caucho.com/webapps/resin-4.0/changes/changes.xtp:48: `&amp;lt;/li.&amp;gt;' expected `&amp;gt;' at `&amp;lt;'.  Closing tags must close immediately after the tag name. 47: &amp;lt;li&amp;gt;cloud: EC2elastic server with "ext:" address and missing cluster-system-key (#5015)&amp;lt;/li. 48: &amp;lt;li&amp;gt;servlet: add header-size-max and header-count-max (#4986, rep by 49: &amp;lt;li&amp;gt;deploy: web-socket issue causing large deployment problems (#5113, 50: &amp;lt;li&amp;gt;servlet: multipart-mime with forward parameters was double-parsing ------------------------------ Resin/4.0.27 Server: 'app-0' regards -Wesley</body>
  </mail>
  <mail>
    <header>[Resin-interest] Leap Second behaviour</header>
    <date>Mon Jul 02 15:29:01 CEST 2012</date>
    <body>Hi I'm quite well aware that the "base problem" regarding leap seconds is not connected to Resin, but to JVM and OS. However I saw some strange behaviour in the aftermatch, that might be interesting to clear up. Normally we run Resin 3.1.12 without any specific configuration for This means a default sample-period of 60 seconds. Because of this every 59th second this was logged: [2012-07-01 02:14:59.000][02:14:59.000] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.000][02:14:59.000] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.000][02:14:59.000] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.000][02:14:59.000] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.000][02:14:59.000] StatService[] cpu-load=41.05 ... ~26600 lines later [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 This seemed a bit much to log every 60th second. I tried to add a &amp;lt;stat-service&amp;gt; section with 10 minute sample-period, and saw that those ~26600 lines was now only logged every 10th minute. But still loads more than usual (I would expect just a single line beeing logged). Was Resin to blame for this (ie. is there a possible bug around here?) or was it the JVM and OS? Regards, Jens Dueholm Christensen Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Leap Second behaviour</header>
    <date>Mon Jul 02 21:25:36 CEST 2012</date>
    <body>Hi I'm quite well aware that the "base problem" regarding leap seconds is not connected to Resin, but to JVM and OS. However I saw some strange behaviour in the aftermatch, that might be interesting to clear up. Normally we run Resin 3.1.12 without any specific configuration for This means a default sample-period of 60 seconds. Because of this every 59th second this was logged: [2012-07-01 02:14:59.000][02:14:59.000] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.000][02:14:59.000] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.000][02:14:59.000] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.000][02:14:59.000] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.000][02:14:59.000] StatService[] cpu-load=41.05 ... ~26600 lines later [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 This seemed a bit much to log every 60th second. I tried to add a &amp;lt;stat-service&amp;gt; section with 10 minute sample-period, and saw that those ~26600 lines was now only logged every 10th minute. But still loads more than usual (I would expect just a single line beeing logged). Was Resin to blame for this (ie. is there a possible bug around here?) or was it the JVM and OS? I'd guess it's related to the JVM/OS issue. In our nightly regressions, there were some sleep/waits that were stuck before we updated the system. It's pretty impressive that a 1s change could cause that much chaos. :) -- Scott Regards, *Jens Dueholm Christensen *Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Leap Second behaviour</header>
    <date>Tue Jul 03 10:16:22 CEST 2012</date>
    <body>Thanks Scott I just needed a bit of confirmation. And yes it's quite impressive and a bit scary that a single second could create problem on the scale we've seen - and judging by what we've seen so far this will most likely not be the last time a leap second gets this much attention. Lets just hope the next one doesn't happen on december 31st - I'd hate to have to use my reduced mental capacity on january 1st (seems to be a recurring issue on that date) on fixing crashed systems.. ;) Regards, Jens Dueholm Christensen Survey IT From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Monday, July 02, 2012 9:25 PM To: resin-interest@caucho.com Subject: Re: [Resin-interest] Leap Second behaviour Hi I'm quite well aware that the "base problem" regarding leap seconds is not connected to Resin, but to JVM and OS. However I saw some strange behaviour in the aftermatch, that might be interesting to clear up. Normally we run Resin 3.1.12 without any specific configuration for This means a default sample-period of 60 seconds. Because of this every 59th second this was logged: [2012-07-01 02:14:59.000][02:14:59.000] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.000][02:14:59.000] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.000][02:14:59.000] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.000][02:14:59.000] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.000][02:14:59.000] StatService[] cpu-load=41.05 ... ~26600 lines later [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 [2012-07-01 02:14:59.999][02:14:59.999] StatService[] cpu-load=41.05 This seemed a bit much to log every 60th second. I tried to add a &amp;lt;stat-service&amp;gt; section with 10 minute sample-period, and saw that those ~26600 lines was now only logged every 10th minute. But still loads more than usual (I would expect just a single line beeing logged). Was Resin to blame for this (ie. is there a possible bug around here?) or was it the JVM and OS? I'd guess it's related to the JVM/OS issue. In our nightly regressions, there were some sleep/waits that were stuck before we updated the system. It's pretty impressive that a 1s change could cause that much chaos. :) -- Scott Regards, Jens Dueholm Christensen Survey IT</body>
  </mail>
  <mail>
    <header>[Resin-interest] Spec file for building RPMs</header>
    <date>Thu Jun 28 15:10:31 CEST 2012</date>
    <body>Hi, We recently noticed that you provide rpm files, which is great. However, we would like to build these to fit with the rest of our setup. Would it be possible to get the spec-file for this RPM? -- Halvor Utby USIT/GAP/W3D halvor.u...@usit.uio.no</body>
  </mail>
  <mail>
    <header>[Resin-interest] Set JSF response encoding</header>
    <date>Wed Jun 27 20:27:27 CEST 2012</date>
    <body>After a long debugging detour, I realized that response header of my JSF pages is set to Content-Type: text/html; charset=ISO-8859-1 while the content itself is UTF-8. I don't quite understand what sets ISO-8859-1 and why (although admittedly &amp;lt;url-character-encoding&amp;gt; is set to it). What is the most appropriate way to make the response UTF-8, alternatively undeclared encoding, preferrably for JSF pages only? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Set JSF response encoding</header>
    <date>Thu Jun 28 06:04:49 CEST 2012</date>
    <body>Don't bother - that turned out to be the detour... ----- Original Message ----- Subject: [Resin-interest] Set JSF response encoding Date: Wed, 27 Jun 2012 20:26:54 +0200 After a long debugging detour, I realized that response header of my JSF pages is set to Content-Type: text/html; charset=ISO-8859-1 while the content itself is UTF-8. I don't quite understand what sets ISO-8859-1 and why (although admittedly &amp;lt;url-character-encoding&amp;gt; is set to it). What is the most appropriate way to make the response UTF-8, alternatively undeclared encoding, preferrably for JSF pages only? --</body>
  </mail>
  <mail>
    <header>[Resin-interest] buffering of access logs?</header>
    <date>Wed Jun 27 01:21:50 CEST 2012</date>
    <body>I'm trying to turn off any sort of buffering of the resin access logs, so I can see the requests getting processed in the logs within a short period of time (say 1 second or less).  I've tried putting in the auto-flush='true' directive to the &amp;lt;access-log&amp;gt; tag, but it still seems to be buffering the log for about 1 minute.  We're using resin 3.1.11   The other log files (stderr, stdout, log4j files, etc) don't seem to exhibit the same behavior. Any help or pointers on this would be much appreciated. Thanks, -Brian</body>
  </mail>
  <mail>
    <header>[Resin-interest] One JVM per virtual host</header>
    <date>Mon Jun 25 19:08:12 CEST 2012</date>
    <body>Hi guys, I'm trying to configure Resin 4 to run on a single server, with a couple virtual hosts. Each virtual host should use its own JVM. I have a similar setup running flawlessly with Resin 3, but I seem to be at the end of my wits with Resin 4. So could anyone on this list be kind enough to point to me what's wrong or missing in the config file below ? (When I try to access www1.test.com or www2.test.com, I get "Server Error. The server is temporarily unavailable due to an internal error. Please notify the system administrator of this problem."  If I type the IP address of the server, I get a 404, as expected.) Any help would be greatly appreciated. Christophe http://caucho.com/ns/resin"</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] One JVM per virtual host</header>
    <date>Mon Jun 25 19:59:24 CEST 2012</date>
    <body>Hi guys, I'm trying to configure Resin 4 to run on a single server, with a couple virtual hosts. Each virtual host should use its own JVM. I have a similar setup running flawlessly with Resin 3, but I seem to be at the end of my wits with Resin 4. So could anyone on this list be kind enough to point to me what's wrong or missing in the config file below ? (When I try to access www1.test.com or www2.test.com, I get "Server Error.  The server is temporarily unavailable due to an internal error. Please notify the system administrator of this problem."  If I type the IP address of the server, I get a 404, as expected.) Can you check the logs on the LB and the backend servers? The default app-default.xml is in "classpath:META-INF/caucho/app-default.xml", but it will work if you do have an app-default.xml in the conf directory. You might also add the &amp;lt;development-mode-error-page/&amp;gt; to the by default for security.) Otherwise, that configuration looks fine to me. -- Scott Any help would be greatly appreciated. Christophe http://caucho.com/ns/resin"</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] One JVM per virtual host</header>
    <date>Tue Jun 26 17:01:45 CEST 2012</date>
    <body>Hi Scott, Apparently its a license problem. I requested an evaluation license to finish testing the configuration, then Ill have the customer commit to a professional license. Thank you for your pointers. The &amp;lt;development-mode-error-page/&amp;gt; directive is very useful. Christophe De : resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] De la part de Scott Ferguson Envoyé : lundi 25 juin 2012 19:59 À : resin-interest@caucho.com Objet : Re: [Resin-interest] One JVM per virtual host Hi guys, Im trying to configure Resin 4 to run on a single server, with a couple virtual hosts. Each virtual host should use its own JVM. I have a similar setup running flawlessly with Resin 3, but I seem to be at the end of my wits with Resin 4. So could anyone on this list be kind enough to point to me whats wrong or missing in the config file below ? (When I try to access www1.test.com or www2.test.com, I get Server Error. The server is temporarily unavailable due to an internal error. Please notify the system administrator of this problem.  If I type the IP address of the server, I get a 404, as expected.) Can you check the logs on the LB and the backend servers? The default app-default.xml is in "classpath:META-INF/caucho/app-default.xml", but it will work if you do have an app-default.xml in the conf directory. You might also add the &amp;lt;development-mode-error-page/&amp;gt; to the default for security.) Otherwise, that configuration looks fine to me. -- Scott Any help would be greatly appreciated. Christophe http://caucho.com/ns/resin http://caucho.com/ns/resin"</body>
  </mail>
  <mail>
    <header>[Resin-interest] JNI timeout on multipart forms in 4.0.28</header>
    <date>Thu Jun 14 17:21:22 CEST 2012</date>
    <body>I'm really glad Resin 4.0.28 is here since it resolves multiple issues we've been having lately. However, it seems a new critical issue may have been introduced since 4.0.25. When running on 64-bit Linux, compiled with --enable-64bit and --enable-ssl, and posting a multipart/form-data form without any file parts included, we're getting timeouts. See stacktrace below. We do not have any issues with - non-multipart forms - multipart forms containing file parts - multipart forms without file parts, when running on Windows Have there been any additional configuration parameters added, that might be worth trying out? Any other ideas? Thanks in advance. [2012-06-14 17:13:21.414] com.caucho.vfs.SocketTimeoutException: client timeout at com.caucho.vfs.JniStream.exception(JniStream.java:231) at com.caucho.vfs.JniStream.read(JniStream.java:83) at com.caucho.vfs.ReadStream.read(ReadStream.java:472) at com.caucho.server.http.ContentLengthStream.read(ContentLengthStream.java:75) at com.caucho.vfs.ReadStream.readBuffer(ReadStream.java:1239) at com.caucho.vfs.ReadStream.read(ReadStream.java:365) at com.caucho.vfs.MultipartStream.read(MultipartStream.java:420) at com.caucho.vfs.MultipartStream.read(MultipartStream.java:352) at com.caucho.vfs.ReadStream.readBuffer(ReadStream.java:1239) at com.caucho.vfs.ReadStream.readChar(ReadStream.java:571) at com.caucho.server.http.MultipartFormParser.parsePostData(MultipartFormParser.java:177) at com.caucho.server.http.AbstractCauchoRequest.parsePostQueryImpl(AbstractCauchoRequest.java:441) at com.caucho.server.http.AbstractCauchoRequest.parseQueryImpl(AbstractCauchoRequest.java:275) at com.caucho.server.http.AbstractCauchoRequest.getParts(AbstractCauchoRequest.java:232) at se.exder.servlet.ServletUtils.parseMultipart(ServletUtils.java:303) ... --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JNI timeout on multipart forms in 4.0.28</header>
    <date>Thu Jun 14 19:26:26 CEST 2012</date>
    <body>I'm really glad Resin 4.0.28 is here since it resolves multiple issues we've been having lately. However, it seems a new critical issue may have been introduced since 4.0.25. I've filed this as http://bugs.caucho.com/view.php?id=5120 Is it possible that this code is from a forward? I just closed a bug where a forwarded form would try to double-read the content. Otherwise, this looks new. If you can create a tiny example POST that triggers the problem and send it, that should help track it down. Our plan is to release the next few versions fairly quickly, focusing just on bug fixes. -- Scott When running on 64-bit Linux, compiled with --enable-64bit and --enable-ssl, and posting a multipart/form-data form without any file parts included, we're getting timeouts. See stacktrace below. We do not have any issues with - non-multipart forms - multipart forms containing file parts - multipart forms without file parts, when running on Windows Have there been any additional configuration parameters added, that might be worth trying out? Any other ideas? Thanks in advance. [2012-06-14 17:13:21.414] com.caucho.vfs.SocketTimeoutException: client timeout at com.caucho.vfs.JniStream.exception(JniStream.java:231) at com.caucho.vfs.JniStream.read(JniStream.java:83) at com.caucho.vfs.ReadStream.read(ReadStream.java:472) at com.caucho.server.http.ContentLengthStream.read(ContentLengthStream.java:75) at com.caucho.vfs.ReadStream.readBuffer(ReadStream.java:1239) at com.caucho.vfs.ReadStream.read(ReadStream.java:365) at com.caucho.vfs.MultipartStream.read(MultipartStream.java:420) at com.caucho.vfs.MultipartStream.read(MultipartStream.java:352) at com.caucho.vfs.ReadStream.readBuffer(ReadStream.java:1239) at com.caucho.vfs.ReadStream.readChar(ReadStream.java:571) at com.caucho.server.http.MultipartFormParser.parsePostData(MultipartFormParser.java:177) at com.caucho.server.http.AbstractCauchoRequest.parsePostQueryImpl(AbstractCauchoRequest.java:441) at com.caucho.server.http.AbstractCauchoRequest.parseQueryImpl(AbstractCauchoRequest.java:275) at com.caucho.server.http.AbstractCauchoRequest.getParts(AbstractCauchoRequest.java:232) at se.exder.servlet.ServletUtils.parseMultipart(ServletUtils.java:303) ...</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JNI timeout on multipart forms in 4.0.28</header>
    <date>Fri Jun 15 11:29:29 CEST 2012</date>
    <body>----- Original Message ----- Subject: Re: [Resin-interest] JNI timeout on multipart forms in 4.0.28 Date: Thu, 14 Jun 2012 10:26:12 -0700 I've filed this as http://bugs.caucho.com/view.php?id=5120 Is it possible that this code is from a forward? I just closed a bug where a forwarded form would try to double-read the content. Otherwise, this looks new. If you can create a tiny example POST that triggers the problem and send it, that should help track it down. I can recreate this quite easily, without any forwards. All that is needed is a large enough (&amp;gt; 75 parts) form. Might be worth noting: If you press Stop in the browser, the server side execution coninues normally. Otherwise it times out after 120 seconds. Example (posted in Mantis as well): JSP: Servlet: @MultipartConfig(fileSizeThreshold = 1024 * 1024, maxRequestSize = 100 * 1024 * 1024) @Override protected void service(HttpServletRequest request, System.out.println("Done trying to parse; took " +</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JNI timeout on multipart forms in 4.0.28</header>
    <date>Tue Jun 19 10:14:04 CEST 2012</date>
    <body>----- Original Message ----- Subject: Re: [Resin-interest] JNI timeout on multipart forms in 4.0.28 Date: Fri, 15 Jun 2012 11:29:12 +0200 http://bugs.caucho.com/view.php?id=5120 Were you able to recreate this? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JNI timeout on multipart forms in 4.0.28</header>
    <date>Tue Jun 19 23:18:57 CEST 2012</date>
    <body>Not yet. I'm doing a bug list pass from oldest to newest. I should get to it in a day or two. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JNI timeout on multipart forms in 4.0.28</header>
    <date>Wed Jun 20 22:30:39 CEST 2012</date>
    <body>Is this an SSL request? I'm duplicating it with OpenSSL, but it's an OpenSSL buffering issue (in combination with Resin's timeouts). It wouldn't affect non-SSL requests. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JNI timeout on multipart forms in 4.0.28</header>
    <date>Thu Jun 21 08:13:39 CEST 2012</date>
    <body>----- Original Message ----- Subject: Re: [Resin-interest] JNI timeout on multipart forms in 4.0.28 Date: Wed, 20 Jun 2012 13:30:26 -0700 You are right, problem only occurs with OpenSSL. Resin 4.0.25 works fine while 4.0.28 does not, with the same OpenSSL version. Does Resin 4.0.28 require a newer OpenSSL version than 4.0.25? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JNI timeout on multipart forms in 4.0.28</header>
    <date>Thu Jun 21 18:19:55 CEST 2012</date>
    <body>Good. Then I've found it. No, the issue is socket timeouts and OpenSSL, which is tricky because of all the buffering. There were some fixes after 4.0.25 which introduced the bug that you found. Basically, it was polling waiting for new data when the data was already available in the OpenSSL buffer. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] mod_caucho.so is not generated with apache 2.4 and	resin 3.1</header>
    <date>Tue Jun 12 22:28:38 CEST 2012</date>
    <body>Hey all, I first installed apache according to the instructions ( using the   -- enable-module=so  for apache ./configure command) and attempted to install resin multiple times. No matter what options I give it (e.g. --with-apsx=/usr/local/apache/bin/apsx ), mod_caucho.so does NOT get generated anywhere! The make and make install processes complete but there is no evidence anywhere of a generated mod_caucho.so file. Another thing, why does the documentation mention the 'libexec' folder in apache when apache 2.4 does not even have that folder? Thanks for the help! -Adam</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.23 statistics : strange values</header>
    <date>Tue Jun 12 10:15:29 CEST 2012</date>
    <body>Hello. We just activated resin 4.0.23 web statistics : But we discovered strange values under jmx: 1) resin/Server =&amp;gt; RequestCountTotal is different as total from webapp/default/allwebapps cumulated 2) resin/Server =&amp;gt; RequestReadBytesTotal is -1 3) resin/Server =&amp;gt; RequestTimeTotal is -1 4) resin/WebApp/default/MyWebapp =&amp;gt; RequestWriteBytesTotal is -strangeValue We use resin 4.0.23 on sun x86_64 architecture. Any clue about missing configuration or bug ? Cheers. Jonathan</body>
  </mail>
  <mail>
    <header>[Resin-interest] Hoster moved hardware,	now am unable to build mod_caucho.so</header>
    <date>Sun Jun 10 19:44:32 CEST 2012</date>
    <body>Hi, We were on a 64 bit Intel Atom single core server running 64 bit Ubuntu when the hoster took a disk image and moved it to a dual core 64bit AMD server. All seemed ok, we were on resin pro 4.0.23 and the apache integration was fine. Some weeks later I tried to update to resin 4.0.27 in the usual way, by unzipping the source and using ./configure --with-apxs=/usr/bin/apxs2; make; make install and found something's gone wrong - mod_caucho.so isn't created. I switched back to the 4.0.23 install, tried the build again and it also failed. The .so created from the Atom deploy is the only one I can use. During the build I now see this: In file included from /usr/include/features.h:378, from /usr/include/stdlib.h:25, from stream.c:30: /usr/include/gnu/stubs.h:7:27: error: gnu/stubs-32.h: No such file or directory make[2]: *** [stream.o] Error 1 I searched for this error and wound up installing libc-dev-i386 in response to a forum post, which felt wrong - why the 386? In any case, it made things worse - I saw messages such as the .o file now being of the wrong arch. So I removed it, which brings me back to where I am now. I'm guessing when I was on the Atom machine i somehow set up the tools and buildchain for that arch, and the move has cloned it all ignoring the new arch. Is that right? If so, how can I reset things so I can build the mod again please? -- Carl Whalley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hoster moved hardware, now am unable to build mod_caucho.so</header>
    <date>Sun Jun 10 20:22:26 CEST 2012</date>
    <body>Salve, does the same appear when doing: ./configure --enable-64bit --with-apxs=/usr/bin/apxs2 ?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hoster moved hardware, now am unable to build mod_caucho.so</header>
    <date>Sun Jun 10 21:16:07 CEST 2012</date>
    <body>Sir - you're a star! That was it - thanks!</body>
  </mail>
  <mail>
    <header>[Resin-interest] ResinPRO/Quercus Error..  Help anyone?</header>
    <date>Mon May 14 10:36:07 CEST 2012</date>
    <body>I know phpBB3 is supposed to work under Quercus, but I get the following error when any special chars are uses in postings on phpBB: [phpBB Debug] PHP Warning: in file usr/local/resin/hosts/forums.xyzzy.com/webapps/phpBB3/includes/message_parse r.php on line 65: com.caucho.quercus.lib.regexp.IllegalRegexpException: '-' is an unknown (? code //[url(=(.*))?/](?(1)((?s).*(?-s))|(.*))/[/url/]/ Any ideas on how to fix this?? --- Howard Leadmon - how...@leadmon.net</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin 3.1.9 crashed in libresinssl.so</header>
    <date>Tue May 08 23:26:42 CEST 2012</date>
    <body>Hi, The resin server 3.1.9 crashes JVM in the following location, It's been running fine in other env *** glibc detected *** /usr/java/jdk1.6.0_15/bin/java: double free or corruption (fasttop): 0x00002aacd44edf90 *** ======= Backtrace: ========= /lib64/libc.so.6[0x3685c7245f] /lib64/libc.so.6(cfree+0x4b)[0x3685c728bb] /lib64/libcrypto.so.6(CRYPTO_free+0x1d)[0x368a8daedd] /lib64/libcrypto.so.6(OBJ_NAME_add+0x94)[0x368a85c754] /lib64/libcrypto.so.6(EVP_add_digest+0x6a)[0x368a88233a] /lib64/libssl.so.6(SSL_library_init+0xae)[0x368ec3862e] /usr/local/resin/resin-pro-3.1.9/libexec64/libresinssl.so[0x2aacc7fc2dca] Does anyone else have this issue, our env is redhat 5.x with openssl-0.9.8e-12.el5_4.6 Thanks, Rock</body>
  </mail>
  <mail>
    <header>[Resin-interest] Quercus Error running phpBB, any ideas?</header>
    <date>Tue May 08 21:34:27 CEST 2012</date>
    <body>I have phpBB 3.0.10 running under Resin PRO 4.0.24 at this time, working on getting up to .27 but have a couple Java coding issues that need to be correct so it doesn't break. That said, in general phpBB is working fine, but if someone posts a file, or add's a URL in a message that has like  a # or -, or one of the special chars, then quercus barks and error. I tried to upload an image, like ABC-123.png and I get on save: PHP Warning: in file xxx com.caucho.quercus.lib.regexp.IllegalRegexpException: '-' is an unknown It shows the invalid chars and such, then if I try and do something like use a color highlight, I will get the same error on # being used. So though the forum is working, a lot of simple things like some of the chars used, will break it, if I move it over to normal PHP with Apache, then it works fine. Any ideas on how to fix this?? --- Howard Leadmon - how...@leadmon.net</body>
  </mail>
  <mail>
    <header>[Resin-interest] urgent need evaluation license (generator does not	work)</header>
    <date>Tue May 08 16:02:34 CEST 2012</date>
    <body>Hello I tried your evaluation licence generator at caucho.com/evaluation-license but if failed with the message : License Issued to r...@architectedulogiciel.fr Return to caucho.com var/www/hosts/www.caucho.com/webapps/ROOT/wp-content/themes/caucho/license.php:132: Warning: Could not connect to SMTP host: caucho.com, port: 25 var/www/hosts/www.caucho.com/webapps/ROOT/wp-content/themes/caucho/license.php:136: Warning: Could not connect to SMTP host: caucho.com, port: 25 I tried 2 hours later but it failed saying that I already had one too recently (but the email was not sent) I need urgently an evaluation license for my customer please. I've sent an email to sa...@caucho.com with no success, maybe you have holidays now. Thanks a lot. -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 - France +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] urgent need evaluation license (generator does	not work)</header>
    <date>Tue May 08 16:12:47 CEST 2012</date>
    <body>Hi Riccardo, We'll check out the license generator, thanks. I'm not sure when you emailed sales, but they are PDT, GMT -7 timezone and may not have processed the request yet.  Sales will definitely respond with an evaluation license. -Paul http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] urgent need evaluation license (generator does not work)</header>
    <date>Tue May 08 16:21:10 CEST 2012</date>
    <body>Thanks a lot. http://caucho.com/evaluation-license mailto:r...@architectedulogiciel.fr http://caucho.com http://caucho.com http://caucho.com mailto:sa...@caucho.com http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 - France +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0.27 Pro, Ubuntu, mod-caucho - disable php handling for all but selected sites</header>
    <date>Sat May 05 22:35:32 CEST 2012</date>
    <body>I just installed resin to a server with &amp;gt; 100 php apps (your typical mix of drupal etc) intending for just a few to use Quercus as a test, then move the rest over in a managed way. What I find is all sites now fail as resin as hijacked the *.php extension. Its pretty much a default installation, all I did was attempt to fix this with commenting out the *.php servlet-mapping in app-default.xml but it had no effect. What have I missed please?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.27 Pro, Ubuntu, mod-caucho - disable php handling for all but selected sites</header>
    <date>Sun May 06 22:20:56 CEST 2012</date>
    <body>I would think you should look at your apache conf. First the request will go through Apache, which has to decide which handler will get the request. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.27 Pro, Ubuntu, mod-caucho - disable php handling for all but selected sites</header>
    <date>Mon May 07 10:52:45 CEST 2012</date>
    <body>I would think you should look at your apache conf. First the request will go through Apache, which has to decide which handler will get the request. Ummm... thanks but there's a bigger problem here - as I recall, Apache still serves the *.html, *.jpg etc from the sites whereas quercus handles the *.php. So how does apache know example.com/foo.jpg is actually on the disk under /www/quercus/example.com/foo.jpg unless it's aware of the resin config? This is how httpd.conf looks: LoadModule caucho_module /usr/lib/apache2/modules/mod_caucho.so ResinConfigServer localhost 6800 CauchoConfigCacheDirectory /tmp CauchoStatus yes I have to comment all those out in order to get the sites served by regular php. On Sat, May 5, 2012 at 10:34 PM, Stargazer &amp;lt;starga...@blueyonder.co.uk mailto:starga...@blueyonder.co.uk I just installed resin to a server with &amp;gt; 100 php apps (your typical mix of drupal etc) intending for just a few to use Quercus as a test, then move the rest over in a managed way. What I find is all sites now fail as resin as hijacked the *.php extension. Its pretty much a default installation, all I did was attempt to fix this with commenting out the *.php servlet-mapping in app-default.xml but it had no effect. What have I missed please?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.27 Pro, Ubuntu, mod-caucho - disable php handling for all but selected sites</header>
    <date>Tue May 08 21:38:45 CEST 2012</date>
    <body>I would think you should look at your apache conf. First the request will go through Apache, which has to decide which handler will get the request. Ummm... thanks but there's a bigger problem here - as I recall, Apache still serves the *.html, *.jpg etc from the sites whereas quercus handles the *.php. So how does apache know example.com/foo.jpg is actually on the disk under /www/quercus/example.com/foo.jpg unless it's aware of the resin config? This is how httpd.conf looks: LoadModule caucho_module /usr/lib/apache2/modules/mod_caucho.so ResinConfigServer localhost 6800 CauchoConfigCacheDirectory /tmp CauchoStatus yes I have to comment all those out in order to get the sites served by regular php. It seems this question has also gone unanswered in the forums for a couple of months too: http://forum.caucho.com/showthread.php?t=28738 On Sat, May 5, 2012 at 10:34 PM, Stargazer mailto:starga...@blueyonder.co.uk I just installed resin to a server with &amp;gt; 100 php apps (your typical mix of drupal etc) intending for just a few to use Quercus as a test, then move the rest over in a managed way. What I find is all sites now fail as resin as hijacked the *.php extension. Its pretty much a default installation, all I did was attempt to fix this with commenting out the *.php servlet-mapping in app-default.xml but it had no effect. What have I missed please?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.27 Pro, Ubuntu, mod-caucho - disable php handling for all but selected sites</header>
    <date>Wed May 09 08:30:37 CEST 2012</date>
    <body>An alternative that might be no that performant would be to use mod_proxy/mod_rewrite to send requests to Resin instead of using mod_caucho. That would let you choose the locations/directories that you want to forward to resin and which ones you want to process in Apache. Not sure if mod_caucho also allows this fine grained control, as I don't use it, but in the mean time... S! D. ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) Web Services Balearic Islands University (SPAIN) ------------------------------------------- El 08/05/2012 21:38, Stargazer escribió: http://forum.caucho.com/showthread.php?t=28738 mailto:starga...@blueyonder.co.uk</body>
  </mail>
  <mail>
    <header>[Resin-interest] Moved from 4.0.23 Pro to 4.0.27 Pro, now 2 servers clash listening to *:8080</header>
    <date>Sun Apr 29 12:48:48 CEST 2012</date>
    <body>Using Ubuntu 64bit with mod_caucho behind Apache. The 4.0.23 config handled a simple 2  cluster + single server in each setup (servers "a" and "b"), which were started separately using resin.sh start -server a -conf/resin/conf/resin-a.xml and the same for server b. There are dedicated IP's for each, so the 4.0.23 config looked like this: resin-a.xml resin-b.xml I see when each resin instance starts the line "http listening to x.example.com:8080" appears in the 4.0.23 start up log, correctly applicable to each IP. I set up the 4.0.27 config as closely as I could to this and get the conflict message on whichever starts the second - the first having hogged *:8080. I also see the line "http listening to *:8080" in each instances start up log, I'm sure this is the real cause but I just couldn't find where to control that IP in the new config. I did see the port change when I made local copies of the properties files and used them, ie. resin-x.properties with the http: entry, but nothing I did to either the web_servers or app_servers entries there affected the IP. Using the above 2 &amp;lt;http&amp;gt; entries in the new config files also made no difference. What am I missing please?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Moved from 4.0.23 Pro to 4.0.27 Pro, now 2 servers clash listening to *:8080</header>
    <date>Tue May 01 11:22:15 CEST 2012</date>
    <body>Here's the same question put a much simpler way  - its answer will give me a clue. I just installed a fresh copy of Resin Pro 4.0.27 and started it with no changes to any config files. The machine its on has the IP 1.2.3.4. The start up log shows "http listening to *:8080". What config change do I need to make to get that to read "http listening to 1.2.3.4:8080" please?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Moved from 4.0.23 Pro to 4.0.27 Pro, now 2 servers clash listening to *:8080</header>
    <date>Tue May 01 18:16:18 CEST 2012</date>
    <body>You'll need to modify the cluster-default.xml. Look for the &amp;lt;http&amp;gt;. I'll update it to add a http_address for the resin.properties for the ext release. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Moved from 4.0.23 Pro to 4.0.27 Pro, now 2 servers clash listening to *:8080</header>
    <date>Tue May 01 23:42:52 CEST 2012</date>
    <body>Thanks. Is there a way to specify a different cluster-default.xml per resin instance the way described in the root, or should I just wait for the next version where I can see this will be easy now? -- Carl</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Moved from 4.0.23 Pro to 4.0.27 Pro, now 2 servers clash listening to *:8080</header>
    <date>Wed May 02 00:01:39 CEST 2012</date>
    <body>You can modify the resin.xml and add &amp;lt;http&amp;gt; elements for each server with your own property names. I think that would be the easiest. You can also change the cluster-default.xml or make a new one of your own. The standard config is just intended to handle most simple configurations, not all sites. We still expect many sites will change their resin.xml, even with the new resin.properties. The main idea is to let the simpler sites (and new users) to use the resin.properties, not to forbid changes to the resin.xml. We split out the cluster-default.xml mostly because the resin.xml was getting to complicated, and because most of the config in the cluster-default.xml was fairly standard. -- Scott -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Moved from 4.0.23 Pro to 4.0.27 Pro, now 2 servers clash listening to *:8080</header>
    <date>Wed May 02 11:37:02 CEST 2012</date>
    <body>I tried that before I even made the first posting. Yes, each server then does get its own IP but the dreaded "listening to *:8080" is still there for the resin instance itself, which for &amp;gt;1 is the root cause of this issue. Its *the* cluster-default.xml, i.e. singular, which I want to get away from - I know ours is a simple setup, but there are 2 clusters, one per resin instance, so if a change is needed to cluster-default.xml, I need a way to specify each one to be used when starting resin. I just want the whole setup to work like it did before really, when I used (and still am since I can't upgrade till this is fixed) "resin.sh -server a" and "resin.sh -server b". I'm actually looking forwards to this so I can then play with the excellent dynamic server and load balancing stuff I see you've added! -- Carl</body>
  </mail>
  <mail>
    <header>[Resin-interest] Fwd: Resin pro 3.1.9 crash JVM on readNative memcpy</header>
    <date>Wed Apr 25 23:57:52 CEST 2012</date>
    <body>Hi, we've been running resin pro 3.1.9 for over a year, just recently, we start to experience regular JVM crashes inside resin native code, Is this a known issue with resin? Thanks, Rock ---------------  T H R E A D  --------------- Current thread (0x00002aaed023c000):  JavaThread "empty" daemon [_thread_in_native, id=22934, stack(0x000000004323d000,0x000000004333e000)] siginfo:si_signo=SIGSEGV: si_errno=0, si_code=1 (SEGV_MAPERR), si_addr=0x0000003604151000 Registers: RAX=0x0000000000000000, RBX=0x00000000ffffffe6, RCX=0x000000000000069c, RDX=0xffffffffffffffdf RSP=0x0000000043338418, RBP=0x00002aaecc080da0, RSI=0x0000003604151000, RDI=0x00002aaecc081915 R8 =0x0000000000006f45, R9 =0x0101010101010101, R10=0x0000000000000000, R11=0x0000000000004000 R12=0xffffffffffffffe6, R13=0x00000036041504d9, R14=0x00002aaecc080dbc, R15=0x00000000433384d0 RIP=0x000000360027c39b, EFL=0x0000000000010206, CSGSFS=0x0000000000000033, ERR=0x0000000000000004 TRAPNO=0x000000000000000e Top of Stack: (sp=0x0000000043338418) 0x0000000043338418:   0000003603ede7ee 0000000000000419 0x0000000043338428:   0000000000000419 0000000000000024 0x0000000043338438:   000000000000000a 00000036041500c0 0x0000000043338448:   0000003603edb99f 0000000000000018 0x0000000043338458:   0000000043338490 0000001200000000 0x0000000043338468:   00002aaef01c8220 00000000433384cc 0x0000000043338478:   00000001000003ff 00000000433384b0 0x0000000043338488:   fffffc0b481ee050 00000036041305c0 0x0000000043338498:   0000000000000000 0000000000000000 0x00000000433384a8:   00002aaecc080da0 0000000000004d8e 0x00000000433384b8:   0000000000006f45 00002aaef01c821c 0x00000000433384c8:   0000000003eca32c d69070808e91a963 0x00000000433384d8:   0eb029281f7ba2a8 000000368aa63a9c 0x00000000433384e8:   2a8be000001c0c00 00000036041504f8 0x00000000433384f8:   00002aaef01c821c 000000004acaa0a0 0x0000000043338508:   0000000000000000 00002aaecd68df30 0x0000000043338518:   000000000000000b 00000000433386e0 0x0000000043338528:   0000003603edb236 00002aaef01c821c 0x0000000043338538:   0000003608a1a16d 0000000000002130 0x0000000043338548:   000000004acaa0a0 0000000000000000 0x0000000043338558:   0000000000002130 000000000000000b 0x0000000043338568:   0000003608a1a8f1 0000000000000001 0x0000000043338578:   0000003603e7631a 000000004f8f701b 0x0000000043338588:   000000004acaa0a0 0000000000000003 0x0000000043338598:   0000000000000003 0000000000002210 0x00000000433385a8:   0000003608a22de2 00000000433386e0 0x00000000433385b8:   0000003600274e2e 0000000000000068 0x00000000433385c8:   000000000000012e 0000019100010316 0x00000000433385d8:   000000360301038d 00002aaef01c8350 0x00000000433385e8:   2a8be000001c0c00 0000000000000000 0x00000000433385f8:   000000004acaa0a0 00002aaef0cbe340 0x0000000043338608:   0000000000000000 0000000000002210 Instructions: (pc=0x000000360027c39b) 0x000000360027c38b:   0f 47 da 4c 89 d9 49 83 e3 f8 48 c1 e9 03 74 05 0x000000360027c39b:   f3 48 a5 66 90 4c 29 da 48 f7 c2 f8 ff ff ff 75 Stack: [0x000000004323d000,0x000000004333e000],  sp=0x0000000043338418, free space=1005k Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code) C  [libc.so.6+0x7c39b]  memcpy+0x15b Java frames: (J=compiled Java code, j=interpreted, Vv=VM code) j  com.caucho.vfs.JniSocketImpl.readNative(J[BIIJ)I+0 j  com.caucho.vfs.JniSocketImpl.read([BIIJ)I+10 j  com.caucho.vfs.JniStream.read([BII)I+42 J  com.caucho.vfs.ReadStream.readBuffer()Z J  com.caucho.server.port.TcpConnection.run()V J  com.caucho.util.ThreadPool$Item.runTasks()V j  com.caucho.util.ThreadPool$Item.run()V+106 j  java.lang.Thread.run()V+11 v  ~StubRoutines::call_stub VM state:not at safepoint (normal execution) VM Mutex/Monitor currently owned by a thread: None Heap PSYoungGen      total 1155712K, used 13482K [0x00002aad68cb0000, 0x00002aaddbc90000, 0x00002aaebe200000) eden space 1130496K, 1% used [0x00002aad68cb0000,0x00002aad699da970,0x00002aadadcb0000) from space 25216K, 0% used [0x00002aadda3f0000,0x00002aadda3f0000,0x00002aaddbc90000) to   space 48704K, 0% used [0x00002aadd5d70000,0x00002aadd5d70000,0x00002aadd8d00000) PSOldGen        total 2271552K, used 1520627K [0x00002aaabe200000, 0x00002aab48c50000, 0x00002aad68cb0000) object space 2271552K, 66% used [0x00002aaabe200000,0x00002aab1aefcd68,0x00002aab48c50000) PSPermGen       total 118592K, used 83492K [0x00002aaaae200000, 0x00002aaab55d0000, 0x00002aaabe200000) object space 118592K, 70% used [0x00002aaaae200000,0x00002aaab3389070,0x00002aaab55d0000) Dynamic libraries: VM Arguments: jvm_args: -Djava.util.logging.manager=com.caucho.log.LogManagerImpl -Djava.system.class.loader=com.caucho.loader.SystemClassLoader -Djavax.management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl -Djava.awt.headless=true -Dresin.home=/usr/local/resin/resin-pro-3.1.9/ -Xms2560m -Xmx16384m -Xss1m -XX:MaxPermSize=256m -verbose:gc -Dcom.sun.management.jmxremote -Dxr.util-logging.loggingEnabled=false -Dcom.sun.management.snmp.port=1161 -Djava.util.logging.manager=com.caucho.log.LogManagerImpl -Djavax.management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl -Djava.awt.headless=true -Dresin.home=/usr/local/resin/resin-pro-3.1.9/ -Dresin.root=/usr/local/resin/resin-pro-3.1.9/ -Dcom.sun.management.jmxremote -Djava.util.logging.manager=com.caucho.log.LogManagerImpl -Djavax.management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl -Djava.awt.headless=true -Dresin.home=/usr/local/resin/resin-pro-3.1.9/ -Dresin.root=/usr/local/resin/resin-pro-3.1.9/ -Dcom.sun.management.jmxremote java_command: com.caucho.server.resin.Resin --root-directory /usr/local/resin/resin-pro-3.1.9/ -conf /usr/local/resin/resin-pro-3.1.9/conf/resin.conf -socketwait 50162 start Launcher Type: SUN_STANDARD ---------------  S Y S T E M  --------------- OS:Red Hat Enterprise Linux Server release 5.6 (Tikanga) uname:Linux 2.6.18-238.12.1.el5 #1 SMP Sat May 7 20:18:50 EDT 2011 x86_64 libc:glibc 2.5 NPTL 2.5 rlimit: STACK 10240k, CORE 0k, NPROC 200703, NOFILE 65536, AS infinity load average:0.14 0.31 0.30 CPU:total 16 (8 cores per cpu, 2 threads per core) family 6 model 26 stepping 5, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, ht Memory: 4k page, physical 24681548k(7778640k free), swap 8385920k(8385676k free) vm_info: Java HotSpot(TM) 64-Bit Server VM (14.1-b02) for linux-amd64 JRE (1.6.0_15-b03), built on Jul  2 2009 15:26:16 by "java_re" with gcc 3.2.2 (SuSE Linux) time: Wed Apr 18 18:53:31 2012 elapsed time: 8518 seconds</body>
  </mail>
  <mail>
    <header>[Resin-interest]  Out of PermGen space</header>
    <date>Wed Apr 25 07:18:13 CEST 2012</date>
    <body>Hi Rick. After having had these issues for years, I started blogging about it and how to find classloader leaks [1]. I also compiled a list of API calls and third party libraries known to trigger these leaks [2], and as you can see, it is quite common both to cause these problems yourself and to have them caused by some dependency. Having done the research, I ended up creating a small library that you can add to you web application, that will clean up strong references keeping your classloader from being garbage collected [3]. Somewhat like Tomcat has built in, but taking care of more of the known problems. I suggest you add this library to you app and watch the logs (feel free to report your findings). Having said that, I should admit that I'm still seeing PermGen crashes running under Resin, even when there are no visible strong references to my classloader. I have not had time to investigate whether this is caused by Resin (such as the HotSwap capability), or if it is some JVM bug (and possibly something with IntelliJ, as the problem increases using the IntelliJ Resin plugin). I should probably try turning HotSwap off, or try another application server - or another JVM. Someday... Good luck! 1: http://java.jiderhamn.se/2011/12/11/classloader-leaks-i-how-to-find-classloader-leaks-with-eclipse-memory-analyser-mat/ 2: http://java.jiderhamn.se/2012/02/26/classloader-leaks-v-common-mistakes-and-known-offenders/ 3: http://java.jiderhamn.se/2012/03/04/classloader-leaks-vi-this-means-war-leak-prevention-library/ ----- Original Message ----- Subject: [Resin-interest] Out of PermGen space Date: Tue, 24 Apr 2012 13:54:40 -0700 When I'm making changes to the code of a webapp, Resin kindly reloads it for me. I can usually get a handful of reloads in before Resin complains about being out of PermGen space. Is there something I'm doing wrong in my app that it leaks like this? -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Out of PermGen space</header>
    <date>Thu Apr 26 00:05:11 CEST 2012</date>
    <body>Thanks, Mattias, that's cool! -- Rick http://java.jiderhamn.se/2011/12/11/classloader-leaks-i-how-to-find-classloader-leaks-with-eclipse-memory-analyser-mat/ http://java.jiderhamn.se/2012/02/26/classloader-leaks-v-common-mistakes-and-known-offenders/ http://java.jiderhamn.se/2012/03/04/classloader-leaks-vi-this-means-war-leak-prevention-library/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Out of PermGen space</header>
    <date>Tue Apr 24 22:54:52 CEST 2012</date>
    <body>When I'm making changes to the code of a webapp, Resin kindly reloads it for me. I can usually get a handful of reloads in before Resin complains about being out of PermGen space. Is there something I'm doing wrong in my app that it leaks like this? -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Out of PermGen space</header>
    <date>Tue Apr 24 23:32:58 CEST 2012</date>
    <body>Nope. The standard setting is pretty low. I usually set MaxPermSize to 256M.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Out of PermGen space</header>
    <date>Tue Apr 24 23:37:11 CEST 2012</date>
    <body>Mine is set higher. It runs fine for some time. Eventually, it'll try to reload the app, and get this error. Memory in my app (or in Resin) is leaking, and I don't know why (nor enough about java debugging to figure out where the leak is). -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Out of PermGen space</header>
    <date>Tue Apr 24 23:42:14 CEST 2012</date>
    <body>Well, yes and no.  As I understand the problem, it really got bad around the Java 5 timeframe because of the addition of Enumerations to the language.  What Resin does (and all auto-reloading Java containers do) is to create a ClassLoader that contains all the code for your application. When it senses a change to your code, it loads that new code into a brand new ClassLoader and releases the old one to be garbage collected once it's done processing it's active requests.  The problem is that, since Enumerations are guaranteed to work with the == operator, even when serialized/deserialized between different computers, Java treats them special, by keeping them in the Permanent Generation (so their internal ID's won't change).  Unfortunately, each time the app is loaded a new set of Enumerations takes up more space in the precious PermGen until it finally blows its lid.  So, theoretically, you could use less PermGen by limiting Enumeration use, but that's really not a realistic response. Before Java became property of Oracle, there was some talk about fixing this problem at the JVM level, but I haven't heard anything in quite a while. (*Chris*) http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Out of PermGen space</header>
    <date>Wed Apr 25 00:13:34 CEST 2012</date>
    <body>Out of PermGen space is almost always caused by a classloader leak which occurs when a webapp is reloaded.  It could be caused by either your own code, third-party code, or in some case Java core classes. You need to take heap dumps before and after webapp reload and use a heap analyzer to see what is holding onto the leaked classloader(s). Bill http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Out of PermGen space</header>
    <date>Wed Apr 25 01:20:46 CEST 2012</date>
    <body>Out of PermGen space is almost always caused by a classloader leak which occurs when a webapp is reloaded.  It could be caused by either your own code, third-party code, or in some case Java core classes. You need to take heap dumps before and after webapp reload and use a heap analyzer to see what is holding onto the leaked classloader(s). As a quick check, if you're using Resin 4.0 Pro, the PDF dump shows "ZombieClassLoaderMarker" in the heap dump section. Or you can use a heap analyzer and look for ZombieClassLoaderMarker and do a search-to-root on it. In Resin, a zombie classloader is one that Resin expects to be garbage collected. -- Scott Bill On Tue, Apr 24, 2012 at 5:41 PM, Chris Pratt &amp;lt;thechrispr...@gmail.com mailto:thechrispr...@gmail.com Well, yes and no.  As I understand the problem, it really got bad around the Java 5 timeframe because of the addition of Enumerations to the language.  What Resin does (and all auto-reloading Java containers do) is to create a ClassLoader that contains all the code for your application.  When it senses a change to your code, it loads that new code into a brand new ClassLoader and releases the old one to be garbage collected once it's done processing it's active requests.  The problem is that, since Enumerations are guaranteed to work with the == operator, even when serialized/deserialized between different computers, Java treats them special, by keeping them in the Permanent Generation (so their internal ID's won't change).  Unfortunately, each time the app is loaded a new set of Enumerations takes up more space in the precious PermGen until it finally blows its lid. So, theoretically, you could use less PermGen by limiting Enumeration use, but that's really not a realistic response. Before Java became property of Oracle, there was some talk about fixing this problem at the JVM level, but I haven't heard anything in quite a while. (*Chris*) On Tue, Apr 24, 2012 at 1:54 PM, Rick Mann &amp;lt;rm...@latencyzero.com mailto:rm...@latencyzero.com When I'm making changes to the code of a webapp, Resin kindly reloads it for me. I can usually get a handful of reloads in before Resin complains about being out of PermGen space. Is there something I'm doing wrong in my app that it leaks like this? -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Out of PermGen space</header>
    <date>Thu Apr 26 05:47:17 CEST 2012</date>
    <body>Wow, something I'm actually qualified to talk about on this list! :) I debug PermGen errors quite a bit. Some of our apps have a cache of dynamically generated classes (Drools does this) that, if held onto long enough, will make the the JVM run out of PermGen. This isn't really a mistake, it's just how it works, sadly. That's how I debug them. Take a series of heap dumps and start comparing the differences between them -- YourKit even makes this easy for you with a tool that diffs heap dumps. - Matt</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Out of PermGen space</header>
    <date>Thu Apr 26 15:00:35 CEST 2012</date>
    <body>If it is not a leak (classes are being cleaned up upon webapp reload but a large number is being created), simply increase max perm size. Bill http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Out of PermGen space</header>
    <date>Thu Apr 26 17:37:24 CEST 2012</date>
    <body>If you're using Resin 4.0, have you tried looking for the ZombieClassLoaderMarker? It's designed to make that tracing easier. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Out of PermGen space</header>
    <date>Wed Apr 25 01:05:23 CEST 2012</date>
    <body>Hello Chris, this actually makes me wonder: are enums eating so much space, especially when compared to those things, that you release with the classloader? Heard about this for the first time. Interesting.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Out of PermGen space</header>
    <date>Fri Apr 27 11:24:09 CEST 2012</date>
    <body>I should also mention, that I have an open bug report on Resin 4.0.27 which seems to cause classloader leaks. http://bugs.caucho.com/view.php?id=5010 In pretty much every heap dump I analyze for ZombieClassLoaderMarker these days, com.caucho.config.inject.InjectManager turns up somewhere in the path to root. Not sure if it will fix all the problems, but it sure would be interesting to try a Resin version without this issue. P.S. I did some experimenting with Resin Pro vs Open Source today, and com.caucho.env.thread2.ResinThread2". Disabling JNI (on Windows, removing resin_os.dll) seemed to postpone the crash (which again included InjectManager) substantially. Not enought statistics to draw conclustions, but there *may* be something fishy about the JNI connection under Windows. ----- Original Message ----- Subject: Re: [Resin-interest] Out of PermGen space Date: Wed, 25 Apr 2012 15:04:53 -0700 Thanks, Mattias, that's cool! -- Rick and how to find classloader leaks [1]. I also compiled a list of API calls and third party libraries known to trigger these leaks [2], and as you can see, it is quite common both to cause these problems yourself and to have them caused by some dependency. you can add to you web application, that will clean up strong references keeping your classloader from being garbage collected [3]. Somewhat like Tomcat has built in, but taking care of more of the known problems. I suggest you add this library to you app and watch the logs (feel free to report your findings). crashes running under Resin, even when there are no visible strong references to my classloader. I have not had time to investigate whether this is caused by Resin (such as the HotSwap capability), or if it is some JVM bug (and possibly something with IntelliJ, as the problem increases using the IntelliJ Resin plugin). I should probably try turning HotSwap off, or try another application server - or another JVM. Someday... http://java.jiderhamn.se/2011/12/11/classloader-leaks-i-how-to-find-classloader-leaks-with-eclipse-memory-analyser-mat/ http://java.jiderhamn.se/2012/02/26/classloader-leaks-v-common-mistakes-and-known-offenders/ http://java.jiderhamn.se/2012/03/04/classloader-leaks-vi-this-means-war-leak-prevention-library/ it for me. I can usually get a handful of reloads in before Resin complains about being out of PermGen space. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Out of PermGen space</header>
    <date>Tue May 29 21:28:16 CEST 2012</date>
    <body>http://bugs.caucho.com/view.php?id=5010 Has anyone had time to confirm this bug? It seems to be triggered more often when using JSF, so when developing JSF applications I need to restart the server over and over (no difference whether HotSwap is enabled or not). Would be happy to know if there is hope that this will be fixed.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Out of PermGen space</header>
    <date>Tue May 29 22:16:15 CEST 2012</date>
    <body>http://bugs.caucho.com/view.php?id=5010 Do you have a trace to root on one of those? (We've finally found the bugtrack upload corruption issue, but haven't updated that server yet, so the current pngs aren't readable.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Out of PermGen space</header>
    <date>Wed May 30 06:51:42 CEST 2012</date>
    <body>http://bugs.caucho.com/view.php?id=5010 See http://jiderhamn.se/resin4027.png + http://jiderhamn.se/resin4027b.png Let me know if I can provide any additional info.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Out of PermGen space</header>
    <date>Wed May 30 18:56:54 CEST 2012</date>
    <body>http://bugs.caucho.com/view.php?id=5010 http://jiderhamn.se/resin4027.png + http://jiderhamn.se/resin4027b.png Thanks. The first one is straightforward to fix (the AnnotationLiteral is a surprising dependency, though.) I'm not sure how the second one is possible (the one where your application's bean is in the ResinSystem CDI context.) I assume that bean is just scanned normally? -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Slow Alarm?</header>
    <date>Tue Apr 24 22:11:17 CEST 2012</date>
    <body>I think there was some stuff about this before, but what is the "Slow Alarm" warning in the logs? I see a lot of this after my resin instance has been running on my MacBook Pro (Lion) for a day or more. I often close the lid to sleep it while I transport it. I get entries like this: Alarm[alarm[NetworkListenSystem[]]] 1650229ms coordinator-delta 1679714ms Alarm[alarm[ConnectionPool[jdbc/satdb]]] 1649693ms coordinator-delta 1679714ms Alarm[alarm[com.caucho.log.AbstractRolloverLog$RolloverAlarm@74e427ed]] 1157409ms coordinator-delta 1679714ms -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Slow Alarm?</header>
    <date>Tue Apr 24 22:49:20 CEST 2012</date>
    <body>In that case, it's basically reporting your shutdown. The log message is just to let you know that periodic tasks weren't run when you were expecting them. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Slow Alarm?</header>
    <date>Tue Apr 24 22:54:08 CEST 2012</date>
    <body>Ah, okay. There were so many of them, and I've noticed that when I frequently change a single webapp, eventually Resin runs out of PermGen space, I thought this might be a similar degradation in performance. -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin Pro 4.0.24 w/Quercus trying to get MediaWiki	1.18.2 to work..</header>
    <date>Tue Apr 24 01:28:16 CEST 2012</date>
    <body>I really thought since Caucho seems to be using mediawiki, that it would be a piece of cake to get it working under resin.  That said, I have taken and downloaded the current mediawiki, and went about configuring it up as a virtual host on my Resin PRO server, got the directories made, archived expanded out, and even went to the caucho wiki and grabbed the template they provide to configure. All went well, I went to the page, and up came the opening page just fine, but of course as it was new it asked me to click to configure which I did. It asked me for my language, which defaulted to English which was fine, and then I clicked Continue.  At that point it put up a nice red stop symbol, and gave the following error: Your session data was lost! Check your php.ini and make sure session.save_path is set to an appropriate directory. Is there any solution to this, and if so my google fu is failing me today, as I can't seem to find it. If anyone has any hints or suggestions on how to fix this, I would most appreciate it.. --- Howard Leadmon - how...@leadmon.net</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.24 w/Quercus trying to get MediaWiki 1.18.2 to work..</header>
    <date>Wed Apr 25 00:29:45 CEST 2012</date>
    <body>Howard Leadmon schrieb am 23.04.2012 um 19:27 (-0400): Check the &amp;lt;php-ini&amp;gt; config section here: http://www.mail-archive.com/resin-interest@caucho.com/msg00602.html Might help. Haven't tried it. All I did was: http://www.google.com/search?q=quercus+session.save_path -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.24 w/Quercus trying to get	MediaWiki 1.18.2 to work..</header>
    <date>Wed Apr 25 17:38:53 CEST 2012</date>
    <body>Hi Howard, I believe Mediawiki works on Resin 4.0.27.  Some Quercus fixed were made to get our wiki up to version 1.18.2, and these have been included in the latest Resin release. Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>[Resin-interest] File does not exist in Error Logs</header>
    <date>Sun Apr 22 18:21:47 CEST 2012</date>
    <body>I am using Apache/2.2.20 and resin 3.1.12 . Recently, I am seeing lot of strange errors in Apache error_logs. I dont see an issue to access the website. However in the logs, I do see in this format. When the user request for a page /test/data/  , the below error appears some times in the logs. Apache looks for random number file (9780) in the directory. This is happening to all files, and is very random. [Sun Apr 22 09:07:44 2012] [error] [client 11.777.477.431] File does not exist: /home/myaccount/public_html/test/data/9780, referer: http://www.mydomain.com/test/data/ Is it happening because of misconfiguration of Apache/resin? thanks Mani</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin pro 3.1.9 crash JVM on readNative memcpy</header>
    <date>Fri Apr 20 18:24:42 CEST 2012</date>
    <body>Hi, we've been running resin pro 3.1.9 for over a year, just recently, we start to experience regular JVM crashes inside resin native code, Is this a known issue with resin? Thanks, Rock --------------  T H R E A D  --------------- Current thread (0x00002aaed023c000):  JavaThread "empty" daemon [_thread_in_native, id=22934, stack(0x000000004323d000,0x000000004333e000)] siginfo:si_signo=SIGSEGV: si_errno=0, si_code=1 (SEGV_MAPERR), si_addr=0x0000003604151000 Registers: RAX=0x0000000000000000, RBX=0x00000000ffffffe6, RCX=0x000000000000069c, RDX=0xffffffffffffffdf RSP=0x0000000043338418, RBP=0x00002aaecc080da0, RSI=0x0000003604151000, RDI=0x00002aaecc081915 R8 =0x0000000000006f45, R9 =0x0101010101010101, R10=0x0000000000000000, R11=0x0000000000004000 R12=0xffffffffffffffe6, R13=0x00000036041504d9, R14=0x00002aaecc080dbc, R15=0x00000000433384d0 RIP=0x000000360027c39b, EFL=0x0000000000010206, CSGSFS=0x0000000000000033, ERR=0x0000000000000004 TRAPNO=0x000000000000000e Top of Stack: (sp=0x0000000043338418) 0x0000000043338418:   0000003603ede7ee 0000000000000419 0x0000000043338428:   0000000000000419 0000000000000024 0x0000000043338438:   000000000000000a 00000036041500c0 0x0000000043338448:   0000003603edb99f 0000000000000018 0x0000000043338458:   0000000043338490 0000001200000000 0x0000000043338468:   00002aaef01c8220 00000000433384cc 0x0000000043338478:   00000001000003ff 00000000433384b0 0x0000000043338488:   fffffc0b481ee050 00000036041305c0 0x0000000043338498:   0000000000000000 0000000000000000 0x00000000433384a8:   00002aaecc080da0 0000000000004d8e 0x00000000433384b8:   0000000000006f45 00002aaef01c821c 0x00000000433384c8:   0000000003eca32c d69070808e91a963 0x00000000433384d8:   0eb029281f7ba2a8 000000368aa63a9c 0x00000000433384e8:   2a8be000001c0c00 00000036041504f8 0x00000000433384f8:   00002aaef01c821c 000000004acaa0a0 0x0000000043338508:   0000000000000000 00002aaecd68df30 0x0000000043338518:   000000000000000b 00000000433386e0 0x0000000043338528:   0000003603edb236 00002aaef01c821c 0x0000000043338538:   0000003608a1a16d 0000000000002130 0x0000000043338548:   000000004acaa0a0 0000000000000000 0x0000000043338558:   0000000000002130 000000000000000b 0x0000000043338568:   0000003608a1a8f1 0000000000000001 0x0000000043338578:   0000003603e7631a 000000004f8f701b 0x0000000043338588:   000000004acaa0a0 0000000000000003 0x0000000043338598:   0000000000000003 0000000000002210 0x00000000433385a8:   0000003608a22de2 00000000433386e0 0x00000000433385b8:   0000003600274e2e 0000000000000068 0x00000000433385c8:   000000000000012e 0000019100010316 0x00000000433385d8:   000000360301038d 00002aaef01c8350 0x00000000433385e8:   2a8be000001c0c00 0000000000000000 0x00000000433385f8:   000000004acaa0a0 00002aaef0cbe340 0x0000000043338608:   0000000000000000 0000000000002210 Instructions: (pc=0x000000360027c39b) 0x000000360027c38b:   0f 47 da 4c 89 d9 49 83 e3 f8 48 c1 e9 03 74 05 0x000000360027c39b:   f3 48 a5 66 90 4c 29 da 48 f7 c2 f8 ff ff ff 75 Stack: [0x000000004323d000,0x000000004333e000],  sp=0x0000000043338418, free space=1005k Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code) C  [libc.so.6+0x7c39b]  memcpy+0x15b Java frames: (J=compiled Java code, j=interpreted, Vv=VM code) j  com.caucho.vfs.JniSocketImpl.readNative(J[BIIJ)I+0 j  com.caucho.vfs.JniSocketImpl.read([BIIJ)I+10 j  com.caucho.vfs.JniStream.read([BII)I+42 J  com.caucho.vfs.ReadStream.readBuffer()Z J  com.caucho.server.port.TcpConnection.run()V J  com.caucho.util.ThreadPool$Item.runTasks()V j  com.caucho.util.ThreadPool$Item.run()V+106 j  java.lang.Thread.run()V+11 v  ~StubRoutines::call_stub VM state:not at safepoint (normal execution) VM Mutex/Monitor currently owned by a thread: None Heap PSYoungGen      total 1155712K, used 13482K [0x00002aad68cb0000, 0x00002aaddbc90000, 0x00002aaebe200000) eden space 1130496K, 1% used [0x00002aad68cb0000,0x00002aad699da970,0x00002aadadcb0000) from space 25216K, 0% used [0x00002aadda3f0000,0x00002aadda3f0000,0x00002aaddbc90000) to   space 48704K, 0% used [0x00002aadd5d70000,0x00002aadd5d70000,0x00002aadd8d00000) PSOldGen        total 2271552K, used 1520627K [0x00002aaabe200000, 0x00002aab48c50000, 0x00002aad68cb0000) object space 2271552K, 66% used [0x00002aaabe200000,0x00002aab1aefcd68,0x00002aab48c50000) PSPermGen       total 118592K, used 83492K [0x00002aaaae200000, 0x00002aaab55d0000, 0x00002aaabe200000) object space 118592K, 70% used [0x00002aaaae200000,0x00002aaab3389070,0x00002aaab55d0000) Dynamic libraries: VM Arguments: jvm_args: -Djava.util.logging.manager=com.caucho.log.LogManagerImpl -Djava.system.class.loader=com.caucho.loader.SystemClassLoader -Djavax.management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl -Djava.awt.headless=true -Dresin.home=/usr/local/resin/resin-pro-3.1.9/ -Xms2560m -Xmx16384m -Xss1m -XX:MaxPermSize=256m -verbose:gc -Dcom.sun.management.jmxremote -Dxr.util-logging.loggingEnabled=false -Dcom.sun.management.snmp.port=1161 -Djava.util.logging.manager=com.caucho.log.LogManagerImpl -Djavax.management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl -Djava.awt.headless=true -Dresin.home=/usr/local/resin/resin-pro-3.1.9/ -Dresin.root=/usr/local/resin/resin-pro-3.1.9/ -Dcom.sun.management.jmxremote -Djava.util.logging.manager=com.caucho.log.LogManagerImpl -Djavax.management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl -Djava.awt.headless=true -Dresin.home=/usr/local/resin/resin-pro-3.1.9/ -Dresin.root=/usr/local/resin/resin-pro-3.1.9/ -Dcom.sun.management.jmxremote java_command: com.caucho.server.resin.Resin --root-directory /usr/local/resin/resin-pro-3.1.9/ -conf /usr/local/resin/resin-pro-3.1.9/conf/resin.conf -socketwait 50162 start Launcher Type: SUN_STANDARD ---------------  S Y S T E M  --------------- OS:Red Hat Enterprise Linux Server release 5.6 (Tikanga) uname:Linux 2.6.18-238.12.1.el5 #1 SMP Sat May 7 20:18:50 EDT 2011 x86_64 libc:glibc 2.5 NPTL 2.5 rlimit: STACK 10240k, CORE 0k, NPROC 200703, NOFILE 65536, AS infinity load average:0.14 0.31 0.30 CPU:total 16 (8 cores per cpu, 2 threads per core) family 6 model 26 stepping 5, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, ht Memory: 4k page, physical 24681548k(7778640k free), swap 8385920k(8385676k free) vm_info: Java HotSpot(TM) 64-Bit Server VM (14.1-b02) for linux-amd64 JRE (1.6.0_15-b03), built on Jul  2 2009 15:26:16 by "java_re" with gcc 3.2.2 (SuSE Linux) time: Wed Apr 18 18:53:31 2012 elapsed time: 8518 seconds ..</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Override EL implementation (help us stay with Resin)</header>
    <date>Mon Apr 16 21:30:20 CEST 2012</date>
    <body>----- Original Message ----- Subject: Re: [Resin-interest] Override EL implementation (help us stay with Resin) Date: Mon, 16 Apr 2012 09:08:23 -0700 as we super Hmm. I'd assumed you were talking about the draft for JavaEE 7, because the bug report says "update EL to 2.2" (and not remembering the exact bug report number.) Instead of reporting specific bugs against Resin's implementation (which we can fix), you're asking for it to be replaced? That's backwards. I'm sorry if http://bugs.caucho.com/view.php?id=5011 is misphrased. I'm still a bit of a newbie on the JEE 6+ stack. I thought javaee-16.jar only contained repackaged standard API:s. Are you saying it contains Caucho specific implementations of these API:s, javax.el.BeanELResolver in particular...? (The fact that standard API interfaces such as javax.servlet.http.HttpServletRequest and javax.transaction.UserTransaction have a Caucho licensing header in the Resin source dist makes it harder to see what is standard and what isn't) Anyway, when javaee-16.jar/javax/el is replaced with Maven dep javax.el/el-api/2.2 the problems were gone, so therefore I assumed the repackaging was based on a pre 2.2 version and Resin was not to blame for the bugs per se. But what you are saying is, that our best bet is to report each separate bug against Resin, and hope to see them fixed in the next version? Am I understanding this right? I'd put it on a low priority, because I thought you were asking for early draft implementation of JavaEE 7, not bugs against JavaEE 6 (because your requests weren't described as JavaEE 6 bugs.) -- Scott - or The This for server.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Override EL implementation (help us stay with Resin)</header>
    <date>Mon Apr 16 22:12:48 CEST 2012</date>
    <body>I'm sorry if http://bugs.caucho.com/view.php?id=5011 is misphrased. I'm still a bit of a newbie on the JEE 6+ stack. I thought javaee-16.jar only contained repackaged standard API:s. Are you saying it contains Caucho specific implementations of these API:s, javax.el.BeanELResolver in particular...? (The fact that standard API interfaces such as javax.servlet.http.HttpServletRequest and javax.transaction.UserTransaction have a Caucho licensing header in the Resin source dist makes it harder to see what is standard and what isn't) They're standard APIs with our implementation. In most cases, those APIs are just interfaces. In some cases like the EL, the specification puts implementation in those jars. (Personally, I don't like those APIs, since I don't think spec jars should have much functionality.) Anyway, when javaee-16.jar/javax/el is replaced with Maven dep javax.el/el-api/2.2 the problems were gone, so therefore I assumed the repackaging was based on a pre 2.2 version and Resin was not to blame for the bugs per se. But what you are saying is, that our best bet is to report each separate bug against Resin, and hope to see them fixed in the next version? Correct. Fixing those bugs are generally pretty simple, because they're fairly small in functionality. -- Scott Am I understanding this right? I'd put it on a low priority, because I thought you were asking for early draft implementation of JavaEE 7, not bugs against JavaEE 6 (because your requests weren't described as JavaEE 6 bugs.) -- Scott - or etc. The This will be done for other server.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Override EL implementation (help us stay with Resin)</header>
    <date>Tue Apr 17 21:41:04 CEST 2012</date>
    <body>----- Original Message ----- Subject: Re: [Resin-interest] Override EL implementation (help us stay with Resin) Date: Mon, 16 Apr 2012 13:12:15 -0700 Correct. Fixing those bugs are generally pretty simple, because they're fairly small in functionality. Well, I feel like a n00b after having realized the most severe problems we're actually caused by the fact that a team member (who is running JBoss locally) had set com.sun.faces.expressionFactory parameter to com.sun.el.ExpressionFactoryImpl. So there was a mixture of two implementations. Sorry for blaming Resin! *blush* After changing the setting to com.caucho.el.ExpressionFactoryImpl (or rather a proxy using com.caucho.el.ExpressionFactoryImpl if present), the problems turning are much less severe. I reported http://bugs.caucho.com/view.php?id=5034 (which has a very easy workaround) and http://bugs.caucho.com/view.php?id=5035 (which should be no problem in production, but make development much less effective; trivial to fix so I trust it to be in the next release) I do want to ask, why Resin is using a custom EL implementation rather than the Sun implementation? Performance? Licensing? In case there is good reason to stick with custom implementation, and the above two bugs are fixed, I guess http://bugs.caucho.com/view.php?id=5011 can be closed. --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Override EL implementation (help us stay with Resin)</header>
    <date>Wed Apr 18 20:48:52 CEST 2012</date>
    <body>----- Original Message ----- Subject: Re: [Resin-interest] Override EL implementation (help us stay with Resin) Date: Mon, 16 Apr 2012 13:12:15 -0700 Correct. Fixing those bugs are generally pretty simple, because they're fairly small in functionality. Well, I feel like a n00b after having realized the most severe problems we're actually caused by the fact that a team member (who is running JBoss locally) had set com.sun.faces.expressionFactory parameter to com.sun.el.ExpressionFactoryImpl. So there was a mixture of two implementations. Sorry for blaming Resin! *blush* After changing the setting to com.caucho.el.ExpressionFactoryImpl (or rather a proxy using com.caucho.el.ExpressionFactoryImpl if present), the problems turning are much less severe. I reported http://bugs.caucho.com/view.php?id=5034 (which has a very easy workaround) and http://bugs.caucho.com/view.php?id=5035 (which should be no problem in production, but make development much less effective; trivial to fix so I trust it to be in the next release) Thanks. I do want to ask, why Resin is using a custom EL implementation rather than the Sun implementation? Performance? Licensing? Historically licensing and performance. -- Scott the above two bugs are fixed, I guess http://bugs.caucho.com/view.php?id=5011 can be closed. --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Override EL implementation (help us stay with Resin)</header>
    <date>Mon Apr 23 08:32:15 CEST 2012</date>
    <body>----- Original Message ----- Subject: Re: [Resin-interest] Override EL implementation (help us stay with Resin) Date: Wed, 18 Apr 2012 11:48:34 -0700 assumed the blame they're http://bugs.caucho.com/view.php?id=5034 (which has a very http://bugs.caucho.com/view.php?id=5035 (which Thanks. Unfortunately I was able to reproduce this one too: http://bugs.caucho.com/view.php?id=5039 This one is a bit more annoying, since the workaround requires adding dummy setters everywhere the bug is hit. --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Override EL implementation (help us stay with Resin)</header>
    <date>Fri May 04 12:23:32 CEST 2012</date>
    <body>----- Original Message ----- Subject: Re: [Resin-interest] Override EL implementation (help us stay with Resin) Date: Mon, 23 Apr 2012 08:31:33 +0200 ... http://bugs.caucho.com/view.php?id=5034 (which has a very http://bugs.caucho.com/view.php?id=5035 (which Unfortunately I was able to reproduce this one too: http://bugs.caucho.com/view.php?id=5039 This one is a bit more annoying, since the workaround requires adding dummy setters everywhere the bug is hit. And here is another one: http://bugs.caucho.com/view.php?id=5061 Seems like an easy fix. --</body>
  </mail>
  <mail>
    <header>[Resin-interest] Override EL implementation (help us stay with	Resin)</header>
    <date>Mon Apr 16 12:48:26 CEST 2012</date>
    <body>We have been using Resin for 10+ years, mostly very satisfied, but as we are now working with JSF we've had numerous problems related to Resin. Most of the problems are caused by Resins implementation of EL (not resolving parameters, not being able to call a method defined in a super class, requiring setter to allow getter access). We've managed some partial workarounds (such as a custom com.sun.faces.expressionFactory), but at this point it seems the only rational thing to do is to replace/override individual classes or the entire javax.el package (which Resin does not allow out of the box) - or look for another application server. I want your help to see what our workaround options are. There are obviously benefits of being able to limit the workaround to the application, so that a WAR can include any EL updates and there is no special operation required per server / when upgrading Resin etc. The fact that the application is supposed to be hosted by a third party, also means we don't know if we are even allowed to make necessary changes to the Resin installation. Here are the options I see so far: A) Configure the server to include alternative EL implementation JAR (el-api-2.2.jar) in the classpath, preceeding Resins javaee-16.jar. This could be achieved by setting CLASSPATH environment variable and should also be possible with the &amp;lt;jvm-arg&amp;gt; tag in Resin configuration. Drawbacks: EL cannot be updated with application, but needs separate update. Not sure hosting companies allow it. Probably not compatible with Resin IDE plugin (haven't got it working yet...), so there will be different configs in dev and production. B) Patch Resins javaee-16.jar with the contents of the other EL implementation JAR (el-api-2.2.jar). This has been tested in dev environment and seems to work. Drawbacks: EL cannot be updated with application, but needs separate update. Unlikely that hosting companies allow this. Needs to be done for every Resin upgrade (until Resin is fixed...). "Hacky". C) Allow override of classes inside application (as of the Servlet spec...) by patching the Relax NG Schema of Resin configuration (env.rnc) and adding Drawbacks: Less likely that hosting companies allow this. Lead to other issues when testing. D) I believe it may be possible replacing for example com.sun.faces.el.ELUtils.BEAN_RESOLVER constant with another implementation, using reflection and Apache BCEL. This way, everthing would be included in WAR and no special configuration needed per server. Drawbacks: Unimplemented and untested (requires time, may not work), very hacky. There may be interdependencies between classes in the javax.el package that are broken if only single classes replaced. Are there other options? Flaws in the above reasoning? Thanks in advance, --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Override EL implementation (help us stay with Resin)</header>
    <date>Mon Apr 16 18:08:39 CEST 2012</date>
    <body>Hmm. I'd assumed you were talking about the draft for JavaEE 7, because the bug report says "update EL to 2.2" (and not remembering the exact bug report number.) Instead of reporting specific bugs against Resin's implementation (which we can fix), you're asking for it to be replaced? That's backwards. Am I understanding this right? I'd put it on a low priority, because I thought you were asking for early draft implementation of JavaEE 7, not bugs against JavaEE 6 (because your requests weren't described as JavaEE 6 bugs.) -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] cannot ./configure resin - says java not installed, - it is installed and JAVA_HOME is set correctly..</header>
    <date>Fri Apr 13 18:08:00 CEST 2012</date>
    <body>help? root@ubuntu64#echo $JAVA_HOME /opt/jdk/ when double checking the version: root@ubuntu64# $JAVA_HOME/bin/java -version java version "1.6.0_27" Java(TM) SE Runtime Environment (build 1.6.0_27-b07) Java HotSpot(TM) 64-Bit Server VM (build 20.2-b06, mixed mode) however when doing a configure I get this error: ( I even exported JAVA_HOME to /opt/jdk/ ) == root@ubuntu64:/opt/resin-4.0.27# ./configure checking build system type... x86_64-unknown-linux-gnu checking host system type... x86_64-unknown-linux-gnu ... .. checking if  is Java 1.6... no configure: error: Java 1.6 required.  returned: ./configure: line 11291: -version: command not found == why is this happening? tia!</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] cannot ./configure resin - says java not	installed, - it is installed and JAVA_HOME is set correctly..</header>
    <date>Fri Apr 13 18:15:00 CEST 2012</date>
    <body>Hi Tom, Can you add /opt/jdk/bin to the PATH and try again. ./configure in 4.0.27 does 'which java' to find java executable. I added a fallback to JAVA_HOME/bin/java for 4.0.28 and up. Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] cannot ./configure resin - says java not installed, - it is installed and JAVA_HOME is set correctly..</header>
    <date>Fri Apr 13 18:21:33 CEST 2012</date>
    <body>thanks! That seemed to do it! tom. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] cannot ./configure resin - says java	not	installed, - it is installed and JAVA_HOME is set correctly..</header>
    <date>Fri Apr 13 18:22:27 CEST 2012</date>
    <body>.. or you can use the --with-java-home option for configure. Eg something like this: ./configure --with-java-home=/opt/jdk/ Run "./configure --help" to see all options available.. Regards, Jens Dueholm Christensen  -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Alex Rojkov Sent: Friday, April 13, 2012 6:15 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] cannot ./configure resin - says java not installed, - it is installed and JAVA_HOME is set correctly.. Hi Tom, Can you add /opt/jdk/bin to the PATH and try again. ./configure in 4.0.27 does 'which java' to find java executable. I added a fallback to JAVA_HOME/bin/java for 4.0.28 and up. Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] HTTP Header Question</header>
    <date>Fri Apr 06 20:10:53 CEST 2012</date>
    <body>I tested using &amp;lt;server-header&amp;gt;&amp;lt;/server-header&amp;gt; and it worked to clear the "Server:" header, but is there a way to remove a  header completely? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>[Resin-interest] UnavailableException???</header>
    <date>Fri Mar 23 21:34:41 CET 2012</date>
    <body>WTF. I have resin 4.0.23 running on a server on rackspace. They just forcibly migrated my host (I had rebooted a different one earlier to control when the migration happened, but dropped the ball on this one). When it came back up, resin didn't restart (config problem on my end). So I logged in an re-started it. Everything seemed fine. Then a while later, it died (ran out of permgen space). Note that this is a very unloaded server. So, I killed it (I tried using resin.sh stop, but that took so long, I used kill -kill on all the resin processes). Now it starts up, and I'm getting this: [show] javax.servlet.UnavailableException: javax.servlet.UnavailableException: at org.apache.struts.action.ActionServlet.init(ActionServlet.java:402) at javax.servlet.GenericServlet.init(GenericServlet.java:70) at com.caucho.server.dispatch.ServletConfigImpl.createServletImpl(ServletConfigImpl.java:1356) at com.caucho.server.dispatch.ServletConfigImpl.createServlet(ServletConfigImpl.java:1204) at com.caucho.server.dispatch.ServletManager.init(ServletManager.java:232) at com.caucho.server.webapp.WebApp.start(WebApp.java:3558) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:679) at com.caucho.env.deploy.DeployController.restartImpl(DeployController.java:621) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.request(StartAutoRedeployAutoStrategy.java:138) at com.caucho.env.deploy.DeployController.request(DeployController.java:584) at com.caucho.server.webapp.WebAppContainer.getWebApp(WebAppContainer.java:1007) at com.caucho.server.webapp.WebAppContainer.buildInvocation(WebAppContainer.java:776) at com.caucho.server.host.Host.buildInvocation(Host.java:755) at com.caucho.server.host.HostContainer.buildInvocation(HostContainer.java:319) at com.caucho.server.cluster.Server.buildInvocation(Server.java:916) at com.caucho.server.dispatch.InvocationServer.buildInvocation(InvocationServer.java:247) at com.caucho.server.dispatch.InvocationServer.buildInvocation(InvocationServer.java:220) at com.caucho.server.http.AbstractHttpRequest.buildInvocation(AbstractHttpRequest.java:1492) at com.caucho.server.http.AbstractHttpRequest.getInvocation(AbstractHttpRequest.java:1465) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:793) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:1215) at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:1171) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:1155) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:1078) at com.caucho.network.listen.TcpSocketLink.handleAcceptTask(TcpSocketLink.java:907) at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:74) at com.caucho.network.listen.ConnectionTask.runThread(ConnectionTask.java:97) at com.caucho.network.listen.ConnectionTask.run(ConnectionTask.java:80) at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:59) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) I haven't changed anything else. Any ideas? Thanks, Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] UnavailableException???</header>
    <date>Fri Mar 23 21:54:38 CET 2012</date>
    <body>Possibly a missing or out-of-date jar file for struts or one of its dependencies? The exception is a servlet exception, but the message string looks more like a JVM linking error, so maybe struts is rethrowing a linking problem. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] UnavailableException???</header>
    <date>Fri Mar 23 22:26:32 CET 2012</date>
    <body>Thanks. I can't explain what's going on. Nothing changed between the first reboot and the second. In the end I rebuilt the app and re-uploaded it, and it's running fine now. But yeesh, so bizarre. -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Multiple servers defined on a cluster now(4.x)	requires Resin Professional</header>
    <date>Fri Mar 16 09:42:44 CET 2012</date>
    <body>Hi there, We are using Resin 3 and we even though we are not using real clustering, we used the possibility of defining various servers inside a cluster, so we could share a configuration file among various hosts, like this: ------ ... ----------- and then start one or the other depending on the -server argument passed etc. I'm trying to see how we would migrate to Resin 4 and, if I'm not mistaken, this is no longer allowed as you require a license to define more than one server on a cluster, right? Is there any other way to have server share the configuration like that, we need to have different server ids for &amp;lt;cookie-append-server-index /&amp;gt;, or is having different configuration files or moving to Resin Pro the only options? S! D. ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) Web Services Centre for Information and Technology Balearic Islands University (SPAIN) -------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multiple servers defined on a cluster now(4.x) requires Resin Professional</header>
    <date>Fri Mar 16 17:54:43 CET 2012</date>
    <body>You can always use &amp;lt;resin:import/&amp;gt; and -conf to select the server (or use &amp;lt;resin:choose&amp;gt; with a -D to select the options.) That way the unique config files would stay small and maintainable, and you wouldn't need to repeat configuration. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multiple servers defined on a cluster now(4.x) requires Resin Professional</header>
    <date>Tue Mar 20 13:51:26 CET 2012</date>
    <body>Hi Scott, I see and I have tried to make it so, but the related issue is that the number or servers has a direct impact in the cookie session value definition, through &amp;lt;cookie-append-server-index /&amp;gt;, so being able to define just one server means we can no longer have different cookie naming schemes in different servers, hence no easy session stickiness as with version 3 :). But that might be an intended side effect to prevent people to use clustered resin instances without session failover unless Resin Pro is used. Is that the case? Not complaining here, but simply trying to clarify our options ahead to report them to the powers-that-be ;). D. El 16/03/2012 17:54, Scott Ferguson escribió:</body>
  </mail>
  <mail>
    <header>[Resin-interest] 5128   concurrence of resin?</header>
    <date>Thu Mar 22 04:37:35 CET 2012</date>
    <body>I do a test for concurrence of resin, and my conclusion is right? Tks for answer. Test the resin in the number of concurrent, even up to 5128 Test environment: the server side: OS: I machine, 32-bit os, 3g memory, 1.8g dual-core CPU resin:-Xmx1400m-Xss64k (set to minimum, in order to occupy as little memory) client: the loop to create 7000 threads, each cycle access resin100 Test results: resin console to see the number of threads in the Thread pool, Summary: If os, memory, cpu is ideal, on the resin itself, the maximum Problem: the error rate is high (7000 threads, each of 100 req thread pool maximum value of 5128, the error rate of 42%; (1000 threads, each 100 req thread pool max 388, the error rate of 15% ); In summary, it should be said 5k multiple concurrent ideal state, in real environment, it may be a few hundred more than almost? My test code is as follows: @Override url = new URL(" http://ip:8080/Project1/test.jsp" if(!"".equals(ss.trim())) System.out.println("request  --" + id + "--  url end.take " + (System.currentTimeMillis() - s) + "ms success="+Test1.success+" fail="+Test1.fail+"</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 5128   concurrence of resin?</header>
    <date>Fri Mar 23 18:11:56 CET 2012</date>
    <body>I do a test for concurrence of resin, and my conclusion is right? Tks for answer. Test the resin in the number of concurrent, even up to 5128 Test environment: the server side: OS: I machine, 32-bit os, 3g memory, 1.8g dual-core CPU resin:-Xmx1400m-Xss64k (set to minimum, in order to occupy as little memory) client: the loop to create 7000 threads, each cycle access resin100 Test results: resin console to see the number of threads in the Thread pool, Summary: If os, memory, cpu is ideal, on the resin itself, the maximum Problem: the error rate is high (7000 threads, each of 100 req thread pool maximum value of 5128, the error rate of 42%; (1000 threads, each 100 req thread pool max 388, the error rate of 15% ); In summary, it should be said 5k multiple concurrent ideal state, in real environment, it may be a few hundred more than almost? Well, that kind of measurement is a bit tricky. 1. You do want to distinguish between connection errors and other kinds of request errors. If there's a large spike of connections (like in your test case), refusing connections can be a good thing, to reduce the number of threads in the JDK. If you start getting internal errors, it's a problem. 2. Spikes are different from steady-state load. We just tested Resin for high loads and had 100,000 req/sec and 10,000 connections/sec (1:10 keepalive.) Since Resin does increase the thread pool and accept pool for the connections, it's possible to see a higher rate after a bit of warmup. That warmup would be even more true for a full application that has caches, etc. that need filling. 3. active vs keepalive vs async/comet vs websocket makes "concurrent connections" count more complicated. 5000 active threads is a lot and if those were actually doing CPU calculations, it would be inefficient, since you only have 8-16 (or whatever) cores. Keepalive connections or an async/comet idle thread or an idle websocket connection are also concurrent connections, but they're not active most of the time. That total tcp-socket count matters, too. And you might want that number to be much higher, like 10,000 or 25,000 or more (for example a chat or twitter server.) And even the active threads can be blocking, for example waiting on databases. In a perfect world, you'd want about the same number of CPU-active threads as you have cores. Your test is a good start, and an important measurement. I'm just giving a few suggestions of related issues to also think about. -- Scott My test code is as follows: @Override url = new URL(" http://ip:8080/Project1/test.jsp" if(!"".equals(ss.trim())) System.out.println("request  --" + id + "--  url end.take " + (System.currentTimeMillis() - s) + "ms success="+Test1.success+" fail="+Test1.fail+"</body>
  </mail>
  <mail>
    <header>[Resin-interest] Questions about webapp config</header>
    <date>Thu Mar 15 04:03:46 CET 2012</date>
    <body>I realize this is not strictly a resin question, but I'm hoping you guys can help me anyway. I want to map requests like "/main.css" or "/foo/bar/baz.js" or "/foo.jpg" directly to files under the root of my webapp, and other requests (including "/" or "" or "/foo/bar.do") to a servlet. What's the right combination of mappings in resin.xml and web.xml? Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Questions about webapp config</header>
    <date>Thu Mar 15 04:26:34 CET 2012</date>
    <body>I think I answered my own question. At least, I was able to put in explicit mappings for *.css and the rest to point to resin-file. I did this in web.xml, which I don't like because it exposes knowledge of the servlet container to my app, but it'll do for now. The alternative is to put it in resin.xml, which then means the servlet container has to be specifically configured to allow my app to work. It's hard to keep the two independent. Still working on mapping /. -- Rick http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Questions about webapp config</header>
    <date>Thu Mar 15 08:18:28 CET 2012</date>
    <body>Hi Rick, AFAIK, there is no standard name for the "file servlet" so that simple way is a no-no. One alternative container-independent way even though a tad more complex would be to use something like UrlRewriteFilter to forward requests appropriately. It allows fine grained control and it's container independent so... For example, mapping just / is as simple as using ^/$ as "catch expression". S! D. El 15/03/2012 4:25, Rick Mann escribió: ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) Web Services Centre for Information and Technology Balearic Islands University (SPAIN) -------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JMS queue in database</header>
    <date>Mon Mar 12 21:11:58 CET 2012</date>
    <body>Seems that the syntax is however it is not implemented? ----- Original Message ----- Subject: [Resin-interest] JSM queue in database Date: Mon, 12 Mar 2012 20:52:33 +0100 How can I use a DataSource (or simply a JDBC accessible SQL database) as the storage for the Resin JMS Queue implementation? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JMS queue in database</header>
    <date>Mon Mar 12 23:10:04 CET 2012</date>
    <body>Or &amp;lt;jms:JdbcQueue .../&amp;gt;, although it was backed out for 4.0. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] JSM queue in database</header>
    <date>Mon Mar 12 20:53:28 CET 2012</date>
    <body>How can I use a DataSource (or simply a JDBC accessible SQL database) as the storage for the Resin JMS Queue implementation? --</body>
  </mail>
  <mail>
    <header>[Resin-interest] HTTP header size</header>
    <date>Mon Mar 12 13:57:49 CET 2012</date>
    <body>Greetings! Is there a way to increase the HTTP header size? What is the default? I'm getting this: ==&amp;gt; log/jvm-default.log &amp;lt;== com.caucho.server.dispatch.BadRequestException: Invalid request: URL or headers are too long Invalid request: URL or headers are too long Thanks Deepak -- This message has been scanned for viruses and dangerous content by MailScanner, and is believed to be clean.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HTTP header size</header>
    <date>Mon Mar 12 16:54:14 CET 2012</date>
    <body>The default is pretty large (8k for the URL, and 16k for the headers.) I'm getting this: ==&amp;gt;  log/jvm-default.log&amp;lt;== com.caucho.server.dispatch.BadRequestException: Invalid request: URL or headers are too long Invalid request: URL or headers are too long There are malicious clients that try to break into the server with long requests. Resin's size limit is designed to protect against that. So if this is an externally visible site, that might be normal. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HTTP header size</header>
    <date>Tue Mar 13 05:32:24 CET 2012</date>
    <body>This is an Internal application not exposed to the external world. We are posting a huge chunk of data. Is there any way to work around this? Thanks Deepak -- This message has been scanned for viruses and dangerous content by MailScanner, and is believed to be clean.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HTTP header size</header>
    <date>Tue Mar 13 21:58:46 CET 2012</date>
    <body>I've added it as a feature request. We already allow url sizes to be configurable. We can do the same for the headers. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] TcpSocketLink: OutofMemory</header>
    <date>Mon Mar 05 21:08:48 CET 2012</date>
    <body>Hi, Just started deploying the debia resin 4.0.26 64 bit package and am getting lots of Resin[app-0,pid=8822]: Shutdown: TcpSocketLink OutOfMemory Resin[app-0,pid=8822]: Shutdown: TcpSocketLink OutOfMemory Resin[app-0,pid=8822]: Shutdown: TcpSocketLink OutOfMemory Resin[app-0,pid=8822]: Shutdown: TcpSocketLink OutOfMemory Resin[app-0,pid=8822]: Shutdown: TcpSocketLink OutOfMemory Resin[app-0,pid=8822]: Shutdown: TcpSocketLink OutOfMemory Resin[app-0,pid=8822]: Shutdown: TcpSocketLink OutOfMemory Resin[app-0,pid=8822]: Shutdown: TcpSocketLink OutOfMemory Resin[app-0,pid=8822]: Shutdown: TcpSocketLink OutOfMemory Resin[app-0,pid=8822]: Shutdown: TcpSocketLink OutOfMemory Resin[app-0,pid=8822]: Shutdown: TcpSocketLink OutOfMemory Resin[app-0,pid=8822]: Shutdown: TcpSocketLink OutOfMemory Resin[app-0,pid=8822] exit reason: MEMORY (exit code=6) Resin[app-0,pid=9732]: Shutdown: starting fail-safe restart from health Resin[app-0,pid=9732]: Shutdown: Restart with health CRITICAL:9 active checks, 0 warning, 1 critical, 0 fatal Resin[app-0,pid=9732] exit reason: HEALTH (exit code=9) What additional info would you require to suggest a solution Rgds Alex ************************************************** To view the terms under which this email is distributed, please go to http://www2.hull.ac.uk/legal/disclaimer.aspx **************************************************</body>
  </mail>
  <mail>
    <header>[Resin-interest] Migration resin 2 to resin 4</header>
    <date>Tue Feb 28 14:24:58 CET 2012</date>
    <body>Hi everyone, I need migrate Resin 2 to 4, and I need know, How I must set the class path ? because in Resin 2 the class path I set in the resin.conf (&amp;lt;classpath id='/www/PUB/ap.web/webapp/WEB-INF/classes' compile='false'/&amp;gt;), but I don't know in Resin 4, or is not clear for me. I have been making manually the deployment, because I don't have the wars file to deployment. Thanks a lot, for your help. Francisco Bohorquez.</body>
  </mail>
  <mail>
    <header>[Resin-interest] getting response header in load balancer access	logs</header>
    <date>Mon Feb 27 23:15:59 CET 2012</date>
    <body>Hi, I'm having trouble getting the Set-Cookie response header into the access logs on our load balancer.  I've tested this exact same access-log configuration locally with an instance of resin that is not behind any load balancer and it seems to work, but this isn't working in our load balanced production environment.  It's currently just logging "-" at the end of the access log line.  Here's what our load balancer's configuration looks like: Any help is greatly appreciated. Thanks, Chris</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] getting response header in load balancer	access logs</header>
    <date>Tue Feb 28 00:00:25 CET 2012</date>
    <body>Hi Chris, I could't reproduce this on version 4.0.25. What version are you running? Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] getting response header in load	balancer	access logs</header>
    <date>Tue Feb 28 00:34:05 CET 2012</date>
    <body>Hi Alex, Thanks for the reply.  I'm using resin-pro-3.1.3.  Again, it seems to work when I hit a single instance of resin that directly serves the requests, but when there's a load balancer involved, the load balancer doesn't log it.  Did you try this access log line on a load balancer running 4.0.25? Thanks, Chris ----- Original Message ----- To: "General Discussion for the Resin application server" Sent: Monday, February 27, 2012 2:59:58 PM Subject: Re: [Resin-interest] getting response header in load balancer  access logs Hi Chris, I could't reproduce this on version 4.0.25. What version are you running? Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] getting response header in load	balancer	access logs</header>
    <date>Tue Feb 28 02:03:58 CET 2012</date>
    <body>Hm... It looks like a bug actually and it affects 4.0 as well. Thanks for reporting, my initial test was incorrect. resin-3.1: http://bugs.caucho.com/view.php?id=4966 resin-4.0: http://bugs.caucho.com/view.php?id=4965 Alex http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin Pro 4.0.23, Amazon AWS and JNI problem</header>
    <date>Sat Feb 25 19:08:17 CET 2012</date>
    <body>I am trying to install Resin pro 4 in Amazon's AWS EC2.  I chose Amazon's version of Linux and OpenJDK 6 when creating the AWS instance. I then tried to build Resin pro 4.0.23 in the instance.  The configure failed because it complained that it could not find JNI.   Has anyone have ideas on how to fix or have resolved this problem? -- ----------------------------------------------------------------- Keith Fetterman                          206-780-5670 Mariner Supply, Inc.                     kfetter...@go2marine.com http://www.go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.23, Amazon AWS and JNI problem</header>
    <date>Mon Feb 27 18:20:16 CET 2012</date>
    <body>There's a package named something like openjdk-6-jdk-devel that you need to install beyond the normal openjdk-6-jdk to get the JNI include files. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Any way to override resin's HttpServletRequest	implementation?</header>
    <date>Wed Feb 22 23:33:22 CET 2012</date>
    <body>For various reasons too annoying to detail, it may be useful for us to change one minor behavior of the HttpServletRequest object.  Is it possible in Resin 3.0.x to substitute a custom implementation of this class for caucho's?  Is it possible in later versions?  A cursory search of google and caucho.com doesn't show up a way but I figured I would ask the source. A response of "No it can't be done" would be just as helpful as "here's how"! thanks, Rachel</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any way to override resin's HttpServletRequest implementation?</header>
    <date>Thu Feb 23 00:28:39 CET 2012</date>
    <body>For various reasons too annoying to detail, it may be useful for us to change one minor behavior of the HttpServletRequest object.  Is it possible in Resin 3.0.x to substitute a custom implementation of this class for caucho's?  Is it possible in later versions?  A cursory http://caucho.com way but I figured I would ask the source. A response of "No it can't be done" would be just as helpful as "here's how"! I've added it as a bug report, but it's not currently possible. With Resin 4.0, adding that capability would be a fairly straightforward change. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any way to override resin's HttpServletRequest	implementation?</header>
    <date>Thu Feb 23 00:42:42 CET 2012</date>
    <body>Thanks.  I will come up with an alternative. Rachel http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any way to override resin's HttpServletRequest	implementation?</header>
    <date>Thu Feb 23 02:28:54 CET 2012</date>
    <body>could you wrap the caucho HttpServletRequest in an HttpServletRequestWrapper, e.g. through a ServletListener? On Wed, Feb 22, 2012 at 12:32 PM, Rachel McConnell &amp;lt;rac...@instructables.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0 Clustering and HTTP MULTIPART</header>
    <date>Wed Feb 22 20:08:40 CET 2012</date>
    <body>Does Resin 4.0 have any notion of handling a situation where a large HTTP MULTIPART POST request has come in (a large file transfer for example), and then when one of the nodes of the cluster that is handling that MULTIPART POST were to go offline, another node would take over with no interruption between the client and the cluster? If not, is there any technology that handles large MULTIPART POSTs in some redundant form like that? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 Clustering and HTTP MULTIPART</header>
    <date>Wed Feb 22 20:17:14 CET 2012</date>
    <body>I'm not sure I understand the question. At the base level, a POST is just a stream of bytes. The multipart/mime handling is just a convenience parser on top so you don't have to parse it yourself. A half-parsed POST (or fully parsed, but not processed) isn't something that can be failed over automatically, because the individual Parts aren't really meaningful. But we also can't failover POSTs at all once the dispatch has begun, because there's no way for Resin to know if the application's POST handling is idempotent, safe to retry. We can failover on a load-balancer/app-server connection failure, or on a 503 response, but not on any other kind of response. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 Clustering and HTTP MULTIPART</header>
    <date>Wed Feb 22 20:27:00 CET 2012</date>
    <body>mailto:resin-interest- Parts because Right,  I had a hard time articulating the problem, but I think you did get the gist of it based on your response. I guess what I was hoping for is if there is a technology that can multicast (wrong word because multicast works on UDP, but I mean _conceptually_ multicast) an HTTP POST to multiple servers simultaneously such that both servers receive the inbound stream and can record it, then possibly only one sends back the response (perhaps both nodes send the response back, but the triad chooses one as the final response and ignores the other).  I am architecting off the cuff here, but was just wondering if something like that or some alternative exists.  Sounds like your answer is a clear "no". But if you could multicast an HTTP POST like that, wouldn't it be conceptually feasible to have an automatic failover?  Or is there something lower level going on that I am completely missing (probably the case). Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender</header>
    <date>Tue Feb 21 19:02:51 CET 2012</date>
    <body>Hi Lately we are seeing increased blocking behaviour from log4j when Resin performs the nightly rollover of logfiles. We’re running Resin Pro 3.1 (license #1013826) in a pre .11 snapshot (resin-pro-3.1.s110225) (due to bug #4349 and a bit of waiting before 3.1.11 was released). Updating to 3.1.12 is planned, but the changelog ( http://www.caucho.com/resin-3.1/changes/changes.xtp is the best I could find?) does not mention any fix for our current problem, so I’m looking for any insights or advise. I'd need to look at the log4j code to understand what it's doing. I don't think that wait() should be related to Resin (other than timing) but I'd need to look at their code to be certain, and I can't think of any logging that would help. (Logging the logging code is tricky :) 3.1.13 should be out next week, by the way. -- Scott We’ve configured resin to perform rollovers of this logfile: In our log4j configuration we log to stdout with: Some time after midnight when Resin performs the rollover, the JVM becomes unresponsive and a stacktrace shows multiple threads hanging, and we have to manually restart (it doesn’t get picked up by the watchdog, and can/will hang for hours). A complete JVM stacktrace is attached to this mail. All threads that are attempting to log are waiting for access to the object blocked by this thread: "http-172.27.80.36:8080-30$1663241944" daemon prio=10 tid=0x00007f8804005800 nid=0x2a40 in Object.wait() [0x00007f87a08ed000] java.lang.Thread.State: WAITING (on object monitor) at java.lang.Object.wait(Native Method) at java.lang.Object.wait(Object.java:485) at org.apache.log4j.AsyncAppender.append(AsyncAppender.java:195) - locked&amp;lt;0x00000005ba882928&amp;gt;  (a java.util.ArrayList) at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251) - locked&amp;lt;0x00000005b8d6db00&amp;gt;  (a org.apache.log4j.AsyncAppender) at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66) at org.apache.log4j.Category.callAppenders(Category.java:206) - locked&amp;lt;0x00000005ba6f9e38&amp;gt;  (a org.apache.log4j.spi.RootLogger) at org.apache.log4j.Category.forcedLog(Category.java:391) at org.apache.log4j.Category.info(Category.java:666) at com.pls.popinhandler.PopinScriptHandler.handleRequest(PopinScriptHandler.java:65) … It seems like something never never calls notifyAll() on the ArrayList, and as a result our world grinds to a halt.. https://issues.apache.org/bugzilla/show_bug.cgi?id=38137#c16 (comment #16) has the same kind of stacktrace as we are seeing, and the comments in #17 does point towards Resin. The last line in logfile resin-web-stdout.log.20120218 (before rotation) has the timestamp 2012-02-18 23:59:59,718. The first line in the new logfile resin-web-stdout.log.20120219 has the timestamp 2012-02-19 01:30:48.878 (here we actually waited to see if the problem corrected itself – but alas) which was when we did a restart. All other logfiles (watchdog, jvm, resin stdout and stderr) does not contain any indication of what is wrong. If it’s not Resin causing the problem, I guess we’ll just have to switch our entire log4j setup to use org.apache.log4j.rolling.RollingFileAppender (part of log4j companions), but we’d prefer to stick with the existing setup. Are there any interesting Resin loggers (and loglevel) that could show something? Any thoughts or possible hints are appriciated. Regards, Jens Dueholm Christensen Rambøll Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender</header>
    <date>Tue Feb 21 21:01:54 CET 2012</date>
    <body>Hi Scott I'd really appreciate it, if you took the time to do that - I (and my coworkers) really quite baffled. We have had an increase of activity and load on the system during the last few weeks (more users and utilization, so nothing alarming), and now this problem has manifested itself, and I've never seen it before. My understanding of what's happening is that the blocking thread is waiting for an empty buffer so it can flush it's own full buffer, but that notification never comes. As the source for log4j shows the thread has called wait() on an ArrayList (the full buffer), and something has gone wrong, but what? We've seen it happen 3 or 4 times during the last week - always a few minutes after midnight when Resin performs its logrotation. In the stacktrace most of the threads that waits for the deadlocked thread is just (as is the deadlocked thread) doing a simple logger.info(String), so it might be possible to reproduce by spawning 10-20 threads that calls logger.info() and then have Resin perform a rollover once a minute. Regards, Jens Dueholm Christensen Rambøll Survey IT ________________________________ From: resin-interest-boun...@caucho.com [resin-interest-boun...@caucho.com] On Behalf Of Scott Ferguson [f...@cauchomail.com] Sent: 21 February 2012 19:01 To: resin-interest@caucho.com Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Hi Lately we are seeing increased blocking behaviour from log4j when Resin performs the nightly rollover of logfiles. We’re running Resin Pro 3.1 (license #1013826) in a pre .11 snapshot (resin-pro-3.1.s110225) (due to bug #4349 and a bit of waiting before 3.1.11 was released). Updating to 3.1.12 is planned, but the changelog ( http://www.caucho.com/resin-3.1/changes/changes.xtp is the best I could find?) does not mention any fix for our current problem, so I’m looking for any insights or advise. I'd need to look at the log4j code to understand what it's doing. I don't think that wait() should be related to Resin (other than timing) but I'd need to look at their code to be certain, and I can't think of any logging that would help. (Logging the logging code is tricky :) 3.1.13 should be out next week, by the way. -- Scott We’ve configured resin to perform rollovers of this logfile: In our log4j configuration we log to stdout with: Some time after midnight when Resin performs the rollover, the JVM becomes unresponsive and a stacktrace shows multiple threads hanging, and we have to manually restart (it doesn’t get picked up by the watchdog, and can/will hang for hours). A complete JVM stacktrace is attached to this mail. All threads that are attempting to log are waiting for access to the object blocked by this thread: "http-172.27.80.36:8080-30$1663241944" daemon prio=10 tid=0x00007f8804005800 nid=0x2a40 in Object.wait() [0x00007f87a08ed000] java.lang.Thread.State: WAITING (on object monitor) at java.lang.Object.wait(Native Method) at java.lang.Object.wait(Object.java:485) at org.apache.log4j.AsyncAppender.append(AsyncAppender.java:195) - locked &amp;lt;0x00000005ba882928&amp;gt; (a java.util.ArrayList) at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251) - locked &amp;lt;0x00000005b8d6db00&amp;gt; (a org.apache.log4j.AsyncAppender) at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66) at org.apache.log4j.Category.callAppenders(Category.java:206) - locked &amp;lt;0x00000005ba6f9e38&amp;gt; (a org.apache.log4j.spi.RootLogger) at org.apache.log4j.Category.forcedLog(Category.java:391) at org.apache.log4j.Category.info(Category.java:666) at com.pls.popinhandler.PopinScriptHandler.handleRequest(PopinScriptHandler.java:65) … It seems like something never never calls notifyAll() on the ArrayList, and as a result our world grinds to a halt.. https://issues.apache.org/bugzilla/show_bug.cgi?id=38137#c16 (comment #16) has the same kind of stacktrace as we are seeing, and the comments in #17 does point towards Resin. The last line in logfile resin-web-stdout.log.20120218 (before rotation) has the timestamp 2012-02-18 23:59:59,718. The first line in the new logfile resin-web-stdout.log.20120219 has the timestamp 2012-02-19 01:30:48.878 (here we actually waited to see if the problem corrected itself – but alas) which was when we did a restart. All other logfiles (watchdog, jvm, resin stdout and stderr) does not contain any indication of what is wrong. If it’s not Resin causing the problem, I guess we’ll just have to switch our entire log4j setup to use org.apache.log4j.rolling.RollingFileAppender (part of log4j companions), but we’d prefer to stick with the existing setup. Are there any interesting Resin loggers (and loglevel) that could show something? Any thoughts or possible hints are appriciated. Regards, Jens Dueholm Christensen Rambøll Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender</header>
    <date>Mon Feb 27 09:17:31 CET 2012</date>
    <body>Bump? :) Regards, Jens Dueholm Christensen Rambøll Survey IT -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jens Dueholm Christensen (JEDC) Sent: Tuesday, February 21, 2012 9:01 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Hi Scott I'd really appreciate it, if you took the time to do that - I (and my coworkers) really quite baffled. We have had an increase of activity and load on the system during the last few weeks (more users and utilization, so nothing alarming), and now this problem has manifested itself, and I've never seen it before. My understanding of what's happening is that the blocking thread is waiting for an empty buffer so it can flush it's own full buffer, but that notification never comes. As the source for log4j shows the thread has called wait() on an ArrayList (the full buffer), and something has gone wrong, but what? We've seen it happen 3 or 4 times during the last week - always a few minutes after midnight when Resin performs its logrotation. In the stacktrace most of the threads that waits for the deadlocked thread is just (as is the deadlocked thread) doing a simple logger.info(String), so it might be possible to reproduce by spawning 10-20 threads that calls logger.info() and then have Resin perform a rollover once a minute. Regards, Jens Dueholm Christensen Rambøll Survey IT ________________________________ From: resin-interest-boun...@caucho.com [resin-interest-boun...@caucho.com] On Behalf Of Scott Ferguson [f...@cauchomail.com] Sent: 21 February 2012 19:01 To: resin-interest@caucho.com Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Hi Lately we are seeing increased blocking behaviour from log4j when Resin performs the nightly rollover of logfiles. We're running Resin Pro 3.1 (license #1013826) in a pre .11 snapshot (resin-pro-3.1.s110225) (due to bug #4349 and a bit of waiting before 3.1.11 was released). Updating to 3.1.12 is planned, but the changelog ( http://www.caucho.com/resin-3.1/changes/changes.xtp is the best I could find?) does not mention any fix for our current problem, so I'm looking for any insights or advise. I'd need to look at the log4j code to understand what it's doing. I don't think that wait() should be related to Resin (other than timing) but I'd need to look at their code to be certain, and I can't think of any logging that would help. (Logging the logging code is tricky :) 3.1.13 should be out next week, by the way. -- Scott We've configured resin to perform rollovers of this logfile: In our log4j configuration we log to stdout with: Some time after midnight when Resin performs the rollover, the JVM becomes unresponsive and a stacktrace shows multiple threads hanging, and we have to manually restart (it doesn't get picked up by the watchdog, and can/will hang for hours). A complete JVM stacktrace is attached to this mail. All threads that are attempting to log are waiting for access to the object blocked by this thread: "http-172.27.80.36:8080-30$1663241944" daemon prio=10 tid=0x00007f8804005800 nid=0x2a40 in Object.wait() [0x00007f87a08ed000] java.lang.Thread.State: WAITING (on object monitor) at java.lang.Object.wait(Native Method) at java.lang.Object.wait(Object.java:485) at org.apache.log4j.AsyncAppender.append(AsyncAppender.java:195) - locked &amp;lt;0x00000005ba882928&amp;gt; (a java.util.ArrayList) at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251) - locked &amp;lt;0x00000005b8d6db00&amp;gt; (a org.apache.log4j.AsyncAppender) at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66) at org.apache.log4j.Category.callAppenders(Category.java:206) - locked &amp;lt;0x00000005ba6f9e38&amp;gt; (a org.apache.log4j.spi.RootLogger) at org.apache.log4j.Category.forcedLog(Category.java:391) at org.apache.log4j.Category.info(Category.java:666) at com.pls.popinhandler.PopinScriptHandler.handleRequest(PopinScriptHandler.java:65) . It seems like something never never calls notifyAll() on the ArrayList, and as a result our world grinds to a halt.. https://issues.apache.org/bugzilla/show_bug.cgi?id=38137#c16 (comment #16) has the same kind of stacktrace as we are seeing, and the comments in #17 does point towards Resin. The last line in logfile resin-web-stdout.log.20120218 (before rotation) has the timestamp 2012-02-18 23:59:59,718. The first line in the new logfile resin-web-stdout.log.20120219 has the timestamp 2012-02-19 01:30:48.878 (here we actually waited to see if the problem corrected itself - but alas) which was when we did a restart. All other logfiles (watchdog, jvm, resin stdout and stderr) does not contain any indication of what is wrong. If it's not Resin causing the problem, I guess we'll just have to switch our entire log4j setup to use org.apache.log4j.rolling.RollingFileAppender (part of log4j companions), but we'd prefer to stick with the existing setup. Are there any interesting Resin loggers (and loglevel) that could show something? Any thoughts or possible hints are appriciated. Regards, Jens Dueholm Christensen Rambøll Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender</header>
    <date>Mon Feb 27 19:33:57 CET 2012</date>
    <body>You may find the discussion in http://glueclue.blogspot.com/2007/01/log4j-asyncappender-is-not-always_31.html useful. Knut Forkalsrud http://www.caucho.com/resin-3.1/changes/changes.xtp is the best I could https://issues.apache.org/bugzilla/show_bug.cgi?id=38137#c16 (comment mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender</header>
    <date>Tue Feb 28 10:28:48 CET 2012</date>
    <body>Hej Knut Thanks for the link. In my somewhat extensive googling I havn’t seen that page before. It seems to confirm what is beeing said on http://www.simonsite.org.uk/#activeasync about fallback to synchronous logging if an exception is thrown. This brings an interesting question to mind: Can Resins logrotation somehow provoke an exception at the moment the logfiles are rotated, that causes log4j to fall back to synchronous logging? Ie. if a buffer is attempted flushed while the backing file is unavailable? Or the backend file is closed and reopened during a flush? The way log4j all of a sudden blocks (and with full buffers that are never flushed) seems to indicate that it has encountered an exception of some kind, so again I’d be happy for any comments from Caucho on this. Oh yes – last night we saw it happen again. Our world ground to a halt with stacktraces showing the exact same as those in my original post. This was after a quiet weekend where we didn’t encounter the problem once. Regards, Jens Dueholm Christensen Rambøll Survey IT From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Knut Forkalsrud Sent: Monday, February 27, 2012 7:33 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender You may find the discussion in http://glueclue.blogspot.com/2007/01/log4j-asyncappender-is-not-always_31.html useful. Knut Forkalsrud On Mon, Feb 27, 2012 at 00:16, Jens Dueholm Christensen (JEDC) mailto:jens.dueh...@r-m.com Bump? :) Regards, Jens Dueholm Christensen Rambøll Survey IT -----Original Message----- From: mailto:resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com On Behalf Of Jens Dueholm Christensen (JEDC) Sent: Tuesday, February 21, 2012 9:01 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Hi Scott I'd really appreciate it, if you took the time to do that - I (and my coworkers) really quite baffled. We have had an increase of activity and load on the system during the last few weeks (more users and utilization, so nothing alarming), and now this problem has manifested itself, and I've never seen it before. My understanding of what's happening is that the blocking thread is waiting for an empty buffer so it can flush it's own full buffer, but that notification never comes. As the source for log4j shows the thread has called wait() on an ArrayList (the full buffer), and something has gone wrong, but what? We've seen it happen 3 or 4 times during the last week - always a few minutes after midnight when Resin performs its logrotation. In the stacktrace most of the threads that waits for the deadlocked thread is just (as is the deadlocked thread) doing a simple http://logger.info http://logger.info have Resin perform a rollover once a minute. Regards, Jens Dueholm Christensen Rambøll Survey IT ________________________________ From: mailto:resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com mailto:f...@cauchomail.com Sent: 21 February 2012 19:01 mailto:resin-interest@caucho.com Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Hi Lately we are seeing increased blocking behaviour from log4j when Resin performs the nightly rollover of logfiles. We're running Resin Pro 3.1 (license #1013826) in a pre .11 snapshot (resin-pro-3.1.s110225) (due to bug #4349 and a bit of waiting before 3.1.11 was released). Updating to 3.1.12 is planned, but the changelog ( http://www.caucho.com/resin-3.1/changes/changes.xtp is the best I could find?) does not mention any fix for our current problem, so I'm looking for any insights or advise. I'd need to look at the log4j code to understand what it's doing. I don't think that wait() should be related to Resin (other than timing) but I'd need to look at their code to be certain, and I can't think of any logging that would help. (Logging the logging code is tricky :) 3.1.13 should be out next week, by the way. -- Scott We've configured resin to perform rollovers of this logfile: In our log4j configuration we log to stdout with: Some time after midnight when Resin performs the rollover, the JVM becomes unresponsive and a stacktrace shows multiple threads hanging, and we have to manually restart (it doesn't get picked up by the watchdog, and can/will hang for hours). A complete JVM stacktrace is attached to this mail. All threads that are attempting to log are waiting for access to the object blocked by this thread: "http-172.27.80.36:8080-30$1663241944" daemon prio=10 tid=0x00007f8804005800 nid=0x2a40 in Object.wait() [0x00007f87a08ed000] java.lang.Thread.State: WAITING (on object monitor) at java.lang.Object.wait(Native Method) at java.lang.Object.wait(Object.java:485) at org.apache.log4j.AsyncAppender.append(AsyncAppender.java:195) - locked &amp;lt;0x00000005ba882928&amp;gt; (a java.util.ArrayList) at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251) - locked &amp;lt;0x00000005b8d6db00&amp;gt; (a org.apache.log4j.AsyncAppender) at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66) at org.apache.log4j.Category.callAppenders(Category.java:206) - locked &amp;lt;0x00000005ba6f9e38&amp;gt; (a org.apache.log4j.spi.RootLogger) at org.apache.log4j.Category.forcedLog(Category.java:391) at http://org.apache.log4j.Category.info at com.pls.popinhandler.PopinScriptHandler.handleRequest(PopinScriptHandler.java:65) . It seems like something never never calls notifyAll() on the ArrayList, and as a result our world grinds to a halt.. https://issues.apache.org/bugzilla/show_bug.cgi?id=38137#c16 (comment #16) has the same kind of stacktrace as we are seeing, and the comments in #17 does point towards Resin. The last line in logfile resin-web-stdout.log.20120218 (before rotation) has the timestamp 2012-02-18 23:59:59,718. The first line in the new logfile resin-web-stdout.log.20120219 has the timestamp 2012-02-19 01:30:48.878 (here we actually waited to see if the problem corrected itself - but alas) which was when we did a restart. All other logfiles (watchdog, jvm, resin stdout and stderr) does not contain any indication of what is wrong. If it's not Resin causing the problem, I guess we'll just have to switch our entire log4j setup to use org.apache.log4j.rolling.RollingFileAppender (part of log4j companions), but we'd prefer to stick with the existing setup. Are there any interesting Resin loggers (and loglevel) that could show something? Any thoughts or possible hints are appriciated. Regards, Jens Dueholm Christensen Rambøll Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender</header>
    <date>Tue Feb 28 17:37:47 CET 2012</date>
    <body>Hej Knut Thanks for the link. In my somewhat extensive googling I havn't seen that page before. It seems to confirm what is beeing said on http://www.simonsite.org.uk/#activeasync about fallback to synchronous logging if an exception is thrown. This brings an interesting question to mind: Can Resins logrotation somehow provoke an exception at the moment the logfiles are rotated, that causes log4j to fall back to synchronous logging? Ie. if a buffer is attempted flushed while the backing file is unavailable? Or the backend file is closed and reopened during a flush? It should just be delayed, presumably for longer than some assumption of log4j. The way log4j all of a sudden blocks (and with full buffers that are never flushed) seems to indicate that it has encountered an exception of some kind, so again I'd be happy for any comments from Caucho on this. Well, it's a log4j issue, so I can only comment after I've debugged their code. (And the upcoming 4.0.26 release means that's still a day or two away.) -- Scott Oh yes -- last night we saw it happen again. Our world ground to a halt with stacktraces showing the exact same as those in my original post. This was after a quiet weekend where we didn't encounter the problem once. Regards, *Jens Dueholm Christensen *Rambøll Survey IT *From:*resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] *On Behalf Of *Knut Forkalsrud *Sent:* Monday, February 27, 2012 7:33 PM *To:* General Discussion for the Resin application server *Subject:* Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender You may find the discussion in http://glueclue.blogspot.com/2007/01/log4j-asyncappender-is-not-always_31.html useful. Knut Forkalsrud On Mon, Feb 27, 2012 at 00:16, Jens Dueholm Christensen (JEDC) mailto:jens.dueh...@r-m.com Bump? :) Regards, Jens Dueholm Christensen Rambøll Survey IT -----Original Message----- From: resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com Christensen (JEDC) Sent: Tuesday, February 21, 2012 9:01 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Hi Scott I'd really appreciate it, if you took the time to do that - I (and my coworkers) really quite baffled. We have had an increase of activity and load on the system during the last few weeks (more users and utilization, so nothing alarming), and now this problem has manifested itself, and I've never seen it before. My understanding of what's happening is that the blocking thread is waiting for an empty buffer so it can flush it's own full buffer, but that notification never comes. As the source for log4j shows the thread has called wait() on an ArrayList (the full buffer), and something has gone wrong, but what? We've seen it happen 3 or 4 times during the last week - always a few minutes after midnight when Resin performs its logrotation. In the stacktrace most of the threads that waits for the deadlocked thread is just (as is the deadlocked thread) doing a simple http://logger.info reproduce by spawning 10-20 threads that calls logger.info http://logger.info minute. Regards, Jens Dueholm Christensen Rambøll Survey IT ________________________________ From: resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com [resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com mailto:f...@cauchomail.com Sent: 21 February 2012 19:01 mailto:resin-interest@caucho.com Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Hi Lately we are seeing increased blocking behaviour from log4j when Resin performs the nightly rollover of logfiles. We're running Resin Pro 3.1 (license #1013826) in a pre .11 snapshot (resin-pro-3.1.s110225) (due to bug #4349 and a bit of waiting before 3.1.11 was released). Updating to 3.1.12 is planned, but the changelog ( http://www.caucho.com/resin-3.1/changes/changes.xtp is the best I could find?) does not mention any fix for our current problem, so I'm looking for any insights or advise. I'd need to look at the log4j code to understand what it's doing. I don't think that wait() should be related to Resin (other than timing) but I'd need to look at their code to be certain, and I can't think of any logging that would help. (Logging the logging code is tricky :) 3.1.13 should be out next week, by the way. -- Scott We've configured resin to perform rollovers of this logfile: In our log4j configuration we log to stdout with: Some time after midnight when Resin performs the rollover, the JVM becomes unresponsive and a stacktrace shows multiple threads hanging, and we have to manually restart (it doesn't get picked up by the watchdog, and can/will hang for hours). A complete JVM stacktrace is attached to this mail. All threads that are attempting to log are waiting for access to the object blocked by this thread: "http-172.27.80.36:8080-30$1663241944" daemon prio=10 tid=0x00007f8804005800 nid=0x2a40 in Object.wait() [0x00007f87a08ed000] java.lang.Thread.State: WAITING (on object monitor) at java.lang.Object.wait(Native Method) at java.lang.Object.wait(Object.java:485) at org.apache.log4j.AsyncAppender.append(AsyncAppender.java:195) - locked &amp;lt;0x00000005ba882928&amp;gt; (a java.util.ArrayList) at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251) - locked &amp;lt;0x00000005b8d6db00&amp;gt; (a org.apache.log4j.AsyncAppender) at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66) at org.apache.log4j.Category.callAppenders(Category.java:206) - locked &amp;lt;0x00000005ba6f9e38&amp;gt; (a org.apache.log4j.spi.RootLogger) at org.apache.log4j.Category.forcedLog(Category.java:391) at org.apache.log4j.Category.info http://org.apache.log4j.Category.info at com.pls.popinhandler.PopinScriptHandler.handleRequest(PopinScriptHandler.java:65) . It seems like something never never calls notifyAll() on the ArrayList, and as a result our world grinds to a halt.. https://issues.apache.org/bugzilla/show_bug.cgi?id=38137#c16 (comment #16) has the same kind of stacktrace as we are seeing, and the comments in #17 does point towards Resin. The last line in logfile resin-web-stdout.log.20120218 (before rotation) has the timestamp 2012-02-18 23:59:59,718. The first line in the new logfile resin-web-stdout.log.20120219 has the timestamp 2012-02-19 01:30:48.878 (here we actually waited to see if the problem corrected itself - but alas) which was when we did a restart. All other logfiles (watchdog, jvm, resin stdout and stderr) does not contain any indication of what is wrong. If it's not Resin causing the problem, I guess we'll just have to switch our entire log4j setup to use org.apache.log4j.rolling.RollingFileAppender (part of log4j companions), but we'd prefer to stick with the existing setup. Are there any interesting Resin loggers (and loglevel) that could show something? Any thoughts or possible hints are appriciated. Regards, Jens Dueholm Christensen Rambøll Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender</header>
    <date>Thu Mar 01 19:00:45 CET 2012</date>
    <body>Increase your thread-max for now. The 4.0.26 thread redesign will avoid this problem. Basically, the log rollover is asking for a new thread at the same time as you're hitting thread-max, so it's getting stuck. -- Scott Hej Knut Thanks for the link. In my somewhat extensive googling I havn't seen that page before. It seems to confirm what is beeing said on http://www.simonsite.org.uk/#activeasync about fallback to synchronous logging if an exception is thrown. This brings an interesting question to mind: Can Resins logrotation somehow provoke an exception at the moment the logfiles are rotated, that causes log4j to fall back to synchronous logging? Ie. if a buffer is attempted flushed while the backing file is unavailable? Or the backend file is closed and reopened during a flush? It should just be delayed, presumably for longer than some assumption of log4j. The way log4j all of a sudden blocks (and with full buffers that are never flushed) seems to indicate that it has encountered an exception of some kind, so again I'd be happy for any comments from Caucho on this. Well, it's a log4j issue, so I can only comment after I've debugged their code. (And the upcoming 4.0.26 release means that's still a day or two away.) -- Scott Oh yes -- last night we saw it happen again. Our world ground to a halt with stacktraces showing the exact same as those in my original post. This was after a quiet weekend where we didn't encounter the problem once. Regards, *Jens Dueholm Christensen *Rambøll Survey IT *From:*resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] *On Behalf Of *Knut Forkalsrud *Sent:* Monday, February 27, 2012 7:33 PM *To:* General Discussion for the Resin application server *Subject:* Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender You may find the discussion in http://glueclue.blogspot.com/2007/01/log4j-asyncappender-is-not-always_31.html useful. Knut Forkalsrud On Mon, Feb 27, 2012 at 00:16, Jens Dueholm Christensen (JEDC) mailto:jens.dueh...@r-m.com Bump? :) Regards, Jens Dueholm Christensen Rambøll Survey IT -----Original Message----- From: resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com Christensen (JEDC) Sent: Tuesday, February 21, 2012 9:01 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Hi Scott I'd really appreciate it, if you took the time to do that - I (and my coworkers) really quite baffled. We have had an increase of activity and load on the system during the last few weeks (more users and utilization, so nothing alarming), and now this problem has manifested itself, and I've never seen it before. My understanding of what's happening is that the blocking thread is waiting for an empty buffer so it can flush it's own full buffer, but that notification never comes. As the source for log4j shows the thread has called wait() on an ArrayList (the full buffer), and something has gone wrong, but what? We've seen it happen 3 or 4 times during the last week - always a few minutes after midnight when Resin performs its logrotation. In the stacktrace most of the threads that waits for the deadlocked thread is just (as is the deadlocked thread) doing a simple http://logger.info reproduce by spawning 10-20 threads that calls logger.info http://logger.info minute. Regards, Jens Dueholm Christensen Rambøll Survey IT ________________________________ From: resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com [resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com mailto:f...@cauchomail.com Sent: 21 February 2012 19:01 mailto:resin-interest@caucho.com Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Hi Lately we are seeing increased blocking behaviour from log4j when Resin performs the nightly rollover of logfiles. We're running Resin Pro 3.1 (license #1013826) in a pre .11 snapshot (resin-pro-3.1.s110225) (due to bug #4349 and a bit of waiting before 3.1.11 was released). Updating to 3.1.12 is planned, but the changelog ( http://www.caucho.com/resin-3.1/changes/changes.xtp is the best I could find?) does not mention any fix for our current problem, so I'm looking for any insights or advise. I'd need to look at the log4j code to understand what it's doing. I don't think that wait() should be related to Resin (other than timing) but I'd need to look at their code to be certain, and I can't think of any logging that would help. (Logging the logging code is tricky :) 3.1.13 should be out next week, by the way. -- Scott We've configured resin to perform rollovers of this logfile: In our log4j configuration we log to stdout with: Some time after midnight when Resin performs the rollover, the JVM becomes unresponsive and a stacktrace shows multiple threads hanging, and we have to manually restart (it doesn't get picked up by the watchdog, and can/will hang for hours). A complete JVM stacktrace is attached to this mail. All threads that are attempting to log are waiting for access to the object blocked by this thread: "http-172.27.80.36:8080-30$1663241944" daemon prio=10 tid=0x00007f8804005800 nid=0x2a40 in Object.wait() [0x00007f87a08ed000] java.lang.Thread.State: WAITING (on object monitor) at java.lang.Object.wait(Native Method) at java.lang.Object.wait(Object.java:485) at org.apache.log4j.AsyncAppender.append(AsyncAppender.java:195) - locked &amp;lt;0x00000005ba882928&amp;gt; (a java.util.ArrayList) at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251) - locked &amp;lt;0x00000005b8d6db00&amp;gt; (a org.apache.log4j.AsyncAppender) at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66) at org.apache.log4j.Category.callAppenders(Category.java:206) - locked &amp;lt;0x00000005ba6f9e38&amp;gt; (a org.apache.log4j.spi.RootLogger) at org.apache.log4j.Category.forcedLog(Category.java:391) at org.apache.log4j.Category.info http://org.apache.log4j.Category.info at com.pls.popinhandler.PopinScriptHandler.handleRequest(PopinScriptHandler.java:65) . It seems like something never never calls notifyAll() on the ArrayList, and as a result our world grinds to a halt.. https://issues.apache.org/bugzilla/show_bug.cgi?id=38137#c16 (comment #16) has the same kind of stacktrace as we are seeing, and the comments in #17 does point towards Resin. The last line in logfile resin-web-stdout.log.20120218 (before rotation) has the timestamp 2012-02-18 23:59:59,718. The first line in the new logfile resin-web-stdout.log.20120219 has the timestamp 2012-02-19 01:30:48.878 (here we actually waited to see if the problem corrected itself - but alas) which was when we did a restart. All other logfiles (watchdog, jvm, resin stdout and stderr) does not contain any indication of what is wrong. If it's not Resin causing the problem, I guess we'll just have to switch our entire log4j setup to use org.apache.log4j.rolling.RollingFileAppender (part of log4j companions), but we'd prefer to stick with the existing setup. Are there any interesting Resin loggers (and loglevel) that could show something? Any thoughts or possible hints are appriciated. Regards, Jens Dueholm Christensen Rambøll Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender</header>
    <date>Fri Mar 02 10:11:52 CET 2012</date>
    <body>Hi Scott Thanks for that suggestion. However I'm a bit confused about what thread-max to change - our resin.conf looks like this: ... The documentation is IMO not quite clear on how the "thread-pool thread-max" is connected to a "server-default thread-max", so a reccomendation would be appriciated. Regards, Jens Dueholm Christensen Rambøll Survey IT From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Thursday, March 01, 2012 7:00 PM To: resin-interest@caucho.com Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Increase your thread-max for now. The 4.0.26 thread redesign will avoid this problem. Basically, the log rollover is asking for a new thread at the same time as you're hitting thread-max, so it's getting stuck. -- Scott Hej Knut Thanks for the link. In my somewhat extensive googling I havn't seen that page before. It seems to confirm what is beeing said on http://www.simonsite.org.uk/#activeasync about fallback to synchronous logging if an exception is thrown. This brings an interesting question to mind: Can Resins logrotation somehow provoke an exception at the moment the logfiles are rotated, that causes log4j to fall back to synchronous logging? Ie. if a buffer is attempted flushed while the backing file is unavailable? Or the backend file is closed and reopened during a flush? It should just be delayed, presumably for longer than some assumption of log4j. The way log4j all of a sudden blocks (and with full buffers that are never flushed) seems to indicate that it has encountered an exception of some kind, so again I'd be happy for any comments from Caucho on this. Well, it's a log4j issue, so I can only comment after I've debugged their code. (And the upcoming 4.0.26 release means that's still a day or two away.) -- Scott Oh yes - last night we saw it happen again. Our world ground to a halt with stacktraces showing the exact same as those in my original post. This was after a quiet weekend where we didn't encounter the problem once. Regards, Jens Dueholm Christensen Rambøll Survey IT From: mailto:resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Knut Forkalsrud Sent: Monday, February 27, 2012 7:33 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender You may find the discussion in http://glueclue.blogspot.com/2007/01/log4j-asyncappender-is-not-always_31.html useful. Knut Forkalsrud On Mon, Feb 27, 2012 at 00:16, Jens Dueholm Christensen (JEDC) mailto:jens.dueh...@r-m.com Bump? :) Regards, Jens Dueholm Christensen Rambøll Survey IT -----Original Message----- From: mailto:resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com On Behalf Of Jens Dueholm Christensen (JEDC) Sent: Tuesday, February 21, 2012 9:01 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Hi Scott I'd really appreciate it, if you took the time to do that - I (and my coworkers) really quite baffled. We have had an increase of activity and load on the system during the last few weeks (more users and utilization, so nothing alarming), and now this problem has manifested itself, and I've never seen it before. My understanding of what's happening is that the blocking thread is waiting for an empty buffer so it can flush it's own full buffer, but that notification never comes. As the source for log4j shows the thread has called wait() on an ArrayList (the full buffer), and something has gone wrong, but what? We've seen it happen 3 or 4 times during the last week - always a few minutes after midnight when Resin performs its logrotation. In the stacktrace most of the threads that waits for the deadlocked thread is just (as is the deadlocked thread) doing a simple http://logger.info http://logger.info have Resin perform a rollover once a minute. Regards, Jens Dueholm Christensen Rambøll Survey IT ________________________________ From: mailto:resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com mailto:f...@cauchomail.com Sent: 21 February 2012 19:01 mailto:resin-interest@caucho.com Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Hi Lately we are seeing increased blocking behaviour from log4j when Resin performs the nightly rollover of logfiles. We're running Resin Pro 3.1 (license #1013826) in a pre .11 snapshot (resin-pro-3.1.s110225) (due to bug #4349 and a bit of waiting before 3.1.11 was released). Updating to 3.1.12 is planned, but the changelog ( http://www.caucho.com/resin-3.1/changes/changes.xtp is the best I could find?) does not mention any fix for our current problem, so I'm looking for any insights or advise. I'd need to look at the log4j code to understand what it's doing. I don't think that wait() should be related to Resin (other than timing) but I'd need to look at their code to be certain, and I can't think of any logging that would help. (Logging the logging code is tricky :) 3.1.13 should be out next week, by the way. -- Scott We've configured resin to perform rollovers of this logfile: In our log4j configuration we log to stdout with: Some time after midnight when Resin performs the rollover, the JVM becomes unresponsive and a stacktrace shows multiple threads hanging, and we have to manually restart (it doesn't get picked up by the watchdog, and can/will hang for hours). A complete JVM stacktrace is attached to this mail. All threads that are attempting to log are waiting for access to the object blocked by this thread: "http-172.27.80.36:8080-30$1663241944" daemon prio=10 tid=0x00007f8804005800 nid=0x2a40 in Object.wait() [0x00007f87a08ed000] java.lang.Thread.State: WAITING (on object monitor) at java.lang.Object.wait(Native Method) at java.lang.Object.wait(Object.java:485) at org.apache.log4j.AsyncAppender.append(AsyncAppender.java:195) - locked &amp;lt;0x00000005ba882928&amp;gt; (a java.util.ArrayList) at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251) - locked &amp;lt;0x00000005b8d6db00&amp;gt; (a org.apache.log4j.AsyncAppender) at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66) at org.apache.log4j.Category.callAppenders(Category.java:206) - locked &amp;lt;0x00000005ba6f9e38&amp;gt; (a org.apache.log4j.spi.RootLogger) at org.apache.log4j.Category.forcedLog(Category.java:391) at http://org.apache.log4j.Category.info at com.pls.popinhandler.PopinScriptHandler.handleRequest(PopinScriptHandler.java:65) . It seems like something never never calls notifyAll() on the ArrayList, and as a result our world grinds to a halt.. https://issues.apache.org/bugzilla/show_bug.cgi?id=38137#c16 (comment #16) has the same kind of stacktrace as we are seeing, and the comments in #17 does point towards Resin. The last line in logfile resin-web-stdout.log.20120218 (before rotation) has the timestamp 2012-02-18 23:59:59,718. The first line in the new logfile resin-web-stdout.log.20120219 has the timestamp 2012-02-19 01:30:48.878 (here we actually waited to see if the problem corrected itself - but alas) which was when we did a restart. All other logfiles (watchdog, jvm, resin stdout and stderr) does not contain any indication of what is wrong. If it's not Resin causing the problem, I guess we'll just have to switch our entire log4j setup to use org.apache.log4j.rolling.RollingFileAppender (part of log4j companions), but we'd prefer to stick with the existing setup. Are there any interesting Resin loggers (and loglevel) that could show something? Any thoughts or possible hints are appriciated. Regards, Jens Dueholm Christensen Rambøll Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender</header>
    <date>Tue Mar 13 09:09:08 CET 2012</date>
    <body>In case others are interested: I raised the thread-pool thread-max to 300 and the server-default thread-max to 1024. I'm still interested in hearing if and how they are connected, but for now we've hadn't seen the freeze for over a week. Regards, Jens Dueholm Christensen Rambøll Survey IT From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jens Dueholm Christensen (JEDC) Sent: Friday, March 02, 2012 10:11 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Hi Scott Thanks for that suggestion. However I'm a bit confused about what thread-max to change - our resin.conf looks like this: ... The documentation is IMO not quite clear on how the "thread-pool thread-max" is connected to a "server-default thread-max", so a reccomendation would be appriciated. Regards, Jens Dueholm Christensen Rambøll Survey IT From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Thursday, March 01, 2012 7:00 PM To: resin-interest@caucho.com Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Increase your thread-max for now. The 4.0.26 thread redesign will avoid this problem. Basically, the log rollover is asking for a new thread at the same time as you're hitting thread-max, so it's getting stuck. -- Scott Hej Knut Thanks for the link. In my somewhat extensive googling I havn't seen that page before. It seems to confirm what is beeing said on http://www.simonsite.org.uk/#activeasync about fallback to synchronous logging if an exception is thrown. This brings an interesting question to mind: Can Resins logrotation somehow provoke an exception at the moment the logfiles are rotated, that causes log4j to fall back to synchronous logging? Ie. if a buffer is attempted flushed while the backing file is unavailable? Or the backend file is closed and reopened during a flush? It should just be delayed, presumably for longer than some assumption of log4j. The way log4j all of a sudden blocks (and with full buffers that are never flushed) seems to indicate that it has encountered an exception of some kind, so again I'd be happy for any comments from Caucho on this. Well, it's a log4j issue, so I can only comment after I've debugged their code. (And the upcoming 4.0.26 release means that's still a day or two away.) -- Scott Oh yes - last night we saw it happen again. Our world ground to a halt with stacktraces showing the exact same as those in my original post. This was after a quiet weekend where we didn't encounter the problem once. Regards, Jens Dueholm Christensen Rambøll Survey IT From: mailto:resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Knut Forkalsrud Sent: Monday, February 27, 2012 7:33 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender You may find the discussion in http://glueclue.blogspot.com/2007/01/log4j-asyncappender-is-not-always_31.html useful. Knut Forkalsrud On Mon, Feb 27, 2012 at 00:16, Jens Dueholm Christensen (JEDC) mailto:jens.dueh...@r-m.com Bump? :) Regards, Jens Dueholm Christensen Rambøll Survey IT -----Original Message----- From: mailto:resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com On Behalf Of Jens Dueholm Christensen (JEDC) Sent: Tuesday, February 21, 2012 9:01 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Hi Scott I'd really appreciate it, if you took the time to do that - I (and my coworkers) really quite baffled. We have had an increase of activity and load on the system during the last few weeks (more users and utilization, so nothing alarming), and now this problem has manifested itself, and I've never seen it before. My understanding of what's happening is that the blocking thread is waiting for an empty buffer so it can flush it's own full buffer, but that notification never comes. As the source for log4j shows the thread has called wait() on an ArrayList (the full buffer), and something has gone wrong, but what? We've seen it happen 3 or 4 times during the last week - always a few minutes after midnight when Resin performs its logrotation. In the stacktrace most of the threads that waits for the deadlocked thread is just (as is the deadlocked thread) doing a simple http://logger.info http://logger.info have Resin perform a rollover once a minute. Regards, Jens Dueholm Christensen Rambøll Survey IT ________________________________ From: mailto:resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com mailto:f...@cauchomail.com Sent: 21 February 2012 19:01 mailto:resin-interest@caucho.com Subject: Re: [Resin-interest] Problems with rollover of logfile with log4j 1.2.16 and AsyncAppender Hi Lately we are seeing increased blocking behaviour from log4j when Resin performs the nightly rollover of logfiles. We're running Resin Pro 3.1 (license #1013826) in a pre .11 snapshot (resin-pro-3.1.s110225) (due to bug #4349 and a bit of waiting before 3.1.11 was released). Updating to 3.1.12 is planned, but the changelog ( http://www.caucho.com/resin-3.1/changes/changes.xtp is the best I could find?) does not mention any fix for our current problem, so I'm looking for any insights or advise. I'd need to look at the log4j code to understand what it's doing. I don't think that wait() should be related to Resin (other than timing) but I'd need to look at their code to be certain, and I can't think of any logging that would help. (Logging the logging code is tricky :) 3.1.13 should be out next week, by the way. -- Scott We've configured resin to perform rollovers of this logfile: In our log4j configuration we log to stdout with: Some time after midnight when Resin performs the rollover, the JVM becomes unresponsive and a stacktrace shows multiple threads hanging, and we have to manually restart (it doesn't get picked up by the watchdog, and can/will hang for hours). A complete JVM stacktrace is attached to this mail. All threads that are attempting to log are waiting for access to the object blocked by this thread: "http-172.27.80.36:8080-30$1663241944" daemon prio=10 tid=0x00007f8804005800 nid=0x2a40 in Object.wait() [0x00007f87a08ed000] java.lang.Thread.State: WAITING (on object monitor) at java.lang.Object.wait(Native Method) at java.lang.Object.wait(Object.java:485) at org.apache.log4j.AsyncAppender.append(AsyncAppender.java:195) - locked &amp;lt;0x00000005ba882928&amp;gt; (a java.util.ArrayList) at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251) - locked &amp;lt;0x00000005b8d6db00&amp;gt; (a org.apache.log4j.AsyncAppender) at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66) at org.apache.log4j.Category.callAppenders(Category.java:206) - locked &amp;lt;0x00000005ba6f9e38&amp;gt; (a org.apache.log4j.spi.RootLogger) at org.apache.log4j.Category.forcedLog(Category.java:391) at http://org.apache.log4j.Category.info at com.pls.popinhandler.PopinScriptHandler.handleRequest(PopinScriptHandler.java:65) . It seems like something never never calls notifyAll() on the ArrayList, and as a result our world grinds to a halt.. https://issues.apache.org/bugzilla/show_bug.cgi?id=38137#c16 (comment #16) has the same kind of stacktrace as we are seeing, and the comments in #17 does point towards Resin. The last line in logfile resin-web-stdout.log.20120218 (before rotation) has the timestamp 2012-02-18 23:59:59,718. The first line in the new logfile resin-web-stdout.log.20120219 has the timestamp 2012-02-19 01:30:48.878 (here we actually waited to see if the problem corrected itself - but alas) which was when we did a restart. All other logfiles (watchdog, jvm, resin stdout and stderr) does not contain any indication of what is wrong. If it's not Resin causing the problem, I guess we'll just have to switch our entire log4j setup to use org.apache.log4j.rolling.RollingFileAppender (part of log4j companions), but we'd prefer to stick with the existing setup. Are there any interesting Resin loggers (and loglevel) that could show something? Any thoughts or possible hints are appriciated. Regards, Jens Dueholm Christensen Rambøll Survey IT</body>
  </mail>
  <mail>
    <header>[Resin-interest] JSP pages wont compile :	java.lang.RuntimeException: bad scheme in...</header>
    <date>Tue Feb 21 15:09:52 CET 2012</date>
    <body>All of a sudden I have jsp pages that will not compile with the below error. The issue does not show up on my test server.  Nothing much has happened on the deployment server. It looks like it is in the process of loading all the tlds.  None of my very few tlds say anything about facebook.  Where else could it be trying to read the scheme from? Help! Resin version 3.0.26 Thanks, Sean Moore s...@homegauge.com java.lang.RuntimeException: bad scheme in `https:%2F%2Fwww.facebook.com%2Fmedia%2Fset%2F?set=a.153069261371130.27793.100000041703265&amp;amp;type=1.webhistory' at com.caucho.vfs.HttpPath.schemeWalk(HttpPath.java:156) at com.caucho.vfs.Path.lookupImpl(Path.java:183) at com.caucho.vfs.Path.lookup(Path.java:121) at com.caucho.vfs.Path.lookup(Path.java:92) at com.caucho.config.types.FileSetType.getPaths(FileSetType.java:152) at com.caucho.config.types.FileSetType.getPaths(FileSetType.java:152) at com.caucho.config.types.FileSetType.getPaths(FileSetType.java:137) at com.caucho.config.types.FileSetType.getPaths(FileSetType.java:124) at com.caucho.jsp.TldManager.loadAllTlds(TldManager.java:302) at com.caucho.jsp.TldManager.init(TldManager.java:202) at com.caucho.jsp.TldManager.parseTld(TldManager.java:434) at com.caucho.jsp.TaglibManager.readTaglib(TaglibManager.java:225) at com.caucho.jsp.TaglibManager.getTaglib(TaglibManager.java:172) at com.caucho.jsp.ParseTagManager.addTaglib(ParseTagManager.java:258) at com.caucho.jsp.JspParser.processTaglib(JspParser.java:1655) at com.caucho.jsp.JspParser.processTaglibDirective(JspParser.java:1629) at com.caucho.jsp.JspParser.parseDirective(JspParser.java:1159) at com.caucho.jsp.JspParser.parseScriptlet(JspParser.java:1033) at com.caucho.jsp.JspParser.parseNode(JspParser.java:417) at com.caucho.jsp.JspParser.parseJsp(JspParser.java:328) at com.caucho.jsp.JspParser.parse(JspParser.java:252) at com.caucho.jsp.JspCompilerInstance.generate(JspCompilerInstance.java:466) at com.caucho.jsp.JspCompilerInstance.compile(JspCompilerInstance.java:373) at com.caucho.jsp.JspManager.compile(JspManager.java:233) at com.caucho.jsp.JspManager.createPage(JspManager.java:177) at com.caucho.jsp.JspManager.createPage(JspManager.java:157) at com.caucho.jsp.PageManager.getPage(PageManager.java:248) at com.caucho.jsp.PageManager.getPage(PageManager.java:166) at com.caucho.jsp.QServlet.getSubPage(QServlet.java:292) at com.caucho.jsp.QServlet.getPage(QServlet.java:210)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSP pages wont compile :	java.lang.RuntimeException: bad scheme in...</header>
    <date>Tue Feb 21 18:05:20 CET 2012</date>
    <body>It should be scanning the WEB-INF directories. That scanning can be changed in the resin-web.xml with the tld-file-set or tld-dir directive. Do you know how those are set? Hmm. Checking the code, though. If you have a file under WEB-INF which is _named_ like a URL (for example in WEB-INF/tmp), you might have this problem. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSP pages wont compile	:	java.lang.RuntimeException: bad scheme in...</header>
    <date>Tue Feb 21 18:15:05 CET 2012</date>
    <body>So yes that was my problem.  Customers can upload profile pics and one of the pictures was named http://www.facebook.com/morestuff I store a copy of the picture file before resizing it in WEB-INF/tmp I will look at changing the tld-file-set and that could even increase my startup speed if it is scanning all of those sub folders. Thanks for the response. -Sean ---------- Original Message ---------- TO:        resin-interest@caucho.com CC: DATE:      Tue, 21 Feb 2012 09:04:56 -0800 SUBJECT:   Re: [Resin-interest] JSP pages wont compile : java.lang.RuntimeException: bad scheme in... It should be scanning the WEB-INF directories. That scanning can be changed in the resin-web.xml with the tld-file-set or tld-dir directive. Do you know how those are set? Hmm. Checking the code, though. If you have a file under WEB-INF which is _named_ like a URL (for example in WEB-INF/tmp), you might have this problem. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] from Eclipse to IntelliJ</header>
    <date>Sun Feb 19 20:57:15 CET 2012</date>
    <body>Hello I would like to share here what seems to be a very important point for Resin developers. I have been using Eclipse to write Resin applications for years now. I use it for Java and also for Flex with Flex Builder from Adobe. But some of you will agree that Eclipse, even if free, is really a pain sometimes. (and rather slow on mac) Last month I tried something else, that would let me work on Mac/Windows for Java and Flex. And I found it. With IntelliJ I could open my Flex and Resin Eclipse projets (not as easy as that, but truely possible), compile and debug Flex application, write and debug java projets including debugging Resin (4.0.13) application serveur. Thing that I never could do with Eclipse. More than that I started also to use it for Php and Javascript which saved me a lot of time. So even if IntelliJ is not free, I think it is really a help for Resin Developers (Resin plugin is integrated and working all right). That's all. Thanks -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] Tried Pro 4.0.25 - had to revert back to Pro 4.0.23 due to "not a valid cluster IP"</header>
    <date>Tue Feb 14 17:04:26 CET 2012</date>
    <body>Just doing the +1 thing ... this open bug stopped us dead as we're in the same situation: http://bugs.caucho.com/bug_view_advanced_page.php?bug_id=4941 Unless there were config changes required - I didn't make any, so if there are I'd like to know please.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tried Pro 4.0.25 - had to revert back to Pro 4.0.23 due to "not a valid cluster IP"</header>
    <date>Wed Feb 15 03:24:07 CET 2012</date>
    <body>http://bugs.caucho.com/bug_view_advanced_page.php?bug_id=4941 Yep. It's one of the bugs that's needed before 4.0.26. Basically, we wanted to make sure people didn't expose the cluster ports by mistake. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] memory and temp-file problem</header>
    <date>Sun Feb 12 15:23:31 CET 2012</date>
    <body>I found my resin 4.0.25 still suffers from terrible memory usage ... sometime over GC , sometimes FULL GC (and then OOM)... My frontend is  wicket (1.4.19) , After running resin just for hours , WEB-INF/tmp/App-filestore grows immensely... It takes minutes to rm -rf the directory... Not only the files generated by wicket , Resin itself also generates terrible BIG file under resin_home/resin-data/app-0/distcache : -rw-rw-r-- 1 smallufo smallufo 30903631872  Feb 12 22:05 data.db -rw-rw-r-- 1 smallufo smallufo    33554432  Feb 12 22:03 mnode.db It takes about 30GB within hours ... It grows and grows , and finally resin hangs ... What's the problem here ? Any way to get rid of it ? Is it related to wicket ? Anyway to limit the size of "data.db"  ? And is it safe to delete it ?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] memory and temp-file problem</header>
    <date>Mon Feb 13 17:56:31 CET 2012</date>
    <body>I found my resin 4.0.25 still suffers from terrible memory usage ... sometime over GC , sometimes FULL GC (and then OOM)... For memory, you should check the /resin-admin or the pdf-report to get a quick view of the main memory problems. My frontend is  wicket (1.4.19) , After running resin just for hours , WEB-INF/tmp/App-filestore grows immensely... It takes minutes to rm -rf the directory... Not only the files generated by wicket , Resin itself also generates terrible BIG file under resin_home/resin-data/app-0/distcache : -rw-rw-r-- 1 smallufo smallufo 30903631872  Feb 12 22:05 data.db -rw-rw-r-- 1 smallufo smallufo    33554432  Feb 12 22:03 mnode.db It takes about 30GB within hours ... It grows and grows , and finally resin hangs ... What's the problem here ? Probably persistent sessions. If you're using persistent sessions and wicket is storing massive sessions and changing them on each operation, it can get large. Although 30G is pretty strange. The data.db is garbage collected, not deleted immediately on session change. Does that sound possible in your configuration? -- Scott Any way to get rid of it ? Is it related to wicket ? Anyway to limit the size of "data.db"  ? And is it safe to delete it ?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] memory and temp-file problem</header>
    <date>Mon Feb 13 18:38:42 CET 2012</date>
    <body>I also noticed a lot of com.caucho.db.block.Block... exceptions like this : (and resin seems running slower and slower ) SessionImpl[aaaxhkKBWCkiL-WwxX3vt,]: can't serialize session java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 at com.caucho.db.block.Block.validateIsIndex(Block.java:150) at com.caucho.db.index.BTree.validateIndex(BTree.java:1723) Lots of same errors  : $ grep -e 'IllegalStateException: block Block' jvm-app-0.log java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 Does it means there's something wrong with 'data.db' ? (resin 4.0.25)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] memory and temp-file problem</header>
    <date>Mon Feb 13 18:51:44 CET 2012</date>
    <body>I also noticed a lot of com.caucho.db.block.Block... exceptions like this : (and resin seems running slower and slower ) SessionImpl[aaaxhkKBWCkiL-WwxX3vt,]: can't serialize session java.lang.IllegalStateException: block Block[Table[data:3],426000003] is not an index code=2 at com.caucho.db.block.Block.validateIsIndex(Block.java:150) at com.caucho.db.index.BTree.validateIndex(BTree.java:1723) Lots of same errors  : $ grep -e 'IllegalStateException: block Block' jvm-app-0.log java.lang.IllegalStateException: block Does it means there's something wrong with 'data.db' ? Thanks. Yes, that would be a db corruption issue. I've filed this at http://bugs.caucho.com/view.php?id=4956 . -- Scott (resin 4.0.25)</body>
  </mail>
  <mail>
    <header>[Resin-interest] com-caucho-netbeans.nbm JEE6</header>
    <date>Fri Feb 10 10:31:25 CET 2012</date>
    <body>Hi. I use resin-4.0.25 with netbeans IDE using "com-caucho-netbeans.nbm" plug-in. Resin explains support JEE6 in http://www.caucho.com/download/ "  Resin is a fast Java EE 6 web profile certified application server.  " but, com-caucho-netbeans.nbm seems only support Java EE5 . How can I create  Java EE6 webapp through com-caucho-netbeans plug-in ? thank you.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin in the last Netcraft Web Server Survey</header>
    <date>Wed Feb 08 15:23:13 CET 2012</date>
    <body>Hi, FYI: http://news.netcraft.com/archives/2012/02/07/february-2012-web-server-survey.html The Resin application server has been experiencing strong growth over the ---- Kevin Decherf - M: +33 681194547 - T: @Kdecherf C0DA 3C9A 0DB6 00C5 3D00 BBF4 A8CE A30C 6B4E BA7A</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin in the last Netcraft Web Server Survey</header>
    <date>Wed Feb 08 19:04:14 CET 2012</date>
    <body>Hi, FYI: http://news.netcraft.com/archives/2012/02/07/february-2012-web-server-survey.html The Resin application server has been experiencing strong growth over the past 12 months; seeing an almost tenfold growth from 480k hostnames in February 2011 to 4.7M or 0.77% of the market in February 2012. Resin is a Java application server from Caucho which is used on a number of the Million Busiest Sites, including Bebo — now recovered from its outage last week. Fantastic! -- Scott ---- Kevin Decherf - M: +33 681194547 - T: @Kdecherf C0DA 3C9A 0DB6 00C5 3D00 BBF4 A8CE A30C 6B4E BA7A</body>
  </mail>
  <mail>
    <header>[Resin-interest] java.util.zip.ZipException: error in opening zip	file</header>
    <date>Tue Feb 07 19:18:33 CET 2012</date>
    <body>We are using resin 3.1.12 and java 6.  When the server is on heavy load, we are getting frequent errors. Number of open files count is still less. But we are seeing these errors. What could be the problem? There are no memory issues. java.util.zip.ZipException: error in opening zip file java.io.FileNotFoundException: /home/myuser/public_html/WEB-INF/web.xml (Too many open files) java.lang.NoClassDefFoundError java.sql.SQLException: Unable to connect to any hosts due to exception: java.net.SocketException: Too many open files ** BEGIN NESTED EXCEPTION ** java.net.SocketException MESSAGE: Too many open files thanks in advance Mani</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.util.zip.ZipException: error in opening	zip file</header>
    <date>Tue Feb 07 19:52:07 CET 2012</date>
    <body>You have too many open files.  Try "man ulimit" and "man lsof". -Knut http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.util.zip.ZipException: error in opening	zip file</header>
    <date>Tue Feb 07 19:57:30 CET 2012</date>
    <body>I checked with lsof -u root | wc -l and for login id and for mysql. All are with in the limits less than 2400 . And, I set the limits too high at 100,000. thanks Mani On Tue, Feb 7, 2012 at 12:51 PM, Knut Forkalsrud &amp;lt;knut-cau...@forkalsrud.org http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.util.zip.ZipException: error in opening	zip file</header>
    <date>Tue Feb 07 21:13:22 CET 2012</date>
    <body>I have these settings in my conf  files for ulimits. vi /etc/security/limits.conf * soft nofiles 1024000 * hard nofiles 1024000 root    soft    nofiles 1024000 root    hard    nofiles 1024000 cat /proc/sys/fs/file-max 2188737 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Dr. Mani Gudavalli http://www.softschools.com 214 636 5824</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.util.zip.ZipException: error in opening zip file</header>
    <date>Tue Feb 07 22:55:10 CET 2012</date>
    <body>I have these settings in my conf  files for ulimits. vi /etc/security/limits.conf * soft nofiles 1024000 * hard nofiles 1024000 root    soft    nofiles 1024000 root    hard    nofiles 1024000 Does the lsof show anything unusual? Like a surprising number of open descriptors to a specific file or socket? -- Scott cat /proc/sys/fs/file-max 2188737 On Tue, Feb 7, 2012 at 12:56 PM, Manidhar gudavalli &amp;lt;mani...@gmail.com mailto:mani...@gmail.com I checked with lsof -u root | wc -l and for login id and for mysql. All are with in the limits less than 2400 . And, I set the limits too high at 100,000. thanks Mani On Tue, Feb 7, 2012 at 12:51 PM, Knut Forkalsrud mailto:knut-cau...@forkalsrud.org You have too many open files.  Try "man ulimit" and "man lsof". -Knut On Tue, Feb 7, 2012 at 10:17, Manidhar gudavalli mailto:mani...@gmail.com We are using resin 3.1.12 and java 6.  When the server is on heavy load, we are getting frequent errors. Number of open files count is still less. But we are seeing these errors. What could be the problem? There are no memory issues. java.util.zip.ZipException: error in opening zip file java.io.FileNotFoundException: /home/myuser/public_html/WEB-INF/web.xml (Too many open files) java.lang.NoClassDefFoundError java.sql.SQLException: Unable to connect to any hosts due to exception: java.net.SocketException: Too many open files ** BEGIN NESTED EXCEPTION ** java.net.SocketException MESSAGE: Too many open files thanks in advance Mani</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.util.zip.ZipException: error in opening	zip file</header>
    <date>Wed Feb 08 04:18:08 CET 2012</date>
    <body>Your code is probably leaking file/socket descriptors somewhere, leaving it to the garbage collector to free them up eventually. There are some good tips on how to hunt down this kind of problem at http://stackoverflow.com/a/4194709/566556 -Knut http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.softschools.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] ThrottleFilter and max-concurrent-requests</header>
    <date>Tue Feb 07 18:40:37 CET 2012</date>
    <body>I have some people abusing my site and I want to turn on the ThrottleFilter. I see that the max-concurrent-requests per IP is 2 which is the HTTP spec limit.  But in some minimal testing I got 503 errors on my home page thru firefox because it looks like some requests are from the style sheet, javascript, ... What about proxy servers? Does any one have some real world use of the ThrottleFilter and a good setting for max-concurrent-requests ? Thanks, Sean Moore</body>
  </mail>
  <mail>
    <header>[Resin-interest] Encoding for	javax.servlet.http.Part.getInputStream()</header>
    <date>Mon Feb 06 14:53:22 CET 2012</date>
    <body>Hi. For multipart String parameters, Resin returns a UTF-8 encoded stream from javax.servlet.http.Part.getInputStream() without regards to request.getCharacterEncoding(). I cannot find whether the UTF-8 encoding is stipulated by the spec, or if this is a Resin bug. Anyone knows...? Reference? Thanks in advance. --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Encoding	for	javax.servlet.http.Part.getInputStream()</header>
    <date>Tue Feb 07 18:46:03 CET 2012</date>
    <body>I'm filing this as a bug. http://bugs.caucho.com/view.php?id=4954 -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Wicket page error if page contains special chars	under OS X</header>
    <date>Sat Feb 04 08:52:52 CET 2012</date>
    <body>The problem seems exists for a long time... And it only occurs in resin + Mac OS X , not Linux For a wicket page that contains special characters , (such as Chinese chars , and sure, it's encoded in UTF8) and jared. It will be un-jared and loaded by resin's classloader , But , these special characters seems cannot be parsed at runtime. tag ... for example : 2012-02-04 12:56:02,348 ERROR wicket.RequestCycle - unexpected exception when handling another exception: Tag '&amp;lt;div style="border: 1px solid #F7941D; background: #FEEFDA; text-align: center; clear: both; height: 75px; position: relative;"&amp;gt;' (line 70, column 1) has a mismatched close tag at '&amp;lt;/body&amp;gt;' (line 237, column 1) It seems resin under OS X cannot correctly parse the stream , maybe the encoding problem... The error occurred in 4.0.19 (maybe earlier ) and the latest 4.0.25. Because the error , I have to develop in linux . Recently , I gave OS X and 4.0.25 another chance , but the problem still exists... The same webapp can be loaded and executed correctly in Linux. I try to unpack the jar , and view the html template , and it is truly encoded in UTF8 , can be correctly displayed in my console (also UTF8 encoded). I try to add '&amp;lt;character-encoding&amp;gt;utf-8&amp;lt;/character-encoding&amp;gt;' in resin-web.xml , or under &amp;lt;cluster&amp;gt; in resin.xml , but still not works.... Environment : $ uname -a Darwin MiniServerLion.local 11.3.0 Darwin Kernel Version 11.3.0: Thu Jan 12 18:47:41 PST 2012; root:xnu-1699.24.23~1/RELEASE_X86_64 x86_64 Mac OS X Lion 10.7.3 wicket 1.4.15</body>
  </mail>
  <mail>
    <header>[Resin-interest] [4.0.25] tremendously increases my server load	when starts-up</header>
    <date>Thu Feb 02 17:13:52 CET 2012</date>
    <body>When I execute 'resinctl start'  , I notice my server almost hangs .... And the server load is very high : $ w 00:07:51 up 46 days,  6:07,  3 users,  load average: 526.31, 298.59, 121.04 USER     TTY      FROM              LOGIN@   IDLE   JCPU   PCPU WHAT smallufo pts/1    destiny          Wed16    6:09   2.91s  1.92s top smallufo pts/2    destiny          Wed22    1.00s  2.67s  0.01s w smallufo pts/3    destiny          Wed23    3:36   7:07   6:56 /usr/java/jdk/bin/java -jar /usr/local/share/resin-4.0.25/lib/resin.jar -root-directory /hom The load peaks to 500 or even higher ! After 5 or more minutes , the load goes down... It does not happen in 4.0.19 !</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [4.0.25] tremendously increases my server load when starts-up</header>
    <date>Thu Feb 02 18:05:54 CET 2012</date>
    <body>When I execute 'resinctl start'  , I notice my server almost hangs .... And the server load is very high : $ w 00:07:51 up 46 days,  6:07,  3 users,  load average: 526.31, 298.59, 121.04 USER     TTY      FROM              LOGIN@   IDLE   JCPU   PCPU WHAT smallufo pts/1    destiny          Wed16    6:09   2.91s  1.92s top smallufo pts/2    destiny          Wed22    1.00s  2.67s  0.01s w smallufo pts/3    destiny          Wed23    3:36   7:07   6:56 /usr/java/jdk/bin/java -jar /usr/local/share/resin-4.0.25/lib/resin.jar -root-directory /hom The load peaks to 500 or even higher ! After 5 or more minutes , the load goes down... Can you get a thread dump? Or better yet, if you have resin-pro, get a "resinctl pdf-report --profile". -- Scott It does not happen in 4.0.19 !</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [4.0.25] tremendously increases my server load when starts-up</header>
    <date>Fri Feb 03 03:54:08 CET 2012</date>
    <body>I cannot operate my server when I start resin 4.0.25 The load is so high that the server almost hangs there... Even a "ls" is so sluggish... It happens even in a clean install (no other webapps installed , just default resin.xml settings) $ uname -a Linux dev 2.6.18-164.6.1.el5 #1 SMP Tue Nov 3 16:18:27 EST 2009 i686 i686 i386 GNU/Linux /var/log/resin $ head watchdog-manager.log 11:09:58 PST) 1.6.0_22-b04, UTF-8, zh mixed mode, Sun Microsystems Inc. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [4.0.25] tremendously increases my server load when starts-up</header>
    <date>Fri Feb 03 04:01:45 CET 2012</date>
    <body>I cannot operate my server when I start resin 4.0.25 The load is so high that the server almost hangs there... Even a "ls" is so sluggish... It happens even in a clean install (no other webapps installed , just default resin.xml settings) It might be related to a JVM bug having to do with the IP addresses. What do you IP addresses look like? Are there any virtual ones. -- Scott $ uname -a Linux dev 2.6.18-164.6.1.el5 #1 SMP Tue Nov 3 16:18:27 EST 2009 i686 i686 i386 GNU/Linux /var/log/resin $ head watchdog-manager.log 11:09:58 PST) 1.6.0_22-b04, UTF-8, zh 32, mixed mode, Sun Microsystems Inc. mailto:f...@caucho.com When I execute 'resinctl start'  , I notice my server almost hangs .... And the server load is very high : $ w 00:07:51 up 46 days,  6:07,  3 users,  load average: 526.31, 298.59, 121.04 USER     TTY      FROM              LOGIN@   IDLE   JCPU   PCPU WHAT smallufo pts/1    destiny          Wed16    6:09   2.91s  1.92s top smallufo pts/2    destiny          Wed22    1.00s  2.67s  0.01s w smallufo pts/3    destiny          Wed23    3:36   7:07   6:56 /usr/java/jdk/bin/java -jar /usr/local/share/resin-4.0.25/lib/resin.jar -root-directory /hom The load peaks to 500 or even higher ! After 5 or more minutes , the load goes down... Can you get a thread dump? Or better yet, if you have resin-pro, get a "resinctl pdf-report --profile". -- Scott It does not happen in 4.0.19 !</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [4.0.25] tremendously increases my server load when starts-up</header>
    <date>Fri Feb 03 10:46:57 CET 2012</date>
    <body>Hi This is my ip addresses : $ ifconfig eth0      Link encap:Ethernet  HWaddr 00:50:08:02:FA:8E inet addr:192.168.2.2  Bcast:192.168.2.255  Mask:255.255.255.0 inet6 addr: fe80::250:8ff:fe02:fa8e/64 Scope:Link UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1 RX packets:856152 errors:0 dropped:0 overruns:0 frame:0 TX packets:460283 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:122552727 (116.8 MiB)  TX bytes:284641238 (271.4 MiB) Interrupt:233 Base address:0xc000 eth1      Link encap:Ethernet  HWaddr 00:60:6E:60:07:4B inet addr:192.168.1.104  Bcast:192.168.1.255  Mask:255.255.255.0 inet6 addr: fe80::260:6eff:fe60:74b/64 Scope:Link UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1 RX packets:11431817 errors:0 dropped:0 overruns:0 frame:0 TX packets:13056593 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:3686915772 (3.4 GiB)  TX bytes:1152022111 (1.0 GiB) lo        Link encap:Local Loopback inet addr:127.0.0.1  Mask:255.0.0.0 inet6 addr: ::1/128 Scope:Host UP LOOPBACK RUNNING  MTU:16436  Metric:1 RX packets:201560031 errors:0 dropped:0 overruns:0 frame:0 TX packets:201560031 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:0 RX bytes:1693844049 (1.5 GiB)  TX bytes:1693844049 (1.5 GiB) All are local addresses , no VM installed. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [4.0.25] tremendously increases my server load when starts-up</header>
    <date>Mon Feb 06 17:35:49 CET 2012</date>
    <body>Can you try the snapshot http://caucho.com/download/resin-pro-4_0-snap.tar.gz ? The IP bug was a red-herring. There is a timing issue with threading/clustering. That snapshot is not suitable for production (several known regression failures), but it can be used to verify the startup bug. -- Scott Hi This is my ip addresses : $ ifconfig eth0      Link encap:Ethernet  HWaddr 00:50:08:02:FA:8E inet addr:192.168.2.2  Bcast:192.168.2.255  Mask:255.255.255.0 inet6 addr: fe80::250:8ff:fe02:fa8e/64 Scope:Link UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1 RX packets:856152 errors:0 dropped:0 overruns:0 frame:0 TX packets:460283 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:122552727 (116.8 MiB)  TX bytes:284641238 (271.4 MiB) Interrupt:233 Base address:0xc000 eth1      Link encap:Ethernet  HWaddr 00:60:6E:60:07:4B inet addr:192.168.1.104  Bcast:192.168.1.255  Mask:255.255.255.0 inet6 addr: fe80::260:6eff:fe60:74b/64 Scope:Link UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1 RX packets:11431817 errors:0 dropped:0 overruns:0 frame:0 TX packets:13056593 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:3686915772 (3.4 GiB)  TX bytes:1152022111 (1.0 GiB) lo        Link encap:Local Loopback inet addr:127.0.0.1  Mask:255.0.0.0 inet6 addr: ::1/128 Scope:Host UP LOOPBACK RUNNING  MTU:16436  Metric:1 RX packets:201560031 errors:0 dropped:0 overruns:0 frame:0 TX packets:201560031 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:0 RX bytes:1693844049 (1.5 GiB)  TX bytes:1693844049 (1.5 GiB) All are local addresses , no VM installed. mailto:f...@caucho.com I cannot operate my server when I start resin 4.0.25 The load is so high that the server almost hangs there... Even a "ls" is so sluggish... It happens even in a clean install (no other webapps installed , just default resin.xml settings) It might be related to a JVM bug having to do with the IP addresses. What do you IP addresses look like? Are there any virtual ones. -- Scott $ uname -a Linux dev 2.6.18-164.6.1.el5 #1 SMP Tue Nov 3 16:18:27 EST 2009 i686 i686 i386 GNU/Linux /var/log/resin $ head watchdog-manager.log 2012 11:09:58 PST) 1.6.0_22-b04, UTF-8, zh 17.1-b03, 32, mixed mode, Sun Microsystems Inc. mailto:f...@caucho.com When I execute 'resinctl start'  , I notice my server almost hangs .... And the server load is very high : $ w 00:07:51 up 46 days,  6:07,  3 users,  load average: 526.31, 298.59, 121.04 USER     TTY      FROM              LOGIN@   IDLE   JCPU PCPU WHAT smallufo pts/1    destiny          Wed16    6:09   2.91s 1.92s top smallufo pts/2    destiny          Wed22    1.00s  2.67s 0.01s w smallufo pts/3    destiny          Wed23    3:36   7:07 6:56  /usr/java/jdk/bin/java -jar /usr/local/share/resin-4.0.25/lib/resin.jar -root-directory /hom The load peaks to 500 or even higher ! After 5 or more minutes , the load goes down... Can you get a thread dump? Or better yet, if you have resin-pro, get a "resinctl pdf-report --profile". -- Scott It does not happen in 4.0.19 !</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [4.0.25] tremendously increases my server load when starts-up</header>
    <date>Mon Feb 06 22:11:04 CET 2012</date>
    <body>Scott, What would trigger the JVM bug having to do with the IP addresses?  I want to make sure that I am not affected before I upgrade. What version of JVM does that affect? http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7078386 Looks like it's fixed in 1.6 b21 from the bug report. Also, according to the bug report it's specific to Linux and certain IPv6 configurations. It's not related to the 4.0.25 issue. Since Resin calls it once at startup, it would crash immediately. -- Scott Bill On Mon, Feb 6, 2012 at 11:34 AM, Scott Ferguson &amp;lt;f...@caucho.com mailto:f...@caucho.com Can you try the snapshot http://caucho.com/download/resin-pro-4_0-snap.tar.gz ? The IP bug was a red-herring. There is a timing issue with threading/clustering. That snapshot is not suitable for production (several known regression failures), but it can be used to verify the startup bug. -- Scott Hi This is my ip addresses : $ ifconfig eth0      Link encap:Ethernet  HWaddr 00:50:08:02:FA:8E inet addr:192.168.2.2  Bcast:192.168.2.255 Mask:255.255.255.0 inet6 addr: fe80::250:8ff:fe02:fa8e/64 Scope:Link UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1 RX packets:856152 errors:0 dropped:0 overruns:0 frame:0 TX packets:460283 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:122552727 (116.8 MiB)  TX bytes:284641238 (271.4 MiB) Interrupt:233 Base address:0xc000 eth1      Link encap:Ethernet  HWaddr 00:60:6E:60:07:4B inet addr:192.168.1.104  Bcast:192.168.1.255 Mask:255.255.255.0 inet6 addr: fe80::260:6eff:fe60:74b/64 Scope:Link UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1 RX packets:11431817 errors:0 dropped:0 overruns:0 frame:0 TX packets:13056593 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:1000 RX bytes:3686915772 (3.4 GiB)  TX bytes:1152022111 (1.0 GiB) lo        Link encap:Local Loopback inet addr:127.0.0.1  Mask:255.0.0.0 inet6 addr: ::1/128 Scope:Host UP LOOPBACK RUNNING  MTU:16436  Metric:1 RX packets:201560031 errors:0 dropped:0 overruns:0 frame:0 TX packets:201560031 errors:0 dropped:0 overruns:0 carrier:0 collisions:0 txqueuelen:0 RX bytes:1693844049 (1.5 GiB)  TX bytes:1693844049 (1.5 GiB) All are local addresses , no VM installed. mailto:f...@caucho.com I cannot operate my server when I start resin 4.0.25 The load is so high that the server almost hangs there... Even a "ls" is so sluggish... It happens even in a clean install (no other webapps installed , just default resin.xml settings) It might be related to a JVM bug having to do with the IP addresses. What do you IP addresses look like? Are there any virtual ones. -- Scott $ uname -a Linux dev 2.6.18-164.6.1.el5 #1 SMP Tue Nov 3 16:18:27 EST 2009 i686 i686 i386 GNU/Linux /var/log/resin $ head watchdog-manager.log Jan 2012 11:09:58 PST) Environment 1.6.0_22-b04, UTF-8, zh 17.1-b03, 32, mixed mode, Sun Microsystems Inc. 2012/2/3 Scott Ferguson &amp;lt;f...@caucho.com mailto:f...@caucho.com When I execute 'resinctl start'  , I notice my server almost hangs .... And the server load is very high : $ w 00:07:51 up 46 days,  6:07,  3 users,  load average: 526.31, 298.59, 121.04 USER     TTY      FROM              LOGIN@   IDLE JCPU   PCPU WHAT smallufo pts/1    destiny          Wed16    6:09 2.91s  1.92s top smallufo pts/2    destiny          Wed22    1.00s 2.67s  0.01s w smallufo pts/3    destiny          Wed23    3:36   7:07 6:56  /usr/java/jdk/bin/java -jar /usr/local/share/resin-4.0.25/lib/resin.jar -root-directory /hom The load peaks to 500 or even higher ! After 5 or more minutes , the load goes down... Can you get a thread dump? Or better yet, if you have resin-pro, get a "resinctl pdf-report --profile". -- Scott It does not happen in 4.0.19 !</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [4.0.25] tremendously increases my server load when starts-up</header>
    <date>Sat Feb 11 16:46:02 CET 2012</date>
    <body>Hi sorry for reply late I tried this snap , and the situation seems the same... after start , the server almost hangs there $ w 23:40:29 up 55 days,  5:40,  2 users,  load average: 519.06, 252.13, 96.59 USER     TTY      FROM              LOGIN@   IDLE   JCPU   PCPU WHAT smallufo pts/1    destiny2.smalluf 12:11    1.00s 11.71s  0.92s -bash smallufo pts/2    destiny2.smalluf 23:40    0.00s  0.07s  0.01s w I've also updated my JDK to the latest version: $ java -version java version "1.6.0_30" Java(TM) SE Runtime Environment (build 1.6.0_30-b12) Java HotSpot(TM) Client VM (build 20.5-b03, mixed mode, sharing) http://caucho.com/download/resin-pro-4_0-snap.tar.gz ?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [4.0.25] tremendously increases my server load when starts-up</header>
    <date>Mon Feb 13 17:58:36 CET 2012</date>
    <body>Hi sorry for reply late I tried this snap , and the situation seems the same... after start , the server almost hangs there Thanks for checking. I'm working through the threading code methodically for 4.0.26. I'm not sure when I'll have another snapshot to test. Possibly later this week. -- Scott $ w 23:40:29 up 55 days,  5:40,  2 users,  load average: 519.06, 252.13, 96.59 USER     TTY      FROM              LOGIN@   IDLE   JCPU   PCPU WHAT smallufo pts/1    destiny2.smalluf 12:11    1.00s 11.71s  0.92s -bash smallufo pts/2    destiny2.smalluf 23:40    0.00s  0.07s  0.01s w I've also updated my JDK to the latest version: $ java -version java version "1.6.0_30" Java(TM) SE Runtime Environment (build 1.6.0_30-b12) Java HotSpot(TM) Client VM (build 20.5-b03, mixed mode, sharing) mailto:f...@caucho.com Can you try the snapshot http://caucho.com/download/resin-pro-4_0-snap.tar.gz ? The IP bug was a red-herring. There is a timing issue with threading/clustering. That snapshot is not suitable for production (several known regression failures), but it can be used to verify the startup bug.</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin 4.0.25 &amp;amp; jersey JNDI problem</header>
    <date>Thu Feb 02 03:24:04 CET 2012</date>
    <body>I have the same problem with this : http://bugs.caucho.com/bug_view_advanced_page.php?bug_id=4215 classpath:META-INF/caucho/app-default.xml:49: javax.naming.NameNotFoundException: /com.sun.jersey.config/CDIExtension: JNDI rebind requires the parent Context 'com.sun.jersey.config' to be created but it is null. jersey-core-1.5.jar jersey-server-1.5.jar jersey-spring-1.5.jar with this line *seems* fixes the problem :</body>
  </mail>
  <mail>
    <header>[Resin-interest] Fatal Error: WP_Screen::$this is an undeclared	static field</header>
    <date>Wed Feb 01 08:51:34 CET 2012</date>
    <body>I have resin 4.0.23 installed. It seems to serve up WordPress 2.9.2 okay (blog.roderickmann.org), but not WordPress 3.3.1 (latencyzero.com/wp/). The default pages seem to load okay, but the admin pages only render the left-hand controls, no content. I get the following error: WP_Screen::$this is an undeclared static field The two sites above are running in the same resin instance. The config for each is slightly different. I always seem to trip over PHP issues with Resin, and get very little response from you guys for them. This has kept me from ever considering buying Quercus (you wouldn't even answer a question asking about what kind of Quercus support I could expect to get if I did buy it). Hmm, looking around the site, it seems you don't even offer Quercus any more, is that correct? -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fatal Error: WP_Screen::$this is an undeclared	static field</header>
    <date>Wed Feb 01 23:18:09 CET 2012</date>
    <body>Hi Rick, http://quercus.caucho.com is still the main Quercus site.  The library is bundled with Resin, inside resin.jar.  The best way to get the latest version is to download Resin Open-Source and use resin.jar.  We have not been producing separate Quercus downloads recently. Please understand that we have not entirely abandoned Quercus, it is just on the back-burner as we focus on Resin.  The issue is not just language support, but all the libraries.  Fully supporting incremental versions of PHP is an enormous amount of work with relatively low return on investment for us.  An engineer working on Quercus is an engineer that is not working on Resin.  We may reevaluate that resource allocation in the future, but for now Quercus is a lower priority. I see the latest version of WordPress is requiring PHP 5.2.4 or greater. Quercus support hovers around PHP 5.2.1, with some selective functions from later versions and some others not implemented. I see you already entered a bug report for this.  That is the best thing to do so we can track issues. http://bugs.caucho.com/view.php?id=4944 Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fatal Error: WP_Screen::$this is an undeclared	static field</header>
    <date>Thu Feb 02 00:50:11 CET 2012</date>
    <body>http://quercus.caucho.com is still the main Quercus site.  The library is http://bugs.caucho.com/view.php?id=4944 Thanks for the information, Paul, I really appreciate it. It's good to know the problem may lie in the version of PHP. Is it possible to use PHP directly through Resin? I don't use any of the Java integration capability (yet), but I hate to go install Apache (I use Resin for all my J2EE stuff) just to support WordPress. Can I get Resin to call to PHP (not using Quercus, that is)? Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fatal Error: WP_Screen::$this is an undeclared	static field</header>
    <date>Thu Feb 02 02:48:18 CET 2012</date>
    <body>http://quercus.caucho.com is still the main Quercus site.  The library is http://bugs.caucho.com/view.php?id=4944 You can do that via CGI with Resin's CGIServlet, or a better alternative is over FastCGI using FastCGIServlet and php-fpm. http://javadoc4.caucho.com/com/caucho/servlets/FastCGIServlet.html http://php.net/manual/en/install.fpm.php Unfortunately I don't have any good examples to provide you at the moment... This is a great topic as a cookbook item for out new Wiki, so I will mock up an example and put instructions the wiki. (In the next day or so.) http://wiki4.caucho.com Thanks, Paul</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fatal Error: WP_Screen::$this is an undeclared	static field</header>
    <date>Thu Feb 02 06:31:26 CET 2012</date>
    <body>http://javadoc4.caucho.com/com/caucho/servlets/FastCGIServlet.html http://php.net/manual/en/install.fpm.php http://wiki4.caucho.com Thanks, Paul, that's very helpful! I'd love to see Quercus be abel to keep up, of course, but this may get me where I need to be. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fatal Error: WP_Screen::$this is an undeclared	static field</header>
    <date>Sat Feb 04 04:22:05 CET 2012</date>
    <body>http://javadoc4.caucho.com/com/caucho/servlets/FastCGIServlet.html http://php.net/manual/en/install.fpm.php http://wiki4.caucho.com Link to blog post with instruction on configuring Resin for native PHP over CGI and FastCGI: http://blog.caucho.com/2012/02/03/php-with-cgi-and-fastcgi/ Thanks, Paul</body>
  </mail>
  <mail>
    <header>[Resin-interest] sbaldwin</header>
    <date>Tue Jan 17 00:49:11 CET 2012</date>
    <body>Good afternoon! http://waqarahmedkhan.com/popster.php?ihyhin=89 Tue, 17 Jan 2012 0:48:19 ____________ "The teeth looked bright and sharp." (c) Ruthine wci58j4</body>
  </mail>
  <mail>
    <header>[Resin-interest] JSP runtime errors and resin error-page</header>
    <date>Tue Jan 24 17:53:58 CET 2012</date>
    <body>Hi We are running a struts based application inside Resin. In cases where a runtime error occurs for jsp pages (eg expected objects referenced on the page not found in the session) it seems that the response has already been generated partially when the error occurs and then the error page as specified in our resin.xml gets added to the response and sent to the client browser. Because we are using gzip, this results in content encoding errors in the browser because it seems as if the error page is gzipped inside the main response which is also gzipped (I am guessing that this is what is occuring). If the gzip filter is disabled we get the part complete response with the error page tagged onto the end and a non functioning web page. Error pages are specified in resin.xml for the application as follows: Is this something that Resin should be able to handle, or is it just inevitable in the face of jsp runtime errors?  Is there something we should do or configure to prevent the response being sent untill the jsp has processed without error? Thanks for any suggestions. Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSP runtime errors and resin error-page</header>
    <date>Fri Jan 27 20:55:15 CET 2012</date>
    <body>Runtime errors are tricky because of the flushed buffer issue. You can increase the JSP buffer size (though I'd generally not recommend it because it chews up memory.) When possible it's best to verify everything before rendering anything. So if it's a known possibility that data could be missing, to add a check at the top. That wouldn't help true runtime errors, though. I don't think there's much Resin can do besides the above. Once the data is flushed, it can't really be fixed. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Change classloader precedence / priority /	order</header>
    <date>Thu Jan 12 16:34:25 CET 2012</date>
    <body>It seems this is possible via the priorityPackage setting available on the DynamicClassLoader, however, that isn't allowed by the config Relax NG schema. If I hack the schema (env.rnc), I'm able to configure (but of course that leads to other issues...). Is there any reason for this feature to be disable, or could the schema be update in the next release? ----- Original Message ----- Subject: [Resin-interest] Change classloader precedence / priority / order Date: Thu, 12 Jan 2012 15:40:49 +0100 Is there a way to change the priority / order of classloaders on different levels? The class-loader config tag claims to do this, but it seems to me it only affects the order within the current level (such as WEB-INF/classes vs WEB-INF/lib), and not classes already loaded by a In particular, I need a newer javax.el implementation than what Resin provides in lib/javaee-16.jar. Preferrably I would just include the updated el-api and el-impl jars in my .war (WEB-INF/lib), and somehow tell Resin that they take precedence over the ones on resin level (without making explicit reference from resin.xml into the particular webapp-directory). Is that possible...? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Change classloader precedence / priority	/	order</header>
    <date>Thu Jan 12 19:01:49 CET 2012</date>
    <body>For your sitation, wouldn't it just be easier to put the new jar in the classpath? For example using jvm-arg. The overriding from a child classloader has always been a bad idea. (And in your case, probably wouldn't work, because the JSP and Servlet and CDI classes depend on EL, so the EL needs to be in the same classloader as the JSP.) -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Change classloader precedence / priority / order</header>
    <date>Thu Jan 12 15:42:28 CET 2012</date>
    <body>Is there a way to change the priority / order of classloaders on different levels? The class-loader config tag claims to do this, but it seems to me it only affects the order within the current level (such as WEB-INF/classes vs WEB-INF/lib), and not classes already loaded by a In particular, I need a newer javax.el implementation than what Resin provides in lib/javaee-16.jar. Preferrably I would just include the updated el-api and el-impl jars in my .war (WEB-INF/lib), and somehow tell Resin that they take precedence over the ones on resin level (without making explicit reference from resin.xml into the particular webapp-directory). Is that possible...? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 stable for production ? (Keith	Fetterman)</header>
    <date>Tue Dec 13 18:58:53 CET 2011</date>
    <body>Hi. Thank you for the feedback. Jonathan http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/pipermail/resin-interest/attachments/20111205/c1ffe566/attachment-0001.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 stable for production ? (Wesley Wu)</header>
    <date>Tue Dec 13 18:57:50 CET 2011</date>
    <body>Hi. Thank you for the feedback. Jonathan http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.yinyuetai.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Single Signon Questions</header>
    <date>Fri Dec 09 07:19:48 CET 2011</date>
    <body>Using Resin 4.0.23 we are trying to get single sign-on working per this link: http://www.caucho.com/resin-4.0/admin/security-overview.xtp#SingleSignon I have placed the resin:XmlAuthenticator at the host level.  Per the example.  Also tried this at both the host and cluster level: We are able to log into: But when we go to the next webapp which is defined as: It doesn't see that we are logged in and tries to send us to /birt/login.jsp which obviously doesn't exist.  I have tried putting in resin:Forward to redirect to absolute-target="/login.jsp", but it appears the internal redirect from j_security_check doesn't "honor" resin:Forward rules. I don't believe it should be redirecting in the first place though, if single signon works. Any hints at what I am missing to get single signon working, or if it's not possible a work around to the fact that the /birt webapp is trying to call /birt/login.jsp instead of /login.jsp as defined in resin:FormLogin? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Single Signon Questions</header>
    <date>Fri Dec 09 16:00:43 CET 2011</date>
    <body>After more trial and error I was able to replace the &amp;lt;resin:Forward&amp;gt; with twice. Any thoughts on what I might be missing for single sign-on to work? Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Friday, December 09, 2011 12:19 AM To: General Discussion for the Resin application server Subject: [Resin-interest] Single Signon Questions Using Resin 4.0.23 we are trying to get single sign-on working per this link: http://www.caucho.com/resin-4.0/admin/security-overview.xtp#SingleSignon I have placed the resin:XmlAuthenticator at the host level.  Per the example.  Also tried this at both the host and cluster level: We are able to log into: But when we go to the next webapp which is defined as: It doesn't see that we are logged in and tries to send us to /birt/login.jsp which obviously doesn't exist.  I have tried putting in resin:Forward to redirect to absolute-target="/login.jsp", but it appears the internal redirect from j_security_check doesn't "honor" resin:Forward rules. I don't believe it should be redirecting in the first place though, if single signon works. Any hints at what I am missing to get single signon working, or if it's not possible a work around to the fact that the /birt webapp is trying to call /birt/login.jsp instead of /login.jsp as defined in resin:FormLogin? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Single Signon Questions</header>
    <date>Tue Dec 13 01:22:50 CET 2011</date>
    <body>with &amp;lt;path-mapping&amp;gt; and get the workaround working, but we still have to log in twice. Any thoughts on what I might be missing for single sign-on to work? Thanks, Aaron *From:*resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] *On Behalf Of *Aaron Freeman *Sent:* Friday, December 09, 2011 12:19 AM *To:* General Discussion for the Resin application server *Subject:* [Resin-interest] Single Signon Questions Using Resin 4.0.23 we are trying to get single sign-on working per this link: http://www.caucho.com/resin-4.0/admin/security-overview.xtp#SingleSignon I have placed the resin:XmlAuthenticator at the host level.  Per the example.  Also tried this at both the host and cluster level: We are able to log into: But when we go to the next webapp which is defined as: For the single-signon to work, you need a &amp;lt;resin:MemorySingleSignon/&amp;gt; at the &amp;lt;host&amp;gt; level, which will save the data (otherwise single-signon isn't enabled.) The second problem is a trickier one. We could have a new absolute-form-login-page, which is relative to the server root, not the web-app. -- Scott It doesn't see that we are logged in and tries to send us to /birt/login.jsp which obviously doesn't exist.  I have tried putting in resin:Forward to redirect to absolute-target="/login.jsp", but it appears the internal redirect from j_security_check doesn't "honor" resin:Forward rules. I don't believe it should be redirecting in the first place though, if single signon works. Any hints at what I am missing to get single signon working, or if it's not possible a work around to the fact that the /birt webapp is trying to call /birt/login.jsp instead of /login.jsp as defined in resin:FormLogin? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Single Signon Questions</header>
    <date>Tue Dec 13 15:15:54 CET 2011</date>
    <body>Perfect, you might pass a note for someone to upgrade the Single Signon docs in that link I referenced below. As for the second part, the path-mapping works great so I wouldn't worry about adding a new param. Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Monday, December 12, 2011 6:22 PM To: resin-interest@caucho.com Subject: Re: [Resin-interest] Single Signon Questions After more trial and error I was able to replace the &amp;lt;resin:Forward&amp;gt; with twice. Any thoughts on what I might be missing for single sign-on to work? Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Friday, December 09, 2011 12:19 AM To: General Discussion for the Resin application server Subject: [Resin-interest] Single Signon Questions Using Resin 4.0.23 we are trying to get single sign-on working per this link: http://www.caucho.com/resin-4.0/admin/security-overview.xtp#SingleSignon I have placed the resin:XmlAuthenticator at the host level.  Per the example.  Also tried this at both the host and cluster level: We are able to log into: But when we go to the next webapp which is defined as: For the single-signon to work, you need a &amp;lt;resin:MemorySingleSignon/&amp;gt; at the enabled.) The second problem is a trickier one. We could have a new absolute-form-login-page, which is relative to the server root, not the web-app. -- Scott It doesn't see that we are logged in and tries to send us to /birt/login.jsp which obviously doesn't exist.  I have tried putting in resin:Forward to redirect to absolute-target="/login.jsp", but it appears the internal redirect from j_security_check doesn't "honor" resin:Forward rules. I don't believe it should be redirecting in the first place though, if single signon works. Any hints at what I am missing to get single signon working, or if it's not possible a work around to the fact that the /birt webapp is trying to call /birt/login.jsp instead of /login.jsp as defined in resin:FormLogin? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4 stable for production ?</header>
    <date>Mon Dec 05 11:32:19 CET 2011</date>
    <body>Hello. We are still using some resin 3.0.24 and plan to migrate them but from the caucho website, it's not clear if we should go for 3.1 or 4.0 or even 3.2 (by the what is this 3.2 that I saw only on the source repo ?) Thanks in advance for your help. Jonathan Melly Swissquote Switzerland</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 stable for production ?</header>
    <date>Mon Dec 05 15:18:25 CET 2011</date>
    <body>since 4.0.7 we use it in production site. now we use 4.0.18. our site suffered no less than 30M hits per day. http://www.yinyuetai.com http://maillist.caucho.com/mailman/listinfo/resin-interest -- *Wesley Wu  吴萌野* QQ:18990702 Mobile: 18601033886 工体北路8号三里屯SOHO办公D座1103  邮编100027 www.yinyuetai.com * *</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 stable for production ?</header>
    <date>Mon Dec 05 22:10:15 CET 2011</date>
    <body>Hi Jonathan, We finally made the switch from 3.0.x branch to the 4.0.x branch several months ago.  We were at 3.0.28 and now we are running 4.0.23 in production.  Our biggest Web site, www.go2marine.com, is not experiencing any problems in production with the 4.0.x branch. Keith http://maillist.caucho.com/mailman/listinfo/resin-interest -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>[Resin-interest] Reserve a http thread for admin connection.</header>
    <date>Sun Dec 04 05:13:08 CET 2011</date>
    <body>Hi, We are running resin pro version 4.0.15 on a windows machine, using the IIS handler to handle the static files &amp;amp; forward the application requests to the resin server listening on port 6800. The thread-max is configured to 1024, during normal loads resin is handling 10 requests concurrently. The problem we are having is: If the requests are getting locked, for example waiting on database queries, the request threads fill up the 1024 thread max, and the application stops responding to clients, including local admin requests. Is there a way to configure resin to reserve a thread for administrative request? possible setup resin to listen on another port that will not be affected by the global thread-max limit? Thanks. -- Sam</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Reserve a http thread for admin connection.</header>
    <date>Mon Dec 05 18:32:32 CET 2011</date>
    <body>Hi, We are running resin pro version 4.0.15 on a windows machine, using the IIS handler to handle the static files &amp;amp; forward the application requests to the resin server listening on port 6800. The thread-max is configured to 1024, during normal loads resin is handling 10 requests concurrently. The problem we are having is: If the requests are getting locked, for example waiting on database queries, the request threads fill up the 1024 thread max, and the application stops responding to clients, including local admin requests. Is there a way to configure resin to reserve a thread for administrative request? possible setup resin to listen on another port that will not be affected by the global thread-max limit? If Resin listens to another port, it will have dedicated threads attached to it. For a port, the accept-thread-min threads are allocated before the accept() call, so they would avoid the thread-max check. You would need to listen to a different port (or IP), though, because there wouldn't be a way to reserve threads just for certain URLs. -- Scott Thanks. -- Sam</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Reserve a http thread for admin connection.</header>
    <date>Mon Dec 05 19:00:22 CET 2011</date>
    <body>Thanks! http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0.24 configuration notes</header>
    <date>Mon Nov 21 19:55:34 CET 2011</date>
    <body>As part of our work on simplifying the Resin configuration to make dynamic/cloud servers easier to deploy, 4.0.24 now has rpm support a new EL function rvar() two new CLI commands "start-all" and "generate-password" and a new command-line script resinctl all to help make the cluster/cloud deployment easier (and also help simplify /resin-admin setup). Our goal is to make a new dynamic server require very little in specific configuration to attach to the triad and start working. If the small specific configuration can fit in an Amazon-style user-data, that would be perfect (we're not quite there yet, but 4.0.24 is a good step forward.) The start-all is used in the updated /etc/init.d/resin to start all servers that are configured on the local IP addresses of the current machine, avoiding the earlier requirement of specifying the -server. With 4.0.24, the /etc/init.d/resin can be left as-is. If you look at the new default resin.xml, it has a properties file and saves the values in EL expressions which are then available to the resin.xml. Basically, this means that many sites will only need to change the resin.properties and may never need to touch the resin.xml. The new &amp;lt;server-multi&amp;gt; works with the resin.properties to make it easier to define the triad or the entire cluster. Instead of creating on its address-list attribute to list all of the servers in the resin.properties like: app_tier : 192.168.1.10 192.168.1.11 192.168.1.12 and Together with the CLI start-all, this lets you configure the app-tier cluster without modifying either the resin.xml or the /etc/init.d/resin. The resin.xml also includes a which will let you add configuration such as &amp;lt;database&amp;gt; tags in a separate *.xml without needing to modify the standard one. resinctl is now placed in /usr/bin for the make install, the rpm, and the deb. So it's always available. It's similar to bin/httpd.sh, but has the default installed locations build-in. In other words, on a Linux system, it already knows about /etc/resin, /var/log/resin, /var/www, and /usr/local/share/resin. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.24 configuration notes</header>
    <date>Mon Nov 21 20:08:38 CET 2011</date>
    <body>file the This could be awesome! Will modifying the resin.properties force your resin instance to restart? Same question as above, will modifying the *.xml files force your resin instance to restart? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.24 configuration notes</header>
    <date>Mon Nov 21 20:18:21 CET 2011</date>
    <body>I hope so. Since it's new, this is a great time for feedback Yes. It's the same mechanism as modifying resin.xml causing a restart. Yep. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.24 configuration notes</header>
    <date>Tue Nov 22 10:22:04 CET 2011</date>
    <body>For the first time, Resin 4.0.24 doesn't work out of the box when added to Eclipse as a new server. I go through this process pain free for each new release, but now immediately see the message "'default' is an unknown server in the configuration file" and the server doesn't start. To recreate, use Servers | New | Server | Resin 4.0 | (Create runtime specifying the new Resin home) | Next | Finish (add apps as necessary) | try to start the server. In fact the 4.0.23 server is still present which I'm sticking with for now.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.24 configuration notes</header>
    <date>Tue Nov 22 10:44:49 CET 2011</date>
    <body>try now. I had a similar issue with 4.0.23 (though it was my fault), and by switching out: with: -conf "/path/to/resin.xml" it went away.  I have always set that explicitly though and have never tried Not sure that helps much, but thought I would throw it out there as something to try. Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.24 configuration notes</header>
    <date>Tue Nov 22 11:58:03 CET 2011</date>
    <body>Thanks. Still not right - the path was fully qualified anyway - but on a hunch I copied the 4 files from the 4.0.23-config (admin-users.xml, app-default.xml, resin.xml and health.xml) over the new ones and resin started. Theres something wrong in the newly generated config files themselves. I notice health.xml doesn't appear in the new set. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.24 configuration notes</header>
    <date>Tue Nov 22 19:44:21 CET 2011</date>
    <body>You can also just add a &amp;lt;server id="" .../&amp;gt; to the resin.xml. This is an issue we're working on. The health.xml has been moved to local.d in the distribution. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] FormLogin calling Authenticate 3 times</header>
    <date>Thu Nov 24 13:55:54 CET 2011</date>
    <body>Hi We have migrated to Resin 4 from 2.0.23. In conjunction with standard FormLogin we use a CustomAuthenticator which implements authenticate and performs a number of actions as part of the authenticate call. Since upgrading to Resin 4 we are seeing that the authenticate method is being called 3 times when a user logs in which we don't want much because it makes a number of database calls. Is this normal/expected behaviour? Is there anything we can do to stop this? Http[default, 12] POST /guestpages/j_security_check HTTP/1.1 Http[default, 12] Remote-IP: 127.0.0.1:53170 Http[default, 12] Host: secure.libertyaccounts.com Http[default, 12] User-Agent: Mozilla/5.0 (X11; SunOS i86pc; rv:7.0.1) Gecko/20100101 Firefox/7.0.1 Http[default, 12] Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Http[default, 12] Accept-Language: en-us,en;q=0.5 Http[default, 12] Accept-Encoding: gzip, deflate Http[default, 12] Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7 Http[default, 12] Connection: keep-alive Http[default, 12] Referer: https://secure.libertyaccounts.com/logout.dox Http[default, 12] Cookie: __utmc=41655487; PID=-1; JSESSIONID=aaabHzVdRZSbFghz5qvpt Http[default, 12] Content-Type: application/x-www-form-urlencoded Http[default, 12] Content-Length: 89 allocate ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] idle ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] allocate ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] idle ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] allocate ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] idle ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] axw001 PasswordCredentials[] 1 allocate ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] idle ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] allocate ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] idle ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] allocate ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] idle ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] axw001 PasswordCredentials[] 1 HttpServletRequestImpl[HttpRequest[default, 12]] axw001 is in role: user allocate ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] idle ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] allocate ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] idle ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] allocate ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] idle ManagedPoolItem[jdbc/jaffa-gp,242,ManagedConnectionImpl] axw001 PasswordCredentials[] 1 FormLoginServlet[WebApp[production/webapp/default/ROOT]] login axw001 using FormLogin[] old path:null query:null j_uri:/loginSuccess.do -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>[Resin-interest] Database Conflict</header>
    <date>Mon Nov 21 13:25:58 CET 2011</date>
    <body>With the latest resin-pro-4.0.23 plugin we are now getting an error when trying to start multiple instances of Resin within a single Eclipse environment: java.sql.SQLException: CREATE for path 'C:\opt\project\ext\resin-pro-4.0.23\resin-data\default\tmp\temp_file' failed, because the file already exists.  CREATE can not override an existing table. We were able to get around the issue by adding a -data-directory argument to the Resin plugin's "Program arguments" section, but why do we have to do that suddenly? What is the best practice for starting multiple VMs?    Is there some setting we can use to get it to use WEB-INF (not sure that is a good idea), Any other options that would be better than having to explicitly add that extra program argument with a hardcoded path? Thanks, -a</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Database Conflict</header>
    <date>Mon Nov 21 18:06:18 CET 2011</date>
    <body>With the latest resin-pro-4.0.23 plugin we are now getting an error when trying to start multiple instances of Resin within a single Eclipse environment: _java.sql.SQLException_: CREATE for path 'C:\opt\project\ext\resin-pro-4.0.23\resin-data\default\tmp\temp_file' failed, because the file already exists.  CREATE can not override an existing table. We were able to get around the issue by adding a --data-directory argument to the Resin plugin's "Program arguments" section, but why do we have to do that suddenly? What is the best practice for starting multiple VMs?    Is there some setting we can use to get it to use WEB-INF (not sure that is a good Any other options that would be better than having to explicitly add that extra program argument with a hardcoded path? If your servers have different server-id's that conflict won't happen. What's happening is that you're starting two servers with the same name (but different ports I assume?) and in the same directory. I'll add this as a bug report because the Eclipse plugin should be upgraded to somehow handle that automatically. -- Scott Thanks, -a</body>
  </mail>
  <mail>
    <header>[Resin-interest] Need help with host/web-app config</header>
    <date>Tue Nov 15 21:05:53 CET 2011</date>
    <body>I've been doing this a while now, so I'm not sure what I've overlooked to cause this behavior. I'm migrating my server from 4.0.20 on one host to a new host on 4.0.23. I'm coping parts of the resin.xml file in chunks, verifying each host as I go. The first went smoothly, as did the second. When I added the third, it seems to work, but it serves up pages from the second. Here are the relevant bits: Browsing to " http://latencyzero.com/" ; gets the first content correctly. Browsing to " http://roderickmann.org/" ; gets the second content correctly. Browsing to " http://mgfb.roderickmann.org/" ;, however, returns the content from the second webapp. Any ideas? Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Need help with host/web-app config</header>
    <date>Tue Nov 15 21:19:59 CET 2011</date>
    <body>Resin generally identifies hosts and web-apps uniquely by their root directory. So the second and third &amp;lt;host&amp;gt; elements which share the root-directory are probably being combined. -- Scott http://latencyzero.com/" ; gets the first content correctly. http://roderickmann.org/" ; gets the second content correctly. http://mgfb.roderickmann.org/" ;, however, returns the content</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Need help with host/web-app config</header>
    <date>Tue Nov 15 21:25:18 CET 2011</date>
    <body>Huh. Shouldn't it use the canonical host name? Anyway, I tried changing the second to be /lz/var/www/org/roderickmann/mgfb, and the web-app inside to point to ".", but it still does the same thing. http://latencyzero.com/" ; gets the first content correctly. http://roderickmann.org/" ; gets the second content correctly. http://mgfb.roderickmann.org/" ;, however, returns the content http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Need help with host/web-app config</header>
    <date>Tue Nov 15 21:44:48 CET 2011</date>
    <body>It can't, because hosts can be deployed like &amp;lt;host-deploy&amp;gt; and might be modified by an explicit &amp;lt;host&amp;gt; (which might set the canonical host name.) Hmm. If you turn on logging for the dispatch/startup, you should see the Host[production:host:host-name] which will include the canonical name. Can you check that and see which host name is being started? -- Scott http://latencyzero.com/" ; gets the first content correctly. http://roderickmann.org/" ; gets the second content correctly. http://mgfb.roderickmann.org/" ;, however, returns the content http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Need help with host/web-app config</header>
    <date>Tue Nov 15 21:58:54 CET 2011</date>
    <body>When I modify the file and attempt to reload a web-app, I get the "temporarily down" message while resin restarts. Here's some bits from the log: Starting Resin on Tue, 15 Nov 2011 12:54:18 -0800 (PST) ResinSystem[id=default] starting ... (com.caucho.env.deploy.EnvironmentDeployController) Host[production/host/latencyzero.com] root-directory=/lz/var/www/com/latencyzero ... (com.caucho.env.deploy.EnvironmentDeployController) Host[production/host/www.roderickmann.org] root-directory=/lz/var/www/org/roderickmann/www None of the other hosts starts up, even after I re-request one of them via the browser. If I completely remove the "www.roderickmann.org" host, everything works. Latest config file:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Need help with host/web-app config</header>
    <date>Tue Nov 15 22:24:53 CET 2011</date>
    <body>That regexp is matching every host with a latencyzero.com in it. I've added a bug report for this, since I think Resin should probably be adding the anchors automatically. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Need help with host/web-app config</header>
    <date>Tue Nov 15 22:51:58 CET 2011</date>
    <body>Thank you, that did the trick! -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] how can i restart a single web-app</header>
    <date>Thu Nov 10 02:55:40 CET 2011</date>
    <body>Hi, My resin root directory have many web-apps,  how can i restart a single web-app? Thanks</body>
  </mail>
  <mail>
    <header>[Resin-interest] pb with find() in resin 4.0.13</header>
    <date>Tue Nov 08 16:57:47 CET 2011</date>
    <body>Hello I'm using many times the find() call in EntityManager : But with no particular reason, in test or production, the find() call stop all processing, there is no exception and any System.out.println() juste after is simply not called. While the server is in this "undefined" state, the rest of the application may work. I tried to add a createQuery call just before the find : and the same problem happens at getRestulList(). Nothing happens, no exception, no further processing. Is there any people that had this problem ? I could see that only in one of my applications, not all. Is this a problem with eclispelink ? Thanks a lot. -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] pb with find() in resin 4.0.13</header>
    <date>Tue Nov 08 22:50:10 CET 2011</date>
    <body>Riccardo, Can you produce a thread-dump of the server's JVM please and send that to us? Thanks, Alex http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] pb with find() in resin 4.0.13</header>
    <date>Wed Nov 09 09:19:32 CET 2011</date>
    <body>The problem occurs only sometimes, I'll send it to you next time :) Thanks a lot http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] pb with find() in resin 4.0.13</header>
    <date>Wed Nov 09 16:28:23 CET 2011</date>
    <body>Hello again The problem happened again, and I found an exception in another log file (problem with all these logs...) java.lang.IllegalArgumentException: Unknown entity bean class: class reaentities.Status, please verify that this class has been marked with the @Entity annotation. at org.eclipse.persistence.internal.jpa.EntityManagerImpl.find(EntityManagerImpl.java:611) You'll find joind the full exception and the thread dump, plus the class itself. This object Status is marked as @Entity and work very well normally. Thanks for your help. Hello I'm using many times the find() call in EntityManager : But with no particular reason, in test or production, the find() call stop all processing, there is no exception and any System.out.println() Riccardo, Can you produce a thread-dump of the server's JVM please and send that to us? Thanks, Alex juste after is simply not called. While the server is in this "undefined" state, the rest of the application may work. I tried to add a createQuery call just before the find : and the same problem happens at getRestulList(). Nothing happens, no exception, no further processing. Is there any people that had this problem ? I could see that only in one of my applications, not all. Is this a problem with eclispelink ? Thanks a lot. -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] pb with find() in resin 4.0.13</header>
    <date>Wed Nov 09 17:23:41 CET 2011</date>
    <body>Can you check if the web-app was reloaded before the exception? I recollect having seen the issue in earlier versions of Resin 4. The issue arouse  when webapplication or entity class was reloaded  (you can force a reload to check). The issue should be fixed in later versions. The test case that reproduces the webapp with persistent context reload issue was created after 4.0.13. Thanks, Alex http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] pb with find() in resin 4.0.13</header>
    <date>Wed Nov 09 18:00:33 CET 2011</date>
    <body>For this time it was after a reload. But on the server there was no reload. I'll check the new version of resin later on. Thanks for the info. http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] Clustering and load-on-startup</header>
    <date>Tue Nov 08 11:23:36 CET 2011</date>
    <body>Hi I have a problem with clustering in Resin 4.0.23 that I hope someone can help me with. When I bring a cluster node back online after it has been shut down the cluster recognizes it as "up and functioning" too soon (this can be monitored on the caucho-status page). My problem is that I have a set. As it is set up now requests goes to this new node trying to access the servlet prior too its startup and they are left waiting. I would like to have the cluster node off line until all the that can make this work? What I am looking for is something like &amp;lt;load-balance-grace-time&amp;gt; or Best regards Mathias Lagerwall</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Clustering and load-on-startup</header>
    <date>Tue Nov 08 23:38:39 CET 2011</date>
    <body>Mathias, Can you try adding &amp;lt;bind-ports-after-start&amp;gt;true&amp;lt;/&amp;gt; to server-default? Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Clustering and load-on-startup</header>
    <date>Wed Nov 09 09:38:55 CET 2011</date>
    <body>Hi Alex Thanks for your reply I remember seeing this tag in the past but I couldn't find it in the reference page http://caucho.com/resin-4.0/reference.xtp and I also thought it was default true for Resin 4. But anyway it seems as it is default false now and I added it to the configuration. This resulted in the following behavior. 1. Two nodes up, A and B. Active browser sessions (sticky sessions) against each of them. 2. Shut down of node A results in active sessions on A is transferred to B. 3. Start of A again (with bind-ports-after-start set to true) results in A sessions is transferred back to node A immediately at start (the same as without the new tag). 4. But when accessing with an A session it now doesn't wait for the servlet to start, instead I get a timeout since the port isn't bound yet. So it seems as the &amp;lt;bind-ports-after-start&amp;gt; doesn't affect the srun ports. Best regards Mathias Lagerwall 2011/11/8 Alex Rojkov &amp;lt;a...@caucho.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] config question on 4.0</header>
    <date>Tue Nov 01 17:20:39 CET 2011</date>
    <body>Hello I'm migrating an application from resin v3.2.1 to v4.0.13. In the old conf there were 2 &amp;lt;database&amp;gt; tags pointing to 2 different db Now in v4, @Named is replaced with @Inject, but there is no attribute to set the jndi-name : before : @Named("realty/jdbc") public DataSource m_datasource;// high priority @Named("realty/jdbclow") public DataSource m_datasourcelow;// low priority after : @Inject public DataSource m_datasource;// high priority @Inject public DataSource m_datasourcelow;// low priority I've googled and searched the doc, and did not find any way to tell resin to use the good jndi-name. Is there any way to do so ? Thanks a lot. -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] config question on 4.0</header>
    <date>Tue Nov 01 17:29:12 CET 2011</date>
    <body>Well, there are a few things. First, you always need an @Inject. If you have a @Named, you need something like: Second, @Named isn't the same as jndi; it's a CDI name not a JNDI name. I did just check, and Resin's &amp;lt;database jndi-name="..."&amp;gt; does automatically set a @Named as well as the JNDI, but that's specific to More generally, you could use a ee:Named="foo" The Named attribute is the same as @Named (the urn:java:ee is a search path like a classpath, which includes javax.inject.*, which is the package of javax.inject.Named.) -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] config question on 4.0</header>
    <date>Tue Nov 01 18:56:27 CET 2011</date>
    <body>thanks a lot for your quick answer. The syntax with ee did not seems to work : ee:Named="realty/jdbc" is an unexpected attribute in &amp;lt;database&amp;gt;. but keeping jndi-name works Thanks a lot http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] Obfuscating Password in resin.xml</header>
    <date>Wed Oct 26 23:29:42 CEST 2011</date>
    <body>The following &amp;lt;password xmlns ...&amp;gt; technique works great for database definitions: However this same technique does not work for &amp;lt;jsse-ssl&amp;gt; definitions. H_3DES_EDE_CBC_SHA,TLS_RSA_WITH_AES_128_CBC_SHA,SSL_DHE_RSA_WITH_3DES_EDE_CB I get the following error at startup: /opt/company/server/conf/resin.xml:76: unable to create attribute SetterAttribute[public void com.caucho.vfs.JsseSSLFactory.setPassword(java.lang.String)] for com.caucho.vfs.JsseSSLFactory@176f5261 and ] Once upon a time ago there was discussion that this would be added to a future release.  Any thoughts as to if that can happen easily? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Obfuscating Password in resin.xml</header>
    <date>Thu Oct 27 00:40:08 CEST 2011</date>
    <body>The following &amp;lt;password xmlns ...&amp;gt; technique works great for database definitions: However this same technique does not work for &amp;lt;jsse-ssl&amp;gt; definitions. I get the following error at startup: /opt/company/server/conf/resin.xml:76: unable to create attribute SetterAttribute[public void com.caucho.vfs.JsseSSLFactory.setPassword(java.lang.String)] for com.caucho.vfs.JsseSSLFactory@176f5261 and ] Once upon a time ago there was discussion that this would be added to a future release.  Any thoughts as to if that can happen easily? I'll need to check why that's not happening for jsse. We also have an open bug report to create a standard encryption class. It wouldn't be totally secure, of course, but would be better than plaintext. -- Scott Thanks, Aaron</body>
  </mail>
  <mail>
    <header>[Resin-interest] Deadlock in access log</header>
    <date>Wed Oct 26 14:59:14 CEST 2011</date>
    <body>Hi We've been hit rather badly by errors very similar these: http://bugs.caucho.com/view.php?id=3509 during the last few days where we've had to restart Resin several time a day. A lot of threads are blocked on the same object at com.caucho.server.log.AccessLog.log(AccessLog.java:345). I could attach a stacktrace, but it's _very_ similar to those in mantis bug #3509. Our app just stalls on accepting incomming connections while threads and other services within the VM continue to run just fine. We are still on Resin Pro 3.1 (somewhere between 3.1.10 and 3.1.11 as we've been using a special build to alliviate another bug that's not listed in the 3.1.11 changelog) - any chance of a backport of the fixes to the 3.1 branch and a new version - or just a nightly build with the fix? Regards, Jens Dueholm Christensen Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Deadlock in access log</header>
    <date>Fri Oct 28 19:51:09 CEST 2011</date>
    <body>http://bugs.caucho.com/view.php?id=3509 during the last few days where we’ve Hi Jens, We're generally only fixing critical bugs in Resin 3.1 branch, but I've created a backport request for bug 3509 for tracking purposes. http://bugs.caucho.com/view.php?id=4831 Please monitor the issue.  If we won't fix it we'll mark it as such. Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Deadlock in access log</header>
    <date>Sat Oct 29 19:15:53 CEST 2011</date>
    <body>Hi Paul Thank you for that. For now we've disabled the accesslog in our resin.conf (and lo and behold the problem went away.. ;) ) I know that the 3.1 branch is considered stable and won't get large new features, but the 4.0 branch is still (at least in our opinion) a bit to development-ish in nature, so we are sticking with 3.1 for now. Regards, Jens Dueholm Christensen ________________________________ From: resin-interest-boun...@caucho.com [resin-interest-boun...@caucho.com] On Behalf Of Paul Cowan [co...@caucho.com] Sent: 28 October 2011 19:48 To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Deadlock in access log Hi We’ve been hit rather badly by errors very similar these: http://bugs.caucho.com/view.php?id=3509 during the last few days where we’ve had to restart Resin several time a day. A lot of threads are blocked on the same object at com.caucho.server.log.AccessLog.log(AccessLog.java:345). I could attach a stacktrace, but it’s _very_ similar to those in mantis bug #3509. Our app just stalls on accepting incomming connections while threads and other services within the VM continue to run just fine. We are still on Resin Pro 3.1 (somewhere between 3.1.10 and 3.1.11 as we’ve been using a special build to alliviate another bug that’s not listed in the 3.1.11 changelog) – any chance of a backport of the fixes to the 3.1 branch and a new version – or just a nightly build with the fix? Hi Jens, We're generally only fixing critical bugs in Resin 3.1 branch, but I've created a backport request for bug 3509 for tracking purposes. http://bugs.caucho.com/view.php?id=4831 Please monitor the issue.  If we won't fix it we'll mark it as such. Thanks, Paul Regards, Jens Dueholm Christensen Survey IT</body>
  </mail>
  <mail>
    <header>[Resin-interest] Possible Bug Fix?</header>
    <date>Tue Oct 18 00:09:25 CEST 2011</date>
    <body>In AbstractHttpRequest I am seeing that the global variable _contentLength it appropriately a "long".  Love that.  Been a thorn in our side for a long time. However in looking at this method (also inside of AbstractHttpRequest): protected void setContentLength(CharSegment value) if (i &amp;gt; 0) The method is internally using an int, so the values get truncated or "wrapped" to negative values.  Internally I believe that method should use a long for the local contentLength variable. This should help prevent HttpRequest from incorrectly throwing this for request larger than 2GB (which is what the user community would see in their logs if they are dumping exceptions): throw new com.caucho.server.dispatch.BadRequestException("POST Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible Bug Fix?</header>
    <date>Thu Oct 20 17:26:42 CEST 2011</date>
    <body>If there is agreement that this is a bug, and the fix can be rolled into a snapshot, I can test further to find out where the next gotcha is with large valued contentLengths. Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Monday, October 17, 2011 5:09 PM To: General Discussion for the Resin application server Subject: [Resin-interest] Possible Bug Fix? In AbstractHttpRequest I am seeing that the global variable _contentLength it appropriately a "long".  Love that.  Been a thorn in our side for a long time. However in looking at this method (also inside of AbstractHttpRequest): protected void setContentLength(CharSegment value) if (i &amp;gt; 0) The method is internally using an int, so the values get truncated or "wrapped" to negative values.  Internally I believe that method should use a long for the local contentLength variable. This should help prevent HttpRequest from incorrectly throwing this for request larger than 2GB (which is what the user community would see in their logs if they are dumping exceptions): throw new com.caucho.server.dispatch.BadRequestException("POST Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible Bug Fix?</header>
    <date>Thu Oct 20 18:59:22 CEST 2011</date>
    <body>If there is agreement that this is a bug, and the fix can be rolled into a snapshot, I can test further to find out where the next gotcha is with large valued contentLengths. Thanks. I've filed this as http://bugs.caucho.com/view.php?id=4819 . There's a little bit of a bug backlog, so it'll probably be another week or two. -- Scott Thanks, Aaron *From:*resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] *On Behalf Of *Aaron Freeman *Sent:* Monday, October 17, 2011 5:09 PM *To:* General Discussion for the Resin application server *Subject:* [Resin-interest] Possible Bug Fix? In AbstractHttpRequest I am seeing that the global variable _contentLength it appropriately a "long".  Love that.  Been a thorn in our side for a long time. However in looking at this method (also inside of AbstractHttpRequest): protected void setContentLength(CharSegment value) if (i &amp;gt; 0) The method is internally using an int, so the values get truncated or "wrapped" to negative values.  Internally I believe that method should use a long for the local contentLength variable. This should help prevent HttpRequest from incorrectly throwing this for request larger than 2GB (which is what the user community would see in their logs if they are dumping exceptions): throw new com.caucho.server.dispatch.BadRequestException("POST Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible Bug Fix?</header>
    <date>Thu Oct 20 20:45:19 CEST 2011</date>
    <body>Okidoke, no problem. - Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Thursday, October 20, 2011 11:58 AM To: resin-interest@caucho.com Subject: Re: [Resin-interest] Possible Bug Fix? If there is agreement that this is a bug, and the fix can be rolled into a snapshot, I can test further to find out where the next gotcha is with large valued contentLengths. Thanks. I've filed this as http://bugs.caucho.com/view.php?id=4819 . There's a little bit of a bug backlog, so it'll probably be another week or two. -- Scott Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Monday, October 17, 2011 5:09 PM To: General Discussion for the Resin application server Subject: [Resin-interest] Possible Bug Fix? In AbstractHttpRequest I am seeing that the global variable _contentLength it appropriately a "long".  Love that.  Been a thorn in our side for a long time. However in looking at this method (also inside of AbstractHttpRequest): protected void setContentLength(CharSegment value) if (i &amp;gt; 0) The method is internally using an int, so the values get truncated or "wrapped" to negative values.  Internally I believe that method should use a long for the local contentLength variable. This should help prevent HttpRequest from incorrectly throwing this for request larger than 2GB (which is what the user community would see in their logs if they are dumping exceptions): throw new com.caucho.server.dispatch.BadRequestException("POST Thanks, Aaron</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0 Questions</header>
    <date>Mon Oct 17 22:53:36 CEST 2011</date>
    <body>We are on the latest and greatest Resin 4.0, and would like to have a single resin.xml file that: 1) imports host.xml, which defines: - a keystore to use and the passwords for the keystore 2) on different servers we would like to overwrite the host.xml so we can change: - host aliases - reference a different keystore - add additional host sections Is all of this possible with resin:import, or is it not possible to pull this off? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 Questions</header>
    <date>Wed Oct 19 17:20:19 CEST 2011</date>
    <body>Is anybody using resin:import successfully that could advise on this?  I am still struggling with it. Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Monday, October 17, 2011 3:53 PM To: General Discussion for the Resin application server Subject: [Resin-interest] Resin 4.0 Questions We are on the latest and greatest Resin 4.0, and would like to have a single resin.xml file that: 1) imports host.xml, which defines: - a keystore to use and the passwords for the keystore 2) on different servers we would like to overwrite the host.xml so we can change: - host aliases - reference a different keystore - add additional host sections Is all of this possible with resin:import, or is it not possible to pull this off? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 Questions</header>
    <date>Wed Oct 19 18:47:19 CEST 2011</date>
    <body>Is anybody using resin:import successfully that could advise on this? I am still struggling with it. You can use EL variables like where you've defined -Dext=foo. Is that what you're looking for? -- Scott Thanks, Aaron *From:*resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] *On Behalf Of *Aaron Freeman *Sent:* Monday, October 17, 2011 3:53 PM *To:* General Discussion for the Resin application server *Subject:* [Resin-interest] Resin 4.0 Questions We are on the latest and greatest Resin 4.0, and would like to have a single resin.xml file that: 1) imports host.xml, which defines: - a keystore to use and the passwords for the keystore 2) on different servers we would like to overwrite the host.xml so we can change: - host aliases - reference a different keystore - add additional host sections Is all of this possible with resin:import, or is it not possible to pull this off? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 Questions</header>
    <date>Wed Oct 19 19:45:32 CEST 2011</date>
    <body>Oh geez,  that's so obvious.  * smack myself * Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Wednesday, October 19, 2011 11:46 AM To: resin-interest@caucho.com Subject: Re: [Resin-interest] Resin 4.0 Questions Is anybody using resin:import successfully that could advise on this?  I am still struggling with it. You can use EL variables like where you've defined -Dext=foo. Is that what you're looking for? -- Scott Thanks, Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Monday, October 17, 2011 3:53 PM To: General Discussion for the Resin application server Subject: [Resin-interest] Resin 4.0 Questions We are on the latest and greatest Resin 4.0, and would like to have a single resin.xml file that: 1) imports host.xml, which defines: - a keystore to use and the passwords for the keystore 2) on different servers we would like to overwrite the host.xml so we can change: - host aliases - reference a different keystore - add additional host sections Is all of this possible with resin:import, or is it not possible to pull this off? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 Questions</header>
    <date>Thu Oct 20 08:26:09 CEST 2011</date>
    <body>Moreover, if you are separating things per server, you already have the server.id EL variable to play with. For example, we use it to define different home directories per server instante: so... or something like that should work fine. S! D. El 19/10/2011 19:44, Aaron Freeman escribió: mailto:resin-interest-boun...@caucho.com ] *On Behalf Of *Scott Ferguson mailto:resin-interest-boun...@caucho.com mailto:resin-interest-boun...@caucho.com ] *On Behalf Of *Aaron Freeman</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin classloader leak (possibly caused by the host:default classloader)</header>
    <date>Wed Oct 12 19:23:51 CEST 2011</date>
    <body>Hello everyone, it seems that resin 4.0.23 suffers from a classloader leak. My application's classloader is prevented from being garbage collected. Please have a look at the GC Roots of my applications classloader (after stopping the application and a full garbage collection): Class Name |  Retained Heap --------------------------------------------------------------------------------------------------------------------------------- com.caucho.env.thread.ResinThread @ 0xe27c9a60 http://*:18443-14 Thread                                          |            584 '- &amp;lt;Java Local&amp;gt; com.caucho.network.listen.TcpSocketLinkListener @ 0xe0b86878                                      |          2.976 '- _suspendAlarm com.caucho.util.Alarm @ 0xe279e330 |            760 '- &amp;lt;class&amp;gt; class com.caucho.util.Alarm @ 0xd03f86c0 |        480.928 '- _clock com.caucho.util.AlarmClock @ 0xe0aab790 |        480.720 '- _clockArray com.caucho.util.Alarm[60000] @ 0xe0ac4160 |        480.288 '- [15927] com.caucho.util.Alarm @ 0xe8467708 |            264 '- _contextLoader com.caucho.loader.EnvironmentClassLoader @ 0xe12f7718 |        151.424 '- parent com.caucho.loader.EnvironmentClassLoader @ 0xe11fbde8 |        483.344 '- _attributes java.util.concurrent.ConcurrentHashMap @ 0xe11bef38 |        392.408 '- segments java.util.concurrent.ConcurrentHashMap$Segment[16] @ 0xe11bef68 |        392.336 '- [1] java.util.concurrent.ConcurrentHashMap$Segment @ 0xe11c2a40 |        377.016 '- table java.util.concurrent.ConcurrentHashMap$HashEntry[2] @ 0xe11c2a88 |        376.920 '- [0] java.util.concurrent.ConcurrentHashMap$HashEntry @ 0xe11c2aa0 |        376.880 '- value com.caucho.jsp.el.JspApplicationContextImpl @ 0xe11bbac8          | 376.832 '- _webApp com.caucho.server.webapp.WebApp @ 0xe12103a8                 | 84.256 '- _classLoader com.caucho.loader.EnvironmentClassLoader @ 0xe12108c0|    129.894.632 ---------------------------------------------------------------------------------------------------------------------------------- As you can see three EnvironmentClassLoaders are involved: 0xe12108c0, which is my application classloader (consuming 129 MB of the heap) 0xe11fbde8, which is the classloader with the id host:default 0xe12f7718, which is the classloader for the resin-admin application (which most probably is not important in this case) As you can see, the host:default classloader is still referencing my web application's classloader indirectly (by the entryCache_ Map, referencing to the com.caucho.jsp.el.JspApplicationContextImpl of my web application). What do I have to do to in order that my application classloader can be garbage collected? Thank you and best regards, Patric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin classloader leak (possibly caused by the host:default classloader)</header>
    <date>Wed Oct 12 20:38:43 CEST 2011</date>
    <body>Probably in an action, or even in your ClassLoader code? cause a memory leak very similar to the one you describe. Java internally uses the ThreadDeath throwable to manage internal references between threads and their classloaders.  If they are not being propagated up to the top, bad things will happen. (*Chris*) http://*:18443-14 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Starting Services at Resin Startup</header>
    <date>Wed Oct 12 08:13:39 CEST 2011</date>
    <body>There is a need for us to start few threads as soon as Resin starts up. Can someone guide us.  We are using Resin 4.x</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Starting Services at Resin Startup</header>
    <date>Thu Oct 13 15:36:13 CEST 2011</date>
    <body>I think the cleanest solution is to use listeners...  add a ServletContextListener inside of which you can start/do anything you need ..... There is a need for us to start few threads as soon as Resin starts up. Can someone guide us.  We are using Resin 4.x -- *Eric S. Kreiser* * * Senior Software Architect *M**z**inga** * 5095 Ritter Road . Mechanicsburg, PA  17055 --------------------------------------------------- *Call me:* 717.458.9804 *Fax me:* 717.790.0401 mailto:ekrei...@mzinga.com *Learn more:* http://mzinga.com/v/ekreiser/ *Follow Mzinga:* http://twitter.com/mzinga *Our Customer Experience Community:* http://community.omnisocial.mzinga.com/app/signon/</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Starting Services at Resin Startup</header>
    <date>Wed Oct 12 08:19:48 CEST 2011</date>
    <body>You can use load-on-startup for a servlet that starts these threads in its init(). In web.xml: --</body>
  </mail>
  <mail>
    <header>[Resin-interest] Local deploy after remote deploy</header>
    <date>Thu Sep 29 16:13:36 CEST 2011</date>
    <body>As I am anticipating an end to our class loader leaks, I'm trying out remote deployments again, and they do seem to be working in 4.0.18 - yay! However, once I have remote deployed to a server, Resin will no longer pick up .war files dropped locally in the webapps directory on that server. Or rather, if an updated WAR file is dropped there, Resin will restart the application, but still use the version of the remote deploy. Restarting Resin doesn't help either. Neither does deleting the exploded WAR dir - it will be recreated with some skeleton structure (WEB-INF/classes + WEB-INF/tmp). What I have to do is to delete the $SERVER_ROOT/resin-data/default/.git directory (yes, it took me a while to figure that out the first time...) AND restart. That is, deleting the .git directory and dropping the WAR also is not enough. I haven't bothered with detailed logging yet, but when restarting Resing (without deleting .git) this turns up in the log WebApp[production/webapp/admin.resin/ROOT] cannot read root-directory /error/ROOT When the .git directory has been deleted, there is this in the log [2011-09-29 14:40:21.723] UpdateCallback[bb167ecac021b1e0c7d46b10db03e80599f49706] repository update failed. This is under Resin 4.0.18 with versioning turned off. Is there a known bug here that has been fixed in a newer version? Could I be doing something wrong? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Local deploy after remote deploy</header>
    <date>Thu Sep 29 18:05:05 CEST 2011</date>
    <body>The remote deploy has priority. If you want to switch from remote deploy to a .war, you need to use the undeploy command-line to undeploy the remote web-app first. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] It seems resin 4.0.x does not implement Unified EL	2.2 properly</header>
    <date>Thu Sep 29 15:15:04 CEST 2011</date>
    <body>Hi Scott, I used to bundle JUEL 2.1.x in my webapp and it run fine with resin 4.0.x. After I upgrade to JUEL 2.2.3, some of the el expressions in jsp file threw exceptions. The error method invocation expressions is like: it will produce javax.el.MethodNotFoundException: Cannot find method 'myMethod' in 'class mypackage.MyBean' I replaced java.el package in RESIN_HOME/lib/javaee16.jar with the same package content in juel-2.2.3.jar then everything went fine. So I guess the implementation of java.el in resin maybe is conformed to the EL 2.1 spec but not the EL 2.2 one. I looked at the source of resin el implementation and found java.el.CompositeELResolver did not implemented the public Object invoke(ELContext context, Object base, Object method, method which was added since EL 2.2. any thoughts? -- Wesley Wu</body>
  </mail>
  <mail>
    <header>[Resin-interest] It seems resin 4.0.x does not implement Unified EL	2.2 properly</header>
    <date>Thu Oct 20 21:00:06 CEST 2011</date>
    <body>Hi Scott, I used to bundle JUEL 2.1.x in my webapp and it run fine with resin 4.0.x. After I upgrade to JUEL 2.2.3, some of the el expressions in jsp file threw exceptions. The error method invocation expressions is like: it will produce javax.el.MethodNotFoundException: Cannot find method 'myMethod' in 'class mypackage.MyBean' I replaced java.el package in RESIN_HOME/lib/javaee16.jar with the same package content in juel-2.2.3.jar then everything went fine. So I guess the implementation of java.el in resin maybe is conformed to the EL 2.1 spec but not the EL 2.2 one. I looked at the source of resin el implementation and found java.el.CompositeELResolver did not implemented the public Object invoke(ELContext context, Object base, Object method, method which was added since EL 2.2. any thoughts? -- Wesley Wu</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] It seems resin 4.0.x does not implement Unified EL	2.2 properly</header>
    <date>Fri Oct 21 00:21:59 CEST 2011</date>
    <body>Yep. It's bug with CompositeELResolver. I've filed it as http://bugs.caucho.com/view.php?id=4820 -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 Configuration Sanity Check</header>
    <date>Wed Sep 28 14:36:21 CEST 2011</date>
    <body>To answer one part of your question: In a *nix environment, it is likely that non-root users are not allowed to bind ports &amp;lt; 1024. That is, Resin cannot answer on HTTP (80) or HTTPS (443) request unless running as root. I'd recommend using port forwarding from 80/443 to some port &amp;gt; 1024 and then run Resin as non-root.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 Configuration Sanity Check</header>
    <date>Wed Sep 28 15:03:25 CEST 2011</date>
    <body>Thanks Mattias I thought that the idea was that resin started as root in order to permit binding to the protected ports &amp;lt;1024 and subsequently switched to run as a different user. Our current setup with resin2 and a single server seems to do that. Thank you for taking the time to respond. Can anyone from caucho clarify this? Regards Alan http://maillist.caucho.com/mailman/listinfo/resin-interest -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 Configuration Sanity Check</header>
    <date>Wed Sep 28 18:10:45 CEST 2011</date>
    <body>In Resin 4, the watchdog remains as root and the Resin instance starts as the specified user. There is never any switching of users in a single process; the switching happens during the Resin-instance spawning. If you have multiple Resin servers managed by the same watchdog and some of them need to bind to port 80, the watchdog needs to be started as root. with a &amp;lt;watchdog-port&amp;gt; (or simply &amp;lt;watchdog-port&amp;gt; in the &amp;lt;server&amp;gt;.) ... ... -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 Configuration Sanity Check</header>
    <date>Thu Sep 29 13:15:50 CEST 2011</date>
    <body>Scott I don't think I needed separate watchdog processes: I started with the following in the server-default for both web and app clusters This seemed to prevent resin from starting. - If starting Resin as root on Unix, specify the user name If I only had it in the app tier resin loaded ok If I only had it in the web tier resin failed to load SOLUTION: When I moved it so it was only in the &amp;lt;cluster-default&amp;gt; as a everything seemed much happier with the following status which I think leaves everything in a safe configuration ATHPROD002:/etc/init.d # ./resin status Resin/4.0.22 status for watchdog at 127.0.0.1:6600 watchdog: watchdog-pid: 12774 server 'app-a' : ACTIVE password: ok watchdog-user: root user: resin(webadmin) root: /var/www conf: /etc/resin/resin.xml pid: 12931 uptime: 0 days 00h09 server 'app-b' : ACTIVE password: ok watchdog-user: root user: resin(webadmin) root: /var/www conf: /etc/resin/resin.xml pid: 13038 uptime: 0 days 00h09 server 'web-a' : ACTIVE password: ok watchdog-user: root user: resin(webadmin) root: /var/www conf: /etc/resin/resin.xml uptime: -- ATHPROD002:/etc/init.d # -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 Configuration Sanity Check</header>
    <date>Thu Sep 29 13:47:16 CEST 2011</date>
    <body>Please ignore my previous posting - my configuration only appeared to solve my problem but it just moved it. Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>[Resin-interest] Application Clusters and job-sheduling</header>
    <date>Thu Sep 29 14:36:10 CEST 2011</date>
    <body>Hi How does job-scheduling work in a cluster environment? We have batch jobs we want to run in the context of a cluster - ie only one job should be run for the cluster and not per server instance. I can't find anything in the documentation so far that clarifies whether I can do this in Resin. Will it be safest to just keep the jobs running outside of resin using cron? thanks Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Application Clusters and job-sheduling</header>
    <date>Fri Sep 30 08:50:32 CEST 2011</date>
    <body>Hi again, We are using Quartz scheduler and it has clustering capabilities so the jobs scheduled there are supposed to be run just in one of the hosts, if configured appopriately. I have not been able to test it yet, but given that we'll have different machines, cron is not an option for us and, in fact, we are moving our legacy cron jobs to Quartz jobs to support clustering more easily. I'm not sure if that might be an option for you, but that's how we plan to solve it. S! D. El 29/09/2011 14:35, Alan Wright escribió:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Application Clusters and job-sheduling</header>
    <date>Fri Sep 30 15:19:12 CEST 2011</date>
    <body>Daniel... I use Quartz for exactly this... Quartz clustering works well. Hi again, We are using Quartz scheduler and it has clustering capabilities so the jobs scheduled there are supposed to be run just in one of the hosts, if configured appopriately. I have not been able to test it yet, but given that we'll have different machines, cron is not an option for us and, in fact, we are moving our legacy cron jobs to Quartz jobs to support clustering more easily. I'm not sure if that might be an option for you, but that's how we plan to solve it. S! D. El 29/09/2011 14:35, Alan Wright escribió: Hi How does job-scheduling work in a cluster environment? We have batch jobs we want to run in the context of a cluster - ie only one job should be run for the cluster and not per server instance. I can't find anything in the documentation so far that clarifies whether I can do this in Resin. Will it be safest to just keep the jobs running outside of resin using cron? thanks Alan</body>
  </mail>
  <mail>
    <header>[Resin-interest] Something interesting for People using Resin with	Oracle</header>
    <date>Wed Sep 28 15:14:13 CEST 2011</date>
    <body>At the same time as upgrading to Resin 4 we are upgrading to Oracle 11gR2. Starting/stopping resin was very non-deterministic seeming to hang sometimes during application startup with references to connection timeouts in the error logs. SQLRecoverableException: IO Error: Connection reset The problem was traced to a drying up of the "entropy poll" preventing oracle jdbc from allocating connections until the pool was replenished The following article explains in full http://www.usn-it.de/index.php/2009/02/20/oracle-11g-jdbc-driver-hangs-blocked-by-devrandom-entropy-pool-empty The solution was to add the following to resin.xml Hope this helps someone. Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Something interesting for People using Resin with Oracle</header>
    <date>Wed Sep 28 15:51:01 CEST 2011</date>
    <body>On Wed, Sep 28, 2011 at 10:13, Alan Wright Add the following what? FC</body>
  </mail>
  <mail>
    <header>[Resin-interest] Something interesting for People using Resin with	Oracle</header>
    <date>Wed Sep 28 16:20:21 CEST 2011</date>
    <body>At the same time as upgrading to Resin 4 we are upgrading to Oracle 11gR2. Starting/stopping resin was very non-deterministic seeming to hang sometimes during application startup with references to connection timeouts in the error logs. SQLRecoverableException: IO Error: Connection reset The problem was traced to a drying up of the "entropy poll" preventing oracle jdbc from allocating connections until the pool was replenished The following article explains in full http://www.usn-it.de/index.php/2009/02/20/oracle-11g-jdbc-driver-hangs-blocked-by-devrandom-entropy-pool-empty The solution was to add the following to resin.xml new connection requires random number but generator uses entropy pool filled by random user actions - server has no connected user so entropy Hope this helps someone. Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Something interesting for People using Resin with Oracle</header>
    <date>Wed Sep 28 17:13:22 CEST 2011</date>
    <body>Good to know Alan, thanks. Who would have thought servers accessing databases might be located in dedicated machines? Way to go, Oracle! :D S! D. El 28/09/2011 16:19, Alan Wright escribió: http://www.usn-it.de/index.php/2009/02/20/oracle-11g-jdbc-driver-hangs-blocked-by-devrandom-entropy-pool-empty -- ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) Web Services Centre for Information and Technology Balearic Islands University (SPAIN) -------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Something interesting for People using Resin	with Oracle</header>
    <date>Fri Sep 30 20:50:46 CEST 2011</date>
    <body>We are currently experiencing a problem when we restart where the ConnectionPools to Oracle take a long time to be established and cause a long delay for our production machine to start.  It almost feels like the old ConnectionPools have to timeout, even though we have shut the entire Resin instance down and restarted the entire JVM. When I saw your post below I got excited because it's very similar to the issue we are having, but we don't have the SQLRecoverableException anywhere that I am seeing.  Also it's not really undeterministic -- it always happens.  How long the connections to Oracle take are sort of random, but it's way too long. When I went into /resin-admin/  I see that this is implicitly being set: So adding your argument won't help us. Any other ideas on what could cause resin-4.0.18 to take so darn long to fire up as regards connection to Oracle 11g? Thanks, -a mailto:resin-interest- 11gR2. http://www.usn-it.de/index.php/2009/02/20/oracle-11g-jdbc-driver-hangs http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Something interesting for People using Resin with Oracle</header>
    <date>Sat Oct 01 11:30:24 CEST 2011</date>
    <body>Have you typed jvm-arg exactly as it is in your resin.xml? I think it is important that it should be file:///dev/urandom I was frequently getting the long delays on startup like yourself. Also you could try an older jdbc driver version to see if the problem goes away either as a solution, or just to more clearly isolate the problem. Regards Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Something interesting for People using Resin	with Oracle</header>
    <date>Mon Oct 03 17:24:04 CEST 2011</date>
    <body>Alan, No, I assumed that a URL versus a file declaration would be the same.  I will use the URL version instead and try it. Also interesting idea as regards JDBC driver swap out.  We are using ojdbc6.jar for an 11g R1 database.  What combination are you using? Thanks, Aaron mailto:resin-interest- http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Something interesting for People using Resin with Oracle</header>
    <date>Mon Oct 03 17:37:03 CEST 2011</date>
    <body>Aaron I am now using ojdbc6 against 11gR2 but was using ojdbc14 against 11gR2 for a while in our migration environment before I changed the driver and started to experience the problems. Hope this helps Alan mailto:resin-interest- http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>[Resin-interest] Help - Resin make failing in Solaris 10 environment</header>
    <date>Thu Oct 06 19:14:31 CEST 2011</date>
    <body>I am getting the following errors when running make on Solaris 10 for 4.0.23 I have not done this on Solaris yet for resin 4 though I have resin 2 made on the same box. Are these errors something I need to worry about? Can these be fixed by me or am I stuck waiting for a resolution from Caucho? Thanks for any help Alan resin@dev&amp;gt; make (cd modules/c/src; make) for dir in common resin_os resin resinssl; do (cd $dir; make); done cc -c  -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI stream.c cc -c  -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI config.c "config.c", line 609: prototype mismatch: 2 args passed, 3 expected "config.c", line 629: prototype mismatch: 2 args passed, 3 expected "config.c", line 1052: prototype mismatch: 2 args passed, 3 expected "config.c", line 1155: prototype mismatch: 2 args passed, 3 expected cc: acomp failed for config.c *** Error code 2 make: Fatal error: Command failed for target `config.o' Current working directory /opt/resin-pro-4.0.23-build/modules/c/src/common cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -m64 -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -c boot.c "boot.c", line 164: warning: implicit function declaration: resin_printf_exception cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -m64 -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -c java.c cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -m64 -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -c jni_os.c cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -m64 -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -c jni_jvmti.c cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -m64 -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -c jni_socket.c cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -m64 -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -c memory.c cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -m64 -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -c std.c cc -m64 -G -mt -z defs -z text -R/usr/lib/64:/usr/sfw/lib/64:/usr/local/lib/sparcv9 -YP,/usr/lib/64:/usr/sfw/lib/64:/usr/local/lib/sparcv9 -G -mt -z defs -z text -o libresin_os.so boot.o java.o jni_os.o jni_jvmti.o jni_socket.o memory.o std.o -lnsl -lsocket -lthread -lc ld: warning: option -z[defs|nodefs] appears more than once, first setting taken cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -m64 -mt -KPIC -xO2  -c  jni_vfs.c "jni_vfs.c", line 750: warning: implicit function declaration: pthread_self cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -m64 -mt -KPIC -xO2  -c  profile.c cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -m64 -mt -KPIC -xO2  -c  heap.c "heap.c", line 63: warning: integer overflow detected: op "&amp;lt;&amp;lt;" "heap.c", line 91: warning: integer overflow detected: op "&amp;lt;&amp;lt;" "heap.c", line 119: warning: integer overflow detected: op "&amp;lt;&amp;lt;" "heap.c", line 146: warning: integer overflow detected: op "&amp;lt;&amp;lt;" "heap.c", line 149: warning: integer overflow detected: op "&amp;lt;&amp;lt;" cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -m64 -mt -KPIC -xO2  -c  lru.c "lru.c", line 594: warning: implicit function declaration: qsort cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -m64 -mt -KPIC -xO2  -c  symbol.c cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -m64 -mt -KPIC -xO2  -c  crc64.c "crc64.c", line 30: warning: integer overflow detected: op "&amp;lt;&amp;lt;" cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -m64 -mt -KPIC -xO2  -c  stat.c "stat.c", line 85: warning: implicit function declaration: getloadavg cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -m64 -mt -KPIC -xO2  -c  mmap_file.c "mmap_file.c", line 119: warning: implicit function declaration: memset cc -m64 -G -mt -z defs -z text -R/usr/lib/64:/usr/sfw/lib/64:/usr/local/lib/sparcv9 -YP,/usr/lib/64:/usr/sfw/lib/64:/usr/local/lib/sparcv9 -G -mt -z defs -z text -o libresin.so ../resin_os/std.o ../resin_os/memory.o ../resin_os/java.o jni_vfs.o profile.o heap.o lru.o symbol.o crc64.o stat.o mmap_file.o -lnsl -lsocket -lthread -lc ld: warning: option -z[defs|nodefs] appears more than once, first setting taken cc -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -I../resin -DCPU=\"i386\" -DOS=  -m64 -mt -KPIC -xO2  -c  ssl_stub.c cc -m64 -G -mt -z defs -z text -R/usr/lib/64:/usr/sfw/lib/64:/usr/local/lib/sparcv9 -YP,/usr/lib/64:/usr/sfw/lib/64:/usr/local/lib/sparcv9 -G -mt -z defs -z text -o libresinssl.so ssl_stub.o ../resin_os/memory.o ../resin_os/std.o ../resin_os/java.o -lnsl -lsocket -lthread -lc ld: warning: option -z[defs|nodefs] appears more than once, first setting taken if test -r ./modules/c/src/Makefile; then \ cd ./modules/c/src; make; \ fi for dir in common resin_os resin resinssl; do (cd $dir; make); done cc -c  -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI config.c "config.c", line 609: prototype mismatch: 2 args passed, 3 expected "config.c", line 629: prototype mismatch: 2 args passed, 3 expected "config.c", line 1052: prototype mismatch: 2 args passed, 3 expected "config.c", line 1155: prototype mismatch: 2 args passed, 3 expected cc: acomp failed for config.c *** Error code 2 make: Fatal error: Command failed for target `config.o' Current working directory /opt/resin-pro-4.0.23-build/modules/c/src/common -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Help - Resin make failing in Solaris 10 environment - Additional Info</header>
    <date>Thu Oct 06 19:32:51 CEST 2011</date>
    <body>In addition the following may help understanding by Caucho engineers: resin@dev&amp;gt; uname -a SunOS ATH000.ATHENESYSTEMS.COM 5.10 Generic_147441-03 i86pc i386 i86pc Resin Configuration summary: RESIN_HOME  : /usr/local/resin root    : /var/www conf    : /etc/resin log     : /var/log/resin plugins : common resin_os resin resinssl init    : /etc/init.d/resin JAVA_HOME: /usr/jdk/latest + 64-bit JNI in -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris + JNI CFLAGS: -mt -KPIC -xO2 -m64 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI + poll() for keepalives + not using OpenSSL -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Help - Resin make failing in Solaris 10 environment - Partial Fix</header>
    <date>Fri Oct 07 11:10:02 CEST 2011</date>
    <body>FYI I have been able to get the files to compile by modifying calls to ctime_r in config.c so that they include a 3rd parameter as below. All the usages I found were in an #ifndef statement. I am not familiar with c so don't know what you do for a more general solution that would work on Solaris and the rest of non-windows platforms but it feels like a nested if to test for SOLARIS versions that need the extra parameter would help. #ifndef WIN32 ??# ifdef SOLARIS.POSIX1C ??#else ??#end #else #endif for Caucho engineers: from http://lists.samba.org/archive/samba-technical/2005-June/041387.html: Solaris needs a size parameter to ctime_r(). As this is different from The Open Group/POSIX  Draft 6 (around Solaris 2.4), but conformant to the final POSIX.1c (around Solaris 8?) standard, a test in Configure is probably needed.  I know HP-UX does it right too, but DEC did it the old way.  Solaris uses _POSIX_PTHREAD_SEMANTICS and _REENTRANT flags,  if that helps... I am still getting warnings: "heap.c", line 63: warning: integer overflow detected: op"&amp;lt;&amp;lt;" "heap.c", line 91: warning: integer overflow detected: op"&amp;lt;&amp;lt;" "heap.c", line 119: warning: integer overflow detected: op"&amp;lt;&amp;lt;" "heap.c", line 146: warning: integer overflow detected: op"&amp;lt;&amp;lt;" "heap.c", line 149: warning: integer overflow detected: op"&amp;lt;&amp;lt;" Which seem to relate to #define TAG_SEEN (1LL &amp;lt;&amp;lt; 63) Line 35 and subsequent uses of this. It would be nice to get a clean compile in future..... Regards Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Help - Resin make failing in Solaris 10 environment - Partial Fix</header>
    <date>Fri Oct 07 17:36:40 CEST 2011</date>
    <body>Thanks, I've filed this as a bug report. -- Scott http://lists.samba.org/archive/samba-technical/2005-June/041387.html:</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin on Solaris 10 environment - more bumps in	the road</header>
    <date>Tue Oct 11 18:25:39 CEST 2011</date>
    <body>Hi I have been finally got resin running my application on Solaris 10 which is my development environment - but not with 64 bit java enabled. Compared to getting resin 2.1.17 running on Solaris or getting Resin 4 running on SLES11 the journey has been difficult. Production environment is now SLES11 which was a breeze to configure by comparison. I am not a Unix/Solaris c expert and so the problems I have experienced may well be down to my own ignorance - but getting Resin environment running under Solaris that feels like it has no loose ends has so far eluded me. ??????????????????????????????????????????????????????????????????????????????? Is Resin 4 on Solaris supported? Is the build/install tested in Solaris environments. Is it safe to run resin in a development environment with the issues as described below? Is there a simple fix to jni_vfs.c that I can put in for now to get a clean compile until the issue is (hopefully) resolved in the Caucho source. ?????????????????????????????????????????????????????????????????????????????????????? ./configure --prefix=/usr/local/resin --with-resin-root=/var/www --with-java-home=/usr/jdk/latest --with-resin-conf=/etc/resin --with-resin-log=/var/log/resin gives me: Resin Configuration summary: RESIN_HOME  : /usr/local/resin root    : /var/www conf    : /etc/resin log     : /var/log/resin plugins : common resin_os resin resinssl init    : /etc/init.d/resin JAVA_HOME: /usr/jdk/latest + 32-bit JNI in -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris + JNI CFLAGS: -mt -KPIC -xO2 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI + poll() for keepalives + not using OpenSSL but "make" gives me errors: cc -mt -KPIC -xO2 -DHAS_SOCK_TIMEOUT -D__SOLARIS__ -DHAS_JVMTI -DRESIN_HOME=\"/usr/local/resin\" -I/usr/jdk/latest/include -I/usr/jdk/latest/include/solaris -I../common -DCPU=\"i386\" -DOS=  -mt -KPIC -xO2  -c  jni_vfs.c "jni_vfs.c", line 750: warning: implicit function declaration: pthread_self "jni_vfs.c", line 1516: prototype mismatch: 3 args passed, 2 expected cc: acomp failed for jni_vfs.c *** Error code 2 make: Fatal error: Command failed for target `jni_vfs.o' Current working directory /opt/resin-pro-4.0.23-build/modules/c/src/resin The offending code seems to be readdir_r(dir, entry_buffer, &amp;amp;dp) researching function I found: http://permalink.gmane.org/gmane.comp.db.libdbi.devel/405 Default readdir_r on Solaris takes two arguments contrary to POSIX implementation which takes three. This can be changed by defining _POSIX_PTHREAD_SEMANTICS. Instead of explicit define for solaris platform use AC_USE_SYSTEM_EXTENSIONS macro which defines useful variables for running platform (should also define _GNU_SOURCE required by asprintf). Additionally include minimum autoconf version requirement. I am not knowledgable enough in c to put this right. When my application loads I am seeing the following errors in the logs but so far it appears to run. 'resin' for com.caucho.vfs.JniFilePathImpl. Resin expects to find this library in: (Unix) /usr/local/resin/libexec/libresin.so make; make install. The JVM exception was: java.lang.UnsatisfiedLinkError: no resin in java.library.path library 'resin' for com.caucho.network.listen.JniSelectManager. Resin expects to find this library in: (Unix) /usr/local/resin/libexec/libresin.so make; make install. The JVM exception was: java.lang.UnsatisfiedLinkError: no resin in java.library.path -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>[Resin-interest] Using Google id's with Resin</header>
    <date>Sun Sep 25 18:45:32 CEST 2011</date>
    <body>We have a Resin powered JEE app and are expanding it to work with Android. One of the cool things on Android is you know the user is logged into a Google account. With the Google App Engine, you can do more that just authenticate since they provide all the back end service data. For example, if I created a simple App Engine app which asked for the Google id and password, I could then say "Hi John" having pulled John as the real username, rather than the email address. So to expand we can either (gulp) lose Resin and move entirely to the App Engine, which I really don't want to do, or replicate the authentication system Google uses, as in the simple example above, to do it on Resin (which is what I prefer). In other words I want to authenticate a valid Google user using Resin but never see the password. I see this issue as becoming more and more common, for example Google just opened the API for Google+, and a great use case for us is to be able to access a users circles from server side java. So as usual its over to you smarts on this list for ideas, or suggestions such as if I should be looking at some OpenId or whatever based system I can roll in ;-) Sincere thanks...</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using Google id's with Resin</header>
    <date>Sun Sep 25 19:57:04 CEST 2011</date>
    <body>How are you getting the person's real name out of GAE's UserService? I don't see that.  Maybe this is just something you get with Android auth? The short answer is to use OpenID (and OAuth to get permission on extra fields).  But there is a problem with this - if you have a database full of google ids (not openids) there's no way to migrate. You can switch GAE to federated login and you'll get both the google id and openid, which will let you start populating your database when people log in, but to go full openid you'll have to do email matching with the accounts that haven't set their openid.  Messy. Jeff http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using Google id's with Resin</header>
    <date>Sun Sep 25 23:40:23 CEST 2011</date>
    <body>Could be, though where I got that from stongly suggests just being authed in a GAE app gives it to you: http://www.youtube.com/watch?v=M7SxNNC429U (From 13 min onwards) http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using Google id's with Resin</header>
    <date>Tue Sep 27 09:09:26 CEST 2011</date>
    <body>I'd have to look through their sample code to see what they're doing, but I can tell you that the User object you get back from the UserService does not reliably return a human name.  I've never seen it return anything other than an email address. http://code.google.com/appengine/docs/java/javadoc/com/google/appengine/api/users/User.html#getNickname () But it doesn't really matter, because the UserServiceFactory does not work outside of GAE. Jeff http://www.youtube.com/watch?v=M7SxNNC429U (From 13 min onwards) http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using Google id's with Resin</header>
    <date>Sat Oct 15 10:20:08 CEST 2011</date>
    <body>Hi Jeff &amp;amp; list! Thanks. This is something I have to do now. I was hoping for some example I can use, in our case there is nothing legacy at all, its an empty db. All I want is for users to visit the site, see one of those popup boxes you see where it asks you to login with Google, get authenticated and continue back to my Resin site as if they are logged into Google. I don't need any of the extra fields mentioned earlier - just the fact they are have a legit Google acc. I read up on federated login and think that's it, Scott also mentioned a future Resin release would include this but I'm hoping for something quick now please. Thanks -- Carl http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using Google id's with Resin</header>
    <date>Wed Sep 28 18:35:38 CEST 2011</date>
    <body>I've also added this as a bug report at http://bugs.caucho.com/view.php?id=4780 . At minimum, we should have a built-in open-id authenticator and login. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.22 Errors in logs after start</header>
    <date>Thu Sep 15 15:58:48 CEST 2011</date>
    <body>Hi I am migrating from 2 to 4.00.22 So far I am starting a web-tier with one load-balance server and an app tier with two app servers. It starts successfully and the docs and admin applications function. After startup I am seeing errors in the logs, but then all these errors stopped after about 2 hours - so it appears they are related. There are references to "Heartbeats" in the errors but when I checked server health in the resin-admin app they all showed OK for heartbeats. Any suggestions as to why these errors appear and what steps should be taken would be great. The errors are as follows: in jvm-web-a.log - every 2 minutes TriadFuture[global-ca...@aaa.web-tier.admin.resin] query timeout: 60000 to: global-ca...@aaa.app-tier.admin.resin query: GlobalCacheHeartbeat[2ff0dbf6,59ff8cba,1316086342878] at com.caucho.cloud.bam.TriadFuture.get(TriadFuture.java:80) at com.caucho.cloud.bam.TriadFirstQuery.get(TriadFirstQuery.java:191) at com.caucho.cloud.bam.BamTriadSender.queryTriadFirstRemote(BamTriadSender.java:675) at com.caucho.cloud.globalcache.GlobalCacheActor.sendHeartbeat(GlobalCacheActor.java:224) at com.caucho.cloud.globalcache.GlobalCacheManager.sendHeartbeatImpl(GlobalCacheManager.java:144) at com.caucho.cloud.globalcache.GlobalCacheManager$HeartbeatTask.run(GlobalCacheManager.java:200) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) in jvm-app-a.log - repeating but no exact pattern [11-09-15 12:33:21.774] ClusterServer[id=web-a] notify-heartbeat-stop load data for HashKey[59ff8cba] from triad MnodeValue[value=HashKey[59ff8cba],flags=0x6,version=1316086342878,lease=-1] ProCacheEntry[key=null,keyHash=2ff0dbf6,owner=C_A] [11-09-15 12:34:21.774] ClusterServer[id=web-a] notify-heartbeat-stop [11-09-15 12:34:21.863] GlobalCacheActor[global-ca...@aaa.app-tier.admin.resin]: CloudPod[0,main,cluster=web-tier] data is missing for HashKey[59ff8cba] [11-09-15 12:35:21.774] ClusterServer[id=web-a] notify-heartbeat-stop [11-09-15 12:36:21.774] ClusterServer[id=web-a] notify-heartbeat-stop [11-09-15 12:36:21.864] GlobalCacheActor[global-ca...@aaa.app-tier.admin.resin]: CloudPod[0,main,cluster=web-tier] data is missing for HashKey[59ff8cba] [11-09-15 12:37:21.774] ClusterServer[id=web-a] notify-heartbeat-stop [11-09-15 12:38:21.774] ClusterServer[id=web-a] notify-heartbeat-stop in jvm-app-b.log - repeating every minute [11-09-15 12:32:21.866] ClusterServer[id=web-a] notify-heartbeat-stop [11-09-15 12:33:21.774] ClusterServer[id=web-a] notify-heartbeat-stop [11-09-15 12:34:21.774] ClusterServer[id=web-a] notify-heartbeat-stop [11-09-15 12:35:21.774] ClusterServer[id=web-a] notify-heartbeat-stop -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.22 Errors in logs after start</header>
    <date>Thu Sep 15 16:07:25 CEST 2011</date>
    <body>Apologies - the errors did not stop - I had copied the files for review and forgotten that I had done so. The errors continue with the same pattern, although resin-admin looks OK Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.22 Errors in logs after start</header>
    <date>Thu Sep 15 17:12:29 CEST 2011</date>
    <body>Hi I am migrating from 2 to 4.00.22 So far I am starting a web-tier with one load-balance server and an app tier with atriad of app servers. It starts successfully and the docs and admin applications function. watchdog-manager.log looks like below: I tried adding sec:AdminAuthenticator as per "resin-admin-command-line.xtp" but it lead to new errors with the resin-admin-authenticator apparently duplicating the one already declared in the resin.xml generated by resin install.  This is confusing....... 1.6.0_27-b07, ANSI_X3.4-1968, en 20.2-b06, 64, mixed mode, Sun Microsystems Inc. WebApp[production/webapp/admin.resin/ROOT] active reasons HmtpServlet[WebApp[production/webapp/admin.resin/ROOT]] requires an active com.caucho.security.Authenticator because HMTP messaging requires authenticated login for security.  In the resin.xml, add an Thanks for any pointers Regards alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.22 Errors in logs after start</header>
    <date>Thu Sep 15 19:37:36 CEST 2011</date>
    <body>I've added this as a bug report http://bugs.caucho.com/view.php?id=4764 . We should rename the "GlobalCacheHeartbeat" to something else to avoid the confusion. It's not the same as the main heartbeat. Basically, it's the app-tier telling the web-tier about its current dynamic server configuration. It's a "heartbeat" only because it's a push, rather than a poll operation. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] OraclePreparedStatement under Resin 4.0.22</header>
    <date>Tue Sep 20 18:13:06 CEST 2011</date>
    <body>I am migrating from 2 to 4.00.22 We make use of OraclePreparedStatement to take advantage of setting parameters by name. This worked fine under Resin 2. We get the datasource Context env = (Context) new System.out.println(Constants.GENERAL_CONNECTION_POOL + " is an and then in another class we use it: OraclePreparedStatement ps = (OraclePreparedStatement) etc...... BUT under resin 4 we are getting errors that we cannot cast the com.caucho.sql.UserPreparedStatement to OraclePreparedStatement. Do we really have to abandon OraclePreparedStatement and named parameters? I have tried casting the connection and such like but the caucho.sql.UserXXXX seems to take over everything. Any help or pointers would be welcome. Thanks Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] OraclePreparedStatement under Resin 4.0.22</header>
    <date>Tue Sep 20 18:42:15 CEST 2011</date>
    <body>You should use the JDBC unwrap() method (which is newer than Resin 2): -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] OraclePreparedStatement under Resin 4.0.22</header>
    <date>Tue Sep 20 19:47:20 CEST 2011</date>
    <body>Thank you Scott - your speedy response is appreciated - I will try it first thing tomorrow. Regards Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>[Resin-interest] MD5 base64 hash algorithm differences between	resin 2 and 4</header>
    <date>Wed Sep 21 15:51:57 CEST 2011</date>
    <body>--Scott thanks - preparedStatement.unwrap() did the job for using OraclePreparedStatement but given the JavaDoc warning about the cost of calling unwrap() we are have to make a policy decision to only use OraclePreparedStatement where we really need a feature such as named parameters -- I am still migrating from 2 to 4.00.22 Old logins are not working and it seems there is an acknowledged difference between the implementations of the algorithm between resin 2&amp;amp;  4. eg: password=  TzW4CeGhlPNePIaacjYO6w==  dbPassword(created under resin 2)= TzW4CeGhlPNePIaacjYODr  digest=  MD5-base64 It seems the difference is only for the last few characters. Presumably if the difference in the implementation is just to do with the length of the generated string and/or padding then this could be relied upon. If I implement a scheme to replace the correct encodings as users login can I rely on an assumption that the first 15 characters will match for the same password under each implementation to provide a good enough match that triggers an update of the database with the full/correct encoding? I have seen reference in forums to a digest option "old-encoding", is this still available? If it is how would I amend the following to get a copy of the old digest value? digest.setAlgorithm("MD5"); // Must match resin.conf digest.setFormat("base64"); // Must match resin.conf aPasswordDigest = digest.getPasswordDigest(userNameValue, If I can't rely 100% on the similarity of the first chars of the encoded password to identify valid logins and update the encoding I would like to be able to check the dbpassword against both encodings and update the db with the correct encoding as necessary. Asking users for passwords is not an option and wholesale resetting of passwords is not ideal from a customer service perspective. Thanks in advance for any clarification. Regards Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] MD5 base64 hash algorithm differences	betweenresin 2 and 4</header>
    <date>Wed Sep 21 16:08:15 CEST 2011</date>
    <body>Alan, while migrating from 2.1 to 3.1 we've had a similar issue and it could be solved by explicitly using "old-encoding". Maybe you could find useful information in this thread: http://maillist.caucho.com/pipermail/resin-interest/2009-February/003334.html -- Steffen -----Ursprüngliche Nachricht----- Von: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] Im Auftrag von Alan Wright Gesendet: Mittwoch, 21. September 2011 15:51 An: General Discussion for the Resin application server Betreff: [Resin-interest] MD5 base64 hash algorithm differences betweenresin 2 and 4 --Scott thanks - preparedStatement.unwrap() did the job for using OraclePreparedStatement but given the JavaDoc warning about the cost of calling unwrap() we are have to make a policy decision to only use OraclePreparedStatement where we really need a feature such as named parameters -- I am still migrating from 2 to 4.00.22 Old logins are not working and it seems there is an acknowledged difference between the implementations of the algorithm between resin 2&amp;amp;  4. eg: password=  TzW4CeGhlPNePIaacjYO6w==  dbPassword(created under resin 2)= TzW4CeGhlPNePIaacjYODr  digest=  MD5-base64 It seems the difference is only for the last few characters. Presumably if the difference in the implementation is just to do with the length of the generated string and/or padding then this could be relied upon. If I implement a scheme to replace the correct encodings as users login can I rely on an assumption that the first 15 characters will match for the same password under each implementation to provide a good enough match that triggers an update of the database with the full/correct encoding? I have seen reference in forums to a digest option "old-encoding", is this still available? If it is how would I amend the following to get a copy of the old digest value? digest.setAlgorithm("MD5"); // Must match resin.conf digest.setFormat("base64"); // Must match resin.conf aPasswordDigest = digest.getPasswordDigest(userNameValue, If I can't rely 100% on the similarity of the first chars of the encoded password to identify valid logins and update the encoding I would like to be able to check the dbpassword against both encodings and update the db with the correct encoding as necessary. Asking users for passwords is not an option and wholesale resetting of passwords is not ideal from a customer service perspective. Thanks in advance for any clarification. Regards Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] MD5 base64 hash algorithm differences	betweenresin 2 and 4</header>
    <date>Wed Sep 21 16:40:33 CEST 2011</date>
    <body>Thanks for taking the time to make the suggestion Steffen I had seen this thread i my research on the problem - I am trying to find out if the old encoding is available for use when working with a digest in the code so I can calculate both digest until all users have migrated. Regards Alan http://maillist.caucho.com/pipermail/resin-interest/2009-February/003334.html -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] MD5 base64 hash algorithm	differences	betweenresin 2 and 4</header>
    <date>Wed Sep 21 20:39:03 CEST 2011</date>
    <body>I believe the problem was related to an incorrect Base64 tail encoding. old-encoding was removed in Resin 4. One option would be to write a utility to call PasswordDigest from a Resin 2 jar.  According to release notes the issue was fixed in Resin 3.0.3. -Paul http://maillist.caucho.com/pipermail/resin-interest/2009-February/003334.html http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>[Resin-interest] non-serializable type errors in logs for Resin 4</header>
    <date>Fri Sep 23 13:00:36 CEST 2011</date>
    <body>Hi We are in the process of migrating from Resin 2 to Resin 4.0.22 We are seeing errors like the following in the logs: SessionImpl[aaauOtLVNFKQddEwiHvkt,] attribute 'cadb' value is non-serializable type 'com.athene.jaffa.beans.BusinessDocSettingsBean' What is the change in Resin 4 that causes this where it was not an issue under Resin 2? Do we need all our beans to implement the Serializable interface for Resin 4? Thanks Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] non-serializable type errors in logs for Resin	4</header>
    <date>Fri Sep 23 18:01:54 CEST 2011</date>
    <body>Basically everything that is put into the session must be Serializable is you have the &amp;lt;distributable/&amp;gt; element in web.xml.  If you don't have that setting then it shouldn't  be required. (*Chris*) http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4 Configuration Sanity Check</header>
    <date>Wed Sep 28 13:48:04 CEST 2011</date>
    <body>Hi I am migrating from resin 2 to 4.0.22 and have a single host configured with a web-loadbalance tier (1 server) and an application tier (3 servers). We have elected to do this for resilience and also to make adding hosts at a later date easier to implement. We start 3 servers on the app-tier to create a "triad" but it may be that we only really need 2 servers to get basic failover resilience. Is there any benefit from having a triad or am i just wasting resources with the overhead of loading the same application environment 3 times? Also each of the app-tier servers is pointing at the same webapp directory since they are all on the same host. Is this OK or is it dangerous? Additionally the application is started as root and for the app tier we use &amp;lt;user&amp;gt; and &amp;lt;group&amp;gt; to change the user.  When we try to do the same thing in the web-loadbalancer tier the application fails to start. Is this normal/to be expected? Is it safe for the web-tier to be running as root? Thanks to those who have responded to my earlier queries. Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 Configuration Sanity Check</header>
    <date>Wed Sep 28 17:29:45 CEST 2011</date>
    <body>Hi Alan, Given that Resin by default creates work and tmp directories in the WEB-INF directory of each application, it might be risky to 3 instances of the application fiddling with those files, so it might be better to separate those directories per instance. I haven't done so with 4.X so I can't offer you a complete sample configuration file, but using: http://caucho.com/resin-4.0/reference.xtp#tempdir and http://caucho.com/resin-4.0/reference.xtp#workdir You might want to do something similar with the log files to distinguish between them, for example in Resin 3 we use something like: so we get a log file per server. I hope it helps, D. ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) Web Services Centre for Information and Technology Balearic Islands University (SPAIN) ------------------------------------------- El 28/09/2011 13:47, Alan Wright escribió: ... ...</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 Configuration Sanity Check</header>
    <date>Thu Sep 29 13:08:15 CEST 2011</date>
    <body>Thank you Daniel - where there are multiple Resin servers on a single - physical host to ensure different instances do not clash. - If clustering is changed to server per physical host these http://caucho.com/resin-4.0/reference.xtp#tempdir http://caucho.com/resin-4.0/reference.xtp#workdir -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4 Configuration Sanity Check</header>
    <date>Wed Sep 28 19:15:43 CEST 2011</date>
    <body>Three might be overkill in your configuration. Statistically, it would give you a better resilience. A main scenario for the triad was a customer case where they took down servers periodically for maintenance and had a crash at the same time (this was before the triad or the hub-and-spoke model and with an 8-server cluster), and therefore some of their persistent sessions were lost. The three server triad gives you a backup, even when you take down a triad server deliberately. I don't think that scenario applies in your case. Another main reason is failover load. On a fully-loaded system, taking down (or crashing) one of three servers means the other two work 50% harder. If there were only two, it would be 100% which could cause a cascading failure. That scenario doesn't apply because your backup servers are using the same CPU, so you shouldn't have a cascading failure. In your case, since you only have the extra servers for reliability, and they're on the same machine, the third server isn't as important. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0.20 - Problem with my HttpSessionListener</header>
    <date>Thu Sep 01 00:29:18 CEST 2011</date>
    <body>I have a session listener that I use to clear out certain cached items etc... on session destroy (some items are in a database). I  get a "NameNotFoundException" when trying to access any of my db connection pools if the Session Listener is being executed by SessionManager.handleAlarm() but things work fine if it is a by product of SessionManager.removeSession (like when a request thread calls invalidate on a session). I have the "database" nodes in the resin config under "web-app", but it made no difference if I move them all the way up to the "resin" level. Any help would be appreciated. Thanks Eric S. Kreiser</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.20 - Problem with my HttpSessionListener</header>
    <date>Thu Sep 01 22:42:55 CEST 2011</date>
    <body>Hi Eric, This sounds like a classloader issue. Can you verify if Resin is running with -Djava.system.class.loader=com.caucho.loader.SystemClassLoader Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.20 - Problem with my HttpSessionListener</header>
    <date>Fri Sep 02 14:43:50 CEST 2011</date>
    <body>Yes Resin is running with -Djava.system.class.loader=com.caucho.loader.SystemClassLoader. And yes, it does "feel" like a class loader issue... I have a session listener that I use to clear out certain cached items etc... on session destroy (some items are in a database). I  get a "NameNotFoundException" when trying to access any of my db connection pools if the Session Listener is being executed by SessionManager.handleAlarm() but things work fine if it is a by product of SessionManager.removeSession (like when a request thread calls invalidate on a session). I have the "database" nodes in the resin config under "web-app", but it made no difference if I move them all the way up to the "resin" level. Any help would be appreciated. Hi Eric, This sounds like a classloader issue. Can you verify if Resin is running with -Djava.system.class.loader=com.caucho.loader.SystemClassLoader Thanks, Paul Thanks Eric S. Kreiser</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.20 - Problem with my HttpSessionListener</header>
    <date>Thu Sep 08 19:47:16 CEST 2011</date>
    <body>No one else does "cleanup" on session destory?  No one else uses 4.0.20? Yes Resin is running with -Djava.system.class.loader=com.caucho.loader.SystemClassLoader. And yes, it does "feel" like a class loader issue... I have a session listener that I use to clear out certain cached items etc... on session destroy (some items are in a database). I  get a "NameNotFoundException" when trying to access any of my db connection pools if the Session Listener is being executed by SessionManager.handleAlarm() but things work fine if it is a by product of SessionManager.removeSession (like when a request thread calls invalidate on a session). I have the "database" nodes in the resin config under "web-app", but it made no difference if I move them all the way up to the "resin" level. Any help would be appreciated. Hi Eric, This sounds like a classloader issue. Can you verify if Resin is running with -Djava.system.class.loader=com.caucho.loader.SystemClassLoader Thanks, Paul Thanks Eric S. Kreiser</body>
  </mail>
  <mail>
    <header>[Resin-interest] ReSin startup of multiple applications</header>
    <date>Thu Sep 15 13:12:02 CEST 2011</date>
    <body>Hi Migrating from resin 2 to resin 4.0.22 I am trying to configure a load balancer in a web-tier cluster and 2 apps in an app-tier as per docs for a single machine. For the init.d/resin startup is there a neat way to specify that I want all servers to start or do i just have to do: su $USER -c """$JAVA -jar $RESIN_HOME/lib/resin.jar $ARGS -server web-a start""" 1&amp;gt;&amp;gt; $CONSOLE 2&amp;gt;&amp;gt; $CONSOLE su $USER -c """$JAVA -jar $RESIN_HOME/lib/resin.jar $ARGS -server app-a start""" 1&amp;gt;&amp;gt; $CONSOLE 2&amp;gt;&amp;gt; $CONSOLE su $USER -c """$JAVA -jar $RESIN_HOME/lib/resin.jar $ARGS -server app-b start""" 1&amp;gt;&amp;gt; $CONSOLE 2&amp;gt;&amp;gt; $CONSOLE I can't find anything in the docs which refer to doing this config o a single machine but seem to assume it is done on separate machines as far as init.d is concerned. I have tried -server a -server all -server web-a  -server app-a -server app-b -server web-a,app-a,app-b -server web-a:app-a:app-b At the moment i am starting each on a separate line as above which works for startup. For shutdown I get an error that app-b failed to stop which may be to do with order of shutdown? Is there a best practice order for startup/shutdown? eg start web-tier then app-tier  /  stop app-tier then web-tier Thanks for any suggestions regards Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ReSin startup of multiple applications</header>
    <date>Thu Sep 15 13:23:57 CEST 2011</date>
    <body>Hello I'm not an expert, but I rather create one script for each app in init.d, this let me stop or start each app separately. -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ReSin startup of multiple applications</header>
    <date>Thu Sep 15 15:43:37 CEST 2011</date>
    <body>Thank you Riccardo That makes sense and is another way of doing it. I was just wondering if the startup parameter could take multiple server-ids as it seems to be a common scenario. Regards Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ReSin startup of multiple applications</header>
    <date>Thu Sep 15 19:34:26 CEST 2011</date>
    <body>This. You have to start each server individually. Shouldn't be. One the Resin stop begins, there's a thread that will force it to exit (for example if a servlet destroy call doesn't finish.) It doesn't matter from Resin's perspective. From the client's perspective, it's a choice between a 503 message (if web-tier is up and app-tier down) or connection failure (if web-tier is down.) I'd probably prefer the connection failure. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.1.12 change logs?</header>
    <date>Tue Aug 30 15:38:42 CEST 2011</date>
    <body>I've just seen that there is a Resin 3.1.12 available for download. Are there any change-logs? This page stops at 3.1.9 plus a snapshot: http://caucho.com/resin-3.1/changes/changes.xtp -- Steffen</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1.12 change logs?</header>
    <date>Tue Aug 30 18:24:33 CEST 2011</date>
    <body>I've just seen that there is a Resin 3.1.12 available for download. Are there any change-logs? This page stops at 3.1.9 plus a snapshot: http://caucho.com/resin-3.1/changes/changes.xtp It should be updated now. -- Scott -- Steffen</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0.21 release</header>
    <date>Tue Aug 23 23:38:39 CEST 2011</date>
    <body>We've just put up 4.0.21 for download at http://caucho.com/download . For the next few releases we'll be trying for faster releases (2 week target) so reduce the wait time for bug report fixes. The main changes are bug fixes (thanks for the reports and keep them coming!) Also, the PDF report generation has been enhanced to include heap dump, thread dump, CPU profile and JMX dump. These are available from the command-line as bin/resin.sh pdf-report Or from /resin-admin summary page (there are PDF links.) Or from the postmortem report. The new PDF report will make it easier for support, since it will gather as much information as possible from Resin. So we'd suggest sending that PDF report with any support/issue related to performance or restart issues. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.21 release</header>
    <date>Wed Aug 24 20:33:08 CEST 2011</date>
    <body>Hello, i have a WAR "accounts.war". I move it into webapps of a fresh installation of resin 4.0.21, and then i get this on a POST request (GET works) java.lang.UnsupportedOperationException: com.caucho.vfs.JniStream@2542880d at com.caucho.vfs.StreamImpl.getAvailable(StreamImpl.java:145) at com.caucho.vfs.ReadStream.getAvailable(ReadStream.java:328) ... And just to verify, i downloaded as well a fresh resin 4.0.20, moved the same WAR into webapps, no problems at all. The full stacktrace is here: - http://www.ecopatz.de/jvm-default20110824.log Any idea? -- NEU: FreePhone - 0ct/min Handyspartarif mit Geld-zurück-Garantie! Jetzt informieren: http://www.gmx.net/de/go/freephone</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.21 release</header>
    <date>Wed Aug 24 21:15:25 CEST 2011</date>
    <body>Thanks. I've filed this as http://bugs.caucho.com/view.php?id=4726 . We'll be releasing a quick 4.0.22 for this. The issue, by the way, was introduced related to changes with the async end-of-socket detection, and the regression test to reproduce this is a bit more complicated than I'd have expected. -- Scott http://www.ecopatz.de/jvm-default20110824.log</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.21 release</header>
    <date>Wed Aug 24 21:55:32 CEST 2011</date>
    <body>How soon can we expect 4.0.22?  I am wondering if I should want for that or go with 4.0.21 for the time being.  We just got hit by bug 4701 again.  I want to pick for the fix for that which is in 4.0.21 but I don't want the solution to be worse than the problem itself.  How wide-reaching is bug 4726? Bill http://bugs.caucho.com/view.php?id=4726 . http://www.ecopatz.de/jvm-default20110824.log http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.21 release</header>
    <date>Wed Aug 24 22:06:22 CEST 2011</date>
    <body>How soon can we expect 4.0.22? Early next week is the most likely. I am wondering if I should want for that or go with 4.0.21 for the time being.  We just got hit by bug 4701 again.  I want to pick for the fix for that which is in 4.0.21 but I don't want the solution to be worse than the problem itself.  How wide-reaching is bug 4726? It really depends on your libraries that parse the POST, but it was triggered by a java.io.BufferedInputStream calling ServletInputStream.available(), so it will certainly be more than just Jersey. -- Scott Bill On Wed, Aug 24, 2011 at 3:14 PM, Scott Ferguson &amp;lt;f...@caucho.com mailto:f...@caucho.com installation of resin 4.0.21, and then i get this on a POST request (GET works) java.lang.UnsupportedOperationException: com.caucho.vfs.JniStream@2542880d com.caucho.vfs.StreamImpl.getAvailable(StreamImpl.java:145) com.caucho.vfs.ReadStream.getAvailable(ReadStream.java:328) Thanks. I've filed this as http://bugs.caucho.com/view.php?id=4726 . We'll be releasing a quick 4.0.22 for this. The issue, by the way, was introduced related to changes with the async end-of-socket detection, and the regression test to reproduce this is a bit more complicated than I'd have expected. -- Scott moved the same WAR into webapps, no problems at all. http://www.ecopatz.de/jvm-default20110824.log</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.21 release</header>
    <date>Sat Aug 27 02:20:25 CEST 2011</date>
    <body>How soon can we expect 4.0.22? Early next week is the most likely. FYI, I've put up a snapshot at http://caucho.com/download/resin-pro-4_0-snap.tar.gz It'll probably be Tues or Wed before the 4.0.22 release (more QA to check). -- Scott I am wondering if I should want for that or go with 4.0.21 for the time being.  We just got hit by bug 4701 again.  I want to pick for the fix for that which is in 4.0.21 but I don't want the solution to be worse than the problem itself.  How wide-reaching is bug 4726? It really depends on your libraries that parse the POST, but it was triggered by a java.io.BufferedInputStream calling ServletInputStream.available(), so it will certainly be more than just Jersey. -- Scott Bill On Wed, Aug 24, 2011 at 3:14 PM, Scott Ferguson &amp;lt;f...@caucho.com mailto:f...@caucho.com installation of resin 4.0.21, and then i get this on a POST request (GET works) java.lang.UnsupportedOperationException: com.caucho.vfs.JniStream@2542880d com.caucho.vfs.StreamImpl.getAvailable(StreamImpl.java:145) com.caucho.vfs.ReadStream.getAvailable(ReadStream.java:328) Thanks. I've filed this as http://bugs.caucho.com/view.php?id=4726 . We'll be releasing a quick 4.0.22 for this. The issue, by the way, was introduced related to changes with the async end-of-socket detection, and the regression test to reproduce this is a bit more complicated than I'd have expected. -- Scott moved the same WAR into webapps, no problems at all. http://www.ecopatz.de/jvm-default20110824.log</body>
  </mail>
  <mail>
    <header>[Resin-interest] Using Resin with Amazon EC2</header>
    <date>Sat Aug 20 10:38:37 CEST 2011</date>
    <body>Hello, do you happen to have an updated version of these instructions how to create a Resin MSI, http://blog.caucho.com/2009/04/06/using-resin-with-amazon-ec2 ? This one is already a few years old and's targetted to earlier Resin version, 3.x. Thanks,</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using Resin with Amazon EC2</header>
    <date>Tue Aug 23 23:34:24 CEST 2011</date>
    <body>http://blog.caucho.com/2009/04/06/using-resin-with-amazon-ec2 ? This Not yet. We've added a few very new capabilities to make that kind of configuration easier. Primarily, the cluster deploy, the new --join-cluster (elastic server), and way to distribute configuration changes. We have docs about the pieces but haven't put them all together into a cloud doc yet. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] IllegalAccessError with Resin-Professional 4.0.20	and EclipseLink 2.2</header>
    <date>Fri Aug 19 19:24:18 CEST 2011</date>
    <body>The next evolution of our product (see also http://www.caucho.com/resin/press/wmaccess-delivers-data-services-using- resin/) has been quite successfully tested with most recent Resin Pro 4.0.x versions as long as we were using EclipseLink version 2.1.x. Before heading into the next stage we needed to upgrade to EclipseLink version 2.2 and perform various tests on different Application Servers. Tomcat 6 passed, Websphere passed, but we have troubles with Resin 4.0.20. A collegue of mine was able to isolate the issue and produced two very simple, basic and standalone runable WAR's to reproduce it: http://www.wmaccess.com/public/others/testapp-EclipseLink-2.1.war (6,59 MB) http://www.wmaccess.com/public/others/testapp-EclipseLink-2.2.war (6,96 MB) testapp-EclipseLink-2.1.war is packaged with EclipseLink Library version 2.1.1.v20100817-r8050 testapp-EclipseLink-2.2.war is packaged with EclipseLink Library version 2.2.0.v20110202-r8913 Both WAR files are using an in-memory HSQLDB as data source, so they can be deployed without any other prerequisites. BTW: The .java source files are included in both WARs. The WAR uses the contextPath as prefix in its logging statements. As already mentioned, the WAR with EclipseLink 2.1.1.v20100817-r8050 starts up properly. But the WAR with EclipseLink 2.2.0.v20110202-r8913 throws an IllegalAccessError. Please find below the Output including the complete Stack Trace of the IllegalAccessError: Resin Professional 4.0.20 (built Fri, 15 Jul 2011 01:17:29 PDT) Copyright(c) 1998-2010 Caucho Technology.  All rights reserved. 1013253.license -- 2 Resin servers CPB Software Starting Resin Professional on Fri, 19 Aug 2011 11:37:23 +0200 (CEST) memory-size=64M 1.6.0_03-b05, Cp1252, de 32, mixed mode, Sun Microsystems Inc. D:\WMACCESS-4.0\container-testing\resin-pro-4.0.20 D:\WMACCESS-4.0\container-testing\resin-pro-4.0.20 D:\WMACCESS-4.0\container-testing\resin-pro-4.0.20\conf\resin.xml (app-tier:default) active WebApp[production/webapp/default/resin-admin] active WebApp[production/webapp/default/resin-doc] active active is available. context /testapp-EclipseLink-2.2: context listener entry point. context /testapp-EclipseLink-2.2: initializing EntityManagerFactory. context /testapp-EclipseLink-2.2: EclipseLink version packaged in .war file: 2.2.0.v20110202-r8913 context /testapp-EclipseLink-2.2: Loaded EclipseLink version: 2.1.2.v20101206-r8635 context /testapp-EclipseLink-2.2: Using EntityManagerFactory org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl@143691d context /testapp-EclipseLink-2.2: Application classloader: EnvironmentClassLoader[web-app:production/webapp/default/testapp-Eclipse Link-2.2] context /testapp-EclipseLink-2.2: EntityManagerFactory classloader: sun.misc.Launcher$AppClassLoader@1a7bf11 context /testapp-EclipseLink-2.2: Invoking EclipseLink 2.2 constructor. java.lang.IllegalAccessError: tried to access method org.eclipse.persistence.internal.jpa.metadata.tables.TableMetadata.&amp;lt;init at servlet.Listener.contextInitialized(Listener.java:51) at com.caucho.server.webapp.WebApp.start(WebApp.java:3520) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:6 70) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAut oRedeployAutoStrategy.java:77) at com.caucho.env.deploy.DeployController.startOnInit(DeployController.java :523) at com.caucho.env.deploy.DeployContainer.update(DeployContainer.java:241) at com.caucho.env.deploy.ExpandDeployGenerator.update(ExpandDeployGenerator .java:599) at com.caucho.env.deploy.ExpandDeployGenerator.updateIfModified(ExpandDeplo yGenerator.java:545) at com.caucho.env.deploy.ExpandDeployGenerator.alarm(ExpandDeployGenerator. java:889) at com.caucho.env.deploy.ExpandDeployGenerator.handleAlarm(ExpandDeployGene rator.java:876) at com.caucho.util.Alarm.handleAlarm(Alarm.java:448) at com.caucho.util.Alarm.run(Alarm.java:420) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) WebApp[production/webapp/default/testapp-EclipseLink-2.2] active request from watchdog 'watchdog@admin.resin.caucho' WarningService: Resin shutdown from watchdog stop 'watchdog@admin.resin.caucho' from watchdog stop 'watchdog@admin.resin.caucho' ProServer[id=default,cluster=app-tier] stopping stopping WebApp[production/webapp/default/testapp-EclipseLink-2.2] stopping WebApp[production/webapp/default/resin-doc] stopping WebApp[production/webapp/default/resin-admin] stopping WebApp[production/webapp/default/ROOT] stopping notify-heartbeat-stop Shutdown Resin reason: OK Even EclipseLink 2.2 is packaged in the WAR, Resin's own EclipseLink Version 2.1.2.v20101206-r8635 from $RESIN_HOME/lib/eclipselink.jar is used. Our Application uses a Constructor of EclipseLink 2.2 which causes the IllegalAccessError. When checking the logging output of the EclipseLink 2.1 test WAR (testapp-EclipseLink-2.1.war) it seems that it is working because of the fact that packaged EclipseLink and used one from $RESIN_HOME/lib/eclipselink.jar have the same major/minor version respectivly both are similar enough to properly startup. ... context /testapp-EclipseLink-2.1: initializing EntityManagerFactory. context /testapp-EclipseLink-2.1: EclipseLink version packaged in .war file: 2.1.1.v20100817-r8050 context /testapp-EclipseLink-2.1: Loaded EclipseLink version: 2.1.2.v20101206-r8635 context /testapp-EclipseLink-2.1: Using EntityManagerFactory org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl@76438d context /testapp-EclipseLink-2.1: Application classloader: EnvironmentClassLoader[web-app:production/webapp/default/testapp-Eclipse Link-2.1] context /testapp-EclipseLink-2.1: EntityManagerFactory classloader: sun.misc.Launcher$AppClassLoader@1a7bf11 context /testapp-EclipseLink-2.1: Creating EntityManager [EL Info]: 2011-08-19 11:36:33.961--ServerSession(5181335)--EclipseLink, version: Eclipse Persistence Services - 2.1.2.v20101206-r8635 [EL Info]: 2011-08-19 11:36:34.554--ServerSession(5181335)--file:/D:/WMACCESS-4.0/container-te sting/resin-pro-4.0.20/webapps/testapp-EclipseLink-2.1/WEB-INF/classes/_ JPA_TEST login successful context /testapp-EclipseLink-2.1: Persisting an entity. context /testapp-EclipseLink-2.1:  metamodel instance: MetamodelImpl@18521651 [ 2 Types: , 1 ManagedTypes: , 1 EntityTypes: , 0 MappedSuperclassTypes: , 0 EmbeddableTypes: ] context /testapp-EclipseLink-2.1: Closing EntityManager context /testapp-EclipseLink-2.1:  context listener finished. WebApp[production/webapp/default/testapp-EclipseLink-2.1] active ... However, our app required EclipseLink 2.2 now and with all other tested servlet containers this issue does not appear (logging output from Tomcat 6 below). Any advice how to solve this issue? Thanks, Steffen Just for the records - Tomcat 6 output: INFO: Deploying web application archive testapp-EclipseLink-2.2.war context /testapp-EclipseLink-2.2: context listener entry point. context /testapp-EclipseLink-2.2: initializing EntityManagerFactory. context /testapp-EclipseLink-2.2: EclipseLink version packaged in .war file: 2.2.0.v20110202-r8913 context /testapp-EclipseLink-2.2: Loaded EclipseLink version: 2.2.0.v20110202-r8913 context /testapp-EclipseLink-2.2: Using EntityManagerFactory org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl@1762027 context /testapp-EclipseLink-2.2: Application classloader: WebappClassLoader context: /testapp-EclipseLink-2.2 delegate: false repositories: /WEB-INF/classes/ ----------&amp;gt; Parent Classloader: org.apache.catalina.loader.StandardClassLoader@5329c5 context /testapp-EclipseLink-2.2: EntityManagerFactory classloader: WebappClassLoader context: /testapp-EclipseLink-2.2 delegate: false repositories: /WEB-INF/classes/ ----------&amp;gt; Parent Classloader: org.apache.catalina.loader.StandardClassLoader@5329c5 context /testapp-EclipseLink-2.2: Invoking EclipseLink 2.2 constructor. context /testapp-EclipseLink-2.2: Creating EntityManager [EL Info]: 2011-08-19 12:28:14.456--ServerSession(13685038)--EclipseLink, version: Eclipse Persistence Services - 2.2.0.v20110202-r8913 [EL Info]: 2011-08-19 12:28:14.918--ServerSession(13685038)--file:/D:/WMACCESS-4.0/container-t esting/apache-tomcat-6.0.33/webapps/testapp-EclipseLink-2.2/WEB-INF/clas ses/_JPA_TEST login successful context /testapp-EclipseLink-2.2: Persisting an entity. context /testapp-EclipseLink-2.2:  metamodel instance: MetamodelImpl@15703940 [ 2 Types: , 1 ManagedTypes: , 1 EntityTypes: , 0 MappedSuperclassTypes: , 0 EmbeddableTypes: ] context /testapp-EclipseLink-2.2: Closing EntityManager context /testapp-EclipseLink-2.2:  context listener finished.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] IllegalAccessError with Resin-Professional 4.0.20 and EclipseLink 2.2</header>
    <date>Fri Aug 19 19:28:31 CEST 2011</date>
    <body>http://www.caucho.com/resin/press/wmaccess-delivers-data-services-using- Try removing/replacing the eclipselink.jar from resin/lib. Resin itself doesn't depend on eclipselink, so it's safe to remove or replace. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] IllegalAccessError with Resin-Professional	4.0.20 and EclipseLink 2.2</header>
    <date>Fri Aug 19 19:52:24 CEST 2011</date>
    <body>http://www.caucho.com/resin/press/wmaccess-delivers-data-services-usin It's very likely that we need some time to run two versions of our software in parallel. Therefore I've chosen the "remove $RESIN_HOME/lib/eclipselink.jar option" in order to allow each Web-App our software to use the eclipselink version included in their individual WARs. However, when the $RESIN_HOME/lib/eclipselink.jar is removed, a NoClassDefFoundError is thrown. This is the output / stack trace. D:\WMACCESS-4.0\container-testing\resin-pro-4.0.20 D:\WMACCESS-4.0\container-testing\resin-pro-4.0.20 D:\WMACCESS-4.0\container-testing\resin-pro-4.0.20\conf\resin.xml (app-tier:default) active WebApp[production/webapp/default/resin-admin] active WebApp[production/webapp/default/resin-doc] active available. WebApp[production/webapp/default/testapp-EclipseLink-2.2] fail org/eclipse/persistence/platform/server/ServerPlatformBase at java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClass(ClassLoader.java:620) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124) at java.net.URLClassLoader.defineClass(URLClassLoader.java:260) at java.net.URLClassLoader.access$000(URLClassLoader.java:56) at java.net.URLClassLoader$1.run(URLClassLoader.java:195) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:188) at java.lang.ClassLoader.loadClass(ClassLoader.java:306) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276) at java.lang.ClassLoader.loadClass(ClassLoader.java:251) at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:247) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.ja va:1456) at com.caucho.loader.SystemClassLoader.loadClassImpl(SystemClassLoader.java :237) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.ja va:1454) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.ja va:1454) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.ja va:1454) at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1 392) at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1 373) at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:247) at org.eclipse.persistence.internal.security.PrivilegedAccessHelper.getClas sForName(PrivilegedAccessHelper.java:93) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.findClass(En tityManagerSetupImpl.java:697) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.findClassFor Property(EntityManagerSetupImpl.java:703) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.updateServer Platform(EntityManagerSetupImpl.java:532) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(En tityManagerSetupImpl.java:985) at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityMan agerFactory(PersistenceProvider.java:187) at com.caucho.env.jpa.PersistenceUnitManager.createDelegate(PersistenceUnit Manager.java:422) at com.caucho.env.jpa.PersistenceUnitManager.start(PersistenceUnitManager.j ava:383) at com.caucho.env.jpa.PersistenceManager.startPersistenceUnits(PersistenceM anager.java:363) at com.caucho.env.jpa.PersistenceManager.environmentConfigureEnhancer(Persi stenceManager.java:634) at com.caucho.loader.EnvironmentClassLoader.config(EnvironmentClassLoader.j ava:866) at com.caucho.loader.EnvironmentClassLoader.bind(EnvironmentClassLoader.jav a:884) at com.caucho.loader.EnvironmentClassLoader.start(EnvironmentClassLoader.ja va:911) at com.caucho.server.webapp.WebApp.start(WebApp.java:3486) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:6 70) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAut oRedeployAutoStrategy.java:77) at com.caucho.env.deploy.DeployController.startOnInit(DeployController.java :523) at com.caucho.env.deploy.DeployContainer.start(DeployContainer.java:170) at com.caucho.server.webapp.WebAppContainer.start(WebAppContainer.java:713) at com.caucho.server.host.Host.start(Host.java:676) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:6 70) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAut oRedeployAutoStrategy.java:77) at com.caucho.env.deploy.DeployController.startOnInit(DeployController.java :523) at com.caucho.env.deploy.DeployContainer.start(DeployContainer.java:170) at com.caucho.server.host.HostContainer.start(HostContainer.java:542) at com.caucho.server.cluster.Server.start(Server.java:1231) at com.caucho.server.cluster.ServletSystem.start(ServletSystem.java:72) at com.caucho.env.service.ResinSystem.startServices(ResinSystem.java:515) at com.caucho.env.service.ResinSystem.start(ResinSystem.java:483) at com.caucho.server.resin.Resin.start(Resin.java:1029) at com.caucho.server.resin.Resin.initMain(Resin.java:1156) at com.caucho.server.resin.Resin.main(Resin.java:1458) -- Steffen http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] IllegalAccessError with	Resin-Professional4.0.20 and EclipseLink 2.2</header>
    <date>Fri Sep 02 19:41:48 CEST 2011</date>
    <body>Hi Scott, I've seen you've filed a bug #4722 after my last email from 19th of August. http://bugs.caucho.com/view.php?id=4722 It's already closed and marked as fixed in 4.0.21 so I've downloaded Resin-Pro-4.0.22 and deployed the WAR file ( http://www.wmaccess.com/public/others/testapp-EclipseLink-2.2.war ) with included EclipseLink 2.2 again. I did two tests, both failed: 1.) Unchanged 4.0.22 installation ($RESIN_HOME/lib/eclipselink.jar is present): available. context /testapp-EclipseLink-2.2: context listener entry point. context /testapp-EclipseLink-2.2: initializing EntityManagerFactory. context /testapp-EclipseLink-2.2: EclipseLink version packaged in .war file: 2.2.0.v20110202-r8913 context /testapp-EclipseLink-2.2: Loaded EclipseLink version: 2.1.2.v20101206-r8635 context /testapp-EclipseLink-2.2: Using EntityManagerFactory org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl@aea5cd context /testapp-EclipseLink-2.2: Application classloader: EnvironmentClassLoader[web-app:production/webapp/default/testapp-Eclipse Link-2.2] context /testapp-EclipseLink-2.2: EntityManagerFactory classloader: sun.misc.Launcher$AppClassLoader@1a7bf11 context /testapp-EclipseLink-2.2: Invoking EclipseLink 2.2 constructor. java.lang.IllegalAccessError: tried to access method org.eclipse.persistence.internal.jpa.metadata.tables.TableMetadata.&amp;lt;init at servlet.Listener.contextInitialized(Listener.java:51) at com.caucho.server.webapp.WebApp.start(WebApp.java:3542) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:6 79) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAut oRedeployAutoStrategy.java:77) at com.caucho.env.deploy.DeployController.startOnInit(DeployController.java :529) at com.caucho.env.deploy.DeployContainer.start(DeployContainer.java:170) at com.caucho.server.webapp.WebAppContainer.start(WebAppContainer.java:713) at com.caucho.server.host.Host.start(Host.java:676) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:6 79) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAut oRedeployAutoStrategy.java:77) at com.caucho.env.deploy.DeployController.startOnInit(DeployController.java :529) at com.caucho.env.deploy.DeployContainer.start(DeployContainer.java:170) at com.caucho.server.host.HostContainer.start(HostContainer.java:542) at com.caucho.server.cluster.Server.start(Server.java:1234) at com.caucho.server.cluster.ServletSystem.start(ServletSystem.java:72) at com.caucho.env.service.ResinSystem.startServices(ResinSystem.java:515) at com.caucho.env.service.ResinSystem.start(ResinSystem.java:483) at com.caucho.server.resin.Resin.start(Resin.java:1031) at com.caucho.server.resin.Resin.initMain(Resin.java:1167) at com.caucho.server.resin.Resin.main(Resin.java:1469) WebApp[production/webapp/default/testapp-EclipseLink-2.2] active =&amp;gt; Still the $RESIN_HOME/lib/eclipselink.jar (2.1.2.v20101206-r8635) seems to be used instead of 2.2.0.v20110202-r8913 in our WAR file. 2.) Workaround removing $RESIN_HOME/lib/eclipselink.jar available. WebApp[production/webapp/default/testapp-EclipseLink-2.2] fail org/eclipse/persistence/platform/server/ServerPlatformBase at java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClass(ClassLoader.java:620) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124) at java.net.URLClassLoader.defineClass(URLClassLoader.java:260) at java.net.URLClassLoader.access$000(URLClassLoader.java:56) at java.net.URLClassLoader$1.run(URLClassLoader.java:195) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:188) at java.lang.ClassLoader.loadClass(ClassLoader.java:306) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276) at java.lang.ClassLoader.loadClass(ClassLoader.java:251) at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:247) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.ja va:1506) at com.caucho.loader.SystemClassLoader.loadClassImpl(SystemClassLoader.java :237) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.ja va:1504) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.ja va:1504) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.ja va:1504) at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1 442) at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1 423) at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:247) at org.eclipse.persistence.internal.security.PrivilegedAccessHelper.getClas sForName(PrivilegedAccessHelper.java:93) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.findClass(En tityManagerSetupImpl.java:697) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.findClassFor Property(EntityManagerSetupImpl.java:703) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.updateServer Platform(EntityManagerSetupImpl.java:532) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(En tityManagerSetupImpl.java:985) at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityMan agerFactory(PersistenceProvider.java:187) at com.caucho.env.jpa.PersistenceUnitManager.createDelegate(PersistenceUnit Manager.java:422) at com.caucho.env.jpa.PersistenceUnitManager.start(PersistenceUnitManager.j ava:383) at com.caucho.env.jpa.PersistenceManager.startPersistenceUnits(PersistenceM anager.java:367) at com.caucho.env.jpa.PersistenceManager.environmentConfigureEnhancer(Persi stenceManager.java:638) at com.caucho.loader.EnvironmentClassLoader.config(EnvironmentClassLoader.j ava:918) at com.caucho.loader.EnvironmentClassLoader.bind(EnvironmentClassLoader.jav a:936) at com.caucho.loader.EnvironmentClassLoader.start(EnvironmentClassLoader.ja va:963) at com.caucho.server.webapp.WebApp.start(WebApp.java:3508) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:6 79) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAut oRedeployAutoStrategy.java:77) at com.caucho.env.deploy.DeployController.startOnInit(DeployController.java :529) at com.caucho.env.deploy.DeployContainer.start(DeployContainer.java:170) at com.caucho.server.webapp.WebAppContainer.start(WebAppContainer.java:713) at com.caucho.server.host.Host.start(Host.java:676) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:6 79) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAut oRedeployAutoStrategy.java:77) at com.caucho.env.deploy.DeployController.startOnInit(DeployController.java :529) at com.caucho.env.deploy.DeployContainer.start(DeployContainer.java:170) at com.caucho.server.host.HostContainer.start(HostContainer.java:542) at com.caucho.server.cluster.Server.start(Server.java:1234) at com.caucho.server.cluster.ServletSystem.start(ServletSystem.java:72) at com.caucho.env.service.ResinSystem.startServices(ResinSystem.java:515) at com.caucho.env.service.ResinSystem.start(ResinSystem.java:483) at com.caucho.server.resin.Resin.start(Resin.java:1031) at com.caucho.server.resin.Resin.initMain(Resin.java:1167) at com.caucho.server.resin.Resin.main(Resin.java:1469) active java.lang.NoClassDefFoundError: org/eclipse/persistence/platform/server/ServerPlatformBase at java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClass(ClassLoader.java:620) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124) at java.net.URLClassLoader.defineClass(URLClassLoader.java:260) at java.net.URLClassLoader.access$000(URLClassLoader.java:56) at java.net.URLClassLoader$1.run(URLClassLoader.java:195) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:188) at java.lang.ClassLoader.loadClass(ClassLoader.java:306) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276) at java.lang.ClassLoader.loadClass(ClassLoader.java:251) at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:247) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.ja va:1506) at com.caucho.loader.SystemClassLoader.loadClassImpl(SystemClassLoader.java :237) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.ja va:1504) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.ja va:1504) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.ja va:1504) at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1 442) at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1 423) at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:247) at org.eclipse.persistence.internal.security.PrivilegedAccessHelper.getClas sForName(PrivilegedAccessHelper.java:93) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.findClass(En tityManagerSetupImpl.java:697) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.findClassFor Property(EntityManagerSetupImpl.java:703) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.updateServer Platform(EntityManagerSetupImpl.java:532) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(En tityManagerSetupImpl.java:985) at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityMan agerFactory(PersistenceProvider.java:187) at com.caucho.env.jpa.PersistenceUnitManager.createDelegate(PersistenceUnit Manager.java:422) at com.caucho.env.jpa.PersistenceUnitManager.start(PersistenceUnitManager.j ava:383) at com.caucho.env.jpa.PersistenceManager.startPersistenceUnits(PersistenceM anager.java:367) at com.caucho.env.jpa.PersistenceManager.environmentConfigureEnhancer(Persi stenceManager.java:638) at com.caucho.loader.EnvironmentClassLoader.config(EnvironmentClassLoader.j ava:918) at com.caucho.loader.EnvironmentClassLoader.bind(EnvironmentClassLoader.jav a:936) at com.caucho.loader.EnvironmentClassLoader.start(EnvironmentClassLoader.ja va:963) at com.caucho.server.webapp.WebApp.start(WebApp.java:3508) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:6 79) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAut oRedeployAutoStrategy.java:77) at com.caucho.env.deploy.DeployController.startOnInit(DeployController.java :529) at com.caucho.env.deploy.DeployContainer.start(DeployContainer.java:170) at com.caucho.server.webapp.WebAppContainer.start(WebAppContainer.java:713) at com.caucho.server.host.Host.start(Host.java:676) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:6 79) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAut oRedeployAutoStrategy.java:77) at com.caucho.env.deploy.DeployController.startOnInit(DeployController.java :529) at com.caucho.env.deploy.DeployContainer.start(DeployContainer.java:170) at com.caucho.server.host.HostContainer.start(HostContainer.java:542) at com.caucho.server.cluster.Server.start(Server.java:1234) at com.caucho.server.cluster.ServletSystem.start(ServletSystem.java:72) at com.caucho.env.service.ResinSystem.startServices(ResinSystem.java:515) at com.caucho.env.service.ResinSystem.start(ResinSystem.java:483) at com.caucho.server.resin.Resin.start(Resin.java:1031) at com.caucho.server.resin.Resin.initMain(Resin.java:1167) at com.caucho.server.resin.Resin.main(Resin.java:1469) =&amp;gt; The web-app can't be started at all. -- Steffen http://www.caucho.com/resin/press/wmaccess-delivers-data-services-usin http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] IllegalAccessError with	Resin-Professional4.0.20 and EclipseLink 2.2</header>
    <date>Fri Sep 02 19:53:42 CEST 2011</date>
    <body>http://bugs.caucho.com/view.php?id=4722 http://www.wmaccess.com/public/others/testapp-EclipseLink-2.2.war ) with If you're replacing/removing the eclipselink.jar, you also need to move the resin-eclipselink.jar from the resin/lib into the same classloader as your eclipselink override. (Or put it into the project-jars so it's automatically copied.) -- Scott http://www.caucho.com/resin/press/wmaccess-delivers-data-services-usin http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] IllegalAccessError	with	Resin-Professional4.0.20 and EclipseLink 2.2</header>
    <date>Fri Sep 02 20:40:19 CEST 2011</date>
    <body>http://bugs.caucho.com/view.php?id=4722 http://www.wmaccess.com/public/others/testapp-EclipseLink-2.2.war ) That's doesn't seems to be working here. Now there are ClassNotFound exceptions for org.eclipse.persistence.platform.server.resin.ResinPlatform That's a step-by-step list what I did based on your recommendation: unzip resin-pro-4.0.22.zip cd resin-pro-4.0.22 rm lib/eclipselink.jar mv lib/resin-eclipselink.jar project-jars/ cd webapps wget --no-verbose http://www.wmaccess.com/public/others/testapp-EclipseLink-2.2.war cd .. resin.exe And this is the output: D:\WMACCESS-4.0\container-testing\resin-pro-4.0.22\conf\resin.xml (app-tier:default) active WebApp[production/webapp/default/resin-admin] active WebApp[production/webapp/default/resin-doc] active available. Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.EntityManagerSetupException Exception Description: Predeployment of PersistenceUnit [JPA_TEST] failed. Internal Exception: Exception [EclipseLink-28006] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.EntityManagerSetupException Exception Description: ClassNotFound: [org.eclipse.persistence.platform.server.resin.ResinPlatform] specified in [eclipselink.target-server] property. Internal Exception: java.lang.ClassNotFoundException: org.eclipse.persistence.platform.server.resin.ResinPlatform in EnvironmentClassLoader[web-app:production/webapp/default/testapp-Eclipse Link-2.2,STARTING] Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.EntityManagerSetupException Exception Description: Predeployment of PersistenceUnit [JPA_TEST] failed. Internal Exception: Exception [EclipseLink-28006] (Eclipse Persistence Services - 2.2.0.v20110202-r8913): org.eclipse.persistence.exceptions.EntityManagerSetupException Exception Description: ClassNotFound: [org.eclipse.persistence.platform.server.resin.ResinPlatform] specified in [eclipselink.target-server] property. Internal Exception: java.lang.ClassNotFoundException: org.eclipse.persistence.platform.server.resin.ResinPlatform in EnvironmentClassLoader[web-app:production/webapp/default/testapp-Eclipse Link-2.2,STARTING] context /testapp-EclipseLink-2.2: context listener entry point. context /testapp-EclipseLink-2.2: initializing EntityManagerFactory. context /testapp-EclipseLink-2.2: EclipseLink version packaged in .war file: 2.2.0.v20110202-r8913 context /testapp-EclipseLink-2.2: Loaded EclipseLink version: 2.2.0.v20110202-r8913 context /testapp-EclipseLink-2.2: Using EntityManagerFactory org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl@9d2f26 context /testapp-EclipseLink-2.2: Application classloader: EnvironmentClassLoader[web-app:production/webapp/default/testapp-Eclipse Link-2.2] context /testapp-EclipseLink-2.2: EntityManagerFactory classloader: EnvironmentClassLoader[web-app:production/webapp/default/testapp-Eclipse Link-2.2] context /testapp-EclipseLink-2.2: Invoking EclipseLink 2.2 constructor. context /testapp-EclipseLink-2.2: Creating EntityManager SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder". SLF4J: Defaulting to no-operation (NOP) logger implementation SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. [EL Info]: 2011-09-02 20:31:08.794--ServerSession(508556)--EclipseLink, version: Eclipse Persistence Services - 2.2.0.v20110202-r8913 [EL Info]: 2011-09-02 20:31:09.308--ServerSession(508556)--file:/D:/WMACCESS-4.0/container-tes ting/resin-pro-4.0.22/webapps/testapp-EclipseLink-2.2/WEB-INF/classes/_J PA_TEST login successful context /testapp-EclipseLink-2.2: Persisting an entity. context /testapp-EclipseLink-2.2:  metamodel instance: MetamodelImpl@23127958 [ 2 Types: , 1 ManagedTypes: , 1 EntityTypes: , 0 MappedSuperclassTypes: , 0 EmbeddableTypes: ] context /testapp-EclipseLink-2.2: Closing EntityManager context /testapp-EclipseLink-2.2:  context listener finished. WebApp[production/webapp/default/testapp-EclipseLink-2.2] active active Maybe I did not understand it correctly about removing the jars and moving them around. If my step-by-step list is wrong, could you please let me know how to get it working without ClassNotFound Exceptions. Thanks, -- Steffen http://www.caucho.com/resin/press/wmaccess-delivers-data-services-usi http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] IllegalAccessError	with	Resin-Professional4.0.20 and EclipseLink 2.2</header>
    <date>Fri Sep 02 21:40:54 CEST 2011</date>
    <body>http://bugs.caucho.com/view.php?id=4722 http://www.wmaccess.com/public/others/testapp-EclipseLink-2.2.war ) http://www.wmaccess.com/public/others/testapp-EclipseLink-2.2.war Try webapp-jars instead. That just worked for me. -- Scott http://www.slf4j.org/codes.html#StaticLoggerBinder for http://www.caucho.com/resin/press/wmaccess-delivers-data-services-usi http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest]  Resin 4.0 equivalent for &amp;lt;notfound&amp;gt;from Sabrina</header>
    <date>Thu Aug 18 23:55:26 CEST 2011</date>
    <body>I know this is obvious and I am just overlooking it, but what would be the Resin 4.0 equivalent to the Resin 3.0 syntax? I don't see a resin:NotFound option.  I don't want to resin:Deny because I don't even want people knowing we are using subversion. Thanks, Aaron Sabrina Friedman Billige Flüge Marketing GmbH Emanuelstr. 3, 10317 Berlin Deutschland Telefon: +49 (33) 5310967 Email: utebachme...@gmail.com Site: http://flug.airego.de - Billige Flüge vergleichen</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0 equivalent for &amp;lt;notfound&amp;gt;</header>
    <date>Tue Aug 09 17:44:46 CEST 2011</date>
    <body>I know this is obvious and I am just overlooking it, but what would be the Resin 4.0 equivalent to the Resin 3.0 syntax? I don't see a resin:NotFound option.  I don't want to resin:Deny because I don't even want people knowing we are using subversion. Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 equivalent for &amp;lt;notfound&amp;gt;</header>
    <date>Tue Aug 09 18:10:40 CEST 2011</date>
    <body>I've added it as a bug report at http://bugs.caucho.com/view.php?id=4705 . You should be able to work around this with -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 equivalent for &amp;lt;notfound&amp;gt;</header>
    <date>Tue Aug 09 18:18:18 CEST 2011</date>
    <body>Oh cool, I'll give that a go.  I should have updated to teh Resin 4.0 equivalents long ago! An interesting point ... if you still have precedence over the &amp;lt;resin:...&amp;gt; rules if you aren't careful -- causing the resin: rules not to work properly even if they come before the the resin: stuff would work, then when I commented out all of my properly. I think it was just matching on the &amp;lt;rewrite-dispatch&amp;gt; stuff first regardless of whether there were resin: rules before or after it and I have a catch-all in the &amp;lt;rewrite-dispatch&amp;gt; rules. -a</body>
  </mail>
  <mail>
    <header>[Resin-interest] Joomla 1.7 on Quercus - does it have a future?</header>
    <date>Wed Jul 27 08:09:40 CEST 2011</date>
    <body>Sorry if this is the wrong list to ask this... I have read about some users experimenting with running Joomla (versions 1.5 or earlier) on top of Quercus. However, I also found many complaints and bug reports from people attempting to run Joomla 1.5.9 and up on top of Quercus and hitting problems. So, I´d have to ask here: is there _anyone_ running a production Joomla system on top of Quercus?. Joomla is already at version 1.7, and it has added a nifty auto-update mechanism http://www.h-online.com/open/news/item/Joomla-1-7-brings-new-update-mechanism-1282426.html I wonder how that would work out under Quercus?. has anyone tried Joomla 1.7 under Quercus?. I love the Java platform, and I love Joomla as well (I´d love it more had it been designed with JSP ;), so I´d really hate having to run a Java-centric news site on top of pure PHP with no Java behind it. Or should I forget abount Quercus and drop the idea altogether?. I have no problem running a pure-Java CMS but I haven´t found anything that gives me a turnkey solution like iJoomla ... http://newsportal.ijoomla.com/ Any thoughts? Thanks in advance, FC</body>
  </mail>
  <mail>
    <header>[Resin-interest] Quick favour - show how to send mail using resins	&amp;lt;mail&amp;gt;</header>
    <date>Sun Jul 24 21:27:49 CEST 2011</date>
    <body>Hi - I get the config for resin mail, but could someone show how you send a simple message (from, to, subj, body) in the java servlet part which makes use of the mail config shown here please? http://www.caucho.com/resin-4.0/admin/config-el-ref.xtp#mail Also, is this asynchronous? Ideally I'd like to use this as part of some UI work, so would rather not have the user sit around waiting for the mail send to complete... Thanks!</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quick favour - show how to send mail using resins &amp;lt;mail&amp;gt;</header>
    <date>Sun Jul 24 21:41:28 CEST 2011</date>
    <body>As the document says there, a javax.mail.Session object is being stored in the jndi tree. So you fetch it from there and use it. And when you have it, you can create your mail objects and send them over a "transport". See also http://javamail.kenai.com/nonav/javadocs/ The following part you can then left out: ... http://www.caucho.com/resin-4.0/admin/config-el-ref.xtp#mail http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quick favour - show how to send mail using resins &amp;lt;mail&amp;gt;</header>
    <date>Mon Jul 25 11:01:31 CEST 2011</date>
    <body>http://javamail.kenai.com/nonav/javadocs/ Great, thanks!</body>
  </mail>
  <mail>
    <header>[Resin-interest] Database Pooling</header>
    <date>Fri Jul 22 19:54:40 CEST 2011</date>
    <body>I'm new to using Resin's database pooling, so I'm wondering if there is anything special about setting it up to use an Oracle RAC .  I know that in my current  java programs, the connect string is rather complex... databaseconnect=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(Host=adcracdbq1-racvip.hiw. com)(Port=1521))(ADDRESS=(PROTOCOL=TCP)(Host=adcracdbq2-racvip.hiw.com )(Port=152 1))(LOAD_BALANCE=yes)(FAIL_OVER=NO)(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME =HMIQ))) How is the RAC environment configured with Resin? Thanks, Steve Francis Technical Adviser -- Application Technologies IHG Office:  770-442-7157 Cell:     770-906-3122 IM:  francisihg</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Database Pooling</header>
    <date>Fri Jul 22 20:55:25 CEST 2011</date>
    <body>If you migrate to Oracle 11, with scan DNS entries defined (google "Oracle SCAN", and click the first link), then the connection string is simpler - just one ADDRESS entry. In any case,  you should separate configuration from Java code, define RAC configure in Oracle client configuration "tnsnames.ora" and then in resin configuration,  define &amp;lt;database&amp;gt; within it, &amp;lt;jndi-name&amp;gt;, &amp;lt;driver&amp;gt;, etc...   So your java code should just reference the datasource by JNDI name. From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Steve Francis Sent: Friday, July 22, 2011 10:54 AM To: resin-interest@caucho.com Subject: [Resin-interest] Database Pooling I'm new to using Resin's database pooling, so I'm wondering if there is anything special about setting it up to use an Oracle RAC .  I know that in my current  java programs, the connect string is rather complex... databaseconnect=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(Host=adcracdbq1-racvip.hiw. http://adcracdbq2-racvip.hiw.com 1))(LOAD_BALANCE=yes)(FAIL_OVER=NO)(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME =HMIQ))) How is the RAC environment configured with Resin? Thanks, Steve Francis Technical Adviser -- Application Technologies IHG Office:  770-442-7157 Cell:     770-906-3122 IM:  francisihg</body>
  </mail>
  <mail>
    <header>[Resin-interest] Disabling HTTP Methods</header>
    <date>Wed Jul 20 19:46:24 CEST 2011</date>
    <body>I'd like to disabled the HTTP CONNECT method.   I don't know the best way to do that, but I tried this and it's not working: The request is passed on and I receive a 200 OK response when I telnet and test the CONNECT. What is the most efficient way to get Resin to deny those requests? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Disabling HTTP Methods</header>
    <date>Thu Jul 21 16:50:50 CEST 2011</date>
    <body>I could use some help on this, even if it's just a hint or some ideas what else to try. Thanks, Aaron http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Disabling HTTP Methods</header>
    <date>Thu Jul 21 19:27:52 CEST 2011</date>
    <body>That config works for me. (You don't need the regexp if you're matching everything, but it doesn't matter for this issue.) There is the &amp;lt;resin:Forbidden&amp;gt; tag? -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Disabling HTTP Methods</header>
    <date>Thu Jul 21 23:02:21 CEST 2011</date>
    <body>The config doesn't bomb, but in resin-pro-4.0.18 when I run this: then CONNECT http://localhost/ HTTP/1.0 I then get the home page and a 200 OK, instead of a 403 FORBIDDEN. You are able to get it to throw an appropriate HTTP 403? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Disabling HTTP Methods</header>
    <date>Thu Jul 21 23:13:13 CEST 2011</date>
    <body>http://localhost/ HTTP/1.0 Where is the &amp;lt;resin:Forbidden&amp;gt; tag? (&amp;lt;cluster&amp;gt;, &amp;lt;host&amp;gt;, &amp;lt;web-app&amp;gt;, resin-web.xml?) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Disabling HTTP Methods</header>
    <date>Thu Jul 21 23:29:28 CEST 2011</date>
    <body>http://localhost/ HTTP/1.0 Ah now I get your question.  :)  I was confused. I tried in the web-app-default and web-app based on the regex, but I am guessing you are going to tell me that's too late and I need to put it at the &amp;lt;host&amp;gt; level -- so I just tried that and it's working great. Sorry for being slow and not thinking this one through more. Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Disabling HTTP Methods</header>
    <date>Thu Jul 21 23:39:17 CEST 2011</date>
    <body>Hmm. The web-app and web-app-default should also work (I just checked with web-app-default), unless there's an earlier &amp;lt;resin:Dispatch&amp;gt; (or -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Disabling HTTP Methods</header>
    <date>Fri Jul 22 00:23:44 CEST 2011</date>
    <body>Actually, the appropriate response would be 405, Method Not Allowed. -Eric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Watchdog shutting down</header>
    <date>Tue Jul 19 19:18:15 CEST 2011</date>
    <body>Nope.  Watchdog-manager.log is empty, this only shows up in the stderr log. Steve Francis Technical Adviser -- Application Technologies IHG Office:  770-442-7157 Cell:     770-906-3122 IM:  francisihg http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/pipermail/resin-interest/attachments/20110719/0a02fe28/attachment-0001.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/pipermail/resin-interest/attachments/20110719/1b055dc9/attachment-0001.html http://maillist.caucho.com/mailman/listinfo/resin-interest resin.4.0.20.issue.tar.gz Description: GNU Zip compressed data</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Watchdog shutting down</header>
    <date>Tue Jul 19 19:23:39 CEST 2011</date>
    <body>Nope.  Watchdog-manager.log is empty, this only shows up in the stderr log. The watchdog-manager.log being completely empty is very weird. Is there any chance there's a permissions problem on that log file or directory or some other reason the log wouldn't be written? -- Scott Steve Francis Technical Adviser -- Application Technologies IHG Office:  770-442-7157 Cell:     770-906-3122 IM:  francisihg On Tue, Jul 19, 2011 at 1:00 PM, &amp;lt;resin-interest-requ...@caucho.com mailto:resin-interest-requ...@caucho.com Send resin-interest mailing list submissions to mailto:resin-interest@caucho.com To subscribe or unsubscribe via the World Wide Web, visit http://maillist.caucho.com/mailman/listinfo/resin-interest or, via email, send a message with subject or body 'help' to resin-interest-requ...@caucho.com mailto:resin-interest-requ...@caucho.com You can reach the person managing the list at resin-interest-ow...@caucho.com mailto:resin-interest-ow...@caucho.com When replying, please edit your Subject line so it is more specific than "Re: Contents of resin-interest digest..." Today's Topics: 1. Watchdog shutting down resin in 4.0.20 (Steve Francis) 2. Re: Watchdog shutting down resin in 4.0.20 (Scott Ferguson) ---------------------------------------------------------------------- Message: 1 Date: Tue, 19 Jul 2011 11:49:01 -0400 From: Steve Francis &amp;lt;steve.fran...@ihg.com mailto:steve.fran...@ihg.com Subject: [Resin-interest] Watchdog shutting down resin in 4.0.20 mailto:resin-interest@caucho.com Message-ID: mailto:v5u%2bw8synlwas2kh%2b2ezf...@mail.gmail.com Content-Type: text/plain; charset="iso-8859-1" Is anyone else seeing this.  I just loaded 4.0.20 as it was supposed to fix an access logging rollover problem I found, but it can't seem to stay up now. shutdown from unexpected watchdog exit. shutdown from unexpected watchdog exit. shutdown from unexpected watchdog exit. shutdown from unexpected watchdog exit. shutdown from unexpected watchdog exit. Steve Francis Technical Adviser -- Application Technologies IHG IM:  francisihg -------------- next part -------------- An HTML attachment was scrubbed... URL: http://maillist.caucho.com/pipermail/resin-interest/attachments/20110719/0a02fe28/attachment-0001.html ------------------------------ Message: 2 Date: Tue, 19 Jul 2011 08:56:55 -0700 mailto:f...@caucho.com Subject: Re: [Resin-interest] Watchdog shutting down resin in 4.0.20 mailto:resin-interest@caucho.com Message-ID: &amp;lt;4e25a947.30...@caucho.com mailto:4e25a947.30...@caucho.com Content-Type: text/plain; charset="iso-8859-1" Does the watchdog log or the postmortem show anything? -- Scott mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest -------------- next part -------------- An HTML attachment was scrubbed... URL: http://maillist.caucho.com/pipermail/resin-interest/attachments/20110719/1b055dc9/attachment-0001.html ------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Watchdog shutting down</header>
    <date>Wed Jul 20 19:28:28 CEST 2011</date>
    <body>I can't see any .  ROOT owns the file, and the directory is RWX accross the board for /var/log/resin so I don't see it.  If it's any consolation, That's what I always get in every server on every system, that's running Resin 4. Steve Francis Technical Adviser -- Application Technologies IHG Office:  770-442-7157 Cell:     770-906-3122 IM:  francisihg http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest-requ...@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest-requ...@caucho.com mailto:resin-interest-ow...@caucho.com mailto:steve.fran...@ihg.com mailto:resin-interest@caucho.com http://maillist.caucho.com/pipermail/resin-interest/attachments/20110719/0a02fe28/attachment-0001.html mailto:f...@caucho.com mailto:resin-interest@caucho.com mailto:4e25a947.30...@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/pipermail/resin-interest/attachments/20110719/1b055dc9/attachment-0001.html mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/pipermail/resin-interest/attachments/20110719/8a549bd1/attachment-0001.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Watchdog shutting down resin in 4.0.20</header>
    <date>Tue Jul 19 17:50:27 CEST 2011</date>
    <body>Is anyone else seeing this.  I just loaded 4.0.20 as it was supposed to fix an access logging rollover problem I found, but it can't seem to stay up now. from unexpected watchdog exit. from unexpected watchdog exit. from unexpected watchdog exit. from unexpected watchdog exit. from unexpected watchdog exit. Steve Francis Technical Adviser -- Application Technologies IHG Office:  770-442-7157 Cell:     770-906-3122 IM:  francisihg</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Watchdog shutting down resin in 4.0.20</header>
    <date>Tue Jul 19 17:57:59 CEST 2011</date>
    <body>Is anyone else seeing this.  I just loaded 4.0.20 as it was supposed to fix an access logging rollover problem I found, but it can't seem to stay up now. shutdown from unexpected watchdog exit. shutdown from unexpected watchdog exit. shutdown from unexpected watchdog exit. shutdown from unexpected watchdog exit. shutdown from unexpected watchdog exit. Does the watchdog log or the postmortem show anything? -- Scott Steve Francis Technical Adviser -- Application Technologies IHG Office:  770-442-7157 Cell:     770-906-3122 IM:  francisihg</body>
  </mail>
  <mail>
    <header>[Resin-interest] Examine session store in 4.0.19 pro</header>
    <date>Fri Jul 15 19:00:19 CEST 2011</date>
    <body>Hi, I'm trying to figure out if there's any way I can examine the persistent session store in resin 4.0.19 pro - i.e whether there is any API / process I can use to retrieve session keys and objects associated with the session? I recall reading that 4 uses an embedded database rather than the old style jdbc store. Is it possible to query this data in any way? We are observing some weird session behavior under heavy load and I'm trying to figure out if our code is doing something stupid. I have made copies of the resin-data folder at various points in time and was hoping to examine the session data from each. Any pointers would be much appreciated. Thanks, Steven</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Examine session store in 4.0.19 pro</header>
    <date>Fri Jul 15 22:49:08 CEST 2011</date>
    <body>I'm updating and existing bug report for this http://bugs.caucho.com/view.php?id=3533 . It's more complicated than just querying, because of the way the cache/store is structured. It will probably be easiest for us to provide a specific query tool for that information. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Clustering and Apache</header>
    <date>Fri Jul 15 15:20:29 CEST 2011</date>
    <body>Hi folks, We have been testing the Load Balancing possibility in Resin together with Apache and it seems the "backup" option for the &amp;lt;server&amp;gt;-tag does not work as expected. Let me explain our setup. We have compiled our own Apache. The version we have been using while testing Resin is 2.2.17. Resin-pro-4.0.19 was compiled with: ./configure --prefix=$RESINHOME --enable-64bit --without-resin-init.d --enable-64bit-jni --enable-ssl --with-apxs=/path/to/2.2.17-php5.2.17-rhel5-x64-rh/bin/apxs --with-apache-libexec=$RESINHOME/apache I added the "--with-apache-libexec=$RESINHOME/apache" only so our old resin-3.x mod_caucho.so not got overwritten. We've done the following tests both with mod_caucho.so built for resin-pro-3.1.10 and resin-pro-4.0.19. In our httpd.conf we have: SetHandler caucho-request ResinConfigServer localhost 6870 and in resin.xml we have: archive-directory="/path/to/app" As you can see we followed the documentation on http://caucho.com/resin-4.0/admin/starting-resin-apache.xtp , except not including the "index" option in the &amp;lt;server&amp;gt;-tag which is not recognized. Still we see that sessions, more or less random, goes to both app-1 and app-2. That is, when a session is established it always goes to the same server, however if I delete the cookie a new session might go to the "backup-node" app-2. The documentation says: "Optional backup machines only receive requests if all of the primaries are down." We have verified through resin-admin that app-1 and app-2 can talk to each other. What are we doing wrong, since backup="true" does not seem to work as we expected? -- Halvor Utby USIT/GAP/W3D tlf: 22852972 halvor.u...@usit.uio.no</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Clustering and Apache</header>
    <date>Fri Jul 15 22:52:13 CEST 2011</date>
    <body>I've added a bug report at http://bugs.caucho.com/view.php?id=4673 . The "backup" concept isn't a main configuration option in 4.0 (since we generally enforce round-robin as opposed to earlier versions). I'll need to check to see if it's something that can be added back. -- Scott http://caucho.com/resin-4.0/admin/starting-resin-apache.xtp , except not</body>
  </mail>
  <mail>
    <header>[Resin-interest] Weird behavior when modifying resin.xml</header>
    <date>Fri Jul 15 14:38:13 CEST 2011</date>
    <body>I made a change to my resin.xml file  ( Resin Pro 4.0.18 ) and allowed the server to automatically pick up the change, and the following occurred. Shutdown Resin reason: MODIFIED java.lang.IllegalStateException: store Table[stat_data_hmiqa:0] is closing. at com.caucho.db.block.BlockStore.validateBlockId(BlockStore.java:747) at com.caucho.db.block.Block.&amp;lt;init&amp;gt;(Block.java:81) at com.caucho.db.block.BlockManager.getBlock(BlockManager.java:258) at com.caucho.db.block.BlockStore.readBlock(BlockStore.java:489) at com.caucho.db.table.Table.isRowBlockFree(Table.java:994) at com.caucho.db.table.Table.scanClock(Table.java:938) at com.caucho.db.table.Table.fillFreeRows(Table.java:917) at com.caucho.db.table.Table.access$000(Table.java:80) at com.caucho.db.table.Table$RowAllocator.runTask(Table.java:1164) at com.caucho.env.thread.AbstractTaskWorker.run(AbstractTaskWorker.java:160) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) Resin Professional 4.0.18 (built Thu, 12 May 2011 01:39:03 PDT) Copyright(c) 1998-2010 Caucho Technology.  All rights reserved. 1013654.license -- 128 Resin servers Intercontinental Hotel Groups (IHG) 1012731.license -- 128 Resin servers Intercontinental Hotel Groups (IHG) Starting Resin Professional on Fri, 15 Jul 2011 08:26:57 -0400 (EDT) OpenSSL support compiled for OpenSSL 0.9.8a 11 Oct 2005 As you can see it restarted, but why the error thrown? Steve Francis Technical Adviser -- Application Technologies IHG Office:  770-442-7157 Cell:     770-906-3122 IM:  francisihg</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Weird behavior when modifying resin.xml</header>
    <date>Fri Jul 15 18:51:40 CEST 2011</date>
    <body>I made a change to my resin.xml file  ( Resin Pro 4.0.18 ) and allowed the server to automatically pick up the change, and the following occurred. Shutdown Resin reason: MODIFIED java.lang.IllegalStateException: store Table[stat_data_hmiqa:0] is closing. at com.caucho.db.block.BlockStore.validateBlockId(BlockStore.java:747) at com.caucho.db.block.Block.&amp;lt;init&amp;gt;(Block.java:81) Resin Professional 4.0.18 (built Thu, 12 May 2011 01:39:03 PDT) Copyright(c) 1998-2010 Caucho Technology.  All rights reserved. 1013654.license -- 128 Resin servers Intercontinental Hotel Groups (IHG) 1012731.license -- 128 Resin servers Intercontinental Hotel Groups (IHG) Starting Resin Professional on Fri, 15 Jul 2011 08:26:57 -0400 (EDT) OpenSSL support compiled for OpenSSL 0.9.8a 11 Oct 2005 As you can see it restarted, but why the error thrown? It's a timing issue on shutdown. The server is shutting down, but some threads are running, so it's possible they start an operation while the server is still up, but get to a validation check which notices it's stopping. That specific spot has been changed to avoid the error (by detecting the server close earlier.) -- Scott Steve Francis Technical Adviser -- Application Technologies IHG Office:  770-442-7157 Cell:     770-906-3122 IM:  francisihg</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Weird behavior when modifying resin.xml</header>
    <date>Fri Jul 15 20:12:55 CEST 2011</date>
    <body>So I'm assuming this is fixed in 4.0.20? Steve Francis Technical Adviser -- Application Technologies IHG Office:  770-442-7157 Cell:     770-906-3122 IM:  francisihg</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Weird behavior when modifying resin.xml</header>
    <date>Fri Jul 15 22:49:03 CEST 2011</date>
    <body>So I'm assuming this is fixed in 4.0.20? Yes, there's an additional check for closure in this case. -- Scott Steve Francis Technical Adviser -- Application Technologies IHG IM:  francisihg</body>
  </mail>
  <mail>
    <header>[Resin-interest] How do I configure clustering so that it actually	works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Thu Jul 07 22:38:11 CEST 2011</date>
    <body>I have my resin conf all setup... my servers starting/running, but if I load balance... and don't use stickiness to servers... the session is not kept in sync between the servers.  I am trying to test this all... so I am only running 2 servers - but both servers are configured as triads so that they should know about each other.  They are running on the same machine(just with different ip/ports) - so I am not having network issues or anything. snippet below from my config what am I missing? thanks Eric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I configure clustering so that it actually works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Thu Jul 07 23:03:03 CEST 2011</date>
    <body>That looks fine. In the /resin-admin, do you see the servers able to connect to each other? (The health tab will show connection failures in the Resin|Heartbeat check and also the Heartbeat tab.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I configure clustering so that it actually works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Fri Jul 08 00:51:29 CEST 2011</date>
    <body>I am having trouble getting resin-admin running inside my servers... is there another way I can verify that the servers can see each other? JMX or something? http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I configure clustering so that it actually works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Fri Jul 08 01:02:16 CEST 2011</date>
    <body>spoke too soon... it does show "ERROR" on the heartbeat tab for the "other" server what is the next step it figure what is causing them to not be able to talk to each other? I am having trouble getting resin-admin running inside my servers... is there another way I can verify that the servers can see each other? JMX or something? I have my resin conf all setup... my servers starting/running, but if I load balance... and don't use stickiness to servers... the session is not kept in sync between the servers.  I am trying to test this all... so I am only running 2 servers - but both servers are configured as triads so that they should know about each other.  They are running on the same machine(just with different ip/ports) - so I am not having network issues or anything. snippet below from my config what am I missing? That looks fine. In the /resin-admin, do you see the servers able to connect to each other? (The health tab will show connection failures in the Resin|Heartbeat check and also the Heartbeat tab.) -- Scott thanks Eric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I configure clustering so that it actually works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Fri Jul 08 01:17:27 CEST 2011</date>
    <body>spoke too soon... it does show "ERROR" on the heartbeat tab for the "other" server what is the next step it figure what is causing them to not be able to talk to each other? There should be an message in the log files. The main thing, though, is to double check that the resin.xml is identical for both servers and that the server port is accessible from one to the other. The heartbeat isn't much more than a dedicated TCP connection to keep track of each other, sending small packets every 60s to make sure everything's oka. -- Scott I am having trouble getting resin-admin running inside my servers... is there another way I can verify that the servers can see each other? JMX or something? I have my resin conf all setup... my servers starting/running, but if I load balance... and don't use stickiness to servers... the session is not kept in sync between the servers.  I am trying to test this all... so I am only running 2 servers - but both servers are configured as triads so that they should know about each other.  They are running on the same machine(just with different ip/ports) - so I am not having network issues or anything. snippet below from my config what am I missing? That looks fine. In the /resin-admin, do you see the servers able to connect to each other? (The health tab will show connection failures in the Resin|Heartbeat check and also the Heartbeat tab.) -- Scott thanks Eric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I configure clustering so that it actually works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Fri Jul 08 01:03:21 CEST 2011</date>
    <body>The resin-admin is the easiest. If you look at the logs (at the "finer" level), you should see something like: free (627.312M free, 715.850M max, 88.538M used)] ... You can look at JMX under the ClusterServer bean and look for the isHeartbeatActive() and LastHeartbeatTime(). -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I configure clustering so that it actually works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Fri Jul 08 01:18:32 CEST 2011</date>
    <body>I am having trouble getting resin-admin running inside my servers... is there another way I can verify that the servers can see each other? JMX or something? The resin-admin is the easiest. If you look at the logs (at the "finer" level), you should see something like: free (627.312M free, 715.850M max, 88.538M used)] ... You can look at JMX under the ClusterServer bean and look for the isHeartbeatActive() and LastHeartbeatTime(). -- Scott using JMX to look at both servers... the HeartbeatActive=true and the LastHeartbeatTime is getting updated as well I have my resin conf all setup... my servers starting/running, but if I load balance... and don't use stickiness to servers... the session is not kept in sync between the servers.  I am trying to test this all... so I am only running 2 servers - but both servers are configured as triads so that they should know about each other.  They are running on the same machine(just with different ip/ports) - so I am not having network issues or anything. snippet below from my config what am I missing? That looks fine. In the /resin-admin, do you see the servers able to connect to each other? (The health tab will show connection failures in the Resin|Heartbeat check and also the Heartbeat tab.) -- Scott thanks Eric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I configure clustering so that it actually works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Fri Jul 08 01:30:22 CEST 2011</date>
    <body>Can you create a log which include a servlet access that should replicate session data (at "finer" level) and mail me the jvm-xxx.log? -- Scott I am having trouble getting resin-admin running inside my servers... is there another way I can verify that the servers can see each other? JMX or something? The resin-admin is the easiest. If you look at the logs (at the "finer" level), you should see something like: free (627.312M free, 715.850M max, 88.538M used)] ... You can look at JMX under the ClusterServer bean and look for the isHeartbeatActive() and LastHeartbeatTime(). -- Scott using JMX to look at both servers... the HeartbeatActive=true and the LastHeartbeatTime is getting updated as well I have my resin conf all setup... my servers starting/running, but if I load balance... and don't use stickiness to servers... the session is not kept in sync between the servers.  I am trying to test this all... so I am only running 2 servers - but both servers are configured as triads so that they should know about each other.  They are running on the same machine(just with different ip/ports) - so I am not having network issues or anything. snippet below from my config what am I missing? That looks fine. In the /resin-admin, do you see the servers able to connect to each other? (The health tab will show connection failures in the Resin|Heartbeat check and also the Heartbeat tab.) -- Scott thanks Eric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I configure clustering so that it actually works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Fri Jul 08 03:19:52 CEST 2011</date>
    <body>I've attached a few logs (I am running with 2 servers (server 'a' and 'b')... I have my logging configured a little differently - so not everything from resin go to my jvm log ) server-changing-session-attri_jvm.log === is from server a, when the request hit server a and server a changed a session attribute (so the session should have gotten pushed to server b but didn't) server-changing-session-attri_stdout.log === is from server a, when the request hit server a and server a changed a session attribute (so the session should have gotten pushed to server b but didn't) when-other-server-changes-session-attri.log === is from server a, when the request hit server b and server b changed a session attribute (so the session should have gotten pushed to server a but didn't) thanks Eric Can you create a log which include a servlet access that should replicate session data (at "finer" level) and mail me the jvm-xxx.log? -- Scott I am having trouble getting resin-admin running inside my servers... is there another way I can verify that the servers can see each other? JMX or something? The resin-admin is the easiest. If you look at the logs (at the "finer" level), you should see something like: free (627.312M free, 715.850M max, 88.538M used)] ... You can look at JMX under the ClusterServer bean and look for the isHeartbeatActive() and LastHeartbeatTime(). -- Scott using JMX to look at both servers... the HeartbeatActive=true and the LastHeartbeatTime is getting updated as well I have my resin conf all setup... my servers starting/running, but if I load balance... and don't use stickiness to servers... the session is not kept in sync between the servers.  I am trying to test this all... so I am only running 2 servers - but both servers are configured as triads so that they should know about each other.  They are running on the same machine(just with different ip/ports) - so I am not having network issues or anything. snippet below from my config what am I missing? That looks fine. In the /resin-admin, do you see the servers able to connect to each other? (The health tab will show connection failures in the Resin|Heartbeat check and also the Heartbeat tab.) -- Scott thanks Eric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I configure clustering so that it actually works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Fri Jul 08 18:36:21 CEST 2011</date>
    <body>I've attached a few logs (I am running with 2 servers (server 'a' and 'b')... I have my logging configured a little differently - so not everything from resin go to my jvm log ) server-changing-session-attri_jvm.log === is from server a, when the request hit server a and server a changed a session attribute (so the session should have gotten pushed to server b but didn't) server-changing-session-attri_stdout.log === is from server a, when the request hit server a and server a changed a session attribute (so the session should have gotten pushed to server b but didn't) when-other-server-changes-session-attri.log === is from server a, when the request hit server b and server b changed a session attribute (so the session should have gotten pushed to server a but didn't) You didn't include the request log from the second request. -- Scott thanks Eric Can you create a log which include a servlet access that should replicate session data (at "finer" level) and mail me the jvm-xxx.log? -- Scott I am having trouble getting resin-admin running inside my servers... is there another way I can verify that the servers can see each other? JMX or something? The resin-admin is the easiest. If you look at the logs (at the "finer" level), you should see something like: free (627.312M free, 715.850M max, 88.538M used)] ... You can look at JMX under the ClusterServer bean and look for the isHeartbeatActive() and LastHeartbeatTime(). -- Scott using JMX to look at both servers... the HeartbeatActive=true and the LastHeartbeatTime is getting updated as well I have my resin conf all setup... my servers starting/running, but if I load balance... and don't use stickiness to servers... the session is not kept in sync between the servers.  I am trying to test this all... so I am only running 2 servers - but both servers are configured as triads so that they should know about each other.  They are running on the same machine(just with different ip/ports) - so I am not having network issues or anything. snippet below from my config what am I missing? That looks fine. In the /resin-admin, do you see the servers able to connect to each other? (The health tab will show connection failures in the Resin|Heartbeat check and also the Heartbeat tab.) -- Scott thanks Eric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I configure clustering so that it actually works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Sat Jul 09 01:32:23 CEST 2011</date>
    <body>see attached zip both servers logs as I make several requests ------ I know this is a bit of a rhetorical question... but it seems like it shouldn't be possible to be this difficult to get working...  doesn't it boil down to only a few configs? Thanks. That should be enough (though may take some time). I haven't figured out why you're not seeing the data. The updates are being sent, and that configuration is identical to one here.) -- Scott I've attached a few logs (I am running with 2 servers (server 'a' and 'b')... I have my logging configured a little differently - so not everything from resin go to my jvm log ) server-changing-session-attri_jvm.log === is from server a, when the request hit server a and server a changed a session attribute (so the session should have gotten pushed to server b but didn't) server-changing-session-attri_stdout.log === is from server a, when the request hit server a and server a changed a session attribute (so the session should have gotten pushed to server b but didn't) when-other-server-changes-session-attri.log === is from server a, when the request hit server b and server b changed a session attribute (so the session should have gotten pushed to server a but didn't) You didn't include the request log from the second request. -- Scott thanks Eric Can you create a log which include a servlet access that should replicate session data (at "finer" level) and mail me the jvm-xxx.log? -- Scott I am having trouble getting resin-admin running inside my servers... is there another way I can verify that the servers can see each other? JMX or something? The resin-admin is the easiest. If you look at the logs (at the "finer" level), you should see something like: free (627.312M free, 715.850M max, 88.538M used)] ... You can look at JMX under the ClusterServer bean and look for the isHeartbeatActive() and LastHeartbeatTime(). -- Scott using JMX to look at both servers... the HeartbeatActive=true and the LastHeartbeatTime is getting updated as well I have my resin conf all setup... my servers starting/running, but if I load balance... and don't use stickiness to servers... the session is not kept in sync between the servers.  I am trying to test this all... so I am only running 2 servers - but both servers are configured as triads so that they should know about each other.  They are running on the same machine(just with different ip/ports) - so I am not having network issues or anything. snippet below from my config what am I missing? That looks fine. In the /resin-admin, do you see the servers able to connect to each other? (The health tab will show connection failures in the Resin|Heartbeat check and also the Heartbeat tab.) -- Scott thanks Eric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I configure clustering so that it actually works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Fri Jul 08 14:53:18 CEST 2011</date>
    <body>I've attached a few logs (I am running with 2 servers (server 'a' and 'b')... I have my logging configured a little differently - so not everything from resin go to my jvm log ) server-changing-session-attri_jvm.log === is from server a, when the request hit server a and server a changed a session attribute (so the session should have gotten pushed to server b but didn't) server-changing-session-attri_stdout.log === is from server a, when the request hit server a and server a changed a session attribute (so the session should have gotten pushed to server b but didn't) when-other-server-changes-session-attri.log === is from server a, when the request hit server b and server b changed a session attribute (so the session should have gotten pushed to server a but didn't) thanks Eric I've also attached a "diff" file of the 2 servers resin config files--- most of the differences are jvm-arg differences Can you create a log which include a servlet access that should replicate session data (at "finer" level) and mail me the jvm-xxx.log? -- Scott I am having trouble getting resin-admin running inside my servers... is there another way I can verify that the servers can see each other? JMX or something? The resin-admin is the easiest. If you look at the logs (at the "finer" level), you should see something like: free (627.312M free, 715.850M max, 88.538M used)] ... You can look at JMX under the ClusterServer bean and look for the isHeartbeatActive() and LastHeartbeatTime(). -- Scott using JMX to look at both servers... the HeartbeatActive=true and the LastHeartbeatTime is getting updated as well I have my resin conf all setup... my servers starting/running, but if I load balance... and don't use stickiness to servers... the session is not kept in sync between the servers.  I am trying to test this all... so I am only running 2 servers - but both servers are configured as triads so that they should know about each other.  They are running on the same machine(just with different ip/ports) - so I am not having network issues or anything. snippet below from my config what am I missing? That looks fine. In the /resin-admin, do you see the servers able to connect to each other? (The health tab will show connection failures in the Resin|Heartbeat check and also the Heartbeat tab.) -- Scott thanks Eric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I configure clustering so that it actually works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Wed Jul 13 00:48:42 CEST 2011</date>
    <body>This appears to be a timing-related issue with the non-sticky sessions. 4.0.20 will have a fix. -- Scott I am having trouble getting resin-admin running inside my servers... is there another way I can verify that the servers can see each other? JMX or something? The resin-admin is the easiest. If you look at the logs (at the "finer" level), you should see something like: free (627.312M free, 715.850M max, 88.538M used)] ... You can look at JMX under the ClusterServer bean and look for the isHeartbeatActive() and LastHeartbeatTime(). -- Scott using JMX to look at both servers... the HeartbeatActive=true and the LastHeartbeatTime is getting updated as well I have my resin conf all setup... my servers starting/running, but if I load balance... and don't use stickiness to servers... the session is not kept in sync between the servers.  I am trying to test this all... so I am only running 2 servers - but both servers are configured as triads so that they should know about each other.  They are running on the same machine(just with different ip/ports) - so I am not having network issues or anything. snippet below from my config what am I missing? That looks fine. In the /resin-admin, do you see the servers able to connect to each other? (The health tab will show connection failures in the Resin|Heartbeat check and also the Heartbeat tab.) -- Scott thanks Eric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I configure clustering so that it actually works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Mon Jul 18 15:23:24 CEST 2011</date>
    <body>any plan for when 4.0.20 will be available? This appears to be a timing-related issue with the non-sticky sessions. 4.0.20 will have a fix. -- Scott I am having trouble getting resin-admin running inside my servers... is there another way I can verify that the servers can see each other? JMX or something? The resin-admin is the easiest. If you look at the logs (at the "finer" level), you should see something like: free (627.312M free, 715.850M max, 88.538M used)] ... You can look at JMX under the ClusterServer bean and look for the isHeartbeatActive() and LastHeartbeatTime(). -- Scott using JMX to look at both servers... the HeartbeatActive=true and the LastHeartbeatTime is getting updated as well I have my resin conf all setup... my servers starting/running, but if I load balance... and don't use stickiness to servers... the session is not kept in sync between the servers.  I am trying to test this all... so I am only running 2 servers - but both servers are configured as triads so that they should know about each other.  They are running on the same machine(just with different ip/ports) - so I am not having network issues or anything. snippet below from my config what am I missing? That looks fine. In the /resin-admin, do you see the servers able to connect to each other? (The health tab will show connection failures in the Resin|Heartbeat check and also the Heartbeat tab.) -- Scott thanks Eric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I configure clustering so that it actually works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Fri Jul 22 22:09:04 CEST 2011</date>
    <body>I upgraded to 4.0.20... and it still does NOT work! What am I missing????  Is anyone successfully running 4.x in a clustered/loadbalanced configuration?  I am not trying to do anything complicated... a simple 2 server cluster without stickiness. This appears to be a timing-related issue with the non-sticky sessions. 4.0.20 will have a fix. -- Scott I am having trouble getting resin-admin running inside my servers... is there another way I can verify that the servers can see each other? JMX or something? The resin-admin is the easiest. If you look at the logs (at the "finer" level), you should see something like: free (627.312M free, 715.850M max, 88.538M used)] ... You can look at JMX under the ClusterServer bean and look for the isHeartbeatActive() and LastHeartbeatTime(). -- Scott using JMX to look at both servers... the HeartbeatActive=true and the LastHeartbeatTime is getting updated as well I have my resin conf all setup... my servers starting/running, but if I load balance... and don't use stickiness to servers... the session is not kept in sync between the servers.  I am trying to test this all... so I am only running 2 servers - but both servers are configured as triads so that they should know about each other.  They are running on the same machine(just with different ip/ports) - so I am not having network issues or anything. snippet below from my config what am I missing? That looks fine. In the /resin-admin, do you see the servers able to connect to each other? (The health tab will show connection failures in the Resin|Heartbeat check and also the Heartbeat tab.) -- Scott thanks Eric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How do I configure clustering so that it actually works with 4.0.15/4.0.18/4.0.19?</header>
    <date>Fri Jul 22 23:33:38 CEST 2011</date>
    <body>I upgraded to 4.0.20... and it still does NOT work! What am I missing????  Is anyone successfully running 4.x in a clustered/loadbalanced configuration?  I am not trying to do anything complicated... a simple 2 server cluster without stickiness. Should work with a basic configuration (I'd checked that configuration specifically before the release - in addition to the usual test cases.) Try starting from a base system, adding a second &amp;lt;server&amp;gt;, and creating a trivial JSP that calls -- Scott This appears to be a timing-related issue with the non-sticky sessions. 4.0.20 will have a fix. -- Scott I am having trouble getting resin-admin running inside my servers... is there another way I can verify that the servers can see each other? JMX or something? The resin-admin is the easiest. If you look at the logs (at the "finer" level), you should see something like: free (627.312M free, 715.850M max, 88.538M used)] ... You can look at JMX under the ClusterServer bean and look for the isHeartbeatActive() and LastHeartbeatTime(). -- Scott using JMX to look at both servers... the HeartbeatActive=true and the LastHeartbeatTime is getting updated as well I have my resin conf all setup... my servers starting/running, but if I load balance... and don't use stickiness to servers... the session is not kept in sync between the servers.  I am trying to test this all... so I am only running 2 servers - but both servers are configured as triads so that they should know about each other.  They are running on the same machine(just with different ip/ports) - so I am not having network issues or anything. snippet below from my config what am I missing? That looks fine. In the /resin-admin, do you see the servers able to connect to each other? (The health tab will show connection failures in the Resin|Heartbeat check and also the Heartbeat tab.) -- Scott thanks Eric</body>
  </mail>
  <mail>
    <header>[Resin-interest] ScheduledThreadPool randomly failed to start	throwing NullPointerException</header>
    <date>Thu Jul 07 09:06:53 CEST 2011</date>
    <body>Hi Scott, I found resin sometimes can't start ScheduledThreadPool, resulting in @Inject ExecutorService executorService not work (executorService is null). can't precisely reproduce it coz it happened randomly when server restarts. affected resin version: Resin 4.0.s100809 Resin 4.0.18 at com.caucho.server.util.ScheduledThreadPool$TaskFuture.run(ScheduledThreadPool.java:591) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) at com.caucho.server.util.ScheduledThreadPool$TaskFuture.run(ScheduledThreadPool.java:591) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) at com.caucho.server.util.ScheduledThreadPool$TaskFuture.run(ScheduledThreadPool.java:591) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) at com.caucho.server.util.ScheduledThreadPool$TaskFuture.run(ScheduledThreadPool.java:591) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) -Wesley</body>
  </mail>
  <mail>
    <header>[Resin-interest] ResinPro 4.0.19 - Oracle support???</header>
    <date>Mon Jun 27 19:41:18 CEST 2011</date>
    <body>I am trying to upgrade from 4.0.15 to 4.0.19. The server fails to start. The problem is that it is trying to create the "resin_data" and "resin_mnode" database tables ... but the "create table" syntax is not valid for Oracle. -------------------------------------------------------------------------------------------------- 06-27 12:38:29.146 JdbcMnodeStore[server] java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist 06-27 12:38:29.146 CREATE TABLE resin_mnode ( id CHAR(64) PRIMARY KEY, value CHAR(64), cache_id CHAR(64), expire_timeout BIGINT, idle_timeout BIGINT, lease_timeout BIGINT, local_read_timeout BIGINT, update_time BIGINT, item_version BIGINT, flags INTEGER, server_version INTEGER) 06-27 12:38:29.149 [3ms] jdbc/versioncloud.d0.0.0:exn-executeUpdate(CREATE TABLE resin_mnode ( id CHAR(64) PRIMARY KEY, value CHAR(64), cache_id CHAR(64), expire_timeout BIGINT, idle_timeout BIGINT, lease_timeout BIGINT, local_read_timeout BIGINT, update_time BIGINT, item_version BIGINT, flags INTEGER, java.sql.SQLSyntaxErrorException: ORA-00902: invalid datatype 06-27 12:38:29.149 [0ms] jdbc/versioncloud.d0.0.0:close() 06-27 12:38:29.149 idle ManagedPoolItem[jdbc/versioncloud,0,ManagedConnectionImpl] 06-27 12:38:29.149 jdbc/versioncloud.d0.0:clearWarnings() 06-27 12:38:29.149 java.lang.RuntimeException: java.sql.SQLSyntaxErrorException: ORA-00902: invalid datatype at com.caucho.distcache.cluster.ClusterDataBacking.&amp;lt;init&amp;gt;(ClusterDataBacking.java:89) at com.caucho.distcache.cluster.ClusterCacheManagerImpl.createDataBacking(ClusterCacheManagerImpl.java:81) at com.caucho.server.distcache.AbstractCacheManager.start(AbstractCacheManager.java:1133) at com.caucho.distcache.cluster.ClusterCacheManagerImpl.start(ClusterCacheManagerImpl.java:90) at com.caucho.env.distcache.DistCacheSystem.start(DistCacheSystem.java:110) at com.caucho.env.service.ResinSystem.startServices(ResinSystem.java:513) at com.caucho.env.service.ResinSystem.start(ResinSystem.java:481) at com.caucho.server.resin.Resin.start(Resin.java:999) at com.caucho.server.resin.Resin.initMain(Resin.java:1127) at com.caucho.server.resin.Resin.main(Resin.java:1426) Caused by: java.sql.SQLSyntaxErrorException: ORA-00902: invalid datatype at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:439) at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:395) at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:802) at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:436) at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186) at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:521) at oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.java:194) at oracle.jdbc.driver.T4CStatement.executeForRows(T4CStatement.java:1000) at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1307) at oracle.jdbc.driver.OracleStatement.executeUpdateInternal(OracleStatement.java:1814) at oracle.jdbc.driver.OracleStatement.executeUpdate(OracleStatement.java:1779) at oracle.jdbc.driver.OracleStatementWrapper.executeUpdate(OracleStatementWrapper.java:277) at com.caucho.sql.spy.SpyStatement.executeUpdate(SpyStatement.java:225) at com.caucho.sql.UserStatement.executeUpdate(UserStatement.java:230) at com.caucho.distcache.jdbc.JdbcMnodeStore.initDatabase(JdbcMnodeStore.java:256) at com.caucho.distcache.jdbc.JdbcMnodeStore.init(JdbcMnodeStore.java:196) at com.caucho.distcache.cluster.ClusterDataBacking.&amp;lt;init&amp;gt;(ClusterDataBacking.java:80) ... 9 more -------------------------------------------------------------------------------------------------- If I manually add the tables... the server starts... but I get errors. -------------------------------------------------------------------------------------------------- 06-27 12:07:31.860 jdbc/versioncloud.d0.0.5:prepareStatement(SELECT d.id, d.expire_time, m.value FROM resin_mnode AS m LEFT JOIN resin_data AS d ON(m.value = d.id)) 06-27 12:07:31.866 [6ms] jdbc/versioncloud.d0.0.5:exn-executeQuery(java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended --------------------------------------------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ResinPro 4.0.19 - Oracle support???</header>
    <date>Mon Jun 27 19:50:59 CEST 2011</date>
    <body>For now, just set the persistent-store type="cluster" instead of "jdbc". The jdbc store in Resin 4.0 acts as a backup to the normal cluster store. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ResinPro 4.0.19 - Oracle support???</header>
    <date>Mon Jun 27 20:25:35 CEST 2011</date>
    <body>the problem(I think) is that I don't use Resin's clustering... and rely on the db persistent sessions to handle bouncing between servers. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ResinPro 4.0.19 - Oracle support???</header>
    <date>Mon Jun 27 20:35:22 CEST 2011</date>
    <body>The db persistent sessions in Resin 4.0 is a backup to Resin's clustering. If you're using db persistent sessions, you're also using Resin's clustered sessions. It's not a replacement, it's an additional level of reliability. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ResinPro 4.0.19 - Oracle support???</header>
    <date>Fri Jul 01 16:57:46 CEST 2011</date>
    <body>I changed my persistent-store type to be "cluster" instead of "jdbc"... but it still doesn't start because it still needs the "new" resin database tables... (which fail on create connecting to Oracle) thoughts? Eric Kreiser http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ResinPro 4.0.19 - Oracle support???</header>
    <date>Fri Jul 01 17:42:09 CEST 2011</date>
    <body>But the cluster store doesn't use jdbc. It wouldn't even know about the Oracle database. What does that section of the resin.xml look like? -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ResinPro 4.0.19 - Oracle support???</header>
    <date>Tue Jul 05 15:45:58 CEST 2011</date>
    <body>I've attached a stripped down resin.conf you wrote "But the cluster store doesn't use jdbc." - BUT  earlier in the thread you wrote "The jdbc store in Resin 4.0 acts as a backup to the normal cluster store." which is it? how can things like persistent sessions work in a load balanced scenario if all servers are not pointing to the same DB? like I stated earlier in the thread - I haven't been using Resin's clustering setup... I have been relying on db persisted sessions to "tie" the server together... is this approach no longer valid with 4.0? Does Caucho intend to support Oracle?  or do I need to stay on a earlier version until I can figure out what I am going to do? I changed my persistent-store type to be "cluster" instead of "jdbc"... but it still doesn't start because it still needs the "new" resin database tables... (which fail on create connecting to Oracle) But the cluster store doesn't use jdbc. It wouldn't even know about the Oracle database. What does that section of the resin.xml look like? -- Scott thoughts? Eric Kreiser the problem(I think) is that I don't use Resin's clustering... and rely on the db persistent sessions to handle bouncing between servers. I am trying to upgrade from 4.0.15 to 4.0.19. The server fails to start. For now, just set the persistent-store type="cluster" instead of "jdbc". The jdbc store in Resin 4.0 acts as a backup to the normal cluster store. -- Scott The problem is that it is trying to create the "resin_data" and "resin_mnode" database tables ... but the "create table" syntax is not valid for Oracle. -------------------------------------------------------------------------------------------------- 06-27 12:38:29.146 JdbcMnodeStore[server] java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist 06-27 12:38:29.146 CREATE TABLE resin_mnode ( id CHAR(64) PRIMARY KEY, value CHAR(64), cache_id CHAR(64), expire_timeout BIGINT, idle_timeout BIGINT, lease_timeout BIGINT, local_read_timeout BIGINT, update_time BIGINT, item_version BIGINT, flags INTEGER, server_version INTEGER) 06-27 12:38:29.149 [3ms] jdbc/versioncloud.d0.0.0:exn-executeUpdate(CREATE TABLE resin_mnode ( id CHAR(64) PRIMARY KEY, value CHAR(64), cache_id CHAR(64), expire_timeout BIGINT, idle_timeout BIGINT, lease_timeout BIGINT, local_read_timeout BIGINT, update_time BIGINT, item_version BIGINT, flags INTEGER, java.sql.SQLSyntaxErrorException: ORA-00902: invalid datatype 06-27 12:38:29.149 [0ms] jdbc/versioncloud.d0.0.0:close() 06-27 12:38:29.149 idle ManagedPoolItem[jdbc/versioncloud,0,ManagedConnectionImpl] 06-27 12:38:29.149 jdbc/versioncloud.d0.0:clearWarnings() 06-27 12:38:29.149 java.lang.RuntimeException: java.sql.SQLSyntaxErrorException: ORA-00902: invalid datatype at com.caucho.distcache.cluster.ClusterDataBacking.&amp;lt;init&amp;gt;(ClusterDataBacking.java:89) at com.caucho.distcache.cluster.ClusterCacheManagerImpl.createDataBacking(ClusterCacheManagerImpl.java:81) at com.caucho.server.distcache.AbstractCacheManager.start(AbstractCacheManager.java:1133) at com.caucho.distcache.cluster.ClusterCacheManagerImpl.start(ClusterCacheManagerImpl.java:90) at com.caucho.env.distcache.DistCacheSystem.start(DistCacheSystem.java:110) at com.caucho.env.service.ResinSystem.startServices(ResinSystem.java:513) at com.caucho.env.service.ResinSystem.start(ResinSystem.java:481) at com.caucho.server.resin.Resin.start(Resin.java:999) at com.caucho.server.resin.Resin.initMain(Resin.java:1127) at com.caucho.server.resin.Resin.main(Resin.java:1426) Caused by: java.sql.SQLSyntaxErrorException: ORA-00902: invalid datatype at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:439) at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:395) at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:802) at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:436) at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186) at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:521) at oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.java:194) at oracle.jdbc.driver.T4CStatement.executeForRows(T4CStatement.java:1000) at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1307) at oracle.jdbc.driver.OracleStatement.executeUpdateInternal(OracleStatement.java:1814) at oracle.jdbc.driver.OracleStatement.executeUpdate(OracleStatement.java:1779) at oracle.jdbc.driver.OracleStatementWrapper.executeUpdate(OracleStatementWrapper.java:277) at com.caucho.sql.spy.SpyStatement.executeUpdate(SpyStatement.java:225) at com.caucho.sql.UserStatement.executeUpdate(UserStatement.java:230) at com.caucho.distcache.jdbc.JdbcMnodeStore.initDatabase(JdbcMnodeStore.java:256) at com.caucho.distcache.jdbc.JdbcMnodeStore.init(JdbcMnodeStore.java:196) at com.caucho.distcache.cluster.ClusterDataBacking.&amp;lt;init&amp;gt;(ClusterDataBacking.java:80) ... 9 more -------------------------------------------------------------------------------------------------- If I manually add the tables... the server starts... but I get errors. -------------------------------------------------------------------------------------------------- 06-27 12:07:31.860 jdbc/versioncloud.d0.0.5:prepareStatement(SELECT d.id, d.expire_time, m.value FROM resin_mnode AS m LEFT JOIN resin_data AS d ON(m.value = d.id)) 06-27 12:07:31.866 [6ms] jdbc/versioncloud.d0.0.5:exn-executeQuery(java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended --------------------------------------------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ResinPro 4.0.19 - Oracle support???</header>
    <date>Tue Jul 05 17:27:44 CEST 2011</date>
    <body>You need to remove the &amp;lt;data-source&amp;gt; from the &amp;lt;persistent-store&amp;gt; to disable the jdbc backup. It is a backup store. Because it's a backup, it's not strictly needed for normal operation. I don't understand the question. The servers in a cluster know about each other through the configuration. If you're not configuring Resin in a cluster, then cluster capabilities like the persistent store aren't available. I filed a bug report. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ResinPro 4.0.19 - Oracle support???</header>
    <date>Tue Jul 05 19:59:23 CEST 2011</date>
    <body>ok... so basically what I am hearing is that I can't deploy my app on 4.0.19 as it stands now. In resin 3.1, I was able to deploy my app... using db persistent sessions... NOT configure the resin.conf to be clustered... but still be able to load balance(using other products) and have the users not loose state as they bounce between servers. Is this scenario supported with 4?  or with 4, am I forced to tell resin about each one of its peer servers in the resin.conf? I am not trying to beat a dead horse here... but trying to understand if it is an intended change in design/functionality between 3.1 and 4. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ResinPro 4.0.19 - Oracle support???</header>
    <date>Tue Jul 05 20:09:07 CEST 2011</date>
    <body>Correct. If you want the clustering capabilities like distributed sessions, you need to configure a cluster. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ResinPro 4.0.19 - Oracle support???</header>
    <date>Thu Jul 07 04:29:23 CEST 2011</date>
    <body>So I am attempting to get the servers working in "clustered" mode... it is not working... and if I turn logging up... I am getting all kinds of ClassNotFoundException's... it is looking for a number of Hessian classes that are not in any of the jars released with the resin download... 07-06 21:41:56.823 HmtpWriter[null] query AuthQuery[,SignedCredentials] 07-06 21:41:56.853 java.lang.ClassNotFoundException: com.caucho.hmtp.AuthQueryHessianSerializer at java.net.URLClassLoader$1.run(URLClassLoader.java:202) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:190) at java.lang.ClassLoader.loadClass(ClassLoader.java:307) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) at java.lang.ClassLoader.loadClass(ClassLoader.java:248) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:247) at com.caucho.hessian.io.ContextSerializerFactory.getCustomSerializer(ContextSerializerFactory.java:190) at com.caucho.hessian.io.SerializerFactory.loadSerializer(SerializerFactory.java:266) at com.caucho.hessian.io.SerializerFactory.getSerializer(SerializerFactory.java:224) at com.caucho.hessian.io.SerializerFactory.getObjectSerializer(SerializerFactory.java:197) at com.caucho.hessian.io.Hessian2Output.writeObject(Hessian2Output.java:437) at com.caucho.hmtp.HmtpWriter.query(HmtpWriter.java:194) at com.caucho.hmtp.HmtpWebSocketWriter.query(HmtpWebSocketWriter.java:152) at com.caucho.cloud.bam.HmtpStream.authenticate(HmtpStream.java:167) at com.caucho.cloud.bam.HmtpStream.init(HmtpStream.java:137) at com.caucho.cloud.bam.HmtpStream.&amp;lt;init&amp;gt;(HmtpStream.java:78) at com.caucho.cloud.heartbeat.HeartbeatActor.openStream(HeartbeatActor.java:335) at com.caucho.cloud.heartbeat.HeartbeatActor.sendMessage(HeartbeatActor.java:288) at com.caucho.cloud.heartbeat.HeartbeatActor.sendHeartbeatMessage(HeartbeatActor.java:270) at com.caucho.cloud.heartbeat.HeartbeatActor.sendHeartbeat(HeartbeatActor.java:195) at com.caucho.cloud.heartbeat.HeartbeatActor.access$000(HeartbeatActor.java:62) at com.caucho.cloud.heartbeat.HeartbeatActor$HeartBeatSender.run(HeartbeatActor.java:417) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ResinPro 4.0.19 - Oracle support???</header>
    <date>Thu Jul 07 17:56:34 CEST 2011</date>
    <body>level="all" isn't generally useful because it includes normal exceptions like that one. The most you'd normally want to run at is "finer". -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Possible Resin Classloader leakage for JPA	applications</header>
    <date>Mon Jun 20 18:11:02 CEST 2011</date>
    <body>Hi all, I think that resin (at least version 3.1, but most probably 4.0 too) suffers from a critical classloader leak which may cause that the memory occupied by an application will not get released when destroying its servlet context (stopping/redeploying the application). As an result, further restarts/redeployments will sooner or later result in an OutOfMemoryError. Please have a look at resin-3.1.10\modules\jpa\src\javax\persistence\Persistence.java On line 51 there's a WeakHashMap defined, which maps the classloader to the corresponding PersistenceProvider instances: The problem is that a PersistenceProvider instance may reference the key indirectly (which is at least true when not using Amber, e.g. EclipseLink) The loaded class will of course reference its classloader, which is the web application's classloader. However according to the javadocs this will prevent the removal of the entry: "Thus care should be taken to ensure that value objects do not strongly refer to their own keys, either directly or indirectly, since that will prevent the keys from being discarded." With the consequence that the EnvironmentClassLoader cannot be garbage collected. When looking at the GC roots (for a classloader from a stopped application) this can be seen easily: Class Name | Shallow Heap | Retained Heap ------------------------------------------------------------------------------------------------------------------ com.caucho.loader.EnvironmentClassLoader @ 0xe68362d0 |          376 |   131.077.664 '- &amp;lt;classloader&amp;gt; class org.eclipse.persistence.jpa.PersistenceProvider @ 0xd3bda6d8|            0 |             0 '- &amp;lt;class&amp;gt; org.eclipse.persistence.jpa.PersistenceProvider @ 0xe7bb2010         |           24 |            40 '- [3] javax.persistence.spi.PersistenceProvider[4] @ 0xe7bb2020             |           56 |           144 '- value java.util.WeakHashMap$Entry @ 0xe7c72ca8 |           72 |           432 '- [11] java.util.WeakHashMap$Entry[16] @ 0xe118fc18 |          152 |           800 '- table java.util.WeakHashMap @ 0xe118fbe8 |           72 |           928 '- _providerMap class javax.persistence.Persistence @ 0xd1fc55a8 |           32 |           960 '- [1152] java.lang.Object[1280] @ 0xe0b40378 |       10.264 |     1.774.424 ------------------------------------------------------------------------------------------------------------------ As you can see, the second last line (_providerMap class javax.persistence.Persistence @ 0xd1fc55a8) which is actually a caucho class, references the old EnvironmentClassLoader. So in my case, 131 MB will not get released. If I am right - is there a workaround available? (Is it possible to configure the EnvironmentClassLoader that it will not load the PersistenceProvider/Persistence class from Amber but from the JPA implementation which my application provides?) Thank you and best regards, Patric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible Resin Classloader leakage for	JPA	applications</header>
    <date>Mon Jun 20 18:35:58 CEST 2011</date>
    <body>Thanks. I've filed this as http://bugs.caucho.com/view.php?id=4628 -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible Resin Classloader leakage	for	JPA	applications</header>
    <date>Mon Jun 20 21:28:04 CEST 2011</date>
    <body>http://bugs.caucho.com/view.php?id=4628 Thank you for fixing the bug so quickly. Is it possible to backport it to 3.1 as well? (if not: is a workaround available?) Thanks. Patric http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible Resin Classloader leakage for JPA applications</header>
    <date>Thu Jul 21 10:42:30 CEST 2011</date>
    <body>Hi Scott, after testing resin 4.0.20 it seems that the reported bug has been fixed. However, there's still another JPA classloader leak which prevents the web application classloader being garbage collected. Because I am not allowed to add a comment to bug 4628 at your mantis site, I am going to report it here: The cause of the issue is that resin loads the JPA implementation library included within a web application (e.g. EclipseLink) with the global classloader instead of the web application's classloader. (why?) As a result, after stopping the web application these classes remain loaded. What makes this even worse is that if a JPA implementation class refers to a class of my web application which is quite common (if you think of hooks, configuration classes etc.) the web application classloader also remains referenced and prevents its garbage collection forever. Best regards, Patric Quoting Patric Rufflar &amp;lt;pat...@rufflar.com&amp;gt;: http://bugs.caucho.com/view.php?id=4628 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Eclipse plugin: How to create a resin 3.1 server?</header>
    <date>Mon Jun 20 14:12:25 CEST 2011</date>
    <body>Hi, I just installed the most recent release of the Resin Eclipse plugin. However, I cannot create resin 3.1 servers. (Only "resin 4.0" is shown in the "New server" dialog) This was possible in previous releases of that plugin. Is this an intentional behavior? Thank you and best regards, Patric</body>
  </mail>
  <mail>
    <header>[Resin-interest] Slow Alarm bug... It's baaaaack!</header>
    <date>Mon Jun 20 08:57:08 CEST 2011</date>
    <body>I just installed 4.0.19 and I'm seeing lots of slow alarm's just like are mentioned in bug http://bugs.caucho.com/bug_view_advanced_page.php?bug_id=4291 is there a way to work around this but, or should I back off and try 4.0.18?  If there's anything you need to help solve this problem, just let me know.  Thanks. (*Chris*) alarm A larm[alarm[ WebAppExpandDeployGenerator[null]]] 239429ms alarm A larm[alarm[WebAppExpandDeployGenerator[null]]] 238655ms alarm A larm[alarm[WebAppExpandDeployGenerator[null]]] 238290ms alarm A larm[alarm[com.caucho.network.listen.TcpSocketLinkListener$SuspendReaper@17991de 1]] 215443ms alarm A larm[alarm[com.caucho.http.log.AccessLog@595780d9]] 215181ms alarm A larm[alarm[SessionManager[]]] 215026ms alarm A larm[alarm[DeployControllerAlarm[null]]] 215316ms alarm A larm[alarm[DeployControllerAlarm[null]]] 215287ms alarm A larm[alarm[SessionManager[/resin-admin]]] 215287ms alarm A larm[alarm[ConnectionPool[jdbc/resin]]] 215210ms alarm A larm[alarm[DeployControllerAlarm[null]]] 214899ms alarm A larm[alarm[DeployControllerAlarm[null]]] 214899ms alarm A larm[alarm[DeployControllerAlarm[null]]] 214900ms alarm A larm[alarm[DeployControllerAlarm[null]]] 214900ms alarm A and so on... for hours.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Slow Alarm bug... It's baaaaack!</header>
    <date>Mon Jun 20 18:33:30 CEST 2011</date>
    <body>I just installed 4.0.19 and I'm seeing lots of slow alarm's just like are mentioned in bug http://bugs.caucho.com/bug_view_advanced_page.php?bug_id=4291 is there a way to work around this but, or should I back off and try 4.0.18? If there's anything you need to help solve this problem, just let me know.  Thanks. What does the postmortem show for the threads and memory before the problem starts? -- Scott (*Chris*) slow alarm A larm[alarm[ WebAppExpandDeployGenerator[null]]] 239429ms slow alarm A larm[alarm[WebAppExpandDeployGenerator[null]]] 238655ms slow alarm A larm[alarm[WebAppExpandDeployGenerator[null]]] 238290ms slow alarm A larm[alarm[com.caucho.network.listen.TcpSocketLinkListener$SuspendReaper@17991de 1]] 215443ms slow alarm A larm[alarm[com.caucho.http.log.AccessLog@595780d9]] 215181ms slow alarm A larm[alarm[SessionManager[]]] 215026ms slow alarm A larm[alarm[DeployControllerAlarm[null]]] 215316ms slow alarm A larm[alarm[DeployControllerAlarm[null]]] 215287ms slow alarm A larm[alarm[SessionManager[/resin-admin]]] 215287ms slow alarm A larm[alarm[ConnectionPool[jdbc/resin]]] 215210ms slow alarm A larm[alarm[DeployControllerAlarm[null]]] 214899ms slow alarm A larm[alarm[DeployControllerAlarm[null]]] 214899ms slow alarm A larm[alarm[DeployControllerAlarm[null]]] 214900ms slow alarm A larm[alarm[DeployControllerAlarm[null]]] 214900ms slow alarm A and so on... for hours.</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin:MovedPermanently questions</header>
    <date>Wed Jun 15 22:27:22 CEST 2011</date>
    <body>Trying this: http://www.caucho.com/resin-4.0/reference.xtp#resinMovedPermanently Use case:  I need to do a 301 redirect for all links to http://blog.X/* to http://www.X/blog/ I found this documentation which is very similar, but does a forward: http://www.caucho.com/resin-4.0/admin/http-rewrite.xtp#Forwardbasedonhostname Two questions: 1) Does MovedPermanently do a 301?  If not, this is all moot. 2) I don't think MovedPermanently works at the cluster level -- thinking it may only work at the host level, making this use case not possible. Can someone verify that?  Any reason why it couldn't work at the cluster level in future releases? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin:MovedPermanently questions</header>
    <date>Wed Jun 15 22:32:43 CEST 2011</date>
    <body>http://www.caucho.com/resin-4.0/reference.xtp#resinMovedPermanently http://blog.X/* http://www.X/blog/ http://www.caucho.com/resin-4.0/admin/http-rewrite.xtp#Forwardbasedonhostname It uses HttpServletResponse.SC_MOVED_PERMANENTLY which is a 301. You can always use &amp;lt;host-default&amp;gt; to apply a rule across all virtual hosts. URL dispatching is owned by the virtual host. The cluster level doesn't understand URLs, so it doesn't make sense to dispatch a URL in the cluster level. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin:MovedPermanently questions</header>
    <date>Wed Jun 15 22:53:16 CEST 2011</date>
    <body>http://www.caucho.com/resin-4.0/reference.xtp#resinMovedPermanently http://blog.X/* http://www.X/blog/ http://www.caucho.com/resin-4.0/admin/http-rewrite.xtp#Forwardbasedonhostname Perfect. Interesting, I will give that a shot. Does that mean the example, http://www.caucho.com/resin-4.0/admin/http-rewrite.xtp#Forwardbasedonhostname , is fundamentally different then?  Maybe it's doing something other than "dispatching" for Forward to work by MovedPermanently to not work?  I can see why both wouldn't work at the cluster level and was surprised to see that example, actually, but just assumed that if Forward could work then MovedPermanently http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin:MovedPermanently questions</header>
    <date>Wed Jun 15 23:06:18 CEST 2011</date>
    <body>http://www.caucho.com/resin-4.0/admin/http-rewrite.xtp#Forwardbasedonhostname , Hmm. I've filed a bug report for this. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin:MovedPermanently questions</header>
    <date>Wed Jun 15 23:12:52 CEST 2011</date>
    <body>http://www.caucho.com/resin-4.0/admin/http-rewrite.xtp#Forwardbasedonhostname , Ok in the meantime I am just going to create virtual hosts with MovedPermanently inside of 'em.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Daytrader App</header>
    <date>Tue Jun 14 20:03:23 CEST 2011</date>
    <body>Has anybody successfully built and deployed the DayTrader app from the Apache project in Resin? (Ref: https://cwiki.apache.org/GMOxDOC30/daytrader-a-more-complex-application.html ) I'm looking for an outline of the process, if anybody has managed it. Thanks! Jamie</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Daytrader App</header>
    <date>Tue Jun 14 20:20:48 CEST 2011</date>
    <body>Has anybody successfully built and deployed the DayTrader app from the Apache project in Resin? (Ref: https://cwiki.apache.org/GMOxDOC30/daytrader-a-more-complex-application.html ) ' Unless they've upgraded it to use JPA, it shouldn't work in Resin because it requires JavaEE enterprise (primarily EJB 2.1 CMP but also possibly the "application client" in JavaEE enterprise.) -- Scott I'm looking for an outline of the process, if anybody has managed it. Thanks! Jamie</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Daytrader App</header>
    <date>Tue Jun 14 21:02:59 CEST 2011</date>
    <body>https://cwiki.apache.org/GMOxDOC30/daytrader-a-more-complex-application.html ) Thanks, Scott. It looks like they do have a web-jpa module, but I wasn't entirely sure how to go about getting it built and deployed. I'll keep toying around with it. For reference: https://issues.apache.org/jira/browse/DAYTRADER-74 A Tomcat-ready version: https://issues.apache.org/jira/browse/DAYTRADER-68 -Jamie</body>
  </mail>
  <mail>
    <header>[Resin-interest] configuration problem in resin</header>
    <date>Tue Jun 14 10:50:57 CEST 2011</date>
    <body>Hi while configuring  resin-4.0.16 i am getting below warning: "make[2]: warning:  Clock skew detected.  Your build may be incomplete." can some body help me out. thanks in advance. thanks rahul</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] configuration problem in resin</header>
    <date>Tue Jun 14 18:07:33 CEST 2011</date>
    <body>That usually indicates the files you're trying to build are dated in the future. Either fix your system clock and re-expand the archive, or "touch" each file to update their dates. Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>[Resin-interest] Formlogin stopped working</header>
    <date>Mon Jun 06 16:36:35 CEST 2011</date>
    <body>Has anyone else seen the Formlogin stuff stop working as of 4.0.18? I have the following coded in my resin.xml file and it worked up until 4.0.18. Steve Francis Technical Adviser -- Application Technologies IHG Office:  770-442-7157 Cell:     770-906-3122 IM:  francisihg</body>
  </mail>
  <mail>
    <header>[Resin-interest] MySQL issues with 4.0.18</header>
    <date>Fri May 27 01:30:25 CEST 2011</date>
    <body>I'm trying to set my webapp up on a new server, and running into something I've never seen before. Google has solutions for people that worked, but none of them work for me. The same config on OpenSolaris and OS X work (albeit with different versions of MySQL and Resin). I'm not sure if this is new with 4.0.18 or not. I have MySQL and Resin 4.0.18 running on the same host. I have my Java webapp, and WordPress both installed. Whenever either one tries to access the DB, access is refused. Each webapp uses its own user/password. I've verified that I can access MySQL via the mysql command-line client using both sets of credentials. WordPress reports this error: /lz/usr/wordpress/wp-includes/wp-db.php:509: Warning: A link to the server could not be established. url=jdbc:mysql://localhost:3306/?characterEncoding=ISO8859_1 driver=com.mysql.jdbc.Driver com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server. [mysql_error] MySQL: 5.5.12 Connector/J: 5.1.15 Resin: 4.0.18 OS: 4.4.3-4ubuntu5 My Java app reports "Connection refused" (long stacktrace follows). The MySQL JDBC connector is in webapp-jars. The config for the Java webapp looks like: WordPress config: Webapp error: java.net.ConnectException: Connection refused javax.servlet.ServletException: org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is org.hibernate.exception.JDBCConnectionException: Cannot open connection at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:286) at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913) at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449) at javax.servlet.http.HttpServlet.service(HttpServlet.java:119) at javax.servlet.http.HttpServlet.service(HttpServlet.java:96) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109) at com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:124) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.latencyzero.satdb.SecurityFilter.doFilter(SecurityFilter.java:228) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:156) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:730) at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:689) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:669) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:617) at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:104) at com.caucho.network.listen.ConnectionReadTask.runThread(ConnectionReadTask.java:98) at com.caucho.network.listen.ConnectionReadTask.run(ConnectionReadTask.java:81) at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:67) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) Caused by: org.springframework.transaction.CannotCreateTransactionException: Could not open Hibernate Session for transaction; nested exception is org.hibernate.exception.JDBCConnectionException: Cannot open connection at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:599) at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:374) at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:263) at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:101) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204) at $Proxy51.findByLogin(Unknown Source) at com.latencyzero.satdb.LoginAction.execute(LoginAction.java:70) at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58) at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67) at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51) at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190) at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304) at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190) at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283) at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913) at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449) at javax.servlet.http.HttpServlet.service(HttpServlet.java:119) at javax.servlet.http.HttpServlet.service(HttpServlet.java:96) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109) at com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:124) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.latencyzero.satdb.SecurityFilter.doFilter(SecurityFilter.java:228) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:156) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:730) at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:689) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:669) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:617) at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:104) at com.caucho.network.listen.ConnectionReadTask.runThread(ConnectionReadTask.java:98) at com.caucho.network.listen.ConnectionReadTask.run(ConnectionReadTask.java:81) at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:67) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) Caused by: org.hibernate.exception.JDBCConnectionException: Cannot open connection at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:74) at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43) at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:29) at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:420) at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:144) at org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:119) at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:57) at org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1326) at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:558) at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:374) at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:263) at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:101) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204) at $Proxy51.findByLogin(Unknown Source) at com.latencyzero.satdb.LoginAction.execute(LoginAction.java:70) at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58) at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67) at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51) at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190) at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304) at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190) at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283) at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913) at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449) at javax.servlet.http.HttpServlet.service(HttpServlet.java:119) at javax.servlet.http.HttpServlet.service(HttpServlet.java:96) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109) at com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:124) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.latencyzero.satdb.SecurityFilter.doFilter(SecurityFilter.java:228) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:156) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:730) at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:689) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:669) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:617) at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:104) at com.caucho.network.listen.ConnectionReadTask.runThread(ConnectionReadTask.java:98) at com.caucho.network.listen.ConnectionReadTask.run(ConnectionReadTask.java:81) at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:67) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server. at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) at java.lang.reflect.Constructor.newInstance(Constructor.java:513) at com.mysql.jdbc.Util.handleNewInstance(Util.java:407) at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116) at com.mysql.jdbc.MysqlIO.&amp;lt;init&amp;gt;(MysqlIO.java:346) at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2334) at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2371) at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2163) at com.mysql.jdbc.ConnectionImpl.&amp;lt;init&amp;gt;(ConnectionImpl.java:794) at com.mysql.jdbc.JDBC4Connection.&amp;lt;init&amp;gt;(JDBC4Connection.java:47) at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) at java.lang.reflect.Constructor.newInstance(Constructor.java:513) at com.mysql.jdbc.Util.handleNewInstance(Util.java:407) at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:378) at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305) at com.mysql.jdbc.jdbc2.optional.MysqlDataSource.getConnection(MysqlDataSource.java:440) at com.mysql.jdbc.jdbc2.optional.MysqlDataSource.getConnection(MysqlDataSource.java:138) at com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource.getPooledConnection(MysqlConnectionPoolDataSource.java:80) at com.caucho.sql.DriverConfig.createPooledConnection(DriverConfig.java:651) at com.caucho.sql.ManagedConnectionImpl.initDriverConnection(ManagedConnectionImpl.java:265) at com.caucho.sql.ManagedConnectionImpl.&amp;lt;init&amp;gt;(ManagedConnectionImpl.java:144) at com.caucho.sql.ManagedFactoryImpl.createManagedConnection(ManagedFactoryImpl.java:153) at com.caucho.env.dbpool.ConnectionPool.createConnection(ConnectionPool.java:980) at com.caucho.env.dbpool.ConnectionPool.allocatePoolConnection(ConnectionPool.java:822) at com.caucho.env.dbpool.ConnectionPool.allocateConnection(ConnectionPool.java:714) at com.caucho.env.dbpool.ConnectionPool.allocateConnection(ConnectionPool.java:688) at com.caucho.sql.UserDataSource.getConnection(UserDataSource.java:71) at com.caucho.sql.DBPool.getConnection(DBPool.java:785) at org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:82) at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:417) at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:144) at org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:119) at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:57) at org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1326) at org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:558) at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:374) at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:263) at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:101) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204) at $Proxy51.findByLogin(Unknown Source) at com.latencyzero.satdb.LoginAction.execute(LoginAction.java:70) at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58) at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67) at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51) at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190) at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304) at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190) at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283) at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913) at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449) at javax.servlet.http.HttpServlet.service(HttpServlet.java:119) at javax.servlet.http.HttpServlet.service(HttpServlet.java:96) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109) at com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:124) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.latencyzero.satdb.SecurityFilter.doFilter(SecurityFilter.java:228) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:156) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:730) at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:689) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:669) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:617) at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:104) at com.caucho.network.listen.ConnectionReadTask.runThread(ConnectionReadTask.java:98) at com.caucho.network.listen.ConnectionReadTask.run(ConnectionReadTask.java:81) at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:67) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) Caused by: java.net.ConnectException: Connection refused at java.net.PlainSocketImpl.socketConnect(Native Method) at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351) at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213) at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200) at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366) at java.net.Socket.connect(Socket.java:529) at java.net.Socket.connect(Socket.java:478) at java.net.Socket.&amp;lt;init&amp;gt;(Socket.java:375) at java.net.Socket.&amp;lt;init&amp;gt;(Socket.java:218) at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:254) at com.mysql.jdbc.MysqlIO.&amp;lt;init&amp;gt;(MysqlIO.java:295) at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2334) at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2371) at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2163) at com.mysql.jdbc.ConnectionImpl.&amp;lt;init&amp;gt;(ConnectionImpl.java:794) at com.mysql.jdbc.JDBC4Connection.&amp;lt;init&amp;gt;(JDBC4Connection.java:47) Thanks, Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] MySQL issues with 4.0.18</header>
    <date>Fri May 27 02:09:20 CEST 2011</date>
    <body>You probably have your mysql server configured to only accept socket connections, and not TCP/IP connections.  As a rule, external client programs use TCP/IP by default, as sockets can only be used if the db server is on the same machine as the client program and this is often not the case for production applications.  See http://dev.mysql.com/doc/refman/5.0/en/connecting.html for more information. Rachel http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] MySQL issues with 4.0.18</header>
    <date>Fri May 27 07:30:03 CEST 2011</date>
    <body>Thank you, Rachel, that does indeed seem to be the case. Is it not possible to get Connector/J to use a socket underneath, if it's running on the same host? -- Rick http://dev.mysql.com/doc/refman/5.0/en/connecting.html for more http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Shutdown Issues</header>
    <date>Thu May 26 11:30:40 CEST 2011</date>
    <body>Starting with resin-4.0.16 and persisting with Resin-4.0.18 we can no longer shutdown the Resin process properly.  When I attempt to do so I get this: --------------------- Resin/4.0.18 can't shutdown watchdog at 127.0.0.1:10080. com.caucho.bam.RemoteConnectionFailedException: BamError[type=cancel,group=remote-connection-failed, text=Cannot connect to http://127.0.0.1:10080/hmtp java.io.IOException: Unexpected response HTTP/1.1 500 Internal Server Error internal error.  Please notify the system administrator Date: 2011-05-26T09:04:56.897+00:00 Resin/4.0.18 Server: 'default' --------------- The jvm log didn't output anything, but when I dump the watchdog-manager.log I get the clue below.  I Googled and found a reference to adding the sec:AdminAuthenticator, which I tried to get working, but I could never get the below error to go away. I am really not thinking I should have to modify our current resin.xml to simply shutdown the Resin process properly, and perhaps the below message is misleading? Currently to shut down resin we are issuing a "kill" on the non-watchdog Resin process, which isn't a feel good. Here is the watchdog-manager.log: HmtpServlet[WebApp[production/webapp/admin.resin/ROOT]] requires an active com.caucho.security.Authenticator because HMTP messaging requires authenticated login for security.  In the resin.xml, add an javax.enterprise.inject.AmbiguousResolutionException: Too many beans match, because they all have equal precedence.  See the @Stereotype and for InjectManager[web-app:production/webapp/admin.resin/ROOT] at com.caucho.config.inject.InjectManager.ambiguousException(InjectManager.java:2593) at com.caucho.config.inject.InjectManager.resolve(InjectManager.java:1766) at com.caucho.config.inject.InjectManager.getReference(InjectManager.java:2101) at com.caucho.hemp.servlet.ServerAuthManager.&amp;lt;init&amp;gt;(ServerAuthManager.java:76) at com.caucho.remote.HmtpServlet.init(HmtpServlet.java:132) at javax.servlet.GenericServlet.init(GenericServlet.java:70) at com.caucho.server.dispatch.ServletConfigImpl.createServletImpl(ServletConfigImpl.java:1351) at com.caucho.server.dispatch.ServletConfigImpl.createServlet(ServletConfigImpl.java:1199) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:98) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:156) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:730) at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:689) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:669) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:617) at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:104) at com.caucho.network.listen.ConnectionReadTask.runThread(ConnectionReadTask.java:98) at com.caucho.network.listen.ConnectionReadTask.run(ConnectionReadTask.java:81) at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:67) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Shutdown Issues</header>
    <date>Thu May 26 16:50:08 CEST 2011</date>
    <body>I have tried each version, starting with 4.0.18 and going back, and the shutdown problem begins with resin-pro-4.0.14 and up.  I noticed this on the change log for version 4.0.14: "resin: CLI added deploy, undeploy, list, start-webapp, stop-webapp, restar-webapp commands (#4316, rep by Patrick Brigger)" So I am guessing either the functionality changed in that version and I don't know how to upgrade my resin.xml properly.  Or there is some issue in that version and up with just doing a simple shutdown from the command line (on a Linux system)? Thanks, Aaron Freeman http://127.0.0.1:10080/hmtp http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Shutdown Issues</header>
    <date>Thu May 26 18:07:08 CEST 2011</date>
    <body>I definitely don't know for sure, but that strikes me as a duplicate jar problem.  You might look at what new jars were introduced in 4.0.14 and see if you are duplicating any of them in your WEB-INF/lib directory. (*Chris*) http://127.0.0.1:10080/hmtp http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Shutdown Issues</header>
    <date>Thu May 26 18:08:06 CEST 2011</date>
    <body>Do you have multiple &amp;lt;resin:AdminAuthenticator&amp;gt; or It looks like Resin can't choose the correct authenticator to see if the shutdown request is valid or not. -- Scott http://127.0.0.1:10080/hmtp http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Shutdown Issues</header>
    <date>Thu May 26 19:38:17 CEST 2011</date>
    <body>We have neither, but based on your feedback I commented out this as a test: and this: and now I can cleanly start it up and take it down, though now we can't hit the resin-admin web-app (obviously).  I guess &amp;lt;management&amp;gt; might be "old school" so I will search to find the resin-pro-4.0.14 way to get the resin-admin working properly. Thanks for the hints guys, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Shutdown Issues</header>
    <date>Thu May 26 19:52:25 CEST 2011</date>
    <body>Simply swapping &amp;lt;management&amp;gt; for &amp;lt;resin:AdminAuthenticator&amp;gt; made it all work. Thanks again, Aaron</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin no longer deploys my war</header>
    <date>Tue May 24 10:53:27 CEST 2011</date>
    <body>I tried upgrading to 4.0.18 recently and deployment seems broken. Normally I copy my war file over webapps/ROOT.war, restart appserver, and it works. Now it seems the only way I can get a deployment working is by: 1) Deleting webapps/ROOT (the directory) 2) Manually un-jaring ROOT.war 3) Deleting the resin-data directory If I don't do #3, Resin recreates an old version of my app, not the new contents of ROOT.war.  If I don't do #2, Resin creates an empty web project.  This is really, insanely confusing :-( Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Tue May 24 15:44:05 CEST 2011</date>
    <body>Hi Jeff I just ran a quick test and saw similar behavior. I'll look into it and file a bug if appropriate, and let you know either way. -Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Tue May 24 17:12:54 CEST 2011</date>
    <body>Hi Jeff, We fixed a few bugs related to deployment in 4.0.17 and 4.0.18, perhaps the behavior you're expecting has changed. I tested by simply overwriting ROOT.war with a different ROOT.war and didn't have any issues. Resin will recreate the old app from resin-data directory, if you delete the war and directory, since it needs a ROOT webapp.  So that behavior is expected. Some things to check are permissions (&amp;lt;server-default&amp;gt; &amp;lt;user-name&amp;gt; Resin is running as), &amp;lt;resin:DeployService/&amp;gt; exists, webapp version is enabled (&amp;lt;host-default&amp;gt; &amp;lt;web-app-deploy path="webapps" versioning="true"/&amp;gt;). -Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Tue May 24 22:50:52 CEST 2011</date>
    <body>I don't know what to say... I'm running vanilla Resin 4.0.18 (non-pro), right out of the zipfile.  I get the same behavior on both linux (started using the init.d script, running as root) and Mac (bin/resin.sh console, running as myself). The only changes I've made to resin.xml are tweaks to my logging configuration and disabling the resin-doc webapp. commenting out the &amp;lt;web-app id="/" root-directory="webapps/ROOT"/&amp;gt; but it doesn't seem to make a difference one way or another. It almost seems like Resin just doesn't notice my ROOT.war, but there are no error messages and there's nothing wrong with the permissions. The file unjars just fine with the command line jar utility. Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Tue May 24 23:06:04 CEST 2011</date>
    <body>Also, what does the /resin-admin webapps tab say? For example, if you've deployed a .war using the command-line "deploy", that overrides the webapps/ directory. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Tue May 24 23:24:32 CEST 2011</date>
    <body>It reports a webapp at /, but just the "stock" one. I haven't done anything... seriously, I just went through these steps: 1) Download resin-4.0.18.zip 2) Unzip it into a directory 3) Copy my ROOT.war into resin/webapps 4) Run resin No love.  No error messages. I've also tried commenting out &amp;lt;web-app id="/" root-directory="webapps/ROOT"/&amp;gt; but it makes no difference.  I'm not quite sure what this line is supposed to do, though - shouldn't it be irrelevant if there is a ROOT.war file in webapps? Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Fri Jun 03 18:44:33 CEST 2011</date>
    <body>Hi Jeff, Are you still experiencing this problem?  I experienced the same problem in resin 4.0.16 pro.  I pulled my hair out including performing the steps you talked about in your email. I finally discovered that I had to turn versioning off.  Here is a snippet from my resin.xml file: The default resin.xml file has this set to true. I hope this helps Keith http://maillist.caucho.com/mailman/listinfo/resin-interest -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Fri Jun 03 18:58:31 CEST 2011</date>
    <body>Thanks - I will try this out. I gave up and switched to Tomcat.  But I like it less than Resin, so maybe I will switch back. Jeff On Fri, Jun 3, 2011 at 9:43 AM, Keith Fetterman http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.go2marine.com               kfetter...@go2marine.com http://www.boatersline.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Mon Jun 06 05:13:46 CEST 2011</date>
    <body>I finally got around to trying this out, and no luck.  I can't for the life of me figure out why Resin refuses to unpack my WAR.  Every other appserver will, including an old copy of resin 4.0.9 I found lying around (unfortunately 4.0.9 has other issues). Jeff http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.go2marine.com               kfetter...@go2marine.com http://www.boatersline.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Mon Jun 06 08:18:59 CEST 2011</date>
    <body>What does the /resin-admin for that webapp show? If you've deployed the war using the deploy command, for example, it will take precedence over a new deployed .war. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.go2marine.com               kfetter...@go2marine.com http://www.boatersline.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Tue Jun 07 02:50:56 CEST 2011</date>
    <body>Seriously, I've done *nothing* special.  I downloaded resin, unzipped it, copied in my ROOT.war... and nothing.  I've tried deleting the ROOT/ directory. I've tried deleting the resin-data/ directory.  I've (what does that do, anyways?). resin-admin shows a root webapp.  not mine - just the default one it creates. It just doesn't work. FWIW, a simple stripped-down war file does deploy.  So presumably it's something about my WARfile.  But there's nothing about my WAR that is special - it deploys just fine on other containers.  If I unjar it by hand, it deploys just fine on Resin. Jeff http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.go2marine.com               kfetter...@go2marine.com http://www.boatersline.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Tue Jun 07 03:50:30 CEST 2011</date>
    <body>Hmm. It lets you override configuration in the resin.xml, like the WEB-INF/resin-web.xml. It's useful for some peoples' configuration. That's interesting. Other than the WEB-INF/web.xml and WEB-INF/resin-web.xml there really shouldn't be anything specific about one .war file vs another. (Although I guess there could be something about the validation when unzipping the file.) If you get a chance, can you download a snapshot from http://caucho.com/download/resin-pro-4_0-snap.tar.gz , turn on logging to "finer" or "finest", duplicate the deployment problem and send me the log file? It might show information about what's different about your .war. (Or if the snapshot isn't ready, the same "finest" information from the current version might show something.) thanks, -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Wed Jun 08 01:26:27 CEST 2011</date>
    <body>Hi Jeff, I just had another thought that might be effecting your war file deployment.  Have you declaree any dependency injection / CanDI into your resin.xml or resin-web.xml files?  For example: http://www.caucho.com/resin-4.0/examples/ioc-binding/index.xtp When I upgraded our Web sites from resin 3.0.x to resin 4.x, I had a lot of problems with this until I made changes to my Java classes.  Resin would fail silently, i.e., it never produced any errors even when logging was set to the finest level.  Resin would appear to start, but nothing was loaded or deployed. The culprit was declaring / using static method calls as my services and beans. Keith http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Wed Jun 08 01:38:21 CEST 2011</date>
    <body>My war file doesn't use CDI (it's Guice-based), and doesn't have a resin-web.xml or a beans.xml.  It's just a vanilla webapp. I replied with a copy of my (187k) log on startup but the message was held for moderation by the mailing list software; not sure if it ever went through.  What looks to be the key error msg is this: WebAppController$206051672[production/webapp/default/ROOT] adding archive to repository from /Volumes/Slow/3rdparty/resin-pro-4.0.s110606/webapps/ROOT.war 74688118b8dc9b133c3714aec4f7c7f843e69e90: file validation failed because sha-1 hash '74688118b8dc9b133c3714aec4f7c7f843e69e90' does not match expected '0ef77fbc7e5f514bf459fb8fe2dd772ccef2dc9b' at com.caucho.env.git.GitSystem.writeRawGitFile(GitSystem.java:600) at com.caucho.env.repository.FileRepository.writeRawGitFile(FileRepository.java:270) at com.caucho.env.repository.AbstractRepository.addArchive(AbstractRepository.java:744) at com.caucho.env.repository.AbstractRepository.addArchive(AbstractRepository.java:705) at com.caucho.env.repository.AbstractRepository.commitArchive(AbstractRepository.java:228) at com.caucho.env.deploy.ExpandDeployController.commitArchive(ExpandDeployController.java:472) at com.caucho.env.deploy.ExpandDeployController.extractApplication(ExpandDeployController.java:350) at com.caucho.env.deploy.ExpandDeployController.preConfigureInstance(ExpandDeployController.java:314) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:652) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:77) at com.caucho.env.deploy.DeployController.startOnInit(DeployController.java:521) at com.caucho.env.deploy.DeployContainer.start(DeployContainer.java:170) at com.caucho.server.webapp.WebAppContainer.start(WebAppContainer.java:713) at com.caucho.server.host.Host.start(Host.java:676) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:658) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:77) at com.caucho.env.deploy.DeployController.startOnInit(DeployController.java:521) at com.caucho.env.deploy.DeployContainer.start(DeployContainer.java:170) at com.caucho.server.host.HostContainer.start(HostContainer.java:542) at com.caucho.server.cluster.Server.start(Server.java:1228) at com.caucho.server.cluster.ServletService.start(ServletService.java:72) at com.caucho.env.service.ResinSystem.startServices(ResinSystem.java:513) at com.caucho.env.service.ResinSystem.start(ResinSystem.java:481) at com.caucho.server.resin.Resin.start(Resin.java:999) at com.caucho.server.resin.Resin.initMain(Resin.java:1127) at com.caucho.server.resin.Resin.main(Resin.java:1426) Jeff On Tue, Jun 7, 2011 at 4:25 PM, Keith Fetterman http://www.caucho.com/resin-4.0/examples/ioc-binding/index.xtp http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.go2marine.com               kfetter...@go2marine.com http://www.boatersline.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.go2marine.com               kfetter...@go2marine.com http://www.boatersline.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Wed Jun 08 02:38:56 CEST 2011</date>
    <body>Perfect, thanks. Let me see if I can reproduce/find the issue here. If not, I can add some more log information so we can see which file isn't validating properly. -- Scott http://www.caucho.com/resin-4.0/examples/ioc-binding/index.xtp http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Wed Jun 08 09:27:36 CEST 2011</date>
    <body>Jeff, is it possible that there is something strange about the WAR file itself, like the compression...? May I ask how the WAR is created? Have you compared checksums between where it is created and where it is deployed so it isn't messed up in some transfer? Jeff Schnitzer wrote (2011-06-07 02:49):</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Wed Jun 08 09:44:47 CEST 2011</date>
    <body>Dunno, I create it with ant just like every other warfile I've ever made... but now that you mention it, when I examine the jar it appears to have two copies of every classfile.  Didn't notice that before! And thus the mystery is solved.  Wow, this one drove me nuts. At one point I was running this war on an Appengine backend, and the eclipse config for a GAE project puts the classes in WEB-INF/classes (but conveniently hides this in the package explorer).  My ant buildfile compiles the classes to a 3rd directory, then includes both those classes and the contents of WEB-INF... you get the picture. Resin could use a better error message for this :-) I'm happy to be back on Resin though. Jeff On Wed, Jun 8, 2011 at 12:26 AM, Mattias Jiderhamn http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Wed Jun 08 18:01:04 CEST 2011</date>
    <body>Ah, thanks. I was having trouble figuring out how to make a broken .war to duplicate the problem. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Tue Jun 21 08:24:30 CEST 2011</date>
    <body>I'm so glad you posted this Jeff, since the same thing happened to us yesterday. I still don't know how, but finally we realized that somehow the same JSP page was compiled both as case sensitive and all lower case (_myJsp__jsp.java and _myjsp__jsp.java). What really threw us off though, was the fact that when we tried to deploy this "broken" WAR, Resin in some mysterious way managed to deploy an old version of that WAR. We deleted the WAR, we deleted the exploded WAR archive, we restarted Resin. Versioning was and has always been off. But magically an old no-longer-existing WAR was deployed in place of the (broken) one we tried to deploy. I don't remember for sure, but possibly the magic stopped when we deleted [server.root]/resin-data/default/.git (though I couldn't find any file in there enough to match the WAR. By far.) Possibly the fact that I managed to remote deploy that same WAR for the first time earlier yesterday has something to do with this? I might wait a while until I dare to try remote deploy again... I saw that the broken WAR problem should be fixed - or handled better - in 4.0.19. Haven't tried it. However I would still like to understand how Resin could deploy a WAR that no longer existed? Is there anyway to turn it off? I sure hope that this never ever happens in production (knock on wood!), but what should we do if it does happens again? Jeff Schnitzer wrote (2011-06-08 09:43): http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Tue Jun 21 15:38:56 CEST 2011</date>
    <body>Hi Mattias, What you're describing is exactly the effects of a remote deployment. http://caucho.com/resin-4.0/admin/clustering-overview.xtp#DeployingApplicationstoaCluster Doing a remote deploy essentially puts your war into a git distributed version control system.  (In resin-data/*/.git)  So even if there is no .war in the webapps directory, Resin will deploy it there upon startup.  Once you "deploy" an application, deleting the .war does nothing.  You must undeploy it remove it, or redeploy a new version to update. Unfortunately until version 4.0.19, there was no undeploy button in /resin-admin, only a deploy.  So to undeploy cleanly you had to use the command-line interface, which is somewhat less convenient since it requires RemoteAdminService and some authentication setup. http://caucho.com/resin-4.0/admin/resin-admin-command-line.xtp We realize this behavior is unexpected/surprising when not understood, and are discussing ways to improve usability. Thanks, Paul =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Tue May 24 10:57:43 CEST 2011</date>
    <body>Sounds like a file permission issue, but you've checked that, haven't you...? ----- Original Message ----- Subject: [Resin-interest] Resin no longer deploys my war Date: Tue, 24 May 2011 01:52:04 -0700 I tried upgrading to 4.0.18 recently and deployment seems broken. Normally I copy my war file over webapps/ROOT.war, restart appserver, and it works. Now it seems the only way I can get a deployment working is by: 1) Deleting webapps/ROOT (the directory) 2) Manually un-jaring ROOT.war 3) Deleting the resin-data directory If I don't do #3, Resin recreates an old version of my app, not the new contents of ROOT.war. If I don't do #2, Resin creates an empty web project. This is really, insanely confusing :-( Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Tue May 24 11:28:05 CEST 2011</date>
    <body>It does sound like that, but I'm running Resin as root. Jeff On Tue, May 24, 2011 at 1:56 AM, Mattias Jiderhamn http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin no longer deploys my war</header>
    <date>Tue May 24 11:32:28 CEST 2011</date>
    <body>Just do double check, you are running both the watchdog process and the actual Resin instance as root? Anything on the finest logging level? ----- Original Message ----- Subject: Re: [Resin-interest] Resin no longer deploys my war Date: Tue, 24 May 2011 02:26:44 -0700 It does sound like that, but I'm running Resin as root. Jeff On Tue, May 24, 2011 at 1:56 AM, Mattias Jiderhamn http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin:set and resin-web.xml</header>
    <date>Sat May 21 15:57:39 CEST 2011</date>
    <body>I define an EL variable using resin:set in resin.conf (under the host element). Then this EL variable is referenced from the resin-web.xml file of a webapp. This used to work in 4.0.10 and 4.0.15, but it does not work in 4.0.18. For example a resin:message after resin:set displays the variable correctly, but the same resin:message in in resin-web.xml displays an empty value . Should this still work or something has changed in the meantime? By the way the documentation at http://www.caucho.com/resin-4.0/admin/config-el-ref.xtp#resinset refers to both var and name attributes. Out of these two, only var works.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Changes page does not work</header>
    <date>Fri May 20 20:03:57 CEST 2011</date>
    <body>It is not obvious where to report this, but the changelog page does not seem to be working: http://www.caucho.com/resin-4.0/changes/changes.xtp 500 Servlet Exception || /var/www/hosts/www.caucho.com/webapps/resin-4.0/changes/changes.xtp:17: expected `&amp;lt;/T&amp;gt;' at `&amp;lt;/li&amp;gt;' (open at 17) 16:&amp;lt;li&amp;gt;async/comet: with Resin comet API, check for complete on suspend 17:&amp;lt;li&amp;gt;ejb: with generics Class&amp;lt;T&amp;gt;  as argument and return (#4551, rep 18:&amp;lt;li&amp;gt;servlet: finally handling for request needs to check for null 19:&amp;lt;li&amp;gt;access-log: add rollover-check-time configuration (#4533, rep by</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Changes page does not work</header>
    <date>Fri May 20 21:49:58 CEST 2011</date>
    <body>It is not obvious where to report this, but the changelog page does not seem to be working: http://www.caucho.com/resin-4.0/changes/changes.xtp Thanks. I've fixed it. -- Scott 500 Servlet Exception || /var/www/hosts/www.caucho.com/webapps/resin-4.0/changes/changes.xtp:17: expected `&amp;lt;/T&amp;gt;' at `&amp;lt;/li&amp;gt;' (open at 17) 16:&amp;lt;li&amp;gt;async/comet: with Resin comet API, check for complete on suspend 17:&amp;lt;li&amp;gt;ejb: with generics Class&amp;lt;T&amp;gt;  as argument and return (#4551, rep 18:&amp;lt;li&amp;gt;servlet: finally handling for request needs to check for null 19:&amp;lt;li&amp;gt;access-log: add rollover-check-time configuration (#4533, rep by</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin dependency check not normal work (resin	3.1.9)</header>
    <date>Tue May 10 09:21:57 CEST 2011</date>
    <body>hello, I want to update a new class file in my project (The file have been exist and the file's path is in myproject/WEB-INF/classes/test/pengyao.class). But I don't found my project restart in jvm-default.log and the class file is not loaded. But the wiki( http://wiki.caucho.com/Dependency_Checking ) say: Resin checks the following resources to see if the web-app&amp;lt;file:///D:/Web-app&amp;gt;or host &amp;lt;file:///D:/Host&amp;gt; should be restarted: *Any classes in WEB-INF/classes * but resin not normal restart,What can i do next, Thanks for you help!</body>
  </mail>
  <mail>
    <header>[Resin-interest] MD5 implementation not found</header>
    <date>Mon May 09 14:39:35 CEST 2011</date>
    <body>Running 4.0.16.  Has anyone ever seen the below error?  I just got this today, after being up since April 1. java.security.NoSuchAlgorithmException: SecureRandom MD5 implementation not found Steve Francis Technical Adviser -- Application Technologies IHG Office:  770-442-7157 Cell:     770-906-3122 IM:  francisihg</body>
  </mail>
  <mail>
    <header>[Resin-interest] Any one seeing access.log rollover issues</header>
    <date>Mon May 09 14:34:12 CEST 2011</date>
    <body>I've been running 4.0.16 for sometime now, and suddenly my access log rollover is not working properly.  My rollover is set as follows: rollover-period="1D" rollover-size="-1" rollover-count="14" As you can see below, it was rolling over fine, then on 5/5/11 failed to rollover until today at 7:23.  This is very strange. francis@adczlnxsahp1:/var/www/log&amp;gt; ls -l total 18600 -rw-r--r-- 1 webmstr www-data 4609975 2011-05-09 08:30 access.log -rw-r--r-- 1 webmstr www-data  548220 2011-04-22 00:00 access.log.20110421.gz -rw-r--r-- 1 webmstr www-data  547656 2011-04-23 00:00 access.log.20110422.gz -rw-r--r-- 1 webmstr www-data  765530 2011-04-24 00:00 access.log.20110423.gz -rw-r--r-- 1 webmstr www-data  300961 2011-04-25 00:00 access.log.20110424.gz -rw-r--r-- 1 webmstr www-data  938494 2011-04-26 00:00 access.log.20110425.gz -rw-r--r-- 1 webmstr www-data 1018657 2011-04-27 00:00 access.log.20110426.gz -rw-r--r-- 1 webmstr www-data  934099 2011-04-28 00:00 access.log.20110427.gz -rw-r--r-- 1 webmstr www-data  919266 2011-04-29 00:00 access.log.20110428.gz -rw-r--r-- 1 webmstr www-data 1056809 2011-04-30 00:00 access.log.20110429.gz -rw-r--r-- 1 webmstr www-data  612133 2011-05-01 00:01 access.log.20110430.gz -rw-r--r-- 1 webmstr www-data  564588 2011-05-02 00:00 access.log.20110501.gz -rw-r--r-- 1 webmstr www-data 1135696 2011-05-03 00:00 access.log.20110502.gz -rw-r--r-- 1 webmstr www-data 1024911 2011-05-04 00:00 access.log.20110503.gz -rw-r--r-- 1 webmstr www-data 3966650 2011-05-09 07:23 access.log.20110504.gz Steve Francis Technical Adviser -- Application Technologies IHG Office:  770-442-7157 Cell:     770-906-3122 IM:  francisihg</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.17 java.beans.IntrospectionException:	type mismatch between read and write methods</header>
    <date>Sat May 07 07:35:33 CEST 2011</date>
    <body>I'm trying out 4.0.17, and my app (which runs well under 4.0.6) is showing this: java.beans.IntrospectionException: type mismatch between read and write methods This happens in part as it's executing some custom tags implemented as JSP. A simpler .jsp page loads fine. Is this one of those cases of resin including a jar that conflicts with a jar in my webapp? I'm also creating a new server hosted at Rackspace, so everything else about this installation is new, too (new OS, new MySQL, etc.). I may have forgotten to install some required item. I rsync'd the entire webapp directory from the working machine to this new one, but I killed the server, deleted the work folder, and restarted, same behavior. Thanks, Rick ------ INFO (com.caucho.server.webapp.WebApp) WebApp[production/webapp/myhostname.com/ROOT,STARTING] Initializing Spring root WebApplicationContext FINE (com.caucho.env.dbpool.ManagedPoolItem) create: ManagedPoolItem[jdbc/satdb,0,ManagedConnectionImpl](active:0, total:0) FINE (com.caucho.env.dbpool.ManagedPoolItem) allocate ManagedPoolItem[jdbc/satdb,0,ManagedConnectionImpl] FINE (com.caucho.env.dbpool.ManagedPoolItem) idle ManagedPoolItem[jdbc/satdb,0,ManagedConnectionImpl] INFO (com.caucho.server.webapp.WebApp) WebApp[production/webapp/myhostname.com/ROOT,STARTING] Initializing Spring FrameworkServlet 'Dispatcher' INFO (com.caucho.server.webapp.WebApp) WebApp[production/webapp/myhostname.com/ROOT] active INFO (com.caucho.server.webapp.WebApp) WebApp[production/webapp/myhostname.com/resin-admin] active INFO (com.caucho.server.host.Host) Host[production/host/myhostname.com active FINE (com.caucho.server.session.SessionImpl) SessionImpl[aaaGXQZqGOJNzgLmK5i-s,] new FINE (com.caucho.server.session.SessionImpl) SessionImpl[aaaGXQZqGOJNzgLmK5i-s,] create session INFO (com.caucho.jsp.TldManager) Loading .tld files from global classpath CONFIG (com.caucho.java.JavaCompiler) Compiling _jsp/_WEB_22dINF/_tags/_lz/_base__tag.java WARNING (com.caucho.server.webapp.ErrorPageManager) javax.servlet.ServletException: com.caucho.jsp.QJspException: java.lang.RuntimeException: java.beans.IntrospectionException: type mismatch between read and write methods at com.caucho.jsp.PageContextImpl.handlePageException(PageContextImpl.java:1300) at _jsp._index__jsp._jspService(_index__jsp.java:31) at com.caucho.jsp.JavaPage.service(JavaPage.java:64) at com.caucho.jsp.Page.pageservice(Page.java:542) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:194) at com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:124) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.latencyzero.satdb.SecurityFilter.doFilter(SecurityFilter.java:228) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.caucho.server.webapp.DispatchFilterChain.doFilter(DispatchFilterChain.java:126) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:298) at com.caucho.server.webapp.RequestDispatcherImpl.dispatch(RequestDispatcherImpl.java:141) at com.caucho.server.dispatch.RewriteDispatchFilterChain.doFilter(RewriteDispatchFilterChain.java:91) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:156) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:730) at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:689) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:669) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:617) at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:104) at com.caucho.network.listen.ConnectionReadTask.runThread(ConnectionReadTask.java:98) at com.caucho.network.listen.ConnectionReadTask.run(ConnectionReadTask.java:81) at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:67) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) Caused by: com.caucho.jsp.QJspException: java.lang.RuntimeException: java.beans.IntrospectionException: type mismatch between read and write methods at com.caucho.jsp.QJspException.createJspException(QJspException.java:74) at _jsp._WEB_22dINF._tags._lz._base__tag.doTag(_base__tag.java:31) at _jsp._index__jsp._jspService(_index__jsp.java:60) at _jsp._index__jsp._jspService(_index__jsp.java:29) ... 29 more Caused by: java.lang.RuntimeException: java.beans.IntrospectionException: type mismatch between read and write methods at javax.el.BeanELResolver$BeanProperty.&amp;lt;init&amp;gt;(BeanELResolver.java:498) at javax.el.BeanELResolver$BeanProperty.&amp;lt;init&amp;gt;(BeanELResolver.java:442) at javax.el.BeanELResolver$BeanProperties.&amp;lt;init&amp;gt;(BeanELResolver.java:414) at javax.el.BeanELResolver.getValue(BeanELResolver.java:187) at com.caucho.jsp.el.PageContextELResolver.getValue(PageContextELResolver.java:181) at com.caucho.el.ArrayResolverExpr.getValue(ArrayResolverExpr.java:149) at com.caucho.el.PathExpr.getValue(PathExpr.java:142) at com.caucho.el.Expr.print(Expr.java:413) at com.caucho.config.el.CandiExpr.print(CandiExpr.java:219) at _jsp._WEB_22dINF._tags._lz._base__tag.doTag(_base__tag.java:59) at _jsp._WEB_22dINF._tags._lz._base__tag.doTag(_base__tag.java:27) ... 31 more Caused by: java.beans.IntrospectionException: type mismatch between read and write methods at java.beans.PropertyDescriptor.findPropertyType(PropertyDescriptor.java:603) at java.beans.PropertyDescriptor.setWriteMethod(PropertyDescriptor.java:270) at java.beans.PropertyDescriptor.&amp;lt;init&amp;gt;(PropertyDescriptor.java:117) at javax.el.BeanELResolver$BeanProperty.&amp;lt;init&amp;gt;(BeanELResolver.java:481) ... 41 more ----------- expanded stack traces below: ----------- [show] java.beans.IntrospectionException: type mismatch between read and write methods javax.servlet.ServletException: com.caucho.jsp.QJspException: java.lang.RuntimeException: java.beans.IntrospectionException: type mismatch between read and write methods at com.caucho.jsp.PageContextImpl.handlePageException(PageContextImpl.java:1300) at _jsp._index__jsp._jspService(_index__jsp.java:31) at com.caucho.jsp.JavaPage.service(JavaPage.java:64) at com.caucho.jsp.Page.pageservice(Page.java:542) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:194) at com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:124) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.latencyzero.satdb.SecurityFilter.doFilter(SecurityFilter.java:228) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.caucho.server.webapp.DispatchFilterChain.doFilter(DispatchFilterChain.java:126) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:298) at com.caucho.server.webapp.RequestDispatcherImpl.dispatch(RequestDispatcherImpl.java:141) at com.caucho.server.dispatch.RewriteDispatchFilterChain.doFilter(RewriteDispatchFilterChain.java:91) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:156) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:730) at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:689) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:669) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:617) at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:104) at com.caucho.network.listen.ConnectionReadTask.runThread(ConnectionReadTask.java:98) at com.caucho.network.listen.ConnectionReadTask.run(ConnectionReadTask.java:81) at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:67) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) Caused by: com.caucho.jsp.QJspException: java.lang.RuntimeException: java.beans.IntrospectionException: type mismatch between read and write methods at com.caucho.jsp.QJspException.createJspException(QJspException.java:74) at _jsp._WEB_22dINF._tags._lz._base__tag.doTag(_base__tag.java:31) at _jsp._index__jsp._jspService(index.jsp:5) at _jsp._index__jsp._jspService(_index__jsp.java:29) at com.caucho.jsp.JavaPage.service(JavaPage.java:64) at com.caucho.jsp.Page.pageservice(Page.java:542) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:194) at com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:124) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.latencyzero.satdb.SecurityFilter.doFilter(SecurityFilter.java:228) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.caucho.server.webapp.DispatchFilterChain.doFilter(DispatchFilterChain.java:126) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:298) at com.caucho.server.webapp.RequestDispatcherImpl.dispatch(RequestDispatcherImpl.java:141) at com.caucho.server.dispatch.RewriteDispatchFilterChain.doFilter(RewriteDispatchFilterChain.java:91) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:156) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:730) at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:689) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:669) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:617) at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:104) at com.caucho.network.listen.ConnectionReadTask.runThread(ConnectionReadTask.java:98) at com.caucho.network.listen.ConnectionReadTask.run(ConnectionReadTask.java:81) at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:67) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) Caused by: java.lang.RuntimeException: java.beans.IntrospectionException: type mismatch between read and write methods at javax.el.BeanELResolver$BeanProperty.&amp;lt;init&amp;gt;(BeanELResolver.java:498) at javax.el.BeanELResolver$BeanProperty.&amp;lt;init&amp;gt;(BeanELResolver.java:442) at javax.el.BeanELResolver$BeanProperties.&amp;lt;init&amp;gt;(BeanELResolver.java:414) at javax.el.BeanELResolver.getValue(BeanELResolver.java:187) at com.caucho.jsp.el.PageContextELResolver.getValue(PageContextELResolver.java:181) at com.caucho.el.ArrayResolverExpr.getValue(ArrayResolverExpr.java:149) at com.caucho.el.PathExpr.getValue(PathExpr.java:142) at com.caucho.el.Expr.print(Expr.java:413) at com.caucho.config.el.CandiExpr.print(CandiExpr.java:219) at _jsp._WEB_22dINF._tags._lz._base__tag.doTag(WEB-INF/tags/lz/base.tag:10) at _jsp._WEB_22dINF._tags._lz._base__tag.doTag(_base__tag.java:27) at _jsp._index__jsp._jspService(index.jsp:5) at _jsp._index__jsp._jspService(_index__jsp.java:29) at com.caucho.jsp.JavaPage.service(JavaPage.java:64) at com.caucho.jsp.Page.pageservice(Page.java:542) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:194) at com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:124) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.latencyzero.satdb.SecurityFilter.doFilter(SecurityFilter.java:228) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.caucho.server.webapp.DispatchFilterChain.doFilter(DispatchFilterChain.java:126) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:298) at com.caucho.server.webapp.RequestDispatcherImpl.dispatch(RequestDispatcherImpl.java:141) at com.caucho.server.dispatch.RewriteDispatchFilterChain.doFilter(RewriteDispatchFilterChain.java:91) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:156) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:730) at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:689) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:669) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:617) at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:104) at com.caucho.network.listen.ConnectionReadTask.runThread(ConnectionReadTask.java:98) at com.caucho.network.listen.ConnectionReadTask.run(ConnectionReadTask.java:81) at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:67) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) Caused by: java.beans.IntrospectionException: type mismatch between read and write methods at java.beans.PropertyDescriptor.findPropertyType(PropertyDescriptor.java:603) at java.beans.PropertyDescriptor.setWriteMethod(PropertyDescriptor.java:270) at java.beans.PropertyDescriptor.&amp;lt;init&amp;gt;(PropertyDescriptor.java:117) at javax.el.BeanELResolver$BeanProperty.&amp;lt;init&amp;gt;(BeanELResolver.java:481) at javax.el.BeanELResolver$BeanProperty.&amp;lt;init&amp;gt;(BeanELResolver.java:442) at javax.el.BeanELResolver$BeanProperties.&amp;lt;init&amp;gt;(BeanELResolver.java:414) at javax.el.BeanELResolver.getValue(BeanELResolver.java:187) at com.caucho.jsp.el.PageContextELResolver.getValue(PageContextELResolver.java:181) at com.caucho.el.ArrayResolverExpr.getValue(ArrayResolverExpr.java:149) at com.caucho.el.PathExpr.getValue(PathExpr.java:142) at com.caucho.el.Expr.print(Expr.java:413) at com.caucho.config.el.CandiExpr.print(CandiExpr.java:219) at _jsp._WEB_22dINF._tags._lz._base__tag.doTag(WEB-INF/tags/lz/base.tag:10) at _jsp._WEB_22dINF._tags._lz._base__tag.doTag(_base__tag.java:27) at _jsp._index__jsp._jspService(index.jsp:5) at _jsp._index__jsp._jspService(_index__jsp.java:29) at com.caucho.jsp.JavaPage.service(JavaPage.java:64) at com.caucho.jsp.Page.pageservice(Page.java:542) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:194) at com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:124) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.latencyzero.satdb.SecurityFilter.doFilter(SecurityFilter.java:228) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.caucho.server.webapp.DispatchFilterChain.doFilter(DispatchFilterChain.java:126) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:298) at com.caucho.server.webapp.RequestDispatcherImpl.dispatch(RequestDispatcherImpl.java:141) at com.caucho.server.dispatch.RewriteDispatchFilterChain.doFilter(RewriteDispatchFilterChain.java:91) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:156) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:730) at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:689) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:669) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:617) at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:104) at com.caucho.network.listen.ConnectionReadTask.runThread(ConnectionReadTask.java:98) at com.caucho.network.listen.ConnectionReadTask.run(ConnectionReadTask.java:81) at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:67) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.17	java.beans.IntrospectionException: type mismatch between read	and write methods</header>
    <date>Sat May 07 07:40:06 CEST 2011</date>
    <body>Sigh. I see it's fixed in 4.0.18. INFO (com.caucho.server.webapp.WebApp) FINE FINE FINE INFO (com.caucho.server.webapp.WebApp) INFO (com.caucho.server.webapp.WebApp) INFO (com.caucho.server.webapp.WebApp) INFO (com.caucho.server.host.Host) FINE FINE INFO (com.caucho.jsp.TldManager) CONFIG (com.caucho.java.JavaCompiler) WARNING http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.17	java.beans.IntrospectionException: type mismatch between read	and write methods</header>
    <date>Sat May 07 16:56:44 CEST 2011</date>
    <body>Yeah Rick...this bit me due to a Boolean object that was being evaluated in a ternary statement. Not sure this is the only cause but if you can't wait for 18, I suppose you could look for this situation and change it to use a different approach. For me, I think I went to 4.0.16 which didn't have the bug. matt INFO (com.caucho.server.webapp.WebApp) FINE FINE FINE INFO (com.caucho.server.webapp.WebApp) INFO (com.caucho.server.webapp.WebApp) INFO (com.caucho.server.webapp.WebApp) INFO (com.caucho.server.host.Host) FINE FINE INFO (com.caucho.jsp.TldManager) CONFIG (com.caucho.java.JavaCompiler) WARNING http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Lookup mime mappings defined in app-default.xml</header>
    <date>Thu May 05 21:41:34 CEST 2011</date>
    <body>My application is using a custom servlet to deliver files to the browser, so I have to set the content-type of the response manually. I'm wondering if it's possible to lookup the mime mappings defined in my resin configuration somehow so I can use the already defined mime mappings? -- Edvin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Lookup mime mappings defined in app-default.xml</header>
    <date>Thu May 05 23:20:03 CEST 2011</date>
    <body>To answer my own question: servletContext.getMimeType() does just that it seems :) -- Edvin Den 05.05.2011 21:41, skrev Edvin Syse: http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] about resin access-log rollover-size question</header>
    <date>Wed May 04 05:37:35 CEST 2011</date>
    <body>hi,I want to rollover the access-log by rollover-size in resin 3.1.9. I set the rollover-size="10kb" and auto-flush="true",but I found the rollover-size is not normal work. some access-log size is 1.2Mb but not rollover . I found rollover time is 140s~142s, what can i do next?   Thanks</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] about resin access-log rollover-size question</header>
    <date>Wed May 04 19:19:55 CEST 2011</date>
    <body>Resin does not roll the access log exactly at rollover-size.  rollover-size is a minimum size.  It checks the size every 2 minutes. -Paul http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] about resin access-log rollover-size question</header>
    <date>Thu May 05 05:09:11 CEST 2011</date>
    <body>Thanks, I see  .   But I have a question, can  i  modify the interval time(2 minutes) http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] about resin access-log rollover-size question</header>
    <date>Thu May 05 16:39:34 CEST 2011</date>
    <body>It is currently not configurable. http://bugs.caucho.com/view.php?id=4533 Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>[Resin-interest] how to set the resin socket timout in resin 3.0.28?</header>
    <date>Sun May 01 17:01:15 CEST 2011</date>
    <body>How to set the resin socket timeout? I put the &amp;lt;socket-timeout&amp;gt; section after &amp;lt;keepalive-timeout&amp;gt; tag and it goes wrong. Here's my settings: - Resin 3.0 configuration file. http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" - Logging configuration for the JDK logging API. - For production sites, change dependency-check-interval to something - like 600s, so it only checks for updates every 10 minutes. - You can change the compiler to "javac" or jikes. - The default is "internal" only because it's the most - likely to be available. -    com.sun.net.ssl.internal.ssl.Provider - If starting bin/resin as root on Unix, specify the user name - and group name for the web server user. - - Configures threads shared among all HTTP and SRUN ports. - Configures the minimum free memory allowed before Resin - will force a restart. - SSL port configuration: - - - The local cluster, used for load balancing and distributed - backup. - Configures the persistent store for single-server or clustered - in Resin professional. - Enables/disables exceptions when the browser closes a connection. - For security, use a different cookie for SSL sessions. - Enables the cache (available in Resin Professional) - Enables periodic checking of the server status. - - With JDK 1.5, this will ask the JDK to check for deadlocks. - All servers can add &amp;lt;url&amp;gt;s to be checked. - Defaults applied to each web-app. - Extension library for common jar files.  The ext is safe - even for non-classloader aware jars.  The loaded classes - will be loaded separately for each web-app, i.e. the class - itself will be distinct. - Sets timeout values for cacheable pages, e.g. static pages. - Servlet to use for directory display. - Enable EL expressions in Servlet and Filter init-param - for security, disable session URLs by default. - For security, set the HttpOnly flag in cookies. - Sample database pool configuration - - The JDBC name is java:comp/env/jdbc/test - Default host configuration applied to all virtual hosts. - With another web server, like Apache, this can be commented out - because the web server will log this information. - - configures an explicit root web-app matching the - webapp's ROOT - Administration application /resin-admin - - password is the md5 hash of the password. - localhost is true to limit access to the localhost thanks! -- haitao.yao@Beijing</body>
  </mail>
  <mail>
    <header>[Resin-interest] How to configure the JavaSessionDeserializer to	accept a custom classloader?</header>
    <date>Mon Apr 25 02:15:50 CEST 2011</date>
    <body>Hi, I see that the JavaSessionDeserializer has a constructor that takes a ClassLoader: http://caucho.com/resin-4.0-javadoc/com/caucho/server/session/JavaSessionDeserializer.html .. but I can't figure out how to configure this in resin.xml. It seems I can override SessionManager#createSessionDeserializer(InputStream), but I don't know how to configure the sessionmanager either. Any help would be greatly appreciated :) Sincerely, Edvin Syse</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to configure the JavaSessionDeserializer to	accept a custom classloader?</header>
    <date>Mon Apr 25 18:58:03 CEST 2011</date>
    <body>http://caucho.com/resin-4.0-javadoc/com/caucho/server/session/JavaSessionDeserializer.html I'm not sure why you would want to. The purpose of the classloader argument is so the deserializer will deserialize in the web-app's context. (An issue that just got fixed in 4.0.16.) That shouldn't be something that an application would need to change. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to configure the JavaSessionDeserializer to	accept a custom classloader?</header>
    <date>Mon Apr 25 19:07:47 CEST 2011</date>
    <body>My application is a CMS where each user can compile and run Groovy classes as "controllers" for pages. These Groovy classes are compiled, and it is fully legal to put part of a such a class in a session variable (they are Serializable). The controller is executed using a special classloader and securitymanager, so that each user can only access his own compiled controllers. These classes are not known by the web-app's default classloader. When Resin tries to serialize the session data, it will throw a ClassNotFoundException, for obvious reasons. I'm thinking if I can override the classloader used to serialize/deserialize, I would be home free. Maybe I'm off on the wrong track here? :) -- Edvin Den 25.04.2011 18:57, skrev Scott Ferguson: http://caucho.com/resin-4.0-javadoc/com/caucho/server/session/JavaSessionDeserializer.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to configure the JavaSessionDeserializer to	accept a custom classloader?</header>
    <date>Mon Apr 25 19:19:42 CEST 2011</date>
    <body>Hmm. When you call request.getSession(), have you already set the Thread.setContextClassLoader? It might be cleaner for us to add a "use-context-class-loader" as a -- Scott http://caucho.com/resin-4.0-javadoc/com/caucho/server/session/JavaSessionDeserializer.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to configure the JavaSessionDeserializer to	accept a custom classloader?</header>
    <date>Mon Apr 25 19:45:37 CEST 2011</date>
    <body>http://maillist.caucho.com/mailman/listinfo/resin-interest Basically, I construct a classloader that extends URLClassLoader that points to the user's compiled classes. This classloader does myClassLoader.loadClass("name-of-the-controller-for-this-page").newInstance(), casts it to a "PageController" and runs it's execute() method (PageController interface). This makes sure that all operations in the PageController has access to the other controller-classes as well. The controller will see a variable called "session", that is basically a HashMap set as an attribute in the real HttpSession object. This HashMap will often contain variables that can only be serialized/deserialized using the same classloader that instantiated the PageController. Maybe a better route is to configure my own serializer/deserializer? If I use a custom ObjectInputStream that overrides the loadClass() method and delegates to my special classloader, I should be home free. Is it possible to configure custom serializers in Resin? (I'm Running Resin Pro 4.0.17 2CPU). -- Edvin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to configure the JavaSessionDeserializer to	accept a custom classloader?</header>
    <date>Mon Apr 25 19:48:50 CEST 2011</date>
    <body>s/loadClass/resolveClass/ :) -- Edvin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to configure the JavaSessionDeserializer to	accept a custom classloader?</header>
    <date>Mon Apr 25 20:56:03 CEST 2011</date>
    <body>http://maillist.caucho.com/mailman/listinfo/resin-interest The typical pattern for a custom classloader would also use: That way, any dependent classes would get picked up properly even if using reflection. Well, for 4.0.18, one of the bugs/features we need to put in is a way to customize the persistence (primarily for jdbc-style sessions, but I believe some others want to customize the capability.) So I can keep this use-case in mind when I put together that API. But it might be cleaner to use the ContextClassLoader pattern with a session-config so you don't actually need to write a custom serializer. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to configure the JavaSessionDeserializer to	accept a custom classloader?</header>
    <date>Mon Apr 25 21:12:19 CEST 2011</date>
    <body>The typical pattern for a custom classloader would also use: That way, any dependent classes would get picked up properly even if using reflection. You're right, thanks - I'll adjust my code :) Well, for 4.0.18, one of the bugs/features we need to put in is a way to customize the persistence (primarily for jdbc-style sessions, but I believe some others want to customize the capability.) So I can keep this use-case in mind when I put together that API. Nice, thanks :) But it might be cleaner to use the ContextClassLoader pattern with a session-config so you don't actually need to write a custom serializer. This will actually not work properly, since ObjectInputStream.readObject does not honor the thread's contextclassloader when resolving classes, see http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4340158 , dating back to 2000. (Resolved as Closed, Will Not Fix) -- Edvin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to configure the JavaSessionDeserializer to	accept a custom classloader?</header>
    <date>Mon Apr 25 21:22:02 CEST 2011</date>
    <body>But it might be cleaner to use the ContextClassLoader pattern with a session-config so you don't actually need to write a custom serializer. This will actually not work properly, since ObjectInputStream.readObject does not honor the thread's contextclassloader when resolving classes, see http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4340158 , dating back to 2000. (Resolved as Closed, Will Not Fix) But that's the point of adding &amp;lt;session-config use-context-class-loader='true'/&amp;gt; to Resin.  I can have Resin use the context classloader when it's deserializing. Resin already needs to deal with this issue to use the web-app's classloader. It's an easy change to allow the context classloader as an option. -- Scott -- Edvin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to configure the JavaSessionDeserializer to	accept a custom classloader?</header>
    <date>Mon Apr 25 21:30:46 CEST 2011</date>
    <body>But it might be cleaner to use the ContextClassLoader pattern with a session-config so you don't actually need to write a custom serializer. This will actually not work properly, since ObjectInputStream.readObject does not honor the thread's contextclassloader when resolving classes, see http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4340158 , dating back to 2000. (Resolved as Closed, Will Not Fix) But that's the point of adding &amp;lt;session-config use-context-class-loader='true'/&amp;gt; to Resin.  I can have Resin use the context classloader when it's deserializing. Resin already needs to deal with this issue to use the web-app's classloader. It's an easy change to allow the context classloader as an option Aha, I misunderstand what you wrote, I didn't know about the use-context-class-loader option :) Is it available in 4.0.17? Didn't find any reference to it in the docs. -- Edvin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to configure the JavaSessionDeserializer to	accept a custom classloader?</header>
    <date>Tue Apr 26 00:05:39 CEST 2011</date>
    <body>But that's the point of adding &amp;lt;session-config use-context-class-loader='true'/&amp;gt; to Resin.  I can have Resin use the context classloader when it's deserializing. Resin already needs to deal with this issue to use the web-app's classloader. It's an easy change to allow the context classloader as an option Aha, I misunderstand what you wrote, I didn't know about the use-context-class-loader option :) Is it available in 4.0.17? Didn't find any reference to it in the docs. And I probably misunderstood again, you said you could add this to Resin, right? Would be great if possible! :) For now I will use a filter and serialize the sessionStore to a byte-array, so that Resin only sees a byte-array and not the classes it represents. My filter will deserialize at the beginning of the request, and serialize at the end. This is ofcourse suboptimal, since it means "double serialization", and that I have to do it on every request instead of only when failover is demanded. I can live with it for now, it adds about 5-6 ms to my request cycle. -- Edvin</body>
  </mail>
  <mail>
    <header>[Resin-interest] Running Confluence</header>
    <date>Thu Apr 14 00:32:46 CEST 2011</date>
    <body>I decided to try again to install Confluence under Resin 4.0.6. I see that they've dropped support for Resin, which is really too bad, but I figured I'd try anyway. I'm getting this error: WARNING (com.caucho.server.webapp.ErrorPageManager) jar:file:/export/home/rmann/www/com/latencyzero/confluence/versions/confluence-3.5.1/confluence/WEB-INF/lib/oscore-2.2.7-atlassian-1.jar!/META-INF/ejb-jar.xml:41: 'entity' is an unknown property of 'com.caucho.ejb.cfg.EjbEnterpriseBeans'. 39: 42: 43: Does this indicate a problem in Resin? Thanks, Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Running Confluence</header>
    <date>Thu Apr 14 01:00:58 CEST 2011</date>
    <body>WARNING I'll need to check on this. Technically, it's not a Resin problem because entity beans are not part of the JavaEE web profile. Why Confluence is requiring full JavaEE is something I don't understand. (Or more basically, why it's using entity beans is a bit of a puzzlement.) It's possible that their ejb-jar.xml is obsolete and everyone else ignores it. (The JavaEE servers ignore it because it's an entity bean that's not used and the servlet engines ignore it because they don't support ejb.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Running Confluence</header>
    <date>Thu Apr 14 01:07:26 CEST 2011</date>
    <body>WARNING Thanks, Scott. That suggests I can modify ejb-jar.xml, if only I knew how. It also suggests they may be willing to fix this issue, even though they no longer support Resin. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Running Confluence</header>
    <date>Thu Apr 14 01:45:20 CEST 2011</date>
    <body>Well, I can have Resin ignore the &amp;lt;entity&amp;gt; in the this release (this week), but it probably won't be possible to test against that jar by then. So if the issue is just dead code, that change would resolve it. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Running Confluence</header>
    <date>Thu Apr 14 02:28:39 CEST 2011</date>
    <body>Sounds good to me. Can I just remove the &amp;lt;entity&amp;gt; sections for an equivalent effect? -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Running Confluence</header>
    <date>Thu Apr 14 02:40:00 CEST 2011</date>
    <body>Yes, although, you might just try removing the ejb-jar.xml entirely. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin Compatible Forum</header>
    <date>Wed Apr 13 23:02:54 CEST 2011</date>
    <body>Is there any forum software out there that runs nicely/reliably under Resin and/or Quercus? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>[Resin-interest] Ongoing WordPress/PHP troubles</header>
    <date>Wed Apr 13 22:44:28 CEST 2011</date>
    <body>Hi guys. I'm still running Resin 4.0.6, but I continue to run into issues with my WordPress installation. Has PHP support improved in 4.0.16? How about in slightly earlier versions (I saw some people were having issues with 4.0.16)? Thanks, Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resource loading issue in 4.0.16</header>
    <date>Tue Apr 12 09:29:08 CEST 2011</date>
    <body>I just upgraded to 4.0.16 and my Primefaces web app failed with this exception: javax.faces.FacesException: Error loading theme, cannot find "theme.css" resource of "primefaces-aristo" library at org.primefaces.renderkit.HeadRenderer.encodeTheme(HeadRenderer.java:114) at org.primefaces.renderkit.HeadRenderer.encodeBegin(HeadRenderer.java:71) at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:824) ... The code in HeadRenderer is: Resource themeResource = context.getApplication().getResourceHandler().createResource(resource, throw new FacesException("Error loading theme, cannot find \"" + This looks to me like it could be another manifestation of the classloader issue reported earlier. 4.0.15 and prior work fine. I have reproduced this with the simplest "hello world" Primefaces example app. Regards, Peter</body>
  </mail>
  <mail>
    <header>[Resin-interest] Automatic Restart Question</header>
    <date>Thu Apr 07 16:57:30 CEST 2011</date>
    <body>We have multiple webapps in our 4.0.16 configuration and would like to be able make changes to our resin.xml file without causing all of the webapps to restart. Can we somehow disable the automatic restart after detecting a change to the resin.xml?  If we do that, we can stop/start the individual webapps from the admin screens, but will restarting an individual webapp reload the resin.xml just for that webapp (without interrupting service on the other webapps)?  Or will it continue to use whatever resin.xml configuration parameters are loaded into memory? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Automatic Restart Question</header>
    <date>Thu Apr 07 17:18:07 CEST 2011</date>
    <body>Ah I wasn't using good search criteria on Google.  After more searching I found that it's about setting these properly: Still not sure if this will allow a restarted webapp to see the new conf settings independently but at least I can test that now. Thanks, Aaron http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] difference between &amp;lt;host&amp;gt; attributes id and	host-name</header>
    <date>Thu Apr 07 03:38:16 CEST 2011</date>
    <body>In resin 4.0.16, what is the difference between the &amp;lt;host&amp;gt; tag attributes "id" and "host-name"?  Are they the same thing?  In the documentation it says: http://www.caucho.com/resin-4.0/reference.xtp#host id  -  primary host name host-name   - Canonical host name I don't think I have come across an example in Resin's documentation where the &amp;lt;host&amp;gt; tag uses the "id" attribute. -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] difference between &amp;lt;host&amp;gt; attributes id and host-name</header>
    <date>Thu Apr 07 19:35:39 CEST 2011</date>
    <body>http://www.caucho.com/resin-4.0/reference.xtp#host Normally, you should use host-name and ignore "id". "id" is primarily for backward compatibility, although it is used for the internal version tag ("/production/webapps/host-id/webapp-id") and for JMX, so theoretically you could have a different id for administration purposes (not sure why, though.) -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] difference between &amp;lt;host&amp;gt; attributes id and host-name</header>
    <date>Thu Apr 07 19:47:35 CEST 2011</date>
    <body>http://www.caucho.com/resin-4.0/reference.xtp#host Also, id="" is the "default" host, which matches everything. For redirects, if you want a canonical name for the default host, you'll need to have id="" host-name="example.com". -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin administration application</header>
    <date>Thu Apr 07 01:26:53 CEST 2011</date>
    <body>On the Resin Administration login page (4.0.16), there is a section to create a login.  The heading of the section says "Don't have a login yet?".  Is there a resin property to hide this section and only show the login form? Once we've setup the administration area, we would like to remove this section with having to edit the JSP page. -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>[Resin-interest] Multiple instances of the same webapp after	redeploy in 4.0.16 (strange!!!)</header>
    <date>Mon Apr 04 09:44:26 CEST 2011</date>
    <body>While evaluating Resin 4.0.16 we are seeing something that makes me really concerned. It appears as if after a redeploy there can be two instances of our main app running. I was made aware of this by noticing that timed servlets (&amp;lt;run-at ... /&amp;gt;) were having concurrency issues and logging the same event twice within the same second. This made me add some extra logging in a &amp;lt;load-on-startup/&amp;gt; servlet, and I can actually see that at some reploys, the same web app is initialized twice - in different, concurrent threads and different classloaders. For example one instance may be initialized by Thread[ http://*:8080-776,5,main ] and at the same time (give or take a few seconds) another one by Thread[resin-366,5,main]. I cannot deliberately recreate it by simply redeploying (which makes it less likely to be a configuration issue). But it happens about daily on our test server; possibly issuing requests on a session in the app while redeploying is a factor. We are not using versioning. dependency-check-interval is set to 20 seconds. The "extra" app does not appear in the admin console. How can we figure out what is going on here??? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multiple instances of the same webapp after redeploy in 4.0.16 (strange!!!)</header>
    <date>Mon Apr 04 18:48:22 CEST 2011</date>
    <body>http://*:8080-776,5,main ] and at the same time (give or take a Are you using version="true" and/or versioned web-apps? With versioned web-apps, Resin is supposed to have two versions running at the same time while it migrates sessions from the old version to the new version. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multiple instances of the same webapp after redeploy in 4.0.16 (strange!!!)</header>
    <date>Mon Apr 04 19:03:26 CEST 2011</date>
    <body>Scott Ferguson wrote (2011-04-04 18:47): http://*:8080-776,5,main ] and at the same time (give or take a As stated above, we are not using versioning. (And if we we're, should the old version be re-initialized when deploying a new version...?) --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multiple instances of the same webapp after redeploy in 4.0.16 (strange!!!)</header>
    <date>Mon Apr 04 19:26:11 CEST 2011</date>
    <body>http://*:8080-776,5,main ] and at the same time (give or take Thanks. I'd missed that. No. Only the latest version should ever be initialized. Even if you were to restart Resin completely with multiple versions, only the latest version should be initialized. I've filed this as http://bugs.caucho.com/view.php?id=4474 . -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multiple instances of the same webapp after redeploy in 4.0.16 (strange!!!)</header>
    <date>Tue Apr 05 01:26:00 CEST 2011</date>
    <body>http://*:8080-776,5,main ] and at the same time (give or take Do you have logs for these events? The WebApp start/stop should be logged at the info level and be in the jvm-default.log. I can't yet see how this is happening, though I have found a related issue with 503s. The main thing I'd be looking for is: VS ... In other words, an actual simultaneous start compared to an erroneous restart. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multiple instances of the same webapp after redeploy in 4.0.16 (strange!!!)</header>
    <date>Tue Apr 05 15:15:58 CEST 2011</date>
    <body>Scott Ferguson wrote (2011-04-05 01:25): http://*:8080-776,5,main ] and at the same time (give or take Yes, there are multiple WebApp starts in the log: [2011-04-05 15:03:51.905] WebApp[production/webapp/default/ROOT] starting ... [2011-04-05 15:03:59.062] WebApp[production/webapp/default/ROOT] starting (the app takes more than 8 seconds to initialize, so they are concurrent inits) I haven't configured the default logs to include the thread, but from my own logging, I can see that the first start is in Thread[ http://*:8080-343,5,main ] and the second in Thread[ http://*:8080-349,5,main ], in different classloaders I caught the above starts with "finer" logging level. Should I extract the part around this time and send to you, Scott? --</body>
  </mail>
  <mail>
    <header>[Resin-interest] eclipselink cache question</header>
    <date>Sun Apr 03 12:40:25 CEST 2011</date>
    <body>Hello I have put in my ejb classes a cache information : @Cache(size=50,expiry=10000) This works perfectly and after 10 seconds, the value is reloaded from db I noticed that before the 10 seconds, the value is still the same (which is normal), but the request is done anyway to the db. What for ? This cache was supposed to avoid requests in the db ??? Thanks for any info I use resin 4.0.13 on macosx 10.6 with a modified eclipselink jar downloaded last december -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] passing environment variables into resin during	startup</header>
    <date>Sat Apr 02 03:35:47 CEST 2011</date>
    <body>In resin 3.0, you could pass values into the startup of resin via Java system properties.  For example, In my resin startup script (Linux), I would start resin using the following command: $RESIN_ROOT/bin/httpd.sh -verbose -server-root /web/resin  -Xmx500M -XX:MaxPermSize=100M -Dstore=go2marine start Essentially, I would pass in a Java system property named "store" and in my resin.conf file, I would set this to an EL variable: In resin 4, I don't see a way to pass in Java system properties.  I've tried setting environment variables, but I can't find a way to read the environment variables in resin.xml.  I found the following information in Resin documentation, but it doesn't work seem to work for environment variables that I create. http://www.caucho.com/resin-4.0/admin/config-el.xtp#Environment variables http://www.caucho.com/resin-4.0/admin/config-el.xtp#Environment%20variables Environment variables Environment variables inherited by the process from the operting system I created the environment variable $STORE, and tried using &amp;lt;resin:set I also found some resin documentation that showed the EL variable Is there a way to pass variables into the startup of resin? -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] passing environment variables into resin during startup</header>
    <date>Sat Apr 02 04:00:40 CEST 2011</date>
    <body>I finally figured it out.  The following worked when I placed the tag set under the &amp;lt;host&amp;gt; tag.  Originally, I had it under the top level In resin 3.0, you could pass values into the startup of resin via Java system properties.  For example, In my resin startup script (Linux), I would start resin using the following command: $RESIN_ROOT/bin/httpd.sh -verbose -server-root /web/resin  -Xmx500M -XX:MaxPermSize=100M -Dstore=go2marine start Essentially, I would pass in a Java system property named "store" and in my resin.conf file, I would set this to an EL variable: In resin 4, I don't see a way to pass in Java system properties.  I've tried setting environment variables, but I can't find a way to read the environment variables in resin.xml.  I found the following information in Resin documentation, but it doesn't work seem to work for environment variables that I create. http://www.caucho.com/resin-4.0/admin/config-el.xtp#Environment variables http://www.caucho.com/resin-4.0/admin/config-el.xtp#Environment%20variables Environment variables Environment variables inherited by the process from the operting I created the environment variable $STORE, and tried using &amp;lt;resin:set I also found some resin documentation that showed the EL variable Is there a way to pass variables into the startup of resin? -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>[Resin-interest] Does &amp;lt;resin:message&amp;gt; work in resin.xml at the host	level?</header>
    <date>Sat Apr 02 02:04:47 CEST 2011</date>
    <body>In resin 4.0.16, is the &amp;lt;resin:message&amp;gt; tag suppose to work at the host level when placed under the &amp;lt;host&amp;gt; tag in the resin.xml file?  I tried doing this to display an EL variable value in the resin log.  Resin doesn't appear to support this tag under the &amp;lt;host&amp;gt; tag.  When I added it, I didn't receive any errors from resin but none of my web applications were started.  When I remove the tag everything works. -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>[Resin-interest] archive of resin-interest</header>
    <date>Fri Apr 01 22:21:41 CEST 2011</date>
    <body>The search on Caucho's web site use to include searching of the resin-interest mailing list archive.  It doesn't seem to do that anymore.  I looked at the Caucho Web site to see if they provide a separate search tool, but I couldn't find one.  Does anyone know if Caucho is providing a search interface to the resin-interest mailing list? -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] archive of resin-interest</header>
    <date>Sat Apr 02 02:45:57 CEST 2011</date>
    <body>Hi, Without any dedicated search interface for this mailing list, you can use this keyword with Google: site:maillist.caucho.com/pipermail/resin-interest Kevin Decherf - M: +33 681194547 Office &amp;amp; Production Manager, Clever Cloud SAS On Fri, Apr 1, 2011 at 10:20 PM, Keith Fetterman http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Environment class loader throwing a ClassNotFoundException when resin 4 is restarted</header>
    <date>Thu Mar 31 02:50:40 CEST 2011</date>
    <body>Today, I discovered when I stopped and then started resin (4.0.16), I received a "java.lang.ClassNotFoundException" exception being thrown by the "com.caucho.loader.DynamicClassLoader.loadClass" when I accessed the home page of my Web site.  The ClassNotFoundException is caused by resin trying to load one of our application classes that was stored in the HTTP session and was persisted.  We have our application classes being loaded at the host level class loader.  Why is resin trying to load the class via the EnvironmentClassLoader?  Is this a bug in resin 4.0.16? We switched from using hessian to java serialization because hessian serialization was trying to lazy load our hibernate objects that were in the HTTP session.  I don't know if this makes a difference. Please help if you can. The stack trace is below. WARNING WARNING -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Environment class loader throwing a ClassNotFoundException when resin 4 is restarted</header>
    <date>Mon Apr 04 20:20:20 CEST 2011</date>
    <body>This problem seems to be more pervasive in Resin 4.0.16 pro.  I am now seeing other application classes that the Resin EnvironmentClassLoader is trying to load but it can't find them.  I am getting the error "java.lang.ClassNotFoundException" because the "EnvironmentClassLoader[resin-system:]" is trying to load it.  In our resin.xml file, I have the application classes being loaded at at the Host level. Resin was started at 9:55 AM this morning.  Since then, I have been testing our Website including checking out, which would require "com.marinersupply.common.store.struts.form.checkout.CheckoutCustomerInfoForm" class to be loaded.  Then at 10:37 AM, resin throws the error: WARNING It looks like the error is occurring when resin is either serializing or deserializing the session.  Is the EnvironmentClassLoader above the host class loader and if so, why is trying to load application classes?  Is this a bug in resin 4.0.16? WARNING WARNING WARNING -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Environment class loader throwing a ClassNotFoundException when resin 4 is restarted</header>
    <date>Mon Apr 04 20:40:13 CEST 2011</date>
    <body>I am wondering if this problem is related to the HTTP session timing out.  In the ROOT web application, we have the session time out set to 70 minutes: WEB-INF/web.xml I received another ClassNotFoundException from the EnvironmentClassLoader after 30 minutes, which is the default session timeout for most Web apps. WARNING WARNING WARNING WARNING -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Environment class loader throwing a ClassNotFoundException when resin 4 is restarted</header>
    <date>Mon Apr 04 20:56:13 CEST 2011</date>
    <body>Possibly. I've filed it as a bug. The Java deserializer requires a classloader handler for proper deserialization. It's possible that it's not properly handled in some contexts. -- Scott WARNING WARNING WARNING WARNING</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Environment class loader throwing a ClassNotFoundException when resin 4 is restarted</header>
    <date>Tue Apr 05 03:04:38 CEST 2011</date>
    <body>Hi Scott, Thanks filing this as a bug.  I ran some more tests and it looks like its related to the HTTP session timing out or being invalidated.  If a request for that session occurs after the timeout, I see the EnvironmentClassLoader exceptions. Keith WARNING WARNING WARNING WARNING http://maillist.caucho.com/mailman/listinfo/resin-interest -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Environment class loader throwing a ClassNotFoundException when resin 4 is restarted</header>
    <date>Tue Apr 05 17:32:26 CEST 2011</date>
    <body>Hi Scott, I shorted the session-timeout down to 3 minutes for the ROOT application and I was able to recreate the problem each time I let my session expire beyond the three minutes.  It looks like a ClassCastException was thrown for every application class that was in the HTTP session. I had to switch to the Java serializer for persistent sessions because I was running into a problem with the hessian serializer.  The hessian serializer was throwing org.hibernate.LazyInitializationException when it tried to de-serialize my hibernate enabled classes that were in the session. I am concerned about going into production with this bug, especially with the Go2marine Web site.  Any suggestions on how to work around this issue until Caucho can resolve it? Thanks, Keith WARNING WARNING WARNING WARNING http://maillist.caucho.com/mailman/listinfo/resin-interest -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>[Resin-interest] Web app reloading problem with Clojure.</header>
    <date>Wed Mar 30 21:59:25 CEST 2011</date>
    <body>Hello everybody! I'm running a webapp created in clojure (version 1.3, clojure.org). It is compiled into classes and deployed as war. When I re-deploy (by putting a new ROOT.war file), the resin reloads the app, but Clojure code isn't changed. Only restarting whole resin gives me fresh code loaded. How could I solve this issue? Perhaps I could disable hotswapping, or dynamic swapping (how?). I'm not sure how I could attack this problem, so if I failed to provide necessary information - please ask! Regards, Marcin Koziej</body>
  </mail>
  <mail>
    <header>[Resin-interest] ISP watchdog questions</header>
    <date>Wed Mar 30 13:10:32 CEST 2011</date>
    <body>Hi, On our development-server we have installed resin-pro-4.0.16. To restrict our developers access, we use the method described as "ISP watchdog management" ( http://caucho.com/resin-4.0/admin/starting-resin-watchdog.xtp ). However, since this is a development server each application can be hot-deployed several times each day. This occasionally leads to the watchdog process running out of memory. Hence, our developers can't restart their applications. Is there a simple way of solving this? Our current solution is to do a shutdown of the watchdog every night, however, I would prefer a more elegant solution. Our problem has also lead to a few more questions I have not been able to find the answer to: - How can we increase the memory for the watchdog-manager? Default seems to be: -Xss256k -Xmx32m - Since we want ALL the logs of each application to be stored in a separate folder for the application, we set the "-log-directory" option for each application when it starts. The watchdog-manager.log will therefore be located together with the logs of the first application we start. Since which application is started first can be different, we get several watchdog-manager.log files laying around. Is there a way for specifying where the watchdog-manager.log file should be located? For example in the watchdog.xml file? This could of course be solved with symlinks in every application-log folder to a specific watchdog-manager.log, however, once again I would prefer a more elegant solution. requires the "id" to be set. Is this a bug? (I have not tested if this still is the case for 4.0.16) -- Halvor Utby USIT/GAP/W3D</body>
  </mail>
  <mail>
    <header>[Resin-interest] How to implement	&amp;lt;rewrite-dispatch&amp;gt;&amp;lt;moved-permanently&amp;gt; in Resin 4</header>
    <date>Wed Mar 30 02:11:49 CEST 2011</date>
    <body>In resin 3, the way to perform a HTTP 301 redirect was using the following resin tags: I don't see an equivalent tag in Resin 4 documentation. How should this be implemented? I tried using the following tag, but I get an HTTP 302 redirect: Thanks, Keith -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to implement	&amp;lt;rewrite-dispatch&amp;gt;&amp;lt;moved-permanently&amp;gt; in Resin 4</header>
    <date>Wed Mar 30 02:46:28 CEST 2011</date>
    <body>Hi Keith, There is a resin:MovedPermanently with the same syntax. http://wiki.caucho.com/Cookbook:_Moved_Permanently I've entered a documentation bug for this. Thanks, Paul http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to implement	&amp;lt;rewrite-dispatch&amp;gt;&amp;lt;moved-permanently&amp;gt; in Resin 4</header>
    <date>Wed Mar 30 04:20:45 CEST 2011</date>
    <body>Thanks Paul for the quick response.  This is excellent.  I am pushing hard to get our site upgraded to Resin 4 and then roll out to production. In resin 3, the way to perform a HTTP 301 redirect was using the following resin tags: I don't see an equivalent tag in Resin 4 documentation. How should this be implemented? I tried using the following tag, but I get an HTTP 302 redirect: Hi Keith, There is a resin:MovedPermanently with the same syntax. http://wiki.caucho.com/Cookbook:_Moved_Permanently I've entered a documentation bug for this. Thanks, Paul Thanks, Keith -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com mailto:kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>[Resin-interest] StaticLoggerBinder?</header>
    <date>Tue Mar 29 23:43:05 CEST 2011</date>
    <body>I just installed 4.0.16 on a new Mac OS X 10.6.7 installation. I don't have the old config file for my webapp with me, so I'm trying to re-create it from memory. I do have the webapp installation itself, which was working fine on my older (4.0.8?) installation. After getting my data source squared away, I'm running into this in my logs: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.interceptor.TransactionInterceptor#0': Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/config/springContext.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/config/springContext.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: Some Googling turned up this bug report: http://bugs.caucho.com/view.php?id=4271 Which is apparently fixed. I'm not sure if I'm still not properly configured, or if I've failed to install something into resin's lib that I used to have in place, but I thought I'd ask here to see if it was an easily-solved problem. Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] StaticLoggerBinder?</header>
    <date>Wed Mar 30 00:29:38 CEST 2011</date>
    <body>http://bugs.caucho.com/view.php?id=4271 That looks like a .jar conflict. Can you look in resin/lib, resin/webapp-jars and your WEB-INF/lib to see if there's a conflict with the slf4j*.jar? The slf4j*.jar in resin/webapp-jars is just included for convenience (for the bean validation jar basically, which is part of the Web Profile). You can remove it or replace it if there are any conflicts. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] StaticLoggerBinder?</header>
    <date>Wed Mar 30 00:58:53 CEST 2011</date>
    <body>Ah! I looked in resin/lib, didn't see it, thought it was removed in this distro. Removing it seems to have fixed my problem. Does that mean, though, that my bean validation won't work someday? Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] com.caucho.server.cache.ProxyCacheFilterChain -	unable to reset IncludeRequest</header>
    <date>Mon Mar 28 18:59:22 CEST 2011</date>
    <body>We are updating our Web site from resin 3.0 to 4.0. I am seeing ProxyCacheFilterChain warnings in the Resin log.  I see an error message buried in the message "unable to reset IncludeRequest".  Has anyone seen a message like this and have idea what is causing it?  I looked through the resin documentation and I don't see anything. WARNING I've enabled debug logging of the cache adding the following statement at the top of the resin.xml, but I am not seeing any debug messages in the log. Please reply with any ideas on what might be causing these warnings. Thanks, Keith -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] com.caucho.server.cache.ProxyCacheFilterChain -	unable to reset IncludeRequest</header>
    <date>Fri Apr 01 22:28:10 CEST 2011</date>
    <body>Does anyone know how to read the following warning message that resin is displaying when I access a Web page? WARNING I can't figure it out. I've finally figured out why I wasn't seeing the debug messages from the caching mechanism in resin.  I had the level on the &amp;lt;log-handler&amp;gt; tag set to "info", which overrides the more detail levels (fine, finest, etc.) defined in the &amp;lt;logger&amp;gt; tags.  This behavior is opposite to Log4J so it threw me for a few days. With the debug logging turned on, I haven't been able to figure out what is causing the warning message. I'd appreciate it if someone could help me read the log message so I can figure out what is causing the warning message. Thanks, Keith WARNING -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] com.caucho.server.cache.ProxyCacheFilterChain -	unable to reset IncludeRequest</header>
    <date>Fri Apr 01 22:39:59 CEST 2011</date>
    <body>WARNING That message looks like Resin is trying to fill the page with a cached value, but the output has already been flushed. Is that possible in this situation? The log-handler is designed to matches the java.util.logging Handler. So we're trying to be as standard as possible in this case. There are two checks for any log message. The &amp;lt;logger&amp;gt; checks the level for the Logger itself, while the Handler has a second check. That way you can have two or more log handlers where one of them is high priority (like mail) for severe errors. So a generic log-handler like the path="debug.log" or path="stderr:" can be at the "all" level to catch any enabled log message. -- Scott WARNING</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] com.caucho.server.cache.ProxyCacheFilterChain -	unable to reset IncludeRequest</header>
    <date>Fri Apr 01 22:55:11 CEST 2011</date>
    <body>Hi Scott, The short answer is I don't know.  We are using a combination of Struts 1.3.10, Tiles and JSP.  All of the URLs in the warning message that begin with "/docs" are static files that live outside the Web application and are referenced in Resin using &amp;lt;path-mapping&amp;gt; tags, which are defined in the resin-web.xml file (root web app. WEB-INF directory). We are not explicitly closing the output.  If a JSP page uses a dynamic include to a static file, does resin block until it reads in the staticly referenced file? Here is something even weirder.  I get these warning messages even when I access pages from Web applications to do not reference any of the URLs in the warning message.  What I mean is, the URLs are all used in our Main Web site (ROOT application) and they are not used in other Web applications.  When I access a page in another Web app.  these warning messages appear in the log. Can you tell from the log message which file Resin is trying to fill when it encounters the problem?  I can try commenting the call out to see what happens. WARNING WARNING http://maillist.caucho.com/mailman/listinfo/resin-interest -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] com.caucho.server.cache.ProxyCacheFilterChain -	unable to reset IncludeRequest</header>
    <date>Fri Apr 01 23:11:27 CEST 2011</date>
    <body>Actually, yes. I didn't catch that before. The IncludeRequest shows the complete chain. It's complaining on /docs/content/banner.html. Since that's a static file, the issue must be a Resin bug. I've filed it as http://bugs.caucho.com/view.php?id=4472 -- Scott WARNING WARNING http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] &amp;lt;log&amp;gt; tag  still a valid in resin 4?</header>
    <date>Sat Mar 26 02:02:59 CET 2011</date>
    <body>I see documentation in resin 4 for the &amp;lt;log&amp;gt; tag, but its not included http://caucho.com/resin-4.0/reference.xtp Is this an oversight in the resin 4 documentation or is has this tag been replaced or discontinued? The &amp;lt;log&amp;gt; tag had a "format" attribute, which I don't see listed in the http://caucho.com/resin-4.0/admin/logging.xtp#Format-String What is the recommended way to add the format keywords to the Resin log messages? -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] &amp;lt;log&amp;gt; tag  still a valid in resin 4?</header>
    <date>Sat Mar 26 02:29:55 CET 2011</date>
    <body>Is there a way to include the name of the thread in a log message way to include the thread ID, but I'd like to display its name instead. We use Log4J in our application and it can display the thread name in its log messages so it would be nice to have the messages from resin display the names. Thanks, Keith http://caucho.com/resin-4.0/reference.xtp http://caucho.com/resin-4.0/admin/logging.xtp#Format-String -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] &amp;lt;log&amp;gt; tag  still a valid in resin 4?</header>
    <date>Mon Mar 28 20:06:36 CEST 2011</date>
    <body>easy addition.) -- Scott http://caucho.com/resin-4.0/reference.xtp http://caucho.com/resin-4.0/admin/logging.xtp#Format-String</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] &amp;lt;log&amp;gt; tag  still a valid in resin 4?</header>
    <date>Mon Mar 28 20:05:29 CEST 2011</date>
    <body>http://caucho.com/resin-4.0/reference.xtp It's discouraged. It still exists for backward compatibility. You should be using the log-handler and logger. http://caucho.com/resin-4.0/admin/logging.xtp#Format-String I've just filed that as a doc issue. The "format" still exists in log-handler. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4: hibernate objects in HTTP session causing	org.hibernate.LazyInitializationException</header>
    <date>Fri Mar 25 23:43:11 CET 2011</date>
    <body>We have a custom Authenticator that extends resin's com.caucho.server.security.AbstractAuthenticator.  In our custom authenticator, I am storing a Hibernate object that contains a HashSet of other Hibernate objects in my HTTP session.  When I restart Resin (Resin 4.0.16), I am getting the following stack trace that is caused by a "org.hibernate.LazyInitializationException" when I access the first Web page after the server is started. It looks like resin is deserializing the Hibernate object from resin's session persistence and then trying to populate the Set of associated Hibernate objects, but the Set object that originally contained the associated Hibernate objects does not exist.  I am guessing that is the problem because I see the following cause: I am using the java.util.HashSet to contain the associated Hibernate objects.  If this is the problem, why isn't resin also serializing the HashSet? Doesn't Resin's session serialization serialize objects associated with objects that are in the HTTP session? Does resin's session persistence mechanism invoke the methods on the objects stored in the session when it serializes or unserializes the objects from the session store? The reason that I ask this problem is that I get the following Exception: Why is resin invoking Hibernate to perform a lazy load of associated objects on my hibernate object?  I've seen cause the error above when it tried to persist the hibernate object at the end of processing an HTTP request.  We use a servlet filter to close the Hibernate session.  It looks like the act of persisting the session is occurring after resin has returned from this filter because the Hibernate session was closed. My question again is "why is resin invoking the methods on the object that in turn makes a request to hibernate to lazy load the associated objects?" Is resin using Hibernate as a part of its default session persistence implementation? We didn't see any of these errors when we were running Resin 3.0.28. But, in Resin 3.0.28, we were using Resin's MySQL session persistence. In resin 4.0.16, we are using Resin's default session persistence store. I would appreciate any ideas on what might be going so I can track down the problem. Thanks, Keith -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4: hibernate objects in HTTP session causing org.hibernate.LazyInitializationException</header>
    <date>Mon Mar 28 11:31:57 CEST 2011</date>
    <body>By default Resin 4 uses Hessian for serialization of session data. Hessian tries to traverse uninitialized Hibernate associations by reflection, causing LazyInitializationException when serializing. For that reason, we are using Java serialization instead of Hessian for session data. Here is how to configure: ... Keith Fetterman wrote (2011-03-25 23:42):</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4: hibernate objects in HTTP session causing org.hibernate.LazyInitializationException</header>
    <date>Mon Mar 28 17:37:16 CEST 2011</date>
    <body>Hi Mattias, Thanks for the help.  That did it. It is unfortunate that Hessian serialization does this because a lot Web development is based on hibernate.  We'd have to create non-hibernate clones of our persistent objects for storing in the session. Keith -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>[Resin-interest] Life Ray on Resin</header>
    <date>Wed Mar 23 12:36:44 CET 2011</date>
    <body>Has anyone ran Liferay on Resin?  I don't really want to have to startup Tomcat just for this app. Steve Francis Application Technologies</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Life Ray on Resin</header>
    <date>Wed Mar 23 14:05:38 CET 2011</date>
    <body>Hello Steve, you have resin liferay bundle in downloads section. On Wed, Mar 23, 2011 at 4:58 PM, Francis, Steve (IHG) &amp;lt;steve.fran...@ihg.com http://maillist.caucho.com/mailman/listinfo/resin-interest -- Thanks &amp;amp; Regards, *Srikanth A*</body>
  </mail>
  <mail>
    <header>[Resin-interest] Remote deploy still broken in 4.0.16</header>
    <date>Wed Mar 23 09:27:09 CET 2011</date>
    <body>Giving the resin-deploy Ant task another try in Resin 4.0.16, I get "resin-home is requried by resin-deploy" Adding a resin-home attribute to the resin-deploy tag as in user="foo" password="bar" commitmessage="test" commitMessage="Test" version="0.1" results in "resin-deploy doesn't support the "resin-home" attribute" Sigh.... --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote deploy still broken in 4.0.16</header>
    <date>Wed Mar 23 20:46:38 CET 2011</date>
    <body>We moved all the deploy logic into the command-line, instead of the specific ant/maven plugins. I've added a bug report to check the ant status. We might deprecated and remove the ant plugin, and suggest calling the command-line directly. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Admin console not updated by make script</header>
    <date>Wed Mar 23 09:10:03 CET 2011</date>
    <body>I just noticed that installing Resin on Linux using make install does not update the admin console pages in /path-to-use/admin Could this be related to the problem with the docs dir reported by Bill Au yesterday ( http://bugs.caucho.com/view.php?id=4445 ) or should I file a separate bug? --</body>
  </mail>
  <mail>
    <header>[Resin-interest] What is http://admin.resin ?</header>
    <date>Wed Mar 23 08:51:35 CET 2011</date>
    <body>After upgrading to Resin 4.0.15/16, there is a new virutal host (or whatever it is) in the WebApps section of the admin console, that I've never noticed before. The name is " http://admin.resin" ; and it contains only a root webapp ("/") with an uptime as long as Resin has been running. What is this? Is it using any additional memory compared to earlier versions of Resin? Is there a way to turn it off? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] What is http://admin.resin ?</header>
    <date>Wed Mar 23 20:56:16 CET 2011</date>
    <body>http://admin.resin" ; and it contains only a root webapp It's an admin virtual host. That's how the remote deploy talks to Resin to upload the new version. Not significantly. It's created with the &amp;lt;resin:RemoteAdminService/&amp;gt; tag. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Extending Resin's com.caucho.server.security.AbstractAuthenticator creating errors in Resin 4</header>
    <date>Tue Mar 22 17:18:34 CET 2011</date>
    <body>In our current Web site, which is running resin 3.0.28, we created a custom Authenticator by extending resin's com.caucho.server.security.AbstractAuthenticator.  In resin 3.0, we used the following descriptor (under the host tag) in resin.conf: I am moving the site to resin 4.0.16. Following an example in the help, I converted the descriptor to the following tag under the &amp;lt;host&amp;gt; tag: I am getting the following error in the log: Even after reading all of the help sections on the resin help documentation, I still find this injection coding rather cryptic.  It looks like the Resin "AdminAuthenticator" authenticator and our custom authenticator are conflicting.  Any ideas on how I can tell Resin to use ours instead Resin's would be most helpful. Also, has anyone found a good tutorial on IOC that explains all of the annotations and how they effect the beans and their use? Thanks, Keith -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Extending Resin's com.caucho.server.security.AbstractAuthenticator creating errors in Resin 4</header>
    <date>Tue Mar 22 20:00:07 CET 2011</date>
    <body>That's correct. Resin can't figure out which one it's supposed to use (that may be a Resin bug, because the AdminAuthenticator shouldn't be a candidate in this case.) CDI matches based on the type (Authenticator) and some optional "qualifiers" or by name. In this case, there's no name or qualifiers, so Resin can't tell which authenticator to use. In this case, it might be easiest to give your authenticator a name, and then assign it directly. The ee:Named assigns your authenticator a name "myAuth". authenticator. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin Pro 4.0.16</header>
    <date>Tue Mar 22 15:23:45 CET 2011</date>
    <body>Just saw that 4.0.16 is now available in the download area.  I took a quick look at Resin Pro 4.0.16.  It looks like the old "doc" directory is now installed at "resin-doc".  From Makefile: mkdir -p $(resin_root)/resin-doc; \ cp -r $(CP_U_FLAG) doc/* $(resin_root)/resin-doc; \ But resin.xml is still using "doc" as opposed to "resin-doc": Bill</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.16</header>
    <date>Tue Mar 22 19:40:52 CET 2011</date>
    <body>Just saw that 4.0.16 is now available in the download area.  I took a quick look at Resin Pro 4.0.16.  It looks like the old "doc" directory is now installed at "resin-doc".  From Makefile: mkdir -p $(resin_root)/resin-doc; \ cp -r $(CP_U_FLAG) doc/* $(resin_root)/resin-doc; \ But resin.xml is still using "doc" as opposed to "resin-doc": Thanks. I've filed a bug. -- Scott Bill</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ROOT.war not expanded when explicitly defined in resin.xml</header>
    <date>Tue Mar 22 08:03:47 CET 2011</date>
    <body>Have you tried without versioning="true"? -- ----- Original Message ----- Subject: [Resin-interest] ROOT.war not expanded when explicitly defined in resin.xml Date: Mon, 21 Mar 2011 17:03:31 -0700 I am experiencing a problem in resin 4.0.16 where resin is not expanding the ROOT.war file if I explicitly define the root webapp in resin.xml file. In resin.xml, I have the tag "&amp;lt;web-app id="/" root-directory="webapps/ROOT"/&amp;gt;" defined under my "&amp;lt;host&amp;gt;" tag. I also have the tag "&amp;lt;web-app-deploy path="webapps" versioning="true"/&amp;gt;" defined under my "&amp;lt;host-default&amp;gt;" tag. When I update the ROOT.war file in my "webapps" directory, the war file is not being expanded into the webapps/ROOT directory. I have tried both shutting down resin, updating the ROOT.war file and then starting resin, and I've tried updating ROOT.war while resin is running. If I remove the tag "&amp;lt;web-app id="/" root-directory="webapps/ROOT"/&amp;gt;" from the resin.xml file, then ROOT.war expansion occurs. Do I need to add an attribute to the &amp;lt;web-app id="/" root-directory="webapps/ROOT"/&amp;gt; tag to get the war file to expand? Also, what is the difference between the attribute "root-directory" and "document-directory" in the &amp;lt;web-app&amp;gt; tag? I noticed in the resin documentation that "root-directory" is mentioned in the list of attributes but "document-directory" is not on the following page: http://caucho.com/resin/reference.xtp#web-app But, if you look at the examples, they all show "&amp;lt;web-app id='/apache' document-directory='/usr/local/apache/htdocs'&amp;gt;" Thanks, Keith -- ----------------------------------------------------------------- Keith Fetterman Direct: 206-319-9434 Mariner Supply, Inc. 206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ROOT.war not expanded when explicitly defined in resin.xml</header>
    <date>Tue Mar 22 14:49:11 CET 2011</date>
    <body>I removed the versioning attribute and it works.    "&amp;lt;web-app-deploy path='webapps' /&amp;gt;"  works. Thanks Have you tried without versioning="true"? -- ----- Original Message ----- Subject: [Resin-interest] ROOT.war not expanded when explicitly defined in resin.xml Date: Mon, 21 Mar 2011 17:03:31 -0700 I am experiencing a problem in resin 4.0.16 where resin is not expanding the ROOT.war file if I explicitly define the root webapp in resin.xml file. In resin.xml, I have the tag "&amp;lt;web-app id="/" root-directory="webapps/ROOT"/&amp;gt;" defined under my "&amp;lt;host&amp;gt;" tag. I also have the tag "&amp;lt;web-app-deploy path="webapps" versioning="true"/&amp;gt;" defined under my "&amp;lt;host-default&amp;gt;" tag. When I update the ROOT.war file in my "webapps" directory, the war file is not being expanded into the webapps/ROOT directory. I have tried both shutting down resin, updating the ROOT.war file and then starting resin, and I've tried updating ROOT.war while resin is running. If I remove the tag "&amp;lt;web-app id="/" root-directory="webapps/ROOT"/&amp;gt;" from the resin.xml file, then ROOT.war expansion occurs. Do I need to add an attribute to the &amp;lt;web-app id="/" root-directory="webapps/ROOT"/&amp;gt; tag to get the war file to expand? Also, what is the difference between the attribute "root-directory" and "document-directory" in the &amp;lt;web-app&amp;gt; tag? I noticed in the resin documentation that "root-directory" is mentioned in the list of attributes but "document-directory" is not on the following page: http://caucho.com/resin/reference.xtp#web-app But, if you look at the examples, they all show "&amp;lt;web-app id='/apache' document-directory='/usr/local/apache/htdocs'&amp;gt;" Thanks, Keith -- ----------------------------------------------------------------- Keith Fetterman Direct: 206-319-9434 Mariner Supply, Inc. 206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>[Resin-interest] ROOT.war not expanded when explicitly defined in	resin.xml</header>
    <date>Tue Mar 22 01:04:06 CET 2011</date>
    <body>I am experiencing a problem in resin 4.0.16 where resin is not expanding the ROOT.war file if I explicitly define the root webapp in resin.xml file.  In resin.xml, I have the tag "&amp;lt;web-app id="/" root-directory="webapps/ROOT"/&amp;gt;" defined under my "&amp;lt;host&amp;gt;" tag.  I also have the tag "&amp;lt;web-app-deploy path="webapps" versioning="true"/&amp;gt;" defined under my "&amp;lt;host-default&amp;gt;" tag. When I update the ROOT.war file in my "webapps" directory, the war file is not being expanded into the webapps/ROOT directory.  I have tried both shutting down resin, updating the ROOT.war file and then starting resin, and I've tried updating ROOT.war while resin is running. If I remove the tag "&amp;lt;web-app id="/" root-directory="webapps/ROOT"/&amp;gt;" from the resin.xml file, then ROOT.war expansion occurs. Do I need to add an attribute to the &amp;lt;web-app id="/" root-directory="webapps/ROOT"/&amp;gt; tag to get the war file to expand? Also, what is the difference between the attribute "root-directory" and "document-directory" in the &amp;lt;web-app&amp;gt; tag?  I noticed in the resin documentation that "root-directory" is mentioned in the list of attributes but "document-directory" is not on the following page: http://caucho.com/resin/reference.xtp#web-app But, if you look at the examples, they all show "&amp;lt;web-app id='/apache' document-directory='/usr/local/apache/htdocs'&amp;gt;" Thanks, Keith -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ROOT.war not expanded when explicitly defined in	resin.xml</header>
    <date>Tue Mar 22 08:32:00 CET 2011</date>
    <body>AFAIK, you either place the .war file in webapps or define the directory using an explicit web-app tag, but having both is not necessary and just seems to confuse Resin. S! D. El 22/03/2011 1:03, Keith Fetterman escribió: http://caucho.com/resin/reference.xtp#web-app</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ROOT.war not expanded when explicitly defined in	resin.xml</header>
    <date>Tue Mar 22 14:35:05 CET 2011</date>
    <body>In Resin 3.0, we had this configuration and it didn't have a problem. Actually, I recall that we did in an early version of 3.0.x, but the problem was corrected in the later versions. There are two reasons why we explicitly had the &amp;lt;web-app&amp;gt; tag in resin.conf in resin 3.0: - On our test environment only, I want to specify some security constraints to the root web app. to prevent access, for example: In production, we didn't want this security constraint. - In our development environments, we specify a different name for the war file and we want to assign it to be the root application in the host.  For example, we have http://caucho.com/resin/reference.xtp#web-app http://maillist.caucho.com/mailman/listinfo/resin-interest -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ROOT.war not expanded when explicitly defined in	resin.xml</header>
    <date>Tue Mar 22 19:14:31 CET 2011</date>
    <body>They're supposed to be merged with the &amp;lt;web-app&amp;gt; in the resin.xml applied last (taking precedence). Internally, though, that merging is a fairly complicated operation, so it's certainly possible that a combination of version="true/false" with ROOT might be a case we haven't covered. -- Scott http://caucho.com/resin/reference.xtp#web-app http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ROOT.war not expanded when explicitly defined in	resin.xml</header>
    <date>Tue Mar 22 19:26:25 CET 2011</date>
    <body>I have a question about versioning.  If we want to use it, do we append the version number to the name of the war file? For example: ROOT.war, ROOT-2.war, ROOT-3.war, etc. When we roll out a new version, do we delete the previous war file?  For example, if I deploy ROOT-2.ear, do I delete ROOT.war? http://caucho.com/resin/reference.xtp#web-app http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ROOT.war not expanded when explicitly defined in	resin.xml</header>
    <date>Tue Mar 22 19:38:32 CET 2011</date>
    <body>Correct. Since the version # is like 1.0.0, and most of our tests use that format, it's possible that a -2 might not be properly handled (I'd need to check our tests to see if they handle that.) Yes, just to clean up. It wouldn't affect Resin's behavior, though, since Resin would only use the latest version. By the way, when you deploy a new version, Resin will continue to send current sessions to the old version for 60 minutes (by default). New sessions will go to the new version. -- Scott http://caucho.com/resin/reference.xtp#web-app http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ROOT.war not expanded when explicitly defined in	resin.xml</header>
    <date>Tue Mar 22 20:07:37 CET 2011</date>
    <body>Thanks. If we were to use your format for the version number, would we start with ROOT-1.0.0.war instead of ROOT.war?  and the second version would be ROOT-1.0.1.war? http://caucho.com/resin/reference.xtp#web-app http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ROOT.war not expanded when explicitly defined in	resin.xml</header>
    <date>Tue Mar 22 19:16:43 CET 2011</date>
    <body>http://caucho.com/resin/reference.xtp#web-app The root-directory is the preferred name (I'm updating the docs). document-directory is for backward compatibility. We are using root-directory so all the levels of Resin use the same tag (&amp;lt;resin&amp;gt;, &amp;lt;cluster&amp;gt;, &amp;lt;host&amp;gt;, &amp;lt;web-app&amp;gt;), and "document-directory" would only make sense for web-app but wouldn't be accurate for the other levels. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] CanDI Startup pattern question</header>
    <date>Thu Mar 17 18:38:15 CET 2011</date>
    <body>I need some help understanding how CanDI works with the Startup pattern mentioned in the following tutorial on Caucho's Web site. http://caucho.com/resin-4.0/examples/ioc-binding/index.xtp#Startup%20Pattern Here is what the tutorial says: Startup Pattern The |@Startup| annotation marks a bean as initializing on server startup. Because the startup bean is discovered through classpath scanning like the other beans, the initialization is controlled by the startup class itself. In other words, looking at the startup class is sufficient, because it doesn't rely on XML for startup. The startup bean uses the |@PostConstruct| annotation on an initialization method to start initialization code. I have added the two annotations @Startup and @PostConstruct to the class that I want to load at server initialization time, but when I start Resin, the class is not initialized.  My understanding from reading the tutorial is that this is all I should have to do to have the class loaded and initialized.  But, it doesn't seem to work.  I don't think Resin is scanning the classpath or finding the class in the classpath.  Is there more to it than this? Here is my Java class: @Startup @PostConstruct public void init() This Java class is located in the webapp's WEB-INF/classes folder (in the example package). I see Resin compiling it, but I don't see the print messages in the stdout log. Do I need to add something to the resin.xml or the webapp's web-resin.xml file to get it to load? I did figure out a way to explicitly tell Resin to load the class.  I created a resin-web.xml file in my web application with the following statements: http://caucho.com/ns/resin" ; xmlns:ee="urn:java:ee" Now when resin starts, I see the class loading and the init() method is run. Should this be required? Thanks for any help. Keith -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI Startup pattern question</header>
    <date>Thu Mar 17 18:48:50 CET 2011</date>
    <body>I need some help understanding how CanDI works with the Startup pattern mentioned in the following tutorial on Caucho's Web site. I have added the two annotations @Startup and @PostConstruct to the class that I want to load at server initialization time, but when I start Resin, the class is not initialized.  My understanding from reading the tutorial is that this is all I should have to do to have the class loaded and initialized.  But, it doesn't seem to work.  I don't think Resin is scanning the classpath or finding the class in the classpath.  Is there more to it than this? Do you have a META-INF/beans.xml in the .jar (or classes directory) containing the bean? For performance reasons, CDI scanning only occurs in jars which have the beans.xml file. (Or if you add it to the resin-web.xml of course.) -- Scott Here is my Java class: @Startup @PostConstruct public void init() This Java class is located in the webapp's WEB-INF/classes folder (in the example package). I see Resin compiling it, but I don't see the print messages in the stdout log. Do I need to add something to the resin.xml or the webapp's web-resin.xml file to get it to load? I did figure out a way to explicitly tell Resin to load the class.  I created a resin-web.xml file in my web application with the following statements: http://caucho.com/ns/resin" ; xmlns:ee="urn:java:ee" Now when resin starts, I see the class loading and the init() method is run. Should this be required? Thanks for any help. Keith -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI Startup pattern question</header>
    <date>Thu Mar 17 23:05:44 CET 2011</date>
    <body>Hi Scott, How do you configure services using CanDI at the host level and have them loaded before the Web applications are loaded?  Our Web site is currently running on resin 3.0.28.  Our Web site runs several Web applications, and we have custom resources that are shared across all Web applications running on a host. All of the classes are loaded using a host level classloader. We are using the &amp;lt;resource&amp;gt; tags in the resin.conf file that are located under the &amp;lt;host&amp;gt; tag to specify the shared resources. All of the CanDI examples on the Caucho Web site are specific to a Web application and use the resin-web.xml file for XML configuration.  Is it possible to load and initialize services at the host level using CanDI? The default configuration of resin 3.0.28 creates a WEB-INF directory in the webapps directory for a host.  I noticed that the default configuration of 4.0.15 didn't create this WEB-INF.  One thought I have is to create a WEB-INF directory in the webapps directory under the host root directory and then create a resin-web.xml and/or beans.xml files underneath.  The host level web-resin.xml file could be defined like the example on the Caucho Web site: |  &amp;lt;web-app xmlns=" http://caucho.com/ns/resin" | Or the above could be added to the resin.xml file like we do with the Well this work?  If so, is this a recommended approach?  Or is there a better way? Thanks, Keith I need some help understanding how CanDI works with the Startup pattern mentioned in the following tutorial on Caucho's Web site. I have added the two annotations @Startup and @PostConstruct to the class that I want to load at server initialization time, but when I start Resin, the class is not initialized.  My understanding from reading the tutorial is that this is all I should have to do to have the class loaded and initialized.  But, it doesn't seem to work.  I don't think Resin is scanning the classpath or finding the class in the classpath.  Is there more to it than this? Do you have a META-INF/beans.xml in the .jar (or classes directory) containing the bean? For performance reasons, CDI scanning only occurs in jars which have the beans.xml file. (Or if you add it to the resin-web.xml of course.) -- Scott Here is my Java class: @Startup @PostConstruct public void init() This Java class is located in the webapp's WEB-INF/classes folder (in the example package). I see Resin compiling it, but I don't see the print messages in the stdout log. Do I need to add something to the resin.xml or the webapp's web-resin.xml file to get it to load? I did figure out a way to explicitly tell Resin to load the class.  I created a resin-web.xml file in my web application with the following statements: http://caucho.com/ns/resin" ; xmlns:ee="urn:java:ee" Now when resin starts, I see the class loading and the init() method is run. Should this be required? Thanks for any help. Keith -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI Startup pattern question</header>
    <date>Thu Mar 17 23:30:35 CET 2011</date>
    <body>Hi Scott, How do you configure services using CanDI at the host level and have them loaded before the Web applications are loaded?  Our Web site is currently running on resin 3.0.28.  Our Web site runs several Web applications, and we have custom resources that are shared across all Web applications running on a host. All of the classes are loaded using a host level classloader. We are using the &amp;lt;resource&amp;gt; tags in the resin.conf file that are located under the &amp;lt;host&amp;gt; tag to specify the shared resources. All of the CanDI examples on the Caucho Web site are specific to a Web application and use the resin-web.xml file for XML configuration.  Is it possible to load and initialize services at the host level using CanDI? It should just work. CanDI works with Resin's existing classloader structure. So a configuration in the &amp;lt;host&amp;gt; will create a CanDI bean shared across all the webapps and a configuration in the &amp;lt;cluster&amp;gt; will create a CanDI bean shared across the entire server. configuration. (The &amp;lt;resource&amp;gt; should still work for backwards compat, but we'd encourage upgrading.) The examples all use resin-web.xml for simplicity, so we don't need to explain Resin's nested classloader structure. The default configuration of resin 3.0.28 creates a WEB-INF directory in the webapps directory for a host.  I noticed that the default configuration of 4.0.15 didn't create this WEB-INF.  One thought I have is to create a WEB-INF directory in the webapps directory under the host root directory and then create a resin-web.xml and/or beans.xml files underneath. You can do that.  Try something like: ... (Or use a &amp;lt;host-default&amp;gt; to make it work for all hosts.) If you look at the conf/app-default.xml, you can see that the web-app classloaders and special files are configured by the resin.xml/app-default.xml. (I just did that to cut-and-past the sample XML above) In Resin 4.0, we try to stay away from internal defaults, and expose everything in the config files where possible. The host level web-resin.xml file could be defined like the example on the Caucho Web site: |  &amp;lt;web-app xmlns=" http://caucho.com/ns/resin" | Exactly. That's what the resin-host.xml above would do. The only difference is that you'd use &amp;lt;host xmlns=" http://caucho.com/ns/resin" ;&amp;gt; because the &amp;lt;resin:import&amp;gt; is from the &amp;lt;host&amp;gt; context. Or the above could be added to the resin.xml file like we do with the Well this work? Yep. If so, is this a recommended approach? Sure. The only reason we've avoided discussing it much is to avoid making the configuration look too complicated. For services/beans shared across an entire host, it's the right solution. -- Scott Or is there a better way? Thanks, Keith I need some help understanding how CanDI works with the Startup pattern mentioned in the following tutorial on Caucho's Web site. I have added the two annotations @Startup and @PostConstruct to the class that I want to load at server initialization time, but when I start Resin, the class is not initialized.  My understanding from reading the tutorial is that this is all I should have to do to have the class loaded and initialized.  But, it doesn't seem to work.  I don't think Resin is scanning the classpath or finding the class in the classpath.  Is there more to it than this? Do you have a META-INF/beans.xml in the .jar (or classes directory) containing the bean? For performance reasons, CDI scanning only occurs in jars which have the beans.xml file. (Or if you add it to the resin-web.xml of course.) -- Scott Here is my Java class: @Startup @PostConstruct public void init() This Java class is located in the webapp's WEB-INF/classes folder (in the example package). I see Resin compiling it, but I don't see the print messages in the stdout log. Do I need to add something to the resin.xml or the webapp's web-resin.xml file to get it to load? I did figure out a way to explicitly tell Resin to load the class. I created a resin-web.xml file in my web application with the following statements: http://caucho.com/ns/resin" ; xmlns:ee="urn:java:ee" Now when resin starts, I see the class loading and the init() method is run. Should this be required? Thanks for any help. Keith -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI Startup pattern question</header>
    <date>Fri Mar 18 00:57:19 CET 2011</date>
    <body>Hi Scott, You rock!!  Its works!!!  I can see my service startup at the host level prior to the web applications loading. Thanks a lot. Keith Hi Scott, How do you configure services using CanDI at the host level and have them loaded before the Web applications are loaded?  Our Web site is currently running on resin 3.0.28.  Our Web site runs several Web applications, and we have custom resources that are shared across all Web applications running on a host. All of the classes are loaded using a host level classloader. We are using the &amp;lt;resource&amp;gt; tags in the resin.conf file that are located under the &amp;lt;host&amp;gt; tag to specify the shared resources. All of the CanDI examples on the Caucho Web site are specific to a Web application and use the resin-web.xml file for XML configuration.  Is it possible to load and initialize services at the host level using CanDI? It should just work. CanDI works with Resin's existing classloader structure. So a configuration in the &amp;lt;host&amp;gt; will create a CanDI bean will create a CanDI bean shared across the entire server. configuration. (The &amp;lt;resource&amp;gt; should still work for backwards compat, but we'd encourage upgrading.) The examples all use resin-web.xml for simplicity, so we don't need to explain Resin's nested classloader structure. The default configuration of resin 3.0.28 creates a WEB-INF directory in the webapps directory for a host.  I noticed that the default configuration of 4.0.15 didn't create this WEB-INF.  One thought I have is to create a WEB-INF directory in the webapps directory under the host root directory and then create a resin-web.xml and/or beans.xml files underneath. You can do that.  Try something like: ... (Or use a &amp;lt;host-default&amp;gt; to make it work for all hosts.) If you look at the conf/app-default.xml, you can see that the web-app classloaders and special files are configured by the resin.xml/app-default.xml. (I just did that to cut-and-past the sample XML above) In Resin 4.0, we try to stay away from internal defaults, and expose everything in the config files where possible. The host level web-resin.xml file could be defined like the example on the Caucho Web site: |  &amp;lt;web-app xmlns=" http://caucho.com/ns/resin" | Exactly. That's what the resin-host.xml above would do. The only difference is that you'd use &amp;lt;host xmlns=" http://caucho.com/ns/resin" ;&amp;gt; because the &amp;lt;resin:import&amp;gt; is from the &amp;lt;host&amp;gt; context. Or the above could be added to the resin.xml file like we do with the Well this work? Yep. If so, is this a recommended approach? Sure. The only reason we've avoided discussing it much is to avoid making the configuration look too complicated. For services/beans shared across an entire host, it's the right solution. -- Scott Or is there a better way? Thanks, Keith I need some help understanding how CanDI works with the Startup pattern mentioned in the following tutorial on Caucho's Web site. I have added the two annotations @Startup and @PostConstruct to the class that I want to load at server initialization time, but when I start Resin, the class is not initialized.  My understanding from reading the tutorial is that this is all I should have to do to have the class loaded and initialized.  But, it doesn't seem to work.  I don't think Resin is scanning the classpath or finding the class in the classpath.  Is there more to it than this? Do you have a META-INF/beans.xml in the .jar (or classes directory) containing the bean? For performance reasons, CDI scanning only occurs in jars which have the beans.xml file. (Or if you add it to the resin-web.xml of course.) -- Scott Here is my Java class: @Startup @PostConstruct public void init() This Java class is located in the webapp's WEB-INF/classes folder (in the example package). I see Resin compiling it, but I don't see the print messages in the stdout log. Do I need to add something to the resin.xml or the webapp's web-resin.xml file to get it to load? I did figure out a way to explicitly tell Resin to load the class. I created a resin-web.xml file in my web application with the following statements: http://caucho.com/ns/resin" ; xmlns:ee="urn:java:ee" Now when resin starts, I see the class loading and the init() method is run. Should this be required? Thanks for any help. Keith -- ----------------------------------------------------------------- Keith Fetterman                        Direct: 206-319-9434 Mariner Supply, Inc.                   206-780-5670 http://www.go2marine.com kfetter...@go2marine.com http://www.boatersline.com</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.14+ slow to boot</header>
    <date>Wed Mar 02 11:54:27 CET 2011</date>
    <body>We're looking forward to upgrading from 4.0.10 to 4.0.15, but during testing we notice 4.0.15 takes way longer to boot our application. Results on different machines range from twice the time to 4-5 times as long. It seems that the Spring/Hibernate initialization is taking most of the time (just by debug outputs, no profiling yet) Narrowing it down, it changed between 4.0.13 and 4.0.14. Is anyone else seeing this? Would this be expected for any reason (like XML parser, DTD resolving)??? (We have primarily tested this on Windows with a Resin Pro license that should be valid for the update) --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.14+ slow to boot</header>
    <date>Wed Mar 02 18:11:40 CET 2011</date>
    <body>I may have just hit this and fixed it (I need to verify the specific change - there are two.) Resin's classloader does some analysis and caching to improve resource/class loading performance. This speeds up Spring/Hibernate initialization considerably. Some of that caching was causing problems with GC, so it was reversed. I'll see how it can be fixed. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.14+ slow to boot</header>
    <date>Mon Mar 07 10:14:03 CET 2011</date>
    <body>Scott Ferguson wrote (2011-03-02 18:10): Great. Is there a bug entry I can keep track of to see when I should try the snapshop?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.14+ slow to boot</header>
    <date>Mon Mar 07 16:43:27 CET 2011</date>
    <body>Soctt, Assuming this fix will be in 4.0.16, how soon will that be released? We are looking to upgrade to Resin 4.  I would not want to have to do the upgrade in 2 steps (first to 4.0.15, and then to 4.0.16 with this fix).  How long is the startup delay anyway? Bill http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.14+ slow to boot</header>
    <date>Mon Mar 07 18:34:30 CET 2011</date>
    <body>Soctt, Assuming this fix will be in 4.0.16, how soon will that be released? We're starting on the regression checkout for it. So this week if everything goes well. We are looking to upgrade to Resin 4.  I would not want to have to do the upgrade in 2 steps (first to 4.0.15, and then to 4.0.16 with this fix).  How long is the startup delay anyway? It would really depend on the application. For Liferay (a pretty big Spring application) it was almost a factor of 10. -- Scott Bill On Wed, Mar 2, 2011 at 12:10 PM, Scott Ferguson &amp;lt;f...@caucho.com mailto:f...@caucho.com times as taking most reason (like license that I may have just hit this and fixed it (I need to verify the specific change - there are two.) Resin's classloader does some analysis and caching to improve resource/class loading performance. This speeds up Spring/Hibernate initialization considerably. Some of that caching was causing problems with GC, so it was reversed. I'll see how it can be fixed. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Configuring a host on another IP?</header>
    <date>Sat Feb 19 11:02:53 CET 2011</date>
    <body>Hi. I use resin 4 on a single server. I have a config file derived from the default config file, with a single cluster, and a bunch of &amp;lt;host&amp;gt;s inside that. How can I make some hosts bind to a specific IP address on the machine, and others to a different address? Thanks, Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] [ANN]VTD-XML 2.10</header>
    <date>Fri Feb 25 23:03:14 CET 2011</date>
    <body>VTD-XML 2.10 is now released. It can be downloaded at https://sourceforge.net/projects/vtd-xml/files/vtd-xml/ximpleware_2.10/ . This release includes a number of new features and enhancement. * The core API of VTD-XML has been expanded. Users can now perform cut/paste/insert on an empty element. * This release also adds the support of deeper location cache support for parsing and indexing. This feature is useful for application performance tuning for processing various XML documents. * The java version also added support for processing zip and gzip files. Direct processing of httpURL based XML is enhanced. * Extended Java version now support Iso-8859-10~16 encoding. * A full featured C++ port is released. * C version of VTD-XML now make use of thread local storage to achieve thread safety for multi-threaded application. * There are also a number of bugs fixed. Special thanks to Jozef Aerts, John Sillers, Chris Tornau and a number of other users for input and suggestions</body>
  </mail>
  <mail>
    <header>[Resin-interest] Release Notes for 4.0.15 broken</header>
    <date>Mon Feb 14 21:57:00 CET 2011</date>
    <body>Hi, Is it possible to fix the resin 4.0.15 release notes on the website? Currently we see this: /var/www/hosts/www.caucho.com/webapps/resin-4.0/changes/resin-4.0.15.xtp:50: expected `&amp;lt;/s1&amp;gt;' at `&amp;lt;/body&amp;gt;' (open at 11) 49: Regards, Peter</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Release Notes for 4.0.15 broken</header>
    <date>Mon Feb 14 22:49:01 CET 2011</date>
    <body>Thanks. I just updated that. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] jvm log difference between RHEL and SLES</header>
    <date>Mon Feb 14 14:21:04 CET 2011</date>
    <body>I have Resin Pro 4.0.15 installed on both RHEL and SLES, and have noticed that the jvm-default.log are very different. The RHEL systems jvm-default.log : Resin Professional 4.0.15 (built Tue, 08 Feb 2011 10:18:48 PST) Copyright(c) 1998-2010 Caucho Technology.  All rights reserved. 1010977.license -- 1 Resin server Intercontinental Hotel Groups (IHG) Starting Resin Professional on Thu, 10 Feb 2011 13:43:18 -0500 (EST) UTF-8, en mixed mode, Sun Microsystems Inc. active active Loading .tld files from global classpath In-place class redefinition (HotSwap) is available. Then the SLES systems jvm-default.log Resin Professional 4.0.15 (built Tue, 08 Feb 2011 10:18:48 PST) Copyright(c) 1998-2010 Caucho Technology.  All rights reserved. 1010977.license -- 1 Resin server Intercontinental Hotel Groups (IHG) Starting Resin Professional on Mon, 14 Feb 2011 07:06:34 -0500 (EST) OpenSSL support compiled for OpenSSL 0.9.8a 11 Oct 2005 Can someone tell me why there is a difference?  Shouldn't we get the same logging on both systems? Steve Francis Application Technologies IHG</body>
  </mail>
  <mail>
    <header>[Resin-interest] Best Way to Track Down Random Resin Restarts</header>
    <date>Fri Feb 11 18:00:12 CET 2011</date>
    <body>We are running Resin Pro 3.0.25 on RHEL 5.5 and using 64-bit Sun JDK 1.6.0_05.  Recently, we have started seeing several incidents where the Resin JVM seems to just randomly get restarted.  There is nothing in the logs to indicate that the JVM was shutdown cleanly or a restart was attempted, the log files just go from displaying regular log lines to displaying the following: [11:24:18.095] com.caucho.log.EnvironmentLogger.log Server[myserver] starting Things that have already been checked: 1. There doesn’t appear to be a JVM crash as no HotSpot Error log files are created as they usually would be. 2. There are no signs in the sudo logs that anyone is manually restarting the JVM. 3. There are no signs in the logs that Resin is restarting itself even though we have a “min-free-memory” setting of 1M.  With higher values of that setting we have seen the JVM get restarted due to low memory, but I am pretty sure logging always indicated that the JVM was restarting when this happened before. 4. We are not using the resin “ping” check that might restart the JVM if it is unresponsive. 5.     Kernel logging is enabled and it doesn't look like the kernel is killing it for any reason It almost seems as if the JVM is just getting a kill -9 and then the wrapper script is starting it back up.  What is the best way to track down what might be killing the JVM?  We are in the process of testing an upgrade to a newer version of the JDK, but I am not very confident that will fix the problem.  I am going to try to turn on full Resin debug logging, but I thought I would reach out in case anyone else had an idea of how to track this down.  Is there a way to wrap the Linux kill command to find out if that is being run?  Any other suggestions on where to look?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Best Way to Track Down Random Resin Restarts</header>
    <date>Fri Feb 11 20:41:40 CET 2011</date>
    <body>The logging for 4.0 is much more informative. With 3.0 it's a bit trickier. Since a phantom kill is pretty unlikely, I wouldn't spend too much time on that theory. Since you're not getting a hs_* error, the most likely would be either something calling System.exit or System.halt, possibly Resin itself for something like running out of threads or memory (although, as you pointed out, that should be logged.) Other than that, the restart should only happen if the config files change (theoretically something like NFS or 'touch' could trigger that, but I assume that's not happening.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Best Way to Track Down Random Resin Restarts</header>
    <date>Fri Feb 11 22:22:26 CET 2011</date>
    <body>I think we have seen similar symptoms, which turned out to be (unless my memory deceives me) related to graphics.  Resin was started via an ssh session with X11 forwarding.  After the app was up the ssh connection was closed.  At some point the app would want to generate some image or something, and the JVM proceeds to delegate to X11, which now is utterly unavailable.  That in turned caused the JVM to abort abruptly. That may be what happened, but don't quote me on that. Knut Forkalsrud http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Best Way to Track Down Random Resin Restarts</header>
    <date>Thu Feb 17 20:55:16 CET 2011</date>
    <body>So, with full debug logging turned on, I did see this exception in the logs right before the restart: [13:55:37.603] com.caucho.log.EnvironmentLogger.log com.caucho.config.ConfigException: OpenSSL can't open certificate-chain-file '/nfs/certs/mysite.crt' [13:55:37.603]  at com.caucho.vfs.OpenSSLFactory.open(Native Method) [13:55:37.603]  at com.caucho.vfs.OpenSSLFactory.accept(OpenSSLFactory.java:419) [13:55:37.603]  at com.caucho.server.port.Port.accept(Port.java:813) [13:55:37.603]  at com.caucho.server.port.TcpConnection.run(TcpConnection.java:495) [13:55:37.603]  at com.caucho.util.ThreadPool.runTasks(ThreadPool.java:520) [13:55:37.603]  at com.caucho.util.ThreadPool.run(ThreadPool.java:442) [13:55:37.603]  at java.lang.Thread.run(Thread.java:619) [13:55:37.603] [13:55:49.109] com.caucho.log.EnvironmentLogger.log Server[myserver1] starting That certificate is getting loaded over NFS. Is there a chance that a certificate loading failure due to an NFS issue could cause the JVM to exit? I thought the certificate would just be loaded one time at startup, but it looks like maybe it accesses it during runtime as well. Unfortunately, on a different JVM, there was a crash that doesn't seem to have the same exception: [13:36:03.102] com.caucho.log.EnvironmentLogger.log allocate PoolItem[jdbc/db1,3340053,com.caucho.sql.ManagedConnectionImpl@744ab820] [13:36:03.102] com.caucho.log.EnvironmentLogger.log allocate PoolItem[jdbc/db2,1020267,com.caucho.sql.ManagedConnectionImpl@2a121a07] [13:36:16.815] com.caucho.log.EnvironmentLogger.log Server[myserver2] starting Scott, what are your thoughts on the certificate issue?  To be safe, we should probably start by not loading the certificate over an NFS share. Thanks, Shane http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Best Way to Track Down Random Resin Restarts</header>
    <date>Thu Feb 17 21:07:10 CET 2011</date>
    <body>Possibly an issue running out of file descriptors? That exception shouldn't cause a restart directly. It would cause that thread to exit, but would also start up a new thread to listen to that port (because it's assuming the current thread is broken for some reason.) But you could get a "can't open" if you run out of file descriptors, and running out of  file descriptors can force a restart. -- Scott mailto:f...@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Best Way to Track Down Random Resin Restarts</header>
    <date>Fri Feb 18 01:19:19 CET 2011</date>
    <body>I increased the file descriptors to be safe, but it doesn't appear to be the issue.  I didn't see the user anywhere near the file descriptor limit on my checks and I doubt it would be possible for their to be a sudden file descriptor spike that would open another 5000 files. One thing that is interesting is that I have been connecting jstat to the process to see what the heaps look like right before the crash.  The heap data looks fine, but it appears that the timestamp doesn't increment for about 10-12 consecutive checks.  Jstat gets disconnected when the process dies, but this data almost makes it seem like the process is running but unresponsive for about 10 seconds and then it gets killed.  Would the wrapper process kill the JVM if it found it to be running but unresponsive? Is there anything else in Resin that would kill the Java process if it check in resin.conf)? Timestamp         S0     S1     E      O      P     YGC     YGCT    FGC FGCT     GCT 40044.1   0.00   0.00  23.05  83.21  82.56    711   70.353   118 104.280  174.632 40045.1   0.00   0.00  26.98  83.21  82.56    711   70.353   118 104.280  174.632 40046.1   0.00   0.00  28.36  83.21  82.56    711   70.353   118 104.280  174.632 40047.1   0.00   0.00  29.88  83.21  82.56    711   70.353   118 104.280  174.632 40048.1   0.00   0.00  31.28  83.21  82.56    711   70.353   118 104.280  174.632 40049.1   0.00   0.00  32.86  83.21  82.56    711   70.353   118 104.280  174.632 40050.1   0.00   0.00  35.72  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 mailto:f...@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Best Way to Track Down Random Resin Restarts</header>
    <date>Wed Aug 10 18:11:47 CEST 2011</date>
    <body>If anyone else runs into this issue,  we resolved it by moving SSL termination to our load balancer.  It seems that something in the native SSL libraries was causing the JVM to crash under high load.  We moved the SSL termination to our BigIP and have not had an unexplained crash ever since.  I hope this eventually helps someone else with the same problem. Thanks, Shane From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Shane Cruz Sent: Thursday, February 17, 2011 6:18 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Best Way to Track Down Random Resin Restarts I increased the file descriptors to be safe, but it doesn't appear to be the issue.  I didn't see the user anywhere near the file descriptor limit on my checks and I doubt it would be possible for their to be a sudden file descriptor spike that would open another 5000 files. One thing that is interesting is that I have been connecting jstat to the process to see what the heaps look like right before the crash.  The heap data looks fine, but it appears that the timestamp doesn't increment for about 10-12 consecutive checks.  Jstat gets disconnected when the process dies, but this data almost makes it seem like the process is running but unresponsive for about 10 seconds and then it gets killed.  Would the wrapper process kill the JVM if it found it to be running but unresponsive?  Is there anything else in Resin that would kill the Java process if it determined there was a deadlock or something (we are not using the &amp;lt;ping&amp;gt; check in resin.conf)? Timestamp         S0     S1     E      O      P     YGC     YGCT    FGC    FGCT GCT 40044.1   0.00   0.00  23.05  83.21  82.56    711   70.353   118 104.280  174.632 40045.1   0.00   0.00  26.98  83.21  82.56    711   70.353   118 104.280  174.632 40046.1   0.00   0.00  28.36  83.21  82.56    711   70.353   118 104.280  174.632 40047.1   0.00   0.00  29.88  83.21  82.56    711   70.353   118 104.280  174.632 40048.1   0.00   0.00  31.28  83.21  82.56    711   70.353   118 104.280  174.632 40049.1   0.00   0.00  32.86  83.21  82.56    711   70.353   118 104.280  174.632 40050.1   0.00   0.00  35.72  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 40050.7   0.00   0.00  41.97  83.21  82.56    711   70.353   118 104.280  174.632 On Thu, Feb 17, 2011 at 2:06 PM, Scott Ferguson mailto:f...@caucho.com Possibly an issue running out of file descriptors? That exception shouldn't cause a restart directly. It would cause that thread to exit, but would also start up a new thread to listen to that port (because it's assuming the current thread is broken for some reason.) But you could get a "can't open" if you run out of file descriptors, and running out of  file descriptors can force a restart. -- Scott mailto:f...@caucho.com mailto:f...@caucho.com mailto:f...@caucho.com mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] "no JMX ObjectName detected" with jrockit vm</header>
    <date>Fri Feb 11 05:47:54 CET 2011</date>
    <body>Hi Scott, Resin 4.0.14 log many warnings about no JMX ObjectName detected MemoryTenuredHealthCheck[] has no JMX ObjectName detected MemoryPermGenHealthCheck[] has no JMX ObjectName detected MemoryTenuredHealthCheck[] has no JMX ObjectName detected MemoryPermGenHealthCheck[] has no JMX ObjectName detected MemoryTenuredHealthCheck[] has no JMX ObjectName detected MemoryPermGenHealthCheck[] has no JMX ObjectName detected I'm using jrockit vm R28.1 64bit edition in CentOS 5.5. -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] "no JMX ObjectName detected" with jrockit vm</header>
    <date>Fri Feb 11 19:32:20 CET 2011</date>
    <body>Yep. It's listed as http://bugs.caucho.com/view.php?id=4384 . -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] "no JMX ObjectName detected" with jrockit vm</header>
    <date>Fri Feb 11 20:02:42 CET 2011</date>
    <body>http://bugs.caucho.com/view.php?id=4384 . I've added jrockit to the bug report also. You can silence these by adding this to resin.xml: -Paul http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Classloader problems with hibernate validator and	slf4j</header>
    <date>Fri Feb 11 03:01:05 CET 2011</date>
    <body>So... now that the hibernate validator is part of the resin appserver classpath, there seems to be some sort of strange conflict with slf4j. java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory org.hibernate.validator.util.LoggerFactory.make(LoggerFactory.java:29) org.hibernate.validator.util.Version.&amp;lt;clinit&amp;gt;(Version.java:30) org.hibernate.validator.engine.ConfigurationImpl.&amp;lt;clinit&amp;gt;(ConfigurationImpl.java:52) org.hibernate.validator.HibernateValidator.createGenericConfiguration(HibernateValidator.java:43) javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:269) javax.validation.Validation.buildDefaultValidatorFactory(Validation.java:111) org.subethamail.web.model.ErrorMapModel.&amp;lt;clinit&amp;gt;(ErrorMapModel.java:24) org.subethamail.web.action.CreateList.initialize(CreateList.java:79) org.tagonist.AbstractAction.execute(AbstractAction.java:50) org.tagonist.ActionTag.doEndTag(ActionTag.java:282) _jsp._list_0create_0submit__jsp._jspService(_list_0create_0submit__jsp.java:70) _jsp._list_0create_0submit__jsp._jspService(_list_0create_0submit__jsp.java:29) com.caucho.jsp.JavaPage.service(JavaPage.java:64) I can make the issue go away by copying slf4j-api and slf4j-jdk14 into resin/lib... but is there a better way to solve this? Admittedly I haven't tried removing hibernate-vaildator from my war yet.  But that seems an odd solution. Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Classloader problems with hibernate validator and	slf4j</header>
    <date>Fri Feb 11 03:15:07 CET 2011</date>
    <body>I've just filed this as http://bugs.caucho.com/view.php?id=4386 We need to change the distribution to put the hibernate-validator and slf4j into project-jars and add a Basically, we can't put slf4j into resin/lib because that causes classloader problems, so hibernate-validator and slf4j need to be put into a per-web-app classloader as part of the web-app-default. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin Eclipse Plugin just working with Resin Pro?</header>
    <date>Mon Feb 07 13:44:13 CET 2011</date>
    <body>Hi, I reinstalled Eclipse and started from scratch and after installing the latest Eclipse plugin from www.caucho.com/eclipse, when I try to create a new Server I'm no longer given the option of specifying a local version, but it insists I have to download a Pro version, put my email address to request a license... Is that how the updated version (4.0.14) of the plugin works? D. ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) Web Services Centre for Information and Technology Balearic Islands University (SPAIN) -------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Eclipse Plugin just working with Resin Pro?</header>
    <date>Mon Feb 07 18:46:29 CET 2011</date>
    <body>That's a mistake on our end. http://bugs.caucho.com/view.php?id=4379 The auto-download should default to pro, but it should let you specify any pre-installed Resin version. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Eclipse Plugin just working with Resin Pro?</header>
    <date>Wed Feb 09 12:42:03 CET 2011</date>
    <body>Good to know, thanks. I'll wait for the 4.0.15 then. S! D. El 07/02/2011 18:45, Scott Ferguson escribió: http://bugs.caucho.com/view.php?id=4379</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin Eclipse Plugin not stopping instances</header>
    <date>Tue Feb 15 11:50:13 CET 2011</date>
    <body>Hi again, I upgraded to plugin version 4.0.15 and I was now able to select my local instalation to be used, so it seems to be fixed. On the other hand, something else seems to have been broken as the server is not stopped either when you press stop or re-start or any other option. You hit stop, the server is then displayed as stopped but the console of the server does not show the usual "stopping..." message. When you try to start it up again, you get a "HTTP port already boud" error. If you kill the suspect java process "by hand", you are then able to restart it again. I tested it with local Resin 4.0.14 and Resin 4.0.15 versions to discard a server issue, and the problem happens with both. On a related note, if I start any of those versions with the regular resin.exe and try to stop it instead of quitting, I get this at the console: ----------------------------------------------------------------- Shutdown Resin reason: OK 15-feb-2011 11:44:55 com.caucho.env.thread.ResinThread runTasks ADVERTENCIA: java.lang.RuntimeException: java.net.SocketException: Socket closed java.lang.RuntimeException: java.net.SocketException: Socket closed at com.caucho.hmtp.HmtpLinkWorker.run(HmtpLinkWorker.java:117) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) Caused by: java.net.SocketException: Socket closed at java.net.SocketInputStream.socketRead0(Native Method) at java.net.SocketInputStream.read(SocketInputStream.java:147) at java.net.SocketInputStream.read(SocketInputStream.java:182) at com.caucho.remote.websocket.WebSocketInputStream.startBinaryMessage(W ebSocketInputStream.java:80) at com.caucho.hmtp.HmtpWebSocketReader.readPacket(HmtpWebSocketReader.ja va:63) at com.caucho.hmtp.HmtpLinkWorker.run(HmtpLinkWorker.java:114) ... 2 more 15-feb-2011 11:44:55 com.caucho.boot.WatchdogChildProcess logStatus ADVERTENCIA: Watchdog detected close of Resin[,pid=0] exit reason: normal exit (exit code=0) 15-feb-2011 11:44:55 com.caucho.boot.WatchdogChildTask run INFO: WatchdogChild[] stopped ----------------------------------------------------------------- However, in this case the process seems to die alright as I can start the server again and get no "port already bound" error. In spite of that, there could be a correlation between both of them as it is quite suspicious for both to happen at the same time :). Cheers! D. El 09/02/2011 12:40, Daniel López escribió: http://bugs.caucho.com/view.php?id=4379</body>
  </mail>
  <mail>
    <header>[Resin-interest] Simple documentation fixes</header>
    <date>Tue Feb 15 15:57:03 CET 2011</date>
    <body>------------- http://caucho.com/resin-4.0/admin/http-rewrite.xtp#Servlet%20Filters Header should say something like: "Example: Servlet Filter" Just a copy/paste error from the example above it. ------------- http://caucho.com/resin-4.0/reference.xtp#resin:SetHeader The "&amp;lt;resin:SetHeader&amp;gt; Attributes" section is missing a regex attribute.  Also, is it required? ------------- http://caucho.com/resin-4.0/reference.xtp#resin:SetVary Same as above. The "&amp;lt;resin:SetVary&amp;gt; Attributes" section is missing a regex attribute. Also, is it required?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Simple documentation fixes</header>
    <date>Tue Feb 15 16:06:53 CET 2011</date>
    <body>Also, when trying these examples, I get: 'resin:SetHeader' is an unknown property of 'com.caucho.server.webapp.WebApp'. So I am guessing it needs to be wrapped inside of something else? http://caucho.com/resin-4.0/admin/http-rewrite.xtp#Servlet%20Filters http://caucho.com/resin-4.0/reference.xtp#resin:SetHeader http://caucho.com/resin-4.0/reference.xtp#resin:SetVary http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Simple documentation fixes</header>
    <date>Tue Feb 15 16:20:56 CET 2011</date>
    <body>Oops I left off the name space stuff out of habit.  Added that in per the example and it's working properly. http://caucho.com/resin-4.0/admin/http-rewrite.xtp#Servlet%20Filters http://caucho.com/resin-4.0/reference.xtp#resin:SetHeader http://caucho.com/resin-4.0/reference.xtp#resin:SetVary http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Simple documentation fixes</header>
    <date>Wed Feb 16 18:28:21 CET 2011</date>
    <body>http://caucho.com/resin-4.0/admin/http-rewrite.xtp#Servlet%20Filters http://caucho.com/resin-4.0/reference.xtp#resin:SetHeader http://caucho.com/resin-4.0/reference.xtp#resin:SetVary Thanks. No, the regexp isn't required. If it's missing, the rewrite filters will match any URL. By the way, the filters, dispatch rules and predicates are simple to implement, so if there's any capability that we're missing, just file a bug report and we can add it easily. For example, we can add a &amp;lt;resin:SetCacheControl&amp;gt; as a special case of SetHeader, and we might add a &amp;lt;resin:Busy&amp;gt; and a &amp;lt;resin:IfManagementMode&amp;gt;. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Eclipse Plugin not stopping instances</header>
    <date>Thu Feb 17 12:31:43 CET 2011</date>
    <body>Hi, I did some more testing and the Resin plugin is able to stop Resin 3.1.5 instances, so it appears to be a compound problem between the 4.0.14-15 releases not being closed properly and the plugin not detecting it. S! D. El 15/02/2011 11:48, Daniel López escribió: http://bugs.caucho.com/view.php?id=4379 -- ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) Web Services Centre for Information and Technology Balearic Islands University (SPAIN) -------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Eclipse Plugin not stopping instances</header>
    <date>Fri Feb 18 18:49:31 CET 2011</date>
    <body>Thanks, I filed a bug report: http://bugs.caucho.com/view.php?id=4400 We are starting resin server using the "console" command, which starts watchdog (in a separate JVM). The managed Resin Server is started by that watchdog. When 'stop' button is pressed watchdog's JVM is stopped and Resin should shutdown. That happens immediately on Linux and Mac, but takes 2 minutes on Windows, that's something for us to investigate and fix. Resin 3.1 is started directly, so that explains the difference in behaviour. Alex ----- Original Message ---- To: General Discussion for the Resin application server Sent: Thu, February 17, 2011 3:30:41 AM Subject: Re: [Resin-interest] Resin Eclipse Plugin not stopping instances Hi, I did some more testing and the Resin plugin is able to stop Resin 3.1.5 instances, so it appears to be a compound problem between the 4.0.14-15 releases not being closed properly and the plugin not detecting it. S! D. El 15/02/2011 11:48, Daniel López escribió: http://bugs.caucho.com/view.php?id=4379 -- ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) Web Services Centre for Information and Technology Balearic Islands University (SPAIN) -------------------------------------------</body>
  </mail>
  <mail>
    <header>[Resin-interest]  Resin Eclipse Plugin not stopping instances</header>
    <date>Fri Jul 15 10:16:12 CEST 2011</date>
    <body>Hi, I upgraded the Resin-Eclipse plugin to latest version and all my Resin 3.X servers are broken and I can't re-create them as the plugin just allows me now to add Resin 4.X servers. Auch! :) D.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Amber counterpart for toplink.ddl-generation</header>
    <date>Sun Feb 06 00:32:22 CET 2011</date>
    <body>Hello guys, would like to ask what's the correct counterpart in Amber for Oracle Toplink toplink.ddl-generation property one places in persistence.xml? Here's an example: &amp;lt;property name="toplink.ddl-generation" I've got persistence.xml correctly placed in WEB-INF/classes/META-INF and Resin seems to recognize my PU. I would like to have database recreated every time I deploy my application as I'm in progress of reworking my application and this would ease my work a lot. Thanks,</body>
  </mail>
  <mail>
    <header>[Resin-interest] Question concerning &amp;lt;sec:AdminAuthenticator&amp;gt; with	Resin4.0.14</header>
    <date>Thu Feb 03 17:52:47 CET 2011</date>
    <body>(I am in the process and upgrading from resin 3.1.10 to 4.0.14) My server seems to starting and running great.  My question comes when I stop it. I am getting the following in my watchdog-manager.log *HmtpServlet[WebApp[production/webapp/admin.resin/ROOT]] requires an active com.caucho.security.Authenticator because HMTP messaging requires authenticated login for security.  In the resin.xml, add an Resin[1,pid=17178]: Resin shutdown from watchdog stop 'watchdog@admin.resin.caucho' Resin[lms,pid=17178] exit reason: normal exit (exit code=0) java.net.SocketException: Socket closed at com.caucho.hmtp.HmtpLinkWorker.run(HmtpLinkWorker.java:117) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) Caused by: java.net.SocketException: Socket closed at java.net.SocketInputStream.read(SocketInputStream.java:162) at java.net.SocketInputStream.read(SocketInputStream.java:182) at com.caucho.remote.websocket.WebSocketInputStream.startBinaryMessage(WebSocketInputStream.java:80) at com.caucho.hmtp.HmtpWebSocketReader.readPacket(HmtpWebSocketReader.java:63) at com.caucho.hmtp.HmtpLinkWorker.run(HmtpLinkWorker.java:114) ... 2 more the thing is... I do have a &amp;lt;sec:AdminAuthenticator&amp;gt; node in my config. (Although to be honest... I am not really sure why I need it) the instance does seem to stop successfully (despite the SocketException), but I am not sure what is wrong with my config file (see snippet below) xmlns:sec="urn:java:com.caucho.security" xmlns:resin=" http://caucho.com/ns/resin/core" xmlns=" http://caucho.com/ns/resin" ...... thanks Eric</body>
  </mail>
  <mail>
    <header>[Resin-interest] Moving from hibernate to eclipselink</header>
    <date>Thu Feb 03 01:28:34 CET 2011</date>
    <body>I've a project which followed the hibernate example here: http://wiki.caucho.com/Hibernate I'm now trying to do the same but with eclipselink as supplied with Resin 4.0.14 pro. I extended that hibernate example to perform commits using UserTransaction and EntityManager instances but when I used the same code with eclipselink I get "[EL Severe]: 2011-02-02 23:23:52.406--ServerSession(4188490)--java.lang.IllegalStateException: Can't allocate connection because the connection pool is closed." I'm sure this is a newbie db config problem. The servlet code is @PersistenceUnit(unitName="contact") @Inject public void service(HttpServletRequest req, HttpServletResponse res) ... and the exception occurs at that last line. I defined my db in resin-web.xml: http://caucho.com/ns/resin" And thought the &amp;lt;jta-data-source&amp;gt; entry in persistence.xml was all I needed to wire it up: http://java.sun.com/xml/ns/persistence" Is there something else I should be doing please? -- Carl Whalley http://www.androidacademy.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Moving from hibernate to eclipselink</header>
    <date>Thu Feb 03 08:32:39 CET 2011</date>
    <body>Hi Whalley I don't know hibernate at all, but I have put you here http://www.architectedulogiciel.fr/download/testjoin.zip a small sample of code that should works with EclipseLink and Resin 4,0,14 The entity manager is created directly with injection from resin.conf and the persistence.xml includes a line to specify the eclipselink.ddl-generation.output-mode PS: the database associated with the sample is described in the file database.sql (mysql script) http://wiki.caucho.com/Hibernate http://caucho.com/ns/resin" http://java.sun.com/xml/ns/persistence" http://www.androidacademy.com http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Moving from hibernate to eclipselink</header>
    <date>Fri Feb 04 00:35:52 CET 2011</date>
    <body>http://www.architectedulogiciel.fr/download/testjoin.zip Hi Riccardo, That was really kind thanks. Just looking at it now. -- Carl Whalley http://www.androidacademy.com</body>
  </mail>
  <mail>
    <header>[Resin-interest] Is Resin4 considered production stable?</header>
    <date>Tue Feb 01 16:27:29 CET 2011</date>
    <body>It has been out for a while now, so I assume yes, but can't hurt to ask the question :-) Are there still major re-factoring efforts pending on the 4 series? thanks Eric</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Is Resin4 considered production stable?</header>
    <date>Tue Feb 01 21:36:16 CET 2011</date>
    <body>There have been some major changes recently, due to both JavaEE TCK and WebSocket/HMTP changes (used for the clustering.) So we're almost, but not quite there. None pending. 4.0.15 will have a significant change to the CDI interception handling (mandated by the TCK). The Resin code changes are small, but the effect is significant (not sure if it affects anyone in practice, though.) Now that the TCK is basically done and the clustering looks settled, the major changes should be done. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Is Resin4 considered production stable?</header>
    <date>Tue Feb 01 21:38:36 CET 2011</date>
    <body>Hello Scott, are you able to give an ETA for the .15 release? Thanks, Tero http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Is Resin4 considered production stable?</header>
    <date>Wed Feb 02 02:10:22 CET 2011</date>
    <body>We're working on it this week. It really just depends when the regressions are clean. -- Scott mailto:f...@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.1.11 comming soon?</header>
    <date>Tue Feb 01 15:32:20 CET 2011</date>
    <body>Hi What are the chances of a new release of the Resin 3.1 branch (ie. a version 3.1.11) any time soon? Bug #4349 which has affected us several times is marked as fixed in version 3.1.11.. Regards, Jens Dueholm Christensen Survey IT</body>
  </mail>
  <mail>
    <header>[Resin-interest] too many user transaction pool broken message in	log</header>
    <date>Sat Jan 29 09:18:29 CET 2011</date>
    <body>Hi, After upgrading to Resin 4.0.14, in resin.log I found too many exceptions but I've got no idea why they were thrown. When using 4.0.10 there were no such exception logs with the same webapp code. 2~4 times per seconds. 4.0.13 also have the issue. java.lang.IllegalStateException: Internal error: user transaction pool broken because poolItems exist, but no transaction is active. at com.caucho.transaction.UserTransactionImpl.abortTransaction(UserTransactionImpl.java:419) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:213) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.handleRequest(TcpSocketLink.java:685) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:665) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:613) at com.caucho.network.listen.AcceptTask.doTask(AcceptTask.java:104) at com.caucho.network.listen.ConnectionReadTask.runThread(ConnectionReadTask.java:98) at com.caucho.network.listen.ConnectionReadTask.run(ConnectionReadTask.java:81) at com.caucho.network.listen.AcceptTask.run(AcceptTask.java:67) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:164) at com.caucho.env.thread.ResinThread.run(ResinThread.java:130) -Wesley</body>
  </mail>
  <mail>
    <header>[Resin-interest] Upgrading from 4.0.12 to 4.0.14 with ojdbc failes</header>
    <date>Fri Jan 28 10:24:18 CET 2011</date>
    <body>Hi, I'm trying to upgrade one of our applications from running resin-pro-4.0.12 to resin-prod-4.0.14. However, we get an error regarding ojdbc settings. Within the &amp;lt;web-app ...&amp;gt; tag in resin.xml, we have: These files worked fine for resin-pro-4.0.12 and earlier. Now, however, we get the error message in resin-debug.log: com.caucho.sql.DBPool.init(): com.caucho.sql.SQLExceptionWrapper: com.caucho.config.ConfigException: '#text' is an unknown attribute of 'oracle.jdbc.pool. OracleConnectionPoolDataSource' The /path/to/app/conf/app-jdbc.conf is on the form: I have also tried to upgrade another app which uses ojdbc14-10.2.0.4.jar instead of ojdbc6-11.2.0.1.0.jar, but the same error occurs. Is this a bug, or is there a configuration change I have missed? Both 4.0.12 and 4.0.14 has been compiled with 64bit Java. I have also tried 4.0.13, which resulted in the same error as above. -- Halvor Utby USIT/GAP/W3D tlf: 22852972 halvor.u...@usit.uio.no</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Upgrading from 4.0.12 to 4.0.14 with ojdbc	failes</header>
    <date>Fri Jan 28 14:22:54 CET 2011</date>
    <body>Hi, Not sure what your problem is, but this syntax works for me in my tests with Resin 4.0.14 ----------- ----------- S! D. El 28/01/2011 10:22, Halvor Utby escribió: -- ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) Web Services Centre for Information and Technology Balearic Islands University (SPAIN) -------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Upgrading from 4.0.12 to 4.0.14 with	ojdbc	failes</header>
    <date>Wed Feb 02 15:14:44 CET 2011</date>
    <body>Hi, Thank you for your confirmation. After some more debugging I found that the application used the slf4j library which has been removed according the change log. After adding the libraries to the application resin-pro-4.0.14 worked fine as well. -- Halvor Utby USIT/GAP/W3D tlf: 22852972 halvor.u...@usit.uio.no</body>
  </mail>
  <mail>
    <header>[Resin-interest] Ubuntu installation</header>
    <date>Fri Jan 28 07:51:39 CET 2011</date>
    <body>I am attempting to install resin 4 on Ubuntu, and I have used the Caucho debian repository and apt-get. However now I need to compile mod-caucho and I can not find either a  source package or the configure script in the binary package. Am I missing something, or can I not use the deb package if I need to compile mod-caucho? Regards, Peter</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Ubuntu installation</header>
    <date>Fri Jan 28 22:28:13 CET 2011</date>
    <body>Peter, I had this issue as well. My solution was to build mod-caucho from source on a QA box and put it in place on my production box. -Kevin Watson Aplos Software http://www.aplossoftware.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Ubuntu installation</header>
    <date>Sat Jan 29 23:15:36 CET 2011</date>
    <body>I just tried that, and found that mod_caucho.so was not built (resin-4.0.14). I examined the Makefile.in of the apache2 module and discovered that the directive to create mod_caucho.so was commented out. Also install.sh has commented out the part that puts mod_caucho.so in the apache lib dir. I went back over that last couple of releases and they are the same. Is there another step (apart from configure and make) to produce mod_caucho.so? Regards, Peter</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Ubuntu installation</header>
    <date>Mon Jan 31 02:19:20 CET 2011</date>
    <body>Peter, I think you mistook my 'from source'. I downloaded http://www.caucho.com/download/resin-pro-4.0.14.tar.gz (the source tgz) and built just the mod_caucho.so. On my Debian Lenny x64 QA box (not ubuntu) wget http://www.caucho.com/download/resin-pro-4.0.14.tar.gz tar zxf resin-pro-4.0.14.tar.gz cd resin-pro-4.0.14 ./configure --with-java-home=/usr/lib/jvm/java-6-sun --with-apxs=/usr/bin/apxs2 cd modules/c/src/ make make install scp /usr/lib/apache2/modules/mod_caucho.so [user]@production:/home/user -Kevin Watson Aplos Software http://www.aplossoftware.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Ubuntu installation</header>
    <date>Mon Jan 31 04:37:13 CET 2011</date>
    <body>Hi Kevin, http://www.caucho.com/download/resin-pro-4.0.14.tar.gz Thanks for the clarification. It turns out the problem I had (as a linux newbie) was with the documentation. It left out the crucial step of 'make install'. Regards, Peter</body>
  </mail>
  <mail>
    <header>[Resin-interest] Moving from Hibernate - which JPA?</header>
    <date>Mon Jan 24 12:18:32 CET 2011</date>
    <body>Apologies for the basic nature of this question, but I am starting a new project and want the best (&amp;amp; most future proof) toolset I can get. So clearly I start with Resin (;-)) but I now find myself lost in a sea of competing JPA offerings, and I don't know much about them. I can only relate back to a project I did with Resin about a year ago in which I wired in Hibernate since I was familiar with it for other assignments. Now I'm starting fresh I see I could use it again - at least I'll be on familiar ground. The front end is GWT and I am particularly drawn to the new RequestFactory system since it's designed for JPA ( http://code.google.com/webtoolkit/doc/latest/DevGuideRequestFactory.html ). Whilst researching JPA systems I saw Eclipselink, which comes in the /lib folder with Resin 4.0.14. But is that how Resin implements JPA or is there a native way for which no external systems are needed? Googling "Resin JPA" throws up links to Amber - but these seem a couple years old now at aimed at Resin 3.1. My gut says Eclipselink will be well supported - how widespread is it in the field? And generally, does GWT + Eclipselink under Resin sound a good idea? Thanks...</body>
  </mail>
  <mail>
    <header>[Resin-interest] updating quercus PHP to "at least PHP 5.2.4" to	allow drupal-7.0 deployment</header>
    <date>Sun Jan 16 13:48:33 CET 2011</date>
    <body>I am using quercus-4.0.11 on tomcat. I can deploy drupal-6.20 and wordpress o.k. on quercus servlet. However when I try deploying latest download of drupal-7.0 I get the following message preventing futher progress. "Your PHP installation is too old. Drupal requires at least PHP 5.2.4. See the system requirements page for more information." Running phpinfo.php this information is returned ... Quercus PHP Version =&amp;gt; 5.2.0 System =&amp;gt; Windows Vista 6.0 x86 Build Date =&amp;gt; 20070628T2777 .... My question is .. in what quercus release will quercus be updated to "at least PHP 5.2.4" to allow drupal-7.0 deployment on tomcat server? DL</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] updating quercus PHP to "at least PHP 5.2.4" to allow drupal-7.0 deployment</header>
    <date>Sun Jan 16 16:22:42 CET 2011</date>
    <body>Hi, Please open an issue here : http://bugs.caucho.com/ http://bugs.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Is there a resin adapter for eclipse WTP	supporting servlet 3.0?</header>
    <date>Tue Jan 04 13:02:37 CET 2011</date>
    <body>Is there a resin adapter for eclipse WTP supporting servlet 3.0? Resin 4.0 supports servlet 3.0, and I want develop a servlet 3.0 application with resin, but ' http://caucho.com/eclipse/" ; can only support up to servlet 2.5. Regards, Kirby Zhou from   SOHU-RD   +86-10-6272-8261</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Is there a resin adapter for eclipse WTP	supporting servlet 3.0?</header>
    <date>Wed Jan 05 03:08:43 CET 2011</date>
    <body>Hi Kirby, Is there a resin adapter for eclipse WTP supporting servlet 3.0? Resin 4.0 supports servlet 3.0, and I want develop a servlet 3.0 application with resin, but ' http://caucho.com/eclipse/" ; can only support up to servlet 2.5. The current plugin (as installed) does not support EE6 specs. However you can make it work (on Helios) by fixing the plugin.xml file in an upgraded version. Regards, Peter id="org.eclipse.jst.server.generic.runtime.resin31" name="%resin31runtimeTypeName" description="%resin31runtimeTypeDescription" vendor="%resinCategory" version="3.1" types="jst.web" types="jst.ejb" types="jst.ear" types="jst.connector" types="jst.utility" id="org.eclipse.jst.server.generic.runtime.resin31inPlace" name="%resin31inPlaceRuntimeTypeName" description="%resin31inPlaceRuntimeTypeDescription" vendor="%resinCategory" version="3.1" types="jst.web" types="jst.ejb" types="jst.ear" types="jst.connector" types="jst.utility" class="com.caucho.resin.eclipse.ResinServerRuntime" description="%resin31tempDirRuntimeTypeDescription" id="org.eclipse.jst.server.generic.runtime.resin31tempDir" name="%resin31tempDirRuntimeTypeName" vendor="%resinCategory" types="jst.web" types="jst.ejb" types="jst.ear" types="jst.connector" types="jst.utility" id="org.eclipse.jst.server.generic.runtime.resin40" name="%resin40runtimeTypeName" description="%resin40runtimeTypeDescription" vendor="%resinCategory" version="4.0" types="jst.web" types="jst.ejb" types="jst.ear" types="jst.connector" types="jst.utility" id="org.eclipse.jst.server.generic.runtime.resin40hotDeploy" name="%resin40hotDeployRuntimeTypeName" description="%resin40hotDeployRuntimeTypeDescription" vendor="%resinCategory" version="4.0" types="jst.web" types="jst.ejb" types="jst.ear" types="jst.connector" types="jst.utility" class="com.caucho.resin.eclipse.ResinServerRuntime" description="%resin40inPlaceRuntimeTypeDescription" id="org.eclipse.jst.server.generic.runtime.resin40inPlace" name="%resin40inPlaceRuntimeTypeName" vendor="%resinCategory" types="jst.web" types="jst.ejb" types="jst.ear" types="jst.connector" types="jst.utility" class="com.caucho.resin.eclipse.ResinServerRuntime" description="%resin40tempDirRuntimeTypeDescription" id="org.eclipse.jst.server.generic.runtime.resin40tempDir" name="%resin40tempDirRuntimeTypeName" vendor="%resinCategory" types="jst.web" types="jst.ejb" types="jst.ear" types="jst.connector" types="jst.utility" behaviourClass="com.caucho.resin.eclipse.ResinServerBehaviour" class="com.caucho.resin.eclipse.ResinServer" description="%resin31serverTypeDescription" hasConfiguration="true" id="org.eclipse.jst.server.generic.resin31" initialState="stopped" launchConfigId="org.eclipse.jst.server.generic.core.launchConfigurationType" launchModes="run,debug" name="%resin31serverTypeName" runtime="true" runtimeTypeId="org.eclipse.jst.server.generic.runtime.resin31" behaviourClass="com.caucho.resin.eclipse.ResinServerBehaviour" class="com.caucho.resin.eclipse.ResinServer" description="%resin31inPlaceServerTypeDescription" hasConfiguration="true" id="org.eclipse.jst.server.generic.resin31inPlace" initialState="stopped" launchConfigId="org.eclipse.jst.server.generic.core.launchConfigurationType" launchModes="run,debug" name="%resin31inPlaceServerTypeName" runtime="true" runtimeTypeId="org.eclipse.jst.server.generic.runtime.resin31inPlace" behaviourClass="com.caucho.resin.eclipse.ResinServerBehaviour" class="com.caucho.resin.eclipse.ResinServer" description="%resin31tempDirServerTypeDescription" hasConfiguration="true" id="org.eclipse.jst.server.generic.resin31tempDir" initialState="stopped" launchConfigId="org.eclipse.jst.server.generic.core.launchConfigurationType" launchModes="run,debug" name="%resin31tempDirServerTypeName" runtime="true" runtimeTypeId="org.eclipse.jst.server.generic.runtime.resin31tempDir" behaviourClass="com.caucho.resin.eclipse.ResinServerBehaviour" class="com.caucho.resin.eclipse.ResinServer" description="%resin40serverTypeDescription" hasConfiguration="true" id="org.eclipse.jst.server.generic.resin40" initialState="stopped" launchConfigId="org.eclipse.jst.server.generic.core.launchConfigurationType" launchModes="run,debug" name="%resin40serverTypeName" runtime="true" runtimeTypeId="org.eclipse.jst.server.generic.runtime.resin40" behaviourClass="com.caucho.resin.eclipse.ResinServerBehaviour" class="com.caucho.resin.eclipse.ResinServer" description="%resin40hotDeployServerTypeDescription" hasConfiguration="true" id="org.eclipse.jst.server.generic.resin40hotDeploy" initialState="stopped" launchConfigId="org.eclipse.jst.server.generic.core.launchConfigurationType" launchModes="run,debug" name="%resin40hotDeployServerTypeName" runtime="true" runtimeTypeId="org.eclipse.jst.server.generic.runtime.resin40hotDeploy" startBeforePublish="true" behaviourClass="com.caucho.resin.eclipse.ResinServerBehaviour" class="com.caucho.resin.eclipse.ResinServer" description="%resin40inPlaceServerTypeDescription" hasConfiguration="true" id="org.eclipse.jst.server.generic.resin40inPlace" initialState="stopped" launchConfigId="org.eclipse.jst.server.generic.core.launchConfigurationType" launchModes="run,debug" name="%resin40inPlaceServerTypeName" runtime="true" runtimeTypeId="org.eclipse.jst.server.generic.runtime.resin40inPlace" behaviourClass="com.caucho.resin.eclipse.ResinServerBehaviour" class="com.caucho.resin.eclipse.ResinServer" description="%resin40tempDirServerTypeDescription" hasConfiguration="true" id="org.eclipse.jst.server.generic.resin40tempDir" initialState="stopped" launchConfigId="org.eclipse.jst.server.generic.core.launchConfigurationType" launchModes="run,debug" name="%resin40tempDirServerTypeName" runtime="true" runtimeTypeId="org.eclipse.jst.server.generic.runtime.resin40tempDir" id="org.eclipse.jst.server.generic.runtime" typeIds="org.eclipse.jst.server.generic.runtime.resin31" id="org.eclipse.jst.server.generic.server" typeIds="org.eclipse.jst.server.generic.resin31" id="org.eclipse.jst.server.generic.runtime" typeIds="org.eclipse.jst.server.generic.runtime.resin31inPlace" id="org.eclipse.jst.server.generic.server" typeIds="org.eclipse.jst.server.generic.resin31inPlace" class="org.eclipse.jst.server.generic.ui.internal.GenericServerRuntimeWizardFragment" id="org.eclipse.jst.server.generic.runtime" class="com.caucho.resin.eclipse.ResinServerWizardFragment" id="org.eclipse.jst.server.generic.server" id="org.eclipse.jst.server.generic.runtime" typeIds="org.eclipse.jst.server.generic.runtime.resin40" class="com.caucho.resin.eclipse.ResinServerWizardFragment" id="org.eclipse.jst.server.generic.server" id="org.eclipse.jst.server.generic.runtime" typeIds="org.eclipse.jst.server.generic.runtime.resin40hotDeploy" id="org.eclipse.jst.server.generic.server" typeIds="org.eclipse.jst.server.generic.resin40hotDeploy" class="org.eclipse.jst.server.generic.ui.internal.GenericServerRuntimeWizardFragment" id="org.eclipse.jst.server.generic.runtime" class="com.caucho.resin.eclipse.ResinServerWizardFragment" id="org.eclipse.jst.server.generic.server" class="org.eclipse.jst.server.generic.ui.internal.GenericServerRuntimeWizardFragment" id="org.eclipse.jst.server.generic.runtime" class="com.caucho.resin.eclipse.ResinServerWizardFragment" id="org.eclipse.jst.server.generic.server" id="org.eclipse.jst.server.generic.image" icon="icons/obj16/resin.png" id="org.eclipse.jst.server.generic.image" icon="icons/obj16/resin.png" id="org.eclipse.jst.server.generic.image" icon="icons/obj16/resin.png" id="org.eclipse.jst.server.generic.image" icon="icons/obj16/resin.png" icon="icons/obj16/resin.png" id="org.eclipse.jst.server.generic.image" icon="icons/obj16/resin.png" id="org.eclipse.jst.server.generic.image" id="org.eclipse.jst.server.generic.image" icon="icons/obj16/resin.png" id="org.eclipse.jst.server.generic.image" icon="icons/obj16/resin.png" id="org.eclipse.jst.server.generic.image" icon="icons/obj16/resin.png" id="org.eclipse.jst.server.generic.image" icon="icons/obj16/resin.png" icon="icons/obj16/resin.png" id="org.eclipse.jst.server.generic.image" icon="icons/obj16/resin.png" id="org.eclipse.jst.server.generic.image" id="org.eclipse.jst.server.generic.image" icon="icons/obj16/resin.png" id="org.eclipse.jst.server.generic.image" icon="icons/obj16/resin.png" id="org.eclipse.jst.server.generic.runtimeTarget" runtimeTypeIds="org.eclipse.jst.server.generic.runtime.resin*" type="org.eclipse.jst.server.generic.runtime.resin" type="org.eclipse.jst.server.generic.runtime.resin" id="org.eclipse.jst.server.generic.runtime.resin" id="jst.web" id="jst.ejb" id="jst.ear" id="jst.connector" id="jst.appclient" id="jst.utility" runtime-component="org.eclipse.jst.server.generic.runtime.resin" runtimeTypeId="org.eclipse.jst.server.generic.runtime.resin31" runtimeTypeId="org.eclipse.jst.server.generic.runtime.resin31inPlace" runtime-component="org.eclipse.jst.server.generic.runtime.resin" runtime-component="org.eclipse.jst.server.generic.runtime.resin" runtimeTypeId="org.eclipse.jst.server.generic.runtime.resin31tempDir" runtimeTypeId="org.eclipse.jst.server.generic.runtime.resin40" runtime-component="org.eclipse.jst.server.generic.runtime.resin" runtimeTypeId="org.eclipse.jst.server.generic.runtime.resin40hotDeploy" runtime-component="org.eclipse.jst.server.generic.runtime.resin" runtime-component="org.eclipse.jst.server.generic.runtime.resin" runtimeTypeId="org.eclipse.jst.server.generic.runtime.resin40inPlace" runtime-component="org.eclipse.jst.server.generic.runtime.resin" runtimeTypeId="org.eclipse.jst.server.generic.runtime.resin40tempDir"</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Is there a resin adapter for eclipse WTP	supporting servlet 3.0?</header>
    <date>Wed Jan 05 04:33:15 CET 2011</date>
    <body>http://caucho.com/eclipse/" ; can only support up to servlet Hi Kirby, Resin release 4.0.14 will include upgrades to the Eclipse plugin, supporting servlet 3.0. 4.0.14 is tentatively scheduled for released this Friday, 1/7. Thanks, Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>[Resin-interest] Is there any way to increase HTTP header length?</header>
    <date>Sat Jan 01 14:04:39 CET 2011</date>
    <body>I have tried to search for an answer but I have found none.  Is there a way in the configuration file to increase the maximum header length size?  I believe I am hitting this limit because when certain users try to access the page, they are receiving an ArrayIndexOutOfBoundsException.  Looking at the data being passed back and forth on the network, it seems the Negotiate header value is extremely long, and could be larger than the allowed size in Resin.  Does anyone have any insight into this? Thanks. -tj</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin 4.0 rewrite</header>
    <date>Fri Dec 31 21:37:38 CET 2010</date>
    <body>Help! If anybody is around, I need an answer soon. (Stupid time crunch!) I have a URL that I need to parse: http://example.com/page.aspx?Parameter1=foo&amp;amp;Parameter2=bar When I create the following rule, it works: But when I actually try to parse even one of the parameters like this, the rule never triggers: I know I must be doing something stupid, but how can I get it to match when there are ? or &amp;amp; in the incoming URL? Thanks!</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4.0 rewrite</header>
    <date>Fri Dec 31 21:55:08 CET 2010</date>
    <body>http://example.com/page.aspx?Parameter1=foo&amp;amp;Parameter2=bar You can try full-url-regexp="..." The standard rewrite behavior ignores parameters and only matches on the main url. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4.0 rewrite</header>
    <date>Fri Dec 31 22:03:41 CET 2010</date>
    <body>Neat. I didn't know about that option. I will give it a try. Thank you!</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4.0 rewrite</header>
    <date>Fri Dec 31 23:55:23 CET 2010</date>
    <body>That worked. Thank you! One more question. Is it possible to capture a variable and then transform it from all-lowercase to all-uppercase (or vice versa)?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4.0 rewrite</header>
    <date>Sat Jan 01 00:20:12 CET 2011</date>
    <body>Not currently. In 4.0, we could enable a custom rewrite class, where you could do custom rewriting. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4.0 rewrite</header>
    <date>Fri Dec 31 22:37:41 CET 2010</date>
    <body>Try to put the parameters in a &amp;lt;when&amp;gt; condition for query param, see http://caucho.com/resin-3.1/doc/rewrite-tags.xtp#query-param Am 31.12.2010 21:37 schrieb "AF" &amp;lt;ibi...@gmail.com&amp;gt;: http://example.com/page.aspx?Parameter1=foo&amp;amp;Parameter2=bar</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0.13 restarting without any reason</header>
    <date>Thu Dec 30 10:55:26 CET 2010</date>
    <body>Hello I've just installed 4.0.13 on linux debian x86 and the application seems to work all right I don't understand why every 10 or 20 minutes, the server restarts alone, with no particular reason (it seems to be in period of no activity at all) with version 4.0.10 it did not have this problem. Thanks for any help -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.13 restarting without any reason -	precisions</header>
    <date>Thu Dec 30 17:23:15 CET 2010</date>
    <body>I found no problem running the same resin/eclipselink and the same application on macosx. jvm log (fine) says nothing special except at one moment I had thousands lines of stack trace starting with using cache: /adl/js/mootools-1.2.1-core.js from ProxyCacheRequest[HttpServletRequestImpl[HttpRequest[my1, 5]]] using cache: /adl/js/mootools-1.2.1-core.js from ProxyCacheRequest[HttpServletRequestImpl[HttpRequest[my1, 5]]] using cache: /adl/js/mootools-1.2.1-core.js from ProxyCacheRequest[HttpServletRequestImpl[HttpRequest[my1, 5]]] using cache: /adl/js/mootools-1.2.1-core.js from ProxyCacheRequest[HttpServletRequestImpl[HttpRequest[my1, 5]]] using cache: /adl/js/mootools-1.2.1-core.js from ProxyCacheRequest[HttpServletRequestImpl[HttpRequest[my1, 5]]] using cache: /adl/js/mootools-1.2.1-core.js from ProxyCacheRequest[HttpServletRequestImpl[HttpRequest[my1, 5]]] using cache: /adl/js/mootools-1.2.1-core.js from ProxyCacheRequest[HttpServletRequestImpl[HttpRequest[my1, 5]]] java.lang.Exception: Stack trace at java.lang.Thread.dumpStack(Thread.java:1206) at com.caucho.db.block.Block.allocate(Block.java:204) at com.caucho.db.block.BlockManager.getBlock(BlockManager.java:245) at com.caucho.db.block.BlockStore.readBlock(BlockStore.java:479) at com.caucho.db.block.BlockStore.readBlock(BlockStore.java:915) at com.caucho.server.cache.ProxyCacheInode.writeToStream(ProxyCacheInode.java:113) at com.caucho.server.cache.ProxyCacheInode.writeToStream(ProxyCacheInode.java:86) at com.caucho.server.cache.ProxyCacheFilterChain.fillFromCache(ProxyCacheFilterChain.java:504) at com.caucho.server.cache.ProxyCacheResponse.writeHeaders(ProxyCacheResponse.java:155) at com.caucho.server.http.ResponseStream.writeHeaders(ResponseStream.java:279) at com.caucho.server.http.HttpResponseStream.writeHeaders(HttpResponseStream.java:82) at com.caucho.server.http.ToByteResponseStream.write(ToByteResponseStream.java:337) at com.caucho.db.block.BlockStore.readBlock(BlockStore.java:924) at com.caucho.server.cache.ProxyCacheInode.writeToStream(ProxyCacheInode.java:113) at com.caucho.server.cache.ProxyCacheInode.writeToStream(ProxyCacheInode.java:86) at com.caucho.server.cache.ProxyCacheFilterChain.fillFromCache(ProxyCacheFilterChain.java:504) at com.caucho.server.cache.ProxyCacheResponse.writeHeaders(ProxyCacheResponse.java:155) at com.caucho.server.http.ResponseStream.writeHeaders(ResponseStream.java:279) at com.caucho.server.http.HttpResponseStream.writeHeaders(HttpResponseStream.java:82) at com.caucho.server.http.ToByteResponseStream.write(ToByteResponseStream.java:337) at com.caucho.db.block.BlockStore.readBlock(BlockStore.java:924) at com.caucho.server.cache.ProxyCacheInode.writeToStream(ProxyCacheInode.java:113) at com.caucho.server.cache.ProxyCacheInode.writeToStream(ProxyCacheInode.java:86) at com.caucho.server.cache.ProxyCacheFilterChain.fillFromCache(ProxyCacheFilterChain.java:504) at com.caucho.server.cache.ProxyCacheResponse.writeHeaders(ProxyCacheResponse.java:155) at com.caucho.server.http.ResponseStream.writeHeaders(ResponseStream.java:279) at com.caucho.server.http.HttpResponseStream.writeHeaders(HttpResponseStream.java:82) at com.caucho.server.http.ToByteResponseStream.write(ToByteResponseStream.java:337) at com.caucho.db.block.BlockStore.readBlock(BlockStore.java:924) at com.caucho.server.cache.ProxyCacheInode.writeToStream(ProxyCacheInode.java:113) at com.caucho.server.cache.ProxyCacheInode.writeToStream(ProxyCacheInode.java:86) at com.caucho.server.cache.ProxyCacheFilterChain.fillFromCache(ProxyCacheFilterChain.java:504) at com.caucho.server.cache.ProxyCacheResponse.writeHeaders(ProxyCacheResponse.java:155) at com.caucho.server.http.ResponseStream.writeHeaders(ResponseStream.java:279) at com.caucho.server.http.HttpResponseStream.writeHeaders(HttpResponseStream.java:82) at com.caucho.server.http.ToByteResponseStream.write(ToByteResponseStream.java:337) during several minutes, ending with a restart... This seems to be the cause of the restart Thanks for your help -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.13 restarting without any reason	-	precisions</header>
    <date>Fri Dec 31 02:49:50 CET 2010</date>
    <body>As a workaround, please disable the cache by removing the &amp;lt;cache/&amp;gt; item from resin.xml. It looks like a recursion problem inside the cache. -- Scott using cache: using cache: using cache: using cache: using cache: using cache: using cache:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.13 restarting without any	reason	-	precisions</header>
    <date>Fri Dec 31 15:01:16 CET 2010</date>
    <body>Hello Scott, Thanks for your answer. I commented all "cache" in both web-tier and app-tier resin.xml, this seams to solve the speed problem on files, and also the restart problem. Thanks a lot. using cache: using cache: using cache: using cache: using cache: using cache: using cache: http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr BP 77536 37075 Tours Cedex 2 +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] compile 4.0.15 : missing /usr/include/gnu/stubs.h	on a x86-64 machine</header>
    <date>Thu Dec 30 06:25:33 CET 2010</date>
    <body>I have two CentOS 5.4 machines , one is i686 , another is x86-64 4.0.15 installs successfully on i686 machine. (with stubs-32.h in /usr/include/gnu) But , when compiling 4.0.15 on x86_64 machine (with stubs-64.h in /usr/include/gnu) I got file missing error : /usr/include/gnu/stubs.h:7:27 , no such file or directory</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] compile 4.0.15 : missing	/usr/include/gnu/stubs.h on a x86-64 machine</header>
    <date>Thu Dec 30 06:32:08 CET 2010</date>
    <body>sorry , typo , I mean 4.0.13</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] compile 4.0.15 : missing	/usr/include/gnu/stubs.h on a x86-64 machine</header>
    <date>Fri Dec 31 02:54:06 CET 2010</date>
    <body>I assume you reran ./configure on both machines? That compilation should be part of the generic automake/configure build process. (i.e. we're not doing anything specific for that include file.) -- Scott mailto:small...@gmail.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Japanese multibyte character path of resin.jar	cause Exception in 4.0.13.</header>
    <date>Tue Dec 28 15:23:28 CET 2010</date>
    <body>If resin.jar is put on a Japanese multi byte character directory and launched, then the following error is shown and cannot launch. I think this is not only limited to the Japanese multibyte environment but other multibyte character environment. I tested with the following steps: On Windows command prompt: com.caucho.config.ConfigException: java.io.FileNotFoundException: C:\tmp\縺ゅ＞ 縺?∴縺?\win\resin\lib\resin.jar (指定されたパスが見つかりません。) at com.caucho.config.LineConfigException.create(LineConfigException.java :163) at com.caucho.config.Config.configure(Config.java:240) at com.caucho.boot.ResinBoot.&amp;lt;init&amp;gt;(ResinBoot.java:150) at com.caucho.boot.ResinBoot.main(ResinBoot.java:348) Caused by: java.io.FileNotFoundException: C:\tmp\縺ゅ＞縺?∴縺?\win\resin\lib\re sin.jar (指定されたパスが見つかりません。) at java.util.zip.ZipFile.open(Native Method) at java.util.zip.ZipFile.&amp;lt;init&amp;gt;(Unknown Source) at java.util.zip.ZipFile.&amp;lt;init&amp;gt;(Unknown Source) at com.caucho.vfs.Jar.openReadImpl(Jar.java:469) at com.caucho.vfs.JarPath.openReadImpl(JarPath.java:211) at com.caucho.vfs.Path.openRead(Path.java:1120) at com.caucho.relaxng.CompactVerifierFactoryImpl.compileSchema(CompactVe rifierFactoryImpl.java:89) at com.caucho.config.Config.findCompactSchema(Config.java:491) at com.caucho.config.Config.configure(Config.java:232) ... 2 more java.io.FileNotFoundException: C:\tmp\縺ゅ＞縺?∴縺?\win\resin\lib\resin.jar (指 定されたパスが見つかりません。) If the path is changed to another path without multibyte character path (e.g. \tmp\abced), then launch correct. Thus, the configuration of resin itself is correct. The tested environment is: OS: Windows 7 Resin: resin 4.0.13 Does anyone can inform me how to run resin.jar with multibyte character path? Best regards, masa naga</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Japanese multibyte character path of resin.jar	cause Exception in 4.0.13.</header>
    <date>Tue Dec 28 17:49:46 CET 2010</date>
    <body>Resin jar loading depends on using URLDecoder.decode, with the default platform encoding. It appears your platform encoding is not handling the multibyte characters properly. Trying starting resin with -Dfile.encoding=UTF8.  I tested this on my system and it fixed the issue for me, although I saw a slightly different error that you reported. -Paul http://maillist.caucho.com/mailman/listinfo/resin-interest =============================== Paul Cowan, Software Engineer Caucho Technology co...@caucho.com http://blog.caucho.com http://twitter.com/cauchoresin</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Japanese multibyte character path of resin.jar	cause Exception in 4.0.13.</header>
    <date>Wed Jan 05 02:25:21 CET 2011</date>
    <body>Dear Paul, Thank you! Your solution perfectly solved my problem. Best regards, masa naga 2010年12月28日23:22  &amp;lt;re...@tatujin.org&amp;gt;:</body>
  </mail>
  <mail>
    <header>[Resin-interest] access log request time not accurate?</header>
    <date>Thu Jan 13 04:36:33 CET 2011</date>
    <body>Hi,all I have a web app running on Resin 3.18 with apache 2 (by mod_caucho). When I stat the request time, Apache access log report about 300ms, Resin access log report about 500ms Jsp also report about 300ms (by timestamps on header and footer of jsp) Resin.conf like this: The "%D" get the time (by microseconds). Has anyone seen this behaviour before, and any suggest? Thanks zhen.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.13 - quercus issue</header>
    <date>Sun Dec 19 04:24:33 CET 2010</date>
    <body>I upgraded from Resin 4.0.10 to 4.0.13 and suddenly my WordPress blog was broken. WordPress complains that my database was corrupt so I tried creating a brand new database and WordPress through tons of errors claiming the SQL statements were bad. I then installed Resin 4.0.12 at which point I could successfully install a new database and also use my existing WordPress database. My only guess is there is something wrong with Quercus in 4.0.13. Anyone having similar Quercus issues in 4.0.13? matt</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 2.1.17 - site takes three attempts to load	fully</header>
    <date>Tue Dec 14 17:07:30 CET 2010</date>
    <body>Hi, I have an old web app running on Resin 2.1.17 (I know, but I have no opportunity to upgrade and update the app). When the app loads I get this behaviour: Initial load: The jsp loads but only the text diplays; no css, no images Page Refresh 1: The images load Page Refresh 2: The css loads After refresh two the site is loaded and cached and all works as expected. The site always takes three page load attempts to fully load, this is consistent and repeatable. The install is an out-of-the-box 2.1.17 install downloaded from Caucho.com. No configuration or customisation has been made. Has anyone seen this behaviour before, and can anyone suggest how I can fix it please? Thanks Darren.</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0.14 release time frame?</header>
    <date>Thu Dec 09 17:48:25 CET 2010</date>
    <body>Is there any chance that 4.0.14 will be released this month? I'm specifically interested in the fix for bug &lt;span class="Apple-style-span" style="border-collapse: separate; color: line-height: normal; orphans: 2; text-indent: 0px; text-transform: font-size: medium;"&gt; font-size: 13px; text-align: left;"&gt; 4284 Thanks, -Brian</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.14 release time frame?</header>
    <date>Thu Dec 09 18:29:24 CET 2010</date>
    <body>The holidays make the schedule a bit complicated, but we need about another week for the TCK work and then a following week for our own QA regression/load testing. That would put the release in December. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] session persistence</header>
    <date>Wed Dec 08 19:44:35 CET 2010</date>
    <body>Hey, Am migrating from resin 3.1.3 to resin 4.x.. I have a professional license for the same. i have issues in saving session data to mysql database. Read somewhere that resin 4 does not support jdbc for persistence store. Is this the case? Also, if yes, whats the reason of not supporting this. Am aware if can store this using cluster configuration; but would like it in the db. Thanks, -- Anooj Narvekar</body>
  </mail>
  <mail>
    <header>[Resin-interest] Can XDebug (PHP) be used in quercus?</header>
    <date>Mon Dec 06 13:09:20 CET 2010</date>
    <body>XDebug works fine in my standard Apache + PHP (non quercus) configuration. I have XDebug extension (php_debug-2.0.3-5.2.5.dll in c:\php\ext\) but for Apache + PHP. Local php.ini (copied from my Apache php.ini) is in the Web-Inf/php.ini path referred to by quercus. XDebug extension (php_debug-2.0.3-5.2.5.dll from http://www.xdebug.org/ ) is probably not even recognised by quercus since it is a dll . Incidentally there are spaces in the php.ini path printed out by phpinfo.php since I have Tomcat running in this path ... "c:\Program Files\Apache Software Foundation\Tomcat 6.0\.....    \php.ini" Can I somehow use XDebug when using quercus servlet embedded in tomcat webapp? Is there a java equivalent of XDebug (for PHP)? I've found very little about XDebug PHP (other than the Java Xdebug variant) in caucho forums.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can XDebug (PHP) be used in quercus?</header>
    <date>Tue Dec 07 13:14:39 CET 2010</date>
    <body>I can answer my own question by confirming that there is no way of using XDebug (PHP) in Quercus.   This comes from the XDebug author .. "Xdebug ties really deeply into the PHP Engine. Doing it again for Quercus means a whole new software package (in Java I presume)". So the second question remains .. Is there an XDebug equivalent in java? DL http://www.xdebug.org/ ) is</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can XDebug (PHP) be used in quercus?</header>
    <date>Tue Dec 07 13:21:06 CET 2010</date>
    <body>You can try to debug your PHP app by using Debug mode of your application server. For example, I use Glassfish in Debug mode and I attach a debugger to debug quercus and, by extension, php scripts (yes, it's ugly). Kevin Decherf - M: +33 681194547 Office &amp;amp; Production Manager, Clever Cloud SAS http://www.xdebug.org/ ) is probably not http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can XDebug (PHP) be used in quercus?</header>
    <date>Tue Dec 07 18:09:17 CET 2010</date>
    <body>We're looking at approaching that issue from a different direction. Since Quercus is Java, eclipse can debug it as a Java program, and should already have the .php to .class line numbers. What we need to add is the hooks in eclipse to let it pretty-print the PHP objects as PHP values instead of the underlying Java implementation. haven't actually implemented it yet. Once we get that working, debugging using eclipse should be very similar to debugging Java. (We'd be thrilled, of course, if anyone wants to explore prototyping that idea, since the eclipse plugin would be separate from the main Quercus code base.) -- Scott http://www.xdebug.org/ ) is probably not http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Urgent problem with EclipseLink / 4.0.13</header>
    <date>Sat Dec 04 22:32:40 CET 2010</date>
    <body>Hello I have read here that 4.0.13 should pass ejb tests, I downloaded it and run all my unit test with it : Success ! I have spent several hours to change my "persist/commit" strategy, because eclipselink do not provide autoincrement value after persist(), but only after commit() (while amber did give the autoincrement value after persist) Now the application is modified, I try to run it and have the same error at startup as last july with 4.0.9 (see http://www.mail-archive.com/resin-interest@caucho.com/msg04790.html ) [EL Severe]: 2010-12-04 21:12:01.979--ServerSession(12092488)--Local Exception Stack: Exception [EclipseLink-7215] (Eclipse Persistence Services - 2.0.0.v20091127-r5931): org.eclipse.persistence.exceptions.ValidationException Exception Description: Could not load the field named [textde] on the class [class msentities.Myalbum_]. Ensure there is a corresponding field with that name defined on the class. Internal Exception: java.lang.IllegalAccessException: Class org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl can not access a member of class msentities.Myalbum_ with modifiers "private" at org.eclipse.persistence.exceptions.ValidationException.invalidFieldForClass(ValidationException.java:2562) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.initializeCanonicalMetamodel(EntityManagerSetupImpl.java:1971) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.getMetamodel(EntityManagerSetupImpl.java:1941) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:385) at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getServerSession(EntityManagerFactoryImpl.java:151) at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:207) at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:202) at com.caucho.env.jpa.EntityManagerJtaProxy.createEntityManager(EntityManagerJtaProxy.java:915) at com.caucho.env.jpa.EntityManagerJtaProxy.createQuery(EntityManagerJtaProxy.java:640) at ms.Globalaction.init(Globalaction.java:132) at javax.servlet.GenericServlet.init(GenericServlet.java:70) at com.caucho.server.dispatch.ServletConfigImpl.createServletImpl(ServletConfigImpl.java:1342) at com.caucho.server.dispatch.ServletConfigImpl.createServlet(ServletConfigImpl.java:1191) at com.caucho.server.dispatch.ServletManager.init(ServletManager.java:232) at com.caucho.server.webapp.WebApp.start(WebApp.java:3164) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:616) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:77) at com.caucho.env.deploy.DeployController.startOnInit(DeployController.java:479) at com.caucho.env.deploy.DeployContainer.start(DeployContainer.java:171) at com.caucho.server.webapp.WebAppContainer.start(WebAppContainer.java:712) at com.caucho.server.host.Host.start(Host.java:674) at com.caucho.env.deploy.DeployController.startImpl(DeployController.java:616) at com.caucho.env.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:77) at com.caucho.env.deploy.DeployController.startOnInit(DeployController.java:479) at com.caucho.env.deploy.DeployContainer.start(DeployContainer.java:171) at com.caucho.server.host.HostContainer.start(HostContainer.java:542) at com.caucho.server.cluster.Server.start(Server.java:1200) at com.caucho.server.cluster.ServletService.start(ServletService.java:63) at com.caucho.env.service.ResinSystem.startServices(ResinSystem.java:471) at com.caucho.env.service.ResinSystem.start(ResinSystem.java:443) at com.caucho.server.resin.Resin.start(Resin.java:882) at com.caucho.server.resin.Resin.initMain(Resin.java:1011) at com.caucho.server.resin.Resin.main(Resin.java:1285) The field "textde" is present in the class, and I cannot reproduce this error on a small sample. I don't understand what it is about. My code is in an unstable state, and I need some help to solve that. Thanks a lot. -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin-interest Digest, Vol 54,	Issue 2     quercus and orbeon</header>
    <date>Sat Dec 04 21:11:49 CET 2010</date>
    <body>http://www.google.com http://maillist.caucho.com/mailman/listinfo/resin-interest ------------------------------------------------------------------------------------------ Thanks for spotting that basic error .. although single quotes seemed to work o.k. in Apache + PHP I can now take it forward and test integration of quercus into orbeon xforms for dynamic xform creation. http://www.orbeon.com The quercus php code is run in /xforms-php/ folder created .. similar to /xforms-jsp/ I did try to pre-process php code embedded inside orbeon xhtml code but I can't get that to work.   The quercus php interpreter doesn't kick in if apps are in /resources/apps/ They first go through Form Runner which expects xml format output. So the next best thing is to create xhtml and other xforms files from a php only environment in /xforms-php/) which are then run ... although I know that will create session and caching problems.   It is intended to be used more in an IDE environment to create new xforms templates. I would still prefer to have php code pre-processed inside xhtml xforms rather than having to rewrite the extire xhtml file. Take a look at the resources/apps/xforms-sandbox/samples/ and the question is how can php code be embedded in any of the example xhtml files and then run dynamically through orbeon server? An example of an xforms app call is http://localhost:8080/orbeon-CE/xforms-sandbox/sample/fibonacci Can fibonnaci.xhtml (or other sample applications) have a php snippet embedded to be rendered in XForms Viewer? [Note .. the .xhtml suffix is dropped by the page-flow-controller]. .... These are the steps I have taken so far  .. (might be a few others I've overlooked) *   downloaded orbeon-CE.war to place in tomcat webapp *   copied quercus.jar and resin-util.jar into orbeon-CE Web-Inf/lib directory *   in orbeon-CE Web-inf/config        enable properties-local.xml *   in properties-local.xml enable xforms.inspector:- http://sites.google.com/a/orbeon.com/forms/doc/developer-guide/xforms-xforms-inspector *   create /xforms-php/ folder at same level as /xforms-jsp/ folder.   Insert phpinfo.php and test. http://localhost:8080/orbeon-CE/xforms-php/phpinfo.php *   go to Web-inf/web.xml and add .. ......... I guess another option to try might be to run orbeon-CE as a webapp on resin server to get the benefit of quercus with xforms. dl</body>
  </mail>
  <mail>
    <header>[Resin-interest] header('Location: $url')  in quercus ..</header>
    <date>Fri Dec 03 22:43:29 CET 2010</date>
    <body>I have integrated quercus into another tomcat webapp - orbeon - which is an xforms server. I am trying to use the quercus servlet integrated with orbeon servlet to dynamically write xhtml files immediately before they are run by the orbeon xforms server one way I'm trying is to use quercus php to write *.xhtml format into an xforms sandbox and then after creating the file redirect browser to run the freshly created xhtml file. this code below works when tested separately in Apache php server. A simple text string (later to be more complex xhtml format) is written into a file in another directory .. and then browser should redirect to $url .. but why does this not redirect in quercus? It seems that header('Location: $url'); is not working in quercus. [code] fwrite($fp, $your_data);              // this file create works o.k. in quercus $url = ' http://www.google.com header('Location: $url');              // this is not working in quercus embedded in orbeon [/code] dl</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] header('Location: $url')  in quercus ..</header>
    <date>Fri Dec 03 22:50:33 CET 2010</date>
    <body>You need to use double quotes in PHP to get variable interpolation: Single quoted strings don't interpolate variables. -- Scott http://www.google.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0.13 class loaders</header>
    <date>Thu Dec 02 18:17:44 CET 2010</date>
    <body>Below are some snippets from my resin.xml. Inside the ord.weblib directory we have log4j-1.2.14.jar. For every Resin 4 version up through 4.0.12 this seems to load the log4j library into the classpath for all of my web applications. However, in 4.0.13 I get WEB-INF/web.xml:14: com.caucho.server.dispatch.ServletConfigImpl.setServletClass(): Should this work in 4.0.13? Is it a bug or a new restriction? How can I load common jars into each web application without actually including them in the web application (e.g. WEB-INF/lib)? http://caucho.com/ns/resin" ... _______________________________________________________ Matthew Serrano - Director of Engineering Pearson Knowledge Technologies - Ordinate Corporation 299 S. California Ave Suite 300 Palo Alto, CA 94306 650 470 3600 650 470 3533 (direct) mserr...@pearsonkt.com www.ordinate.com www.pearson.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.13 class loaders</header>
    <date>Thu Dec 02 18:29:45 CET 2010</date>
    <body>We mistakenly added that jar in 4.0.13, thinking it was an eclipselink dependency, but slf4j doesn't behave well when placed in the global classloader. -- Scott http://caucho.com/ns/resin" mailto:mserr...@pearsonkt.com http://www.ordinate.com http://www.pearson.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.13 class loaders</header>
    <date>Thu Dec 02 18:38:24 CET 2010</date>
    <body>That seemed to fix it. Thanks Scott. I have also noticed placing log4j in the global classpath (e.g. ext-lib) causes some strange behavior like only one instance of logger is configured and all my apps end up logging with the same config. This is why I placed log4j in the web-app-default in the first place which works great. matt http://caucho.com/ns/resin" mailto:mserr...@pearsonkt.com http://www.ordinate.com http://www.pearson.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.13 class loaders</header>
    <date>Mon Dec 13 21:02:41 CET 2010</date>
    <body>Scott, I am getting this error again with the latest Resin Pro 4.0.13. I removed the slf4j jar from the lib folder but error continues. I thought your fix worked so I can only assume I had verified it on the open source version of 13 and pro is somehow different. Any ideas? matt http://caucho.com/ns/resin" mailto:mserr...@pearsonkt.com http://www.ordinate.com http://www.pearson.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] InjectManager._selfBeanMap should be	ConcurrentHashMap?</header>
    <date>Mon Nov 29 19:38:07 CET 2010</date>
    <body>2010-11-30 02:35:13.697 ERROR [Thread-48] c.b.c.j.MessageReceiverDaemon - java.util.ConcurrentModificationException at java.util.HashMap$HashIterator.nextEntry(HashMap.java:977) at java.util.HashMap$KeyIterator.next(HashMap.java:1012) at java.util.HashMap.buildCache(HashMap.java:590) at java.util.HashMap.resize(HashMap.java:576) at java.util.HashMap.addEntry(HashMap.java:939) at java.util.HashMap.put(HashMap.java:477) at com.caucho.config.inject.InjectManager.addBeanByType(InjectManager.java:720) at com.caucho.config.inject.InjectManager.addBeanByType(InjectManager.java:697) at com.caucho.config.inject.InjectManager.addBeanImpl(InjectManager.java:1205) at com.caucho.config.inject.InjectManager.addBean(InjectManager.java:1163) at com.caucho.config.inject.InjectManager.addBean(InjectManager.java:1133) at com.caucho.config.inject.InjectManager.addDiscoveredBean(InjectManager.java:3156) at com.caucho.config.inject.InjectManager.discoverBeanImpl(InjectManager.java:3128) at com.caucho.config.inject.InjectManager.processPendingAnnotatedTypes(InjectManager.java:2868) at com.caucho.config.inject.InjectManager.fillByType(InjectManager.java:1540) at com.caucho.config.inject.InjectManager.access$200(InjectManager.java:158) at com.caucho.config.inject.InjectManager$FillByType.apply(InjectManager.java:3929) at com.caucho.loader.EnvironmentClassLoader.applyVisibleModules(EnvironmentClassLoader.java:703) at com.caucho.config.inject.InjectManager.getWebComponent(InjectManager.java:1505) at com.caucho.config.inject.InjectManager.resolveRec(InjectManager.java:1369) at com.caucho.config.inject.InjectManager.resolve(InjectManager.java:1360) at com.caucho.config.inject.InjectManager.getBeans(InjectManager.java:1308) at mdi.java.factory.MDIObjectFactory.buildBean(MDIObjectFactory.java:121) at com.buysou.cms.jms.MessageDestinationStore$DefaultMessageReceivedCallback.onReceive(MessageDestinationStore.java:168) at com.buysou.cms.jms.MessageReceiverDaemon.start(MessageReceiverDaemon.java:61) at com.buysou.cms.jms.MessageReceiverDaemon.run(MessageReceiverDaemon.java:42) at java.lang.Thread.run(Thread.java:619)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] InjectManager._selfBeanMap should be	ConcurrentHashMap?</header>
    <date>Mon Nov 29 19:39:12 CET 2010</date>
    <body>Or this method sync the wrong map? private Set&amp;lt;Bean&amp;lt;?&amp;gt;&amp;gt; resolveAllBeans() maybe should synchronized (_selfBeanMap) instead. -Wesley 2010/11/30 Wesley Wu &amp;lt;wumen...@gmail.com&amp;gt;:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] InjectManager._selfBeanMap should	be	ConcurrentHashMap?</header>
    <date>Tue Nov 30 01:43:37 CET 2010</date>
    <body>Thanks. I've fixed it for the next release (changing to ConcurrentHashMap) - Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] InjectManager._selfBeanMap should be	ConcurrentHashMap?</header>
    <date>Tue Nov 30 14:20:36 CET 2010</date>
    <body>Thanks, Scott. Would you give out a snapshot and I will do some stress test on it. -Wesley 2010/11/30 Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Performance issue with Resin Eclipse Plugin Solved</header>
    <date>Thu Nov 18 21:18:58 CET 2010</date>
    <body>So we were having all kinds of performance issues with the Resin Eclipse plugin (which may or may not be supported, but we use it like crazy now). The performance problem we were all having is that every time we would change some JSP source, we would have to wait WAY too long for the JSP to recompile.  It was painful, but we have been living with it. After much head scratching one of our guys figured out that when you set up a new server, there is a default setting that is causing the problem.  This may be well documented, but three of us independently couldn't Google a resolution, so I thought I'd post it here. Arguments tab, this VM argument is set by default: -Djava.library.path="C:/[path-to-resin]/resin-pro-4.0.x/libexec:C:/[path-to-resin]/resin-pro-4.0.x/libexec64" We always ignored that.  Turns out that's the problem. For windows 64-bit machines change that to: -Djava.library.path="C:/[path-to-resin]/resin-pro-4.0.x/win64" And for 32-bit machines change it to: -Djava.library.path="C:/[path-to-resin]/resin-pro-4.0.x/win32" Presto it all starts compiling very quickly, as it should. This may be obvious, and nobody else but us are stupid enough not to swap that out, but we just let the defaults be what they are and it bit us. -Aaron</body>
  </mail>
  <mail>
    <header>[Resin-interest] Hudson on Resin 4.0.12</header>
    <date>Thu Nov 18 10:22:22 CET 2010</date>
    <body>Has anyone been able to run Hudson [1] on Resin 4.0.12...? It's running just fine on 4.0.10, but when accessing the main page / context root under 4.0.12, a directory listing of the root of the WAR is sent with Content-Type application/octet-stream Accessing sub pages, such as /manage, seems to work fine. 1: http://hudson-ci.org/ --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hudson on Resin 4.0.12</header>
    <date>Mon Nov 22 07:41:26 CET 2010</date>
    <body>Never got an answer so I posted a bug at http://bugs.caucho.com/view.php?id=4301 Mattias Jiderhamn wrote (2010-11-18 10:20): http://hudson-ci.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hudson on Resin 4.0.12</header>
    <date>Mon Nov 22 17:37:50 CET 2010</date>
    <body>http://bugs.caucho.com/view.php?id=4301 Thanks Mattias. It's something we need to look at. It sounds like it's related to the welcome-file processing. -- Scott http://hudson-ci.org http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin-interest Digest, Vol 53, Issue 7</header>
    <date>Sat Nov 13 21:11:44 CET 2010</date>
    <body>Unsubscribe Send resin-interest mailing list submissions to resin-interest@caucho.com To subscribe or unsubscribe via the World Wide Web, visit http://maillist.caucho.com/mailman/listinfo/resin-interest or, via email, send a message with subject or body 'help' to resin-interest-requ...@caucho.com You can reach the person managing the list at resin-interest-ow...@caucho.com When replying, please edit your Subject line so it is more specific than "Re: Contents of resin-interest digest..." Today's Topics: 1. configure error on mac for 4.0.13 (Riccardo Cohen) ---------------------------------------------------------------------- Message: 1 Date: Sat, 13 Nov 2010 13:15:03 +0100 Subject: [Resin-interest] configure error on mac for 4.0.13 To: General Discussion for the Resin application server Content-Type: text/plain; charset=UTF-8; format=flowed Hello I try to compile resin 4.0.13 pro on macosx 10.6.4 intel Here is the error during ./configure : configure: error: *** Can't find JNI directory in JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home *** JNI is expected in /System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home/include/ In configure script there is a test -r "$JAVA_HOME/../Headers/jni_md.h" and this actually won't work because /System/Library/Frameworks/JavaVM.framework/Headers/jni_md.h exists but is a soft link within a directory which is a soft link : lrwxr-xr-x  1 root  wheel  33 24 jul 16:15 ../../CurrentJDK/Headers/jni_md.h lrwxr-xr-x  1 root  wheel  24 25 oct 08:50 Versions/Current/Headers So replacing test -r by test -L should normally work, but actually it won't, because : 0 all right without /../, BUT : /System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home/../Headers/jni_md.h 1 fails with the /../ For the moment I replaced with full path hardcoded Same problem for JVMTI except that the test -L will work. Now configure is all right but make as an error : Makefile:283: warning: overriding commands for target `modules/c/src/Makefile' Makefile:273: warning: ignoring old commands for target `modules/c/src/Makefile' aclocal: couldn't open directory `m4': No such file or directory make: *** [aclocal.m4] Error 1 I don't know how to solve this one. Thanks for your help. For information, there was no error in 4.0.10 -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du r?seau http://www.reflexe-conseil-centre.org ------------------------------</body>
  </mail>
  <mail>
    <header>[Resin-interest] configure error on mac for 4.0.13</header>
    <date>Sat Nov 13 13:16:04 CET 2010</date>
    <body>Hello I try to compile resin 4.0.13 pro on macosx 10.6.4 intel Here is the error during ./configure : configure: error: *** Can't find JNI directory in JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home *** JNI is expected in /System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home/include/ In configure script there is a test -r "$JAVA_HOME/../Headers/jni_md.h" and this actually won't work because /System/Library/Frameworks/JavaVM.framework/Headers/jni_md.h exists but is a soft link within a directory which is a soft link : lrwxr-xr-x  1 root  wheel  33 24 jul 16:15 ../../CurrentJDK/Headers/jni_md.h lrwxr-xr-x  1 root  wheel  24 25 oct 08:50 Versions/Current/Headers So replacing test -r by test -L should normally work, but actually it won't, because : 0 all right without /../, BUT : /System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home/../Headers/jni_md.h 1 fails with the /../ For the moment I replaced with full path hardcoded Same problem for JVMTI except that the test -L will work. Now configure is all right but make as an error : Makefile:283: warning: overriding commands for target `modules/c/src/Makefile' Makefile:273: warning: ignoring old commands for target `modules/c/src/Makefile' aclocal: couldn't open directory `m4': No such file or directory make: *** [aclocal.m4] Error 1 I don't know how to solve this one. Thanks for your help. For information, there was no error in 4.0.10 -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] configure error on mac for 4.0.13</header>
    <date>Sun Nov 14 02:22:39 CET 2010</date>
    <body>Are you running JavaForMacOSX10.6  Update3 ? If so, update 3 removed the jvmti.h on my machine when I installed it. The soft-links exist but they point nowhere. I filed a bug with apple, and you can file one too if you can't see and vote: http://alturl.com/7je6e https://bugreport.apple.com/cgi-bin/WebObjects/RadarWeb.woa/12/wo/Z8gO7kmC3Cif9j23CAoM8M/5.83.28.0.9 Thanks, Alex http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] configure error on mac for 4.0.13</header>
    <date>Sun Nov 14 11:11:18 CET 2010</date>
    <body>Hi Alex, thanks for your help I use the native java installed: java version "1.6.0_22" Java(TM) SE Runtime Environment (build 1.6.0_22-b04-307-10M3261) Java HotSpot(TM) Client VM (build 17.1-b03-307, mixed mode) Actually you are right, the soft link send to a directory that does not exists : in /System/Library/Frameworks/JavaVM.framework/Versions/Current/Headers/ jni_md.h -&amp;gt; ../../CurrentJDK/Headers/jni_md.h jvmti.h -&amp;gt; ../../CurrentJDK/Headers/jvmti.h and there is no in /System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Headers directory... I clicked on both your links but there is an error with a white page... Should I be connected to apple dev account ? On the other hand, the jvmti.h is present in /System/Library/Frameworks/JavaVM.framework/Headers, and writing it hardcoded in the script will make the configure script work. The make problem does not seem to be related with java but with m4. Thanks a lot http://alturl.com/7je6e https://bugreport.apple.com/cgi-bin/WebObjects/RadarWeb.woa/12/wo/Z8gO7kmC3Cif9j23CAoM8M/5.83.28.0.9 http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] configure error on mac for 4.0.13</header>
    <date>Sun Nov 14 19:36:08 CET 2010</date>
    <body>You now have to also install the developer package... http://lookfirst.com/2010/10/how-to-fix-missing-source-for-latest.html thanks apple. jon On Sun, Nov 14, 2010 at 2:10 AM, Riccardo Cohen http://alturl.com/7je6e https://bugreport.apple.com/cgi-bin/WebObjects/RadarWeb.woa/12/wo/Z8gO7kmC3Cif9j23CAoM8M/5.83.28.0.9 http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] configure error on mac for 4.0.13</header>
    <date>Sun Nov 14 22:00:17 CET 2010</date>
    <body>interesting... I thought java dev updates would be part of the general mac update as long as you installed the dev tools... Thanks for the info, I'll try that. http://lookfirst.com/2010/10/how-to-fix-missing-source-for-latest.html mailto:r...@architectedulogiciel.fr http://alturl.com/7je6e https://bugreport.apple.com/cgi-bin/WebObjects/RadarWeb.woa/12/wo/Z8gO7kmC3Cif9j23CAoM8M/5.83.28.0.9 http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] Writer and OutputStream mixup in 4.0.10...?</header>
    <date>Fri Nov 12 14:07:06 CET 2010</date>
    <body>Since upgrading to Resin 4.0.10 this error has turned up now and then in our log files, however we have sofar been unable to reproduce it ourselves. Could it be a Resin bug...? java.lang.IllegalStateException: getWriter() can't be called after getOutputStream(). at com.caucho.server.http.HttpServletResponseImpl.getWriter(HttpServletResponseImpl.java:166) at com.caucho.server.http.ToCharResponseAdapter$ToCharResponseStreamWrapper.writeNext(ToCharResponseAdapter.java:140) at com.caucho.server.http.ToCharResponseStream.flushCharBuffer(ToCharResponseStream.java:389) at com.caucho.server.http.ToCharResponseStream.flushBuffer(ToCharResponseStream.java:338) at com.caucho.server.http.ResponseAdapter.finish(ResponseAdapter.java:344) at com.caucho.jsp.PageContextImpl.release(PageContextImpl.java:1444) at com.caucho.jsp.PageManager.freePageContext(PageManager.java:217) at _jsp._html._orders._invoices._invoiceStatisticsList__jsp._jspService(_invoiceStatisticsList__jsp.java:45) ... --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Writer and OutputStream mixup in 4.0.10...?</header>
    <date>Fri Nov 12 18:02:14 CET 2010</date>
    <body>I assume you're never calling getOutputStream() in any of the tags or included files? That exception is required by the spec if you call getOutputStream() followed by getWriter(). I'm filing this as http://bugs.caucho.com/view.php?id=4290 . -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Writer and OutputStream mixup in 4.0.10...?</header>
    <date>Wed Nov 17 09:01:45 CET 2010</date>
    <body>Scott Ferguson wrote (2010-11-12 18:01): If we were, we should be able to reproduce it and it would turn up a lot more often in production. We've only seen it logged six times in three weeks. Could it be related to flushing somehow? Such as if an exception was thrown after flushing...? http://bugs.caucho.com/view.php?id=4290 . http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Writer and OutputStream mixup in 4.0.10...?</header>
    <date>Wed Nov 17 18:51:31 CET 2010</date>
    <body>Thanks for the update. That's quite a bit different, since it sounds like a timing/race error. Or possibly one of the reused connections not being cleared properly. It'll take a bit of work to track this down. -- Scott http://bugs.caucho.com/view.php?id=4290 . http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Writer and OutputStream mixup in 4.0.10...?</header>
    <date>Thu May 26 14:54:16 CEST 2011</date>
    <body>We're still seeing this issue at random under 4.0.18 :-( http://bugs.caucho.com/view.php?id=4290 Scott Ferguson wrote (2010-11-17 18:50): http://bugs.caucho.com/view.php?id=4290 . http://maillist.caucho.com/mailman/listinfo/resin-interest --</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.12 behind Barracuda Load Balancers</header>
    <date>Tue Nov 09 01:12:47 CET 2010</date>
    <body>We are running a two node Resin 4.0.12 cluster behind Barracuda 440 Load Balancers. I start one server (server-a) in the cluster and log into an app (e.g. generate a session). I then start the second server (server-b) in the cluster (wait for it to completely start) and then shut down server-a. I then click a link in the application I previously logged into at which point my application cannot find my session and I have to log in again. I can run the same steps (reversing the servers) and generate the behavior again and again. Is this a valid test case for session replication? I would expect that the session information is transmitted across the cluster and when I click the link I would be seamlessly directed to server-b which would have my session information. Is anyone else running Resin 4.0.12 in a cluster behind hardware load balancers? If so, have you experienced and/or are you willing to test this behavior? Key Resin config entries: ... ... ... ... ... ... ... thanks matt _______________________________________________________ Matthew Serrano - Director of Engineering Pearson Knowledge Technologies - Ordinate Corporation 299 S. California Ave Suite 300 Palo Alto, CA 94306 650 470 3600 650 470 3533 (direct) mserr...@pearsonkt.com www.ordinate.com www.pearson.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.12 behind Barracuda Load Balancers</header>
    <date>Tue Nov 09 01:20:26 CET 2010</date>
    <body>Can you send the finer logs on both sides for this issue? (I'm pretty sure I sent a mail on Friday asking for the same information.) It's possible there's some problem either serializing the session data or sending it for some reason. -- Scott mailto:mserr...@pearsonkt.com http://www.ordinate.com http://www.pearson.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Servlet mapping for context root</header>
    <date>Thu Nov 04 01:09:25 CET 2010</date>
    <body>I am attempting to create a servlet mapping specifically for the application context root in Resin 4.0.12. Section 12.2 of the Servlet spec (v3.0) says: The empty string ("") is a special URL pattern that exactly maps to the application's context root, i.e., requests of the form http://host:port/ However when I try to implement it I get this exception: com.caucho.server.webapp.WebApp.addServletMapping(): java.lang.StringIndexOutOfBoundsException: String index out of range: 0 10: Am I missing something? Seeing that resin now passes the Servlet TCK I figure I must be. Regards, Peter</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Servlet mapping for context root</header>
    <date>Thu Nov 04 18:12:08 CET 2010</date>
    <body>http://host:port/ I've filed this as http://bugs.caucho.com/view.php?id=4283 . It looks like we missed that configuration and also the Servlet TCK missed adding a test case. It should be a simple fix. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Small Resin 4 documentation issue with &amp;lt;resin:set&amp;gt;</header>
    <date>Wed Nov 03 19:11:54 CET 2010</date>
    <body>The example for &amp;lt;resin:set&amp;gt; on this page http://www.caucho.com/resin/reference.xtp#resin:set is using but the variable is not defined by "*name*", you must use "*var*" as stated in the section headlined with &amp;lt;resin:set&amp;gt; Attributes such as: This is also true for Resin 3.1, but there I cannot find the detailed page because http://caucho.com/resin-3.1/doc/index-tags.xtp links to http://caucho.com/resin-3.1/doc/control.xtp#resin:set (404 not found) when clicking on the 'resin:set' anchor. -- Steffen</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin-maven-plugin</header>
    <date>Tue Nov 02 12:17:11 CET 2010</date>
    <body>Hi, I'm having some trouble getting the maven plugin to work. I've been trying with various versions of 3.1, and it seems to me that the runtime dependencies from maven aren't added to the classpath of the maven plugin. Is there some configuration option I've missed? I've tried adding plugin.xml, but that didn't do much. (btw, it seems all the 3.1.* jars in the maven repo is labeled 3.1-SNAPSHOT in the manifest pom). I've also tried the 4.0.9 version, and that gives me com.caucho.config.ConfigRuntimeException: java.lang.ClassNotFoundException: com.caucho.server.resin.EnvInit at com.caucho.config.ConfigException.create(ConfigException.java:168) followed by WARNING: java.lang.NullPointerException java.lang.NullPointerException at com.caucho.util.Alarm.queue(Alarm.java:382) I've googled, stackoverflowed and decompiled, and I'm still completely lost. Any help would be appreciated! For starters, where's the source code for this plugin? I couldn't find it in the official svn repo. Regards, Erlend Halvorsen B | Erlend Halvorsen, Senior Consultant mailto:erlend.halvor...@bekk.no K | bekk consulting as, pb. 134 sentrum, 0102 oslo, norway http://www.bekk.no</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin CanDI not support @Alternative ?</header>
    <date>Mon Nov 01 19:59:55 CET 2010</date>
    <body>======beans.xml=================== http://java.sun.com/xml/ns/javaee" xmlns:xsi=" http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation=" http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd" ========the alternative implementation====== @Alternative @ApplicationScoped ... ========usage====== @Inject ... - Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin CanDI not support @Alternative ?</header>
    <date>Mon Nov 01 23:11:44 CET 2010</date>
    <body>I just checked with that example and it's working fine. Where are the files/classes located, and how is JmsTemplate instantiated? -- Scott http://java.sun.com/xml/ns/javaee" http://www.w3.org/2001/XMLSchema-instance" http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd" http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin CanDI not support @Alternative ?</header>
    <date>Tue Nov 02 08:03:40 CET 2010</date>
    <body>Hi Scott, Thanks for the checking. My deployment causing the problem: XaPooledConnectionFactory  was in a jar called buysou-jms.jar which contains a beans.xml. buysou_cms.jar was deployed in WEB-INF/lib. ===========the beans.xml in buysou_cms.jar============== http://java.sun.com/xml/ns/javaee" xmlns:xsi=" http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation=" http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd" Note: The purpose of &amp;lt;config:BeanRewriteConfig/&amp;gt; line is to load com.buysou.cms.config.BeanRewriteConfig at startup. After I removed the line &amp;lt;config:BeanRewriteConfig/&amp;gt; the @Alternative worked as a charm. The problem was solved by annotate a @Startup on BeanRewriteConfig instead of put it in the beans.xml. Thanks. -Wesley 2010/11/2 Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: http://java.sun.com/xml/ns/javaee" http://www.w3.org/2001/XMLSchema-instance" http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd" http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin CanDI not support @Alternative ?</header>
    <date>Tue Nov 02 20:33:17 CET 2010</date>
    <body>Thanks. I think that configuration should work, so I'm looking to see if it's a timing issue. For example, the beans.xml might be trying to inject too early before the @Alternative is processed. -- Scott http://java.sun.com/xml/ns/javaee" http://www.w3.org/2001/XMLSchema-instance" http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd" http://java.sun.com/xml/ns/javaee" http://www.w3.org/2001/XMLSchema-instance" http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd" http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Getting the context name without a request</header>
    <date>Tue Oct 26 21:58:18 CEST 2010</date>
    <body>Hello Long story made short, in the 3.1 version of Resin I used to be able to get the current context name using the following: HttpServletRequest request = (HttpServletRequest) com.caucho.security.SecurityContext.getProvider() And from there I'd be able to extract the context name.  In the 4.x release this no longer works as the getProvider returns an instance of com.caucho.server.http.HttpRequest which doesn't seem to have that information. Can anyone suggest a way to get the current context's name without an access to a request instance? Thanks Vic</body>
  </mail>
  <mail>
    <header>[Resin-interest] Disabling PHP/Quercus in Resin 4</header>
    <date>Thu Oct 21 14:15:52 CEST 2010</date>
    <body>Hello, We're testing Resin 4.0.10, and we've run into a problem with one of our servers, which is a Windows 2003 server IIS 6 and PHP plugins for a content management system. However, when I install the ISAPI filter to allow for requests from IIS to Resin 4, Resin 4 takes over the PHP mappings, causing the content management system to stop working since it's not configured in Resin 4. For now, we'd like the CMS to stay on the PHP plugins (which are accelerated and set up exactly the way we want them). I've tried to edit the app-default.xml file in the /conf directory and commenting out the PHP servlet and mapping for PHP files, but it still doesn't work. I can't find anything in the official documentation or by googling. Thanks in advance! Regards, Thomas</body>
  </mail>
  <mail>
    <header>[Resin-interest] Limits of rewrite-dispatch in Resin 3.1.6?</header>
    <date>Wed Oct 20 22:26:53 CEST 2010</date>
    <body>I'm upgrading our codebase to Resin 3.1 and Resin seems to be having problems with rewrite-dispatch entries. The stacktrace below would seem to indicate some sort of circular reference, but these redirects work fine in Resin 3.0. Additionally, the issue doesn't seem to come up with a particular entry, but rather if I surpass a certain number of entries (in the xml file I'm editing, having 506 entries is OK, but having 507 entries causes the problem). Most of these entries are 301s, "&amp;lt;moved-permanently&amp;gt;". I haven't been able to find any reference to such a limitation yet. Does this sound familiar to anyone? X:20101020124121.239:javax.servlet.ServletException: java.lang.StackOverflowError javax.servlet.ServletException: java.lang.StackOverflowError at com.caucho.server.dispatch.ExceptionFilterChain.&amp;lt;init&amp;gt;(ExceptionFilterChain.java:57) at com.caucho.server.webapp.WebApp.buildInvocation(WebApp.java:2114) at com.caucho.server.webapp.WebAppContainer.buildInvocation(WebAppContainer.java:716) at com.caucho.server.host.Host.buildInvocation(Host.java:489) at com.caucho.server.host.HostContainer.buildInvocation(HostContainer.java:314) at com.caucho.server.cluster.Server.buildInvocation(Server.java:1009) at com.caucho.server.dispatch.DispatchServer.buildInvocation(DispatchServer.java:209) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:262) at com.caucho.server.port.TcpConnection.run(TcpConnection.java:678) at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:721) at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:643) at java.lang.Thread.run(Thread.java:637) Caused by: java.lang.StackOverflowError at java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632) at java.lang.ClassLoader.defineClass(ClassLoader.java:616) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141) at java.net.URLClassLoader.defineClass(URLClassLoader.java:283) at java.net.URLClassLoader.access$000(URLClassLoader.java:58) at java.net.URLClassLoader$1.run(URLClassLoader.java:197) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:190) at java.lang.ClassLoader.loadClass(ClassLoader.java:307) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) at java.lang.ClassLoader.loadClass(ClassLoader.java:248) at com.caucho.server.rewrite.ForwardRule.dispatch(ForwardRule.java:77) at com.caucho.server.rewrite.AbstractRuleWithConditions.map(AbstractRuleWithConditions.java:217) at com.caucho.server.rewrite.AbstractRuleWithConditions.map(AbstractRuleWithConditions.java:195) at com.caucho.server.rewrite.AbstractRuleWithConditions.map(AbstractRuleWithConditions.java:195) at com.caucho.server.rewrite.AbstractRuleWithConditions.map(AbstractRuleWithConditions.java:195) at com.caucho.server.rewrite.AbstractRuleWithConditions.map(AbstractRuleWithConditions.java:195) ...</body>
  </mail>
  <mail>
    <header>[Resin-interest] AppScope variable in Resin.XML</header>
    <date>Wed Oct 20 19:10:55 CEST 2010</date>
    <body>Is there a simple way to set an applicationScope variable from within the resin.xml? I see how to set system properties, but I'd like something I can reference from a JSP like: Or can I reference the system properties similarly? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] AppScope variable in resin.xml</header>
    <date>Wed Oct 20 19:29:09 CEST 2010</date>
    <body>Bah I stumbled on this, but it doesn't appear to do what I was hoping: When I tried to reference that in a test.jsp like this, it is empty: http://java.sun.com/jsp/jstl/core" Any other way to do this? Thanks, Aaron http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] AppScope variable in resin.xml</header>
    <date>Wed Oct 20 19:50:52 CEST 2010</date>
    <body>http://java.sun.com/jsp/jstl/core" Hmm. I'd forgotten that context-param is application.getInitParam. I can't remember any way to set the application attributes directly from the config file, although we could enhance resin:set to allow for -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] AppScope variable in resin.xml</header>
    <date>Wed Oct 20 20:05:57 CEST 2010</date>
    <body>http://java.sun.com/jsp/jstl/core" about that is, we are trying to do this: The resin:set solution sounds great.  Would this be more intuitive: Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] AppScope variable in resin.xml</header>
    <date>Wed Oct 20 20:14:40 CEST 2010</date>
    <body>http://java.sun.com/jsp/jstl/core" Can you try &amp;lt;servlet-allow-el/&amp;gt; before that context-param? That should enable the EL evaluation. The problem is that resin:set doesn't actually know about web-apps because it's a generic high-level configuration tag.  The EL expression would work because resin:set can evaluate things in context, and the web-app context would know about the application scope. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] AppScope variable in resin.xml</header>
    <date>Wed Oct 20 20:22:14 CEST 2010</date>
    <body>http://java.sun.com/jsp/jstl/core" That worked!  It's a good enough solution for us for now.  using extend the functionality of resin:set. Ah, that does make sense. Thanks for getting us going, Aaron</body>
  </mail>
  <mail>
    <header>[Resin-interest] Using built-in database with JPA</header>
    <date>Wed Oct 20 17:42:59 CEST 2010</date>
    <body>Hello, I am trying to get a simple application to work with eclipselink on the resin built-in database. I've setup eclipselink to use ResinPlatform. I am getting the following error. resin.jar which contains the class is present in the lib folder (by default). Is there a way around? Exception Description: Database platform class [org.eclipse.persistence.platform.server.resin.ResinPlatform] not found. Internal Exception: java.lang.InstantiationException: org.eclipse.persistence.platform.server.resin.ResinPlatform at org.eclipse.persistence.exceptions.ValidationException.platformClassNotFound(ValidationException.java:1483) at org.eclipse.persistence.sessions.DatasourceLogin.setPlatformClassName(DatasourceLogin.java:515) at org.eclipse.persistence.sessions.DatasourceLogin.setPlatformClassName(DatasourceLogin.java:551) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.updateLogins(EntityManagerSetupImpl.java:1156) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.updateServerSession(EntityManagerSetupImpl.java:1417) at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:359) at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getServerSession(EntityManagerFactoryImpl.java:151) at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:207) at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:202) at com.caucho.env.jpa.EntityManagerJtaProxy.getCurrent(EntityManagerJtaProxy.java:861) at com.caucho.env.jpa.EntityManagerJtaProxy.createNamedQuery(EntityManagerJtaProxy.java:646) at org.jboss.seam.resteasy.example.tasks.resource.CategoryCollectionResource.getCategories(CategoryCollectionResource.java:56) at org.jboss.seam.resteasy.example.tasks.resource.CategoryCollectionResource__StatelessProxy.getCategories(CategoryCollectionResource__StatelessProxy.java:77) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:140) at org.jboss.resteasy.core.ResourceMethod.invokeOnTarget(ResourceMethod.java:252) at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:217) at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:206) at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:503) at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:480) at org.jboss.resteasy.core.SynchronousDispatcher.invokePropagateNotFound(SynchronousDispatcher.java:139) at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:203) at org.jboss.resteasy.plugins.server.servlet.FilterDispatcher.doFilter(FilterDispatcher.java:59) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:675) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:637) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:588) at com.caucho.network.listen.TcpSocketLink$AcceptTask.doTask(TcpSocketLink.java:1175) at com.caucho.network.listen.TcpSocketLink$ConnectionReadTask.runThread(TcpSocketLink.java:1108) at com.caucho.network.listen.TcpSocketLink$AcceptTask.run(TcpSocketLink.java:1142) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:182) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) Caused by: java.lang.InstantiationException: org.eclipse.persistence.platform.server.resin.ResinPlatform at java.lang.Class.newInstance0(Class.java:340) at java.lang.Class.newInstance(Class.java:308) at org.eclipse.persistence.internal.security.PrivilegedAccessHelper.newInstanceFromClass(PrivilegedAccessHelper.java:354) at org.eclipse.persistence.sessions.DatasourceLogin.setPlatformClassName(DatasourceLogin.java:510) ... 37 more Regards -- Jozef Hartinger jozefhartin...@gmail.com</body>
  </mail>
  <mail>
    <header>[Resin-interest] JSTL c:import on Resin 4.0</header>
    <date>Tue Oct 19 02:15:39 CEST 2010</date>
    <body>I seem to have issues using JSTL c:import within Resin 4.0. Below is my code and the error. Any ideas? Does Resin 4.0 no longer support the import tag? FYI...my:frame is a custom tag that eventually executes jsp:doBody. matt javax.servlet.jsp.JspException: unimplemented at com.caucho.jstl.rt.CoreImportTag.doEndTag(CoreImportTag.java:246) at _jsp._common._termsAndConditions__jsp$_CauchoFragment_0._jsp_invoke(_termsAndConditions__jsp.java:157) at com.caucho.jsp.JspFragmentSupport.invoke(JspFragmentSupport.java:93) at _jsp._WEB_22dINF._tags._frame__tag.doTag(_frame__tag.java:407) at _jsp._common._termsAndConditions__jsp._jspService(_termsAndConditions__jsp.java:102) at _jsp._common._termsAndConditions__jsp._jspService(_termsAndConditions__jsp.java:29) at com.caucho.jsp.JavaPage.service(JavaPage.java:64) at com.caucho.jsp.Page.pageservice(Page.java:542) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:194) at com.caucho.filters.GzipFilter.doFilter(GzipFilter.java:149) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:675) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:637) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:588) at com.caucho.network.listen.TcpSocketLink$AcceptTask.doTask(TcpSocketLink.java:1175) at com.caucho.network.listen.TcpSocketLink$ConnectionReadTask.runThread(TcpSocketLink.java:1108) at com.caucho.network.listen.TcpSocketLink$AcceptTask.run(TcpSocketLink.java:1142) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:182) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) Caused by: java.lang.UnsupportedOperationException: unimplemented at com.caucho.filters.CauchoResponseWrapper.getStatus(CauchoResponseWrapper.java:343) at com.caucho.server.http.ResponseAdapter.getStatus(ResponseAdapter.java:385) at com.caucho.jstl.rt.CoreImportTag$JstlImportResponseWrapper.&amp;lt;init&amp;gt;(CoreImportTag.java:466) at com.caucho.jstl.rt.CoreImportTag.handleBody(CoreImportTag.java:380) at com.caucho.jstl.rt.CoreImportTag.doEndTag(CoreImportTag.java:222)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSTL c:import on Resin 4.0</header>
    <date>Tue Oct 19 18:25:58 CEST 2010</date>
    <body>What version of Resin 4.0 are you using?  I can reproduce this easily on resin-pro-4.0.10 by doing this: --  create test.jsp: http://java.sun.com/jsp/jstl/core" -- -- create test2.jsp http://java.sun.com/jsp/jstl/core" -- -- create test3.jsp http://java.sun.com/jsp/jstl/core" Some output. -- Then just call: http://localhost/test.jsp And it will throw your error.  It only happens when one c:import calls another one. This behavior is completely fixed in resin-pro-4.0.12 though (and was working in resin-4.0.6, so it broke some time after that release). Aaron I seem to have issues using JSTL c:import within Resin 4.0. Below is my code and the error. Any ideas? Does Resin 4.0 no longer support the import tag? FYI...my:frame is a custom tag that eventually executes jsp:doBody. matt javax.servlet.jsp.JspException: unimplemented at com.caucho.jstl.rt.CoreImportTag.doEndTag(CoreImportTag.java:246) at _jsp._common._termsAndConditions__jsp$_CauchoFragment_0._jsp_invoke(_termsAndConditions__jsp.java:157) at com.caucho.jsp.JspFragmentSupport.invoke(JspFragmentSupport.java:93) at _jsp._WEB_22dINF._tags._frame__tag.doTag(_frame__tag.java:407) at _jsp._common._termsAndConditions__jsp._jspService(_termsAndConditions__jsp.java:102) at _jsp._common._termsAndConditions__jsp._jspService(_termsAndConditions__jsp.java:29) at com.caucho.jsp.JavaPage.service(JavaPage.java:64) at com.caucho.jsp.Page.pageservice(Page.java:542) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:194) at com.caucho.filters.GzipFilter.doFilter(GzipFilter.java:149) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:675) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:637) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:588) at com.caucho.network.listen.TcpSocketLink$AcceptTask.doTask(TcpSocketLink.java:1175) at com.caucho.network.listen.TcpSocketLink$ConnectionReadTask.runThread(TcpSocketLink.java:1108) at com.caucho.network.listen.TcpSocketLink$AcceptTask.run(TcpSocketLink.java:1142) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:182) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) Caused by: java.lang.UnsupportedOperationException: unimplemented at com.caucho.filters.CauchoResponseWrapper.getStatus(CauchoResponseWrapper.java:343) at com.caucho.server.http.ResponseAdapter.getStatus(ResponseAdapter.java:385) at com.caucho.jstl.rt.CoreImportTag$JstlImportResponseWrapper.&amp;lt;init&amp;gt;(CoreImportTag.java:466) at com.caucho.jstl.rt.CoreImportTag.handleBody(CoreImportTag.java:380) at com.caucho.jstl.rt.CoreImportTag.doEndTag(CoreImportTag.java:222)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSTL c:import on Resin 4.0</header>
    <date>Tue Oct 19 18:33:07 CEST 2010</date>
    <body>I just upgraded to resin-pro-4.0.12 and it is still happening...at least on OS X. It also happens for non JSPs. I have some pages that import XSL and XML files so I can parse them with the x tag library and those imports also fail. There is no chaining of imports that I can see. matt http://java.sun.com/jsp/jstl/core" http://java.sun.com/jsp/jstl/core" http://java.sun.com/jsp/jstl/core" http://localhost/test.jsp http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSTL c:import on Resin 4.0</header>
    <date>Tue Oct 19 18:48:14 CEST 2010</date>
    <body>Yes, that's exactly what I was doing that was failing in resin-pro.4.0.10, but not in resin-pro-4.0.12.  Try deleting your entire WEB-INF folder and let resin-pro-4.0.12 reconstruct it, just to make sure you don't have old 4.0.10 compilations hanging around.  There is definitely a behavior change in chaining imports from 10 to 12, and it's working for me in 12. I am also doing a c:import on an xml document in the final c:import, so we are doing the same thing. Aaron I just upgraded to resin-pro-4.0.12 and it is still happening...at least on OS X. It also happens for non JSPs. I have some pages that import XSL and XML files so I can parse them with the x tag library and those imports also fail. There is no chaining of imports that I can see. matt What version of Resin 4.0 are you using?  I can reproduce this easily on resin-pro-4.0.10 by doing this: --  create test.jsp: http://java.sun.com/jsp/jstl/core" -- -- create test2.jsp http://java.sun.com/jsp/jstl/core" -- -- create test3.jsp http://java.sun.com/jsp/jstl/core" Some output. -- Then just call: http://localhost/test.jsp And it will throw your error.  It only happens when one c:import calls another one. This behavior is completely fixed in resin-pro-4.0.12 though (and was working in resin-4.0.6, so it broke some time after that release). Aaron I seem to have issues using JSTL c:import within Resin 4.0. Below is my code and the error. Any ideas? Does Resin 4.0 no longer support the import tag? FYI...my:frame is a custom tag that eventually executes jsp:doBody. matt javax.servlet.jsp.JspException: unimplemented at com.caucho.jstl.rt.CoreImportTag.doEndTag(CoreImportTag.java:246) at _jsp._common._termsAndConditions__jsp$_CauchoFragment_0._jsp_invoke(_termsAndConditions__jsp.java:157) at com.caucho.jsp.JspFragmentSupport.invoke(JspFragmentSupport.java:93) at _jsp._WEB_22dINF._tags._frame__tag.doTag(_frame__tag.java:407) at _jsp._common._termsAndConditions__jsp._jspService(_termsAndConditions__jsp.java:102) at _jsp._common._termsAndConditions__jsp._jspService(_termsAndConditions__jsp.java:29) at com.caucho.jsp.JavaPage.service(JavaPage.java:64) at com.caucho.jsp.Page.pageservice(Page.java:542) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:194) at com.caucho.filters.GzipFilter.doFilter(GzipFilter.java:149) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:675) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:637) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:588) at com.caucho.network.listen.TcpSocketLink$AcceptTask.doTask(TcpSocketLink.java:1175) at com.caucho.network.listen.TcpSocketLink$ConnectionReadTask.runThread(TcpSocketLink.java:1108) at com.caucho.network.listen.TcpSocketLink$AcceptTask.run(TcpSocketLink.java:1142) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:182) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) Caused by: java.lang.UnsupportedOperationException: unimplemented at com.caucho.filters.CauchoResponseWrapper.getStatus(CauchoResponseWrapper.java:343) at com.caucho.server.http.ResponseAdapter.getStatus(ResponseAdapter.java:385) at com.caucho.jstl.rt.CoreImportTag$JstlImportResponseWrapper.&amp;lt;init&amp;gt;(CoreImportTag.java:466) at com.caucho.jstl.rt.CoreImportTag.handleBody(CoreImportTag.java:380) at com.caucho.jstl.rt.CoreImportTag.doEndTag(CoreImportTag.java:222)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSTL c:import on Resin 4.0</header>
    <date>Tue Oct 19 19:37:21 CEST 2010</date>
    <body>Also double check that you are importing the right resin-pro-4.0.12/lib stuff, and don't have a reference to the older lib jar files -- I've been bitten by that a time or two. Aaron Yes, that's exactly what I was doing that was failing in resin-pro.4.0.10, but not in resin-pro-4.0.12.  Try deleting your entire WEB-INF folder and let resin-pro-4.0.12 reconstruct it, just to make sure you don't have old 4.0.10 compilations hanging around. There is definitely a behavior change in chaining imports from 10 to 12, and it's working for me in 12. I am also doing a c:import on an xml document in the final c:import, so we are doing the same thing. Aaron I just upgraded to resin-pro-4.0.12 and it is still happening...at least on OS X. It also happens for non JSPs. I have some pages that import XSL and XML files so I can parse them with the x tag library and those imports also fail. There is no chaining of imports that I can see. matt What version of Resin 4.0 are you using?  I can reproduce this easily on resin-pro-4.0.10 by doing this: --  create test.jsp: http://java.sun.com/jsp/jstl/core" -- -- create test2.jsp http://java.sun.com/jsp/jstl/core" -- -- create test3.jsp http://java.sun.com/jsp/jstl/core" Some output. -- Then just call: http://localhost/test.jsp And it will throw your error.  It only happens when one c:import calls another one. This behavior is completely fixed in resin-pro-4.0.12 though (and was working in resin-4.0.6, so it broke some time after that release). Aaron I seem to have issues using JSTL c:import within Resin 4.0. Below is my code and the error. Any ideas? Does Resin 4.0 no longer support the import tag? FYI...my:frame is a custom tag that eventually executes jsp:doBody. matt javax.servlet.jsp.JspException: unimplemented at com.caucho.jstl.rt.CoreImportTag.doEndTag(CoreImportTag.java:246) at _jsp._common._termsAndConditions__jsp$_CauchoFragment_0._jsp_invoke(_termsAndConditions__jsp.java:157) at com.caucho.jsp.JspFragmentSupport.invoke(JspFragmentSupport.java:93) at _jsp._WEB_22dINF._tags._frame__tag.doTag(_frame__tag.java:407) at _jsp._common._termsAndConditions__jsp._jspService(_termsAndConditions__jsp.java:102) at _jsp._common._termsAndConditions__jsp._jspService(_termsAndConditions__jsp.java:29) at com.caucho.jsp.JavaPage.service(JavaPage.java:64) at com.caucho.jsp.Page.pageservice(Page.java:542) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:194) at com.caucho.filters.GzipFilter.doFilter(GzipFilter.java:149) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:89) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:95) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:792) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:675) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:637) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:588) at com.caucho.network.listen.TcpSocketLink$AcceptTask.doTask(TcpSocketLink.java:1175) at com.caucho.network.listen.TcpSocketLink$ConnectionReadTask.runThread(TcpSocketLink.java:1108) at com.caucho.network.listen.TcpSocketLink$AcceptTask.run(TcpSocketLink.java:1142) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:182) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) Caused by: java.lang.UnsupportedOperationException: unimplemented at com.caucho.filters.CauchoResponseWrapper.getStatus(CauchoResponseWrapper.java:343) at com.caucho.server.http.ResponseAdapter.getStatus(ResponseAdapter.java:385) at com.caucho.jstl.rt.CoreImportTag$JstlImportResponseWrapper.&amp;lt;init&amp;gt;(CoreImportTag.java:466) at com.caucho.jstl.rt.CoreImportTag.handleBody(CoreImportTag.java:380) at com.caucho.jstl.rt.CoreImportTag.doEndTag(CoreImportTag.java:222)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSTL c:import on Resin 4.0</header>
    <date>Tue Oct 19 19:38:00 CEST 2010</date>
    <body>So I tried clearing resin-data, watchdog-data and my exploded war folder, deployed a new app with a single JSP importing an XML file from WEB-INF and I still get the unimplemented error. FYI...I am almost positive this was working under Resin 4.0.10 for a while because we completely QAed the application on 6 October. Suddenly this week it started throwing this error. For now I am working around the issue with other code but knowing you are able to make it work gives me hope. Thanks. matt http://java.sun.com/jsp/jstl/core" http://java.sun.com/jsp/jstl/core" http://java.sun.com/jsp/jstl/core" http://localhost/test.jsp http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSTL c:import on Resin 4.0</header>
    <date>Tue Oct 19 20:31:06 CEST 2010</date>
    <body>Matt, It's a resin issue. I've submitted an bug http://bugs.caucho.com/view.php?id=4263 Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0.6 Can't handle files &amp;gt;2GB?</header>
    <date>Mon Oct 18 20:59:19 CEST 2010</date>
    <body>I've got 4.0.6 running, and for one of the web apps, it uses the directory file list capabilities of: I uploaded a 5 GB file via scp, but now can't retrieve that file via HTTP Get. It reports the file size as 713 MB. Am I correct that this is the problem? Resin is assuming file sizes fit in 32 bits? TIA, Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.6 Can't handle files &amp;gt;2GB?</header>
    <date>Mon Oct 18 21:04:46 CEST 2010</date>
    <body>What kind of OS and JVM are you using? http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.6 Can't handle files &amp;gt;2GB?</header>
    <date>Mon Oct 18 21:17:47 CEST 2010</date>
    <body>Nexenta OpenSolaris, JVM 6 $ uname -a SunOS kepler 5.11 NexentaOS_20081207 i86pc i386 i86pc Solaris $ java -version java version "1.6.0_12" Java(TM) SE Runtime Environment (build 1.6.0_12-b04) Java HotSpot(TM) Server VM (build 11.2-b01, mixed mode) My config file includes Which I thought implied -d64. Am I wrong? Also, does it matter if the jvm is running 32- or 64-bit? A long is still 64 bits, right? -- Rick http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.6 Can't handle files &amp;gt;2GB?</header>
    <date>Mon Oct 18 21:49:08 CEST 2010</date>
    <body>Your JVM is definitely not 64-bit. Your OS may be : http://opensolaris.org/jive/thread.jspa?threadID=119527 Run this : isainfo -kv Didn't anyone tell you Opensolaris was dead? :) http://insidehpc.com/2010/08/16/opensolaris-dead-at-age-19/</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.6 Can't handle files &amp;gt;2GB?</header>
    <date>Mon Oct 18 22:24:55 CEST 2010</date>
    <body>$ isainfo -kv 64-bit amd64 kernel modules http://opensolaris.org/jive/thread.jspa?threadID=119527 http://insidehpc.com/2010/08/16/opensolaris-dead-at-age-19/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.6 Can't handle files &amp;gt;2GB?</header>
    <date>Mon Oct 18 21:28:35 CEST 2010</date>
    <body>Hmm. Resin reports this on startup: x86 SE Runtime Environment 1.6.0_12-b04, utf-8, en HotSpot(TM) Server VM 11.2-b01, 32, mixed mode, Sun Microsystems Inc. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.6 Can't handle files &amp;gt;2GB?</header>
    <date>Mon Oct 18 21:36:10 CEST 2010</date>
    <body>The DirectoryServlet shouldn't matter, correct? Do you see this with a direct GET? It looks like somewhere there's a 32 bit limit. Are you using Resin's JNI or not? -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.6 Can't handle files &amp;gt;2GB?</header>
    <date>Mon Oct 18 22:28:07 CEST 2010</date>
    <body>Even with wget this happens. I'm running no JNI (I had problems with connections leaking, or some such). A little Java tool I wrote to fetch headers gets this (and takes a long time to respond): $ java Head http://roderickmann.org/stuff/BIBHKB.mpg Fetching http://roderickmann.org/stuff/BIBHKB.mpg Fetch duration: 44.244 Response Code:                200 ETag:                         "8U3Jr/f+gTr" Date:                         Mon, 18 Oct 2010 20:26:00 GMT Content-Length:               748088561 Last-Modified:                Mon, 18 Oct 2010 12:56:56 GMT Accept-Ranges:                bytes Content-Type:                 video/mpeg; charset=utf-8 Server:                       Resin/4.0.6 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.6 Can't handle files &amp;gt;2GB?</header>
    <date>Mon Oct 18 21:59:52 CEST 2010</date>
    <body>http://opensolaris.org/jive/thread.jspa?threadID=119527 http://insidehpc.com/2010/08/16/opensolaris-dead-at-age-19/ File size should be independent of CPU architecture on Solaris.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.6 Can't handle files &amp;gt;2GB?</header>
    <date>Tue Oct 19 14:36:19 CEST 2010</date>
    <body>http://opensolaris.org/jive/thread.jspa?threadID=119527 http://insidehpc.com/2010/08/16/opensolaris-dead-at-age-19/ This explains: http://www.sun.com/software/whitepapers/wp-largefiles/largefiles.pdf</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin 4.0.12</header>
    <date>Mon Oct 18 14:59:38 CEST 2010</date>
    <body>Hi Scott, it seems like the Makefile for the Apache mod_caucho.so isn't fully build correct any more after 'configure'. There's a '@$(DESTDIR)apache_libexec@' in the Makefile.in which isn't replaced properly. Else 4.0.12 seems to run fine so far. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4.0.12</header>
    <date>Mon Oct 18 19:15:18 CEST 2010</date>
    <body>Thanks. I've made the change. Make sure to take a look at /resin-admin. We've updated quite a few of the pages. Looking forward, Resin 4.0.13 will be primarily passing the EJB TCK. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] apache connect to resin by proxy meet 503 error</header>
    <date>Fri Oct 15 15:12:48 CEST 2010</date>
    <body>hello when i use resin meet some random http 503 error on the online server, we use apache as the http server and use mod_proxy to connect to resin from LAN, resin and apache runs on different virtual host, resin have 2G RAM. java arg is the default we use install resin from the source package railo-3.1.2.001-resin-3.1.9-with-jre-linux.tar.gz, and the install configure is "./configure --prefix=/resinpath --enable-ssl --enable-jni", when make did "cp -r RESIN_SOURCE/modules/c/src/resin_os resin" and "cp -r RESIN_SOURCE/modules/c/src/resin_os resinssl". the java version is 1.6.0_18. now the log level on the server is: found nothing about http 503 in resin log. but found something about http 503 in apahce log: (192.168.*.* is changed by me when send this mail) [Fri Jul 30 23:58:27 2010] [error] proxy: HTTP: disabled connection for (192.168.*.*) [Fri Jul 30 23:58:30 2010] [error] proxy: HTTP: disabled connection for (192.168.*.*) [Fri Jul 30 23:58:32 2010] [error] [client 89.0.131.55] proxy: error reading status line from remote server 192.168.*.* [Fri Jul 30 23:58:32 2010] [error] [client 89.0.131.55] proxy: Error reading from remote server returned by / [Fri Jul 30 23:58:33 2010] [error] proxy: HTTP: disabled connection for (192.168.*.*) [Fri Jul 30 23:58:38 2010] [error] proxy: HTTP: disabled connection for (192.168.*.*) [Fri Jul 30 23:58:39 2010] [error] proxy: HTTP: disabled connection for (192.168.*.*) [Fri Jul 30 23:58:39 2010] [error] (110)Connection timed out: proxy: HTTP: attempt to connect to 192.168.*.*:8600 (192.168.*.*) failed i had a similar environment on my local, had a test with jmeter(Number of Threads: 1000, Ramp-Up Period: 0, Loop count: 200), each virtual host have 512 RAM. java arg also not changed. i tried to change &amp;lt;thread-max&amp;gt;256&amp;lt;/thread-max&amp;gt; to 400, but after this http 503 comes more frequent, what can i do to solve the http 503? thanks</body>
  </mail>
  <mail>
    <header>[Resin-interest] configuration of beans for jmx</header>
    <date>Wed Oct 13 22:39:32 CEST 2010</date>
    <body>Hey resin masters, I'm using Resin 4.0.10. I have a bean in my war file: @Named("MyBean") @Startup @Singleton @TransactionAttribute(TransactionAttributeType.REQUIRED) @PostConstruct In this case, the bean doesn't show up in the jconsole. If I define a &amp;lt;resource&amp;gt; element in resin-web.xml (as suggested by the documentation here: http://caucho.com/resin-4.0/examples/jmx-basic/index.xtp ): Then I get an error at start up about a duplicate name trying to be registered because of the @Named annotation. This conflicts directly with the documentation ( http://caucho.com/resin-4.0/admin/config-el-ref.xtp#resource ) that suggests to use &amp;lt;bean&amp;gt;... and &amp;lt;bean&amp;gt; suggests to use another set of configuration that doesn't work.Here is my resin-web.xml that I tried: http://caucho.com/ns/resin" xmlns:ee="urn:java:ee" xmlns:resin="urn:java:com.caucho.resin" xmlns:cfg="urn:java:com.caucho.config" xmlns:jms="urn:java:com.caucho.jms" xmlns:ejb="urn:java:com.caucho.ejb.cfg" xmlns:foo="urn:com.foo.biz" Results in this exception: unknown property of 'com.caucho.server.webapp.WebApp'. 19:         &amp;lt;foo:MyBean If I remove the @Named annotation and keep the config in resin-web.xml, then the bean shows up correctly in jconsole. However, I see MyBean started printed out a bunch of times when resin starts. It is clearly trying to start the bean too many times. I guess ideally I'd have a way to just use @Named (or another appropriate annotation) and have the bean show up in jconsole with the methods that are defined in MyMXBean (or MyMBean). Having to put a bean into .xml config just to get it to register with JMX seems like overkill. Also, a small typo bug report: http://caucho.com/resin-4.0/admin/config-candi.xtp#Administration , the href link to &amp;lt;resin:JmxService&amp;gt; is to JmsService thanks, jon</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] configuration of beans for jmx</header>
    <date>Wed Oct 13 22:56:56 CEST 2010</date>
    <body>Also, if I use: xmlns:foo="urn:java:com.foo.biz" (adding the :java:), then I get: because it does not map to a known class jon http://caucho.com/resin-4.0/examples/jmx-basic/index.xtp ): http://caucho.com/resin-4.0/admin/config-el-ref.xtp#resource ) that http://caucho.com/ns/resin" http://caucho.com/resin-4.0/admin/config-candi.xtp#Administration , the</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] configuration of beans for jmx</header>
    <date>Wed Oct 13 23:47:48 CEST 2010</date>
    <body>Ok, part 3: I've tried to register my bean with the MBeanServer manually, but I can't... class: com.caucho.jmx.GlobalMBeanServer javax.management.NotCompliantMBeanException: My:name=MyBean mbean has no MBean interface for class com.myco.MyBean__ResinWebBean at com.caucho.jmx.AbstractMBeanServer.createMBean(AbstractMBeanServer.java:439) at com.caucho.jmx.AbstractMBeanServer.registerMBean(AbstractMBeanServer.java:413) ... It seems that the rewritten class doesn't retain its interfaces! So, it seems that any candi beans can't be jmx'd... =( jon http://caucho.com/resin-4.0/examples/jmx-basic/index.xtp ): http://caucho.com/resin-4.0/admin/config-el-ref.xtp#resource ) that http://caucho.com/ns/resin" http://caucho.com/resin-4.0/admin/config-candi.xtp#Administration , the</body>
  </mail>
  <mail>
    <header>[Resin-interest] ConnectionPool pool overflow issue again in resin	4.0.10</header>
    <date>Fri Oct 08 18:49:52 CEST 2010</date>
    <body>Hi Scott, I experienced ConnectionPool pool overflow issue again in resin 4.0.10. Some time (probably 20 minutes) after resin started, resin reported: ConnectionPool[jdbc/mypool] pool overflow ConnectionPool[jdbc/mypool] pool overflow ConnectionPool[jdbc/mypool] pool overflow ConnectionPool[jdbc/mypool] pool overflow ConnectionPool[jdbc/mypool] pool overflow ConnectionPool[jdbc/mypool] pool overflow ConnectionPool[jdbc/mypool] pool overflow but my pool was not full at all which size was 2000. I met this before in resin 4.0.9 which caused by the alarm issue. Then I switched back to Resin 4.0.9.s100809 and everything went fine. I'll do a fine log if required. Thanks. -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ConnectionPool pool overflow issue again in resin	4.0.10</header>
    <date>Fri Oct 08 20:03:05 CEST 2010</date>
    <body>Thanks. I'm adding some additional logging for the upcoming release, since that log isn't giving enough information to explain the problem. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin 4.0.11</header>
    <date>Wed Oct 06 22:13:34 CEST 2010</date>
    <body>I just noticed that the tar balls for resin 4.0.11 is available in Caucho's download area but the download page still show 4.0.10 as the latest.  Is that just a case of the download page being outdated?  Are the 4.0.11 tar balls official releases? Bill</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4.0.11</header>
    <date>Wed Oct 06 22:22:14 CEST 2010</date>
    <body>4.0.11 had a severe bug related to the deployment, so we backed out the release. The next official release will be 4.0.12 (hopefully this week, but we're working through some other bugs.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Installing Joomla in resin server</header>
    <date>Fri Oct 01 09:48:24 CEST 2010</date>
    <body>Dear Resin Team, I'm  Trying to install joomla in resin server. resin-4.0.10\webapps\Joomla\installation\installer\controller.php:109: Fatal Error: Method call 'makeNameSpace' is not allowed for a null value. Thanks &amp;amp; Regards, *Srikanth A*</body>
  </mail>
  <mail>
    <header>[Resin-interest] Install Liferay+Joomla in resin server</header>
    <date>Fri Oct 01 07:28:37 CEST 2010</date>
    <body>Dear Resin team, Im trying to install liferay portal in resin 4.0. i have followed the instructions given in liferay portal administrator guide \resin.xml:33: javax.el.PropertyNotFoundException: 'rootDir' is an unknown bean property of 'com.caucho.server.cluster.Server$ServerVar' Oct 1, 2010 10:36:28 AM com.caucho.boot.WatchdogChildProcess logStatus WARNING: Watchdog detected close of Resin[,pid=0] exit reason: BAD_CONFIG (exit code=2) Resin-4.0.10 (built Tue, 24 Aug 2010 10:49:02 PDT) Copyright(c) 1998-2010 Caucho Technology.  All rights reserved. Note: Im trying to install liferay and joomla in resin 4.0 server. liferay provides liferay resin bundle. but i dont know in that version of resin joomla can be installed or not. How can i resolve the above error -- Thanks &amp;amp; Regards, *Srikanth A*</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Install Liferay+Joomla in resin server</header>
    <date>Fri Oct 01 18:05:38 CEST 2010</date>
    <body>Srikanth, thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Access server id param within resin.xml</header>
    <date>Fri Oct 01 01:32:22 CEST 2010</date>
    <body>When a server is started with the command line option "-server foo" how can I access the variable holding "foo" within resin.xml? I want to use it to define a set of conf dirs, like: Thanks</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Access server id param within resin.xml</header>
    <date>Fri Oct 01 12:21:21 CEST 2010</date>
    <body>S! D. El 01/10/2010 1:32, Stargazer escribió:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Access server id param within resin.xml</header>
    <date>Fri Oct 01 13:54:23 CEST 2010</date>
    <body>Aha thanks. show up a list of them all , on the main caucho.com site shows up nothing. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Access server id param within resin.xml</header>
    <date>Fri Oct 01 17:38:46 CEST 2010</date>
    <body>There's a complete listing of all the environment variables here: http://www.caucho.com/resin-4.0/admin/config-el.xtp These apply to both 3.1 and 4.0. Emil http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Access server id param within resin.xml</header>
    <date>Sat Oct 02 22:15:36 CEST 2010</date>
    <body>I've updated the list at http://wiki.caucho.com/EL_configuration_variables -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Watchdog.conf</header>
    <date>Wed Sep 29 21:36:09 CEST 2010</date>
    <body>Hi, Does the watchdog.conf work with shared IPs or only dedicated IPs? The &amp;lt;watchdog&amp;gt; specifies a specific root folder, which to me implies that only one host is allowed per IP address?  We've tried without success to have a &amp;lt;watchdog&amp;gt; within watchdog.conf open a loadbalancer.conf as a specific host, but that doesn't seem to be working either. I just spent time pulling apache out of our config, but does it need to go back for load balancing? Any suggestions? Brent</body>
  </mail>
  <mail>
    <header>[Resin-interest] Watchdog binding</header>
    <date>Tue Sep 28 07:10:47 CEST 2010</date>
    <body>Can a watchdog bind to a port already used by another watchdog process? Similar to the way that a virtual host would? java.io.IOException: bind failed to xxx.xxx.xxx.xxx:80</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Watchdog binding</header>
    <date>Tue Sep 28 08:34:54 CEST 2010</date>
    <body>No, only one process can bind to a port. To get around that, you can either use a web-tier cluster to load balance traffic to the correct cluster. The documentation has a few different examples: http://caucho.com/resin-4.0/admin/http-virtual-hosts.xtp Specifically, look at the "Server per virtual host" example with the back-end JVM and the web-tier load balancer. Hope that gets you started. -Jamie</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Watchdog binding</header>
    <date>Wed Sep 29 07:16:49 CEST 2010</date>
    <body>Hi Jamie, I'm using the watchdog.conf, and it seems to be acting a bit differently. Couple of questions: 1.)  When using watchdog.conf, can a resin load balancer be used?  If so, how/where? 2.)  When using watchdog.conf, are unique IP's required? 3.)  If load balancer is used, I can point to a loadbalancer.conf, but what goes into the &amp;lt;resin-root&amp;gt; folder? It seems like watchdog.conf requires unique IP.  Right now I have many with unique IP, but would like to setup some shared IPs as well.  Appreciate your help &amp;amp; time! -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak Sent: Monday, September 27, 2010 11:34 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Watchdog binding No, only one process can bind to a port. To get around that, you can either use a web-tier cluster to load balance traffic to the correct cluster. The documentation has a few different examples: http://caucho.com/resin-4.0/admin/http-virtual-hosts.xtp Specifically, look at the "Server per virtual host" example with the back-end JVM and the web-tier load balancer. Hope that gets you started. -Jamie</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Watchdog binding</header>
    <date>Wed Sep 29 21:57:48 CEST 2010</date>
    <body>Just out of curiosity, is there a reason why you're trying to configure or manipulate the watchdog? Are you attempting to isolate users by giving multiple users their own watchdog processes (and child Resin processes)? If all you want to do is emulate the Apache front-end + Resin back-end paradigm with a pure Resin solution, you don't really need to do anything special to the watchdog at all. Over-simplifying things, it's really just there to help you start/stop/keep an eye on your Resin processes. http://caucho.com/resin-4.0/admin/http-virtual-hosts.xtp#Server per virtual host In those two examples, the "Resin web-tier" essentially performs Apache's role in this new configuration. When you start up the web-tier cluster, that's the process that will bind to port 80 on an IP address to load balance traffic to the individual Resin clusters on the back-end. The "Back-end JVM" is where you'd actually configure and manage the individual clusters/virtual hosts. These back-end JVMs can also bind to port 80 on different IP addresses than the web-tier, if you have some sites with their own dedicated IPs. If you think it would help beyond looking at the examples in their documentation, I could provide you with a stripped down version of one of the configs that we use. We have a mix of sites with dedicated and shared IP addresses. The dedicated sites function independently of the web-tier, since it's more efficient to send the traffic directly to the cluster than to send it through the web-tier. The sites that share an IP address use the web-tier for front-end request handling and load balancing to the cluster on the back-end. It's similar to, but not exactly like, the examples in the documentation. It may help to see it another way if their docs are confusing you, though. Let me know? -Jamie -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Marketing - IncorporateFast.com Sent: Wednesday, September 29, 2010 12:19 AM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] Watchdog binding Hi Jamie, I'm using the watchdog.conf, and it seems to be acting a bit differently. Couple of questions: 1.)  When using watchdog.conf, can a resin load balancer be used?  If so, how/where? 2.)  When using watchdog.conf, are unique IP's required? 3.)  If load balancer is used, I can point to a loadbalancer.conf, but what goes into the &amp;lt;resin-root&amp;gt; folder? It seems like watchdog.conf requires unique IP.  Right now I have many with unique IP, but would like to setup some shared IPs as well.  Appreciate your help &amp;amp; time! -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak Sent: Monday, September 27, 2010 11:34 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Watchdog binding No, only one process can bind to a port. To get around that, you can either use a web-tier cluster to load balance traffic to the correct cluster. The documentation has a few different examples: http://caucho.com/resin-4.0/admin/http-virtual-hosts.xtp Specifically, look at the "Server per virtual host" example with the back-end JVM and the web-tier load balancer. Hope that gets you started. -Jamie</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Watchdog binding</header>
    <date>Wed Sep 29 22:32:39 CEST 2010</date>
    <body>Thanks Jamie, I'm currently working with the following watchdog.conf, to specify individual JVM's and specific users rights for each JVM.   We also use the security manager for enhanced security and we are running multiple hosts per server. http://caucho.com/resin-4.0/admin/starting-resin-watchdog.xtp#ISP watchdog management I've been dragging my feet on going to Resin 4, to let some bugs get washed out.  Do you use 4 in production environment? We do use separate watchdogs to specify host.conf.  In each host.conf file, we specify the jvm-arg for client specific java security policy. Any suggestions? Thanks! -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak Sent: Wednesday, September 29, 2010 12:57 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Watchdog binding Just out of curiosity, is there a reason why you're trying to configure or manipulate the watchdog? Are you attempting to isolate users by giving multiple users their own watchdog processes (and child Resin processes)? If all you want to do is emulate the Apache front-end + Resin back-end paradigm with a pure Resin solution, you don't really need to do anything special to the watchdog at all. Over-simplifying things, it's really just there to help you start/stop/keep an eye on your Resin processes. http://caucho.com/resin-4.0/admin/http-virtual-hosts.xtp#Server per virtual host In those two examples, the "Resin web-tier" essentially performs Apache's role in this new configuration. When you start up the web-tier cluster, that's the process that will bind to port 80 on an IP address to load balance traffic to the individual Resin clusters on the back-end. The "Back-end JVM" is where you'd actually configure and manage the individual clusters/virtual hosts. These back-end JVMs can also bind to port 80 on different IP addresses than the web-tier, if you have some sites with their own dedicated IPs. If you think it would help beyond looking at the examples in their documentation, I could provide you with a stripped down version of one of the configs that we use. We have a mix of sites with dedicated and shared IP addresses. The dedicated sites function independently of the web-tier, since it's more efficient to send the traffic directly to the cluster than to send it through the web-tier. The sites that share an IP address use the web-tier for front-end request handling and load balancing to the cluster on the back-end. It's similar to, but not exactly like, the examples in the documentation. It may help to see it another way if their docs are confusing you, though. Let me know? -Jamie -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Marketing - IncorporateFast.com Sent: Wednesday, September 29, 2010 12:19 AM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] Watchdog binding Hi Jamie, I'm using the watchdog.conf, and it seems to be acting a bit differently. Couple of questions: 1.)  When using watchdog.conf, can a resin load balancer be used?  If so, how/where? 2.)  When using watchdog.conf, are unique IP's required? 3.)  If load balancer is used, I can point to a loadbalancer.conf, but what goes into the &amp;lt;resin-root&amp;gt; folder? It seems like watchdog.conf requires unique IP.  Right now I have many with unique IP, but would like to setup some shared IPs as well.  Appreciate your help &amp;amp; time! -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak Sent: Monday, September 27, 2010 11:34 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Watchdog binding No, only one process can bind to a port. To get around that, you can either use a web-tier cluster to load balance traffic to the correct cluster. The documentation has a few different examples: http://caucho.com/resin-4.0/admin/http-virtual-hosts.xtp Specifically, look at the "Server per virtual host" example with the back-end JVM and the web-tier load balancer. Hope that gets you started. -Jamie</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Watchdog binding</header>
    <date>Thu Sep 30 19:19:18 CEST 2010</date>
    <body>Hi Jamie, I upgraded yesterday to Resin 4, with your suggestions and it is working perfectly.  There also seems to be a marked performance boost which is nice. Upgrading to 4 was a great suggestion, thanks! The watchdog.conf file, does provide a very nice and efficient way to start/stop resin instances, however I just couldn't get it config'd for my uses with shared IPs, load balancing, many hosts, etc. The big issue that I find now, is that when modifying resin.xml file, all hosts attached to the load-balancer get restarted.  Do you somehow segregate your hosts in a way that allow you to add new hosts for load balancing without restarting all of the hosts? Thanks! Joey -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Marketing - IncorporateFast.com Sent: Wednesday, September 29, 2010 1:34 PM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] Watchdog binding Thanks Jamie, I'm currently working with the following watchdog.conf, to specify individual JVM's and specific users rights for each JVM.   We also use the security manager for enhanced security and we are running multiple hosts per server. http://caucho.com/resin-4.0/admin/starting-resin-watchdog.xtp#ISP watchdog management I've been dragging my feet on going to Resin 4, to let some bugs get washed out.  Do you use 4 in production environment? We do use separate watchdogs to specify host.conf.  In each host.conf file, we specify the jvm-arg for client specific java security policy. Any suggestions? Thanks! -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak Sent: Wednesday, September 29, 2010 12:57 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Watchdog binding Just out of curiosity, is there a reason why you're trying to configure or manipulate the watchdog? Are you attempting to isolate users by giving multiple users their own watchdog processes (and child Resin processes)? If all you want to do is emulate the Apache front-end + Resin back-end paradigm with a pure Resin solution, you don't really need to do anything special to the watchdog at all. Over-simplifying things, it's really just there to help you start/stop/keep an eye on your Resin processes. http://caucho.com/resin-4.0/admin/http-virtual-hosts.xtp#Server per virtual host In those two examples, the "Resin web-tier" essentially performs Apache's role in this new configuration. When you start up the web-tier cluster, that's the process that will bind to port 80 on an IP address to load balance traffic to the individual Resin clusters on the back-end. The "Back-end JVM" is where you'd actually configure and manage the individual clusters/virtual hosts. These back-end JVMs can also bind to port 80 on different IP addresses than the web-tier, if you have some sites with their own dedicated IPs. If you think it would help beyond looking at the examples in their documentation, I could provide you with a stripped down version of one of the configs that we use. We have a mix of sites with dedicated and shared IP addresses. The dedicated sites function independently of the web-tier, since it's more efficient to send the traffic directly to the cluster than to send it through the web-tier. The sites that share an IP address use the web-tier for front-end request handling and load balancing to the cluster on the back-end. It's similar to, but not exactly like, the examples in the documentation. It may help to see it another way if their docs are confusing you, though. Let me know? -Jamie -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Marketing - IncorporateFast.com Sent: Wednesday, September 29, 2010 12:19 AM To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] Watchdog binding Hi Jamie, I'm using the watchdog.conf, and it seems to be acting a bit differently. Couple of questions: 1.)  When using watchdog.conf, can a resin load balancer be used?  If so, how/where? 2.)  When using watchdog.conf, are unique IP's required? 3.)  If load balancer is used, I can point to a loadbalancer.conf, but what goes into the &amp;lt;resin-root&amp;gt; folder? It seems like watchdog.conf requires unique IP.  Right now I have many with unique IP, but would like to setup some shared IPs as well.  Appreciate your help &amp;amp; time! -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak Sent: Monday, September 27, 2010 11:34 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Watchdog binding No, only one process can bind to a port. To get around that, you can either use a web-tier cluster to load balance traffic to the correct cluster. The documentation has a few different examples: http://caucho.com/resin-4.0/admin/http-virtual-hosts.xtp Specifically, look at the "Server per virtual host" example with the back-end JVM and the web-tier load balancer. Hope that gets you started. -Jamie</body>
  </mail>
  <mail>
    <header>[Resin-interest] 'define' is an unknown function</header>
    <date>Thu Sep 23 10:08:44 CEST 2010</date>
    <body>Hi, the following code snippet : ... ... produces the following exception: com.caucho.quercus.QuercusErrorException: eval::3: Fatal Error: 'define' is an unknown function. at com.caucho.quercus.env.Env.error(Env.java:6415) at com.caucho.quercus.env.Env.error(Env.java:6301) at com.caucho.quercus.env.Env.error(Env.java:5985) at com.caucho.quercus.expr.CallExpr.evalImpl(CallExpr.java:198) at com.caucho.quercus.expr.CallExpr.eval(CallExpr.java:151) ... why ? Regards Thorsten</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 'define' is an unknown function</header>
    <date>Fri Sep 24 03:52:06 CEST 2010</date>
    <body>I had this problem once. If I remember well, I used getQuercus() to get the QuercusContext. Then I used init() or start(), maybe both, I don't remember correctly and the javadoc [1] doesn't help. I hope it helps. Alexandre. [1] http://www.caucho.com/resin-javadoc/index.html 2010/9/23 Thorsten Kiefer &amp;lt;t.kie...@westernacher.org&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 'define' is an unknown function</header>
    <date>Fri Sep 24 13:49:04 CEST 2010</date>
    <body>If I use init(), I get a NullPointerException : java.lang.NullPointerException at com.caucho.quercus.env.LongValue.toStringBuilder(LongValue.java:239) at com.caucho.quercus.env.Value.toStringValue(Value.java:985) at com.caucho.quercus.env.Value.toStringValue(Value.java:977) at com.caucho.quercus.module.IniDefinition.getAsStringValue(IniDefinition.java:258) at com.caucho.quercus.env.Env.getIni(Env.java:1773) at com.caucho.quercus.env.Env.getErrorMask(Env.java:6257) at com.caucho.quercus.env.Env.error(Env.java:6373) at com.caucho.quercus.env.Env.error(Env.java:6355) at com.caucho.quercus.env.Env.notice(Env.java:6198) at com.caucho.quercus.env.Env.getEnvVar(Env.java:2026) at com.caucho.quercus.env.Env.getValue(Env.java:1856) at com.caucho.quercus.expr.VarExpr.eval(VarExpr.java:142) .... -Thorsten Am 24.09.2010 03:51, schrieb Alexandre Bertails: http://www.caucho.com/resin-javadoc/index.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin and javamail</header>
    <date>Tue Sep 21 18:16:56 CEST 2010</date>
    <body>Out of curiosity, why does Resin distribute with javamail-141.jar?  Is there some built-in mailing functionality that Resin ships with?  If so, is there a URL pointing to some documentation on how to take advantage of it? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin and javamail</header>
    <date>Tue Sep 21 19:08:12 CEST 2010</date>
    <body>It's primarily a JavaEE requirement that we ship with JavaMail. We do have three things that use JavaMail: Quercus, the mail log-handler, and the PingMailer. I've put up a wiki link for the mail log-handler at http://wiki.caucho.com/Cookbook:_Mail_Log-Handler using CanDI-style syntax (although, you'll need to wait for 4.0.11 for that syntax to work, since I checked the example and the log-handler needed an update for the CanDI syntax.) The mail log-handler is a standard java.util logging handler that sends log messages to a mail address. Since log-handles are additive, the messages will continue to be sent to the log file. The ping mailer is being revamped and folded into Resin's health check system ( http://wiki.caucho.com/Admin:_Health ), so we're not ready to document the new form of capability yet. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin and javamail</header>
    <date>Wed Sep 22 23:41:25 CEST 2010</date>
    <body>Ah, this is excellent info. Aaron http://wiki.caucho.com/Cookbook:_Mail_Log-Handler using CanDI-style http://wiki.caucho.com/Admin:_Health ), so we're not ready to http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] bean definition in resin 3.1 resin.conf</header>
    <date>Fri Sep 17 01:33:56 CEST 2010</date>
    <body>Hi all. I'm trying to update my resin 3.0 config file to resin 3.1 and I'm not sure how to convert a bean definition. I'm creating a bean like this: In resin 3.0, this calls Have.init() and Have.setPropertyFileDirectory() In resin 3.1, Have.init() is not called. How do I get it to be called? Thanks!</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] bean definition in resin 3.1 resin.conf</header>
    <date>Fri Sep 17 01:49:12 CEST 2010</date>
    <body>Try adding a @javax.annotation.PostConstruct annotation to the init() method. Resin 3.0 was detecting the init methods by the method name. Resin 3.1 and later uses the standard annotations. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] How to specify JVM encoding in Mac OS X ?</header>
    <date>Thu Sep 16 13:40:55 CEST 2010</date>
    <body>I am a newbie of Mac OS X  , My Resin (4.0.10) has an encoding problem under mac os x ... JVM starts without UTF-8 encoding , results in problems when parsing resources... This is resin's startup logs : Resin-4.0.10 (built Tue, 24 Aug 2010 10:49:02 PDT) Copyright(c) 1998-2010 Caucho Technology.  All rights reserved. Using Resin(R) Open Source under the GNU Public License (GPL). See http://www.caucho.com for information on Resin Professional, including caching, clustering, JNI acceleration, and OpenSSL integration. Starting Resin on Thu, 16 Sep 2010 04:59:08 +0800 (CST) 1.6.0_20-b02-279-10M3065, Big5, zh 16.3-b01-279, 64, mixed mode, Apple Inc. It shows the JRE starts with Big5 encoding ... How to enforce it to UTF8 ? I have specified utf-8 in resin.xml : PS : The whole WAR works like a charm in Linux ...: UTF-8, zh mixed mode, Sun Microsystems Inc.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to specify JVM encoding in Mac OS X ?</header>
    <date>Thu Sep 16 14:52:22 CEST 2010</date>
    <body>I use resin on mac with no encoding problem. Look at this page : http://www.architectedulogiciel.fr/tutorials/resinutf8.php http://www.caucho.com for information on Resin Professional, http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to specify JVM encoding in Mac OS X ?</header>
    <date>Thu Sep 16 18:47:44 CEST 2010</date>
    <body>Try setting the file.encoding system property: Emil http://www.caucho.com for information on Resin Professional, http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Strange resin behavior when directory called with	missing final slash</header>
    <date>Wed Sep 15 23:44:31 CEST 2010</date>
    <body>I'm seeing a strange behavior where resin is redirecting (302) a url when you leave off the final / in the URL: example: if I hit www.somehost.com/en I get this output: GET http://www.somehost.com/en 302 Found to http://www.somehost.com/en/ GET http://www.somehost.com/en/ 200 OK (text/html) If I hit www.somehost.com/en/ I get this output: GET http://www.qa.mfg.com/en/ 200 OK (text/html) The main reason this is a problem, is when search engines index you they will keep a 302 and index it differently versus a 301.  It would actually be better if we could change it to a 301, then google,etc wouldn't consider www.somehost.com/en a different URL than www.somehost.com/en/ which currently happens when someone links to the directory without the final / Any thoughts? -jk</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Strange resin behavior when directory called with	missing final slash</header>
    <date>Wed Sep 15 23:57:31 CEST 2010</date>
    <body>http://www.somehost.com/en In this situation, what is "en"? Specifically, is there a directory corresponding to it? Or a en/index.jsp or some servlet mapping? The original reason for the redirect was things like en/index.jsp where relative links wouldn't be handled by the browser correctly if we immediately dispatch to en/index.jsp. -- Scott http://www.somehost.com/en http://www.somehost.com/en/ http://www.somehost.com/en/ http://www.somehost.com/en/ http://www.qa.mfg.com/en/ http://www.somehost.com/en http://www.somehost.com/en/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Strange resin behavior when directory called with missing final slash</header>
    <date>Thu Sep 16 00:07:18 CEST 2010</date>
    <body>Sorry Scott, its a directory, there is no servlet mapping.  It has a index.jsp file which is served. Full URL is http://www.somehost.com/en/index.jsp The browser just shows it as http://www.somehost.com/en/ -jk http://www.somehost.com/en http://www.somehost.com/en http://www.somehost.com/en/ http://www.somehost.com/en/ http://www.somehost.com/en/ http://www.qa.mfg.com/en/ http://www.somehost.com/en http://www.somehost.com/en/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Strange resin behavior when directory called with missing final slash</header>
    <date>Thu Sep 16 00:19:10 CEST 2010</date>
    <body>http://www.somehost.com/en/index.jsp The browser just http://www.somehost.com/en/ Ok, so changing to 301 would be better? That could be changed fairly easily. -- Scott mailto:f...@caucho.com http://www.somehost.com/en http://www.somehost.com/en http://www.somehost.com/en http://www.somehost.com/en/ http://www.somehost.com/en/ http://www.somehost.com/en/ http://www.somehost.com/en/ http://www.qa.mfg.com/en/ http://www.somehost.com/en http://www.somehost.com/en http://www.somehost.com/en/ http://www.somehost.com/en/ mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Strange resin behavior when directory called	with missing final slash</header>
    <date>Thu Sep 16 00:41:03 CEST 2010</date>
    <body>Yeah it's better from a seo and indexing perspective. Sent from my iPhone http://www.somehost.com/en/index.jsp The browser just http://www.somehost.com/en/ mailto:f...@caucho.com http://www.somehost.com/en http://www.somehost.com/en http://www.somehost.com/en http://www.somehost.com/en/ http://www.somehost.com/en/ http://www.somehost.com/en/ http://www.somehost.com/en/ http://www.qa.mfg.com/en/ http://www.somehost.com/en http://www.somehost.com/en http://www.somehost.com/en/ http://www.somehost.com/en/ mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0 multipart request handling</header>
    <date>Sat Sep 11 01:01:54 CEST 2010</date>
    <body>I have been using Resin 4.0.7 and I discovered that Resin is parsing multipart requests and putting the parameters into the normal request object (file is cached to disc and the path is in the request object). Now I upgraded to 4.0.10 and suddenly the multipart request is no longer parsed automatically. Is this intentional? I was totally celebrating not having to use O'Reilly and championing Resin for its brilliance. But now it appears I have to resurrect all my old logic for handling multipart requests. Please help! Bug or fix? matt</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 multipart request handling</header>
    <date>Sat Sep 11 01:02:00 CEST 2010</date>
    <body>Oh and I upgraded from Resin 4.0.7 to Resin Pro 4.0.10. Maybe the pro version can't include some library due to licensing?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 multipart request handling</header>
    <date>Sat Sep 11 01:35:08 CEST 2010</date>
    <body>Hi Matthew, Can you make sure to set parameter &amp;lt;multipart-form enable="true"/&amp;gt; in your WEB-INF/resin-web.xml? http://caucho.com/ns/resin" We had to change the default to false for 3.0  spec compliance. There is also new 3.0 API to deal with multipart/form-data encoded requests. http://blog.caucho.com/?p=237 Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 multipart request handling</header>
    <date>Sat Sep 11 01:59:01 CEST 2010</date>
    <body>Thanks Alex. Works beautifully! http://caucho.com/ns/resin" http://blog.caucho.com/?p=237 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Spring / Struts / Hibernate / CanDi</header>
    <date>Fri Sep 10 20:16:58 CEST 2010</date>
    <body>Hi, We are working to make some structural changes to our existing application. We don't currently use any of the following: 1.)    Struts / Spring / Hibernate combination 2.)    Spring and Hibernate only 3.)    Struts &amp;amp; Hibernate only 4.)    Resin 4 now has CanDi Before my head explodes..Any suggestions? Joey</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin Rewrite</header>
    <date>Tue Sep 07 20:22:41 CEST 2010</date>
    <body>Hi, I'm converting rewrite from apache to resin. How do I do this in resin? RewriteRule /list/(.+)/(.+)/(.+)\.html /productlist.jsp?sp=$1&amp;amp;start=$2&amp;amp;cid=$3 [PT] I've been trying this..but resin is not happy with it. Thanks Joey</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Rewrite</header>
    <date>Tue Sep 07 23:27:06 CEST 2010</date>
    <body>I found out what I was doing wrong..ampersand cannot be used in target.  It must use &amp;amp;amp; in place of ampersand. From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Marketing - IncorporateFast.com Sent: Tuesday, September 07, 2010 11:25 AM To: 'General Discussion for the Resin application server' Subject: [Resin-interest] Resin Rewrite Hi, I'm converting rewrite from apache to resin. How do I do this in resin? RewriteRule /list/(.+)/(.+)/(.+)\.html /productlist.jsp?sp=$1&amp;amp;start=$2&amp;amp;cid=$3 [PT] I've been trying this..but resin is not happy with it. Thanks Joey</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0 with Apache 2.2</header>
    <date>Sat Sep 04 21:18:24 CEST 2010</date>
    <body>have been running Resin 4.0.7 behind Apache 2.2. I recently deployed a war file (abc.war) and Apache gives me a 404: "The requested URL /abc was not found on this server." My ROOT application mostly works fine except for my WordPress blog which has the same issue as this abc.war. I explicitly configured httpd.conf to add a mapping for my blog ("/blog/*") and my war ("/abc/*") but Apache will only server subfolders explicitly mapped in the httpd.conf file (e.g. the * does not seem to indicate serve all file and subfolders). I have worked around this by configuring several "Location" tags in httpd.conf as demonstrated below. Is this an issue with my configuration or Resin? I am running on Debian 5 x86_64, Java 6, Resin 4.0.7. # # mod_caucho Resin Configuration # LoadModule caucho_module /usr/lib/apache2/modules/mod_caucho.so ResinConfigServer localhost 6800 CauchoConfigCacheDirectory /tmp #CauchoStatus yes SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 with Apache 2.2</header>
    <date>Sun Sep 05 11:48:20 CEST 2010</date>
    <body>On the same version of Resin and Apache (Resin 4.0.7 behind Apache 2.2), if I use SetHandler caucho-request This works fine forn any URI starting with abc including /abc  , /abc/ ,/abc/xx.jsp , /abc/d/e/f.jsp The only difference I can see is that I don't use /ResinConfigServer/ but /CauchoHost/ in my httpd.conf. You can also evaluate the use of /LocationMatch/ in place of /Location/ Andrea have been running Resin 4.0.7 behind Apache 2.2. I recently deployed a war file (abc.war) and Apache gives me a 404: "The requested URL /abc was not found on this server." My ROOT application mostly works fine except for my WordPress blog which has the same issue as this abc.war. I explicitly configured httpd.conf to add a mapping for my blog ("/blog/*") and my war ("/abc/*") but Apache will only server subfolders explicitly mapped in the httpd.conf file (e.g. the * does not seem to indicate serve all file and subfolders). I have worked around this by configuring several "Location" tags in httpd.conf as demonstrated below. Is this an issue with my configuration or Resin? I am running on Debian 5 x86_64, Java 6, Resin 4.0.7. # # mod_caucho Resin Configuration # LoadModule caucho_module /usr/lib/apache2/modules/mod_caucho.so ResinConfigServer localhost 6800 CauchoConfigCacheDirectory /tmp #CauchoStatus yes SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request SetHandler caucho-request</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 with Apache 2.2</header>
    <date>Sun Sep 05 18:47:34 CEST 2010</date>
    <body>Thanks for saving my sanity. Removing the "/*" seems to have done the trick. matt http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] &amp;lt;watchdog-manager&amp;gt;</header>
    <date>Fri Sep 03 21:28:24 CEST 2010</date>
    <body>When using the &amp;lt;watchdog-manager&amp;gt;, the examples show Need help with following: 1.) Information about resin.xml file detailed above.  Typcial resin.conf files include a port to open, typically port 80. However, when running many hosts with separate JVM's behind apache we are specifying many http ports, like 8080,8081,8082, etc. How does the watchdog deal with multiple ports, do we still need a resin.conf file?  I need a bit more info before I can put together all of the examples. I'd love to pull Apache out of the equation, but right now its redirection the proper host to the proper port. Thanks!</body>
  </mail>
  <mail>
    <header>[Resin-interest] Best way to access compiled PHP code from within	Java</header>
    <date>Tue Aug 31 19:32:34 CEST 2010</date>
    <body>Hi all, I'm trying to programmatically execute PHP scripts from within Java [1] (actually Scala in my case but it's the same). I took some inspiration from CliQuercus.java as some features were not activated by default. For example, the database connection is not activated by default but it's works fine now: I can execute any PHP script. Now, I'm trying to access the functions and classes that are available in the compiled pages, using the Quercus Java API [2]. The documentation is not really helpful there and I don't find the documentation explaining the whole architecture. I understand that the main classes are QuercusContext, Env and QuercusPage, but I don't understand the exact relations between them. For example, I never know where I have to call init() and start(): I'm not sure about the semantics of them, if they are needed or not and on which classes I'm supposed to call them. I also see several getClass functions... Here is what I have so far: [[ val context = new QuercusContext context.init() context.start() context.setDatabase(null) context def update(name:String, value:String):Unit = quercusContext.setIni(name, value) val path:Path = quercusContext.getPwd.lookup(filename.getAbsolutePath) val page:QuercusPage = quercusContext.parse(path) val os:WriteStream = new WriteStream(StdoutStream.create) os.setNewlineString("\n") os.setEncoding("utf-8") val env:Env = quercusContext.createEnv(page, os, null, null) env.start() env.execute() env.close() os.flush() val phpfile = new File("/home/betehess/php/test/index.php") val quercus = new QuercusLike quercus("include_path") = ".:/home/betehess/php/" quercus.execute(phpfile) ]] My goal: * compile a bunch of PHP files * instantiating PHP objects from Java (these objects are defining in the compiled files) * calling the methods for these PHP objects Alexandre Bertails, W3C Systems Team. [1] http://wiki.caucho.com/Quercus:_Command_Line_Interface_%28CLI%29#Programmatically_executing_PHP_scripts_from_within_Java [2] http://wiki.caucho.com/Quercus:_Command_Line_Interface_%28CLI%29#Returning_objects_example</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin.exe server root directory in 4.0.10</header>
    <date>Tue Aug 31 14:02:32 CEST 2010</date>
    <body>Trying to launch Resin 4.0.10 on Windows with the -server-root / -server_root / -root-directory / --root-directory but resin.exe seems to ignore all of them. Is there an undocumented change, or is there a bug in resin.exe in the 4.0.10 (pro) release? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin.exe server root directory in 4.0.10</header>
    <date>Tue Aug 31 18:55:34 CEST 2010</date>
    <body>Do you see the same issue with java -jar lib/resin.jar start? That's certainly a bug, although I'm not sure why that would be different on windows. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin.exe server root directory in 4.0.10</header>
    <date>Tue Aug 31 20:37:16 CEST 2010</date>
    <body>That's a bug in resin.exe. You can work around it with root-directory attribute to &amp;lt;server tag. Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin.exe server root directory in 4.0.10</header>
    <date>Wed Sep 01 09:59:58 CEST 2010</date>
    <body>Scott Ferguson wrote (2010-08-31 18:54): No that works fine. Alex wrote (2010-08-31 20:36): Yes, that's what I thought. For the mailing list record, here is the Mantis issue http://bugs.caucho.com/view.php?id=4196 --</body>
  </mail>
  <mail>
    <header>[Resin-interest] Custom startup recommendation</header>
    <date>Tue Aug 31 10:10:42 CEST 2010</date>
    <body>(I am not by far a *nix wizz, nor the admin of our production servers, so please bear with me) Historically we have edited the /etc/init.d/resin script to customize the Resin startup, such as setting the server root directory or assigning CPU cores with taskdef. In the 4.0.x branch this file is overwritten at each minor upgrade by "make install". Does this mean this is (no longer) the recommended way of configuring the startup, and there is some other means we should look at instead...? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Custom startup recommendation</header>
    <date>Tue Aug 31 14:21:06 CEST 2010</date>
    <body>Depends on the version of Unix you are on exactly.  I customized the init script quite a bit, so I don't use the one which ships with Resin.  Which version/distribution are you using?  I can share the one I use if you'd like. -jk http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Custom startup recommendation</header>
    <date>Tue Aug 31 14:39:18 CEST 2010</date>
    <body>We are on RedHat Enterprise Linux 4/5. Note that the question is not the configuration itself, but *where* is the proper place for such configuration. The file we use now is overwritten with "the one which ships with Resin" on every Resin update. jkowall wrote (2010-08-31 14:19): Depends on the version of Unix you are on exactly.  I customized the init script quite a bit, so I don't use the one which ships with Resin.  Which version/distribution are you using?  I can share the one I use if you'd like. -jk On Tue, Aug 31, 2010 at 4:10 AM, Mattias Jiderhamn mailto:mj-li...@expertsystems.se (I am not by far a *nix wizz, nor the admin of our production servers, so please bear with me) Historically we have edited the /etc/init.d/resin script to customize the Resin startup, such as setting the server root directory or assigning CPU cores with taskdef. In the 4.0.x branch this file is overwritten at each minor upgrade by "make install". Does this mean this is (no longer) the recommended way of configuring the startup, and there is some other means we should look at instead...? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Custom startup recommendation</header>
    <date>Tue Aug 31 14:46:53 CEST 2010</date>
    <body>On RHEL, it should be /etc/init.d/ for sure, and you manage the startup scripts with /sbin/sysconfig -jk http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Custom startup recommendation</header>
    <date>Tue Aug 31 15:21:34 CEST 2010</date>
    <body>How then are you supposed to go about upgrading Resin? Is there a parameter to the "configure" script to avoid creating/overwriting /etc/init.d/resin? If not, could such parameter be added...? jkowall wrote (2010-08-31 14:45): On RHEL, it should be /etc/init.d/ for sure, and you manage the startup scripts with /sbin/sysconfig -jk On Tue, Aug 31, 2010 at 8:38 AM, Mattias Jiderhamn mailto:mj-li...@expertsystems.se We are on RedHat Enterprise Linux 4/5. Note that the question is not the configuration itself, but *where* is the proper place for such configuration. The file we use now is overwritten with "the one which ships with Resin" on every Resin update. jkowall wrote (2010-08-31 14:19): Depends on the version of Unix you are on exactly.  I customized the init script quite a bit, so I don't use the one which ships with Resin.  Which version/distribution are you using?  I can share the one I use if you'd like. -jk On Tue, Aug 31, 2010 at 4:10 AM, Mattias Jiderhamn mailto:mj-li...@expertsystems.se (I am not by far a *nix wizz, nor the admin of our production servers, so please bear with me) Historically we have edited the /etc/init.d/resin script to customize the Resin startup, such as setting the server root directory or assigning CPU cores with taskdef. In the 4.0.x branch this file is overwritten at each minor upgrade by "make install". Does this mean this is (no longer) the recommended way of configuring the startup, and there is some other means we should look at instead...? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Custom startup recommendation</header>
    <date>Tue Aug 31 18:28:18 CEST 2010</date>
    <body>I think we can count this as a bug: http://bugs.caucho.com/view.php?id=4195 We should at least have an option not to override your existing /etc/init.d/resin -- we do recommend editing this file with your local changes. Best, Emil http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Custom startup recommendation</header>
    <date>Tue Aug 31 20:38:21 CEST 2010</date>
    <body>I don't use the make install part of the makefile :) -jk http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] java.io.IOException: can't clear response after	writing headers</header>
    <date>Thu Aug 26 20:56:58 CEST 2010</date>
    <body>Hi all, Some JSPs produce following error Stacktrace in our Java-log: java.io.IOException: can't clear response after writing headers at com.caucho.server.http.ResponseStream.clear(ResponseStream.java:233) at com.caucho.server.http.HttpServletResponseImpl.getOutputStream(HttpServl etResponseImpl.java:137) : : The Exception gets thrown at the line This code work on all other resin installations (for years now) The only difference to our other resin installations that I'm aware of, is that resin and apache are on two separate machines now. We use Resin Pro 4.0.9. Any ideas what might cause this exception? Regards, Martin "The information in this e-mail and in any attachments is confidential and intended solely for the attention and use of the named addressee(s). This information may be subject to legal, professional or other privilege and further distribution of it is strictly prohibited without our authority. If you are not the intended recipient, you are not authorised to and must not disclose, copy, distribute, or retain this message or any part of it, and should notify us immediately. This footnote also confirms that this email has been automatically scanned for the presence of computer viruses, profanities and certain file types."</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.io.IOException: can't clear response after writing headers</header>
    <date>Fri Aug 27 19:35:58 CEST 2010</date>
    <body>Resin is being more strict about conforming to the servlet/JSP spec. Is there an output flush() anywhere before that clear()? -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.io.IOException: can't clear response	after writing headers</header>
    <date>Mon Aug 30 17:34:58 CEST 2010</date>
    <body>com.caucho.server.http.ResponseStream.clear(ResponseStream.java:233) letResponseImpl.java:137) of, Yes there is, and removing the out.flush() resolves the issue. Was that 'being more strict' a recent change? The same code works on a different server with Resin 4.0.0 installed. Regards, Martin "The information in this e-mail and in any attachments is confidential and intended solely for the attention and use of the named addressee(s). This information may be subject to legal, professional or other privilege and further distribution of it is strictly prohibited without our authority. If you are not the intended recipient, you are not authorised to and must not disclose, copy, distribute, or retain this message or any part of it, and should notify us immediately. This footnote also confirms that this email has been automatically scanned for the presence of computer viruses, profanities and certain file types."</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.io.IOException: can't clear response	after writing headers</header>
    <date>Mon Aug 30 20:16:25 CEST 2010</date>
    <body>This is unrelated, but worth mentioning to other people converting over from Resin 3.0.x: We had this problem when converting over from Resin 3.0.x.:   The problem is that Resin 4.0.x now outputs white space in each iteration of did not.  That causes problems with Resin 3.0.x and older code that has c:redirect, sendRedirect, jsp:forward, response.reset(), and any other calls that rely on the response not being committed.   The reason is that the buffer used to cache up a response prior to writing out to response's outputStream can fill up very quickly compared with earlier versions and causes the response to commit very fast (with a ton of white space to boot). The fix is, if you are doing &amp;lt;jsp:include page=""&amp;gt; with loops in it, to do: instead.  Instead of the output being dumped directly to response's output buffer, the white space will go to a variable that you can ignore (and comes in handy a development environment). If you are not including/importing anything and have a bunch of throwing those in a second JSP and doing a &amp;lt;c:import .. var="debug"&amp;gt; in order to trap the white space. This way your response.buffer won't commit prematurely and you can still do redirects/resets. I know this is unrelated but we had issues with it, and I thought I would post it for others searching for redirect/clear/reset issues. Aaron http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.io.IOException: can't clear response	after writing headers</header>
    <date>Mon Aug 30 20:29:29 CEST 2010</date>
    <body>We passed the Servlet 3.0 TCK in 4.0.4, so the change would have happened before then. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] php.ini and include_path</header>
    <date>Thu Aug 26 01:58:39 CEST 2010</date>
    <body>Hi all, I have this worky partial web.xml: [[ ]] and this WEB-INF/php.ini: [[ ]] The include_path value is set as expected. (I'm using Quercus 4.0.10 and Jetty.) Alexandre Bertails, W3C Systems Team.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] php.ini and include_path</header>
    <date>Thu Aug 26 21:40:20 CEST 2010</date>
    <body>Hi, but out of curiosity, why do you need the Resin root if you're using Jetty? Thanks, Emil http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] php.ini and include_path</header>
    <date>Fri Aug 27 01:30:04 CEST 2010</date>
    <body>2010/8/26 Emil Ong &amp;lt;e...@caucho.com&amp;gt;: I'm trying to write a Java/Scala wrapper for some existing code in PHP. The first step is to make everything to work without modification in the existing code. There are plenty of require_once-like functions spread all over the code and I need to modify include_path because of them. I have found some examples on the web (basically in the forums) where you can set variables directly in "web.xml" but none of them worked that's of course a perfect workaround. Alexandre Bertails, W3C Systems, Team. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] php.ini and include_path</header>
    <date>Fri Aug 27 19:54:32 CEST 2010</date>
    <body>Hi Alexandre, Sorry, I still don't understand one point.  What are you expecting that something you think the container should set? Aside from that point, relative include paths are interpreted relative to the root directory of the webapp, so that might help in this particular case.  For example, if your include path was: include_path=WEB-INF/php This would pick up all the php files in your webapps WEB-INF/php directory. Hope that helps, Emil http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] php.ini and include_path</header>
    <date>Mon Aug 30 19:41:46 CEST 2010</date>
    <body>2010/8/27 Emil Ong &amp;lt;e...@caucho.com&amp;gt;: I've tried this solution but it doesn't work. That would be perfect if it worked out but this is not the case. Actually, the case where you set a relative path (without a '.') is not specified in the semantics of include_path [1]. After some tests, the way it's implemented in Quercus is that such a path will be concatenated with the getcwd() of the file invoking the require_once. So there are only two solutions there: * use an absolute path (which of course we don't want) * have a way to specify a path related to where the application is deployed. I'm searching for a solution like that and that's what I Does it make sense or am I going to the wrong direction? Alexandre Bertails, W3C Systems Team. [1] http://www.php.net/manual/en/ini.core.php#ini.include-path http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] php.ini and include_path</header>
    <date>Mon Aug 30 20:54:20 CEST 2010</date>
    <body>Hi Alexandre, That's much clearer -- I got thrown by the word "RESIN" and that you planned to use Jetty.  Unfortunately the variable isn't available at in php.ini at the moment.  Of course you're right that the include path is relative to the current script, so that's not a real solution. I've filed a bug to address the issue: http://bugs.caucho.com/view.php?id=4192 Best, Emil http://www.php.net/manual/en/ini.core.php#ini.include-path http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] php.ini and include_path</header>
    <date>Mon Aug 30 22:11:20 CEST 2010</date>
    <body>2010/8/30 Emil Ong &amp;lt;e...@caucho.com&amp;gt;: http://bugs.caucho.com/view.php?id=4192 And the choice of the constant is perfect :-) Thanks for having filled this report (I was not sure if it was actually a bug). Alexandre Bertails, W3C Systems Team. http://www.php.net/manual/en/ini.core.php#ini.include-path http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4, maven plugin can not find resin's own .tld</header>
    <date>Thu Aug 19 21:03:40 CEST 2010</date>
    <body>Hello everyone again :-) I continued to play around with the maven plugin from resin 4 $ mvn -e resin:jspc ... [INFO] com.caucho.jsp.JspLineParseException: A.jsp:1: ' http://java.sun.com/jstl/core ' has no matching taglib-uri.  Taglibs specified with an absolute URI must either be: 1) specified in the web.xml 2) defined in a jar's .tld in META-INF 3) defined in a .tld in WEB-INF 4) predefined by Resin 1:  &amp;lt;%@ taglib prefix="c" uri=" http://java.sun.com/jstl/core"% ... 1,2,3) is valid, since i did not add my own "jar" for the core-tags, i rely on resin for that. So it should be 4), predefined by Resin. But why the plugin can not find it? Running this "A.jsp" in the Resin Application is no problem, on the other hand. I even checked the downoaded resin.jar, the core tld is there: $ ~/.m2/repository/com/caucho/resin/4.0-SNAPSHOT$ jar tvf resin 4.0-SNAPSHOT.jar | grep core-el.tld I checked the uri of that core-el.tld: http://java.sun.com/jstl/core So this should match properly. Manually i copied then the core-el.ld into the "target/app/WEB-INF/" folder as suggested in 3). And this works. The plugin finds it. But only as a work around. Shouldnt the maven plugin also look into the resin.jar for tld? Or should not the TldManager at least know about its own tlds? Pity, the maven plugin is not available as source code. But maybe i am just doing something wrong. :-) -- Neu: GMX De-Mail - Einfach wie E-Mail, sicher wie ein Brief! Jetzt De-Mail-Adresse reservieren: http://portal.gmx.net/de/go/demail</body>
  </mail>
  <mail>
    <header>[Resin-interest] Forward or Redirect</header>
    <date>Thu Aug 19 18:17:45 CEST 2010</date>
    <body>Ok..so I believe I will use forward, but the question still remains can I have it exact match ONLY if it has nothing following the ".com", as in the http://hmisupport.hiw.com because if I forward anything else, the application wouldn't work.  The regexp doc isn't clear on what all the special characters mean. Thx, Steve Francis Technical Advisor - zSeries, zLinux, z/OS IHG Alpharetta Data Center Ph:  770-442-7157 Cell:  770-906-3122 IM: francisihg -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of resin-interest-requ...@caucho.com Sent: Thursday, August 19, 2010 10:55 AM To: resin-interest@caucho.com Subject: resin-interest Digest, Vol 50, Issue 20 Send resin-interest mailing list submissions to resin-interest@caucho.com To subscribe or unsubscribe via the World Wide Web, visit http://maillist.caucho.com/mailman/listinfo/resin-interest or, via email, send a message with subject or body 'help' to resin-interest-requ...@caucho.com You can reach the person managing the list at resin-interest-ow...@caucho.com When replying, please edit your Subject line so it is more specific than "Re: Contents of resin-interest digest..." Today's Topics: 1. Redirect or forwarding (Francis, Steve (IHG)) 2. ConcurrentModificationException when      InjectManager.findByName (Wesley Wu) 3. Re: Redirect or forwarding (Riccardo Cohen) 4. JSP error page -- javax.servlet.error.exception   not accessible? (Marcin Koziej) 5. Resin 4,  maven plugin complains about session-config (Olaf Krische) ---------------------------------------------------------------------- Message: 1 Date: Wed, 18 Aug 2010 14:52:29 -0400 Subject: [Resin-interest] Redirect or forwarding Message-ID: Content-Type: text/plain; charset="us-ascii" I'm not sure if I want a redirect of a forward here.  I'll explain.  I have a linux host with multpile IP addresses, and therefore, multiple DNS names.  I'd like to be able to send requests for a base dns name with nothing after the .com to a specific application. http://hmisupportqa.hiw.com http://hmisupportqa.hiw.com/ http://hmisupportqa.hiw.com/support/SupportServer http://hmisupportqa.hiw.com/support/SupportServer and http://hmi-qa.hiw.com http://hmi-qa.hiw.com/ http://hmi-qa.hiw.com/mqsservlet/ViewHdxMsg http://hmi-qa.hiw.com/mqsservlet/ViewHdxMsg and still allow the standard website to be viewed via http://adczlnxhmiqa1.hiw.com http://adczlnxhmiqa1.hiw.com/ What I don't want is a bad url that redirects other  valid urls such as http://hmisupportqa.hiw.com/support/DisplayHotelStatus http://hmisupportqa.hiw.com/support/DisplayHotelStatus http://hmisupportqa.hiw.com/support/SupportServer http://hmisupportqa.hiw.com/support/SupportServer break the application. Is this possible?  I couldn't really tell from the doc. Thanks, Steve Francis Technical Advisor - zSeries, zLinux, z/OS IHG Alpharetta Data Center Ph:  770-442-7157 Cell:  770-906-3122 IM: francisihg -------------- next part -------------- An HTML attachment was scrubbed... URL: http://maillist.caucho.com/pipermail/resin-interest/attachments/20100818 /85d78442/attachment-0001.html ------------------------------ Message: 2 Date: Thu, 19 Aug 2010 17:20:14 +0800 Subject: [Resin-interest] ConcurrentModificationException when InjectManager.findByName Message-ID: Content-Type: text/plain; charset=ISO-8859-1 Often happened at 30 seconds after appserver start. java.util.ConcurrentModificationException at java.util.HashMap$HashIterator.nextEntry(HashMap.java:977) at java.util.HashMap$KeyIterator.next(HashMap.java:1012) at java.util.HashMap.buildCache(HashMap.java:590) at java.util.HashMap.resize(HashMap.java:576) at java.util.HashMap.addEntry(HashMap.java:939) at java.util.HashMap.put(HashMap.java:477) at com.caucho.config.inject.InjectManager.findByName(InjectManager.java:759 ) at com.caucho.config.inject.InjectManager.getBeans(InjectManager.java:1254) at com.caucho.config.inject.InjectManager.getReferenceFactory(InjectManager .java:1268) at com.caucho.config.el.CandiElResolver.getValue(CandiElResolver.java:125) at com.caucho.el.EnvironmentLevelELResolver.getValue(EnvironmentLevelELReso lver.java:154) at com.caucho.el.EnvironmentELResolver.getValue(EnvironmentELResolver.java: 151) at com.caucho.el.StackELResolver.getValue(StackELResolver.java:143) at com.caucho.jsp.InitPageContextImpl.resolveVariable(InitPageContextImpl.j ava:88) at com.caucho.jsp.PageContextImpl$PageVariableMapper.resolveVariable(PageCo ntextImpl.java:2183) at com.caucho.el.ELParser.parseSimpleTerm(ELParser.java:702) at com.caucho.el.ELParser.parseTerm(ELParser.java:460) at com.caucho.el.ELParser.parseExpr(ELParser.java:231) at com.caucho.el.ELParser.parseInterpolate(ELParser.java:194) at com.caucho.el.ELParser.parse(ELParser.java:113) at com.caucho.jsp.JspUtil.createExpr(JspUtil.java:69) at _jsp._WEB_22dINF._templates._default._home._album._view__jsp.caucho_init (_view__jsp.java:752) at com.caucho.jsp.JspManager.loadPage(JspManager.java:422) at com.caucho.jsp.JspManager.preload(JspManager.java:357) at com.caucho.jsp.JspManager.compile(JspManager.java:236) at com.caucho.jsp.JspManager.createPage(JspManager.java:191) at com.caucho.jsp.JspManager.createPage(JspManager.java:170) at com.caucho.jsp.PageManager.getPage(PageManager.java:339) at com.caucho.jsp.PageManager.getPage(PageManager.java:269) at com.caucho.jsp.PageManager.getPage(PageManager.java:252) at com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) at com.caucho.jsp.QServlet.getPage(QServlet.java:210) at com.caucho.server.dispatch.PageFilterChain.compilePage(PageFilterChain.j ava:237) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java :144) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.j ava:287) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcher Impl.java:289) -Wesley ------------------------------ Message: 3 Date: Thu, 19 Aug 2010 12:17:15 +0200 Subject: Re: [Resin-interest] Redirect or forwarding To: General Discussion for the Resin application server Content-Type: text/plain; charset=ISO-8859-1; format=flowed I'm doing url-rewriting in code and not in conf. What I do is write some servlet mapping : In the urlmanager servlet, I'm able to redirect or forward any request based on the current context (request url and application configuration) To redirect : To forward : About the choice between forward or redirect, it depends only if you want the browser's url to change or not. This has also an effect on search engine optimization. http://hmisupportqa.hiw.com http://hmisupportqa.hiw.com/ http://hmisupportqa.hiw.com/support/SupportServer http://hmi-qa.hiw.com http://hmi-qa.hiw.com/ http://hmi-qa.hiw.com/mqsservlet/ViewHdxMsg http://adczlnxhmiqa1.hiw.com http://adczlnxhmiqa1.hiw.com/ http://hmisupportqa.hiw.com/support/DisplayHotelStatus back to the http://hmisupportqa.hiw.com/support/SupportServer as that would break http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du r?seau http://www.reflexe-conseil-centre.org ------------------------------ Message: 4 Date: Thu, 19 Aug 2010 15:38:29 +0200 Subject: [Resin-interest] JSP error page -- javax.servlet.error.exception   not accessible? To: resin-interest@caucho.com Content-Type: text/plain; charset=us-ascii Hello! I'm having trouble under resin 4.0.9, with something that was working with 4.0.7 I have an error page configured in web.xml: in which i want to access javax.servlet.error.exception property to display and log the error. After moving to Resin Pro 4.0.9, I get an error while doing this: javax.el.PropertyNotFoundException: 'servlet' is an unknown bean property of 'com.caucho.server.webbeans.ConversationContext__ResinScopeProxy' at javax.el.BeanELResolver.getValue(BeanELResolver.java:196) at com.caucho.jsp.el.PageContextELResolver.getValue(PageContextELResolver.j ava:181) at com.caucho.el.ArrayResolverExpr.getValue(ArrayResolverExpr.java:148) at com.caucho.el.ArrayResolverExpr.getValue(ArrayResolverExpr.java:139) at com.caucho.el.ArrayResolverExpr.getValue(ArrayResolverExpr.java:139) at com.caucho.el.PathExpr.getValue(PathExpr.java:142) at com.caucho.el.Expr.print(Expr.java:411) at com.caucho.config.el.CandiExpr.print(CandiExpr.java:219) at _jsp._jsp._error__jsp._jspService(_error__jsp.java:90) at _jsp._jsp._error__jsp._jspService(_error__jsp.java:38) at com.caucho.jsp.JavaPage.service(JavaPage.java:61) at com.caucho.jsp.Page.pageservice(Page.java:542) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java :194) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.j ava:286) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcher Impl.java:287) at com.caucho.server.webapp.RequestDispatcherImpl.error(RequestDispatcherIm pl.java:136) at com.caucho.server.webapp.ErrorPageManager.sendServletErrorImpl(ErrorPage Manager.java:426) at com.caucho.server.webapp.ErrorPageManager.sendServletError(ErrorPageMana ger.java:183) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.ja va:185) at com.caucho.server.cache.CacheFilterChain.doFilter(CacheFilterChain.java: 207) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterCh ain.java:92) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.j ava:286) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:789) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.ja va:662) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink .java:625) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.jav a:576) at com.caucho.network.listen.TcpSocketLink$AcceptTask.doTask(TcpSocketLink. java:1157) at com.caucho.network.listen.TcpSocketLink$ConnectionReadTask.runThread(Tcp SocketLink.java:1092) at com.caucho.network.listen.TcpSocketLink$AcceptTask.run(TcpSocketLink.jav a:1124) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:169) The original exception object is lost. Is it a resin bug, or should I use a different method for accessing the exception object? Best regards, Marcin Koziej ------------------------------ Message: 5 Date: Thu, 19 Aug 2010 16:53:16 +0200 Subject: [Resin-interest] Resin 4,      maven plugin complains about session-config To: resin-interest@caucho.com Content-Type: text/plain; charset="utf-8" Hello, is anybody else using the maven plugin (4.0-SNAPSHOT) for resin? I have three problems right now, but i start with this one: The plugin gets confused by the line session-config in the web.xml: $ mvn -e resin:jspc WEB-INF/web.xml:245: com.caucho.server.webapp.WebApp.createSessionConfig(): java.lang.IllegalStateException: Server is not active in this context EnvironmentClassLoader[web-app:] 244: Removing the lines solves the problem "for compiling". The web.xml uses: " http://java.sun.com/dtd/web-app_2_3.dtd" Can anybody verify this? -- GMX DSL SOMMER-SPECIAL: Surf &amp;amp; Phone Flat 16.000 f?r nur 19,99 ?/mtl.!* http://portal.gmx.net/de/go/dsl ------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Forward or Redirect</header>
    <date>Thu Aug 19 18:42:50 CEST 2010</date>
    <body>http://hmisupport.hiw.com because if I forward anything else, the If you use regexp="^/$" you'll exactly match the root. The "^" means "only match at the beginning" and the "$" means "only match at the end." So "^/$" matches exactly the root and nothing else. -- Scott mailto:resin-interest-boun...@caucho.com ] On Behalf Of http://maillist.caucho.com/mailman/listinfo/resin-interest http://hmisupportqa.hiw.com http://hmisupportqa.hiw.com/ http://hmisupportqa.hiw.com/support/SupportServer http://hmisupportqa.hiw.com/support/SupportServer http://hmi-qa.hiw.com http://hmi-qa.hiw.com/ http://hmi-qa.hiw.com/mqsservlet/ViewHdxMsg http://hmi-qa.hiw.com/mqsservlet/ViewHdxMsg http://adczlnxhmiqa1.hiw.com http://adczlnxhmiqa1.hiw.com/ http://hmisupportqa.hiw.com/support/DisplayHotelStatus http://hmisupportqa.hiw.com/support/DisplayHotelStatus http://hmisupportqa.hiw.com/support/SupportServer http://hmisupportqa.hiw.com/support/SupportServer http://maillist.caucho.com/pipermail/resin-interest/attachments/20100818 http://hmisupportqa.hiw.com http://hmisupportqa.hiw.com/ http://hmisupportqa.hiw.com/support/SupportServer http://hmi-qa.hiw.com http://hmi-qa.hiw.com/ http://hmi-qa.hiw.com/mqsservlet/ViewHdxMsg http://adczlnxhmiqa1.hiw.com http://adczlnxhmiqa1.hiw.com/ http://hmisupportqa.hiw.com/support/DisplayHotelStatus back to the http://hmisupportqa.hiw.com/support/SupportServer as that would break http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://java.sun.com/dtd/web-app_2_3.dtd" http://portal.gmx.net/de/go/dsl http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Forward or Redirect</header>
    <date>Thu Aug 19 18:52:33 CEST 2010</date>
    <body>In the servlet that receives the request, you can get the current uri: request.getRequestURI() and check if it is "/" or more. the servlet-mapping cannot help you here because you're at the site root. one more thing, as you cannot redirect "/" in the conf, what I've done is putting a simple code in the very first line of the main index.jsp : This way every request on "/" will be processed also by the url manager. http://hmisupport.hiw.com because if I forward anything else, the -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4,	maven plugin complains about session-config</header>
    <date>Thu Aug 19 16:54:17 CEST 2010</date>
    <body>Hello, is anybody else using the maven plugin (4.0-SNAPSHOT) for resin? I have three problems right now, but i start with this one: The plugin gets confused by the line session-config in the web.xml: $ mvn -e resin:jspc WEB-INF/web.xml:245: com.caucho.server.webapp.WebApp.createSessionConfig(): java.lang.IllegalStateException: Server is not active in this context EnvironmentClassLoader[web-app:] 244: Removing the lines solves the problem "for compiling". The web.xml uses: " http://java.sun.com/dtd/web-app_2_3.dtd" Can anybody verify this? -- GMX DSL SOMMER-SPECIAL: Surf &amp;amp; Phone Flat 16.000 für nur 19,99 ¿/mtl.!* http://portal.gmx.net/de/go/dsl</body>
  </mail>
  <mail>
    <header>[Resin-interest] JSP error page -- javax.servlet.error.exception	not accessible?</header>
    <date>Thu Aug 19 15:39:49 CEST 2010</date>
    <body>Hello! I'm having trouble under resin 4.0.9, with something that was working with 4.0.7 I have an error page configured in web.xml: in which i want to access javax.servlet.error.exception property to display and log the error. After moving to Resin Pro 4.0.9, I get an error while doing this: javax.el.PropertyNotFoundException: 'servlet' is an unknown bean property of 'com.caucho.server.webbeans.ConversationContext__ResinScopeProxy' at javax.el.BeanELResolver.getValue(BeanELResolver.java:196) at com.caucho.jsp.el.PageContextELResolver.getValue(PageContextELResolver.java:181) at com.caucho.el.ArrayResolverExpr.getValue(ArrayResolverExpr.java:148) at com.caucho.el.ArrayResolverExpr.getValue(ArrayResolverExpr.java:139) at com.caucho.el.ArrayResolverExpr.getValue(ArrayResolverExpr.java:139) at com.caucho.el.PathExpr.getValue(PathExpr.java:142) at com.caucho.el.Expr.print(Expr.java:411) at com.caucho.config.el.CandiExpr.print(CandiExpr.java:219) at _jsp._jsp._error__jsp._jspService(_error__jsp.java:90) at _jsp._jsp._error__jsp._jspService(_error__jsp.java:38) at com.caucho.jsp.JavaPage.service(JavaPage.java:61) at com.caucho.jsp.Page.pageservice(Page.java:542) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:194) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:287) at com.caucho.server.webapp.RequestDispatcherImpl.error(RequestDispatcherImpl.java:136) at com.caucho.server.webapp.ErrorPageManager.sendServletErrorImpl(ErrorPageManager.java:426) at com.caucho.server.webapp.ErrorPageManager.sendServletError(ErrorPageManager.java:183) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:185) at com.caucho.server.cache.CacheFilterChain.doFilter(CacheFilterChain.java:207) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:92) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:789) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:662) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:625) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:576) at com.caucho.network.listen.TcpSocketLink$AcceptTask.doTask(TcpSocketLink.java:1157) at com.caucho.network.listen.TcpSocketLink$ConnectionReadTask.runThread(TcpSocketLink.java:1092) at com.caucho.network.listen.TcpSocketLink$AcceptTask.run(TcpSocketLink.java:1124) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:169) The original exception object is lost. Is it a resin bug, or should I use a different method for accessing the exception object? Best regards, Marcin Koziej</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JSP error page --	javax.servlet.error.exception not accessible?</header>
    <date>Thu Aug 19 18:39:26 CEST 2010</date>
    <body>Marcin, We've done some work on el lately, possibly affecting your area. Can you send me the generated java source for the failing page? Thanks, Alex javax.el.PropertyNotFoundException: http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] ConcurrentModificationException when	InjectManager.findByName</header>
    <date>Thu Aug 19 11:20:50 CEST 2010</date>
    <body>Often happened at 30 seconds after appserver start. java.util.ConcurrentModificationException at java.util.HashMap$HashIterator.nextEntry(HashMap.java:977) at java.util.HashMap$KeyIterator.next(HashMap.java:1012) at java.util.HashMap.buildCache(HashMap.java:590) at java.util.HashMap.resize(HashMap.java:576) at java.util.HashMap.addEntry(HashMap.java:939) at java.util.HashMap.put(HashMap.java:477) at com.caucho.config.inject.InjectManager.findByName(InjectManager.java:759) at com.caucho.config.inject.InjectManager.getBeans(InjectManager.java:1254) at com.caucho.config.inject.InjectManager.getReferenceFactory(InjectManager.java:1268) at com.caucho.config.el.CandiElResolver.getValue(CandiElResolver.java:125) at com.caucho.el.EnvironmentLevelELResolver.getValue(EnvironmentLevelELResolver.java:154) at com.caucho.el.EnvironmentELResolver.getValue(EnvironmentELResolver.java:151) at com.caucho.el.StackELResolver.getValue(StackELResolver.java:143) at com.caucho.jsp.InitPageContextImpl.resolveVariable(InitPageContextImpl.java:88) at com.caucho.jsp.PageContextImpl$PageVariableMapper.resolveVariable(PageContextImpl.java:2183) at com.caucho.el.ELParser.parseSimpleTerm(ELParser.java:702) at com.caucho.el.ELParser.parseTerm(ELParser.java:460) at com.caucho.el.ELParser.parseExpr(ELParser.java:231) at com.caucho.el.ELParser.parseInterpolate(ELParser.java:194) at com.caucho.el.ELParser.parse(ELParser.java:113) at com.caucho.jsp.JspUtil.createExpr(JspUtil.java:69) at _jsp._WEB_22dINF._templates._default._home._album._view__jsp.caucho_init(_view__jsp.java:752) at com.caucho.jsp.JspManager.loadPage(JspManager.java:422) at com.caucho.jsp.JspManager.preload(JspManager.java:357) at com.caucho.jsp.JspManager.compile(JspManager.java:236) at com.caucho.jsp.JspManager.createPage(JspManager.java:191) at com.caucho.jsp.JspManager.createPage(JspManager.java:170) at com.caucho.jsp.PageManager.getPage(PageManager.java:339) at com.caucho.jsp.PageManager.getPage(PageManager.java:269) at com.caucho.jsp.PageManager.getPage(PageManager.java:252) at com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) at com.caucho.jsp.QServlet.getPage(QServlet.java:210) at com.caucho.server.dispatch.PageFilterChain.compilePage(PageFilterChain.java:237) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:144) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:287) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:289) -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ConcurrentModificationException	when	InjectManager.findByName</header>
    <date>Thu Aug 19 18:34:05 CEST 2010</date>
    <body>This is an error in your JSP/JSTL, not with Resin -- you are trying to modify (add to) a HashMap that you are iterating over. Here is a more detailed explanation: http://forums.sun.com/thread.jspa?threadID=5335803 Aaron http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest]	ConcurrentModificationException	when	InjectManager.findByName</header>
    <date>Thu Aug 19 18:50:23 CEST 2010</date>
    <body>Except it's the Resin code that's modifying the HashMap. It's an easy fix. -- Scott http://forums.sun.com/thread.jspa?threadID=5335803 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ConcurrentModificationException when	InjectManager.findByName</header>
    <date>Thu Aug 19 19:15:16 CEST 2010</date>
    <body>Thanks Scott. Is my code causing this error as Aaron said? -Wesley 2010/8/20 Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: http://forums.sun.com/thread.jspa?threadID=5335803 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ConcurrentModificationException	when	InjectManager.findByName</header>
    <date>Thu Aug 19 19:40:17 CEST 2010</date>
    <body>Nope. It's a Resin bug. That map inside the InjectManager is used as a cache and shouldn't be a HashMap. -- Scott http://forums.sun.com/thread.jspa?threadID=5335803 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Redirect or forwarding</header>
    <date>Wed Aug 18 20:54:02 CEST 2010</date>
    <body>I'm not sure if I want a redirect of a forward here.  I'll explain.  I have a linux host with multpile IP addresses, and therefore, multiple DNS names.  I'd like to be able to send requests for a base dns name with nothing after the .com to a specific application. http://hmisupportqa.hiw.com http://hmisupportqa.hiw.com/ http://hmisupportqa.hiw.com/support/SupportServer http://hmisupportqa.hiw.com/support/SupportServer and http://hmi-qa.hiw.com http://hmi-qa.hiw.com/ http://hmi-qa.hiw.com/mqsservlet/ViewHdxMsg http://hmi-qa.hiw.com/mqsservlet/ViewHdxMsg and still allow the standard website to be viewed via http://adczlnxhmiqa1.hiw.com http://adczlnxhmiqa1.hiw.com/ What I don't want is a bad url that redirects other  valid urls such as http://hmisupportqa.hiw.com/support/DisplayHotelStatus http://hmisupportqa.hiw.com/support/DisplayHotelStatus http://hmisupportqa.hiw.com/support/SupportServer http://hmisupportqa.hiw.com/support/SupportServer break the application. Is this possible?  I couldn't really tell from the doc. Thanks, Steve Francis Technical Advisor - zSeries, zLinux, z/OS IHG Alpharetta Data Center Ph:  770-442-7157 Cell:  770-906-3122 IM: francisihg</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Redirect or forwarding</header>
    <date>Thu Aug 19 12:18:13 CEST 2010</date>
    <body>I'm doing url-rewriting in code and not in conf. What I do is write some servlet mapping : In the urlmanager servlet, I'm able to redirect or forward any request based on the current context (request url and application configuration) To redirect : To forward : About the choice between forward or redirect, it depends only if you want the browser's url to change or not. This has also an effect on search engine optimization. http://hmisupportqa.hiw.com http://hmisupportqa.hiw.com/ http://hmisupportqa.hiw.com/support/SupportServer http://hmi-qa.hiw.com http://hmi-qa.hiw.com/ http://hmi-qa.hiw.com/mqsservlet/ViewHdxMsg http://adczlnxhmiqa1.hiw.com http://adczlnxhmiqa1.hiw.com/ http://hmisupportqa.hiw.com/support/DisplayHotelStatus back to the http://hmisupportqa.hiw.com/support/SupportServer as that would break http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] [Fwd: Re:  getting webservicecon	text in a cxf soap=D=A servlet]</header>
    <date>Tue Aug 17 18:51:41 CEST 2010</date>
    <body>Hi Did you found a "magic" way to have webservicecontext in this case ? :) Thanks a lot. -------- Original Message -------- Subject: Re: [Resin-interest] getting webservicecontext in a cxf soap servlet Date: Thu, 12 Aug 2010 12:12:53 +0200 Reply-To: General Discussion for the Resin application server Organization: Architecte du Logiciel To: General Discussion for the Resin application server I did as described in the CXF wiki ( http://wiki.caucho.com/CXF ), except that I ran the code generator (wsdl2java) tool to start from an existing wsdl. Here is the config: Here is the full code of a small sample : http://www.architectedulogiciel.fr/download/tmp/testws.zip http://default ] http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [Fwd: Re: getting webservicecontext in a cxf soap=D=A servlet]</header>
    <date>Tue Aug 17 19:03:35 CEST 2010</date>
    <body>Somewhat. I'm adding a WebServiceContextProxy with a ThreadLocal that grabs the WebServiceContext associated with the servlet. CXF itself has a WebServiceContextImpl that has its own ThreadLocal, so we're going to have a ThreadLocal pointing to a second ThreadLocal :) -- Scott http://wiki.caucho.com/CXF ), except http://www.architectedulogiciel.fr/download/tmp/testws.zip http://default ] http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest]	[Fwd: Re: getting webservicecont	ext in a cxf=D=A soap=D=A servlet]</header>
    <date>Tue Aug 17 19:25:13 CEST 2010</date>
    <body>Thanks a lot, I'm really grateful. will it be available in 4.0.10 ? http://wiki.caucho.com/CXF ), except http://www.architectedulogiciel.fr/download/tmp/testws.zip http://default ] http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] Cookie lifetime</header>
    <date>Tue Aug 17 15:03:05 CEST 2010</date>
    <body>Where is the standard for persistent-cookie lifetimes?  Do they expire based on the time of first creation or does the cookie expiration time update to a new value on each page request?  Thanks,</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Cookie lifetime</header>
    <date>Tue Aug 17 18:39:44 CEST 2010</date>
    <body>The cookie itself is controlled by the browser. Resin by default doesn't set the cookie's max-age header, so it's really what the browser wants to do. For the persistent session, the timeout is based on access time. So each new request resets the timer for the default 30min. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Cookie lifetime</header>
    <date>Tue Aug 17 19:48:00 CEST 2010</date>
    <body>Comment from our engineer below.  This is resin 3.0 if it makes a difference. Is he referring to the actual session object on the server or the session cookie in the browser?  Yes, each new request does reset the timer on the session object on the server, but we are not seeing the expiry date on the cookie being updated. I have tested this on a server using IE8, Firefox 3.6, and the latest Chrome build with Resin running solo and with Apache running as the front end, and the results are the same in all browsers. When setting cookie-max-age in the session-config for the web app, the expiry date/time for the session's persistent cookie does not change on subsequent requests. I also verified that this behavior is exhibited.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Cookie lifetime</header>
    <date>Thu Aug 19 18:37:20 CEST 2010</date>
    <body>It's a session cookie, and as long as it expires on the server the contract established via the cookie becomes invalid as soon as the server 'thinks' cookie is no longer valid. Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Cookie lifetime</header>
    <date>Thu Aug 19 19:20:41 CEST 2010</date>
    <body>For the application in question, the following configuration is being used for the webapp's session: enable-cookies='true' enable-url-rewriting='true' On Thursday, August 19, 2010 at 1:00:20 PM, for example, the web browser navigates to the application and gets the session cookie; the cookie has an expiry date of Thursday, August 19, 2010 1:30:20 PM. (If cookie-max-age were not set, the cookie would instead show that it will expire at the end of the session.)   The user is never idle, making regular requests thus keeping the session on the server alive.  However the timestamp on the JSESSIONID cookie in the browser never changes; it remains set to Thursday, August 19, 2010 1:30:20 PM.  At 1:30:20 PM, the cookie expires, the browser discards it and no longer sends the session cookie info with its requests and the connection to the session is lost; the user has to log back in again. This has been seen in resin 2 and resin 3. So the question is: When setting cookie-max-age in an app's session-config, should we be seeing the expiry date for the session cookie in the browser update when the browser sends a request and receives a new response from the server or is what is described above the expected behavior? Sorry for the long example there... -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Alex Sent: Thursday, August 19, 2010 12:37 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Cookie lifetime new request resets the timer for the default 30min. cookie in the browser?  Yes, each new request does reset the timer on the session object on the server, but we are not seeing the expiry date on the cookie being updated. It's a session cookie, and as long as it expires on the server the contract established via the cookie becomes invalid as soon as the server 'thinks' cookie is no longer valid. Alex Chrome build with Resin running solo and with Apache running as the front end, and the results are the same in all browsers. expiry date/time for the session's persistent cookie does not change on subsequent requests. I also verified that this behavior is exhibited. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Cookie lifetime</header>
    <date>Thu Aug 19 19:42:27 CEST 2010</date>
    <body>The latter. "Max-Age=delta-seconds" means: "After delta-seconds seconds elapse, the client should discard the cookie." See http://www.ietf.org/rfc/rfc2109.txt . -- joe</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Cookie lifetime</header>
    <date>Thu Aug 19 17:17:03 CEST 2010</date>
    <body>Scott, any insight?</body>
  </mail>
  <mail>
    <header>[Resin-interest] Session object casting - resin 4.0.7</header>
    <date>Sat Aug 14 00:40:26 CEST 2010</date>
    <body>I am running resin 4.0.7 and I store a user object in the session using "User_Bean" as a key. Everything works fine most of the time but it seems when my session expires and I have not logged out, every subsequent call to get this object returns some HashMap instead of my object or null. Since I am casting the object when I retrieve it from the session the message I get is: java.lang.ClassCastException: java.util.HashMap cannot be cast to com.ordinate.ppass.beans.UserBean Is there some reason why getting an object from the session would return a Map instead of the object? Is "User_Bean" some reserved word or something? The only way I have been able to get my application working again is to shutdown the server, delete everything in the resin-data folder and restart (deleting the exploded war, deploying the app again, restarting all do not work). Also, this seems to happen on resin 4.0.9 as well. thanks matt</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Session object casting - resin 4.0.7</header>
    <date>Mon Aug 16 17:50:49 CEST 2010</date>
    <body>Is the session get/put in the normal request context? As opposed to being read from some other thread or a different context class loader? That behavior sounds like it might be caused by a getAttribute call from outside the web-app's context. In other words, if Resin can't find the UserBean class when its deserializing. Is that at all possible in your application? -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Session object casting - resin 4.0.7</header>
    <date>Mon Aug 16 18:58:00 CEST 2010</date>
    <body>I am not intentionally making the call from another thread but would this be the case if the server had restarted? Maybe there is some combination of the session expiring and the server restarting that causes some issue? The code is: UserBean userBean = (UserBean) The exception occurs on the cast of the user object (line 3) so I tried removing the cast which allows the code to process past this point. However, the application then threw the same error later in a JSP when I try to get the user object from the session using JSTL. I have tried to replicate the issue by waiting for sessions to expire, restarting the server, deploying new apps (in multiple combinations)...so far I can't replicate it but it has now occurred on three separate servers (2 Debian 64bit and 1 Mac OS X desktop). The only thing I am considering now is that a step before the above servlet executes, the session is invalidated and then immediately recreated using req.getSession(true). Is it possible this is randomly causing some issue? Btw, this same code has been running for years on Resin Pro 3.0.25. matt http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Session object casting - resin 4.0.7</header>
    <date>Mon Aug 16 20:25:46 CEST 2010</date>
    <body>I think I found a way to replicate the issue: I autodeploy my war file (e.g. copy updated war to webapps and let resin reload it). After a few deployments this issue will occur so maybe there is some corruption caused by autodeploy? matt http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Session object casting - resin 4.0.7</header>
    <date>Mon Aug 16 21:05:51 CEST 2010</date>
    <body>I figured out how to replicate my issue: If I log in to my application, deploy a war file to webapps, and then refresh my page at the same time the app is automatically reloading, I can cause the error. This is fairly difficult to do consistently but given a few tries I can make it happen. I changed my dependency-check internal to 30 seconds (instead of default 2s) and it was more difficult to replicate because I would refresh my page before the server automatically redeployed which would then trigger the redeployment and everything would work properly. It only seems to happen if you magically access the session as resin is reloading but given that I am able to replicate it pretty easily it seems like something that will definitely happen if we use autodeploy. Is there a recommendation or guideline not to use autodeploy in production? If not, perhaps there is a bug here that needs to be addressed? matt http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Session object casting - resin 4.0.7</header>
    <date>Mon Aug 16 21:44:49 CEST 2010</date>
    <body>Thanks. That makes more sense. It looks like a timing bug during deployment. I've added a bug report at http://bugs.caucho.com/view.php?id=4179 , although the fix would need to wait until 4.0.11. -- Scott mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Quercus Question</header>
    <date>Thu Aug 12 08:37:27 CEST 2010</date>
    <body>I was thinking it's possible to do something like this in a php file: Where the www folder has a path-mapping entry in the resin.xml. It includes the file, but the file isn't processed by the JSP engine, so test.php.  How do I include a .jsp in from a .php but get the JSP engine to process it before it returns?  I know I could do something like: include( ' http://..../www/_header.jsp ') but then cookies are lost as the client is the php engine, not the browser. Is it possible to reuse the JSP code from within the PHP environment? Is there a link someone could shoot me that explains this? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus Question</header>
    <date>Thu Aug 12 18:20:29 CEST 2010</date>
    <body>The silence is deafening, so I guess I was completely wrong-headed in thinking you could call a .jsp as in include from a .php? Bummer, I was hoping that was part of the benefit of having php-based apps running under full blown Resin, instead of Quercus in stand alone mode. Thanks, Aaron http://..../www/_header.jsp ')</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus Question</header>
    <date>Fri Aug 13 08:13:10 CEST 2010</date>
    <body>Hi, I take advantage of the situation about this email to ask Caucho's team if we are allowed to fork the project [Quercus] on GitHub to make our own changes/bug fixes. The project seems to run slowly (*as looked on the bug report*) and we are making some improvements for a production environment in our internal team. Thanks, ---- Kevin Decherf http://twitter.com/Kdecherf http://..../www/_header.jsp ') http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus Question</header>
    <date>Tue Aug 24 10:42:46 CEST 2010</date>
    <body>PHP include() resembles the JSP include directive which includes the referenced file assuming it contains source code that should also be parsed/compiled together with the current script. See http://www.php.net/manual/en/function.include.php What you want is the PHP equivalent of &amp;lt;jsp:include /&amp;gt; which sends a request to the file and includes the response into the response of the current script (see http://java.sun.com/products/jsp/tags/11/syntaxref1112.html ) I don't know whether PHP supports such a feature out of the box, nor if Quercus has implemented it. Aaron Freeman wrote (2010-08-12 18:19): http://..../www/_header.jsp ')</body>
  </mail>
  <mail>
    <header>[Resin-interest] Possible memory leak in Resin 4.0.9</header>
    <date>Wed Aug 11 23:56:09 CEST 2010</date>
    <body>Hi Scott, I've applied the 4.0.10 snapshot and the Alarm issue went away. Thanks. But Resin consumed all memory after certain hours and resulted in a halt or restart. I did a jrockit flight recording and found there was a slow heap increase during various GCs. The recording file shows the objects in heap order by total size occupied descending as below: Class                   Instances            Size(bytes)         Percentage%(%) ---------------------------------------------------------------------------------------------------------------- com.caucho.config.inject.DependentCreationalContext     48,722,158 1,559,109,040   49.08 com.buysou.cms.managers.DefaultBeanManager      11,970,792      287,299,020 9.044 com.buysou.cms.managers.DefaultBeanReader       14,126,509      226,024,144 7.115 com.buysou.cms.utils.reflection.GenericReflectionProvider       11,970,802 191,532,840     6.029 char[]  1,792,936       160,800,482     5.062 .... (others omitted) Obviously the DependentCreationalContext eat up the heap. Note: DefaultBeanManager &amp;amp; DefaultBeanReader &amp;amp; GenericReflectionProvider are non singleton beans which were injected into other beans at Dependent context (should be GCed when request ends). Any ideas? -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible memory leak in Resin 4.0.9</header>
    <date>Sat Aug 14 01:00:06 CEST 2010</date>
    <body>I'll check. Do you know what the path to root is for those objects? -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] [ANN]VTD-XML 2.9</header>
    <date>Sat Aug 14 05:01:35 CEST 2010</date>
    <body>VTD-XML 2.9, the next generation XML Processing API for SOA and Cloud computing, has been released. Please visit https://sourceforge.net/projects/vtd-xml/files/ to download the latest version. a.. Strict Conformance a.. VTD-XML now fully conforms to XML namespace 1.0 spec b.. Performance Improvement a.. Significantly improved parsing performance for small XML files c.. Expand Core VTD-XML API a.. Adds getPrefixString(), and toNormalizedString2() d.. Cutting/Splitting a.. Adds getSiblingElementFragment() e.. A number of bug fixes and code enhancement including: a.. Fixes a bug for reading very large XML documents on some platforms b.. Fixes a bug in parsing processing instruction c.. Fixes a bug in outputAndReparse()</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible memory leak in Resin 4.0.9</header>
    <date>Sat Aug 14 05:15:18 CEST 2010</date>
    <body>Hi Scott, The memory leak circumstance was not spotted in Resin 4.0.5 and early 4.0.x versions. One of the inject path is: * A filter CmsPageFilter dispatch a request to a Jsp page through javax.servlet.RequestDispatcher.forward(request, response) * Jsp page called a BeanMethod custom jsp tag * The jsp tag create a VideoManager through my BeanManager wrapper (MDIObjectFactory) * VideoManager injects a PersonManager * PersonManager injects a PersonController * PersonController injects a DefaultBeanManager and a DefaultBeanReader * DefaultBeanManager and DefaultBeanReader inject a CmsPersistentUnit(@Singleton) * CmsPersistentUnit injects a javax.persistence.EntityManagerFactory (@PersistenceUnit) All those beans except CmsPersistentUnit were dependent scoped (not explicitly annotated) and should be created at its inject point and freed when the parent bean (the jsp page) was destroyed. I list three most frequently bean creation process here. #============handle jsp tag which requires bean creation=================== # this call should be the creation of an @Dependent (thought not explicitly annotated) beans # like com.buysou.cms.managers.DefaultBeanManager or com.buysou.cms.managers.DefaultBeanReader # (for writing/reading database through a @RequestScoped @PersistentContext) com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  118 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      117 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 117 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      117 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 117 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  117 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      114 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 114 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      114 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 114 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  114 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      112 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 112 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      112 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 111 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  111 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      103 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 103 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      103 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 103 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  103 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      89 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 89 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      89 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 88 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  88 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      60 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 60 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      60 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 58 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  58 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      34 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 34 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      34 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 33 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  33 com.caucho.config.inject.InjectManager.getReference(Bean, Type, CreationalContext)      22 # My BeanManager wrapper creating a bean instance by @Named mdi.java.factory.MDIObjectFactory.buildBean(String)     17 com.buysou.cms.jsptags.components.cms.BeanMethod.start(Writer)  13 com.buysou.cms.components.ComponentTagSupport.doStartTag()      13 _jsp._WEB_22dINF._templates._default._video__jsp._jspService(HttpServletRequest, HttpServletResponse, PageContextImpl, ServletContext, HttpSession, _video__jsp$TagState)   13 _jsp._WEB_22dINF._templates._default._video__jsp._jspService(HttpServletRequest, HttpServletResponse)    13 com.caucho.jsp.JavaPage.service(ServletRequest, ServletResponse)        13 com.caucho.jsp.Page.pageservice(HttpServletRequest, HttpServletResponse) 13 com.caucho.server.dispatch.PageFilterChain.doFilter(ServletRequest, ServletResponse)        13 com.caucho.server.dispatch.ServletInvocation.service(ServletRequest, ServletResponse)        13 com.caucho.server.webapp.RequestDispatcherImpl.forward(ServletRequest, ServletResponse, String, Invocation, DispatcherType)    13 com.caucho.server.webapp.RequestDispatcherImpl.forward(ServletRequest, ServletResponse)        13 com.buysou.cms.pageactions.TemplateForwardResolution.execute(HttpServletRequest, HttpServletResponse)    13 com.buysou.cms.servlet.CmsPageFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   13 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        13 com.yinyuetai.servlet.UserMessageFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   13 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        13 com.yinyuetai.servlet.UserCredentialFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   13 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        13 com.yinyuetai.servlet.SiteInfoFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   13 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        13 com.buysou.cms.servlet.WrapRequestResponseFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   13 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        13 com.buysou.servlet.filters.encoding.EnhancedEncodingFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   13 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        13 com.caucho.server.webapp.WebAppFilterChain.doFilter(ServletRequest, ServletResponse)        13 com.caucho.server.webapp.AccessLogFilterChain.doFilter(ServletRequest, ServletResponse)        13 com.caucho.server.dispatch.ServletInvocation.service(ServletRequest, ServletResponse)        13 #===========handle jsp tag which requires bean creation=================== # this call should be the creation of an @RequestScoped @PersistentContext com.caucho.config.inject.InjectManager$ContextReferenceFactory.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  261 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      254 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 254 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      254 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 254 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  254 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      254 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 254 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      254 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 254 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  254 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      252 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 252 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      252 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 252 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  252 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      247 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 247 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      247 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 245 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  245 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      223 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 223 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      223 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 223 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  223 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      191 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 191 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      191 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 191 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  191 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      132 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 132 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      132 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 125 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  125 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      66 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 66 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      66 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 65 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  65 com.caucho.config.inject.InjectManager.getReference(Bean, Type, CreationalContext)      43 # My BeanManager wrapper creating a bean instance by @Named mdi.java.factory.MDIObjectFactory.buildBean(String)     35 com.buysou.cms.jsptags.components.cms.BeanMethod.start(Writer)  31 com.buysou.cms.components.ComponentTagSupport.doStartTag()      31 _jsp._WEB_22dINF._templates._default._video__jsp._jspService(HttpServletRequest, HttpServletResponse, PageContextImpl, ServletContext, HttpSession, _video__jsp$TagState)   18 _jsp._WEB_22dINF._templates._default._video__jsp._jspService(HttpServletRequest, HttpServletResponse)    18 com.caucho.jsp.JavaPage.service(ServletRequest, ServletResponse)        18 com.caucho.jsp.Page.pageservice(HttpServletRequest, HttpServletResponse) 18 com.caucho.server.dispatch.PageFilterChain.doFilter(ServletRequest, ServletResponse)        18 com.caucho.server.dispatch.ServletInvocation.service(ServletRequest, ServletResponse)        18 com.caucho.server.webapp.RequestDispatcherImpl.forward(ServletRequest, ServletResponse, String, Invocation, DispatcherType)    18 com.caucho.server.webapp.RequestDispatcherImpl.forward(ServletRequest, ServletResponse)        18 com.buysou.cms.pageactions.TemplateForwardResolution.execute(HttpServletRequest, HttpServletResponse)    18 com.buysou.cms.servlet.CmsPageFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   18 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        18 com.yinyuetai.servlet.UserMessageFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   18 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        18 com.yinyuetai.servlet.UserCredentialFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   18 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        18 com.yinyuetai.servlet.SiteInfoFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   18 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        18 com.buysou.cms.servlet.WrapRequestResponseFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   18 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        18 #===========handle http page request which create action beans================== # this call should be the creation of an @RequestScoped @PersistentContext too com.caucho.config.inject.InjectManager$ContextReferenceFactory.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  261 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      254 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 254 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      254 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 254 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  254 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      254 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 254 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      254 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 254 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  254 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      252 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 252 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      252 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 252 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  252 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      247 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 247 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      247 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 245 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  245 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      223 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 223 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      223 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 223 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  223 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      191 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 191 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      191 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 191 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  191 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      132 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 132 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      132 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 125 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  125 com.caucho.config.inject.InjectionTargetBuilder$FieldInjectProgram.inject(Object, CreationalContext)      66 com.caucho.config.inject.CandiProducer.inject(Object, CreationalContext) 66 com.caucho.config.inject.InjectionTargetBuilder.inject(Object, CreationalContext)      66 com.caucho.config.inject.ManagedBeanImpl.createDependent(CreationalContext) 65 com.caucho.config.inject.InjectManager$DependentReferenceFactoryImpl.create(CreationalContextImpl, CreationalContextImpl, InjectionPoint)  65 com.caucho.config.inject.InjectManager.getReference(Bean, Type, CreationalContext)      43 # My BeanManager wrapper creating a PageAction instance by classname mdi.java.factory.MDIObjectFactory.buildBean(Class)      8 com.buysou.cms.servlet.CmsPageFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   8 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        8 com.yinyuetai.servlet.UserMessageFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   8 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        8 com.yinyuetai.servlet.UserCredentialFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   8 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        8 com.yinyuetai.servlet.SiteInfoFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   8 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        8 com.buysou.cms.servlet.WrapRequestResponseFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   8 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        8 com.buysou.servlet.filters.encoding.EnhancedEncodingFilter.doFilter(ServletRequest, ServletResponse, FilterChain)   8 com.caucho.server.dispatch.FilterFilterChain.doFilter(ServletRequest, ServletResponse)        8 com.caucho.server.webapp.WebAppFilterChain.doFilter(ServletRequest, ServletResponse)        8 com.caucho.server.webapp.AccessLogFilterChain.doFilter(ServletRequest, ServletResponse)        8 com.caucho.server.dispatch.ServletInvocation.service(ServletRequest, ServletResponse)        8 com.caucho.server.hmux.HmuxRequest.handleInvocation()   8 com.caucho.server.hmux.HmuxRequest.handleRequestImpl()  8 com.caucho.server.hmux.HmuxRequest.handleRequest()      8 com.caucho.network.listen.TcpSocketLink.dispatchRequest()       8 com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(boolean)     8 com.caucho.network.listen.TcpSocketLink.handleRequests(boolean) 8 Hope these help. -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible memory leak in Resin 4.0.9</header>
    <date>Sat Aug 14 05:17:26 CEST 2010</date>
    <body>My BeanManager wrapper code @Singleton @Startup beanManager = (BeanManager) ... Bean&amp;lt;T&amp;gt; bean = (Bean&amp;lt;T&amp;gt;) CreationalContext&amp;lt;T&amp;gt; env = return (T) beanManager.getReference(bean, Bean&amp;lt;T&amp;gt; bean = (Bean&amp;lt;T&amp;gt;) CreationalContext&amp;lt;T&amp;gt; env = CreationalContext env = ... -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible memory leak in Resin 4.0.9</header>
    <date>Mon Aug 16 20:40:57 CEST 2010</date>
    <body>Just double-checking, which of the beans have which scope annotations? I just verified that the basic getReference with dependent scope isn't leaking so there must be some non-dependent bean that's triggering the problem. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible memory leak in Resin 4.0.9</header>
    <date>Tue Aug 17 19:53:26 CEST 2010</date>
    <body>Hi Scott, Thanks for the checking. Today I double checked the CDI spec and got some new knowledge. Nearly all my beans were not annotated with any scope, so that they should be @Dependent. Some of the beans were created (not injected) in a servlet filter via a static ObjectFactory. I think the beans should be transient but they are NOT. They actually were probably immortal because they were created in a servlet filter (singleton in webapp). And also my ObjectFactory was annotated with @Singleton too, too bad. As a workaround, I may annotated most my beans as @ApplicationScoped or @SessionScoped, because they're all stateless. At least after a bean was annotated as @SessionScoped, the @PreDestroy method was correctly fired when the request ended. This workaround SHOULD address the memory leak problem of my site, though not thoroughly tested. It's my initial thought. Hope you have a full story to tell me, if u've got some time. :) Thanks again. -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible memory leak in Resin 4.0.9</header>
    <date>Thu Aug 19 19:17:22 CEST 2010</date>
    <body>Hi Scott, I believe I've fixed this issue by adding @ApplicationScoped and @RequestedScoped annotation to my beans. :) Thanks for your efforts. -Wesley 2010/8/18 Wesley Wu &amp;lt;wumen...@gmail.com&amp;gt;:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible memory leak in Resin 4.0.9</header>
    <date>Thu Aug 19 19:43:24 CEST 2010</date>
    <body>I still think there's a chance for a Resin leak; I just don't understand where it's coming from. It shouldn't matter what context you're injecting from, as long as you're creating a new top-level CreationalContext. The getReference for a dependent bean shouldn't have any references to it. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible memory leak in Resin 4.0.9</header>
    <date>Thu Aug 19 20:05:08 CEST 2010</date>
    <body>2010/8/20 Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: I think so. The same code worked fine (no leak) in Resin 4.0.5.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible memory leak in Resin 4.0.9</header>
    <date>Thu Aug 19 20:59:20 CEST 2010</date>
    <body>Do you have access to the eclipse "mat" program or some other heap analyzer? If you can reproduce the issue, ask Resin to dump the heap (it's in /resin-admin/memory with the jvm heap dump button), and then ask the heap analyzer to trace the leaking memory to root, it would help track down this issue greatly. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Possible memory leak in Resin 4.0.9</header>
    <date>Fri Aug 20 01:12:53 CEST 2010</date>
    <body>I'll tried to do so. 2010/8/20 Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Wordpress Under Resin</header>
    <date>Wed Aug 11 16:01:21 CEST 2010</date>
    <body>I saw a wiki for running WordPress under Quercus 3.1.x -- is anybody out there successfully running WordPress under Resin 4.0.x? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Wordpress Under Resin</header>
    <date>Wed Aug 11 19:03:44 CEST 2010</date>
    <body>Aaron, I am successfully running WordPress 3.0 in Resin 4.0.7. It is behind Apache 2.2 with permalinks which took a while to configure mod_rewrite but otherwise it works great. matt http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Wordpress Under Resin</header>
    <date>Wed Aug 11 19:49:10 CEST 2010</date>
    <body>Ah, thanks for the confidence builder.  Based on your feedback we will take the time to try and get it working with a straight Resin install then.  I didn't want us to spin our wheels if someone else failed at doing so. :) Thanks, Aaron http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Wordpress Under Resin</header>
    <date>Wed Aug 11 21:04:58 CEST 2010</date>
    <body>I had serious problems under certain versions of Resin. I finally settled on 4.0.6 as having a sufficiently-working Quercus and not having other issues (not sure I remember exactly what those were). Prior to 4.0.6, WordPress titles would not render across most of the site. I run Resin directly, no Apache in front. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Wordpress Under Resin</header>
    <date>Wed Aug 11 22:30:34 CEST 2010</date>
    <body>Ah, I faintly remember your posts about that now.  Good to know.   We will start with the latest and greatest and work our way backward stopping at 4.0.6, if necessary.  :) Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Wordpress Under Resin</header>
    <date>Wed Aug 11 22:41:26 CEST 2010</date>
    <body>Let me know how it goes. I kinda wish you'd work back 'till you see the same problem, just so we can be sure it reproduces everywhere ;-) http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Wordpress Under Resin</header>
    <date>Wed Aug 11 22:56:41 CEST 2010</date>
    <body>Ok so you want us to try getting it running on 4.0.9, then see if we can just drop it in 4.0.6 and 4.0.5 just to see what happens?  Should be easy -- there shouldn't be any config changes on those minor releases -- if that's what you are after. -a</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Wordpress Under Resin</header>
    <date>Wed Aug 11 23:37:54 CEST 2010</date>
    <body>Oh, I find it a huge pain to install new versions, so I wasn't actually suggesting you do more work than you have to. You might find they all work well for WP, but I also run Java webapps, and have had issues there. I don't recall exactly why I settled on 4.0.6, but I do know I tried at least 4.0.7, if not also 4.0.8. I have not yet tried 4.0.9. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] getting webservicecontext in a cxf soap servlet</header>
    <date>Wed Aug 11 15:27:53 CEST 2010</date>
    <body>Hello I successfully wrote a soap web service with cxf (in resin 4.0.9) and I need to check the IP of the caller. I need the servlet context, and found some thread about this. I tried to add : in the servlet, but have the error message : ms.CarteMusiqueWSAction.wscontext @Resource cannot find any matching resources with type='interface javax.xml.ws.WebServiceContext' in InjectManager[web-app: http://default ] I suppose that something is missing but what ? Thanks for any suggestion. -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] getting webservicecontext in a cxf soap servlet</header>
    <date>Wed Aug 11 22:32:47 CEST 2010</date>
    <body>http://default ] How are you configuring the service in Resin? It looks like we'll need to do a little bit of magic to make it work, but I need to make sure I'm looking at it the same way you're using it. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] getting webservicecontext in a cxf soap servlet</header>
    <date>Thu Aug 12 12:13:55 CEST 2010</date>
    <body>I did as described in the CXF wiki ( http://wiki.caucho.com/CXF ), except that I ran the code generator (wsdl2java) tool to start from an existing wsdl. Here is the config: Here is the full code of a small sample : http://www.architectedulogiciel.fr/download/tmp/testws.zip http://default ] http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] Duplicate singletons</header>
    <date>Wed Aug 11 03:12:18 CEST 2010</date>
    <body>There seems to still be a problem with singletons exposed as hessian services.  I can create a test project if necessary, but I'm seeing this behavior in two separate applications: 1) Create a @Singleton bean 2) Give the bean a @Startup @PostConstruct method that initializes some data 3) Give the bean a @HessianService annotation 4) Call the bean via hessian 5) Observe that the data isn't initialized This was a problem long ago in 4.0.0 (with the equivalent annotations at the time) but I thought it was fixed sometime later.  I could be wrong about that though.  The old workaround was to have the hessian endpoint on a different bean which itself injects the singleton. Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Duplicate singletons</header>
    <date>Wed Aug 11 22:09:59 CEST 2010</date>
    <body>Is this javax.ejb.Singleton or javax.inject.Singleton? (I still can't believe the JavaEE spec allows that confusion.) I've filed it as http://bugs.caucho.com/view.php?id=4175 Because of all the spec changes and some big internal changes we needed to make to pass the TCK, it's very possible that fix no longer applies. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Duplicate singletons</header>
    <date>Wed Aug 11 22:49:00 CEST 2010</date>
    <body>I'm using javax.inject.Singleton. FWIW javax.ejb.Singleton doesn't seem to register beans with the manager.  I don't know if that's correct or not. http://bugs.caucho.com/view.php?id=4175 Cool. Jeff</body>
  </mail>
  <mail>
    <header>[Resin-interest] ConnectionPool pool overflow issue in Resin 4.0.9</header>
    <date>Fri Aug 06 06:37:06 CEST 2010</date>
    <body>Hi Scott, I've experienced weird connection pool issue in 4.0.9 these days. After every hour (exactly), the 4.0.9 resin refused to service any request and occasionally report "ConnectionPool [...] pool overflow". This situation never occurred in prior resin releases and neither my webapp nor config was not modified at all after upgrade 4.0.5 to 4.0.9. I've no idea what happened though I research the 4.0.9 source code. I noticed that ConnectionPool.java &amp;amp; UserPoolItem.java were moved to another package but no major modification were made. I did a fine log, here goes the log content (partial) for download: http://gp.niugoo.com/resin.partial.zip ================================================== Resin database config: url="jdbc:mysql://192.168.1.2:3306/bbsee?useUnicode=true&amp;amp;characterEncoding=utf8" -Wesley</body>
  </mail>
  <mail>
    <header>[Resin-interest] how to avoid resin.xml change detection</header>
    <date>Fri Aug 06 14:44:37 CEST 2010</date>
    <body>Hi, I have an resin.xml with several cluster defined. Every time I change resin.xml to add a virtual host in one of the clusters resin detected that resin.xml is changed and it restarts all the clusters. (resin 4.0.7) Is it possibile to avoid resin.xml change detection to manually restart only one of the clusters? Is it possible to avoid the problem splitting resin.xml into several files and use resin:import? thanks Andrea</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ConnectionPool pool overflow issue in Resin 4.0.9</header>
    <date>Fri Aug 06 20:11:53 CEST 2010</date>
    <body>Thanks. I think I've found it, and it should be related to the restart problem that Jan Kriesten has reported. I'll see if I can get a snapshot by Monday to verify the problem. -- Scott http://gp.niugoo.com/resin.partial.zip http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ConnectionPool pool overflow issue in Resin	4.0.9</header>
    <date>Mon Aug 09 17:55:11 CEST 2010</date>
    <body>Thanks. Be sure to notify in the mailing list when the snapshot is out. :) 2010/8/7 Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: http://gp.niugoo.com/resin.partial.zip http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ConnectionPool pool overflow issue in Resin 4.0.9</header>
    <date>Tue Aug 10 02:48:12 CEST 2010</date>
    <body>I just put it up at http://caucho.com/download We're trying to pull in the 4.0.10 schedule a week, so we can get a fix out more quickly. (So trying to get a release end of this week/beginning of next week). -- Scott http://gp.niugoo.com/resin.partial.zip http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] @Inject works in 4.0.7 but fails in 4.0.9</header>
    <date>Fri Aug 06 02:47:22 CEST 2010</date>
    <body>@Stateless @Repository public class MergingServiceImpl implements Serializable, MergingService ... This works in 4.0.7 , but fails in 4.0.9 2010-08-06 08:23:53,388 INFO  impl.SessionFactoryObjectFactory - Not binding factory to JNDI, no JNDI name configured 2010-08-06 08:23:53,389 INFO  util.NamingHelper - JNDI InitialContext 2010-08-06 08:23:53,391 WARN  impl.SessionFactoryImpl - JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession() 2010-08-06 08:23:53,392 INFO  cache.UpdateTimestampsCache - starting update timestamps cache at region: org.hibernate.cache.UpdateTimestampsCache 2010-08-06 08:23:53,392 INFO  cache.StandardQueryCache - starting query cache at region: org.hibernate.cache.StandardQueryCache http://destiny.smallufo.com ] fail javax.enterprise.inject.UnsatisfiedResolutionException: Can't find a bean for 'interface destiny.web.ubbthreads7.old.UserOldDao' because no beans implementing that class have been registered with the injection manager InjectManager[stateless:null#MergingServiceImpl]. at com.caucho.config.inject.InjectManager.unsatisfiedException(InjectManager.java:2153) at com.caucho.config.inject.InjectManager.resolveByInjectionPoint(InjectManager.java:2336) I have to take off @Stateless to make it work in 4.0.9 Maybe this is because of some conflicts between Spring(3.0.3) and Resin's CanDI</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] @Inject works in 4.0.7 but fails in 4.0.9</header>
    <date>Mon Aug 09 19:17:34 CEST 2010</date>
    <body>Do you have the signature of the UserOldDao? In other words, is it a plain class or a generic one (or inherits from a generic). thanks, -- Scott http://destiny.smallufo.com ] fail http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] SubEtha 2.1 released, runs on Resin 4.0.9</header>
    <date>Wed Aug 04 23:05:24 CEST 2010</date>
    <body>At long last, we have a new version of SubEtha that runs on the current (4.0.9) version of Resin. http://code.google.com/p/subetha/ SubEtha is an opensource mailing list server - think Mailman on steroids.  It's also a showcase for how to use CDI and Resin's CanDI configuration system in a real-world application.  While we haven't been adding new features, we do try to keep it current with Resin - and this is the first version in a long time where "everything works". For some more details about the code, Ferg wrote a blog entry about SubEtha some time ago which describes the architecture pretty well: http://blog.caucho.com/?p=209 Have fun, Jeff, ScottH, &amp;amp; Jon</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] SubEtha 2.1 released, runs on Resin 4.0.9</header>
    <date>Thu Aug 05 17:35:00 CEST 2010</date>
    <body>http://code.google.com/p/subetha/ http://blog.caucho.com/?p=209 Excellent! For anyone evaluating CDI for their own project (and who like to read code), SubEtha is a good example of a full CDI program. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] UnsatisfiedLinkError - Windows - 64-bit</header>
    <date>Tue Aug 03 16:57:37 CEST 2010</date>
    <body>Hi On Windows 2008 R2 64-bit + Resin 4.0.9 Pro Everything seems fine until I add the license file. Then I get: Cp1252, da 64, mixed mode, Sun Microsystems Inc. 'D:\resin\win64\resin.dll', but the load failed. The JVM exception was: java.lang.UnsatisfiedLinkError: D:\resin\win32\resin.dll: Can't load IA 32-bit .dll on a AMD 64-bit platform + later 'D:\resin\win64\resin.dll', but the load failed. The JVM exception was: java.lang.UnsatisfiedLinkError: D:\resin\win32\resin.dll: Can't load IA 32-bit .dll on a AMD 64-bit platform 'D:\resin\win64\resin.dll', but the load failed. The JVM exception was: java.lang.UnsatisfiedLinkError: D:\resin\win32\resin.dll: Can't load IA 32-bit .dll on a AMD 64-bit platform 'D:\resin\win64\resin_os.dll', but the load failed. The JVM exception was: java.lang.UnsatisfiedLinkError: D:\resin\win32\resin_os.dll: Can't load IA 32-bit .dll on a AMD 64-bit platform I notice that the first reference is to D:\resin\win64\ the next to D:\resin\win32\ Thanks, Hans</body>
  </mail>
  <mail>
    <header>[Resin-interest] Severe InjectManager.getCurrent synchronization	problem at high load, fixed in 4.0.9?</header>
    <date>Sat Jul 31 17:29:10 CEST 2010</date>
    <body>Hi Scott, We're running Resin 4.0.5 for a heavy traffic site (100K+ Pageviews in an hour) for a couple of months. In the past several days I've experienced frequent failing responding of requests after two or three hours a Resin instance was started. The environment: Hardware: 16 cores with 24GB ram OS: Centos 5.5 64bit Java Version: Oracle JRockit(R) (build R28.0.0-679-130297-1.6.0_17-20100312-2121-linux-x86_64, compiled mode) Database: Mysql 5.1.47 64bit (on another Centos 5.5 box with 8 cores and 12GB ram) The situation: * Java process running the resin CPU utilization: raised from the usual 60%~150% to 200%~300% (16Cores) * Threads in resin server: raised from usual 200~800 to 1500~3000 * Resin Centos box load average: no notable change * Database CPU utilization: dropped from the usual  50%~200% to below 10% (8Cores) * DB box IO utilization: drop from the usual 3%~5% to below 1% * DB box load average: no notable change * Most browser requests were blocked, no result, no error. I have to restart it after it hanged. I did jvm flight recordings of the jrockit JVM before restart for several times. The jfr record file show that, in most of the time, the threads were blocked in class InjectManager I noticed in the 4.0.9 source, it changed to public static InjectManager getCurrent(ClassLoader loader) Probably this problem has bean resolved but I need to do more test in next week. Thanks for the great work. -Wesley</body>
  </mail>
  <mail>
    <header>[Resin-interest] apache mod_caucho bug in 4.0.x (including 4.0.9)</header>
    <date>Mon Aug 02 16:38:16 CEST 2010</date>
    <body>Hi, in jsp files out.flush() does not work correctly if resin 4.0.x is used with apache 2.2 and mod_caucho: nothing is sent to the browser until the page ends. Running resin http server (without apache) the behavior is correct and the response is sent to the browser when out.flush() is called. Also running apache2.2 + resin 3.1.x the behavior is correct. Thanks in advance Andrea</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] apache mod_caucho bug in 4.0.x (including	4.0.9)</header>
    <date>Tue Aug 03 11:21:46 CEST 2010</date>
    <body>Hi, One additional information. If I connect to resin 4.0.9 using an apache instance that have mod_caucho 3.1.10 installed the problem persists. So I guess that something changed in the way resin sends response to apache and not in the mod_caucho itself. Can be this behaviour considered a bug? I now that mod_caucho is not considered a priority form resin developers but is there any chance that this will be fixed in future releases? Thank you. Andrea http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Severe InjectManager.getCurrent synchronization problem at high load, fixed in 4.0.9?</header>
    <date>Mon Aug 02 20:45:18 CEST 2010</date>
    <body>If you do see additional problems after 4.0.9, please let us know. Some of these kinds of load/sync issues, like that getCurrent(), are easy to fix but hard to find. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Servlet 3.0 file upload feature	(javax.servlet.http.Part) improperly implemented</header>
    <date>Sat Jul 31 17:16:13 CEST 2010</date>
    <body>Hi Scott, I found a frustrating problem when porting my framework to accommodate the Servlet 3.0 file upload spec in Resin 4.0.8/4.0.9. There did has a (private Object _value) in com.caucho.server.http.HttpServletRequestImpl.PartImpl, however, if it's not a file upload but a common text form field, I could nowhere to retreive the text value of the part throught current implementation. I don't want to write the text value to a file and read it into a string. It's just stupid. I know it's probably a spec issue without an or , but it does has a workaround. I think the getInputStream() should not return null when the Part is a normal form field. It may return a StringReader or something to let me get the string value throught the InputStream. maybe like this (from http://balusc.blogspot.com/2009/12/uploading-files-in-servlet-30.html ) /** * Returns the text value of the given part. */ String value = new BufferedReader(newInputStreamReader(part.getInputStream(), return (value != null) ? value : ""; // Must be empty String according HTTP spec. Now I have to use to retrieve the text form field value. But I know it must be wrong, because we may have multiple fields have the same name. -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Servlet 3.0 file upload feature	(javax.servlet.http.Part) improperly implemented</header>
    <date>Mon Aug 02 20:43:10 CEST 2010</date>
    <body>http://4.0.9 Thanks, I've added this as http://bugs.caucho.com/view.php?id=4153 We're going through and double-checking the spec on this. -- Scott http://balusc.blogspot.com/2009/12/uploading-files-in-servlet-30.html ) http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.9 release</header>
    <date>Fri Jul 30 20:30:20 CEST 2010</date>
    <body>Just an important note on Resin 4.0.9. Most of the work for this release was related to low level improvements and fixes to core capabilities like the locking for distributed caching, replacing synchronization with atomic locks in the core thread dispatching, improving the core alarm/timer functionality, fixing the watchdog/cluster authentication, and organizing the core Resin startup code to fix some startup timing problems. We added extra tests for those capabilities, and added several automatic stress tests to our nightly check. Still, since these are core fixes to critical timing-related capabilities that are hard to test exhaustively, you may want to take extra care in your own testing before deploying on 4.0.9. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Sat Jul 31 03:20:47 CEST 2010</date>
    <body>Oh my god Scott, you rule it! /** * Returns the current environment container. */ public static InjectManager getCurrent(ClassLoader loader) finally the synchronized (_localContainer)  was gone! You have no idea how I suffered from the locking problem of previous Resin 4.0.x. My heavy traffic website hanged several times a day. Thanks a lot! I'll try 4.0.9 immediately. -Wesley http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Sat Jul 31 03:38:10 CEST 2010</date>
    <body>You got any release notes for 4.0.9 yet? http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Tue Aug 03 03:51:07 CEST 2010</date>
    <body>Hi Scott, at first, resin 4.0.9 looked fine. But now I see in the jvm-default.log that resin is starting/stopping about every half hour?! There are no notices in the watchdog-log, though. Any hints on what's happening here? It doesn't happen with 4.0.7 (can't check with 4.0.8 cause it has the UTF8 buffer problem. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Tue Aug 03 18:31:54 CEST 2010</date>
    <body>I assume there's nothing in the jvm-default.log about why Resin's exiting? I'll see if I can reproduce it here. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Wed Aug 04 07:09:46 CEST 2010</date>
    <body>Hi Scott, no, nothing. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Wed Aug 04 20:54:20 CEST 2010</date>
    <body>Hmm. Does the postmortem tab in the /resin-admin show any unusual memory or thread behavior? Or any created hs_* files? One of the things I want to do soon for Resin is to combine all the exit methods into one, so Resin restart is completely centralized. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Tue Aug 10 11:20:40 CEST 2010</date>
    <body>Hi Scott, the snapshot hasn't solved the restart-problem on our server: Resin Professional 4.0.s100809 (built Mon, 09 Aug 2010 11:41:02 PDT) [...] [...] [...] So it's seems to be every 30 minutes. :-/ The watchdog-manager.log is cluttered with the following entries - but I don't know what to make of them: [2010/08/10 07:58:40.775] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm Alarm[alarm[HostController[null]]] 30116ms [2010/08/10 07:58:40.775] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm Alarm[alarm[ProServer[id=,cluster=]]] 30117ms [2010/08/10 07:59:10.775] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm Alarm[alarm[com.caucho.network.listen.SocketLi nklistener$suspendrea...@71ce5e7a]] 60111ms [2010/08/10 07:59:10.775] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm Alarm[alarm[NetworkListenService[]]] 60110ms [2010/08/10 07:59:40.775] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm alarm[alarm[com.caucho.boot.watchdogmana...@23 9cd5f5]] 90103ms [2010/08/10 07:59:40.776] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm alarm[alarm[com.caucho.log.rotatestr...@4ab346 46]] 66890ms [2010/08/10 08:00:10.775] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm Alarm[alarm[WebAppController$2034408626[null]] ] 60000ms [2010/08/10 08:00:10.776] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm Alarm[alarm[SessionManager[]]] 60001ms [2010/08/10 08:00:40.775] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm Alarm[alarm[HostController[null]]] 60000ms [2010/08/10 08:00:40.776] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm Alarm[alarm[ProServer[id=,cluster=]]] 60001ms [...] [2010/08/10 11:11:10.665] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm Alarm[alarm[SessionManager[]]] 59941ms [2010/08/10 11:11:10.724] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm Alarm[alarm[HostController[null]]] 30059ms [2010/08/10 11:11:40.665] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm Alarm[alarm[ProServer[id=,cluster=]]] 59941ms [2010/08/10 11:11:40.724] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm Alarm[alarm[NetworkListenService[]]] 60000ms [2010/08/10 11:12:10.665] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm Alarm[alarm[com.caucho.network.listen.SocketLi nklistener$suspendrea...@71ce5e7a]] 60000ms [2010/08/10 11:12:10.724] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm alarm[alarm[com.caucho.boot.watchdogmana...@23 9cd5f5]] 60000ms [2010/08/10 11:12:40.665] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm Alarm[alarm[WebAppController$2034408626[null]] ] 59941ms [2010/08/10 11:12:40.724] com.caucho.util.alarm$coordinatorthr...@3ce95a56 slow alarm Alarm[alarm[SessionManager[]]] 30059ms Other errors are not reported by resin, though. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Tue Aug 10 19:55:37 CEST 2010</date>
    <body>Thanks. It's not simply the ping because the restart isn't happening here. I'm working on improving the logging on both the Resin and Watchdog to get better information about this. That may be related. When a Resin alarm (internal timer) is woken, it checks against the time it expected to be woken up. If that time is too big (over 30s) it prints that warning. If there's a big GC or 100% CPU, that might be expected, but that message is in the watchdog, so there's no good reason for the delay. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Wed Aug 11 05:25:28 CEST 2010</date>
    <body>Hi Scott, that would be helpful. Funny thing is, it only happens on one of the machines. The configuration is the same on both, the only difference is a) in the number of virtual hosts (104 to 2) b) the number of provdided database jndi connections (57 to 5) Maybe this helps? Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Wed Aug 11 18:57:06 CEST 2010</date>
    <body>The extra information for the logging will help (I'm hoping to get a snapshot today with the additional logging.) I'm not sure about the difference. Both of those do have associated timers/alarms, so if there's a timer problem, it's more likely to show up with the server with more. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Wed Aug 11 21:58:07 CEST 2010</date>
    <body>I've put up a new snapshot. On a restart, you should see additional logging information in both the watchdog-manager.log and the jvm-default.log that should help narrow this down. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Fri Aug 13 07:28:52 CEST 2010</date>
    <body>Hi Scott, the only new entry in the log on restart in the jvm-default.log is this: WarningService: Stopping Resin because ping did not complete in time. Shutdown Resin reason: HEALTH Almost the same is showing up in watchdog-manager.log: [2010/08/13 07:13:56.816] Watchdog received warning from Resin[1,pid=32039]: Stopping Resin because ping did not complete in time. [2010/08/13 07:13:58.579] Watchdog detected close of Resin[,pid=32039] exit reason: HEALTH (exit code=8) [2010/08/13 07:13:58.579] Watchdog starting Resin[] It's really strange, though, that it happens almost exactly every 30 minutes. The behavior didn't occor with 4.0.7 or previous versions. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Fri Aug 13 08:31:34 CEST 2010</date>
    <body>Hi Jan, Did your resin server have a busy traffic? Did u observed any memory leak or heap overflow? -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Fri Aug 13 09:42:06 CEST 2010</date>
    <body>Hi Wesley, neither nor. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Fri Aug 13 16:19:40 CEST 2010</date>
    <body>Out of curiosity do you have multiple instances of Resin (separate JVMs) running on that same virtual machine?  If so do you use different ports for the watchdog on both instances?  We had a similar situation and it was fixed by just running the watchdog on separate ports for each instance of Resin.  Probably not your situation, but thought I'd ask. Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Fri Aug 13 16:40:14 CEST 2010</date>
    <body>Hi Aaron, no, it's just one instance. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Fri Aug 13 18:29:37 CEST 2010</date>
    <body>Excellent. That's exactly the kind of information I was hoping the log would provide. The HEALTH is an exit caused by a failed ping/health check. If Resin had detected an OOM or thread problem, the watchdog log would have shown MEMORY or THREAD. As a workaround, you can disable the &amp;lt;ping&amp;gt; (or PingThread) until I figure out why that's happening. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.9 release</header>
    <date>Sat Aug 14 06:16:00 CEST 2010</date>
    <body>-----BEGIN PGP SIGNED MESSAGE----- Hash: SHA1 Hi Scott, as an idea, I have the following in resin.xm from an old default: http://localhost:8080/test-ping.jsp So the ping configuration is actually empty. Maybe this is treated differently with the latest releases? Best regards, --- Jan. -----BEGIN PGP SIGNATURE----- Version: GnuPG v1.4.10 (Darwin) iEYEARECAAYFAkxmGGAACgkQME/SSH3iSFkYowCcCj+0AiAHnN01VI1tuE6TeleF AC8An0JWk3kVZq5eNtlXuGVZAbkpdggl =neMZ -----END PGP SIGNATURE-----</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.10 release</header>
    <date>Thu Aug 26 13:18:48 CEST 2010</date>
    <body>Hi Scott, thanks for 4.0.10 - it seems that the restart-problems have been solved with this build. Our system looks healthy again. :) Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.10 release</header>
    <date>Thu Aug 26 16:19:44 CEST 2010</date>
    <body>I second this. The 4.0.10 release seems to be the best 4.0 release yet. All of the problems we've encountered in the past seem to be gone and performance actually seems to be better. (It wasn't bad before, but our load testing results did actually seem better with our configuration on this release.) Congratulations! -Jamie</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.10 release</header>
    <date>Thu Aug 26 18:20:58 CEST 2010</date>
    <body>Excellent. The threading fixes and replacement of synchronized by the atomic locking should help multicore systems. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Feature-Request: access.log format-pattern for	SessionId</header>
    <date>Fri Jul 30 18:49:29 CEST 2010</date>
    <body>I'd like to suggest an improvement for the &amp;lt;access-log&amp;gt; configuration in context of security improvements. Background: So far I've been logging the value of the JSESSIONID cookie with every request in the access.log. It's configured like this (Resin-3.1): archive-format="access-%Y%m%d.log.gz" An activity to obviate the TOP3 of the most critical web application security risks which is "Broken Authentication and Session Management" (see OWASP Top 10 – 2010), one should follow the advice in resin.conf: - For security, use a different cookie for SSL sessions. Afterwards, the access-log configuration would still log the non-ssl cookie (JSESSIONID) and therefore one must extend the access-log format with It would be nice if there would exist a format-pattern such as %S    SessionId of Request (representing getId() of javax.servlet.http.HttpSession) like this: and the access.log would contain the JSESSIONID value for http requests and JSESSIONID for https requests. -- Steffen</body>
  </mail>
  <mail>
    <header>[Resin-interest] Response flush</header>
    <date>Fri Jul 30 12:40:07 CEST 2010</date>
    <body>Hi, I'm testing the following jsp (that print a number from 0 to 9 every second) with Apache 2.2 on resin 4.0.7 using the Caucho module, but the flush doesn't work and the numbers are all printed 10 second after the page loading. If I run it without Apache, it works correctly and the numbers are printed one by one every second, so I think it's a problem of the Caucho modules. The same problem occurs with resin 3.1 and Apache 2.2 with the Caucho module. Did anybody else find a similar problem? Thank you for any answer! Giulio " http://www.w3.org/TR/html4/loose.dtd"</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Response flush</header>
    <date>Fri Jul 30 12:50:54 CEST 2010</date>
    <body>http://www.w3.org/TR/html4/loose.dtd" http://maillist.caucho.com/mailman/listinfo/resin-interest Sorry, there is a mistake! With Resin 3.1 the flush works correctly.</body>
  </mail>
  <mail>
    <header>[Resin-interest] strange error with resin-4.0snap</header>
    <date>Tue Jul 27 10:52:35 CEST 2010</date>
    <body>Hello I tried my 3.2 application with 4.0.8 and found the bug : java.lang.ArrayIndexOutOfBoundsException: 8192 at com.caucho.vfs.i18n.UTF8Writer.write(UTF8Writer.java:136) which seems to be corrected in 4.0.9 ( http://bugs.caucho.com/view.php?id=4104 ) So I tried the 4.0 snap available in the download area. I had to add some @Temporal(TemporalType.DATE) in date/time fields, no problem. But now there is an error I do not understand : [EL Severe]: 2010-07-27 10:38:42.931--ServerSession(27007150)--Local Exception Stack: Exception [EclipseLink-7215] (Eclipse Persistence Services - 2.0.0.v20091127-r5931): org.eclipse.persistence.exceptions.ValidationException Exception Description: Could not load the field named [redacrate] on the class [class msentities.Mytitle_]. Ensure there is a corresponding field with that name defined on the class. Internal Exception: java.lang.IllegalAccessException: Class org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl can not access a member of class msentities.Mytitle_ with modifiers "" at org.eclipse.persistence.exceptions.ValidationException.invalidFieldForClass(ValidationException.java:2562) There is actually a field [redacrate] on the class [class msentities.Mytitle_] with its getter/setter, and I do not find the problem. Thanks for any help -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] 3.2.1 -&amp;gt; 4.0.8 pb with Amber</header>
    <date>Sun Jul 25 16:27:01 CEST 2010</date>
    <body>Hello I am trying to migrate my application to 4.0.8 and I'm running some unit tests. All works fine except Amber Entity JavaBeans: 1) Closing error At the beginning of the application, every "select" request made from an Entity EJB finds the data correctly, but generates this exception : Closing dangling connections.  All connections must have a close() in a finally block. java.lang.IllegalStateException: Connection UserConnection[ManagedConnectionImpl[adlresintest.0]] was not closed. Connections must have a close() in a finally block. at com.caucho.transaction.UserTransactionImpl.abortTransaction(UserTransactionImpl.java:534) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:212) at com.caucho.server.cache.CacheFilterChain.doFilter(CacheFilterChain.java:207) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) After 5 or 10 requests, this message do not appear any more. 2) Pb with join I have a small join sample that work perfectly with 3.2.1. There is a ManyToOne request and a OneToMany request. For the first request I use 2 entity beans : Company1 and User1. For the second request I use completely different beans : Company2 and User2. They both point to the same table of course. The first works all right, but the second creates an exception : executeQuery(select c.adlid, c.adlcompanyid, c.adlfirstname, c.adlname from adlcompany o, adluser c where (c.adlcompanyid = o.adlcompid) and (o.adlcompid = ?)) java.lang.ClassCastException: adlresintest.Adluser1 cannot be cast to adlresintest.Adluser2 at adlresintest.Adlcompany2.__caucho_get_users(Adlcompany2.java) at adlresintest.Adlcompany2.getUsers(Adlcompany2.java:40) at adlresintest.Adlservice.service(Adlservice.java:46) It seems that Resin408 mix up user1 and user2. The complete source code that shows these 2 problems is here : http://www.architectedulogiciel.fr/download/tmp/testjoin.zip Thanks for any help. -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] Is resin compatible with jetty's	ContinuationCometdServlet ?</header>
    <date>Thu Jul 22 14:41:19 CEST 2010</date>
    <body>I am trying to develop a cometd powered component in Wicket , which runs in resin-4.0.9 I follow wicketstuff-push's sample code , but the listening component cannot get the event . I wonder whether resin compatible with Jetty's ContinuationCometdServlet ? My config : web.xml : When using ContinuationCometdServlet , does that mean I have to bind my webapp to jetty's server ?</body>
  </mail>
  <mail>
    <header>[Resin-interest] starting with v4 .. why is it so hard</header>
    <date>Wed Jul 21 19:42:39 CEST 2010</date>
    <body>I try my very little application with v4.0.8 on linux. I changed the resin.xml for the new version, and I have problems with datasource I read http://caucho.com/resin-4.0/examples/db-jdbc/index.xtp and http://caucho.com/resin-4.0/examples/db-jdbc-ioc/index.xtp and none work. with Named or Name Adlservice.java:16: cannot find symbol symbol  : class Name location: package com.caucho.config ^ same with javax.webbeans.In: Adlservice.java:15: package javax.webbeans does not exist Even the http://wiki.caucho.com/Mysql did not help Is there any downloadable sample that work with v4.0.8 ? Thanks -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] starting with v4 .. why is it so hard</header>
    <date>Wed Jul 21 21:22:21 CEST 2010</date>
    <body>Thanks. Those pages are now updated. -- Scott http://caucho.com/resin-4.0/examples/db-jdbc/index.xtp and http://caucho.com/resin-4.0/examples/db-jdbc-ioc/index.xtp and none work. http://wiki.caucho.com/Mysql did not help</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] starting with v4 OK</header>
    <date>Thu Jul 22 09:13:18 CEST 2010</date>
    <body>Thanks a lot Scott, That mini app works fine now. When you have 2 data sources, where do you specify the jndi name ? (before there was an argument in Name(""), but Inject do not like it) Thanks http://caucho.com/resin-4.0/examples/db-jdbc/index.xtp and http://caucho.com/resin-4.0/examples/db-jdbc-ioc/index.xtp and none work. http://wiki.caucho.com/Mysql did not help http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] Firewall Question</header>
    <date>Wed Jul 21 16:15:48 CEST 2010</date>
    <body>Just wondering if anybody has ever worked through a scenario where you could automatically firewall off an IP address that requested a "poisoned" URL? There is an attacker continuously scanning all of our servers for a specific URL, but from several different IPs.  It would be nice to be able to automatically firewall them off. Has anybody done anything like that before? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Firewall Question</header>
    <date>Wed Jul 21 17:29:26 CEST 2010</date>
    <body>Having run very very large porn sites for a number of years, I've seen all sorts of automated 'attacks' like that. If you don't have anything responding to those url's, then you don't have any problems. =) Anyway, why bother? Just ignore it. I'm sure you have better things to do with your time than play whack-a-mole. jon http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Firewall Question</header>
    <date>Wed Jul 21 21:49:25 CEST 2010</date>
    <body>Jon, Right, so far that's been our tact.  This one particular attack is a bit annoying because it's inflating our logs. I was just curious if this was a capability within Resin.  We wouldn't take the time to write a custom tag or anything like that to stop it. Aaron http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Firewall Question</header>
    <date>Wed Jul 21 21:54:53 CEST 2010</date>
    <body>Disk space is cheap and your logs auto rotate. Hopefully you use a tool like 'grep' (aka: Splunk) to get the important bits (aka: stack traces) out of your logs. jon On Wed, Jul 21, 2010 at 12:47 PM, Aaron Freeman http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Firewall Question</header>
    <date>Thu Jul 22 21:00:29 CEST 2010</date>
    <body>I'd think there'd be a way you could do this programatically with a filter. Though you'd need some way to notify your firewall to block the offending IP, and perhaps you don't have an actual firewall running. Then again, you could have another filter that rejects requests from listed IPs I'm just thinking out loud that it probably wouldn't be very hard to implement something that would do the job. Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Firewall Question</header>
    <date>Thu Jul 22 22:39:04 CEST 2010</date>
    <body>Many firewalls can only block 256 ip's at a time. It becomes an expensive process for them to do packet inspection at that layer. You also need to setup a system to figure out which ip's to block and then pass those to the firewall. In my experience, this was a failable system because as soon as you block an IP, you could be potentially blocking a LOT of ip's if you block the wrong NAT gateway. =) You don't want to lock out the wrong people. I built a system like this for my last company called the 'autocockblocker'... it looked for attempts at repeated login/registration attempts and would tell the firewall to IP block those people... we ended up having to pretty much turn it off cause of the NAT issue. Really though, there are large companies (aka: cisco... aka http://www.ironport.com/ ) that make products that do exactly what you are proposing. I don't see a reason to do this within an app container like resin. That said, the utility of these products is always questionable.... if you have vectors in your application that are open for attack and thus needs a product like this, you probably have bigger issues anyway. =) jon http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Firewall Question</header>
    <date>Wed Jul 21 17:44:35 CEST 2010</date>
    <body>I've added a bug report for this. http://bugs.caucho.com/view.php?id=4133 I think with a little bit of work we can support something like this. Resin's throttling capability could be changed and extended a bit to allow programmatic control, for example blacklisting IP addresses. Then it would be straightforward to create a rewrite action that blacklisted the IP as a side-effect. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Firewall Question</header>
    <date>Fri Jul 23 19:58:35 CEST 2010</date>
    <body>If you're running a Resin instance behind Apache, you could also look at mod_security: http://www.modsecurity.org/ The open-source version is an Apache module with a rule engine (and a rule language) that might be useful to do the kind of thing you're looking for. The core rule sets are fairly substantial (they also deal with, amongst other things, SQL injection and XSS), but if all you want to do is fence off a single URL, you should be able to write a rule for that without too much effort. - Hari</body>
  </mail>
  <mail>
    <header>[Resin-interest] Message driven bean woes</header>
    <date>Tue Jul 20 07:31:05 CEST 2010</date>
    <body>I can't seem to get a message driven bean hooked up to a queue up in Resin 4.0.8.  It's been a problem since at least 4.0.6.  The problem is pretty straightforward: http://caucho.com/ns/resin" xmlns:ee="urn:java:ee" xmlns:jms="urn:java:com.caucho.jms" xmlns:test="urn:java:test" Whenever Resin tries to configure this, I get: value must not be null. com.caucho.ejb.cfg.MessageBeanConfig.setDestination(): 'destination' attribute may not be null 12: Is this not the correct way to create a named FileQueue?  Is there some other way to attach an ejb-message-bean to the queue? The isolated sample project (not much besides that resin-web.xml) is here: http://code.google.com/p/scratchmonkey/source/browse/#svn/resin4/message_driven_beans BTW the docs seem to be somewhat erratic.  Some places ( http://www.caucho.com/resin-javadoc/com/caucho/jms/FileQueue.html ) they say the config should be like this: ...and some places ( http://caucho.com/resin-4.0/examples/jms-ioc-listener/index.xtp ) they say it should be like this: Neither works :-( Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Message driven bean woes</header>
    <date>Tue Jul 20 21:22:01 CEST 2010</date>
    <body>http://caucho.com/ns/resin" Thanks. It's a timing issue in CanDI. The jms:FileQueue was added to a processed. The fix will be in the next snapshot. -- Scott http://code.google.com/p/scratchmonkey/source/browse/#svn/resin4/message_driven_beans http://www.caucho.com/resin-javadoc/com/caucho/jms/FileQueue.html ) http://caucho.com/resin-4.0/examples/jms-ioc-listener/index.xtp ) they http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Message driven bean woes</header>
    <date>Tue Jul 20 22:18:26 CEST 2010</date>
    <body>Cool.  If you get to a point where this is checked into Resin trunk, I'd love to help you test it :-) Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Message driven bean woes</header>
    <date>Wed Jul 21 01:35:39 CEST 2010</date>
    <body>By the way, I was able to work past the lazy-init issue (presumably) by using this block instead: However, enqueueing a message doesn't produce calls on my Listener. It seems to produce some sort of spin-loop inside Resin. Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Message driven bean woes</header>
    <date>Wed Jul 21 01:44:13 CEST 2010</date>
    <body>Try adding a &amp;lt;ee:Startup/&amp;gt; or &amp;lt;resin:Service/&amp;gt;. Otherwise the bean will never get instantiated. It shouldn't spin, though. Although, this is a pretty twisted way of working around the issue :) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Message driven bean woes</header>
    <date>Wed Jul 21 02:23:19 CEST 2010</date>
    <body>Neither &amp;lt;ee:Startup/&amp;gt; nor &amp;lt;resin:Service/&amp;gt; has any observable effect. There's definitely some sort of cpu loop; as soon as I enqueue one entry, one core goes to 99% for the java process.  Occasionally the thread hops between cores. * It happens with both jms:FileQueue and jms:MemoryQueue. * There seems to be a 1 or 2 second delay before the CPU pegs. There's nothing obvious to me in the thread dump, but here it is... 2010-07-20 17:01:15 Full thread dump Java HotSpot(TM) 64-Bit Server VM (16.3-b01-279 mixed mode): "resin-11" daemon prio=5 tid=101aca000 nid=0x1185fb000 waiting on condition [1185fa000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) at java.util.concurrent.locks.LockSupport.park(LockSupport.java:283) at com.caucho.env.thread.ResinThread.waitForTask(ResinThread.java:199) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:157) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) "resin-10" daemon prio=5 tid=101ac9000 nid=0x1184f8000 runnable [1184f7000] java.lang.Thread.State: RUNNABLE at java.net.SocketInputStream.socketRead0(Native Method) at java.net.SocketInputStream.read(SocketInputStream.java:129) at java.net.SocketInputStream.read(SocketInputStream.java:182) at com.caucho.hessian.io.Hessian2StreamingInput$StreamingInputStream.readChunkLength(Hessian2StreamingInput.java:241) at com.caucho.hessian.io.Hessian2StreamingInput$StreamingInputStream.startPacket(Hessian2StreamingInput.java:167) at com.caucho.hessian.io.Hessian2StreamingInput.startPacket(Hessian2StreamingInput.java:94) at com.caucho.hmtp.HmtpReader.readPacket(HmtpReader.java:102) at com.caucho.hmtp.HmtpLink.run(HmtpLink.java:111) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:169) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) "process reaper" daemon prio=5 tid=101a89800 nid=0x1183f5000 runnable [1183f4000] java.lang.Thread.State: RUNNABLE at java.lang.UNIXProcess.waitForProcessExit(Native Method) at java.lang.UNIXProcess.access$900(UNIXProcess.java:17) at java.lang.UNIXProcess$2$1.run(UNIXProcess.java:86) "watchdog-" daemon prio=5 tid=10199c800 nid=0x1181a6000 in Object.wait() [1181a5000] java.lang.Thread.State: WAITING (on object monitor) at java.lang.Object.wait(Native Method) - waiting on &amp;lt;106b74888&amp;gt; (a java.lang.UNIXProcess) at java.lang.Object.wait(Object.java:485) at java.lang.UNIXProcess.waitFor(UNIXProcess.java:115) - locked &amp;lt;106b74888&amp;gt; (a java.lang.UNIXProcess) at com.caucho.boot.WatchdogChildProcess.run(WatchdogChildProcess.java:145) at com.caucho.boot.WatchdogChildTask.run(WatchdogChildTask.java:174) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:169) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) "watchdog-process-log-0-1" daemon prio=5 tid=10199c000 nid=0x1180a3000 runnable [1180a2000] java.lang.Thread.State: RUNNABLE at java.io.FileInputStream.readBytes(Native Method) at java.io.FileInputStream.read(FileInputStream.java:199) at java.lang.UNIXProcess$DeferredCloseInputStream.read(UNIXProcess.java:227) at java.io.BufferedInputStream.fill(BufferedInputStream.java:218) at java.io.BufferedInputStream.read1(BufferedInputStream.java:258) at java.io.BufferedInputStream.read(BufferedInputStream.java:317) - locked &amp;lt;106b76e48&amp;gt; (a java.io.BufferedInputStream) at com.caucho.boot.WatchdogChildProcess$WatchdogProcessLogThread.run(WatchdogChildProcess.java:745) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:169) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) "resin-7" daemon prio=5 tid=10199b000 nid=0x117fa0000 waiting on condition [117f9f000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) at java.util.concurrent.locks.LockSupport.park(LockSupport.java:283) at com.caucho.env.thread.ResinThread.waitForTask(ResinThread.java:199) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:157) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) "resin-6" daemon prio=5 tid=10199a800 nid=0x117e9d000 waiting on condition [117e9c000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) at java.util.concurrent.locks.LockSupport.park(LockSupport.java:283) at com.caucho.env.thread.ResinThread.waitForTask(ResinThread.java:199) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:157) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) "resin-5" daemon prio=5 tid=1031c1800 nid=0x117d9a000 waiting on condition [117d99000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) at java.util.concurrent.locks.LockSupport.park(LockSupport.java:283) at com.caucho.env.thread.ResinThread.waitForTask(ResinThread.java:199) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:157) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) "resin-4" daemon prio=5 tid=1031c0800 nid=0x117c97000 waiting on condition [117c96000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) at java.util.concurrent.locks.LockSupport.park(LockSupport.java:283) at com.caucho.env.thread.ResinThread.waitForTask(ResinThread.java:199) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:157) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) "resin-3" daemon prio=5 tid=1031c0000 nid=0x117b94000 waiting on condition [117b93000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) at java.util.concurrent.locks.LockSupport.park(LockSupport.java:283) at com.caucho.env.thread.ResinThread.waitForTask(ResinThread.java:199) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:157) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) "resin-2" daemon prio=5 tid=1031bf000 nid=0x117a91000 waiting on condition [117a90000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) at java.util.concurrent.locks.LockSupport.park(LockSupport.java:283) at com.caucho.env.thread.ResinThread.waitForTask(ResinThread.java:199) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:157) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) "resin-1" daemon prio=5 tid=1031be800 nid=0x11798e000 waiting on condition [11798d000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) at java.util.concurrent.locks.LockSupport.park(LockSupport.java:283) at com.caucho.env.thread.ResinThread.waitForTask(ResinThread.java:199) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:157) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) "com.caucho.util.alarm$coordinatorthr...@39dd3812-1" daemon prio=10 tid=101999800 nid=0x11788b000 runnable [11788a000] java.lang.Thread.State: RUNNABLE at sun.misc.Unsafe.park(Native Method) at java.util.concurrent.locks.LockSupport.parkUntil(LockSupport.java:351) at com.caucho.env.thread.TaskWorker.run(TaskWorker.java:149) at java.lang.Thread.run(Thread.java:637) "resin-thread-launcher" daemon prio=5 tid=101999000 nid=0x117788000 waiting on condition [117787000] java.lang.Thread.State: WAITING (parking) at sun.misc.Unsafe.park(Native Method) at java.util.concurrent.locks.LockSupport.park(LockSupport.java:283) at com.caucho.env.thread.ThreadPool$ThreadLauncher.startConnection(ThreadPool.java:981) at com.caucho.env.thread.ThreadPool$ThreadLauncher.run(ThreadPool.java:1003) "resin-timer" daemon prio=10 tid=10319b800 nid=0x117685000 waiting on condition [117684000] java.lang.Thread.State: TIMED_WAITING (parking) at sun.misc.Unsafe.park(Native Method) at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:317) at com.caucho.util.Alarm$AlarmThread.run(Alarm.java:567) "Poller SunPKCS11-Darwin" daemon prio=1 tid=10319a800 nid=0x117582000 waiting on condition [117581000] java.lang.Thread.State: TIMED_WAITING (sleeping) at java.lang.Thread.sleep(Native Method) at sun.security.pkcs11.SunPKCS11$TokenPoller.run(SunPKCS11.java:692) at java.lang.Thread.run(Thread.java:637) "Low Memory Detector" daemon prio=5 tid=103091000 nid=0x117190000 runnable [00000000] java.lang.Thread.State: RUNNABLE "CompilerThread1" daemon prio=9 tid=101819800 nid=0x11708d000 waiting on condition [00000000] java.lang.Thread.State: RUNNABLE "CompilerThread0" daemon prio=9 tid=101819000 nid=0x116f8a000 waiting on condition [00000000] java.lang.Thread.State: RUNNABLE "Signal Dispatcher" daemon prio=9 tid=101818000 nid=0x116e87000 waiting on condition [00000000] java.lang.Thread.State: RUNNABLE "Surrogate Locker Thread (CMS)" daemon prio=5 tid=101817800 nid=0x116d84000 waiting on condition [00000000] java.lang.Thread.State: RUNNABLE "Finalizer" daemon prio=8 tid=101801800 nid=0x116a0f000 in Object.wait() [116a0e000] java.lang.Thread.State: WAITING (on object monitor) at java.lang.Object.wait(Native Method) - waiting on &amp;lt;107cf3c38&amp;gt; (a java.lang.ref.ReferenceQueue$Lock) at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118) - locked &amp;lt;107cf3c38&amp;gt; (a java.lang.ref.ReferenceQueue$Lock) at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134) at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159) "Reference Handler" daemon prio=10 tid=101801000 nid=0x11690c000 in Object.wait() [11690b000] java.lang.Thread.State: WAITING (on object monitor) at java.lang.Object.wait(Native Method) - waiting on &amp;lt;107cf0860&amp;gt; (a java.lang.ref.Reference$Lock) at java.lang.Object.wait(Object.java:485) at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116) - locked &amp;lt;107cf0860&amp;gt; (a java.lang.ref.Reference$Lock) "main" prio=5 tid=103000800 nid=0x100501000 in Object.wait() [100500000] java.lang.Thread.State: TIMED_WAITING (on object monitor) at java.lang.Object.wait(Native Method) - waiting on &amp;lt;10809c708&amp;gt; (a com.caucho.boot.ResinBoot) at com.caucho.boot.ResinBoot.main(ResinBoot.java:324) - locked &amp;lt;10809c708&amp;gt; (a com.caucho.boot.ResinBoot) "VM Thread" prio=9 tid=103089800 nid=0x116809000 runnable "Gang worker#0 (Parallel GC Threads)" prio=9 tid=103002000 nid=0x102201000 runnable "Gang worker#1 (Parallel GC Threads)" prio=9 tid=103002800 nid=0x102304000 runnable "Concurrent Mark-Sweep GC Thread" prio=9 tid=103042000 nid=0x116511000 runnable "VM Periodic Task Thread" prio=10 tid=103092800 nid=0x117293000 waiting on condition "Exception Catcher Thread" prio=10 tid=103001800 nid=0x10171b000 runnable JNI global references: 975 Heap par new generation   total 19136K, used 7024K [106810000, 107cd0000, 107cd0000) eden space 17024K,  28% used [106810000, 106cdc108, 1078b0000) from space 2112K, 100% used [1078b0000, 107ac0000, 107ac0000) to   space 2112K,   0% used [107ac0000, 107ac0000, 107cd0000) concurrent mark-sweep generation total 63872K, used 2737K [107cd0000, 10bb30000, 10e610000) concurrent-mark-sweep perm gen total 21248K, used 14067K [10e610000, 10fad0000, 113a10000) http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Message driven bean woes</header>
    <date>Wed Jul 21 03:14:13 CEST 2010</date>
    <body>Thanks. The loop is unrelated to EJB or JMS. The spin is related to changes in the sync/locking in the thread/alarm code, moving to atomic locks where possible. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Message driven bean woes</header>
    <date>Wed Jul 21 05:33:57 CEST 2010</date>
    <body>It works!  Just got this working against trunk: Without the &amp;lt;jms:JmsConnectionFactory/&amp;gt; deployment will produce an error something like: 'javax.jms.ConnectionFactory' with name 'null' is an unknown JMS resource. Thanks, Jeff http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] pb with cxf / soap</header>
    <date>Sun Jul 18 19:34:51 CEST 2010</date>
    <body>Hello I try to setup my first soap web service with resin Pro 3.2.1 / macosx 10.5 I looked at the caucho.com doc and http://wiki.caucho.com/CXF I copied the 66 items / 26Mb jars in WEB-INF/lib (waw huge...) and configured the app like in the samples I have the following error : resin.local.xml:292: com.caucho.config.types.BeanConfig.setUri(): 'cxf' is an unknown scheme for driver 'com.caucho.remote.server.ProtocolServletFactory'.  The available schemes are '[burlap, hessian]' I found only this thread from Scott (oct 2008) http://www.mail-archive.com/resin-interest@caucho.com/msg02846.html But resin-support.jar is not in the resin distrib, my ext-webapp-lib is empty. Thanks for any help . -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] pb with cxf / soap</header>
    <date>Mon Jul 19 10:34:16 CEST 2010</date>
    <body>ok after 2 hours I found the resin-support.jar in the 3.1.9 package, why did it disappear in 3.1.10 &amp;amp; 3.2 ?. I love resin but sometimes it is really hard to find the good information... I could create the web service and produce the wsdl from http://localhost:8000/Adlinterface?wsdl . But when it comes to use the client it fails : java.lang.IllegalArgumentException: property "javax.xml.stream.supportDTD" not supported this is the config for the client : http://localhost:8000/Adlinterface/Adlsoap and this is the source class for the client : public class Adlservice extends HttpServlet //ADL public void init() throws ServletException //ADL public void service(HttpServletRequest req, HttpServletResponse res) I don't see my error, Can it be a compatibility problem between resin 3.2.1 and resin-support.jar found in 3.1.9 ? thanks for any help http://wiki.caucho.com/CXF http://www.mail-archive.com/resin-interest@caucho.com/msg02846.html -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] pb with cxf / soap</header>
    <date>Tue Jul 20 01:38:58 CEST 2010</date>
    <body>http://localhost:8000/Adlinterface?wsdl . But when it comes to use the http://localhost:8000/Adlinterface/Adlsoap That looks like an error in the XML parser. You might try changing the javax.xml.stream.XMLInputFactory property to "com.sun.xml.internal.stream.XMLInputFactoryImpl". Also, you should avoid 3.2.x. Those are very old 4.0.x beta releases. -- Scott http://wiki.caucho.com/CXF http://www.mail-archive.com/resin-interest@caucho.com/msg02846.html</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] pb with cxf / soap</header>
    <date>Tue Jul 20 08:29:34 CEST 2010</date>
    <body>Thanks a lot Scott for your answer. This is the result: When I add in the conf of the webapp, the client seems to like it, and launches the request, but now the server has an err500 : javax.xml.stream.FactoryConfigurationError at javax.xml.stream.FactoryLoader.newClass(FactoryLoader.java:138) at javax.xml.stream.FactoryLoader.newInstance(FactoryLoader.java:76) at javax.xml.stream.XMLInputFactory.newInstance(XMLInputFactory.java:157) at javax.xml.stream.XMLInputFactory.newInstance(XMLInputFactory.java:143) at org.apache.cxf.staxutils.StaxUtils.createXMLInputFactory(StaxUtils.java:167) I know but when I tried version 4.0.8 it claimed that it needs java 1.6 which is not available on my macosx leopard intel 32bits :) (I've just bought snow leopard and may move to 4 soon) Is there any other "very simple" way to do soap client/server with Resin ? (my customer needs soap, if not I would have used hessian...) Thanks -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] pb with cxf / soap</header>
    <date>Tue Jul 20 10:37:43 CEST 2010</date>
    <body>Hi there, Not sure if it helps, but I have an application that exposes a SOAP interface using CXF 2.1.9 and I just tested it to work under Resin 3.1.5 and it fails under Resin 4.0.7 with a weird error. It's just a proof-of-concept application that I have, so I can't tell how well the combination really works, but at least I know those versions can work together. S! D. El 20/07/2010 8:29, Riccardo Cohen escribió: at javax.xml.stream.XMLInputFactory.newInstance(XMLInputFactory.java:143) -- ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) Web Services Centre for Information and Technology Balearic Islands University (SPAIN) -------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] pb with cxf / soap</header>
    <date>Tue Jul 20 20:22:31 CEST 2010</date>
    <body>I still think that 29Mb/66jars is too much when you need only soap. Axis 2 is also very heavy, axis 1.4 is 2Mb only :) ... bad choice probably because too old. -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] pb with cxf / soap</header>
    <date>Tue Jul 20 20:41:57 CEST 2010</date>
    <body>In this case, though, it just looks like we need to find the right classname for the XMLInputFactory, since it looks like the one I gave isn't right for the JDK. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] pb with cxf / soap</header>
    <date>Wed Jul 21 11:00:02 CEST 2010</date>
    <body>I found some people using org.codehaus.stax2.XMLInputFactory2 or com.sun.xml.stream.ZephyrParserFactory, and tried it, it gave the same error. As I don't see these libraries is in the libs, this suggests that "FactoryConfigurationError" could also mean "class not found" ? I tried to download jwsdp from sun site and copied all jars in lib, but it did not change. I'll try in resin v4 because it seems easyer... Thanks http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] cxf / soap with 4.0.8</header>
    <date>Thu Jul 22 10:03:54 CEST 2010</date>
    <body>Hello With 4.0.8 the sample given http://wiki.caucho.com/CXF works. I can now create a soap service and call it. I can also generate wsdl with /adlsoap?wsdl request and could generate java classes from wsdl with cxf's wsdl2java. These 2 steps could be added to the wiki :) Now there are some details: - I still need to unzip package 3.1.9 to find the resin-support.jar which is needed, I suppose this could be added also in 4.0.8 package ? - I would like to put cxf libraries in a subfolder of lib, so I added this to web-app conf : but it did not work. Thanks -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] cxf / soap with 4.0.8</header>
    <date>Thu Jul 22 11:17:33 CEST 2010</date>
    <body>Ooops ... it actually works all right with lib/soap/ subdirectory, I just modified the wrong file... :) By the way I noticed a very interesting file in the CXF lib directory : WHICH_JARS !! Could make my program work with only 12 libs/6Mb: commons-logging-1.1.1.jar cxf-2.2.9.jar geronimo-activation_1.1_spec-1.0.2.jar geronimo-annotation_1.0_spec-1.1.1.jar geronimo-javamail_1.4_spec-1.6.jar geronimo-stax-api_1.0_spec-1.0.1.jar jaxb-api-2.1.jar jaxb-impl-2.1.13.jar neethi-2.0.4.jar wsdl4j-1.6.2.jar wstx-asl-3.2.9.jar XmlSchema-1.4.5.jar It begins to be reasonable ! http://wiki.caucho.com/CXF works. -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] cxf / soap with 4.0.8</header>
    <date>Thu Jul 22 11:24:12 CEST 2010</date>
    <body>That's about what I had. However geronimo-javamail_1.4_spec-1.6.jar seemed unnecessary, plus I added spring.jar (3 MB) to config the services, but maybe Resin CanDI works just as well? Riccardo Cohen wrote (2010-07-22 11:14): http://wiki.caucho.com/CXF works.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] cxf / soap with 4.0.8</header>
    <date>Thu Jul 22 11:28:26 CEST 2010</date>
    <body>it seems so , for a simple web service with only one function . And it avoids spring loading which is rather good I beleive. http://wiki.caucho.com/CXF works. http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] cxf / soap with customer's wsdl</header>
    <date>Thu Jul 22 15:29:59 CEST 2010</date>
    <body>Hello The last point now is to make a web service that conforms to what my customer needs = the wsdl provided. I created the java code with cxf's wsdl2java. The source generated compiled fine in resin 4.0.8 (needing more jars than I expected). First the web service did not answer to the request /CarteMusique?wsdl complaining that there was no implementation. Actually it's true, there was no class generated for the implementation... So I copied the interface generated and made an empty implementation. Now the service answers correctly to ?wsdl But the generated service do not conform to the client. I have a little java app testing the web service, given by my customer. It answers this: javax.xml.ws.WebServiceException: Could not find service named in wsdl http://localhost:8000/CarteMusique?wsdl That seems true : the wsdl generated do not have the same service name: initial wsdl : wsdl provided by generated code : 1) the name of the service is the name of the class and not the interface 2) the word "Service" is added and I cannot do anything about it This is the resin conf: and this is the web service interface @WebService(targetNamespace = " http://services/" ;, name = "CarteMusiqueWS") I tried to add serviceName="CarteMusiqueWS" but it still anwsers "CarteMusiqueWSImplService" I also tried to add wsdlLocation = "file:....CarteMusiqueWS.wsdl" but it did not change. Thanks for any tip :) -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] cxf / soap with customer's wsdl</header>
    <date>Sat Jul 24 17:38:47 CEST 2010</date>
    <body>Hi I really need help, does anybody knows how to do that ? Thanks a lot. in wsdl http://localhost:8000/CarteMusique?wsdl http://services/" ;, name = "CarteMusiqueWS") -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] cxf / soap with customer's wsdl</header>
    <date>Sun Jul 25 01:16:59 CEST 2010</date>
    <body>Hi again Sorry for the self-response, but I found the solution : adding -impl in the wsdl2java command line solved both issues : create a default implementation, and name the service correctly I published a small sample here http://www.architectedulogiciel.fr/tutorials/resinsoapwebservice.php Thanks in wsdl http://localhost:8000/CarteMusique?wsdl http://services/" ;, name = "CarteMusiqueWS") -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] cxf / soap with 4.0.8</header>
    <date>Thu Jul 22 19:33:42 CEST 2010</date>
    <body>http://wiki.caucho.com/CXF works. I've added a bug report at http://bugs.caucho.com/view.php?id=4134 . There is extra work for 4.0.x because the remoting hasn't been updated to CDI yet. Can you try wrapping it with a &amp;lt;prologue&amp;gt; like: The *.xml files are evaluated in order, so it's possible that your work, you could change the &amp;lt;library-loader path="WEB-INF/lib"/&amp;gt; in the app-default.xml to a &amp;lt;tree-loader&amp;gt;. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] pb with cxf / soap</header>
    <date>Wed Jul 21 09:26:53 CEST 2010</date>
    <body>I recently created a proof-of-concept service with CXF under Resin 4. Needed 12 jars/9,5 MB. Less than yours, but still a lot more than Axis 1.4. I'm hoping there was something I had misunderstood... For production we're sticking with Axis 1.4. Where we cannot use Hessian, that is ;-) Riccardo Cohen wrote (2010-07-20 20:21):</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] pb with cxf / soap</header>
    <date>Wed Jul 21 09:38:52 CEST 2010</date>
    <body>I'm not sure how many jars/MB we are using with CXF as the same application is proof of concept for many other things and consumes 54 jars/55MB :). I chose CXF because we wanted to use some of it features that Axis did not have and I understood it was supposed to be Axis replacement, but that was a long time ago, so there is ample evidence that it has not happened ;). Fortunately for me, we haven't needed to use that in production yet, so with a bit more of luck, when we have to, things will be a little bit clearer (haha fat chance :) ). Good luck, D. El 21/07/2010 9:28, Mattias Jiderhamn escribió:</body>
  </mail>
  <mail>
    <header>[Resin-interest] A request for caucho apache module - connect to an	instance only after CDI deployment finished</header>
    <date>Thu Jul 15 12:10:25 CEST 2010</date>
    <body>Hi Scott, The request: Make caucho apache module to act (maybe should be configurable) as below : When check a Resin instance whether it is ready to accept connections, make sure it's not only started normally, but also all CDI startup beans were already initialized and deployed (after @PostConstuct call finished maybe). =================================================== The problem supposed to be solved: I have some @Startup beans to load various configrations from both property files and database tables in their @PostConstuct methods. This stage usually takes 40~100 seconds to finish. Should I call this stage a deployment stage, Or they're indeed tasks which the Resin App Server deployment stage will do? Almost every my web request (filters/servlets) has dependencies to these configurations. There won't be any requests be served and they'll be all blocked by either locks I defined or something else until the deployment stage finish. So I need the caucho apache module not to redirect requests to a resin instance in deployment stage, because it's just not ready yet! I have to suffer from a 40~100 seconds request halt/blocking after bring a resin instance on in a cluster, whose forend is an apache httpd server, of course without restarting the httpd service. Hope I described the problem and the request. Or there's any way out to solve this problem currently? -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] A request for caucho apache module - connect to an	instance only after CDI deployment finished</header>
    <date>Mon Jul 19 19:00:15 CEST 2010</date>
    <body>I've filed this as http://bugs.caucho.com/view.php?id=4129 . ports, because the internal cluster port is used for both clustering and apache, and needs to be open earlier. So we'll need to do something more sophisticated to handle your situation. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] A request for caucho apache module - connect	to an instance only after CDI deployment finished</header>
    <date>Tue Jul 20 11:32:45 CEST 2010</date>
    <body>Thanks for the Priority =&amp;gt; normal  :) -Wesley</body>
  </mail>
  <mail>
    <header>[Resin-interest] DI of authenticated remote-client</header>
    <date>Thu Jul 15 02:19:53 CEST 2010</date>
    <body>I'm trying to inject a connection to a remote hessian service using Resin 4.0.8.  I have the &amp;lt;remote-client&amp;gt; declared in my resin-web.xml. I can inject the proxy just fine, but I don't see any way to provide basic auth credentials.  Is it possible?  I can always use the HessinProxyFactory directly, but that seems like a workaround. Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] DI of authenticated remote-client</header>
    <date>Mon Jul 19 19:02:27 CEST 2010</date>
    <body>I've filed this as http://bugs.caucho.com/view.php?id=4130 . That looks like an oversight. We've never make the credentials configurable. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin Pro 4.0.8 shut (itself?) down via	"ResinActor" ?</header>
    <date>Wed Jul 14 01:31:18 CEST 2010</date>
    <body>Resin Pro 4.0.8, Windows 2003 Server, JDK 1.6b20 Resin appears to have shut itself down without any error messages, just these somewhat cryptic messages in the stdout.log file: stopping Anyone see anything like this before? Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.8 shut (itself?) down via	"ResinActor" ?</header>
    <date>Wed Jul 14 01:47:36 CEST 2010</date>
    <body>That message appears when the watchdog exits without a "stop" command. Basically, it's an end of file on the socket connecting the watchdog to Resin if the watchdog process dies. Does the watchdog log show any reason for it disappearing? -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.8 shut (itself?) down via "ResinActor" ?</header>
    <date>Wed Jul 14 02:03:51 CEST 2010</date>
    <body>It did not, no. It just had: ProServer[id=,cluster=] active JNI: file, nio keepalive (max=8192), socket The only other possibly odd messages were a bunch (dozens?) of the following, but they were spread out over several days, so I don't know why they would all of a sudden cause resin to stop itself: TcpSocketLink[id=1,]  failed keepalive (select) TcpSocketLink[id=3,]  failed keepalive (select) Looking at the code for ResinActor/ResinLink/HmtpLink, the run() method in HmtpLink could exit on an IOException and not log any details about the cause, and that would cause Resin to exit without being explicitly told to, no? /** * Receive messages from the client */ public void run()</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.8 shut (itself?) down via "ResinActor" ?</header>
    <date>Wed Jul 14 02:29:46 CEST 2010</date>
    <body>Just to clarify, "it" meaning the watchdog itself.  (I do assume the watchdog wasn't running when you checked the system.) The Resin instance cannot stop the watchdog, by the way. I assume the watchdog is running as a service? TcpSocketLink[id=1,]  failed keepalive (select) TcpSocketLink[id=3,]  failed keepalive (select) That error is something that will be fixed in 4.0.9, but it's in the Resin logs not the watchdog, and is unrelated to the socket between Resin and the watchdog. The exception would be logged by the thread pool code at the warning level, but I've added a catch/log to the ResinLink to make that clearer. An IO exception on that socket would cause Resin to exit. Right, and that RuntimeException would be logged by the thread pool. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.8 shut (itself?) down via "ResinActor" ?</header>
    <date>Wed Jul 14 02:33:02 CEST 2010</date>
    <body>To clarify, though, in that situation, the watchdog would restart Resin. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.8 shut (itself?) down via "ResinActor" ?</header>
    <date>Wed Jul 14 02:49:20 CEST 2010</date>
    <body>That's exactly what I would have expected. But it didn't happen. It was offline for well over an hour before I manually restarted it. Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.8 shut (itself?) down via "ResinActor" ?</header>
    <date>Thu Jul 15 02:10:15 CEST 2010</date>
    <body>I've filed this as http://bugs.caucho.com/view.php?id=4123 . Assuming I can replicate it, it'll be scheduled for 4.0.9 (which we're trying to get out this week.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.8 shut (itself?) down via "ResinActor" ?</header>
    <date>Wed Jul 14 02:46:05 CEST 2010</date>
    <body>Yes, 'it' meaning the watchdog. I think the watchdog process WAS still running. However, I cannot confirm that as I have since restarted it. Sorry. Correct. Although, if it matters, I had to install it as a service using 3.1.9's httpd.exe executable. Contrary to the 4.x documentation, the command "resin install" does not install resin as a service. Rather, one must run just "resin", which presents a somewhat confusing (to me) GUI, in which certain fields must be filled out, the values of which I was not entirely clear about. As I recall, one was labeled simply "Server", with a drop down that provided no values, and I did not know what values might be expected. I tried "Yes" and some others, but every time I tried to complete the GUI, it gave me an error. In desperation, I gave up and resorted to trying 3.1.9's httpd.exe program, and that worked. Although at what cost, I am not certain. TcpSocketLink[id=1,]  failed keepalive (select) TcpSocketLink[id=3,]  failed keepalive (select) That's correct. I wasn't clear. It was in the stdout.log, not the watchdog.log. Well, I didn't see any other messages logged. So, if it's not some odd side-effect of using 3.1.9's httpd to install 4.0.8's resin as a service, I'll just have to wait for it to happen again and file the logs as a bug. :( Rob</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.8 and Security/SSO</header>
    <date>Wed Jul 14 01:16:23 CEST 2010</date>
    <body>1.      I'm playing with security tutorial and found some problems: 1.1   Login didn't work for the next users: filch, pince, lmalfoy - users 'filch' and 'pince' don't have  records in password.xml file, user 'lmalfoy' probably has password other than 'myself' 1.2   To make 'security-basic' application work I've had to change some urls Files: buttonbar.jsp: index.jsp: Links to different areas: home.jsp: home_url = "professors/";                       TO home_url = "students/";                         TO professors/index.jsp: 2.      Resin 4.0.8 and CAS server ( http://www.jasig.org/cas ) I'm successfully running CAS (3.4.2 - latest build) service in Jetty (6.1.24) and Tomcat (7.0.0), but when I try to run in Resin 4.0.8 - I've got an exception: org.jasig.cas.services.RegisteredServiceImpl.allowedAttributes: interface java.util.List is an invalid @Basic type for allowedAttributes. RegisteredServiceImpl class is an Entity (@Entity), but doesn't have any @Basic annotations and my Resin container doesn't have any JPA/Hibernate web based    applications. Any suggestions on building SSO (Single Sign On) on Resin using open source projects? Thanks, Victor</body>
  </mail>
  <mail>
    <header>[Resin-interest] Launching Resin from Mac OS X launchd</header>
    <date>Tue Jul 13 23:01:53 CEST 2010</date>
    <body>I know we've discussed this a bit in the past, but it seems that Resin is ever-evolving on the subject. Is there guidance on the right way to set up Resin as a Mac OS X LaunchDaemon? I'm currently launching it like this: $ /bin/launchctl submit -l com.caucho.resin -p /System/Library/Frameworks/JavaVM.framework/Home/bin/java -o /Users/rmann/Desktop/stdout.log -e /Users/rmann/Desktop/stderr.log -- /System/Library/Frameworks/JavaVM.framework/Home/bin/java -server -d64 -Djava.awt.headless=true -ea -esa -Dfile.encoding=utf-8 -jar /Library/Resin/Current/lib/resin.jar -verbose -root-directory /Library/Resin/Root -conf /Library/Resin/Resin.xml console But when I try to stop it with $ launchctl stop com.caucho.resin It stops and restarts. I'm not sure if that's launchd restarting it, or if resin's watchdog is somehow getting involved. But I (think I) just want to run resin without the watchdog (which means a lot of config has to be supplied on the command line/Launchd plist). Any suggestions? Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Launching Resin from Mac OS X launchd</header>
    <date>Thu Jul 15 02:24:21 CEST 2010</date>
    <body>http://bugs.caucho.com/view.php?id=4124 . Great, thanks, Scott! I've written a little Menu Bar Status Item that allows you to start and stop Resin, but it does so via launchd, and I haven't worked out all the kinks yet. When I do, I'd be happy to give it to you guys. -- Rick http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Launching Resin from Mac OS X launchd</header>
    <date>Tue Jul 20 19:06:37 CEST 2010</date>
    <body>http://bugs.caucho.com/view.php?id=4124 . When I checked this, it looks like the "console" is behaving correctly for launchd, and the restart you're seeing is launchd's own behavior. The default behavior for launchd is to restart the application on "stop" :). To get the behavior you want, you'll need to create a resin.plist that looks something like the following, and then use launchctl "load" instead of submit: " http://www.apple.com/DTDs/PropertyList-1.0.dtd" The key difference from the standard .plist is that I've deleted the OnDemand and Keepalive items. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Launching Resin from Mac OS X launchd</header>
    <date>Tue Jul 20 20:58:10 CEST 2010</date>
    <body>Thanks, Scott. You'd think that an explicit command to "stop" would mean stop, not stop and restart. I want to use submit because I'm actually doing this from a menu bar status item, and would rather avoid creating the file (so inelegant). Is that not possible? I exec it from the program. -- Rick http://bugs.caucho.com/view.php?id=4124 . http://www.apple.com/DTDs/PropertyList-1.0.dtd" http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Launching Resin from Mac OS X launchd</header>
    <date>Tue Jul 20 21:27:24 CEST 2010</date>
    <body>I only looked at the launchctl stuff for an hour or so, and I didn't find it. It seems surprising that the submit didn't have an option for the "keepalive" capabilities, so it's entirely possible that the option exists, but I just didn't find it. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Launching Resin from Mac OS X launchd</header>
    <date>Tue Jul 20 23:25:31 CEST 2010</date>
    <body>I'll let you know what I find. Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] JMX issue</header>
    <date>Tue Jul 13 17:22:56 CEST 2010</date>
    <body>It doesn't seem to matter what port I give this, it fails.  I'll try your 9999, but ....I'm not hopeful.  Our monitoring folks wanted me to us 681, which is what they have other Resin 3.x systems using, but it failed just like 9681 did below. Is there something else I'm missing? Error: Exception thrown by the agent : java.rmi.server.ExportException: Port already in use: 9681; nested exception is: java.net.BindException: Address already in use Exception in thread "jlmAgent" java.lang.Error: snmp agent failed to launch at com.ibm.misc.SystemIntialization$3.run(SystemIntialization.java:178) Caused by: java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.jav a:48) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessor Impl.java:37) at java.lang.reflect.Method.invoke(Method.java:600) at com.ibm.misc.SystemIntialization$3.run(SystemIntialization.java:175) Caused by: java.lang.RuntimeException: Exception thrown by the agent at sun.management.Agent.error(Agent.java:319) at sun.management.Agent.error(Agent.java:310) at sun.management.Agent.startAgent(Agent.java:159) at sun.management.Agent.startAgent(Agent.java:255) ... 5 more Resin Professional 4.0.6 (built Tue, 13 Apr 2010 08:56:43 PDT) Copyright(c) 1998-2010 Caucho Technology.  All rights reserved. 1010835.license -- 2 Resin servers Intercontinental Hotel Groups (IHG) Starting Resin Professional on Tue, 13 Jul 2010 11:09:37 -0400 (EDT) OpenSSL support compiled for OpenSSL 0.9.8a 11 Oct 2005 What am I missing? Steve Francis Technical Advisor - zSeries, zLinux, z/OS IHG Alpharetta Data Center Ph:  770-442-7157 Cell:  770-906-3122 IM: francisihg</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JMX issue</header>
    <date>Tue Jul 13 18:02:49 CEST 2010</date>
    <body>It looks like you're trying to have either multiple Resin instances listen to the same port or both the watchdog and the Resin process listen to that port. So, first, how many Resin instances are running on that machine, and second, are you asking the watchdog to listen for JMX on the same port? -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JMX Issue</header>
    <date>Tue Jul 13 20:21:16 CEST 2010</date>
    <body>There is only one resin instance on this box.  The doc doesn't exactly tell how to specify this, so I used the example. I've attached my conf file, and here is how it's started. #! /bin/sh java -Djava.library.path=/usr/local/resin/libexec64 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -jar /usr/local/resin/lib/resin.jar -conf /etc/resin/resin.xml -log-directory Thanks, Steve Francis Technical Advisor - zSeries, zLinux, z/OS IHG Alpharetta Data Center Ph:  770-442-7157 Cell:  770-906-3122 IM: francisihg -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of resin-interest-requ...@caucho.com Sent: Tuesday, July 13, 2010 1:00 PM To: resin-interest@caucho.com Subject: resin-interest Digest, Vol 49, Issue 9 Send resin-interest mailing list submissions to resin-interest@caucho.com To subscribe or unsubscribe via the World Wide Web, visit http://maillist.caucho.com/mailman/listinfo/resin-interest or, via email, send a message with subject or body 'help' to resin-interest-requ...@caucho.com You can reach the person managing the list at resin-interest-ow...@caucho.com When replying, please edit your Subject line so it is more specific than "Re: Contents of resin-interest digest..." Today's Topics: 1. JMX issue (Francis, Steve (IHG)) 2. Re: JMX issue (Scott Ferguson) ---------------------------------------------------------------------- Message: 1 Date: Tue, 13 Jul 2010 11:20:57 -0400 Subject: [Resin-interest] JMX issue Message-ID: Content-Type: text/plain; charset="us-ascii" It doesn't seem to matter what port I give this, it fails.  I'll try your 9999, but ....I'm not hopeful.  Our monitoring folks wanted me to us 681, which is what they have other Resin 3.x systems using, but it failed just like 9681 did below. Is there something else I'm missing? Error: Exception thrown by the agent : java.rmi.server.ExportException: Port already in use: 9681; nested exception is: java.net.BindException: Address already in use Exception in thread "jlmAgent" java.lang.Error: snmp agent failed to launch at com.ibm.misc.SystemIntialization$3.run(SystemIntialization.java:178) Caused by: java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.jav a:48) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessor Impl.java:37) at java.lang.reflect.Method.invoke(Method.java:600) at com.ibm.misc.SystemIntialization$3.run(SystemIntialization.java:175) Caused by: java.lang.RuntimeException: Exception thrown by the agent at sun.management.Agent.error(Agent.java:319) at sun.management.Agent.error(Agent.java:310) at sun.management.Agent.startAgent(Agent.java:159) at sun.management.Agent.startAgent(Agent.java:255) ... 5 more Resin Professional 4.0.6 (built Tue, 13 Apr 2010 08:56:43 PDT) Copyright(c) 1998-2010 Caucho Technology.  All rights reserved. 1010835.license -- 2 Resin servers Intercontinental Hotel Groups (IHG) Starting Resin Professional on Tue, 13 Jul 2010 11:09:37 -0400 (EDT) OpenSSL support compiled for OpenSSL 0.9.8a 11 Oct 2005 What am I missing? Steve Francis Technical Advisor - zSeries, zLinux, z/OS IHG Alpharetta Data Center Ph:  770-442-7157 Cell:  770-906-3122 IM: francisihg -------------- next part -------------- An HTML attachment was scrubbed... URL: http://maillist.caucho.com/pipermail/resin-interest/attachments/20100713 /0ad82b05/attachment-0001.html ------------------------------ Message: 2 Date: Tue, 13 Jul 2010 09:01:57 -0700 Subject: Re: [Resin-interest] JMX issue To: General Discussion for the Resin application server Content-Type: text/plain; charset=ISO-8859-1; format=flowed It looks like you're trying to have either multiple Resin instances listen to the same port or both the watchdog and the Resin process listen to that port. So, first, how many Resin instances are running on that machine, and second, are you asking the watchdog to listen for JMX on the same port? -- Scott sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.jav a:48) sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessor Impl.java:37) http://maillist.caucho.com/mailman/listinfo/resin-interest ------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JMX Issue</header>
    <date>Tue Jul 13 20:26:52 CEST 2010</date>
    <body>Those -D should be in the &amp;lt;jvm-arg&amp;gt; inside the resin.xml (in the to the Resin instance you're starting. The problem here is that the startup programs (like the java -jar lib/resin.jar) use all -D arguments for all the children JVMs (including both the watchdog and Resin), which is a problem in this case because Java itself is reading them. So the boot JVM starts JMX, and the watchdog starts JMX and Resin starts JMX and they all are trying to listen to the same port which isn't working. If you put the -D in the &amp;lt;jvm-arg&amp;gt;, only the Resin instance itself will listen for JMX, and will avoid any conflicts. -- Scott mailto:resin-interest-boun...@caucho.com ] On Behalf Of http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/pipermail/resin-interest/attachments/20100713 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] HttpServletRequest.getRemoteHost() returns	unexpected Address</header>
    <date>Mon Jul 05 20:36:50 CEST 2010</date>
    <body>Hi, We use Apache as frontend and Resin as servlet-engine. They are installed on different machines. Now HttpServletRequest.getRemoteHost() returns the IP of the machine where Resin is installed, which also is the IP that I used to configure the mod_caucho module. httpd.conf: LoadModule caucho_module modules/mod_caucho.so ResinConfigServer [xx.xx.xx.xx] 6800 resin.xml I would have expected to get the Host of the Browser. Something obvious, that I did wrong? We use Resin Pro 4.0.6 Regards, Martin "The information in this e-mail and in any attachments is confidential and intended solely for the attention and use of the named addressee(s). This information may be subject to legal, professional or other privilege and further distribution of it is strictly prohibited without our authority. If you are not the intended recipient, you are not authorised to and must not disclose, copy, distribute, or retain this message or any part of it, and should notify us immediately. This footnote also confirms that this email has been automatically scanned for the presence of computer viruses, profanities and certain file types."</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.8: ArrayIndexOutOfBoundsException: 8192	at com.caucho.vfs.i18n.UTF8Writer.write(UTF8Writer.java:136)</header>
    <date>Mon Jul 05 12:23:58 CEST 2010</date>
    <body>Hi! We get the following stacktrace for one application after upgrading til resin 4.0.8. We can't reproduce this issue on resin 4.0.7 or 4.0.6. http://xxxx.uio.no/xxx ] Initializing Spring FrameworkServlet 'xxx' nested exception is java.lang.ArrayIndexOutOfBoundsException: 8192 at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:656) at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549) at javax.servlet.http.HttpServlet.service(HttpServlet.java:119) at javax.servlet.http.HttpServlet.service(HttpServlet.java:96) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:343) at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109) at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355) at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355) at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355) at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355) at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355) at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355) at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355) at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355) at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:355) at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:149) at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237) at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.hmux.HmuxRequest.handleInvocation(HmuxRequest.java:494) at com.caucho.server.hmux.HmuxRequest.handleRequestImpl(HmuxRequest.java:399) at com.caucho.server.hmux.HmuxRequest.handleRequest(HmuxRequest.java:365) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:662) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:625) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:576) at com.caucho.network.listen.TcpSocketLink$AcceptTask.doTask(TcpSocketLink.java:1186) at com.caucho.network.listen.TcpSocketLink$ConnectionReadTask.runThread(TcpSocketLink.java:1121) at com.caucho.network.listen.TcpSocketLink$AcceptTask.run(TcpSocketLink.java:1153) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: java.lang.ArrayIndexOutOfBoundsException: 8192 at com.caucho.vfs.i18n.UTF8Writer.write(UTF8Writer.java:136) at com.caucho.server.http.ToByteResponseStream.flushCharBuffer(ToByteResponseStream.java:464) at com.caucho.server.http.ToByteResponseStream.nextCharBuffer(ToByteResponseStream.java:434) at com.caucho.server.http.ResponseWriter.write(ResponseWriter.java:144) at com.caucho.vfs.AbstractPrintWriter.write(AbstractPrintWriter.java:91) at freemarker.core.DollarVariable.accept(DollarVariable.java:76) at freemarker.core.Environment.visit(Environment.java:210) at freemarker.core.MixedContent.accept(MixedContent.java:92) at freemarker.core.Environment.visit(Environment.java:210) at freemarker.core.IteratorBlock$Context.runLoop(IteratorBlock.java:167) at freemarker.core.Environment.visit(Environment.java:417) at freemarker.core.IteratorBlock.accept(IteratorBlock.java:102) at freemarker.core.Environment.visit(Environment.java:210) at freemarker.core.MixedContent.accept(MixedContent.java:92) at freemarker.core.Environment.visit(Environment.java:210) at freemarker.core.Macro$Context.runMacro(Macro.java:172) at freemarker.core.Environment.visit(Environment.java:603) at freemarker.core.UnifiedCall.accept(UnifiedCall.java:106) at freemarker.core.Environment.visit(Environment.java:210) at freemarker.core.MixedContent.accept(MixedContent.java:92) at freemarker.core.Environment.visit(Environment.java:210) at freemarker.core.ConditionalBlock.accept(ConditionalBlock.java:79) at freemarker.core.Environment.visit(Environment.java:210) at freemarker.core.MixedContent.accept(MixedContent.java:92) at freemarker.core.Environment.visit(Environment.java:210) at freemarker.core.Environment.process(Environment.java:190) at freemarker.template.Template.process(Template.java:237) at org.springframework.web.servlet.view.freemarker.FreeMarkerView.processTemplate(FreeMarkerView.java:366) at org.springframework.web.servlet.view.freemarker.FreeMarkerView.doRender(FreeMarkerView.java:283) at org.springframework.web.servlet.view.freemarker.FreeMarkerView.renderMergedTemplateModel(FreeMarkerView.java:233) at org.springframework.web.servlet.view.AbstractTemplateView.renderMergedOutputModel(AbstractTemplateView.java:167) at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250) at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1063) at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:801) at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719) at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644) ... 44 more -Kaj :)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.8: ArrayIndexOutOfBoundsException:	8192 at com.caucho.vfs.i18n.UTF8Writer.write(UTF8Writer.java:136)</header>
    <date>Mon Jul 05 20:18:17 CEST 2010</date>
    <body>I get the same exception in 4.0.8, but not in 4.0.6. I didn't try 4.0.7. http://xxxx.uio.no/xxx ] http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.8: ArrayIndexOutOfBoundsException: 8192 at com.caucho.vfs.i18n.UTF8Writer.write(UTF8Writer.java:136)</header>
    <date>Mon Jul 05 20:32:27 CEST 2010</date>
    <body>Hi Rick same here. :-( I opened a ticket for it. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.8: ArrayIndexOutOfBoundsException: 8192	at com.caucho.vfs.i18n.UTF8Writer.write(UTF8Writer.java:136)</header>
    <date>Tue Jul 06 18:24:35 CEST 2010</date>
    <body>Thanks. I've filed this as http://bugs.caucho.com/view.php?id=4106 . -- Scott http://xxxx.uio.no/xxx ] http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.8: ArrayIndexOutOfBoundsException:	8192	at com.caucho.vfs.i18n.UTF8Writer.write(UTF8Writer.java:136)</header>
    <date>Tue Jul 06 19:20:57 CEST 2010</date>
    <body>http://bugs.caucho.com/view.php?id=4106 . Thanks! :) Is this the same problem as in http://bugs.caucho.com/view.php?id=4104 -Kaj :)</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.8 passed the tck?</header>
    <date>Mon Jul 05 06:51:07 CEST 2010</date>
    <body>Hi, I noticed there is a 4.0.8 release at 6/30, and I tried it out. Seems fine besides some minor problem described below. ***. MDBs implements MessageListener can't have an @Override on onMessage method. I have to remove these annos to make it run. @Override @TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED) ***. according to the CDI spec, @Inject on a static field is not allowed anymore, is it right. Congratulations to the hard work! ========================================= There remains a long live big problem confused me. I quoted from CDI spec Chapter 11. Portable extensions [quote] 11.5.3. AfterDeploymentValidation event The container must fire a third event after it has validated that there are no deployment problems and before creating contexts or processing requests. The event object must be of type javax.enterprise.inject.spi.AfterDeploymentValidation: addDeploymentProblem() registers a deployment problem with the container, causing the container to abort deployment after all observers have been notified. void afterDeploymentValidation(@Observes AfterDeploymentValidation If any observer method of the AfterDeploymentValidation event throws an exception, the exception is treated as a deployment problem by the container. The container must not allow any request to be processed by the deployment until all observers of this event return. [/quote] I never saw any version of resin 4.0.x implemented this function. When I write a method like: public void bootstrap(@Observes AfterDeploymentValidation event, ... and it never got called. -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.8 passed the tck?</header>
    <date>Mon Jul 05 08:11:21 CEST 2010</date>
    <body>Another minor issue about file uploading. I used commons upload to parse the request: org.apache.commons.fileupload.parseRequest but now it don't parsed it well. Instead all upload files all turned into something like: myUploadFile.file myUploadFile.filename myUploadFile.content-type plain fields. Is that the requirement of Servlet 3.0 spec? Should I respect this change and permanently modify my low level code according to it? -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.8 passed the tck?</header>
    <date>Tue Jul 06 18:28:52 CEST 2010</date>
    <body>We do still have 9 TCK tests failing, but those appear to be bugs in the TCK itself. I've filed this, although the @Override really shouldn't have any affect since we ignore it. I'll need to check. I think it's more accurate to say that it's not defined (it was postponed to the next version because of time), not that it's forbidden. I've filed a bug for this. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin:Dispatch and friends</header>
    <date>Sun Jul 04 21:30:39 CEST 2010</date>
    <body>I'm trying to add some rewrite rules for WordPress in my resin.xml file. However, when I try the examples here: http://www.caucho.com/resin-4.0/admin/http-rewrite.xtp It just bitches that: /etc/resin/resin.xml:660: 'resin:dispatch' is an unknown property of 'com.caucho.server.webapp.WebApp'. However, I'm able to use rewrite-dispatch. Is that the same thing? Where's the doc that discusses these? What's the non-namespace way to write the if-file-exists? Resin 4.0.6 -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin:Dispatch and friends</header>
    <date>Tue Jul 06 18:25:42 CEST 2010</date>
    <body>Hi Rick, Looks like your tag has "dispatch" with a lower case "D".  It needs to be upper case as in "&amp;lt;resin:Dispatch&amp;gt;". Best, Emil http://www.caucho.com/resin-4.0/admin/http-rewrite.xtp http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Numerous problems moving to 4.0.8</header>
    <date>Sun Jul 04 20:23:38 CEST 2010</date>
    <body>I just upgraded from 4.0.5 to 4.0.8, and am encountering numerous problems. I sure hope you guys can help. Thanks! ---------------------------------- ArrayIndexOutOfBounds exceptions: WARNING (com.caucho.server.webapp.ErrorPageManager) javax.servlet.ServletException: java.lang.ArrayIndexOutOfBoundsException at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:286) at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913) at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449) at javax.servlet.http.HttpServlet.service(HttpServlet.java:119) at javax.servlet.http.HttpServlet.service(HttpServlet.java:96) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109) at com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:124) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at com.latencyzero.satdb.SecurityFilter.doFilter(SecurityFilter.java:215) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:789) at com.caucho.network.listen.TcpSocketLink.dispatchRequest(TcpSocketLink.java:662) at com.caucho.network.listen.TcpSocketLink.handleRequestsImpl(TcpSocketLink.java:625) at com.caucho.network.listen.TcpSocketLink.handleRequests(TcpSocketLink.java:576) at com.caucho.network.listen.TcpSocketLink$AcceptTask.doTask(TcpSocketLink.java:1186) at com.caucho.network.listen.TcpSocketLink$ConnectionReadTask.runThread(TcpSocketLink.java:1121) at com.caucho.network.listen.TcpSocketLink$AcceptTask.run(TcpSocketLink.java:1153) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: java.lang.ArrayIndexOutOfBoundsException ---------------------------------- Resin doesn't like my tag library directory in WEB-INF/tags (the directory is 'lz', but it complains that it doesn't end in tag): FINEST (com.caucho.jsp.java.JavaJspGenerator) taglib prefix=c uri: http://java.sun.com/jsp/jstl/core FINEST (com.caucho.jsp.java.JavaJspGenerator) taglib prefix=fmt uri: http://java.sun.com/jsp/jstl/fmt FINEST (com.caucho.jsp.java.JavaJspGenerator) taglib prefix=fn uri: http://java.sun.com/jsp/jstl/functions FINEST (com.caucho.jsp.TagFileManager) com.caucho.jsp.JspParseException: tag file '/WEB-INF/tags/lz' must end with .tag or .tagx at com.caucho.jsp.TagFileManager.getTag(TagFileManager.java:158) at com.caucho.jsp.TagFileManager.getTag(TagFileManager.java:119) at com.caucho.jsp.TagFileManager.getTag(TagFileManager.java:77) at com.caucho.jsp.ParseTagManager.getTagImpl(ParseTagManager.java:111) at com.caucho.jsp.ParseTagManager.getTag(ParseTagManager.java:81) at com.caucho.jsp.java.JavaJspGenerator.getTag(JavaJspGenerator.java:2437) at com.caucho.jsp.java.JavaJspBuilder.startElement(JavaJspBuilder.java:276) ... ---------------------------------- Quercus errors in a fairly stock Wordpress: FINEST (com.caucho.quercus.lib.regexp.RegexpState) RegexpState[Regexp[[^0-9.].*]] find() FINEST (com.caucho.quercus.lib.regexp.RegexpState) RegexpState[Regexp[[^0-9.].*]] find() FINE (com.caucho.quercus.lib.db.Mysqli) mysql_query(SET NAMES 'utf8') FINEST (com.caucho.quercus.lib.regexp.Regcomp) regexp[] Concat[AnchorBegin[], CharLoop[0, 2147483646, AsciiSet[], GroupHead[1, Or[Concat[StringIgnoreCase[], GroupTail[1, StringIgnoreCase[]]],Concat[StringIgnoreCase[], #8],Concat[StringIgnoreCase[], #8],Concat[StringIgnoreCase[], #8],Concat[StringIgnoreCase[], #8]]]]] FINEST (com.caucho.quercus.lib.regexp.RegexpState) RegexpState[Regexp[^\s*(insert|delete|update|replace|alter) ]] exec(SET NAMES 'utf8') FINEST (com.caucho.quercus.env.Env) com.caucho.quercus.QuercusException: '1' of type 'Long' is an unexpected argument, expected MysqliResult [mysql_num_fields] at com.caucho.quercus.env.Env.error(Env.java:6327) at com.caucho.quercus.env.Env.error(Env.java:6306) at com.caucho.quercus.env.Env.warning(Env.java:6057) at com.caucho.quercus.marshal.JavaMarshal.marshal(JavaMarshal.java:94) at com.caucho.quercus.env.JavaInvoker.callMethod(JavaInvoker.java:675) at com.caucho.quercus.env.JavaInvoker.call(JavaInvoker.java:641) at com.caucho.quercus.expr.CallExpr.evalImpl(CallExpr.java:238) at com.caucho.quercus.expr.CallExpr.eval(CallExpr.java:151) at com.caucho.quercus.expr.UnarySuppressErrorExpr.eval(UnarySuppressErrorExpr.java:91) ... java.lang.ArrayIndexOutOfBoundsException: 8192 at com.caucho.vfs.i18n.UTF8Writer.write(UTF8Writer.java:136) at com.caucho.vfs.WriteStream.print(WriteStream.java:561) at com.caucho.vfs.WriteStream.print(WriteStream.java:669) at com.caucho.vfs.WriteStream.println(WriteStream.java:887) at com.caucho.log.PathHandler.publish(PathHandler.java:209) at com.caucho.log.EnvironmentLogger.log(EnvironmentLogger.java:343) at java.util.logging.Logger.doLog(Logger.java:480) at java.util.logging.Logger.log(Logger.java:503) at java.util.logging.Logger.finest(Logger.java:1086) at com.caucho.quercus.lib.regexp.RegexpState.exec(RegexpState.java:282) at com.caucho.quercus.lib.regexp.RegexpModule.preg_match(RegexpModule.java:566) at sun.reflect.GeneratedMethodAccessor41.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at com.caucho.quercus.module.StaticFunction.invoke(StaticFunction.java:135) at com.caucho.quercus.env.JavaInvoker.callMethod(JavaInvoker.java:727) at com.caucho.quercus.env.JavaInvoker.call(JavaInvoker.java:641) at com.caucho.quercus.expr.CallExpr.evalImpl(CallExpr.java:238) at com.caucho.quercus.expr.CallExpr.eval(CallExpr.java:151) at com.caucho.quercus.expr.Expr.evalBoolean(Expr.java:663) at com.caucho.quercus.statement.IfStatement.execute(IfStatement.java:80) at com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) at com.caucho.quercus.program.Function.callImpl(Function.java:431) at com.caucho.quercus.program.Function.call(Function.java:349) at com.caucho.quercus.expr.CallExpr.evalImpl(CallExpr.java:236) at com.caucho.quercus.expr.CallExpr.evalCopy(CallExpr.java:164) at com.caucho.quercus.expr.BinaryAssignExpr.eval(BinaryAssignExpr.java:88) ...</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Numerous problems moving to 4.0.8</header>
    <date>Sun Jul 04 20:31:03 CEST 2010</date>
    <body>FYI, 4.0.6 doesn't seem to have these problems, *and* fixes the problem I've had in 4.0.5 where my Wordpress article titles were null. WARNING FINEST http://java.sun.com/jsp/jstl/core FINEST http://java.sun.com/jsp/jstl/fmt FINEST http://java.sun.com/jsp/jstl/functions FINEST (com.caucho.jsp.TagFileManager) FINEST FINEST FINE (com.caucho.quercus.lib.db.Mysqli) FINEST FINEST FINEST (com.caucho.quercus.env.Env) http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Numerous problems moving to 4.0.8</header>
    <date>Mon Jul 05 06:56:31 CEST 2010</date>
    <body>Hi Rick Try to place the tld at WEB-INF/classes/META-INF/your_tld_file.tld. -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Numerous problems moving to 4.0.8</header>
    <date>Mon Jul 05 09:04:22 CEST 2010</date>
    <body>I don't think that should be necessary. You're supposed to be able to place a directory inside WEB-INF/tags, and then .tag files inside that, and create namespace of tags in that directory. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Numerous problems moving to 4.0.8</header>
    <date>Mon Jul 05 09:18:29 CEST 2010</date>
    <body>My taglibs http://java.sun.com/xml/ns/j2ee" xmlns:xsi=" http://www.w3.org/2001/XMLSchema-instance" ; version="2.0" xsi:schemaLocation=" http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_0.xsd" ... has not problem in classes/META-INF 2010/7/5 Rick Mann &amp;lt;rm...@latencyzero.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] failed keepalive</header>
    <date>Fri Jul 02 21:07:23 CEST 2010</date>
    <body>Hello! running resin 4.0.6. When running one web application everything works fine. But when I try to run 50 separate instances of this app (this is a customer requirement), strange things happen: Resin server stops responding, I get this kind of messages: TcpSocketLink[id=5,]  failed keepalive (select) and, after some time, messages like this: slow alarm Alarm[alarm[ConnectionPool[jdbc/dataSource]]] 11087m where jdbc/dataSource is a JNDI dataSource of course. I googled in vain. How can I bite this problem?? Best regards, Marcin Koziej</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] failed keepalive</header>
    <date>Fri Jul 02 21:19:12 CEST 2010</date>
    <body>TcpSocketLink[id=5,]  failed keepalive (select) I'm working on the select manager at the moment. As a workaround, you can disable the select manager with The slow alarm message should be unrelated, although it could be important. We added that log to check when alarms take too long to process. Normally, they should complete in milliseconds, so 11sec is slow. It could just mean a heavily loaded system or a long GC, but it could also be an indication of a threading problem, for example thread-max set too low with lots of connections, or an actual threading problem. At thread dump around that time might help see if there is an actual problem. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin-maven-plugin problems</header>
    <date>Thu Jul 01 23:03:11 CEST 2010</date>
    <body>I've created maven web project as recommended on http://wiki.caucho.com/Maven2 For  com.caucho:resin-maven-plugin:3.1.5  got error message: C:\my-webapp&amp;gt;mvn resin:run -e + Error stacktraces are turned on. [INFO] Scanning for projects... [INFO] ------------------------------------------------------------------------ [ERROR] BUILD ERROR [INFO] ------------------------------------------------------------------------ [INFO] Internal error in the plugin manager getting plugin 'com.caucho:resin-maven-plugin': Plugin 'com.caucho:resin-maven-plugin:3.1.5' has an invalid descript or: 1) Plugin's descriptor contains the wrong version: 3.1-SNAPSHOT [INFO] ------------------------------------------------------------------------ [INFO] Trace org.apache.maven.lifecycle.LifecycleExecutionException: Internal error in the plugin manager getting plugin 'com.caucho:resin-maven-plugin': Plugin 'com.caucho: resin-maven-plugin:3.1.5' has an invalid descriptor: 1) Plugin's descriptor contains the wrong version: 3.1-SNAPSHOT at org.apache.maven.lifecycle.DefaultLifecycleExecutor.verifyPlugin(DefaultLi fecycleExecutor.java:1544) at org.apache.maven.lifecycle.DefaultLifecycleExecutor.getMojoDescriptor(Defa ultLifecycleExecutor.java:1787) at org.apache.maven.lifecycle.DefaultLifecycleExecutor.segmentTaskListByAggre gationNeeds(DefaultLifecycleExecutor.java:462) at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecyc leExecutor.java:175) at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328) at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138) at org.apache.maven.cli.MavenCli.main(MavenCli.java:362) at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java: 39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorIm pl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315) at org.codehaus.classworlds.Launcher.launch(Launcher.java:255) at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430) at org.codehaus.classworlds.Launcher.main(Launcher.java:375) Caused by: org.apache.maven.plugin.PluginManagerException: Plugin 'com.caucho:resin-maven-plugin:3.1.5' has an invalid descriptor: 1) Plugin's descriptor contains the wrong version: 3.1-SNAPSHOT at org.apache.maven.plugin.DefaultPluginManager.addPlugin(DefaultPluginManage r.java:330) at org.apache.maven.plugin.DefaultPluginManager.verifyVersionedPlugin(Default PluginManager.java:224) at org.apache.maven.plugin.DefaultPluginManager.verifyPlugin(DefaultPluginMan ager.java:184) at org.apache.maven.plugin.DefaultPluginManager.loadPluginDescriptor(DefaultP luginManager.java:1642) at org.apache.maven.lifecycle.DefaultLifecycleExecutor.verifyPlugin(DefaultLi fecycleExecutor.java:1540) ... 15 more [INFO] ------------------------------------------------------------------------ [INFO] Total time: &amp;lt; 1 second [INFO] Finished at: Thu Jun 24 12:40:15 PDT 2010 [INFO] Final Memory: 3M/247M For  com.caucho:resin-maven-plugin:4.0-SNAPSHOT  maven:run works OK , but only for static content. If you have beans.xml, the definition of this file is different for SNAPSHOT version (&amp;lt;Beans xmlns="urn:java:ee" /&amp;gt;) and the latest 4.0.7 version ("&amp;lt;beans xmlns= http://java.sun.com/xml/ns/javaee /&amp;gt;") Starting com.caucho:resin-maven-plugin:4.0.2  (4.0.3, 4.0.7) I've got an error: [INFO] ------------------------------------------------------------------------ [ERROR] BUILD ERROR [INFO] ------------------------------------------------------------------------ [INFO] Failed to configure plugin parameters for: com.caucho:resin-maven-plugin:4.0.2 Cause: Cannot find setter nor field in com.caucho.maven.MavenRun for 'contextRoot' [INFO] ------------------------------------------------------------------------ [INFO] Trace org.apache.maven.lifecycle.LifecycleExecutionException: Error configuring: com.caucho:resin-maven-plugin. Reason: Unable to parse the created DOM for plugin con figuration at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLi fecycleExecutor.java:723) at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal( DefaultLifecycleExecutor.java:569) at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLif ecycleExecutor.java:539) at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFa ilures(DefaultLifecycleExecutor.java:387) at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(De faultLifecycleExecutor.java:348) at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecyc leExecutor.java:180) at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328) at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138) at org.apache.maven.cli.MavenCli.main(MavenCli.java:362) at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java: 39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorIm pl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315) at org.codehaus.classworlds.Launcher.launch(Launcher.java:255) at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430) at org.codehaus.classworlds.Launcher.main(Launcher.java:375) Caused by: org.apache.maven.plugin.PluginConfigurationException: Error configuring: com.caucho:resin-maven-plugin. Reason: Unable to parse the created DOM for p lugin configuration at org.apache.maven.plugin.DefaultPluginManager.populatePluginFields(DefaultP luginManager.java:1363) at org.apache.maven.plugin.DefaultPluginManager.getConfiguredMojo(DefaultPlug inManager.java:724) at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginMana ger.java:468) at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLi fecycleExecutor.java:694) ... 17 more Caused by: org.codehaus.plexus.component.configurator.ComponentConfigurationException : Cannot find setter nor field in com.caucho.maven.MavenRun for 'contextRoot' at org.codehaus.plexus.component.configurator.converters.ComponentValueSetter .&amp;lt;init&amp;gt;(ComponentValueSetter.java:68) at org.codehaus.plexus.component.configurator.converters.composite.ObjectWith FieldsConverter.processConfiguration(ObjectWithFieldsConverter.java:134) at org.codehaus.plexus.component.configurator.BasicComponentConfigurator.conf igureComponent(BasicComponentConfigurator.java:56) at org.apache.maven.plugin.DefaultPluginManager.populatePluginFields(DefaultP luginManager.java:1357) ... 20 more [INFO] ------------------------------------------------------------------------ [INFO] Total time: 1 minute 1 second [INFO] Finished at: Fri Jun 25 10:09:14 PDT 2010 [INFO] Final Memory: 12M/247M [INFO] ------------------------------------------------------------------------ My configuration is: Java - Java 1.6 Resin Maven plugin configuration: And I run: mvn resin:run or mvn resin:run -Dresin.contextRoot="bar" with the same result Can anybody tell me how to configure a maven plugin for mvn resin:run task? Any upcoming changes for resin-maven-plugin version 4.0.8? Victor</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.7 - simple service example over REST</header>
    <date>Wed Jun 30 21:15:52 CEST 2010</date>
    <body>The simple service example claims to support hessian, burlap, rest, soap, etc. However, when we try to exercise the example with REST enabled we received errors. Is REST supported by resin 4.0.7? If so, how can we make the simple example work? The error indicates that ProtocolServletFactory only support burlap and hessian. How can we add REST as a supported protocol? matt</body>
  </mail>
  <mail>
    <header>[Resin-interest] com.caucho.sql.UserConnection.createSQLXML throws	UnsupportedOperationException</header>
    <date>Tue Jun 29 19:46:57 CEST 2010</date>
    <body>Hello! I have the following issue with resin 4.0.7: When using a DataSource provided by resin, and trying to use createSQLXML i get UnsupportedOperationException. the Datasource is defined as follows in web.xml: The driver I am using seems to support this operation, because when using org.springframework.jdbc.datasource.SimpleDriverDataSource in uni tests  I am able to create the XML object. How should I handle this issue? Use different DataSource implementation? (like commons-dbcp?) I'd like to use the one provided by Resin though. Regards, Marcin Koziej</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] com.caucho.sql.UserConnection.createSQLXML	throws UnsupportedOperationException</header>
    <date>Tue Jun 29 20:07:34 CEST 2010</date>
    <body>Thanks Marcin, I filed a bug http://bugs.caucho.com/view.php?id=4092 Using a different DataSource implementation for now is a good option or use the code below to get to access the underlying connection object as a work around: Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] in Resin 4.0.7 HtttpServletRequest needs to an	instance of CauchoRequest</header>
    <date>Wed Jun 30 18:05:07 CEST 2010</date>
    <body>Hi! To obtain some URI manipulation I implemented an instance of javax.servlet.http.HttpServletRequest. // custom code... //all the other methos are implemented like these... ... Then I used this in a filter in the following way public void doFilter(ServletRequest request, ServletResponse response, FilterChain nextFilter) throws ServletException, IOException This code worked fine in resin 3.0 and 3.1 but on resin 4.0.7 I get this exception java.lang.ClassCastException: it.sodomaco.turcom.lingue.MultiLingueHSR cannot be cast to com.caucho.server.http.CauchoRequest it.sodomaco.turcom.lingue.MultiLingueHSR cannot be cast to com.caucho.server.http.CauchoRequest com.caucho.server.http.CauchoRequestWrapper.getCauchoRequest(CauchoRequestWrapper.java:790) com.caucho.server.http.CauchoRequestWrapper.getSessionId(CauchoRequestWrapper.java:476) com.caucho.server.http.AbstractCauchoRequest.finishRequest(AbstractCauchoRequest.java:588) com.caucho.server.webapp.IncludeRequest.finishRequest(IncludeRequest.java:365) com.caucho.server.webapp.RequestDispatcherImpl.include(RequestDispatcherImpl.java:431) com.caucho.server.webapp.RequestDispatcherImpl.include(RequestDispatcherImpl.java:342) it.sodomaco.turcom.MainFilter.doFilter(MainFilter.java:107) .... Any ideas or suggestions? Is this beaviour to be considered a bug of resin? thank you in advance Andrea</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] in Resin 4.0.7 HtttpServletRequest needs to an instance of CauchoRequest</header>
    <date>Wed Jun 30 21:46:11 CEST 2010</date>
    <body>[snip] Yes, it is a bug that Alex recently fixed: http://bugs.caucho.com/view.php?id=4073 It should be fixed for Resin 4.0.8 due out soon (a week or two). Emil</body>
  </mail>
  <mail>
    <header>[Resin-interest] Conditional Rewrite with QuercusS	ervlet is changing WebApp´s Real-Path</header>
    <date>Fri Jun 25 21:28:30 CEST 2010</date>
    <body>Hi, I'm using Resin 3.1.10 and experience a very, very strange behavior with Resin's PHP Admin console. In a Nutshell: Using a conditional rewrite for the resin-admin web-app changes the getRealPath() when accessing /index.php from the original location to the ROOT-Webapp I was able to reproduce it on a clean installation. That's how I did it: This file just contains: Welcome to dummy index.php of the ROOT Web-App. Your IP Address is &amp;lt;?php 2.) Modifying resin.conf: - Added &amp;lt;resin:import&amp;gt; with messages and a rewrite condition. - Removed &amp;lt;prologue&amp;gt; as I want to have no authentication in this bug reproduction case - configures an explicit root web-app matching the - webapp's ROOT This file contains: http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" http://www.google.com/" - Only the PHP Servlet is active - Other authentication stuff has been removed http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" Expectation: Accessing http://localhost:8080/resin-admin should serve Actual Result: The "index.php" from the ROOT Web-App is shown. Welcome to dummy index.php of the ROOT Web-App. Your IP Address is 127.0.0.1 Then I've added finest debug logging in resin.conf like this: level='finest' There are several interesting things in the debug log, here is only an excerpt. Please see how the getRealPath() changes: com.caucho.server.http.HttpRequest (handleRequest) Http[1] GET /resin-admin/ HTTP/1.1 com.caucho.server.http.HttpRequest (handleRequest) Http[1] Remote-IP: 127.0.0.1:2510 com.caucho.server.http.HttpRequest (parseHeaders) Http[1] Host: localhost:8080 com.caucho.server.http.HttpRequest (parseHeaders) Http[1] User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.4) Gecko/20100611 Firefox/3.6.4 GTB7.0 ... com.caucho.server.http.HttpRequest (parseHeaders) Http[1] Keep-Alive: 115 com.caucho.server.http.HttpRequest (parseHeaders) Http[1] Connection: keep-alive com.caucho.server.http.HttpRequest (parseHeaders) Http[1] Cache-Control: max-age=0 D:\IDE\Appsrv\BUG\resin-pro-3.1.10\php\admin\ ... D:\IDE\Appsrv\BUG\resin-pro-3.1.10\php\admin\index.jsp D:\IDE\Appsrv\BUG\resin-pro-3.1.10\php\admin\index.php com.caucho.server.dispatch.ServletMapper (mapServlet) invoke (uri:/index.php -&amp;gt; *.php) com.caucho.server.rewrite.RewriteDispatch (map) rewrite-dispatch check uri '/resin-admin/' com.caucho.server.rewrite.AbstractRuleWithConditions (map) match .* '/resin-admin/' --&amp;gt; '/resin-admin/' com.caucho.server.dispatch.ServletInvocation (service) Dispatch '/index.php' to com.caucho.server.rewrite.conditionfilterch...@e3fda4 com.caucho.server.rewrite.ConditionFilterChain (doFilter) null ^/ '/resin-admin/' --&amp;gt; ' http://www.google.com/resin-admin/ ' ... D:\IDE\Appsrv\BUG\resin-pro-3.1.10\webapps\ROOT\index.php com.caucho.loader.DynamicClassLoader (addLoader) DynamicClassLoader[] adding loader SimpleLoader[/D:/IDE/Appsrv/BUG/resin-pro-3.1.10/php/admin/WEB-INF/work] com.caucho.loader.DynamicClassLoader (addLoader) DynamicClassLoader[] adding loader SimpleLoader[/D:/IDE/Appsrv/BUG/resin-pro-3.1.10/php/admin/WEB-INF/work,prefix=_quercus._d_23a._ide._appsrv._bug._resin_22dpro_22d3__1__10._webapps._root] com.caucho.loader.ClassEntry (&amp;lt;clinit&amp;gt;) In-place class redefinition (HotSwap) is available. com.caucho.quercus.page.ProPageManager (compilePage) Quercus[/D:/IDE/Appsrv/BUG/resin-pro-3.1.10/webapps/ROOT/index.php] loading precompiled page D:\IDE\Appsrv\BUG\resin-pro-3.1.10\webapps\ROOT\ And now the same request with disabled included fallback.conf containing the conditional rewrite: com.caucho.server.http.HttpRequest (handleRequest) Http[2] GET /resin-admin/ HTTP/1.1 com.caucho.server.http.HttpRequest (handleRequest) Http[2] Remote-IP: 127.0.0.1:2556 com.caucho.server.http.HttpRequest (parseHeaders) Http[2] Host: localhost:8080 com.caucho.server.http.HttpRequest (parseHeaders) Http[2] User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.4) Gecko/20100611 Firefox/3.6.4 GTB7.0 ... com.caucho.server.http.HttpRequest (parseHeaders) Http[2] Pragma: no-cache com.caucho.server.http.HttpRequest (parseHeaders) Http[2] Cache-Control: no-cache D:\IDE\Appsrv\BUG\resin-pro-3.1.10\php\admin\ ... D:\IDE\Appsrv\BUG\resin-pro-3.1.10\php\admin\index.jsp D:\IDE\Appsrv\BUG\resin-pro-3.1.10\php\admin\index.php com.caucho.server.dispatch.ServletMapper (mapServlet) invoke (uri:/index.php -&amp;gt; *.php) com.caucho.server.dispatch.ServletInvocation (service) Dispatch '/index.php' to WebAppFilterChain[ http://localhost:8080/resin-admin , next=ServletFilterChain[*.php]] ... com.caucho.server.dispatch.ServletConfigImpl (createServlet) Servlet[*.php] active com.caucho.server.dispatch.ServletConfigImpl (createServlet) javax.management.NotCompliantMBeanException: resin:type=QuercusServlet,Host=default,WebApp=/resin-admin,name="\*.php" mbean has no MBean interface com.caucho.server.dispatch.ServletConfigImpl (createServlet) Servlet[*.php] active com.caucho.loader.DynamicClassLoader (addLoader) DynamicClassLoader[] adding loader SimpleLoader[/D:/IDE/Appsrv/BUG/resin-pro-3.1.10/php/admin/WEB-INF/work] com.caucho.loader.DynamicClassLoader (addLoader) DynamicClassLoader[] adding loader SimpleLoader[/D:/IDE/Appsrv/BUG/resin-pro-3.1.10/php/admin/WEB-INF/work,prefix=_quercus] com.caucho.loader.DynamicClassLoader (addLoader) DynamicClassLoader[] adding loader SimpleLoader[/D:/IDE/Appsrv/BUG/resin-pro-3.1.10/php/admin/WEB-INF/work,prefix=_quercus] com.caucho.java.JavaCompiler (compileInt) Compiling _quercus/_index__php.java com.caucho.loader.DynamicClassLoader (addLoader) DynamicClassLoader[] adding loader JarLoader[] ... com.caucho.loader.DynamicClassLoader (addLoader) DynamicClassLoader[] adding loader SimpleLoader[/D:/IDE/Appsrv/BUG/resin-pro-3.1.10/php/admin/WEB-INF/work,prefix=_quercus._web_22dinf._php] com.caucho.webbeans.manager.WebBeansContainer (bind) WebBeansContainer[system] bind(ServletAuthenticator) returns SingletonComponent[ManagementAuthenticator, @Standard, name=resin-admin, @SingletonScope] com.caucho.server.security.AbstractLogin (getAuthenticator) BasicLogin[] using ManagementAuthenticator[MD5-base64,resin] com.caucho.server.connection.AbstractHttpRequest (isUserInRole) no user for isUserInRole ... com.caucho.server.http.HttpResponse (writeHeadersInt) Http[2] HTTP/1.1 302 Found com.caucho.server.http.HttpResponse (writeHeadersInt) Http[2] Expires: 01 Dec 1994 16:00:00 GMT com.caucho.server.http.HttpResponse (writeHeadersInt) Http[2] Cache-Control: max-age=0,private com.caucho.server.http.HttpResponse (writeHeadersInt) Http[2] Pragma: No-Cache com.caucho.server.http.HttpResponse (writeHeadersInt) Http[2] Location: http://localhost:8080/resin-admin/status.php com.caucho.server.http.HttpResponse (writeHeadersInt) Http[2] Content-Type: text/html com.caucho.server.http.HttpResponse (writeHeadersInt) Http[2] Content-Length: 0 com.caucho.server.http.HttpRequest (handleRequest) Http[2] keepalive com.caucho.server.port.TcpConnection (keepalive) Tcp[,2] keepalive (thread) com.caucho.server.http.HttpRequest (handleRequest) Http[2] GET /resin-admin/status.php HTTP/1.1 com.caucho.server.http.HttpRequest (handleRequest) Http[2] Remote-IP: 127.0.0.1:2556 com.caucho.server.http.HttpRequest (parseHeaders) Http[2] Host: localhost:8080 ,,, com.caucho.server.dispatch.ServletMapper (mapServlet) invoke (uri:/status.php -&amp;gt; *.php) com.caucho.server.dispatch.ServletInvocation (service) Dispatch '/status.php' to WebAppFilterChain[ http://localhost:8080/resin-admin , next=ServletFilterChain[*.php]] D:\IDE\Appsrv\BUG\resin-pro-3.1.10\php\admin\status.php com.caucho.loader.DynamicClassLoader (addLoader) DynamicClassLoader[] adding loader SimpleLoader[/D:/IDE/Appsrv/BUG/resin-pro-3.1.10/php/admin/WEB-INF/work] ... You see, it's working without that conditional rewrite. It will also work when all the "*.php" Servlet Mappings for the QuercusServlet are removed (app-default.xml and php/admin/WEB-INF/resin-web.xml). Accessing /resin-admin will contain an empty page with the php source. So, there seems to be a connection between the conditional rewrite and the QuercusServlet. Also other web-apps within that host behave normal. When I change the condition in the rewrite clause to match, I will be forwarded to google.com. Any Idea how to work around that issue? Thanks and best regards, Steffen</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest]	Conditional Rewrite with QuercusS	ervlet is changing WebApp´s Real-Path</header>
    <date>Mon Jun 28 08:57:56 CEST 2010</date>
    <body>After some other issues have been raised such as not found errorPage for a web-app without QuercusServlet, I've found a work around. seems to fix these issues with changing Real-Path. -- Steffen http://caucho.com/ns/resin" http://caucho.com/ns/resin/core" http://www.google.com/" http://caucho.com/ns/resin" http://caucho.com/ns/resin/core" http://localhost:8080/resin-admin should serve http://www.google.com/resin-admin/ ' http://localhost:8080/resin-admin , http://localhost:8080/resin-admin/status.php http://localhost:8080/resin-admin ,</body>
  </mail>
  <mail>
    <header>[Resin-interest] HibernateValidator problems when running on Resin</header>
    <date>Thu Jun 24 10:43:58 CEST 2010</date>
    <body>Hi! I'm working on an application where HibernateValidator does not work as excpected when running on Resin 4.0.7 but just fine when running on jetty 6.1.22 with "mvn jetty:run". We have annotated our domainobjects which we try to validate like f.x. @NotEmpty In our submit method we are looking at the BindingResult to see if we have any validation errors: @RequestMapping(value = "/edit.html", method = RequestMethod.POST) public ModelAndView submit(@ModelAttribute("commandObject") @Valid final T commandObject, // handle validation errors // save and be happy :) If we try to submit a form where some of the properties with @NotEmpty annotations is empty the method result.hasErrors() returnes true (as expected) when running on jetty but not when running on Resin. Strange? We are using HibernateValidator 4.0.2, Spring 3.0.2, Hibernate 3.5.3 (not JPA) and Resin 4.0.7. I have a small demo project which reproduce this issue which can be found on http://folk.uio.no/erlendfg/validator_test/validator_test.zip To run just use "mvn jetty:run" and it is available at http:/localhost:8080/validator_test TIA for any what so ever hints or ideas on how to get closer to a solution on this issue! :) -Kaj :)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HibernateValidator problems when running on	Resin</header>
    <date>Fri Jun 25 13:40:33 CEST 2010</date>
    <body>Hi! Some more info on this issue. When submiting a form where a required (annotated @NotEmpty) field is empty the last line in following gives me a Set with the validation errors (ConstraintViolations) when running under jetty (as expected) BUT when running under Resin 4.0.7 I get a empty set. Strange? @RequestMapping(value = "/edit.html", method = RequestMethod.POST) public ModelAndView submit(@ModelAttribute("commandObject") @Valid final T commandObject, final BindingResult result, final HttpServletRequest request, final ModelMap modelMap, @RequestParam(value = "cancel", required = false) final String LocalValidatorFactoryBean localValidatorFactoryBean = (LocalValidatorFactoryBean) applicationContext logger.debug("validator class: " + validator.getClass().getName()); // gives org.hibernate.validator.engine.ValidatorImpl A maybe even stranger thing is that the when the BeanValidationEventListener kicks in before save is does find a validation error: javax.validation.ConstraintViolationException: validation failed for classes [no.uio.webapps.medark.domain.Diagnosis] during update time for groups [javax.validation.groups.Default, ] at org.hibernate.cfg.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:132) at org.hibernate.cfg.beanvalidation.BeanValidationEventListener.onPreUpdate(BeanValidationEventListener.java:79) at org.hibernate.action.EntityUpdateAction.preUpdate(EntityUpdateAction.java:236) at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:87) at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:268) at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:260) at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:180) at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321) at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51) at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1206) at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:375) at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:137) at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656) at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754) at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723) at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:375) at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89) at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) at $Proxy82.store(Unknown Source) Why does the last validation find errors but not the one Spring calles for me (because of the @Valid annotation) or the one I call manually? -Kaj :)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HibernateValidator problems when running on	Resin</header>
    <date>Fri Jun 25 14:57:26 CEST 2010</date>
    <body>Hi! I think I have found the source of this problem and a solution :) org.hibernate.validator.engine.resolver.DefaultTraversableResolver.isReachable seems to be retruning false for all my properties. When implementing my own TraversableResolver with a isReachable always returning true and creating a validation.xml specifying this class as the traversable-resolver the validation so far seems to work as expected on resin too! Good! -Kaj :)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HibernateValidator problems when running on Resin</header>
    <date>Fri Jun 25 17:53:59 CEST 2010</date>
    <body>Do you have any idea why the default would be working differently on Resin? That library code shouldn't be directly dependent on Resin (we don't provide anything like a TraversableResolver), but it's possible that some classloader methods like ClassLoader.getResource are behaving differently. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HibernateValidator problems when running on	Resin</header>
    <date>Sun Jun 27 19:30:27 CEST 2010</date>
    <body>Hi! Thanks for asking :) The TraversableResolver.isReachable has the following javadoc: "Determine if the Bean Validation provider is allowed to reach the property state" The default validation.xml which comes with HibernateValidator 4.0.2 contains the following line: and this class has the following method: public boolean isReachable(Object traversableObject, Path.Node traversableProperty, Class&amp;lt;?&amp;gt; rootBeanType, Path pathToTraversableObject, return jpaTraversableResolver == null || jpaTraversableResolver.isReachable( traversableObject, traversableProperty, rootBeanType, pathToTraversableObject, elementType You can find the full sourcecode of this class at http://bit.ly/bnQId6 and see how it obtains its jpaTraversableResolver. So, when running under jetty jpaTraversableResolver is null and isReachable is returning true and we get all our attributes validated. Good :) But... now I come to the part where I'm mostly guessing, when running under resin we have a jpaTraversableResolver in which isReachable seems to return false which cause our attributes to not get validated. We are not using JPA in the application I'm working on now, but still when running under resin we have a javax.persistence.PersistenceUtil class in the classpath and DefaultTraversableResolver thinks we are running JPA. We have another project which uses JPA and it seems to have the same problem with not getting attributes validated. When DefaultTraversableResolver thinks we are using JPA it delegates to org.hibernate.validator.engine.resolver.JPATraversableResolver to check if an object is reachable. It seems to be something strange in the way JPATraversableResolver figures out if attributes is reachable or not since we don't get our attributes validated even in projects using JPA. JPATraversableResolver uses the following code: public boolean isReachable(Object traversableObject, Path.Node traversableProperty, Class&amp;lt;?&amp;gt; rootBeanType, Path pathToTraversableObject, return traversableObject == null || Persistence.getPersistenceUtil().isLoaded( (from http://bit.ly/apHvnZ ) Since my project does not use JPA and the workaround with adding our own TraversableResolver implementation to our validation.xml files solves this issue for us, I haven't does any more digging into this. I guess there is two possible problems here: 1) DefaultTraversableResolver should have had a better way of detecting if we use JPA or not (other than looking for avax.persistence.PersistenceUtil in the classpath). 2) In our projects using JPA the JPATraversableResolver.isReachable is returning false when it shouldn't. That might be a configuration or other problem on our side since this seems to work ok for others out there. Anyway... both issues are related to HibernateValidator and we have a workaround for our issue. Great! ;-) -Kaj :)</body>
  </mail>
  <mail>
    <header>[Resin-interest] svn?</header>
    <date>Mon Jun 21 22:56:29 CEST 2010</date>
    <body>I haven't been able to connect to the Resin svn server for a while... did something move? loa:Resin jeff$ svn up svn: Can't connect to host 'svn.caucho.com': Operation timed out loa:Resin jeff$ svn info Path: . URL: svn://svn.caucho.com/resin/trunk Repository Root: svn://svn.caucho.com Repository UUID: 9c94448d-38f1-0310-a231-d98308ff1ebf Revision: 7176 Node Kind: directory Schedule: normal Last Changed Author: alex Last Changed Rev: 7176 Last Changed Date: 2010-06-01 13:42:51 -0700 (Tue, 01 Jun 2010) Also, I wasn't able to find a document at the current caucho.com that explains how to read trunk.  Obviously there once was one, since I managed to set it up a long time ago... Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] svn?</header>
    <date>Wed Jun 23 18:35:30 CEST 2010</date>
    <body>Any word on this? I'd really like to test SubEtha against the Resin 4.0.8 code before it gets released.  SubEtha uses a very broad set of CanDI features - especially since it was upgraded to the final CDI spec - and there have different fatal issues with every Resin release since 4.0.0.  I'm hoping to be able to get any final issues resolved without waiting for another full development cycle :-( Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] svn?</header>
    <date>Wed Jun 23 18:47:18 CEST 2010</date>
    <body>We moved the svn.caucho.com server and hadn't restarted the svn server. I believe it's been restarted now. Yep. We're passing the CDI TCK now, though, so the issues should be more limited. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] svn?</header>
    <date>Thu Jun 24 17:38:55 CEST 2010</date>
    <body>It should be available now. Since we're working on regression failures of our own before the 4.0.8 release, this is a good time to report any incompatibilities. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] EJB3 Primary Key Generation</header>
    <date>Mon Jun 14 19:41:23 CEST 2010</date>
    <body>Is the @GeneratedValue JPA annotation fully supported in Resin 4?  I have an entity which should use a TableGeneration strategy against Sybase.  There is an already existing table, NextId, in our database which stores the primary key value for many tables.  When starting up Resin, an error is given.  From the error it looks like Resin is trying to use a table named GEN_TABLE, even though the annotation clearly provides the existing NextId as the table name. @Id @GeneratedValue(strategy=GenerationType.TABLE, generator="ol_pk_generator") @TableGenerator( name="ol_pk_generator", table="NextId", pkColumnName="tableName", pkColumnValue="OrderLine", valueColumnName="id" ) @Column(name="orderLineId") private int Here is the error: Compiling com/test/bean/OrderLine__ResinExt.java WebApp[ http://default/resin-doc/examples/servlet-hello ] fail 'GEN_TABLE' is not a valid database table.  Either the table needs to be created or the create-database-tables attribute must be set. com.sybase.jdbc2.jdbc.SybSQLException: GEN_TABLE not found. Specify owner.objectname or use sp_help to check whether the object exists (sp_help may produce lots of output). 'GEN_TABLE' is not a valid database table.  Either the table needs to be created or the create-database-tables attribute must be set. com.sybase.jdbc2.jdbc.SybSQLException: GEN_TABLE not found. Specify owner.objectname or use sp_help to check whether the object exists (sp_help may produce lots of output).</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] EJB3 Primary Key Generation</header>
    <date>Mon Jun 14 20:49:41 CEST 2010</date>
    <body>We suggest that a different JPA implementation is used with Resin at this time. Eclipse Link and Open JPA are good candidates. THanks, Alex Compiling http://default/resin-doc/examples/servlet-hello ] fail 'GEN_TABLE' is 'GEN_TABLE' is http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Questions regarding resin 4.0.x and the watchdog</header>
    <date>Mon Jun 14 09:44:31 CEST 2010</date>
    <body>Hi list, We are currently in the process of setting up a production environment with resin 4.0.x on our Linux servers. Currently we are testing resin 4.0.7. First of all I would like to mention that the watchdog documentation http://caucho.com/resin-4.0/admin/starting-resin-watchdog.xtp is repeating point 1 - 7 in point 8 to 14. We have experience with resin 3.0.x from earlier, so the biggest change for us is the watchdog. Experiments with a single, shared watchdog has however left us with some questions: 1) With a single, shared watchdog we manage to specify where the watchdog places its logs with the -log-directory argument to resin.jar, however that also results in the jvm-logs for each resin application will be placed in the same directory. Especially on our development server it would be convenient to have these located along with the logs of the application, like we get when running a watchdog for each application. Is it possible to specify in watchdog.xml where the jvm for each application should be placed? 2) In addition to experimenting with the watchdog we have been testing /resin-admin which might turn quite useful for some of the applications we are running. However, we were wondering if it is possible to run one single /resin-admin in watchdog.xml in order to "monitor" all our applications? If that is not possible I guess we have to sett up a /"app"-admin for each applications we want to monitor. For historical reasons we have a setup where each applications has its own resin.xml file, and we would like to keep it like this for the future as well since we find it easier to administrate. 3) What is the gain of having only one watchdog? That is, do we use less resources by having only one watchdog with several applications, than having one watchdog per application? -- Halvor Utby</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Questions regarding resin 4.0.x and the	watchdog</header>
    <date>Mon Jun 14 20:47:31 CEST 2010</date>
    <body>http://caucho.com/resin-4.0/admin/starting-resin-watchdog.xtp Thanks, that will be fixed with the next doc release. You can change the log's location in resin.xml configuration file using log-hanlder. The watchdog's purpose is to keep resin instances running, (re)starting them when necessary (failures). It doesn't run any apps, but the /resin-admin deployed on any node in the cluster will track every server in the cluster. Needing fewer resources – each watchdog would be a separate JVM otherwise. Different physical machines will have separate instances of watchdog. Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Anything change regarding mod_caucho from 4.0.5 to	4.0.6/4.0.7?</header>
    <date>Sun May 30 23:29:38 CEST 2010</date>
    <body>We run an Apache + resin config on RH Linux and its been stable for the past few releases. Right now we're on 4.0.5. When I went through the usual upgrade process on 4.0.5 -&amp;gt; 4.0.6 I found resin started "taking over" all the Apache sites, in other words the usual split between about half being served by resin and half by apache stopped - the resin ones were fine, whereas the Apache ones gave 404's. I thought it was something I'd done at the time, so reverted to 4.0.5 and was fine until I just tried again with 4.0.7. It's behaving the same way. So unless I've forgotten something, it looks like without me pointing this out it's going to be like that from now on ... ?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Anything change regarding mod_caucho from 4.0.5 to 4.0.6/4.0.7?</header>
    <date>Mon May 31 00:15:05 CEST 2010</date>
    <body>I noticed similar behavior and fixed it by removing the resin root webapp. Maybe handling of the root webapp changed in 4.0.6 Regards, Peter On Sun, 30 May 2010 22:28 +0100, "Stargazer"</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Anything change regarding mod_caucho from 4.0.5 to 4.0.6/4.0.7?</header>
    <date>Wed Jun 02 19:24:32 CEST 2010</date>
    <body>Thanks. I've filed this as a bug http://bugs.caucho.com/view.php?id=4066 . I'm not sure what the issue is, but it sounds like it might be related to the servlet TCK dispatching changes in that release. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Anything change regarding mod_caucho from	4.0.5 to 4.0.6/4.0.7?</header>
    <date>Mon Jun 21 23:17:00 CEST 2010</date>
    <body>Sargazer, Can you post your resin configuration, related file structure, your request and expected result. Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Anything change regarding mod_caucho from	4.0.5 to 4.0.6/4.0.7?</header>
    <date>Mon Jan 24 12:43:22 CET 2011</date>
    <body>Gulp. I only just saw this and feel guilty so must respond. It's fixed - probably by virtue of everything being different. It's now Ubuntu and Resin Pro 3.0.14. Sorry, I'll pay more attention in future. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Qualifier not working on 4.0.6</header>
    <date>Sun May 30 20:35:20 CEST 2010</date>
    <body>I'm making good progress getting SubEtha running on 4.0.6, but now I seem to have a strange and self-contradictory error: org.subethamail.core.queue.InjectListener.outboundQueue: javax.enterprise.inject.UnsatisfiedResolutionException: Can't find a bean for 'java.util.concurrent.BlockingQueue&amp;lt;org.subethamail.core.queue.DeliveryQueueItem&amp;gt;' because no beans match the type and bindings [...@org.subethamail.core.queue.deliveryqueue()]. Beans: XmlBean[FileQueue, @Singleton] XmlBean[FileQueue, There is clearly a FileQueue with @DeliveryQueue present, yet the manager can't seem to resolve it! Here's the resin-web.xml declaration of the FileQueue: Here's the injection point in InjectListener: DeliveryQueue is pretty straightforward: @Qualifier @Retention(RUNTIME) public @interface DeliveryQueue Any idea what might be wrong? By the way, replacing our legacy plugin architecture (inherited from JBoss4 days) with the @Any Instance&amp;lt;?&amp;gt; api produces amazingly clean code!  Really fantastic stuff. Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Qualifier not working on 4.0.6</header>
    <date>Wed Jun 02 19:28:58 CEST 2010</date>
    <body>It's probably the generic type matching. Our matching didn't exactly work with the CDI TCK, and there are still some details left to work out to make that work. I've added it as a bug at http://bugs.caucho.com/view.php?id=4067 Isn't that great? After people start spending time with CDI, I think we'll discover a nice set of new patterns that it enables. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] NPE in EjbInjectionTarget</header>
    <date>Sun May 30 04:08:20 CEST 2010</date>
    <body>Trying to get SubEtha running on Resin 4.0.7, I'm getting a strange exception on startup: java.lang.NullPointerException at com.caucho.ejb.server.EjbInjectionTarget.newInstance(EjbInjectionTarget.java:273) at com.caucho.ejb.server.AbstractEjbBeanManager.newInstance(AbstractEjbBeanManager.java:535) at com.caucho.ejb.session.AbstractSessionContext.newInstance(AbstractSessionContext.java:103) at com.caucho.ejb.session.StatelessPool.allocate(StatelessPool.java:116) at org.subethamail.core.admin.AdminBean__StatelessProxy.establishPerson(AdminBean__StatelessProxy.java:438) at org.subethamail.core.admin.BootstrapperBean.bootstrapRoot(BootstrapperBean.java:141) at org.subethamail.core.admin.BootstrapperBean__ResinWebBean.bootstrapRoot(BootstrapperBean__ResinWebBean.java:90) at org.subethamail.core.admin.BootstrapperBean.bootstrap(BootstrapperBean.java:120) at org.subethamail.core.admin.BootstrapperBean__ResinWebBean.bootstrap(BootstrapperBean__ResinWebBean.java:67) at org.subethamail.core.admin.BootstrapperBean.start(BootstrapperBean.java:107) at org.subethamail.core.admin.BootstrapperBean__ResinWebBean.start(BootstrapperBean__ResinWebBean.java:41) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at com.caucho.config.j2ee.PostConstructProgram.inject(PostConstructProgram.java:119) at com.caucho.config.inject.CandiProducer.postConstruct(CandiProducer.java:239) at com.caucho.config.inject.InjectionTargetBuilder.postConstruct(InjectionTargetBuilder.java:205) at com.caucho.config.inject.ManagedBeanImpl.create(ManagedBeanImpl.java:155) at com.caucho.config.scope.AbstractScopeContext.get(AbstractScopeContext.java:97) at com.caucho.config.inject.InjectManager$ContextReferenceFactory.create(InjectManager.java:3825) at org.subethamail.core.admin.BootstrapperBean__ResinScopeProxy.__caucho_getDelegate(Unknown Source) at com.caucho.config.xml.XmlStandardPlugin.processAfterValidation(XmlStandardPlugin.java:222) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at com.caucho.config.inject.ExtensionManager$ExtensionObserver.notify(ExtensionManager.java:365) at com.caucho.config.inject.ObserverMap.fireEvent(ObserverMap.java:94) at com.caucho.config.inject.InjectManager.fireLocalEvent(InjectManager.java:2294) at com.caucho.config.inject.InjectManager.fireLocalEvent(InjectManager.java:2281) at com.caucho.config.inject.InjectManager.fireExtensionEvent(InjectManager.java:2267) at com.caucho.config.inject.InjectManager.bind(InjectManager.java:3026) at com.caucho.config.inject.InjectManager.environmentBind(InjectManager.java:3111) at com.caucho.loader.EnvironmentClassLoader.bind(EnvironmentClassLoader.java:786) at com.caucho.loader.EnvironmentClassLoader.start(EnvironmentClassLoader.java:803) at com.caucho.server.webapp.WebApp.start(WebApp.java:2987) at com.caucho.server.deploy.DeployController.startImpl(DeployController.java:712) at com.caucho.server.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:72) at com.caucho.server.deploy.DeployController.startOnInit(DeployController.java:575) at com.caucho.server.deploy.DeployContainer.start(DeployContainer.java:160) at com.caucho.server.webapp.WebAppContainer.startImpl(WebAppContainer.java:719) at com.caucho.server.host.Host.startImpl(Host.java:502) at com.caucho.server.webapp.WebAppContainer.start(WebAppContainer.java:699) at com.caucho.server.deploy.DeployController.startImpl(DeployController.java:712) at com.caucho.server.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:72) at com.caucho.server.deploy.DeployController.startOnInit(DeployController.java:575) at com.caucho.server.deploy.DeployContainer.start(DeployContainer.java:160) at com.caucho.server.host.HostContainer.start(HostContainer.java:489) at com.caucho.server.cluster.Server.start(Server.java:1906) at com.caucho.server.resin.Resin.start(Resin.java:1098) at com.caucho.server.resin.Resin.initMain(Resin.java:1639) at com.caucho.server.resin.Resin.main(Resin.java:1871) The calling bean (BootstrapperBean) looks like this: @Service @ApplicationScoped @TransactionAttribute(TransactionAttributeType.REQUIRED) public class BootstrapperBean The called EJB looks like this: @Stateless(name="Admin") @RolesAllowed(Person.ROLE_ADMIN) @TransactionAttribute(TransactionAttributeType.REQUIRED) public class AdminBean extends PersonalBean implements Admin Any ideas where to start debugging this?  (btw same problem happens without @RolesAllowed) BTW the NPE stacktrace isn't getting logged - I had to explicitly catch the exception and log it myself.  By default, the log out put is just " org.subethamail.core.admin.BootstrapperBean.start(): java.lang.NullPointerException" which isn't very helpful :-( Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] NPE in EjbInjectionTarget</header>
    <date>Sun May 30 18:37:12 CEST 2010</date>
    <body>I've filed this, although looking at the code, it looks like it's been resolved already. 4.0.7 will probably be a difficult release for CDI/EJB users, because it's a release in the middle of our CDI/EJB TCK work, and we've needed to make a large number of significant refactoring passes in the process.  We're trying to get 4.0.8 out as quickly as possible to get past that instability. Hmm.  Normally, we have all exceptions show their stack trace at the finer level even if the info level just shows the message. I'll look through the stack trace to see what's missing. --- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Invitation to connect on LinkedIn</header>
    <date>Tue May 25 17:18:37 CEST 2010</date>
    <body>LinkedIn ------------ I'd like to add you to my professional network on LinkedIn. - Yidong Yidong Fang Software Product Designer at Hewlett-Packard China Confirm that you know Yidong Fang https://www.linkedin.com/e/isd/1331733899/0mRzLaT3/ ------ (c) 2010, LinkedIn Corporation</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Invitation to connect on LinkedIn</header>
    <date>Tue May 25 17:43:30 CEST 2010</date>
    <body>LinkedIn I'd like to add you to my professional network on LinkedIn. - Yidong Yidong Fang Software Product Designer at Hewlett-Packard China Confirm that you know Yidong https://www.linkedin.com/e/isd/1331733899/0mRzLaT3/EML-invg_59/ © 2010, LinkedIn Corporation</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Invitation to connect on LinkedIn</header>
    <date>Thu May 27 00:39:55 CEST 2010</date>
    <body>No, just the resin-interest email address. Networking FAIL! :)</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.7</header>
    <date>Mon May 24 17:40:06 CEST 2010</date>
    <body>A note on 4.0.7: it's an interim release as we're working through the CDI/EJB TCKs as part of the WebProfile process. Except for a few specific (though important) bugs, almost all of the work in is part of passing those tests. In other words, unless you have a specific bug fixed in 4.0.7, you may want to wait for 4.0.8 for any upgrade. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Fwd: [Resin 0004042]: Rewrite: Missing two	Features in 4.0</header>
    <date>Thu May 20 21:14:25 CEST 2010</date>
    <body>Scott, could you please add this new resin:IfMBeanEnabled tag to the documentation, when 4.0.7 will be released? An example, would be nice too. Just fyi, this is an example how I use this two features in 3.1: with JMX, when our Application will get stopped for Maintenance, but the Website and other Apps remain started. It's possible to stop our Application for Database Backup Window and start this Rewrite Rule via JMX. java -jar cmdline-jmxclient-0.10.3.jar - localhost:8666 resin:type=RewriteRule,Host=www.example.com,name=MaintenanceRewrite start target="/scheduled-maintenance.jsp" enabled="false" Thanks, --Steffen ---------- Forwarded message ---------- Date: 2010/5/20 Subject: [Resin 0004042]: Rewrite: Missing two Features in 4.0 The following issue has been CLOSED ====================================================================== http://bugs.caucho.com/view.php?id=4042 ====================================================================== Reported By:                stbu Assigned To:                ferg ====================================================================== Project:                    Resin Issue ID:                   4042 Category: Reproducibility:            always Severity:                   major Priority:                   normal Status:                     closed Resolution:                 fixed Fixed in Version:           4.0.7 ====================================================================== Date Submitted:             05-16-2010 13:38 PDT Last Modified:              05-20-2010 10:16 PDT ====================================================================== Summary:                    Rewrite: Missing two Features in 4.0 Description: Do the Resin 4.0 rewrite capabilities support the following two extremly useful Features from Resin 3.1? 1)  JMX Registration using the name attribute, see here http://www.caucho.com/resin-3.1/doc/rewrite-tags.xtp#name 2)  enabled, see here http://www.caucho.com/resin-3.1/doc/rewrite-tags.xtp#enabled ( http://caucho.com/resin-4.0/admin/reference.xtp#resin:IfCron ) is not the same. I need to start certain rewrite rules disabled to be later on enabled by JMX request. ====================================================================== ---------------------------------------------------------------------- ferg - 05-20-10 10:16 ---------------------------------------------------------------------- server/1kz0 The mbean model has changed to match the new model: resin:IfMBeanEnabled is the tag, and it's now a general predicate instead of a top-level rewrite attribute. Issue History Date Modified   Username       Field                    Change ====================================================================== 05-16-10 13:38  stbu           New Issue 05-16-10 13:38  stbu           Issue Monitored: stbu 05-20-10 10:16  ferg           Note Added: 0004603 05-20-10 10:16  ferg           Assigned To               =&amp;gt; ferg 05-20-10 10:16  ferg           Status                   new =&amp;gt; closed 05-20-10 10:16  ferg           Resolution               open =&amp;gt; fixed 05-20-10 10:16  ferg           Fixed in Version          =&amp;gt; 4.0.7 ======================================================================</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fwd: [Resin 0004042]: Rewrite: Missing two	Features in 4.0</header>
    <date>Thu May 20 21:47:59 CEST 2010</date>
    <body>http://www.example.com Here's how it would look like in Resin 4.0.7: The MBean name would be different, because the type needs to match the tag type. So it's resin:type=IfMBeanEnabled,name=Maintenance,Host=... I've added a basic description to the reference section. -- Scott mailto:bugtr...@caucho.com http://bugs.caucho.com/view.php?id=4042 http://www.caucho.com/resin-3.1/doc/rewrite-tags.xtp#name http://www.caucho.com/resin-3.1/doc/rewrite-tags.xtp#enabled http://caucho.com/resin-4.0/admin/reference.xtp#resin:IfCron ) is not the http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fwd: [Resin 0004042]: Rewrite: Missing two	Features in 4.0</header>
    <date>Mon May 24 21:38:43 CEST 2010</date>
    <body>2010/5/20 Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: http://www.example.com Scott, can the new &amp;lt;resin:IfMBeanEnabled&amp;gt; tag be used as a child of &amp;lt;resin:import&amp;gt; ? In Resin 3.1, it was possible to have rewrite rules in an external file which was imported as a child of &amp;lt;rewrite-dispatch&amp;gt;, but the import was initially disabled. See, http://caucho.com/resin-3.1/doc/rewrite-tags.xtp#import child of rewrite-dispatch,match Importing rules from an external file http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" Thanks, -- Steffen mailto:bugtr...@caucho.com http://bugs.caucho.com/view.php?id=4042 http://www.caucho.com/resin-3.1/doc/rewrite-tags.xtp#name http://www.caucho.com/resin-3.1/doc/rewrite-tags.xtp#enabled http://caucho.com/resin-4.0/admin/reference.xtp#resin:IfCron ) is not the http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] How Can I use latest hessian in resin 3.0.x?</header>
    <date>Thu May 20 12:31:04 CEST 2010</date>
    <body>dear all, in the old version resin,like 3.0.x which are popularly deployed in my company,hessian classes are intergrated in resin.jar in lib directory, therefore, when i use high version hessian in webapps, resin still use the old version hessian . It's nearly impossible to upgrade all the resin to latest version in my company, so is there a solution to resolve this problem?How to easily deploy my service developed by latest version of hessian into resin 3.0.x thx a lot zzfire</body>
  </mail>
  <mail>
    <header>[Resin-interest] Is there any way to append a constant value to the	session id?</header>
    <date>Fri May 14 20:41:42 CEST 2010</date>
    <body>I would like to have each session id have a constant value appended as a suffix. Something along the lines of sessionid.servername is what I am looking for. Is this supported?  Thanks! Dan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Is there any way to append a constant value to the	session id?</header>
    <date>Fri May 14 20:55:50 CEST 2010</date>
    <body>Resin will append the server index if &amp;lt;cookie-append-server-index/&amp;gt; is set. That will create a cookie like aXXXXX.0 vs bXXXXX.1. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Is there any way to append a constant value to	the session id?</header>
    <date>Fri May 14 21:07:41 CEST 2010</date>
    <body>Is there any way that I can control what that index value will be? Thanks! Dan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Is there any way to append a constant value to	the session id?</header>
    <date>Fri May 14 21:22:56 CEST 2010</date>
    <body>No, it's always the server's index. So the only way you can control it is by changing the server order. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Is there any way to append a constant value to	the session id?</header>
    <date>Fri May 14 21:54:19 CEST 2010</date>
    <body>Ok, thanks! Dan</body>
  </mail>
  <mail>
    <header>[Resin-interest] TraversableResolver.isReachable() and	UnsupportedOperationException in Resin 4.0.6</header>
    <date>Thu May 13 16:17:20 CEST 2010</date>
    <body>Hi! I have an application using spring 3, JPA and hibernate-validator which work just fine under jetty but give an UnsupportedOperationException when running under resin 4.0.6. Please see my posting at the springforums for more info: http://forum.springsource.org/showthread.php?t=89175 TIA for any ideas on how to solve this issue! -Kaj :)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] TraversableResolver.isReachable() and	UnsupportedOperationException in Resin 4.0.6</header>
    <date>Thu May 13 18:25:09 CEST 2010</date>
    <body>http://forum.springsource.org/showthread.php?t=89175 Thanks! That's definitely a Resin bug. http://bugs.caucho.com/view.php?id=4038 -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] TraversableResolver.isReachable()	and	UnsupportedOperationException in Resin 4.0.6</header>
    <date>Fri May 14 08:32:34 CEST 2010</date>
    <body>http://bugs.caucho.com/view.php?id=4038 Thank you! ;-) Great news! This issue has been giving me headache for a few days now! Is there any hope for getting this bug fixed in 4.0.7? -Kaj :)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] TraversableResolver.isReachable()	and	UnsupportedOperationException in Resin 4.0.6</header>
    <date>Fri May 14 17:10:34 CEST 2010</date>
    <body>http://bugs.caucho.com/view.php?id=4038 I think so. We're splitting up the CDI/EJB TCK work into two releases: 4.0.7 and 4.0.8, so we can make an earlier release with some bug fixes. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin CanDI on GAE?</header>
    <date>Thu May 13 02:34:53 CEST 2010</date>
    <body>I'm retrofitting CDI into the part of my app that runs on Google Appengine (as opposed to the part that runs on Resin).  I just saw Reza's comment on this blog entry: http://java.dzone.com/articles/weld-101-runs-gae What are the prospects for CanDI on GAE? Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin CanDI on GAE?</header>
    <date>Thu May 13 02:52:18 CEST 2010</date>
    <body>http://java.dzone.com/articles/weld-101-runs-gae It's tricky in the short term, because Resin uses javac to create its proxies. For GAE we'd need to create a precompiler before we could deploy to it. Longer term, it should be very possible, although we'd also need to clean up any Resin dependencies. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Newbie question</header>
    <date>Wed May 12 17:01:46 CEST 2010</date>
    <body>Hello, I'm new to using resin, and am wondering how people handle the growing resin-data/stat_data_.db file? Steve Francis Technical Advisor - zSeries, zLinux, z/OS IHG Alpharetta Data Center Ph:  770-442-7157 Cell:  770-906-3122 IM: francisihg</body>
  </mail>
  <mail>
    <header>[Resin-interest] Hessian result length in acess-log is negative?</header>
    <date>Mon May 10 21:25:55 CEST 2010</date>
    <body>Hi. I'm seeing my Hessian servlet returning a response length of "-43". What's up with that? Resin 4.0.5 TIA, Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0-SNAPSHOT: QuercusEngine is not a member of	com.caucho.quercus</header>
    <date>Sat May 08 15:07:23 CEST 2010</date>
    <body>Hi, when I use 4.0-SNAPSHOT, I can't compile the examples from [1]. If I use the 4.0.6 version, it compiles but some PHP functions are not available (written in Scala): [[ val engine:QuercusEngine = new QuercusEngine() engine.execute("""&amp;lt;?php define("PREFERRED", 0x10000000); ?&amp;gt;""") ]] This is the exception raised: [[ com.caucho.quercus.QuercusErrorException: eval::1: Fatal Error: 'define' is an unknown function. at com.caucho.quercus.env.Env.error(Env.java:6385) at com.caucho.quercus.env.Env.error(Env.java:6273) at com.caucho.quercus.env.Env.error(Env.java:5957) at com.caucho.quercus.expr.CallExpr.evalImpl(CallExpr.java:198) at com.caucho.quercus.expr.CallExpr.eval(CallExpr.java:151) at com.caucho.quercus.expr.Expr.evalTop(Expr.java:523) at com.caucho.quercus.statement.ExprStatement.execute(ExprStatement.java:67) at com.caucho.quercus.program.QuercusProgram.execute(QuercusProgram.java:409) at com.caucho.quercus.QuercusEngine.execute(QuercusEngine.java:139) at com.caucho.quercus.QuercusEngine.execute(QuercusEngine.java:100) ... ]] If I execute the same code in a servlet, I don't have any problem. Any idea? Alexandre Bertails. [1] http://wiki.caucho.com/Quercus:_Command_Line_Interface_%28CLI%29</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0-SNAPSHOT: QuercusEngine is not a member of	com.caucho.quercus</header>
    <date>Fri May 14 00:15:08 CEST 2010</date>
    <body>We forgot to call the init() method.  This should be fixed for 4.0.7. -- Nam</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0-SNAPSHOT: QuercusEngine is not a member of	com.caucho.quercus</header>
    <date>Fri May 14 00:21:40 CEST 2010</date>
    <body>2010/5/14 Nam &amp;lt;n...@caucho.com&amp;gt;: Excellent! Thank you for the answer :-) Alexandre. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Question about Resin 4.0.6</header>
    <date>Fri May 07 22:00:17 CEST 2010</date>
    <body>We are system testing Resin 4.0.6 with our old code base and found a curiosity.  The following code used to work, regardless of what "type" "receipt" is: Under Resin 3.0.x if receipt was a HashMap and had a "details" property then it would return "true".  If it was a HashMap and did not have a details property, it would correctly return false.  And (most importantly), if receipt was _any_ other class, including built in java classes, it would just return false.  With Resin 4.0.6 it now throws an error: 'details' is an unknown bean property of 'java.math.BigDecimal' That's not the expected behavior is it? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about Resin 4.0.6</header>
    <date>Fri May 07 22:09:02 CEST 2010</date>
    <body>That is what JBoss does, so I'd say that Caucho fixed a bug. jon http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about Resin 4.0.6</header>
    <date>Fri May 07 22:44:49 CEST 2010</date>
    <body>Bummer, what's the proper way to test if a property exists then, since Thanks, Aaron That is what JBoss does, so I'd say that Caucho fixed a bug. jon On Fri, May 7, 2010 at 12:59 PM, Aaron Freeman mailto:aaron.free...@layerz.com We are system testing Resin 4.0.6 with our old code base and found a curiosity.  The following code used to work, regardless of what "type" "receipt" is: Under Resin 3.0.x if receipt was a HashMap and had a "details" property then it would return "true".  If it was a HashMap and did not have a details property, it would correctly return false.  And (most importantly), if receipt was _any_ other class, including built in java classes, it would just return false.  With Resin 4.0.6 it now throws an error: 'details' is an unknown bean property of 'java.math.BigDecimal' That's not the expected behavior is it? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about Resin 4.0.6</header>
    <date>Fri May 07 22:58:51 CEST 2010</date>
    <body>I don't know if there is a way and it isn't something I'd depend on in the UI layer. Think of [class] like you'd think of an interface. You really should only put implementations of interfaces into the context. Otherwise, I'd consider putting a Map in there for the effect you want. jon http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about Resin 4.0.6</header>
    <date>Fri May 07 23:48:42 CEST 2010</date>
    <body>This isn't in the UI layer.  This is in a controller.  At any rate there is a simple work around, but this sure doesn't seem like it should be generating an error.  If a property doesn't exist on an object it sure seems like the test for empty=true should work, and not throw a runtime error. At any rate there are easy workarounds in this case but workarounds make the code uglier. Aaron I don't know if there is a way and it isn't something I'd depend on in the UI layer. Think of [class] like you'd think of an interface. You really should only put implementations of interfaces into the context. Otherwise, I'd consider putting a Map in there for the effect you want. jon On Fri, May 7, 2010 at 1:43 PM, Aaron Freeman mailto:aaron.free...@layerz.com Bummer, what's the proper way to test if a property exists then, Thanks, Aaron That is what JBoss does, so I'd say that Caucho fixed a bug. jon On Fri, May 7, 2010 at 12:59 PM, Aaron Freeman mailto:aaron.free...@layerz.com We are system testing Resin 4.0.6 with our old code base and found a curiosity.  The following code used to work, regardless of what "type" "receipt" is: Under Resin 3.0.x if receipt was a HashMap and had a "details" property then it would return "true".  If it was a HashMap and did not have a details property, it would correctly return false.  And (most importantly), if receipt was _any_ other class, including built in java classes, it would just return false.  With Resin 4.0.6 it now throws an error: 'details' is an unknown bean property of 'java.math.BigDecimal' That's not the expected behavior is it? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about Resin 4.0.6</header>
    <date>Sat May 08 00:04:53 CEST 2010</date>
    <body>I've always written code that assumes empty returns false if the property doesn't exist. I haven't checked the spec, but throwing an exception seems like the wrong thing to do. -- Rick http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about Resin 4.0.6</header>
    <date>Sat May 08 00:05:57 CEST 2010</date>
    <body>This comment isn't helpful I know but I am very curious about this. The code you quoted is a tag library call using the EL.  How is that not part of the UI?  Are you writing controllers in JSP somehow? Rachel http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about Resin 4.0.6</header>
    <date>Sat May 08 03:08:03 CEST 2010</date>
    <body>Yes, that's exactly right.  In several instances we have many our models (also in this case JSPs) and also &amp;lt;c:import&amp;gt; our views. Works great! The upside to it is: a) easier to code -- people with limited Java expertise can modify the controllers if they are not too complex (and rarely are), and b) you can change your controllers on the fly without having to restart Resin (primary reason we do this). Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about Resin 4.0.6</header>
    <date>Sat May 08 03:15:34 CEST 2010</date>
    <body>You might want to take a look at a project I created several years ago that works pretty much like this.  I still find it occasionally useful, although most of my frontends are GWT and javascript these days: http://tagonist.tigris.org/ It lets you use JSP files as controllers but keeps your Java code nice and tidy.  Super-simple. Jeff http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about Resin 4.0.6</header>
    <date>Sat May 08 00:40:39 CEST 2010</date>
    <body>I doublechecked the spec and the current Resin behavior is the proper behavior.  I don't think this behavior has changed in the spec, so the old behavior was a bug.  You can't use the empty operator to test for the existence of fields (or methods). As to the rationale for the spec... it does make some amount of sense, helping to reduce one very common type of bug (I'm getting properties of a ThingA and the object turns out to be a ThingB).  I'm sure all the arguments for static typing vs duck typing apply here. Note:  There is nothing special about the empty operator; expressions are resolved as normal and then the result is tested for null or empty collection.  If expression evaluation ever tries to access a field or method that doesn't exist on an object, the EL resolver throws PropertyNotFoundException or MethodNotFoundException. Jeff http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about Resin 4.0.6</header>
    <date>Sat May 08 00:50:25 CEST 2010</date>
    <body>Yeah, that makes sense. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about Resin 4.0.6</header>
    <date>Sat May 08 03:18:49 CEST 2010</date>
    <body>Okidoke. That's a bummer.  I preferred the old behavior as it's closer to JavaScript associative arrays, which are nice and flexible.  But mainly because we were relying on that behavior. :)</body>
  </mail>
  <mail>
    <header>[Resin-interest] UnsupportedOperationException: The method	shutdownOutput() is not supported in SSLSocket</header>
    <date>Thu May 06 16:23:33 CEST 2010</date>
    <body>Hi, Trying to run an axis2 webservice with resin 4.0.5 we see following stacktrace in the resin stdout file: java.lang.UnsupportedOperationException: The method shutdownOutput() is not supported in SSLSocket at com.sun.net.ssl.internal.ssl.BaseSSLSocketImpl.shutdownOutput(BaseSSLSoc ketImpl.java:192) at com.caucho.vfs.SocketStream.closeWrite(SocketStream.java:340) at com.caucho.vfs.WriteStream.close(WriteStream.java:1246) at com.caucho.server.connection.TcpConnection.closeImpl(TcpConnection.java: 926) at com.caucho.server.connection.TcpConnection.destroy(TcpConnection.java:96 0) at com.caucho.server.connection.TcpConnection.handleRequests(TcpConnection. java:538) at com.caucho.server.connection.TcpConnection$AcceptTask.doTask(TcpConnecti on.java:1100) at com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread( TcpConnection.java:1037) at com.caucho.server.connection.TcpConnection$AcceptTask.run(TcpConnection. java:1068) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) The webservice refuses connections after three calls, we have to restart resin then. Possibly the connection doesn't get closed although the log states it: TcpConnection[id=2] closing connection TcpConnection[id= http://*:8081-2,http://*:8081,CLOSED ], total=3 I'm not sure if there is a correlation between stacktrace and webservice behaviour. We use Java 1.6.0_19, 64Bit btw. Regards, Martin "The information in this e-mail and in any attachments is confidential and intended solely for the attention and use of the named addressee(s). This information may be subject to legal, professional or other privilege and further distribution of it is strictly prohibited without our authority. If you are not the intended recipient, you are not authorised to and must not disclose, copy, distribute, or retain this message or any part of it, and should notify us immediately. This footnote also confirms that this email has been automatically scanned for the presence of computer viruses, profanities and certain file types."</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] UnsupportedOperationException: The method	shutdownOutput() is not supported in SSLSocket</header>
    <date>Thu May 06 21:00:54 CEST 2010</date>
    <body>Hi Martin, I've added this as a bug report at http://bugs.caucho.com/view.php?id=4030 . I believe the exception has been fixed in 4.0.6, however I'm not sure about the axis issues. That exception shouldn't affect anything, though, so I want to check into it further. -- Scott http://*:8081-2,http://*:8081,CLOSED ], total=3 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Missing 2 Rewrite Features in 4.0</header>
    <date>Fri Apr 30 21:22:08 CEST 2010</date>
    <body>Do the Resin 4.0 rewrite capabilities support the following two extremly useful Features from Resin 3.1? 1)  JMX Registration using the name attribute, see here http://www.caucho.com/resin-3.1/doc/rewrite-tags.xtp#name 2)  enabled, see here http://www.caucho.com/resin-3.1/doc/rewrite-tags.xtp#enabled The &amp;lt;resin:IfCron&amp;gt; ( http://caucho.com/resin-4.0/admin/reference.xtp#resin:IfCron ) is not the same. I need to start certain rewrite rules disabled to be later on enabled by JMX request. -- Steffen</body>
  </mail>
  <mail>
    <header>[Resin-interest] Adding port 80 to resin.conf</header>
    <date>Fri Apr 30 21:01:36 CEST 2010</date>
    <body>When I add &amp;lt;http address="*" port=80&amp;gt; to resin.conf to redirect the user from http://localhost to https://localhost ,  all website can working in http , but I want all site  to work in https. "Problem No 1". I want login.jsp to work in https only. All the Best, Abdalmonem Tharwat Galila System Engineer , Technical Resources Department. Ministry of Communications &amp;amp; Information Technology Office Tel.: +2 02 35341582 - +2 02 35341300 Mobile: +2 010 0049068 Fax : +2 02 35370537 http://www.mcit.gov.eg/ mailto:agal...@mcit.gov.eg</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Adding port 80 to resin.conf</header>
    <date>Fri Apr 30 23:45:09 CEST 2010</date>
    <body>From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Abdalmonem Tharwat Galila Sent: 30 أبريل, 2010 09:59 م To: resin-interest@caucho.com Subject: [Resin-interest] Adding port 80 to resin.conf Importance: High When I add &amp;lt;http address=”*” port=80&amp;gt; to resin.conf to redirect the user from http://localhost to https://localhost ,  all website can working in http , but I want all site  to work in https. “Problem No 1”. I want login.jsp to work in https only. All the Best, Abdalmonem Tharwat Galila System Engineer , Technical Resources Department. Ministry of Communications &amp;amp; Information Technology Office Tel.: +2 02 35341582 - +2 02 35341300 Mobile: +2 010 0049068 Fax : +2 02 35370537 http://www.mcit.gov.eg/ mailto:agal...@mcit.gov.eg</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Adding port 80 to resin.conf</header>
    <date>Sat May 01 00:15:26 CEST 2010</date>
    <body>mailto:resin-interest-boun...@caucho.com ] *On Behalf Of *Abdalmonem http://localhost to https://localhost ,  all website can The cleanest solution is probably to create two separate virtual hosts, because you want the http vs https to act like different sites. The configuration would look something like: ... -- Scott http://www.mcit.gov.eg/ mailto:agal...@mcit.gov.eg http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Persistence Started Without any persistence.xml?</header>
    <date>Fri Apr 30 11:43:37 CEST 2010</date>
    <body>For some reason we want to control the setup of hibernate ourselves, so removed the persistence.xml from WEB-INF/classes/META-INF,  and redeployed our WAR, what i get is this exception: Dialect must be explicitly set at org.hibernate.dialect.DialectFactory.determineDialect(DialectFactory.java:57) at org.hibernate.dialect.DialectFactory.buildDialect(DialectFactory.java:39) at org.hibernate.cfg.SettingsFactory.determineDialect(SettingsFactory.java:437) at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:132) at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2078) at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1302) at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:854) at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:669) at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:132) at com.caucho.env.jpa.ManagerPersistenceUnit.createDelegate(ManagerPersistenceUnit.java:394) at com.caucho.env.jpa.ManagerPersistenceUnit.start(ManagerPersistenceUnit.java:371) at com.caucho.env.jpa.ManagerPersistence.startPersistenceUnits(ManagerPersistence.java:351) at com.caucho.env.jpa.ManagerPersistence.environmentConfigureEnhancer(ManagerPersistence.java:573) at com.caucho.loader.EnvironmentClassLoader.config(EnvironmentClassLoader.java:739) at com.caucho.loader.EnvironmentClassLoader.bind(EnvironmentClassLoader.java:757) at com.caucho.loader.EnvironmentClassLoader.start(EnvironmentClassLoader.java:782) at com.caucho.server.webapp.WebApp.start(WebApp.java:2959) at com.caucho.server.deploy.DeployController.startImpl(DeployController.java:693) at com.caucho.server.deploy.DeployController.restartImpl(DeployController.java:652) at com.caucho.server.deploy.StartAutoRedeployAutoStrategy.alarm(StartAutoRedeployAutoStrategy.java:177) at com.caucho.server.deploy.DeployController.handleAlarm(DeployController.java:815) at com.caucho.util.Alarm.handleAlarm(Alarm.java:450) at com.caucho.util.Alarm.run(Alarm.java:422) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) http://bugs.caucho.com/view.php?id=4003 did i forget something? what can i do to resolve this? Thanks, Georg -- Georg Buschbeck Information Technology THOMAS DAILY GmbH Adlerstraße 19 79098 Freiburg Deutschland T  + 49 761 3 85 59 502 F  + 49 761 3 85 59 550 E  g...@thomas-daily.de www.thomas-daily.de Geschäftsführer/Managing Directors: Wendy Thomas, Susanne Larbig Handelsregister Freiburg i.Br., HRB 3947</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Persistence Started Without any	persistence.xml?</header>
    <date>Fri Apr 30 17:46:29 CEST 2010</date>
    <body>http://bugs.caucho.com/view.php?id=4003 Is it possible that a jar has a persistence.xml? If there's no persistence.xml (and no &amp;lt;jpa-persistence-unit&amp;gt; in the resin.xml or resin-web.xml), then Resin shouldn't be starting Hibernate at all. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Persistence Started Without	any	persistence.xml?</header>
    <date>Tue May 04 09:10:00 CEST 2010</date>
    <body>Hi Scott, you're right, there was a persistence.xml in one embedded jar ... :/ you can close that issue Thanks, Georg</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Persistence Started	Without	any	persistence.xml?</header>
    <date>Tue May 04 18:12:42 CEST 2010</date>
    <body>Great! Thanks for the update. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Using JA-SIG's Central Authentication Service	(CAS) with resin</header>
    <date>Thu Apr 29 10:35:03 CEST 2010</date>
    <body>Hi, I'm looking to use CAS with resin 4.0.x. Anyone done this already? If so, some pointers to useful docn would be appreciated Rgs Alex smime.p7s Description: S/MIME cryptographic signature</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0 documentation reference.xtp = 500	Servlet Exception</header>
    <date>Sun Apr 25 21:51:10 CEST 2010</date>
    <body>I was just looking for some &amp;lt;web-app&amp;gt; and &amp;lt;host&amp;gt; configuration for Resin 4.0 and thought that the "reference" entry might be useful, but the URL http://caucho.com/resin-4.0/admin/reference.xtp just gives: 500 Servlet Exception /var/www/hosts/www.caucho.com/webapps/resin-4.0/admin/reference.xtp:2346: 'examples' is an unknown property of 'com.caucho.xtpdoc.Defun'. 2345: 2347: &amp;lt;p&amp;gt;The example configuration stores a string in java:comp/env/greeting. 2348: Following the J2EE spec, the env-entry-name is relative to ------------------------------ Resin/4.0.s100409 Server: '' I really liked the 3.1 documentation, but that new 4.0 documentation structure is really cumbersome. Where are the rewrite capabilties explained such as &amp;lt;moved-permanently&amp;gt; with a 301 redirect, where are the &amp;lt;web-app&amp;gt; or I've found this page http://caucho.com/resin-4.0/admin/http-rewrite.xtp but there is nothing that explains &amp;lt;resin:Dispatch&amp;gt; for example. Finally, I found this page http://caucho.com/resin-4.0/admin/http-rewrite-ref.xtp where it's possible to click on &amp;lt;resin:Dispatch&amp;gt; but the only thing I get is a JavaDoc :-( very bad, no examples. Still haven't found web-app or host configuration. -- Steffen</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 documentation reference.xtp = 500 Servlet Exception</header>
    <date>Wed Apr 28 17:32:12 CEST 2010</date>
    <body>http://caucho.com/resin-4.0/admin/reference.xtp just gives: Thanks. The site's been updated to fix that. The host is at http://caucho.com/resin-4.0/admin/http-virtual-hosts.xtp . We do need to add back the web-app section. All the tags are in http://caucho.com/resin-4.0/admin/reference.xtp , but we don't have a grouping for just the web-app tags. -- Scott http://caucho.com/resin-4.0/admin/http-rewrite.xtp but there is http://caucho.com/resin-4.0/admin/http-rewrite-ref.xtp where it's http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 documentation reference.xtp = 500	Servlet Exception</header>
    <date>Wed Apr 28 18:55:40 CEST 2010</date>
    <body>http://caucho.com/resin-4.0/admin/reference.xtp just gives: http://caucho.com/resin-4.0/admin/http-virtual-hosts.xtp . http://caucho.com/resin-4.0/admin/reference.xtp , but we don't have a Thanks Scott, the reference page is very useful. But I haven't found a 4.0 feature for the 3.1 &amp;lt;match&amp;gt; tag which is described here http://caucho.com/resin-3.1/doc/rewrite-tags.xtp#match Also, with 3.1 it was possible to distinguish the HTTP Code for redirects. For Search-Engine-Optimization a 301 (Moved Permanently) is in particular http://caucho.com/resin-3.1/doc/rewrite-tags.xtp#moved-permanently to achieve this but I have not found equivalent configuration tag in 4.0 documentation, there is only http://caucho.com/resin-4.0/admin/reference.xtp#resin:Redirect -- Steffen http://caucho.com/resin-4.0/admin/http-rewrite.xtp but there is http://caucho.com/resin-4.0/admin/http-rewrite-ref.xtp where it's http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 documentation reference.xtp = 500 Servlet Exception</header>
    <date>Wed Apr 28 19:44:28 CEST 2010</date>
    <body>http://caucho.com/resin-3.1/doc/rewrite-tags.xtp#match They're children of the dispatch tags, basically all the &amp;lt;resin:If*&amp;gt; tags: The dispatch tags have two kinds of children: qualifiers (match), and filters. The filters are servlet filters that should wrap the servlet request/response objects before the dispatch is taken. http://caucho.com/resin-3.1/doc/rewrite-tags.xtp#moved-permanently http://caucho.com/resin-4.0/admin/reference.xtp#resin:Redirect You can use the &amp;lt;resin:SendError code="302"/&amp;gt; for any of the codes. We can add a special case for moved-permanently; it's pretty easy to add new tags. -- Scott http://caucho.com/resin-4.0/admin/http-rewrite.xtp but there is http://caucho.com/resin-4.0/admin/http-rewrite-ref.xtp mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 documentation reference.xtp = 500	Servlet Exception</header>
    <date>Wed Apr 28 22:14:57 CEST 2010</date>
    <body>http://caucho.com/resin-3.1/doc/rewrite-tags.xtp#match Well, I use &amp;lt;match&amp;gt; for this reason mentioned in the 3.1 docs: Judicious use of &amp;lt;match&amp;gt; will provide better performance in situations where there are many rules and some of them contain http://caucho.com/resin-3.1/doc/rewrite-tags.xtp#when http://caucho.com/resin-3.1/doc/rewrite-tags.xtp#if With Resin 3.1 for example like this: ... or this ... Trying to achieve the first example  with 4.0 based on your suggestion and missing examples from current documentation, it does not work: is an unknown field or annotation 3: 5:    &amp;lt;resin:Forward regexp='^/homepage/00/00_00_00_content.html' 7: http://caucho.com/resin-3.1/doc/rewrite-tags.xtp#moved-permanently http://caucho.com/resin-4.0/admin/reference.xtp#resin:Redirect I would appreciate this. This resin 3.1 configuration for instance does not work for me in 4.0 with the &amp;lt;resin:SendError&amp;gt; together with is an unknown field or annotation 3: 7: -- Steffen http://caucho.com/resin-4.0/admin/http-rewrite.xtp but there http://caucho.com/resin-4.0/admin/http-rewrite-ref.xtp mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0 documentation reference.xtp = 500 Servlet Exception</header>
    <date>Wed Apr 28 22:23:34 CEST 2010</date>
    <body>http://caucho.com/resin-3.1/doc/rewrite-tags.xtp#when http://caucho.com/resin-3.1/doc/rewrite-tags.xtp#if That's not an issue in 4.0. Since Resin caches the URL match and dispatch, the dispatch tags aren't actually evaluated on every request, only for the first call. It doesn't make sense for a Forward to be a child of a Dispatch. Only the IfXXX are children. -- Scott http://caucho.com/resin-3.1/doc/rewrite-tags.xtp#moved-permanently http://caucho.com/resin-4.0/admin/reference.xtp#resin:Redirect http://caucho.com/resin-4.0/admin/http-rewrite.xtp http://caucho.com/resin-4.0/admin/http-rewrite-ref.xtp mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Implementing server-side push (not HTTP)</header>
    <date>Sun Apr 25 07:28:58 CEST 2010</date>
    <body>Hi. I have a need to inform a client of changes to its data set. The client is usually an iPhone, and I use Apple's Push Notifications to let it know that it should query the server for new data. But now I want to do this on a platform that doesn't support Apple Push Notifications. There are only a few instances of this, but I' not sure the best way to go about it. One is to simply make the data request frequently. It returns null when there's no data for the client. Another might be to open a persistent connection and block on a read to the server, and the server will just write something when there's new data. That's probably the best way, but I'm not sure how best to implement that listener in my webapp. Should I just write raw Socket code to open a listening port, and manage it all myself in a separate thread? Or does Resin have a facility for supporting this (some kind of persistent HTTP request that I can later tap into)? Thanks for any suggestions. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Implementing server-side push (not HTTP)</header>
    <date>Sun Apr 25 14:10:50 CEST 2010</date>
    <body>I asked on this list about using Comet in this scenario some time ago and got no response. In my situation the client is Android but that's just standard JSE HTTP as far as Resin is concerned. I specifically am not using its webkit based webview component, nor AJAX.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Implementing server-side push (not HTTP)</header>
    <date>Sun Apr 25 19:50:58 CEST 2010</date>
    <body>Have you looked at Servlet 3.0 async and WebSocket's way as an alternative. http://caucho.com/resin-4.0/examples/websocket-java/ Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Remote deployment</header>
    <date>Fri Apr 23 16:06:09 CEST 2010</date>
    <body>I thought I'd try out remote deployment but the documentation is a bit inconsistent. According to http://www.caucho.com/resin/admin/deploy.xtp there should be a &amp;lt;resin:RemoteDeploy/&amp;gt; tag in the configuration, however this tag is not mentioned at http://blog.caucho.com/?p=134 and does not seem to exist (in 4.0.3). When trying remote deploy via Ant without that tag (but with com.caucho.bam.TimeoutException: com.caucho.bam.querymanager$queryfuturei...@12884e0 query timeout Anything obvious missing or how to debug? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote deployment</header>
    <date>Fri Apr 23 16:18:01 CEST 2010</date>
    <body>Turned on finest logging. This could possibly be related. [2010-04-23 16:13:34.097] com.caucho.hessian.io.HessianFieldException: com.caucho.server.admin.DeployCommitListQuery._commitList: expected string at end of file at com.caucho.hessian.io.UnsafeDeserializer.logDeserializeError(UnsafeDeserializer.java:768) at com.caucho.hessian.io.UnsafeDeserializer$ObjectFieldDeserializer.deserialize(UnsafeDeserializer.java:421) at com.caucho.hessian.io.UnsafeDeserializer.readObject(UnsafeDeserializer.java:239) at com.caucho.hessian.io.UnsafeDeserializer.readObject(UnsafeDeserializer.java:150) at com.caucho.hessian.io.Hessian2Input.readObjectInstance(Hessian2Input.java:2188) at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:2109) at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:2093) at com.caucho.hmtp.HmtpReader.readPacket(HmtpReader.java:153) at com.caucho.remote.HmtpServlet$WebSocketHandler.onRead(HmtpServlet.java:201) at com.caucho.server.http.HttpServletRequestImpl$WebSocketContextImpl.onRead(HttpServletRequestImpl.java:2490) at com.caucho.server.connection.TcpDuplexController.serviceRead(TcpDuplexController.java:161) at com.caucho.server.connection.TcpConnection$DuplexReadTask.doTask(TcpConnection.java:1304) at com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1137) at com.caucho.server.connection.TcpConnection$DuplexReadTask.run(TcpConnection.java:1283) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: com.caucho.hessian.io.HessianProtocolException: expected string at end of file at com.caucho.hessian.io.Hessian2Input.error(Hessian2Input.java:2882) at com.caucho.hessian.io.Hessian2Input.expect(Hessian2Input.java:2807) at com.caucho.hessian.io.Hessian2Input.readString(Hessian2Input.java:1362) at com.caucho.hessian.io.BasicDeserializer.readLengthList(BasicDeserializer.java:589) at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:1731) at com.caucho.hessian.io.UnsafeDeserializer$ObjectFieldDeserializer.deserialize(UnsafeDeserializer.java:417) ... 14 more Mattias Jiderhamn wrote (2010-04-23 16:05): http://www.caucho.com/resin/admin/deploy.xtp there should http://blog.caucho.com/?p=134 and does not seem to --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote deployment</header>
    <date>Sun Apr 25 09:50:50 CEST 2010</date>
    <body>After adding a commitmessage, which according to the Wiki is optional, I'm told I need to add a &amp;lt;resin:DeployService /&amp;gt; tag. When reading http://www.caucho.com/resin/admin/deploy.xtp carefully, the text says &amp;lt;resin:DeployService /&amp;gt; but the example shows Maybe update the docs? I'm still getting the client side exception however. Possibly this in the server logs is related??? [2010-04-25 09:39:02.116] "dep...@resin.caucho" [2010-04-25 09:39:02.116] 3L/* defun com.caucho.server.admin.DeployCommitListQuery [_commitList] */ [2010-04-25 09:39:02.116] object com.caucho.server.admin.DeployCommitListQuery (#0) [2010-04-25 09:39:02.117] _commitList: list [string (#1) [2010-04-25 09:39:02.117] 0: "1e784a641b0ca613561d8ceebc93f0c3697464ed" ..... [2010-04-25 09:39:02.557] 1963: "4595088616403c1f77e7c439381bebdf850116d0" [2010-04-25 09:39:02.557] 1964: "45978c1f355a0ee077bd4b9bcc175645237699a0" [2010-04-25 09:39:02.558] TcpConnection[id=4] closing connection TcpConnection[id=http--8080-4, http://*:8080,CLOSED ], total=8 [2010-04-25 09:39:02.559] com.caucho.vfs.ClientDisconnectException: unknown exception=-1 at com.caucho.vfs.JniStream.exception(JniStream.java:156) at com.caucho.vfs.JniStream.write(JniStream.java:121) at com.caucho.vfs.WriteStream.close(WriteStream.java:1223) at com.caucho.server.connection.TcpConnection.closeImpl(TcpConnection.java:1002) at com.caucho.server.connection.TcpConnection.close(TcpConnection.java:960) at com.caucho.server.connection.TcpDuplexController.closeImpl(TcpDuplexController.java:209) at com.caucho.server.connection.TcpDuplexController.close(TcpDuplexController.java:187) at com.caucho.server.connection.TcpDuplexController.serviceRead(TcpDuplexController.java:174) at com.caucho.server.connection.TcpConnection$DuplexReadTask.doTask(TcpConnection.java:1304) at com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1137) at com.caucho.server.connection.TcpConnection$DuplexReadTask.run(TcpConnection.java:1283) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) [2010-04-25 09:39:02.562] TcpDuplexController[null,closed] was not processing any data. Shutting down. [2010-04-25 09:39:02.562] TcpDuplexController[null,closed] was not processing any data. Shutting down. [2010-04-25 09:39:02.562] 1968: "45a23eb4953a8caf415afc5820887d160bfbb035" [2010-04-25 09:39:02.562] 1969: "45a40c537ed3cc0d8b271d3ad4105d4a36af9402" ... [2010-04-25 09:39:03.577] 10978: "fff16ae185861a99959807fb2247cef6da0c7a3b" [2010-04-25 09:39:03.577] 10979: "fff3417c3c8888850b61159094928644cca69153" [2010-04-25 09:39:03.577] packet-end Mattias Jiderhamn wrote (2010-04-23 16:17): http://www.caucho.com/resin/admin/deploy.xtp there should http://blog.caucho.com/?p=134 and does not seem to</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote deployment</header>
    <date>Wed Apr 28 17:35:25 CEST 2010</date>
    <body>http://www.caucho.com/resin/admin/deploy.xtp carefully, the Thanks. I've filed this. The timeout looks like something we're working on for 4.0.7. Basically, the first request is using the keepalive timeout, when that timeout should only apply to following requests. -- Scott http://*:8080,CLOSED ], total=8 http://www.caucho.com/resin/admin/deploy.xtp there should http://blog.caucho.com/?p=134 and does not seem to http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote deployment</header>
    <date>Mon Sep 06 09:07:39 CEST 2010</date>
    <body>Just upgraded to 4.0.10 and still can't get remote deployment working. Client side error: com.caucho.bam.TimeoutException: com.caucho.bam.querymanager$queryfuturei...@cdb06e query timeout Server log: [2010-09-06 09:00:10.666] com.caucho.vfs.ClientDisconnectException: Client disconnect fd=294 errno=32 at com.caucho.vfs.JniSocketImpl.writeNative(Native Method) at com.caucho.vfs.JniSocketImpl.write(JniSocketImpl.java:353) at com.caucho.vfs.JniStream.write(JniStream.java:127) at com.caucho.vfs.WriteStream.flush(WriteStream.java:371) at com.caucho.hessian.io.Hessian2Output.flush(Hessian2Output.java:1540) at com.caucho.hessian.io.Hessian2Output.close(Hessian2Output.java:1576) at com.caucho.hmtp.HmtpWriter.close(HmtpWriter.java:363) at com.caucho.hmtp.HmtpWriter.queryResult(HmtpWriter.java:286) at com.caucho.hemp.packet.QueryResult.dispatch(QueryResult.java:82) at com.caucho.hemp.broker.HempMemoryQueue.dispatch(HempMemoryQueue.java:247) at com.caucho.hemp.broker.QueueWorker.runTask(QueueWorker.java:67) at com.caucho.env.thread.TaskWorker.run(TaskWorker.java:142) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:170) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) [2010-09-06 09:00:10.667] com.caucho.bam.ProtocolException: com.caucho.hessian.io.IOExceptionWrapper: Client disconnect fd=294 errno=104 field: com.caucho.server.admin.DeployCommitListQuery._commitList class: com.caucho.server.admin.DeployCommitListQuery (object=DeployCommitListQuery[]) at com.caucho.hmtp.HmtpWriter.queryResult(HmtpWriter.java:288) at com.caucho.hemp.packet.QueryResult.dispatch(QueryResult.java:82) at com.caucho.hemp.broker.HempMemoryQueue.dispatch(HempMemoryQueue.java:247) at com.caucho.hemp.broker.QueueWorker.runTask(QueueWorker.java:67) at com.caucho.env.thread.TaskWorker.run(TaskWorker.java:142) at com.caucho.env.thread.ResinThread.runTasks(ResinThread.java:170) at com.caucho.env.thread.ResinThread.run(ResinThread.java:126) Caused by: com.caucho.hessian.io.IOExceptionWrapper: Client disconnect fd=294 errno=104 field: com.caucho.server.admin.DeployCommitListQuery._commitList class: com.caucho.server.admin.DeployCommitListQuery (object=DeployCommitListQuery[]) at com.caucho.hessian.io.UnsafeSerializer.writeInstance(UnsafeSerializer.java:220) at com.caucho.hessian.io.UnsafeSerializer.writeObject(UnsafeSerializer.java:171) at com.caucho.hessian.io.Hessian2Output.writeObject(Hessian2Output.java:421) at com.caucho.hmtp.HmtpWriter.queryResult(HmtpWriter.java:278) ... 6 more Caused by: com.caucho.hessian.io.IOExceptionWrapper: Client disconnect fd=294 errno=104 field: com.caucho.server.admin.DeployCommitListQuery._commitList at com.caucho.hessian.io.UnsafeSerializer$ObjectFieldSerializer.serialize(UnsafeSerializer.java:300) at com.caucho.hessian.io.UnsafeSerializer.writeInstance(UnsafeSerializer.java:212) ... 9 more Caused by: com.caucho.vfs.ClientDisconnectException: Client disconnect fd=294 errno=104 at com.caucho.vfs.JniSocketImpl.writeNative(Native Method) at com.caucho.vfs.JniSocketImpl.write(JniSocketImpl.java:353) at com.caucho.vfs.JniStream.write(JniStream.java:127) at com.caucho.vfs.WriteStream.write(WriteStream.java:321) at com.caucho.hessian.io.Hessian2Output.flushBuffer(Hessian2Output.java:1563) at com.caucho.hessian.io.Hessian2Output.printString(Hessian2Output.java:1466) at com.caucho.hessian.io.Hessian2Output.writeString(Hessian2Output.java:987) at com.caucho.hessian.io.BasicSerializer.writeObject(BasicSerializer.java:273) at com.caucho.hessian.io.Hessian2Output.writeObject(Hessian2Output.java:421) at com.caucho.hessian.io.UnsafeSerializer$ObjectFieldSerializer.serialize(UnsafeSerializer.java:293) Am I still doing something wrong??? Scott Ferguson skrev: http://www.caucho.com/resin/admin/deploy.xtp carefully, the http://*:8080,CLOSED ], total=8 http://www.caucho.com/resin/admin/deploy.xtp there should http://blog.caucho.com/?p=134 and does not seem to --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote deployment</header>
    <date>Tue Sep 07 19:26:27 CEST 2010</date>
    <body>I've filed this as a bug. We're doing a QA/cleanup pass over the remote deployment for 4.0.11 (one of the main focuses), so I can check this. -- Scott http://www.caucho.com/resin/admin/deploy.xtp carefully, the http://*:8080,CLOSED ], total=8 http://www.caucho.com/resin/admin/deploy.xtp there should http://blog.caucho.com/?p=134 and does not seem to</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin-interest Digest, Vol 46, Issue 21</header>
    <date>Wed Apr 21 19:03:53 CEST 2010</date>
    <body>Has anyone successfully managed Resin with OpenView, etc., and if so, how? Thanks! Stay Strong, Michael "OpenView Mike" Stollaire CEO and Senior Consultant EHI-INSM Inc. TEL: 818.358.3729 MOBILE: 818.802.0653 eFax: 509.275.9260 Skype: Michael.Stollaire BlackBerry: archangel_mich...@att.blackberry.net [ http://mail.ehiinsm.com/mail6a/vendor/FCKeditor/editor/michael.stolla...@ehiinsm.com ] michael.stolla...@ehiinsm.com [ http://www.ehiinsm.com/ ] http://www.ehiinsm.com -----Original Message----- From: resin-interest-requ...@caucho.com Sent: Wednesday, April 21, 2010 10:00 To: resin-interest@caucho.com Subject: resin-interest Digest, Vol 46, Issue 21 Send resin-interest mailing list submissions to resin-interest@caucho.com To subscribe or unsubscribe via the World Wide Web, visit http://maillist.caucho.com/mailman/listinfo/resin-interest or, via email, send a message with subject or body 'help' to resin-interest-requ...@caucho.com You can reach the person managing the list at resin-interest-ow...@caucho.com When replying, please edit your Subject line so it is more specific than "Re: Contents of resin-interest digest..." Today's Topics: 1. Re: Accessing resin-admin (Mattias Jiderhamn) ---------------------------------------------------------------------- Message: 1 Date: Wed, 21 Apr 2010 10:15:20 +0200 Subject: Re: [Resin-interest] Accessing resin-admin To: General Discussion for the Resin application server Content-Type: text/plain; charset=ISO-8859-1; format=flowed Thanks, that worked. I tried adding &amp;lt;resin:Allow&amp;gt; (or &amp;lt;security-constraint&amp;gt;) also to add some IP filtering (&amp;lt;resin:IfNetwork&amp;gt; vs &amp;lt;ip-constraint&amp;gt;) and then the authenticator seems to be overridden. In case the request comes from a trusted IP range, no login is required. I have to add &amp;lt;resin:And&amp;gt; &amp;lt;resin:IfUserInRole role="resin-admin"/&amp;gt; also. Is that intended...? Btw, in order to not mess up the login page I set url-pattern="*.php". Any risk this will change in a future release "without further notice"? Maybe it's better/safer to allow "/images/*" and "*.css"? Emil Ong wrote (2010-04-16 23:17): http://caucho.com/resin-4.0/admin/starting-resin-install.xtp#Creating%20a%20password%20for%20the%20Resin%20Administration%20Console http://caucho.com/resin-4.0/admin/resin-admin-console.xtp and the ------------------------------</body>
  </mail>
  <mail>
    <header>[Resin-interest] unplanned and upexpected downtime of resin</header>
    <date>Tue Apr 20 23:07:34 CEST 2010</date>
    <body>Dear Sir , I have resin version 3.1.9 installed , sometimes I found that resin is down , So can u help me to trace this problem and find the correct solution. Thnx for ur fast replay All the Best, Abdalmonem Tharwat Galila System Engineer , Technical Resources Department. Ministry of Communications &amp;amp; Information Technology Office Tel.: +2 02 35341582 - +2 02 35341300 Mobile: +2 010 0049068 Fax : +2 02 35370537 http://www.mcit.gov.eg/ mailto:agal...@mcit.gov.eg</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] unplanned and upexpected downtime of resin</header>
    <date>Wed Apr 21 00:06:03 CEST 2010</date>
    <body>There may be more detail pertinent to the problem in resin log files. Generally, resin's watchdog restarts resin server when it becomes unavailable for whatever reason. The watch dog is started automatically with bin/httpd.sh start Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Problem with c:out shorthand in Resin 4.x</header>
    <date>Tue Apr 20 20:29:03 CEST 2010</date>
    <body>This is from one of our web engineers concerning a problem we've encountered in our testing of Resin 4.x (currently 4.0.6). Our site almost exclusively uses a shorthand for: Instead we simply use: With resin 4.x, this is being interpreted literally and rather then seeing a We would like to move to resin 4.x to take advantage of several features, but the work involved in rewriting and testing the change to &amp;lt;c:out .../&amp;gt; will be a huge undertaking. Is there a way to tell Resin 4.x to use an older version of jstl, or to interpret the shorthand notation when it sees it in JSP files? Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problem with c:out shorthand in Resin 4.x</header>
    <date>Wed Apr 21 00:00:35 CEST 2010</date>
    <body>Rob, you can add j...@el-ignored="false" to resin-web.xml to make resin pick up on those e.g. http://caucho.com/ns/resin" thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin ~ Enterprise Management and Monitoring</header>
    <date>Mon Apr 19 20:54:51 CEST 2010</date>
    <body>All, I would like to know if anyone on the list has implemented an existing monitoring paradigm for Resin, using SNMP, if supported, and also, what logs are of interest, along with specifics on what messages should be alerted on from a monitoring respect, such as OpenView, Tivoli, Unicenter, BMC Patrol, etc. Thanks very much, as I am working on development of a Smart Plug-In for OpenView Operations Manager for Resin! Stay Strong, Michael "OpenView Mike" Stollaire CEO and Senior Consultant EHI-INSM Inc. TEL: 818.358.3729 MOBILE: 818.802.0653 eFax: 509.275.9260 Skype: Michael.Stollaire BlackBerry: archangel_mich...@att.blackberry.net [ http://mail.ehiinsm.com/mail6a/vendor/FCKeditor/editor/michael.stolla...@ehiinsm.com ] michael.stolla...@ehiinsm.com [ http://www.ehiinsm.com/ ] http://www.ehiinsm.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin ~ Enterprise Management and Monitoring</header>
    <date>Wed Apr 21 19:14:39 CEST 2010</date>
    <body>Hi Michael, If you’re using Resin 4.x, you should take a look at these two Blog posts (and the Wiki page linked in the second post), if you haven’t already: http://blog.caucho.com/?p=325 http://blog.caucho.com/?p=238 We are currently doing some things with Resin 4.x, Nagios, and Cacti and those two posts served as good starting points. I can’t speak to OpenView/Tivoli integration and how easy that would be to accomplish, but the Resin+Nagios configuration was very simple and flexible. As to which logs are of interest, it will really depend on your Resin configuration and where you’re sending messages. After reviewing the REST documentation, though, you may decide that you don’t even need to look at the logs; I can’t really say what your needs are. Good luck. -Jamie From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Michael Stollaire Sent: Monday, April 19, 2010 1:54 PM To: resin-interest@caucho.com Cc: Yoshi Okayama; Mieke Mocke; Michael Gibson Subject: [Resin-interest] Resin ~ Enterprise Management and Monitoring Importance: High All, I would like to know if anyone on the list has implemented an existing monitoring paradigm for Resin, using SNMP, if supported, and also, what logs are of interest, along with specifics on what messages should be alerted on from a monitoring respect, such as OpenView, Tivoli, Unicenter, BMC Patrol, etc. Thanks very much, as I am working on development of a Smart Plug-In for OpenView Operations Manager for Resin! Stay Strong, Michael "OpenView Mike" Stollaire CEO and Senior Consultant EHI-INSM Inc. TEL: 818.358.3729 MOBILE: 818.802.0653 eFax: 509.275.9260 Skype: Michael.Stollaire BlackBerry: archangel_mich...@att.blackberry.net http://mail.ehiinsm.com/mail6a/vendor/FCKeditor/editor/michael.stolla...@ehiinsm.com http://www.ehiinsm.com http://www.ehiinsm.com/</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin ~ Enterprise Management and Monitoring</header>
    <date>Wed Apr 21 19:14:42 CEST 2010</date>
    <body>Hi Michael, The best place to look is at our MBeans to see what they expose.  Our own resin-admin is just a facade over these.  The SNMP interface is documented here: http://caucho.com/resin-4.0/admin/resin-admin-console.xtp#Enabling%20SNMP%20support%20in%20Resin There are also different statistics exposed depending on if you're using Resin open source versus Professional.  With Pro, we have some JNI that is able to do more sophisticated statistics gathering. Best, Emil http://www.ehiinsm.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Is Caucho supporting Quercus at all?</header>
    <date>Sat Apr 17 01:18:24 CEST 2010</date>
    <body>After repeated bug reports and inquiries on both lists, I've gotten no response of any kind, regarding the Quercus bugs I've run into. Not even my query about whether or not buying the Quercus Personal license would entitle me to any support. Is Caucho committed to the Quercus project? Admittedly, I have not yet tried Resin 4.0.6. The only app I run under Quercus is WordPress, and it's having problems. Please let me know what I need to do to get support, or some kind of acknowledgement that these are even problems. Thank you. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Is Caucho supporting Quercus at all?</header>
    <date>Sat Apr 17 02:08:17 CEST 2010</date>
    <body>Currently, we are concentrating our development on the WebProfile and Resin stability. Quercus is not currently a priority. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Is Caucho supporting Quercus at all?</header>
    <date>Sat Apr 17 02:20:15 CEST 2010</date>
    <body>Thanks for the answer, Scott. Pity, because when it works, it seems to work really well. And WordPress is pretty broken in the current state, yet the website proclaims that it's an important app. I assume Web Profile is the stripped-down Java EE, not the ASP thing? -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.x doc/config</header>
    <date>Fri Apr 16 17:27:49 CEST 2010</date>
    <body>In addition to admin and resin-doc, I noticed that there is also a config webapp under doc.  Anyone knows what that is for? Bill</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.x doc/config</header>
    <date>Fri Apr 16 23:12:44 CEST 2010</date>
    <body>Hi Bill, I don't see that app.  What's in it?  Do you see a directory or an MBean or something else that refers to it? Thanks, Emil http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.x doc/config</header>
    <date>Fri Apr 16 23:45:16 CEST 2010</date>
    <body>It is part of the tar ball: $ tar tzvf resin-4.0.6.tar.gz |grep doc/config drwxr-xr-x 0/0               0 2010-04-13 11:57:38 resin-4.0.6/doc/config/ drwxr-xr-x 0/0               0 2010-04-13 11:57:38 resin-4.0.6/doc/config/WEB-INF/ drwxr-xr-x 0/0               0 2010-04-13 11:57:38 resin-4.0.6/doc/config/WEB-INF/inc/ drwxr-xr-x 0/0               0 2010-04-13 11:57:38 resin-4.0.6/doc/resin-doc/WEB-INF/classes/com/caucho/doc/config/ -rw-r--r-- 0/0            1037 2010-04-13 11:57:38 resin-4.0.6/doc/config/WEB-INF/inc/apache.template -rw-r--r-- 0/0             315 2010-04-13 11:57:38 resin-4.0.6/doc/config/WEB-INF/inc/common.php -rw-r--r-- 0/0             444 2010-04-13 11:57:38 resin-4.0.6/doc/config/WEB-INF/inc/loadbalance.template -rw-r--r-- 0/0             190 2010-04-13 11:57:38 resin-4.0.6/doc/config/WEB-INF/inc/log.php -rw-r--r-- 0/0            1966 2010-04-13 11:57:38 resin-4.0.6/doc/config/WEB-INF/inc/management.php -rw-r--r-- 0/0            1249 2010-04-13 11:57:38 resin-4.0.6/doc/config/WEB-INF/inc/resin.template -rw-r--r-- 0/0             260 2010-04-13 11:57:38 resin-4.0.6/doc/config/WEB-INF/inc/server.php -rw-r--r-- 0/0            3536 2010-04-13 11:57:38 resin-4.0.6/doc/config/default.css -rw-r--r-- 0/0            1774 2010-04-13 11:57:38 resin-4.0.6/doc/config/index.php -rw-r--r-- 0/0            6480 2010-04-13 11:57:38 resin-4.0.6/doc/resin-doc/doc/config-isp.xtp -rw-r--r-- 0/0           17321 2010-04-13 11:57:38 resin-4.0.6/doc/resin-doc/doc/config-overview.xtp -rw-r--r-- 0/0            2275 2010-04-13 11:57:38 resin-4.0.6/doc/resin-doc/doc/config-tags.xtp -rw-r--r-- 0/0           37560 2010-04-13 11:57:38 resin-4.0.6/doc/resin-doc/doc/config-webapp.xtp $ It is referenced in full.xml but is commented out  there. Bill http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.x doc/config</header>
    <date>Sat Apr 17 01:13:02 CEST 2010</date>
    <body>Hi Bill, Thanks, I see it now too.  I think it's the beginnings of a configuration wizard, but it's not complete yet.  Looks like it was Scott who checked it in, so he might be able to explain it better. Emil http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Accessing resin-admin</header>
    <date>Fri Apr 16 09:47:46 CEST 2010</date>
    <body>I feel like a newbie for having to ask this, but admittedly I have never used the J2EE authentication mechanism since we have a proprietary one. I'm trying to set up resin-admin following a combination of the instructions at http://caucho.com/resin-4.0/admin/resin-admin-console.xtp and the instructions shown when accessing the admin app. I have configured the web-app and had it generate a admin-users.xml so that I can log in. However I have no access, apparently since my user is not in the "resin-admin" role. Doing a bit of debugging I end up in a NullAuthenticator that only accepts the "user" role. So I guess I need to configure some other authenticator, right...? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Accessing resin-admin</header>
    <date>Fri Apr 16 23:18:11 CEST 2010</date>
    <body>Hi Mattias, Are you using a custom resin.xml/resin.conf?  If so, you might try copying the &amp;lt;resin:AdminAuthenticator&amp;gt; configuration from the default. It looks like this: This part of the install document may also be helpful: http://caucho.com/resin-4.0/admin/starting-resin-install.xtp#Creating%20a%20password%20for%20the%20Resin%20Administration%20Console Best, Emil http://caucho.com/resin-4.0/admin/resin-admin-console.xtp and the http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Accessing resin-admin</header>
    <date>Wed Apr 21 10:14:59 CEST 2010</date>
    <body>Thanks, that worked. I tried adding &amp;lt;resin:Allow&amp;gt; (or &amp;lt;security-constraint&amp;gt;) also to add some IP filtering (&amp;lt;resin:IfNetwork&amp;gt; vs &amp;lt;ip-constraint&amp;gt;) and then the authenticator seems to be overridden. In case the request comes from a trusted IP range, no login is required. I have to add &amp;lt;resin:And&amp;gt; &amp;lt;resin:IfUserInRole role="resin-admin"/&amp;gt; also. Is that intended...? Btw, in order to not mess up the login page I set url-pattern="*.php". Any risk this will change in a future release "without further notice"? Maybe it's better/safer to allow "/images/*" and "*.css"? Emil Ong wrote (2010-04-16 23:17): http://caucho.com/resin-4.0/admin/starting-resin-install.xtp#Creating%20a%20password%20for%20the%20Resin%20Administration%20Console http://caucho.com/resin-4.0/admin/resin-admin-console.xtp and the</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Accessing resin-admin</header>
    <date>Wed Apr 21 19:10:13 CEST 2010</date>
    <body>Where did you set these?  If you added it in the resin.xml, you probably overrode the settings in the admin application's resin-web.xml.  That's probably the best place to integrate those network constraints. Sorry, I don't really understand the context of the question... which url-pattern? Emil http://caucho.com/resin-4.0/admin/starting-resin-install.xtp#Creating%20a%20password%20for%20the%20Resin%20Administration%20Console http://caucho.com/resin-4.0/admin/resin-admin-console.xtp and the</body>
  </mail>
  <mail>
    <header>[Resin-interest] Latest Apple Java update fixes resin launch	problems</header>
    <date>Thu Apr 15 01:39:30 CEST 2010</date>
    <body>The latest Java developer preview addresses both the recursive invocation error, and the problem of _19 not launch Resin at all: http://connect.apple.com/cgi-bin/WebObjects/MemberSite.woa/wa/getSoftware?bundleID=20598 -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Caucho website security heads up</header>
    <date>Wed Apr 14 14:28:34 CEST 2010</date>
    <body>http://caucho.com/resin-4.0/admin/security.xtp is mighty secure indeed! Thought you guys would want to know as this is a link off your front page.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caucho website security heads up</header>
    <date>Wed Apr 14 18:41:08 CEST 2010</date>
    <body>http://caucho.com/resin-4.0/admin/security.xtp is mighty secure indeed! Thanks. It looks like our doc system is out-of-sync with the docs themselves (we're in the middle reworking the documentation.) I'll need to upgrade the Resin version of caucho.com before that can be fixed. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caucho website security heads up</header>
    <date>Wed Apr 14 21:40:05 CEST 2010</date>
    <body>Please update the admin PDF found on the download page as part of the documentation rework.  Thanks. Bill http://caucho.com/resin-4.0/admin/security.xtp is mighty secure indeed! http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caucho website security heads up</header>
    <date>Wed Apr 14 21:47:38 CEST 2010</date>
    <body>Hi Bill, I'm working on it right now.  With luck, it'll be out later today. Thanks, Emil http://caucho.com/resin-4.0/admin/security.xtp is mighty secure indeed! http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Caching issue? with resin pro 3.1.9</header>
    <date>Wed Apr 14 11:04:55 CEST 2010</date>
    <body>Hello folks, I need some helping hands with a puzzler, we ran into recently… We are using the licensed resin pro 3.1.9 to handle all our servlets and .jsps and additionally we kicked apache and also use resin to spread the static .html contents to the world. While we are aware how to influence max-age in our servlets and .jsps, we still have a strange issue with folders, where content was added after someone already called the empty folder generating a 404 response. Even if we put the index.html into the folder resin will not recognize this and still give the 404 error. Last time this happens it lasted more than 16 hours, until we restarted resin to get rid of this effect. Now my question is, where can I influence cache times of such responses, when I call a folder? Just to give better example… I put a new folder in my doc tree. Then a call of http://my-server.com/newfolder/ will give me 404 page as I have not filled folder yet. When I now put my static index.html into newfolder I can directly call the index.html and page will show. But the call of http://my-server.com/newfolder/ still gives me the 404 error page for hours and days. How can I avoid this without need to restart resin? Any clues, ideas, hints? Best regards, m.w.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caching issue? with resin pro 3.1.9</header>
    <date>Wed Apr 14 13:45:12 CEST 2010</date>
    <body>Marco, If you are repeating that pattern every time, it sounds more like your _brower's_ cache being the culprit.  Instead of calling: http://my-server.com/newfolder/ with an empty folder, place the index.html in there and _then_ call it so your browser doesn't cache up the "404 not found" result.  You can alternatively hold down the *shift key* while refreshing to see if it's your browser.  We would actually test this making the first call in IE and then the second test in FireFox to rule that  browser cache issue out, but that sounds like what you are up against. If you find this is the problem, then I am not sure what Resin's default cache settings are for the 404 not found (I bet they don't even address it), but you can replace their "404 not found" with your own user-friendlier one and set your own cache settings.  Do this in your resin.xml: And set whatever meta tags, and browser cache settings you want in your /notfound.jsp. Aaron Hello folks, I need some helping hands with a puzzler, we ran into recently... We are using the licensed resin pro 3.1.9 to handle all our servlets and .jsps and additionally we kicked apache and also use resin to spread the static .html contents to the world. While we are aware how to influence max-age in our servlets and .jsps, we still have a strange issue with folders, where content was added after someone already called the empty folder generating a 404 response. Even if we put the index.html into the folder resin will not recognize this and still give the 404 error. Last time this happens it lasted more than 16 hours, until we restarted resin to get rid of this effect. Now my question is, where can I influence cache times of such responses, when I call a folder? Just to give better example... I put a new folder in my doc tree. Then a call of http://my-server.com/newfolder/ will give me 404 page as I have not filled folder yet. When I now put my static index.html into newfolder I can directly call the index.html and page will show. But the call of http://my-server.com/newfolder/ still gives me the 404 error page for hours and days. How can I avoid this without need to restart resin? Any clues, ideas, hints? Best regards, m.w.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caching issue? with resin pro 3.1.9</header>
    <date>Fri Apr 16 15:56:36 CEST 2010</date>
    <body>Hi Aaron, thanks for your ideas… unfortunately I can be sure that’s not an browser cache or proxy issue… and of course I simplified the problem a little bit… It’s not me calling the empty directory tree, but an newsletter project of our company uses shortened urls by just referencing the folder in their emails, not the index-document to make the link look better… so the caching of 404 will appear as soon as the first test newsletters are spread at development. Until I get my hands on the index-document I have already plenty of calls on the webserver. The point is, that problem disappears as soon as resin is restarted. Until then the newsletter recipients will all see the 404 page instead of the landing page… We are already fighting with this since a while and find no way to get around… and for performance reasons we don’t like the idea to abandon resin as webserver and go back to apache or any other webserver instead. So if anyone has an idea to enlighten us what influences resins “long-term memory” of static html-content and where to fiddle with parameters to shorten the time to live for such content delivered by resin, please feel free to point us into right direction. Your idea of a customized 404 page sounds good, but it will not address  the updated hmtl-documents which won’t show their changes either until resin is restarted… we definitely have a problem with static html-content being kind of resistable to changes until resin is restarted. So we still welcome ideas… or maybe someone can find same behavior? Best regards, m.w.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caching issue? with resin pro 3.1.9</header>
    <date>Fri Apr 16 18:15:35 CEST 2010</date>
    <body>Well I don't know the internals of Resin, so I cannot comment on the reason, but I can think of a potential work-around: Assuming you can call http://.../folder/index.html and it works, but they are distributing http://.../folder/ Add this to your &amp;lt;web-app&amp;gt; section of your resin.xml: Which will explicitly forward the request to the index.html file (happens internally already, but this explicitly makes that happen as a workaround, since the internal mechanism is broken due to some caching issue). If the URLs are more complex with parameters, etc you would need to modify that a bit. Aaron Hi Aaron, thanks for your ideas... unfortunately I can be sure that's not an browser cache or proxy issue... and of course I simplified the problem a little bit... It's not me calling the empty directory tree, but an newsletter project of our company uses shortened urls by just referencing the folder in their emails, not the index-document to make the link look better... so the caching of 404 will appear as soon as the first test newsletters are spread at development. Until I get my hands on the index-document I have already plenty of calls on the webserver. The point is, that problem disappears as soon as resin is restarted. Until then the newsletter recipients will all see the 404 page instead of the landing page... We are already fighting with this since a while and find no way to get around... and for performance reasons we don't like the idea to abandon resin as webserver and go back to apache or any other webserver instead. So if anyone has an idea to enlighten us what influences resins "long-term memory" of static html-content and where to fiddle with parameters to shorten the time to live for such content delivered by resin, please feel free to point us into right direction. Your idea of a customized 404 page sounds good, but it will not address  the updated hmtl-documents which won't show their changes either until resin is restarted... we definitely have a problem with static html-content being kind of resistable to changes until resin is restarted. So we still welcome ideas... or maybe someone can find same behavior? Best regards, m.w.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caching issue? with resin pro 3.1.9</header>
    <date>Fri Apr 16 18:24:31 CEST 2010</date>
    <body>Hi Aaron, I appreciate your help… meanwhile I got a hint from Emil to flush ProxyCache with MBean… we will see if your work-around is still needed. Thanks for your active support and have a nice weekend. Best regards, m.w.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Anyone running 4.0.5 on Java 1.6.0_19 on Snow	Leopard?</header>
    <date>Sat Apr 10 00:18:19 CEST 2010</date>
    <body>I was able to run it on _17, but on _19, it just restarts partway through launch. Never logs anything. Two different 10.6.3 machines. Anyone successfully running on _19? TIA, Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Anyone running 4.0.5 on Java 1.6.0_19 on	Snow	Leopard?</header>
    <date>Sat Apr 10 00:26:49 CEST 2010</date>
    <body>_19 is a Developer Preview. It wouldn't surprise me if it was a bug in Apple's java that was causing your problem. Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Anyone running 4.0.5 on Java 1.6.0_19 on	Snow	Leopard?</header>
    <date>Sat Apr 10 00:29:03 CEST 2010</date>
    <body>Yeah. I wonder if I can go back. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Anyone running 4.0.5 on Java 1.6.0_19 on	Snow Leopard?</header>
    <date>Sat Apr 10 00:31:19 CEST 2010</date>
    <body>I saw your post on the Apple forum just now. Don't hold your breath. In the past, Apple hasn't made it easy to remove DP's, which is why I never install them. Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Anyone running 4.0.5 on Java 1.6.0_19 on	Snow	Leopard?</header>
    <date>Sat Apr 10 00:34:34 CEST 2010</date>
    <body>This is the first time I've ever noticed a show-stopping problem with a DP. Oh well. I might try enabling the Java console and some debug settings in the prefs, see if I can glean any more info about what's going wrong. -- Rick http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Custom datasource implementation</header>
    <date>Thu Apr 08 12:12:37 CEST 2010</date>
    <body>Hi there, For some reason, I would like to be able inside Resin a datasource implementation other than Resin's, C3P0 for example, and I have been unable to find in the documentation how would one configure it. The examples that I found use the &amp;lt;database&amp;gt; tag, which does not seem to have an attribute to specify an implementation class for the DataSource. Is it possible at all? D. ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) -------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Custom datasource implementation</header>
    <date>Thu Apr 08 18:25:20 CEST 2010</date>
    <body>You'd treat it as a generic bean. In Resin 4.0.x, it would be the ... The &amp;lt;database&amp;gt; tag wouldn't make sense, because it's integrated with Resin's JCA/pooling code, which is what you're trying to replace. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Custom datasource implementation</header>
    <date>Sat Apr 10 17:46:19 CEST 2010</date>
    <body>Hi Scott, Thanks for the pointer. I managed to get it to work, more or less, using the new way: -- ... -- and the old "bean" way: -- ... -- However, I find it more flexible to use the old bean way as it allows me to publish it to JNDI, so the old JNDI-based applications don't have to rewritten, and it allows me more easily to instantiate different resources and assign them different names (If I understoon correctly, I have to create a new @Qualified annotation for each name with the new Resin 4.0's way). Am I missing something? I like much better the old way :). D. S'està citant Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Custom datasource implementation</header>
    <date>Mon Apr 12 18:25:44 CEST 2010</date>
    <body>Well, I've just added a resin:Jndi="java:comp/env/jdbc/MyPool" to achieve the same thing as the old one. With the new Qualifiers, it's recommended to have a Qualifier for each kind of resource. You can use the annotation's attributes to distinguish between similar qualifiers. So you could have @Login(xa=false) vs @Login(xa=true) to distinguish a transactional DataSource from a non-transactional one. Also, you can use the built-in @Named("MyPool") as a general Qualifier. It's recommended to use custom ones to improve the code's documentation, but the @Named works perfectly well. Unless you have a specific need for JNDI or have legacy code or are transitioning, I see less need in the future for JNDI. It's more cumbersome, and provides less code self-documentation than CDI injection. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Custom datasource implementation</header>
    <date>Tue Apr 13 09:12:49 CEST 2010</date>
    <body>Scott Ferguson escribió: Cool, thanks. I'm assuming that this would go inside the custom tag like: -- ... -- I understand, but I simply want to be able to define two different resources of the same class that used different configuration data and assign them a different name. So I can have 2 pools pointing to different databases in the same web application. I don't see the point of creating a new annotation just for giving a name to a resource. Yes, I was able to use @Named("MyPool") when defining the pool using the old &amp;lt;bean&amp;gt; way, but how does one assign the name MyPool to the bean using the new way? -- ... -- I apologise if that's documented somewhere but I was unable to find it. I agree, it's just that we have plenty of legacy applications that rely on JNDI to find the datasource and in some cases, the code is generic and has to be able to be used with different resources that are specified externally at deploy time, so the code accessing the bean is not compiled each time (a library). For example, we develop some applications using PLSQL where you write no Java code at all as the Java code to access the DB, execute the procedures etc. is already written in a library. In those and similar cases we cannot use an annotation inside the library but passing it a name and retrieving it through JNDI on startup is an option. I also have to check if I can get the annotations/CDI injection to work on Groovy defined classes, as I'm using it for prototyping lately. But if I can't, at least I know I can go back to good-old JNDI :). In any case, I agree that CDI injection is a powerful mechanism and I plan to use it where I can. It's simply that sometimes it's not the best option so having both bases covered seems like "A Good Thing" ;). Thanks, D.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Custom datasource implementation</header>
    <date>Tue Apr 13 18:02:35 CEST 2010</date>
    <body>Correct. You could also use it in an attribute style like: although I'm not sure that's more readable. Well, the theory would be that your two pools have different purposes, which is why there are two pools, so the qualifier would give a bit of extra documentation at the injection point. We'll see how the idea works out in practice. My guess is that most project will only need a few qualifiers (since having 10s of DataSources would be unusual), so it won't turn out to be as many extra classes as it might seem. The annotation is javax.inject.Named, which is included in the "ee" virtual package. So you'd use (Although I generally like the xmlns:ee on the top element, I've written it inline just for emphasis.) Right. CDI is more of a preferred direction. The nice thing is that you can migrate gracefully. There's no need to rip out the current code. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Refreshing User Roles during a session</header>
    <date>Tue Apr 20 20:33:22 CEST 2010</date>
    <body>Hi We are implementing user roles. Within a user session the roles that apply to them can change during the session at defined points where they "open" a company file and start working in the context of a different business. A user may have access to multiple businesses and their roles may be different in different businesses. Is it possible to get the principal, update the roles, and store the principal back in the session or wherever it is stored? I am working with 2.1.17 So far I seem to be able to get the principal and appear to update it, but the updates do not stick.  What is the trick? When a user logs in and the principal is initially created where and how is it stored? Thanks Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Refreshing User Roles during a session</header>
    <date>Wed Apr 21 00:18:58 CEST 2010</date>
    <body>I don't have a solution for your exact requirements, but you should be able to figure some things out by looking at the Authenticator code at http://www.caucho.com/download/resin-2.1.17-src.tar.gz Thank, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Refreshing User Roles during a session</header>
    <date>Wed Apr 21 10:06:32 CEST 2010</date>
    <body>Thanks Alex I was struggling to find the source download - for anyone interested the solution is along the following lines: Application app = (Application) JaffaAuthenticator myAuth = JaffaPrincipal myPrincipal = myAuth.loadEntityRoles(myPrincipal, ugb.getCurrentBusinessID());  // this proprietary method refreshes the roles and sets them on the principal There might be other ways of doing it but this works and provides a useful way to refresh the roles programatically as required and avoids needing to make database calls for each request to check roles. it also allows for different role queries to be used as required where the role query may need to vary according to a differing user context. Regards Alan http://www.caucho.com/download/resin-2.1.17-src.tar.gz -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>[Resin-interest] Thoughts about memory-leak detection strategies?</header>
    <date>Thu Apr 08 12:08:13 CEST 2010</date>
    <body>Hi there, I've come across a new feature that is to be implemented in Tomcat 6 to help detect/prevent/notifiy the too common OOME (permGen) problems and as we don't use Tomcat but do use Resin, I wondered if the Caucho guys have considered adding a similar mechanism to Resin. As the article points out, many people end up blaming the containter for such errors, as their application runs "fine", so I think it is in our best interest, container vendors included, to sort out who's to blame in this topic. Even if fixing is not always possible, it is not, simply notifiying that "web app classloader could not be recycled due to a leak in the application" would help and creating a list of libraries that cause these things might encourage library creators to be more careful. Thoughts, ideas? D. ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) -------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Thoughts about memory-leak detection	strategies?</header>
    <date>Thu Apr 08 18:28:40 CEST 2010</date>
    <body>I've added this as a bug. http://bugs.caucho.com/view.php?id=3988 The memory detection that we've been working on is more related to getting information on a forced restart, but this sounds like useful information as well. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin Pro 4.0.5 serving pages intermittently.</header>
    <date>Thu Apr 08 00:30:18 CEST 2010</date>
    <body>This is Resin Pro 4.0.5 running on a non-busy OS X machine. When I perform curl -I requests (which just retrieves the header information from the server) to a simple jsp page, sometimes it returns the header, but other times the curl request responds with: curl: (52) Empty reply from server Also, if I remove the -I from the curl request, it will download the contents of the page, but again, it sometimes works, but other other times it gets an "Empty reply from server" response. However, loading pages in a browser seems to work consistently. I tried commenting out the cache block in resin.xml, and that does lead to page load failures in the browser. So I suspect this has something to do with resin's caching, but not sure what. ??? With the log level set to "finer", I'm seeing the following messages in resin's logs. This first set is for a successful curl -I request: TcpConnection[id=3]starting connection TcpConnection[id= http://*:8080-3,http://*:8080,ACCEPT ], total=3 Http[3] HEAD /some.jsp HTTP/1.1 Http[3] Remote-IP: an.ip.address:49390 Http[3] User-Agent: curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8l zlib/1.2.3 Http[3] Host: somehost.com Http[3] Accept: */* Dispatch '/some.jsp' to AccessLogFilterChain[ http://www.somehost.com , next=CacheFilterChain[/some.jsp?null, next=WebAppFilterChain[ http://www.somehost.com , next=PageFilterChain[JspServlet[WebApp[ http://www.somehost.com ]]]]]] SessionImpl[aaaeeoksxMIpE9HDBsAFs,] new SessionImpl[aaaeeoksxMIpE9HDBsAFs,] create session Http[3] HTTP/1.1 200 OK Http[3] Cache-Control: private Http[3] Set-Cookie: JSESSIONID=aaaeeoksxMIpE9HDBsAFs; path=/ Http[3] Content-Type: text/html; charset=utf-8 Http[3] Content-Length: 378 Http[3] finish/keepalive Http[3] read timeout TcpConnection[id=3] closing connection TcpConnection[id= http://*:8080-3,http://*:8080,CLOSED ], total=3 And this is what resin logs when curl gets the "Empty reply from server": TcpConnection[id=5]starting connection TcpConnection[id= http://*:8080-5,http://*:8080,ACCEPT ], total=3 Http[5] read timeout TcpConnection[id=5] closing connection TcpConnection[id= http://*:8080-5,http://*:8080,CLOSED ], total=3 Any thoughts? I'm using the same configuration as I had with Resin Pro 4.0.2 and I don't think it was happening with that version. But admittedly, I didn't try doing this with that version as I had no reason to suspect anything was wrong. Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.5 serving pages intermittently.</header>
    <date>Fri Apr 09 18:25:54 CEST 2010</date>
    <body>Can you try the new snapshot at http://caucho.com/download/resin-pro-4_0-snap.tar.gz ? We've updated some of the read timeout code, but I haven't been able to duplicate that exact behavior. -- Scott TcpConnection[id=3]starting connection http://*:8080-3,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt; total=3 Http[3] HEAD /some.jsp HTTP/1.1 Http[3] Remote-IP: an.ip.address:49390 Http[3] User-Agent: curl/7.19.7 http://somehost.com Http[3] Accept: */* Dispatch '/some.jsp' to http://www.somehost.com , http://www.somehost.com , http://www.somehost.com ]]]]]] SessionImpl[aaaeeoksxMIpE9HDBsAFs,] new SessionImpl[aaaeeoksxMIpE9HDBsAFs,] create session Http[3] HTTP/1.1 200 OK Http[3] Cache-Control: private Http[3] Set-Cookie: Http[3] Content-Type: text/html; charset=utf-8 Http[3] Content-Length: 378 Http[3] finish/keepalive Http[3] read timeout TcpConnection[id=3] closing connection http://*:8080-3,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt; total=3 TcpConnection[id=5]starting connection http://*:8080-5,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt; total=3 Http[5] read timeout TcpConnection[id=5] closing connection http://*:8080-5,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt; total=3 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.5 serving pages intermittently.</header>
    <date>Sat Apr 10 00:06:18 CEST 2010</date>
    <body>http://caucho.com/download/resin-pro-4_0-snap.tar.gz ? Ok, I'm running the snapshot now. So far, so good. But I need to amend my previous email. I said before that it was working consistently when accessing the page from a browser, but sometime after I sent that email, it stopped working. I will send an update after the snapshot has been running for a while to see if it continues working or fails like 4.0.5 did. Rob TcpConnection[id=3]starting connection http://*:8080-3,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt; total=3 Http[3] HEAD /some.jsp HTTP/1.1 Http[3] Remote-IP: an.ip.address:49390 Http[3] User-Agent: curl/7.19.7 http://somehost.com Http[3] Accept: */* Dispatch '/some.jsp' to http://www.somehost.com , http://www.somehost.com , http://www.somehost.com ]]]]]] SessionImpl[aaaeeoksxMIpE9HDBsAFs,] new SessionImpl[aaaeeoksxMIpE9HDBsAFs,] create session Http[3] HTTP/1.1 200 OK Http[3] Cache-Control: private Http[3] Set-Cookie: Http[3] Content-Type: text/html; charset=utf-8 Http[3] Content-Length: 378 Http[3] finish/keepalive Http[3] read timeout TcpConnection[id=3] closing connection http://*:8080-3,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt; total=3 TcpConnection[id=5]starting connection http://*:8080-5,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt; total=3 Http[5] read timeout TcpConnection[id=5] closing connection http://*:8080-5,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt; total=3 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.5 serving pages intermittently.</header>
    <date>Sat Apr 10 00:34:37 CEST 2010</date>
    <body>Sorry, one other piece of information. I don't know if it's because it's a snapshot, or because I have the logging set to "finer", or if something is wrong, but it takes 74 seconds for this snapshot to finish initing and be ready to respond to requests. Just fyi. Rob http://caucho.com/download/resin-pro-4_0-snap.tar.gz ? TcpConnection[id=3]starting connection http://*:8080-3,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt; total=3 Http[3] HEAD /some.jsp HTTP/1.1 Http[3] Remote-IP: an.ip.address:49390 Http[3] User-Agent: curl/7.19.7 http://somehost.com Http[3] Accept: */* Dispatch '/some.jsp' to http://www.somehost.com , http://www.somehost.com , http://www.somehost.com ]]]]]] SessionImpl[aaaeeoksxMIpE9HDBsAFs,] new SessionImpl[aaaeeoksxMIpE9HDBsAFs,] create session Http[3] HTTP/1.1 200 OK Http[3] Cache-Control: private Http[3] Set-Cookie: Http[3] Content-Type: text/html; charset=utf-8 Http[3] Content-Length: 378 Http[3] finish/keepalive Http[3] read timeout TcpConnection[id=3] closing connection http://*:8080-3,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt; total=3 TcpConnection[id=5]starting connection http://*:8080-5,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt; total=3 Http[5] read timeout TcpConnection[id=5] closing connection http://*:8080-5,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt; total=3 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.5 serving pages intermittently.</header>
    <date>Sat Apr 10 00:44:12 CEST 2010</date>
    <body>It's possible. The goal for the next release is passing the JSR-299 TCK, so the initialization code is getting changed (and so intermediate snapshots might have some issues.) -- Scott http://caucho.com/download/resin-pro-4_0-snap.tar.gz ? TcpConnection[id=3]starting connection http://*:8080-3,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt; total=3 Http[3] HEAD /some.jsp HTTP/1.1 Http[3] Remote-IP: an.ip.address:49390 Http[3] User-Agent: curl/7.19.7 http://somehost.com Http[3] Accept: */* Dispatch '/some.jsp' to http://www.somehost.com , http://www.somehost.com , http://www.somehost.com ]]]]]] SessionImpl[aaaeeoksxMIpE9HDBsAFs,] new SessionImpl[aaaeeoksxMIpE9HDBsAFs,] create session Http[3] HTTP/1.1 200 OK Http[3] Cache-Control: private Http[3] Set-Cookie: Http[3] Content-Type: text/html; charset=utf-8 Http[3] Content-Length: 378 Http[3] finish/keepalive Http[3] read timeout TcpConnection[id=3] closing connection http://*:8080-3,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt; total=3 TcpConnection[id=5]starting connection http://*:8080-5,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt; total=3 Http[5] read timeout TcpConnection[id=5] closing connection http://*:8080-5,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt; total=3 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.5 serving pages intermittently.</header>
    <date>Sat Apr 10 02:05:27 CEST 2010</date>
    <body>Scott, Does that snapshot address the encoding issue with jsp:param? Thanks, Aaron http://caucho.com/download/resin-pro-4_0-snap.tar.gz ? TcpConnection[id=3]starting connection http://*:8080-3,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt;  total=3 Http[3] HEAD /some.jsp HTTP/1.1 Http[3] Remote-IP: an.ip.address:49390 Http[3] User-Agent: curl/7.19.7 http://somehost.com Http[3] Accept: */* Dispatch '/some.jsp' to http://www.somehost.com , http://www.somehost.com , http://www.somehost.com ]]]]]] SessionImpl[aaaeeoksxMIpE9HDBsAFs,] new SessionImpl[aaaeeoksxMIpE9HDBsAFs,] create session Http[3] HTTP/1.1 200 OK Http[3] Cache-Control: private Http[3] Set-Cookie: Http[3] Content-Type: text/html; charset=utf-8 Http[3] Content-Length: 378 Http[3] finish/keepalive Http[3] read timeout TcpConnection[id=3] closing connection http://*:8080-3,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt;  total=3 TcpConnection[id=5]starting connection http://*:8080-5,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt;  total=3 Http[5] read timeout TcpConnection[id=5] closing connection http://*:8080-5,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt;  total=3</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.5 serving pages intermittently.</header>
    <date>Sat Apr 10 02:10:50 CEST 2010</date>
    <body>Yes it does. -- Scott http://caucho.com/download/resin-pro-4_0-snap.tar.gz ? TcpConnection[id=3]starting connection http://*:8080-3,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt;  total=3 Http[3] HEAD /some.jsp HTTP/1.1 Http[3] Remote-IP: an.ip.address:49390 Http[3] User-Agent: curl/7.19.7 http://somehost.com Http[3] Accept: */* Dispatch '/some.jsp' to http://www.somehost.com , http://www.somehost.com , http://www.somehost.com ]]]]]] SessionImpl[aaaeeoksxMIpE9HDBsAFs,] new SessionImpl[aaaeeoksxMIpE9HDBsAFs,] create session Http[3] HTTP/1.1 200 OK Http[3] Cache-Control: private Http[3] Set-Cookie: Http[3] Content-Type: text/html; charset=utf-8 Http[3] Content-Length: 378 Http[3] finish/keepalive Http[3] read timeout TcpConnection[id=3] closing connection http://*:8080-3,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt;  total=3 TcpConnection[id=5]starting connection http://*:8080-5,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt;  total=3 Http[5] read timeout TcpConnection[id=5] closing connection http://*:8080-5,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt;  total=3 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.5 serving pages intermittently.</header>
    <date>Mon Apr 12 19:06:52 CEST 2010</date>
    <body>Ok, the output is definitely different than 4.0.5 and behaves differently than 3.0.22 (which is fine).  Is it safe to assume that the behavior in the snapshot will be the behavior in 4.0.6, or should we wait before updating our code base in anticipation of the next release? Thanks, Aaron http://caucho.com/download/resin-pro-4_0-snap.tar.gz ? TcpConnection[id=3]starting connection http://*:8080-3,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt;   total=3 Http[3] HEAD /some.jsp HTTP/1.1 Http[3] Remote-IP: an.ip.address:49390 Http[3] User-Agent: curl/7.19.7 http://somehost.com Http[3] Accept: */* Dispatch '/some.jsp' to http://www.somehost.com , http://www.somehost.com , http://www.somehost.com ]]]]]] SessionImpl[aaaeeoksxMIpE9HDBsAFs,] new SessionImpl[aaaeeoksxMIpE9HDBsAFs,] create session Http[3] HTTP/1.1 200 OK Http[3] Cache-Control: private Http[3] Set-Cookie: Http[3] Content-Type: text/html; charset=utf-8 Http[3] Content-Length: 378 Http[3] finish/keepalive Http[3] read timeout TcpConnection[id=3] closing connection http://*:8080-3,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt;   total=3 TcpConnection[id=5]starting connection http://*:8080-5,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt;   total=3 Http[5] read timeout TcpConnection[id=5] closing connection http://*:8080-5,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt;   total=3</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 4.0.5 serving pages intermittently.</header>
    <date>Mon Apr 12 22:27:42 CEST 2010</date>
    <body>http://caucho.com/download/resin-pro-4_0-snap.tar.gz ? The snapshot has been running for a couple days now without timing out. So that seems to be working in the snapshot. However, the original problem that caused me to start looking into this is still there. I can't get resin 4.x to reliably serve media files, e.g. an mp3 file. This worked fine in 3.1.x. The entry for mp3 in the app-default.xml is: Here is what the logs show when an attempt is made to access an mp3 file via a browser: TcpSocketLink[id=384]starting connection TcpConnection[id= http://*:8080-384,http://*:8080,ACCEPT ], total=2 Http[384] GET /media/AnMP3.mp3 HTTP/1.1 Http[384] Remote-IP: an.ip.address:46471 Http[384] Host: ahostname.com Http[384] User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_3; en-us) AppleWebKit/531.22.7 (KHTML, like Gecko) Version/4.0.5 Safari/531.22.7 Http[384] Cache-Control: max-age=0 Http[384] Accept: application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5 Http[384] Accept-Language: en-us Http[384] Accept-Encoding: gzip, deflate Http[384] Connection: keep-alive Dispatch '/media/AnMP3.mp3' to AccessLogFilterChain[ http://www.ahostname.com , next=CacheFilterChain[/media/AnMP3.mp3?null, next=WebAppFilterChain[ http://www.ahostname.com , next=ServletFilterChain[resin-file]]]] using cache: /media/AnMP3.mp3 Http[384] HTTP/1.1 304 Not Modified Http[384] ETag: "AaG2y8FQvm+" Http[384] Last-Modified: Sat, 08 Nov 2008 20:44:49 GMT Http[384] Accept-Ranges: bytes Http[384] Cache-Control: max-age=5 Http[384] Expires: Mon, 12 Apr 2010 20:07:43 GMT Http[384] finish/keepalive Http[384] GET /favicon.ico HTTP/1.1 Http[384] Remote-IP: an.ip.address:46471 Http[384] Host: ahostname.com Http[384] Referer: http://ahostname.com/media/AnMP3.mp3 Http[384] Cache-Control: max-age=0 Http[384] User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_3; en-us) AppleWebKit/531.22.7 (KHTML, like Gecko) Version/4.0.5 Safari/531.22.7 Http[384] Accept: */* Http[384] Accept-Language: en-us Http[384] Accept-Encoding: gzip, deflate Http[384] Connection: keep-alive Dispatch '/favicon.ico' to AccessLogFilterChain[ http://www.ahostname.com , next=CacheFilterChain[/favicon.ico?null, next=WebAppFilterChain[ http://www.ahostname.com , next=ServletFilterChain[resin-file]]]] using cache: /favicon.ico Http[384] HTTP/1.1 200 OK Http[384] ETag: "HbeaWcJZM5Q" Http[384] Last-Modified: Mon, 16 Jun 2008 19:05:25 GMT Http[384] Accept-Ranges: bytes Http[384] Cache-Control: max-age=5 Http[384] Expires: Mon, 12 Apr 2010 20:07:43 GMT Http[384] Content-Length: 3638 Http[384] write-set-offset(3894) Http[384] finish/keepalive 30 seconds later: TcpConnection[id= http://*:8080-384,http://*:8080,REQUEST_KEEPALIVE ] add keepalive (select fd=55) TcpConnection[id= http://*:8080-384,http://*:8080,REQUEST_KEEPALIVE ] wake keepalive (select fd=55) TcpSocketLink[id=384] keepalive (select) TcpSocketLink[id=384] closing connection TcpConnection[id= http://*:8080-384,http://*:8080,CLOSED ], total=4 A separate request, just for the header, using the curl -I command returns the correct Content-Type and Content-Length and logs that same information in the server log. But I don't see a reference to the Content-Type in the above request (which was from a browser), and the Content-Length is only 3638 bytes. Admittedly, I don't know exactly what resin is logging or why. Rob TcpConnection[id=3]starting connection http://*:8080-3,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt; total=3 Http[3] HEAD /some.jsp HTTP/1.1 Http[3] Remote-IP: an.ip.address:49390 Http[3] User-Agent: curl/7.19.7 http://somehost.com Http[3] Accept: */* Dispatch '/some.jsp' to http://www.somehost.com , http://www.somehost.com , http://www.somehost.com ]]]]]] SessionImpl[aaaeeoksxMIpE9HDBsAFs,] new SessionImpl[aaaeeoksxMIpE9HDBsAFs,] create session Http[3] HTTP/1.1 200 OK Http[3] Cache-Control: private Http[3] Set-Cookie: Http[3] Content-Type: text/html; charset=utf-8 Http[3] Content-Length: 378 Http[3] finish/keepalive Http[3] read timeout TcpConnection[id=3] closing connection http://*:8080-3,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt; total=3 TcpConnection[id=5]starting connection http://*:8080-5,http://*:8080,ACCEPT ], http://*:8080,ACCEPT%5D ,&amp;gt; total=3 Http[5] read timeout TcpConnection[id=5] closing connection http://*:8080-5,http://*:8080,CLOSED ], http://*:8080,CLOSED%5D ,&amp;gt; total=3 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Quercus/Resin 4.0.5 bugs</header>
    <date>Wed Apr 07 20:32:55 CEST 2010</date>
    <body>Hi. I haven't seen anything regarding a couple of bugs I've reported in Resin 4.0.5, in any channel. This list, the Quercus list, or Mantis. The bugs are http://bugs.caucho.com/view.php?id=3958 http://bugs.caucho.com/view.php?id=3959 Is there anything I can do to get some love for these? Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Can't launch 3.0.23, missing ResinBoot</header>
    <date>Mon Apr 05 23:08:41 CEST 2010</date>
    <body>I'm trying to resurrect my old installation of Resin, 3.0.23, but it's not launching for some reason. I can't figure out why it can't find a class it seems it should have: CLASSPATH is empty $  /usr/java/bin/java -jar /usr/local/resin/lib/resin.jar -conf /etc/resin/resin.conf -log-directory /var/log/resin -root-directory /var/www Exception in thread "main" java.lang.NoClassDefFoundError: com/caucho/server/boot/ResinBoot Caused by: java.lang.ClassNotFoundException: com.caucho.server.boot.ResinBoot at java.net.URLClassLoader$1.run(URLClassLoader.java:200) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:188) at java.lang.ClassLoader.loadClass(ClassLoader.java:306) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276) at java.lang.ClassLoader.loadClass(ClassLoader.java:251) at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) What am I doing wrong? I've been so immersed in getting 4.x to run, and it's been so long since I suffered through 3.0.x, I don't know what I'm doing wrong. TIA, Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can't launch 3.0.23, missing ResinBoot</header>
    <date>Mon Apr 05 23:44:26 CEST 2010</date>
    <body>Hi Rick, You need to run httpd.sh for Resin 3.0: http://caucho.com/resin-3.0/install/install.xtp Emil http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can't launch 3.0.23, missing ResinBoot</header>
    <date>Mon Apr 05 23:48:48 CEST 2010</date>
    <body>I used to run my installation with a pared-down script I had. Or so I thought. I'll try httpd.sh. http://caucho.com/resin-3.0/install/install.xtp http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Starting resin: failed!</header>
    <date>Fri Apr 02 22:53:05 CEST 2010</date>
    <body>Problem Solved , the pass of RESIN_HOME is incorrect. From: Abdalmonem Tharwat Galila Sent: 02 أبريل, 2010 10:03 م To: 'resin-interest@caucho.com' Cc: Mohamed SALAH MOSELHI Subject: FW: Starting resin: failed! I get this message marked with RED when I run resin , but when I run the following command I get this error marked with BLUE ( [r...@web ~]# service resin restart Stopping resin: failed! Starting resin: failed! [r...@web ~]# ) Apr 2, 2010 9:50:12 PM com.caucho.boot.WatchdogProcess run INFO: WatchdogProcess[Watchdog[],1] starting Resin Resin-3.1.10 (built Tue, 23 Feb 2010 02:57:09 PST) Copyright(c) 1998-2008 Caucho Technology.  All rights reserved. Using Resin(R) Open Source under the GNU Public License (GPL). See http://www.caucho.com for information on Resin Professional, including caching, clustering, JNI acceleration, and OpenSSL integration. Starting Resin on Fri, 02 Apr 2010 21:50:28 +0200 (EET) http://www.caucho.com for information and licensing. mode, Sun Microsystems Inc. http://localhost:8080 ] active http://localhost:8080/resin-admin ] active http://localhost:8080/resin-doc ] active</body>
  </mail>
  <mail>
    <header>[Resin-interest] FW: Starting resin: failed!</header>
    <date>Fri Apr 02 22:09:49 CEST 2010</date>
    <body>I get this message marked with RED when I run resin , but when I run the following command I get this error marked with BLUE ( [r...@web ~]# service resin restart Stopping resin: failed! Starting resin: failed! [r...@web ~]# ) Apr 2, 2010 9:50:12 PM com.caucho.boot.WatchdogProcess run INFO: WatchdogProcess[Watchdog[],1] starting Resin Resin-3.1.10 (built Tue, 23 Feb 2010 02:57:09 PST) Copyright(c) 1998-2008 Caucho Technology.  All rights reserved. Using Resin(R) Open Source under the GNU Public License (GPL). See http://www.caucho.com for information on Resin Professional, including caching, clustering, JNI acceleration, and OpenSSL integration. Starting Resin on Fri, 02 Apr 2010 21:50:28 +0200 (EET) http://www.caucho.com for information and licensing. mode, Sun Microsystems Inc. http://localhost:8080 ] active http://localhost:8080/resin-admin ] active http://localhost:8080/resin-doc ] active</body>
  </mail>
  <mail>
    <header>[Resin-interest] Unable to access jarfile ./../lib/resin.jar</header>
    <date>Fri Apr 02 17:42:08 CEST 2010</date>
    <body>I got this error when I install resin in my linux redhat machine [r...@web bin]# ./httpd.sh Unable to access jarfile ./../lib/resin.jar Can u suggest a solution. Thnx</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Unable to access jarfile ./../lib/resin.jar</header>
    <date>Fri Apr 02 18:45:01 CEST 2010</date>
    <body>Does the jar exist? Also, you can start Resin directly with resin-4.0.5&amp;gt; java -jar lib/resin.jar start The *.sh file should essentially just do the same. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Unable to access jarfile ./../lib/resin.jar</header>
    <date>Fri Apr 02 19:00:56 CEST 2010</date>
    <body>The file doesn't exist. -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: 02 أبريل, 2010 06:44 م To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Unable to access jarfile ./../lib/resin.jar Does the jar exist? Also, you can start Resin directly with resin-4.0.5&amp;gt; java -jar lib/resin.jar start The *.sh file should essentially just do the same. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Unable to access jarfile ./../lib/resin.jar</header>
    <date>Fri Apr 02 19:21:27 CEST 2010</date>
    <body>Then you need to reinstall Resin. If the lib/*.jars don't exist, then Resin isn't installed. -- Scott mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Sending log4j logs to the web apps log folder</header>
    <date>Thu Apr 01 13:47:28 CEST 2010</date>
    <body>If I have an entry in log4j.properties like this log4j.rootCategory=DEBUG, Console, R log4j.appender.R=org.apache.log4j.RollingFileAppender log4j.appender.R.File=log/mywebapp.log ... the logs from the webapp appear in $RESIN_HOME/log. Is there an entry I can use to get them to appear in the webapps WEB-INF/log without having to hard code the path please?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Sending log4j logs to the web apps log folder</header>
    <date>Fri Apr 02 21:16:14 CEST 2010</date>
    <body>I'm not as familiar with log4j as I should be. Is there a configuration to send the results to java.util.logging?  All of Resin's logging is built around the JDK's logging system. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Sending log4j logs to the web apps log folder</header>
    <date>Fri Apr 02 21:26:35 CEST 2010</date>
    <body>I use this class to do JDK-&amp;gt; commons-logging (which could either be modified to go directly to log4j or, just through CL and then to log4j)... /** * Writes JDK log messages to commons logging. * * @see " http://wiki.apache.org/myfaces/Trinidad_and_Common_Logging" */ public class JavaLoggingToCommonLoggingRedirector /** * Activates this feature. */ public static void activate() try // remove old handlers for (Handler handler : rootLogger.getHandlers()) // add our own // done, let's check it right away!!! Logger.getLogger(JavaLoggingToCommonLoggingRedirector.class.getName()).info( catch (Exception exc) LogFactory.getLog(JavaLoggingToCommonLoggingRedirector.class).error("activation public static void deactivate() protected static class JDKLogHandler extends Handler private Log getLog(String logName) if (log == null) @Override public void publish(LogRecord record) if (level == Level.SEVERE) else if (level == Level.WARNING) else if (level == Level.INFO) else if (level == Level.CONFIG) else @Override public void flush() // nothing to do @Override public void close() // nothing to do http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Sending log4j logs to the web apps log folder</header>
    <date>Fri Apr 02 21:44:47 CEST 2010</date>
    <body>I think he needs the other way around, from log4j to java.util.logging (?) By the way, in Resin 4.0.6 you'll be able to do the same thing with I'm not sure setting the Logger level to "all" would be a good idea, though, because Logger.isLoggable() would always return true, which would harm performance somewhat. (The "&amp;lt;system&amp;gt;" is just to ensure it's configured in the system classloader context, since &amp;lt;resin&amp;gt; is a child of the system loader. And at some point I need to look into providing an adapter to log4j handlers so you can configure log4j handlers as a java.util.logging handler directly in Resin.) -- Scott http://wiki.apache.org/myfaces/Trinidad_and_Common_Logging" http://log.info mailto:f...@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Sending log4j logs to the web apps log folder</header>
    <date>Fri Apr 02 21:58:59 CEST 2010</date>
    <body>I'm pretty sure that it's possible to configure any possible combination of input loggers and output destinations by mixing and matching the various components of SLF4J. To get log4j output to java.util.logging, you could use the log4j-&amp;gt;slf4j bridge, then use the slf4j output module that dumps to java.util.logging.  There's no configuration, you just pick which jar files you include in your project.  In this case it would be: slf4j-X.X.X.jar (the base jar) log4j-over-slf4j-X.X.X.jar (the bridge) slf4j-jdk14-X.X.X.jar (the output module) Just add these jars to your project (leave out the log4j jar) and I'm pretty sure that you'll find all log4j output sent to the resin logger. Jeff http://wiki.apache.org/myfaces/Trinidad_and_Common_Logging" http://log.info mailto:f...@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Sending log4j logs to the web apps log folder</header>
    <date>Fri Apr 02 22:14:06 CEST 2010</date>
    <body>Consider this another vote for a possible switch to using SLF4j as the Resin logging interface.  It's a very thin API that is an extremely powerful aggregator of log information. (*Chris*) http://wiki.apache.org/myfaces/Trinidad_and_Common_Logging" http://log.info mailto:f...@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Sending log4j logs to the web apps log folder</header>
    <date>Sat Apr 03 00:42:30 CEST 2010</date>
    <body>Why would you want Resin to log through slf4j?  I actually think this would make a really big mess out of our apps, because now the slf4j jars would be provided for us and potentially cause conflicts. Resin provides a concrete logging system (in this case, j.u.l).  We write our code using slf4j and by using the slf4j-jdk14.jar adapter, everything just works.  This seems pretty straightforward.  I'd hate to have to configure the slf4j logging in the container. Jeff http://wiki.apache.org/myfaces/Trinidad_and_Common_Logging" http://log.info mailto:f...@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] jsp:param behavior change from 3.0.22 to 4.0.5</header>
    <date>Wed Mar 31 21:47:05 CEST 2010</date>
    <body>We are experiencing a fundamental change in how data is being passed as a jsp:param between 3.0.22 and 4.0.5.  We need to know if this change is intentional as it has a work-heavy impact on converting our code base over which currently relies on the behavior of 3.0.x. It appears that a call to jsp:include was automatically URL decoding any strings that were passed in, and that that behavior has changed. I have included source to two files that will demonstrate the behavior change (in case it's not intentional).  And here are the results of running it: ---- on resin-pro-3.0.22 ---- URL encoded before pass to jsp:include: Test%3A+1+%3C+2+and+width%3D%22100%25%22+and+ampersand%3D%26. Test: 1 &amp;lt; 2 and width="100ïand ampersand= Here it is as seen inside of test-process.jsp: Test: 1 &amp;lt; 2 and width="100%" and ampersand=&amp;amp;. ---- on resin-pro-4.0.5 ---- URL encoded before pass to jsp:include: Test%3A+1+%3C+2+and+width%3D%22100%25%22+and+ampersand%3D%26. Test: 1 &amp;lt; 2 and width="100ïand ampersand= Here it is as seen inside of test-process.jsp: Test:+1+&amp;lt;+2+and+width="100%"+and+ampersand=&amp;amp;. http://java.sun.com/jsp/jstl/core" http://www.sendthisfile.com/taglib/httputil" http://java.sun.com/jsp/jstl/core" Thanks for your thoughts on this, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] jsp:param behavior change from 3.0.22 to 4.0.5</header>
    <date>Wed Mar 31 21:49:16 CEST 2010</date>
    <body>Oh, you will have to swap out the httputil with whatever you use to URLEncode strings in order to test it. Thanks, Aaron We are experiencing a fundamental change in how data is being passed as a jsp:param between 3.0.22 and 4.0.5.  We need to know if this change is intentional as it has a work-heavy impact on converting our code base over which currently relies on the behavior of 3.0.x. It appears that a call to jsp:include was automatically URL decoding any strings that were passed in, and that that behavior has changed. I have included source to two files that will demonstrate the behavior change (in case it's not intentional).  And here are the results of running it: ---- on resin-pro-3.0.22 ---- URL encoded before pass to jsp:include: Test%3A+1+%3C+2+and+width%3D%22100%25%22+and+ampersand%3D%26. Test: 1&amp;lt;  2 and width="100ïand ampersand= Here it is as seen inside of test-process.jsp: Test: 1&amp;lt;  2 and width="100%" and ampersand=&amp;amp;. ---- on resin-pro-4.0.5 ---- URL encoded before pass to jsp:include: Test%3A+1+%3C+2+and+width%3D%22100%25%22+and+ampersand%3D%26. Test: 1&amp;lt;  2 and width="100ïand ampersand= Here it is as seen inside of test-process.jsp: Test:+1+&amp;lt;+2+and+width="100%"+and+ampersand=&amp;amp;. http://java.sun.com/jsp/jstl/core" http://www.sendthisfile.com/taglib/httputil" http://java.sun.com/jsp/jstl/core" Thanks for your thoughts on this, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] jsp:param behavior change from 3.0.22 to 4.0.5</header>
    <date>Wed Mar 31 21:54:37 CEST 2010</date>
    <body>I've added a bug report for this at http://bugs.caucho.com/view.php?id=3976 . I'll need to check, but there's a good chance this change was made to conform to either the JSP or JSTL spec/TCK. -- Scott http://java.sun.com/jsp/jstl/core" http://www.sendthisfile.com/taglib/httputil" http://java.sun.com/jsp/jstl/core" http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] jsp:param behavior change from 3.0.22 to 4.0.5</header>
    <date>Wed Mar 31 23:27:46 CEST 2010</date>
    <body>Ok, thanks, we will hold off on pushing forward on upgrading until we get some idea as to whether this is an issue or not. Aaron http://bugs.caucho.com/view.php?id=3976 . http://java.sun.com/jsp/jstl/core" http://www.sendthisfile.com/taglib/httputil" http://java.sun.com/jsp/jstl/core"</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] jsp:param behavior change from 3.0.22 to 4.0.5</header>
    <date>Fri Apr 02 21:19:27 CEST 2010</date>
    <body>I checked with the spec and the reference implementation: you're not supposed to escape content inside a jsp:param. The container is responsible for any encoding. However, Resin does have a bug in its own encoding for 4.0.5 (fixed for 4.0.6.) So you'll need to wait until at least 4.0.6 for the fix. (4.0.6 is expected next week. It's a short ipv6 release.) -- Scott http://bugs.caucho.com/view.php?id=3976 . http://java.sun.com/jsp/jstl/core" http://www.sendthisfile.com/taglib/httputil" http://java.sun.com/jsp/jstl/core" http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] gzipfilter encoding problem for web.xml declared	error pages</header>
    <date>Tue Mar 30 22:02:39 CEST 2010</date>
    <body>Hi We are using resin 2.1.17 (yes i know we need to upgrade!) and are starting to implement role based access control using role declaration on Struts actions. I have declared a 403 error page in web.xml and am experiencing a problem which I have tracked down to interaction with the gzipfilter because everything works beautifully with the gzipfilter disabled, but with the filter enabled I am getting: Content Encoding Error The page you are trying to view cannot be shown because it uses an invalid or unsupported form of compression. in firefox and equivalent errors in other browsers. I think that the response is being encoded twice by the time the browser sees it. Has anyone come across this and figured out a way round it? Is it a known issue with 2.1.17 gzipfilter that is resolved in later versions of resin (if so what was the core issue)? Is it something to do with the web.xml declared error page being a redirect that shouldn't be gzipped in the first place (just guessing here)? Any suggestions would be welcome Thanks Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] gzipfilter encoding problem for web.xml declared error pages</header>
    <date>Wed Mar 31 13:52:50 CEST 2010</date>
    <body>Further to this is there any way to look at the response while in the Gzipfilter and prevent gzipping if the response is 403 (or any other error code for that matter)? I think resin 2.1.17 is servlet 2.2 which has not got a response.getStatus() method, but given that you can specify the error page for given error codes in web.xml, there must be some way that the container is able to figure out the status. I was wondering if I could tweak the GZIPFilter class to use the same means of interrogating the response status. If all else fails I can just disable gzipfiltering till we are able to upgrade but I would prefer not to. Thanks Alan -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin-4.0.5 Watchdog on Shutdown</header>
    <date>Tue Mar 30 18:02:10 CEST 2010</date>
    <body>When we try to stop the resin-4.0.5 processes using: $JAVA_HOME/bin/java \ -server \ -Djava.util.logging.manager=com.caucho.log.LogManagerImpl \ -Djava.security.egd=/dev/urandom \ $* Where we pass in "start" to start it and "stop" to stop the server.  The main resin java process stops, but the watchdog does not.  Is that expected behavior (and thus a change from 3.0.x)?  If so, how do we stop the watchdog java process?  I believe Rick Mann reported the same issue.  Also we are running uncompiled, if that matters. Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-4.0.5 Watchdog on Shutdown</header>
    <date>Tue Mar 30 20:51:08 CEST 2010</date>
    <body>Hi Aaron, This is the correct behavior. In 4.0.x, we changed the watchdog to be a long-lived process.  If you'd like to shut it down, along with all running resin instances, use the "shutdown" command.  We're in the process of updating the documentation this week to reflect the change. Thanks, Emil http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-4.0.5 Watchdog on Shutdown</header>
    <date>Tue Mar 30 20:53:39 CEST 2010</date>
    <body>Ah! Thanks. So, does that mean it's safe to leave the watchdog running, and just issue a "start" again? I seem to recall Resin getting mad that someone already had the port when I did that. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-4.0.5 Watchdog on Shutdown</header>
    <date>Wed Mar 31 00:26:48 CEST 2010</date>
    <body>That's correct: you can just leave the watchdog running and issue a start. Let us know if you run into the issue with port conflicts again. It should only be a configuration issue. Emil http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-4.0.5 Watchdog on Shutdown</header>
    <date>Wed Mar 31 00:38:09 CEST 2010</date>
    <body>Thanks! http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-4.0.5 Watchdog on Shutdown</header>
    <date>Tue Mar 30 21:51:49 CEST 2010</date>
    <body>Perfect, thanks! Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-4.0.5 Watchdog on Shutdown</header>
    <date>Wed Mar 31 20:50:35 CEST 2010</date>
    <body>I submitted a bug on this new behavior when running Resin 4.x on Windows http://bugs.caucho.com/view.php?id=3943 The problem is that when you issue a "stop" command to the resin service either via the sc (service controller) command, e.g. "sc \\serverName stop resin" or via "net stop resin", you can't then issue a "start" command to start up resin because Windows still thinks the service is running. We use this process for doing deployments or just general restarts from a central server. I haven't tested this scenario, but another problem with this new behavior might be that if the watchdog doesn't know that a resin stop was specifically requested via the service controller, it might try to restart resin and that would be bad. Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-4.0.5 Watchdog on Shutdown</header>
    <date>Tue Mar 30 20:52:14 CEST 2010</date>
    <body>I'm seeing that same behavior. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-4.0.5 Watchdog on Shutdown</header>
    <date>Tue Mar 30 21:05:18 CEST 2010</date>
    <body>To shutdown the watchdog, use "shutdown". "start/stop" only starts and stops the Resin instance. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] PermGen problems installing Confluence</header>
    <date>Mon Mar 29 04:03:29 CEST 2010</date>
    <body>I'm trying to install Confluence 3.2 on my Resin-4.0.5 setup, and it seems to go well until the step where it builds the database. Then it gets PermGen out of memory errors. I'm installing the expanded WAR, using a JDBC datasource against a MySQL database (everything else runs like this). I also tried increasing the MaxPermGen to 256 m. No luck. Any ideas? Has anyone gotten this to work? -- Rick WARNING (com.caucho.jsp.JspManager) java.lang.OutOfMemoryError: PermGen space INFO (com.caucho.server.webapp.ErrorPageManager) com.caucho.jsp.JspParseException: PermGen space at com.caucho.jsp.JspCompilerInstance.compile(JspCompilerInstance.java:463) at com.caucho.jsp.JspManager.compile(JspManager.java:261) at com.caucho.jsp.JspManager.createPage(JspManager.java:190) at com.caucho.jsp.JspManager.createPage(JspManager.java:169) at com.caucho.jsp.PageManager.getPage(PageManager.java:336) at com.caucho.jsp.PageManager.getPage(PageManager.java:266) at com.caucho.jsp.PageManager.getPage(PageManager.java:249) at com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) at com.caucho.jsp.QServlet.getPage(QServlet.java:210) at com.caucho.server.dispatch.PageFilterChain.compilePage(PageFilterChain.java:238) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:145) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:283) at com.caucho.server.webapp.RequestDispatcherImpl.error(RequestDispatcherImpl.java:135) at com.caucho.server.webapp.ErrorPageManager.sendServletErrorImpl(ErrorPageManager.java:423) at com.caucho.server.webapp.ErrorPageManager.sendServletError(ErrorPageManager.java:183) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:185) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:775) at com.caucho.server.connection.TcpConnection.dispatchRequest(TcpConnection.java:600) at com.caucho.server.connection.TcpConnection.handleRequestsImpl(TcpConnection.java:566) at com.caucho.server.connection.TcpConnection.handleRequests(TcpConnection.java:519) at com.caucho.server.connection.TcpConnection$AcceptTask.doTask(TcpConnection.java:1100) at com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1037) at com.caucho.server.connection.TcpConnection$AcceptTask.run(TcpConnection.java:1068) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: java.lang.OutOfMemoryError: PermGen space</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] PermGen problems installing Confluence</header>
    <date>Mon Mar 29 10:02:02 CEST 2010</date>
    <body>How have you increased the MaxPermGen of your resin install? Just ot make sure you have not increased the size of the watchdog instead of the "real" instance, which happened to me at the beginning :). Confluence has so many JSPs and other internal classes that it needs quite a chunk of memory for that. The node where we are running a JIRA &amp;amp; Confluence instance has these settings inside resin.xml (Resin 3.1.5 and Confluence 2.8.1 though): S! D. Rick Mann escribió: -- ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) Web Services Centre for Information and Technology Balearic Islands University (SPAIN) -------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] PermGen problems installing Confluence</header>
    <date>Mon Mar 29 10:04:21 CEST 2010</date>
    <body>Thanks for the suggestion, Daniel. I did in fact try, just like that. Set it to 256m. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] PermGen problems installing Confluence</header>
    <date>Mon Mar 29 14:12:23 CEST 2010</date>
    <body>I thought I had read it somewhere but I have not been able to find it in the current documentation, so it could be an empiric measure, but in any case I'm pretty sure 256m was not enough, at least for JIRA+confluence in the same container instance. S! D. Rick Mann escribió:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] PermGen problems installing Confluence</header>
    <date>Mon Mar 29 19:13:37 CEST 2010</date>
    <body>But you just said you're running it using 192m. Did I miss something? I only have Confluence (so far), and a handful of other webapps. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] PermGen problems installing Confluence</header>
    <date>Tue Mar 30 12:13:17 CEST 2010</date>
    <body>Doh! :) I'm sorry, I thought you meant 256m heap. Yes, 256m PermGen should be more than enough, unless it has turned into a memory hog in the last version. Have you checked, with JConsole for example, that the setting is really being taken into account? Just to discard if it is a configuration or runtime issue. S! D. S'està citant Rick Mann &amp;lt;rm...@latencyzero.com&amp;gt;: ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] PermGen problems installing Confluence</header>
    <date>Tue Mar 30 19:14:52 CEST 2010</date>
    <body>That's a great suggestion, if only I knew how to use JConsole to do that ;-) http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] PermGen problems installing Confluence</header>
    <date>Tue Mar 30 22:24:17 CEST 2010</date>
    <body>Scott, are you guys able to run Confluence on 4.0.5? http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] PermGen problems installing Confluence</header>
    <date>Wed Mar 31 00:28:57 CEST 2010</date>
    <body>I haven't checked. If it's just PermGen, though, you should be able to just expand it. You can look in /resin-admin in the JMX section, by the way, to double check the setting, as well as checking the current PermGen size. (and/or checking the number of classes loaded.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] PermGen problems installing Confluence</header>
    <date>Wed Mar 31 00:36:34 CEST 2010</date>
    <body>Thanks! http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] debian lenny 32 bits or 64 bits</header>
    <date>Sat Mar 27 10:42:40 CET 2010</date>
    <body>Hello If I can fully install a server, I'm still not expert in system administration and hardware tuning... My host propose debian lenny in 32 bits or 64 bits. As long as java can be 64 I suppose that debian lenny 64 bits is better (from a performance point of view).  And it permits using more than 4Gb memory... Am I right ? Thanks for your advice -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] debian lenny 32 bits or 64 bits</header>
    <date>Sat Mar 27 11:13:02 CET 2010</date>
    <body>Riccardo Cohen schrieb am 27.03.2010 um 10:41:26 (+0100): Yes, more than 4 GB of memory is the key point about 64 bits. -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>[Resin-interest] Caucho Forums are broken</header>
    <date>Sat Mar 27 08:01:15 CET 2010</date>
    <body>I can't view threads, or log in (can't find a login link). Trying to register, I can't get past the agreement; no matter what I check, it says I refuse to agree. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caucho Forums are broken</header>
    <date>Sat Mar 27 08:02:18 CET 2010</date>
    <body>I suspect it's similar to the stuff broken in Quercus in 4.0.5. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Hibernate transactions</header>
    <date>Sat Mar 27 02:11:10 CET 2010</date>
    <body>Resin 4.0.5 - following http://wiki.caucho.com/Hibernate works fine, but I'd like to take it to the next level and persist something. Adding ... to the end of the CourseServlet.java file throws up java.lang.IllegalStateException: Container-manager @PersistenceContext may not use getTransaction. What have I missed please?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate transactions</header>
    <date>Sat Mar 27 04:27:48 CET 2010</date>
    <body>Also, the link at the very bottom of that page gets a 500 error: http://www.caucho.com/resin/examples/amber-basic/index.xtp http://wiki.caucho.com/Hibernate works fine, but http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate transactions</header>
    <date>Mon Mar 29 14:12:27 CEST 2010</date>
    <body>http://wiki.caucho.com/Hibernate works fine, but http://maillist.caucho.com/mailman/listinfo/resin-interest Could anyone tell me if this worked in an earlier vrsion of resin please? Its the first time I've tried hibernate with resin, and I can't tell if its something I'm doing (or not doing!) here or related to an issue in 4.0.5.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate transactions</header>
    <date>Mon Mar 29 17:32:58 CEST 2010</date>
    <body>Not a version issue. An entitymanager should not get transaction by itself. Transaction in a modern java appserver should be XA or JTA transaciton. An entitymanager will detect if there is a JTA transaction existing and will join it if there is an open one. You need to use an injected UserTransaction instance to do the transaction stuff and leave the entitymanager do db stuff and the entitymanager will participate in the transaction. -Wesley http://wiki.caucho.com/Hibernate works fine, but http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate transactions</header>
    <date>Mon Mar 29 18:49:48 CEST 2010</date>
    <body>Also, if you absolutely need to use the EntityTransaction, you'd need to grab the EntityManagerFactory, not the EntityManager. The EntityManager is tied into the container's transaction manager. The UserTransaction is registered with CanDI, by the way, so it's easy to grab: ... -- Scott http://wiki.caucho.com/Hibernate works fine, but http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate transactions</header>
    <date>Tue Mar 30 00:03:17 CEST 2010</date>
    <body>Not a version issue. An entitymanager should not get transaction by itself. Transaction in a modern java appserver should be XA or JTA transaciton. An entitymanager will detect if there is a JTA transaction existing and will join it if there is an open one. You need to use an injected UserTransaction instance to do the transaction stuff and leave the entitymanager do db stuff and the entitymanager will participate in the transaction. Also, if you absolutely need to use the EntityTransaction, you'd need to grab the EntityManagerFactory, not the EntityManager. The EntityManager is tied into the container's transaction manager. The UserTransaction is registered with CanDI, by the way, so it's easy to grab: ... -- Scott Ok thanks, I'm now sure the problem was me working from old Hibernate docs. But I'm still struggling. Referring back to the example: http://wiki.caucho.com/Hibernate http://wiki.caucho.com/Hibernate resin 4.0.5. I added the UserTransaction and tried to make a change and commit but saw no difference in the db. Since the courses were listed I'm assuming everyting else is ok. What have I missed please? Heres the servlet in full: public class CourseServlet extends HttpServlet // Resin IoC will inject this @PersistenceContext(unitName="example") @Inject public void service(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException CourseBean updateCourse = _manager.find(CourseBean.class, new Resin 4.0.5 - following http://wiki.caucho.com/Hibernate works fine, but I'd like to take it to the next level and persist something. Adding ... to the end of the CourseServlet.java file throws up java.lang.IllegalStateException: Container-manager @PersistenceContext may not use getTransaction. What have I missed please?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate transactions</header>
    <date>Tue Mar 30 07:43:19 CEST 2010</date>
    <body>CourseBean updateCourse = _manager.find(CourseBean.class, new will work. -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate transactions</header>
    <date>Tue Mar 30 09:28:26 CEST 2010</date>
    <body>Thanks, but theres clearly something basic wrong here as that change made no difference. If I add to persistence.xml I see in the console Hibernate: select coursebean0_.id as id0_0_, coursebean0_.course as course0_0_, coursebean0_.teacher as teacher0_0_ from basic_courses coursebean0_ where coursebean0_.id=? Hibernate: select coursebean0_.id as id0_0_, coursebean0_.course as course0_0_, coursebean0_.teacher as teacher0_0_ from basic_courses coursebean0_ where coursebean0_.id=? But no attempt at a write. Single stepping the code proves the transaction is being executed. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate transactions</header>
    <date>Tue Mar 30 10:34:35 CEST 2010</date>
    <body>To make set method auto translated into a UPDATE clause, the entitymanager should be opened after a transaction begins. @PersistenceUnit(unitName="example") CourseBean updateCourse = em.find(CourseBean.class, new</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate transactions</header>
    <date>Tue Mar 30 11:00:35 CEST 2010</date>
    <body>Sincere thanks again, hopefully this will all help others coming across it in the future. If I understood you correctly I made those changes and now get example.CourseServlet.emf : @PersistenceContext field must be assignable from EntityManager. Heres the new full servlet: public class CourseServlet extends HttpServlet // Resin IoC will inject this @PersistenceContext(unitName="example") @Inject public void service(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException CourseBean updateCourse = em.find(CourseBean.class, new</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate transactions</header>
    <date>Tue Mar 30 18:55:10 CEST 2010</date>
    <body>Yes. One minor problem: @PersistentContext should be @PersistentUnit. That's exactly what I used to do in the past three years. I controlled the entitymanager and transaction by my own code in a JPA wrapper class, and gained great performance advantage over automatic transaction handling like @TransactionAttribute. I never inject a @PersistentContext or never use a container provided EntityManager. I use ThreadLocal to maintain every EntityManager instance. -Wesley http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate transactions</header>
    <date>Tue Mar 30 19:05:01 CEST 2010</date>
    <body>Why would calling UserTransaction in your code be faster? Essentially, all @TransactionAttribute does is call UserTransaction.begin() and commit(). (Any extra overhead should be minimal, especially compared to the actual transaction.) -- Scott mailto:starga...@blueyonder.co.uk mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate transactions</header>
    <date>Tue Mar 30 19:24:29 CEST 2010</date>
    <body>I don't know about the finer details, but looking back on this now it's fixed it seems the example is really only half done. A fuller one showing not just how to read the db but how to update it would be more real-world and less frustrating for those making the switch.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate transactions</header>
    <date>Tue Mar 30 19:41:48 CEST 2010</date>
    <body>I will not call UserTransaction.begin() when all db operations are SELECT. I create a EntityManager from emf to do SELECT stuff with no transaction at all. When I detected there're some update/delete operations, I'll do this: 1. close the former created EntityManager if there is one (for precedent SELECT op) 2. call UserTransaction.begin() 3. create a new EntityManager 4. do left jobs 5. commint() on success or rollback() on failure. *. finally (always) close the em (bounded to current thread) and set current ThreadLocal&amp;lt;EntityManger&amp;gt; to null. This worked for me in the last three years in several heavy loaded websites. -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate transactions</header>
    <date>Tue Mar 30 20:05:40 CEST 2010</date>
    <body>More to mention about MDBs (Message Driven Beans): 1. Always use @TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED) on public void onMessage(Message message). because the impl of Resin MDBs has severe reenter synchronization problem. If I start a transaction before onMessage() being called there would be several transactions tried to crossing commit in unexpected manner. 2. Inject a ExecutorService to do the real stuff. @Inject @Override @TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED) RealStuffRunnable runnable = webBeans.getReference(RealStuffRunnable // set some properties of runnable ... // run it in a new thread 3. Use @TransactionAttribute on RealStuffRunnable.run() Thus my real stuff will not suffer from the reenter and crossing commit. Any better solutions? -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate transactions</header>
    <date>Tue Mar 30 19:20:08 CEST 2010</date>
    <body>Doh! Great, works now. Thanks for your help!</body>
  </mail>
  <mail>
    <header>[Resin-interest] minor issue in the security overview documentation</header>
    <date>Fri Mar 26 17:30:09 CET 2010</date>
    <body>http://caucho.com/resin-4.0/admin/security-overview.xtp public void initialize(Subject subject, CallbackHandler handler, Map sharedState, Map options) I don't think that _options is correct. =) jon</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin-pro-4.0.5: JSSE + cipher-suites</header>
    <date>Thu Mar 25 20:35:11 CET 2010</date>
    <body>Is there any documentation for using the cipher-suites tag?  Instead of explicitly listing ciphers we do want, is there a way to list cipher-suites you want to exclude?  Google isn't helping me find such an animal, so I am guess that it's not possible? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-pro-4.0.5: JSSE + cipher-suites</header>
    <date>Thu Mar 25 22:01:13 CET 2010</date>
    <body>Hi Aaron, Not at the moment, but it's certainly possible.  I filed a feature bug for it: http://bugs.caucho.com/view.php?id=3970 Thanks, Emil http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-pro-4.0.5: JSSE + cipher-suites</header>
    <date>Thu Mar 25 22:56:25 CET 2010</date>
    <body>Perfect.  I was able to work out what seems to be a reasonable list, if anybody here needs it for PCI compliance.  It's probably not perfect, so if anyone sees any issues with it, please let me know: Aaron http://bugs.caucho.com/view.php?id=3970</body>
  </mail>
  <mail>
    <header>[Resin-interest] minor problem in 4.0.5 release notes</header>
    <date>Thu Mar 25 16:37:59 CET 2010</date>
    <body>http://caucho.com/resin-4.0/changes/resin-4.0.5.xtp Under "CDI and logging integration", it says ConsoleHandler and then gives an example for SocketHandler. jon</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] minor problem in 4.0.5 release notes</header>
    <date>Thu Mar 25 17:47:16 CET 2010</date>
    <body>http://caucho.com/resin-4.0/changes/resin-4.0.5.xtp Thanks. After starting the example, I realized ConsoleHandler was boring. :) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.5 Buffer Commit Point</header>
    <date>Thu Mar 25 15:50:13 CET 2010</date>
    <body>We take some fairly lengthy queries (lengthy row based on row count), and push the data into hashmaps in JSTL pages.  After that sometimes we evaluate the hashmap and sometimes have to redirect the request to another page.  In 3.0.23 it works with no problems.  In 4.0.5 we get "java.lang.IllegalStateException: Can't sendRedirect() after data has committed to the client." The reason being, that the for loop is causing a ton of white space to be sent to be buffered up, and at some point a buffer size limit has been hit with only whitespace, causing Resin to then send the HTTP headers and commit the request. So in the for loop I can do this to "fix" the problem: .... The question is, is there a setting in the resin.xml where I can change the buffer size globally, or do we have to go to modify all JSPs that potentially have this problem?  Was the default commit point changed between 3.0.x and 4.0.x, or some other architecture change, as we have never seen this until now?* * Thanks, Aaron* *</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.5 Buffer Commit Point</header>
    <date>Thu Mar 25 16:03:10 CET 2010</date>
    <body>This is why you don't put application logic into the view layer. Before you 'push' your data into the view, figure out if you want to do the redirect or not. jon http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.5 Buffer Commit Point</header>
    <date>Thu Mar 25 16:19:36 CET 2010</date>
    <body>It's not in the view layer.  We segregate our controller JSPs from our view JSPs.  So you will change your argument to say that we should not use JSPs at the control layer, and of course _most_ of our control logic is in pure Java, but there are cases where having our controller logic written in JSTL (and separated from other model/view JSP pages) is a substantial advantage for us. So the question still stands, is there a global way to change the commit point so we don't have to constantly reset a connection to clear the buffer? Aaron This is why you don't put application logic into the view layer. Before you 'push' your data into the view, figure out if you want to do the redirect or not. jon On Thu, Mar 25, 2010 at 7:49 AM, Aaron Freeman mailto:aaron.free...@layerz.com We take some fairly lengthy queries (lengthy row based on row count), and push the data into hashmaps in JSTL pages.  After that sometimes we evaluate the hashmap and sometimes have to redirect the request to another page.  In 3.0.23 it works with no problems.  In 4.0.5 we get "java.lang.IllegalStateException: Can't sendRedirect() after data has committed to the client." The reason being, that the for loop is causing a ton of white space to be sent to be buffered up, and at some point a buffer size limit has been hit with only whitespace, causing Resin to then send the HTTP headers and commit the request. So in the for loop I can do this to "fix" the problem: .... The question is, is there a setting in the resin.xml where I can change the buffer size globally, or do we have to go to modify all JSPs that potentially have this problem?  Was the default commit point changed between 3.0.x and 4.0.x, or some other architecture change, as we have never seen this until now?* * Thanks, Aaron* *</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.5 Buffer Commit Point</header>
    <date>Thu Mar 25 16:32:30 CET 2010</date>
    <body>I don't mind using JSP's for some of the (separated) control logic. For example, you have a form action: Inside of it, it looks like this: http://code.google.com/p/subetha/source/browse/trunk/web/email_confirm_submit.jsp That said, look at that code. The logic for determining the next page to redirect to is either in the &amp;lt;t:action&amp;gt; or within the JSTL within the email_confirm_submit.jsp. Generally, it is nice to have it in JSTL because a UI person can change the location of the final page without having to modify java code to do so. The point being that by the time you get to the view layer (ie: a jsp that doesn't have _submit.jsp at the end), you don't do a redirect. You are depending on what is effectively a bug in Resin that has now been fixed in a newer version. You should modify your code to change that dependency because you can (and should) be doing it differently. jon http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.5 Buffer Commit Point</header>
    <date>Thu Mar 25 16:56:22 CET 2010</date>
    <body>I don't mind using JSP's for some of the (separated) control logic. For example, you have a form action: Inside of it, it looks like this: http://code.google.com/p/subetha/source/browse/trunk/web/email_confirm_submit.jsp That said, look at that code. The logic for determining the next page to redirect to is either in the &amp;lt;t:action&amp;gt; or within the JSTL within the email_confirm_submit.jsp. Generally, it is nice to have it in JSTL because a UI person can change the location of the final page without having to modify java code to do so. The point being that by the time you get to the view layer (ie: a jsp that doesn't have _submit.jsp at the end), you don't do a redirect. You are depending on what is effectively a bug in Resin that has now been fixed in a newer version. You should modify your code to change that dependency because you can (and should) be doing it differently. jon On Thu, Mar 25, 2010 at 8:18 AM, Aaron Freeman mailto:aaron.free...@layerz.com It's not in the view layer.  We segregate our controller JSPs from our view JSPs.  So you will change your argument to say that we should not use JSPs at the control layer, and of course _most_ of our control logic is in pure Java, but there are cases where having our controller logic written in JSTL (and separated from other model/view JSP pages) is a substantial advantage for us. So the question still stands, is there a global way to change the commit point so we don't have to constantly reset a connection to clear the buffer? Aaron This is why you don't put application logic into the view layer. Before you 'push' your data into the view, figure out if you want to do the redirect or not. jon On Thu, Mar 25, 2010 at 7:49 AM, Aaron Freeman mailto:aaron.free...@layerz.com We take some fairly lengthy queries (lengthy row based on row count), and push the data into hashmaps in JSTL pages.  After that sometimes we evaluate the hashmap and sometimes have to redirect the request to another page.  In 3.0.23 it works with no problems.  In 4.0.5 we get "java.lang.IllegalStateException: Can't sendRedirect() after data has committed to the client." The reason being, that the for loop is causing a ton of white space to be sent to be buffered up, and at some point a buffer size limit has been hit with only whitespace, causing Resin to then send the HTTP headers and commit the request. So in the for loop I can do this to "fix" the problem: .... The question is, is there a setting in the resin.xml where I can change the buffer size globally, or do we have to go to modify all JSPs that potentially have this problem?  Was the default commit point changed between 3.0.x and 4.0.x, or some other architecture change, as we have never seen this until now?* * Thanks, Aaron* * So the code example, from a style stand-point, is almost spot on with how have laid our model/view/controller JSPs.  I don't know what a t: library, is but I am sure its some custom way to call your model code. We do a &amp;lt;jsp:include&amp;gt; instead, but it's stylistically the same -- the model is separated from your example controller. In a JSP-based controller we are parsing the results of the model data into a hashmap and then processing the elements in the hashmap to determine if we need to redirect before we call the view.  So our controller looks like: .... So I am not quite tracking with you on what we need to differently in our controller?  We are trying to do a redirect before we get to the view layer, as you suggest, and as your code is suggesting. Right or wrong, this is a style we have used in several places, and instead of modifying a lot of code it would be much easier if we can simply change the buffer size commit point.  We definitely didn't intend to exploit a bug, we are just trying to follow easy to maintain good MVC practices and ran into this hiccup. Fortunately through all of our testing this is the only show stopper for us from rolling out to the newest version of Resin 4.0.5 with our existing code base. Thanks for you help, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.5 Buffer Commit Point</header>
    <date>Thu Mar 25 17:10:31 CET 2010</date>
    <body>The 'problem' is that you are processing your data in your view controller JSP which is not really where it belongs. You should just move that code up a layer into Java. The t:action comes from using http://tagonist.tigris.org/ . Tagonist (or something like it that allows you to execute java code as an 'action') is very easy to integrate into your app and will solve the problem without relying on esoteric (and brittle) buffer sizes. jon So the code example, from a style stand-point, is almost spot on with how http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin-Pro-4.0.5 Admin</header>
    <date>Wed Mar 24 17:08:59 CET 2010</date>
    <body>Since we are upgrading from pro-3.0.23 to pro-4.0.5, we thought we would take advantage of the resin-admin stuff.  However the docs aren't clear on how that's supposed to happen.  This page says nothing about what to install: http://caucho.com/resin-4.0/admin/resin-admin.xtp And this page seems to elude that I have to install another product? I could have sworn we had this working in 4.0.0 without installing Quercus. http://caucho.com/resin-4.0/admin/resin-admin-console.xtp "Since /resin-admin is just a web-app implemented with Quercus/PHP, enabling it is just adding an appropriate &amp;lt;web-app&amp;gt; tag." Hopefully this is just a documentation error?  If so how do we get the admin running?  If not, is it really worth installing and working through a whole new package and all the configuration overhead and learning curve that comes with it? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-Pro-4.0.5 Admin</header>
    <date>Wed Mar 24 19:22:49 CET 2010</date>
    <body>http://caucho.com/resin-4.0/admin/resin-admin.xtp http://caucho.com/resin-4.0/admin/resin-admin-console.xtp Quercus is part of Resin 4.x. You get it "for free." -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-Pro-4.0.5 Admin</header>
    <date>Wed Mar 24 20:01:49 CET 2010</date>
    <body>It is part of resin 4.x.  Make sure you have the following in your resin.xml: If you want to use a hostname other than localhost to access the UI, then you will have to set resin_admin_external to true. I have been looking at it since I am upgrading from 3.0 to 4 too.  It looks very good.  Be sure to check it out.  It is nice that a lot of monitoring stuff that we have had to add on top of resin is now part of it. Bill http://caucho.com/resin-4.0/admin/resin-admin.xtp http://caucho.com/resin-4.0/admin/resin-admin-console.xtp http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-Pro-4.0.5 Admin</header>
    <date>Wed Mar 24 21:24:06 CET 2010</date>
    <body>It is part of resin 4.x.  Make sure you have the following in your resin.xml: If you want to use a hostname other than localhost to access the UI, then you will have to set resin_admin_external to true. I have been looking at it since I am upgrading from 3.0 to 4 too.  It looks very good.  Be sure to check it out.  It is nice that a lot of monitoring stuff that we have had to add on top of resin is now part of it. Bill On Wed, Mar 24, 2010 at 2:15 PM, Rick Mann &amp;lt;rm...@latencyzero.com mailto:rm...@latencyzero.com we would aren't clear what to http://caucho.com/resin-4.0/admin/resin-admin.xtp product? I http://caucho.com/resin-4.0/admin/resin-admin-console.xtp Quercus is part of Resin 4.x. You get it "for free." -- Rick Ahhh ... that's slightly different than the documentation.  It says /php/admin and yours says /doc/admin.  Let me try that. Scott, you might want to have the documentation updated if that's the difference. Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-Pro-4.0.5 Admin</header>
    <date>Wed Mar 24 22:02:02 CET 2010</date>
    <body>Thanks. I just updated it. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-Pro-4.0.5 Admin</header>
    <date>Wed Mar 24 21:13:52 CET 2010</date>
    <body>http://caucho.com/resin-4.0/admin/resin-admin.xtp http://caucho.com/resin-4.0/admin/resin-admin-console.xtp Odd, when I untar resin-pro-4.0.5 and look in the php/admin directory from the example block on the second link above: The php directory doesn't exist.  Let me hunt around a bit now that I know it should be there somewhere. Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-Pro-4.0.5 Admin</header>
    <date>Wed Mar 24 21:18:41 CET 2010</date>
    <body>location may have been under a php subdir, but it doesn't appear to be there under any of the 4.x builds that I've done in the past. -Jamie -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Wednesday, March 24, 2010 3:12 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Resin-Pro-4.0.5 Admin http://caucho.com/resin-4.0/admin/resin-admin.xtp http://caucho.com/resin-4.0/admin/resin-admin-console.xtp Odd, when I untar resin-pro-4.0.5 and look in the php/admin directory from the example block on the second link above: The php directory doesn't exist.  Let me hunt around a bit now that I know it should be there somewhere. Aaron</body>
  </mail>
  <mail>
    <header>[Resin-interest] Quercus doesn't implement 'array_walk' correctly	and ignores 'arg_separator.input' option</header>
    <date>Wed Mar 24 07:50:54 CET 2010</date>
    <body>Hi, I wrote two messages about the subject to forum.caucho.com but my messages haven't been published. I try here. Please, forgive me if the subject is out of interest. FIRST ISSUE =========== I found that Quercus 4.0.5 doesn't implement 'array_walk' rightly when the function call contains the second and the third parameters. Here a simple test case: function test_alter(&amp;amp;$item1, $key, $prefix) function test_print($item2, $key) The output should be: Before ...: d =&amp;gt; lemon a =&amp;gt; orange b =&amp;gt; banana c =&amp;gt; apple ... and after: d =&amp;gt; fruit:lemon a =&amp;gt; fruit:orange b =&amp;gt; fruit:banana c =&amp;gt; fruit:apple The actual output is:Before ...: =&amp;gt; lemon =&amp;gt; orange =&amp;gt; banana =&amp;gt; apple /usr/local/resin/webapps/aw1.php:17: Warning: required argument missing [array_walk] /usr/local/resin/webapps/aw1.php:17: Warning: required argument missing [array_walk] /usr/local/resin/webapps/aw1.php:17: Warning: required argument missing [array_walk] /usr/local/resin/webapps/aw1.php:17: Warning: required argument missing [array_walk] ... and after: =&amp;gt; :lemon =&amp;gt; :orange =&amp;gt; :banana =&amp;gt; :apple If array_walk contains two parameters, the second one is ignored silently. If array_walk contains three parameters, a warning is raised. I filled a Quercus bug: http://bugs.caucho.com/view.php?id=3961 Any ideas about possible workarounds? SECOND ISSUE ============ To separate arguments of a query string, any character specified by "arg_separator.input" configuration option should be valid. I think that Quercus ignores "arg_separator.input" value and uses only '&amp;amp;' to calculate $_GET values. I tried to set "arg_separator.input" both in web.xml &amp;lt;php-ini&amp;gt; and by ini_set() instruction. A simple test-case: and call it from the browser in a way similar to this: http://localhost/php/args.php?1=first&amp;amp;2=second;3=third [^] The output should be: ---- Get parameters: Array ( [1] =&amp;gt; first [2] =&amp;gt; second [3] =&amp;gt; third ) --- The actual output is: Get parameters: Array ( [1] =&amp;gt; first [2] =&amp;gt; second;3=third ) We are using Resin-Pro for 10 years and we would like to switch off the apache front-end used only for two PHP applications... The two applications cannot be modified for security reasons. Thanks in advance for any hints/suggestions. Ciao, Roberto</body>
  </mail>
  <mail>
    <header>[Resin-interest] What is CanDI?</header>
    <date>Tue Mar 23 20:01:56 CET 2010</date>
    <body>Sorry for the lame question, but I only ever heard about CanDI from the Resin feature lists. Does CanDI replace Spring's configuration stuff? -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] What is CanDI?</header>
    <date>Tue Mar 23 21:52:26 CET 2010</date>
    <body>CanDI is Resin's implementation of JSR-299 (Java Contexts and Dependency Injection). It's basically the JavaEE 6 standard for the next generation of Spring-like configuration. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] CanDI unable to inject @Stateless</header>
    <date>Tue Mar 23 18:53:43 CET 2010</date>
    <body>In Resin 4.0.4 I follow this step : http://www.caucho.com/resin/doc/resin-ejb.xtp#Hello , World //... methods... @Stateless @Inject ... The dao can be injected to Servlet WITHOUT a @Stateless annotation , but when add @Stateless , it throws : com.caucho.config.ConfigException: foo.HelloServlet.personService: javax.enterprise.inject.UnsatisfiedResolutionException: Can't find a bean for 'interface foo.PersonService' because no beans implementing that class have been registered with the injection manager InjectManager[web-app: http://test.smallufo.com/testapp-1 ]. at com.caucho.config.ConfigException.create(ConfigException.java:102) at com.caucho.config.ConfigException.create(ConfigException.java:125) at com.caucho.config.inject.InjectionTargetImpl$FieldInjectProgram.inject(InjectionTargetImpl.java:809) at com.caucho.config.inject.InjectionTargetImpl.inject(InjectionTargetImpl.java:266) at com.caucho.server.dispatch.ServletConfigImpl.createServletImpl(ServletConfigImpl.java:1260) at com.caucho.server.dispatch.ServletConfigImpl.createServlet(ServletConfigImpl.java:1142) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:98) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:780) at com.caucho.server.connection.TcpConnection.dispatchRequest(TcpConnection.java:600) at com.caucho.server.connection.TcpConnection.handleRequestsImpl(TcpConnection.java:566) at com.caucho.server.connection.TcpConnection.handleRequests(TcpConnection.java:519) at com.caucho.server.connection.TcpConnection$AcceptTask.doTask(TcpConnection.java:1100) at com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1037) at com.caucho.server.connection.TcpConnection$AcceptTask.run(TcpConnection.java:1068) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: javax.enterprise.inject.UnsatisfiedResolutionException: Can't find a bean for 'interface foo.PersonService' because no beans implementing that class have been registered with the injection manager InjectManager[web-app: http://test.smallufo.com/testapp-1 ]. at com.caucho.config.inject.InjectManager.unsatisfiedException(InjectManager.java:1389) at com.caucho.config.inject.InjectManager.resolveByInjectionPoint(InjectManager.java:1545) at com.caucho.config.inject.InjectManager.resolveByInjectionPoint(InjectManager.java:1523) at com.caucho.config.inject.InjectManager.getInjectableReference(InjectManager.java:1476) at com.caucho.config.inject.InjectionTargetImpl$FieldInjectProgram.inject(InjectionTargetImpl.java:805) ... 16 more Http[2] HTTP/1.1 500 Internal Server Error</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI unable to inject @Stateless</header>
    <date>Tue Mar 23 19:13:13 CET 2010</date>
    <body>Can you show your resin-web.xml? The first thing that leaps out at me (and may be okay, but looks odd) is: "com.caucho.config.ConfigException: *foo.HelloServlet.personService*: javax.enterprise.inject.UnsatisfiedResolutionException: Can't find a bean for 'interface *foo.PersonService*'. Aaron In Resin 4.0.4 I follow this step : http://www.caucho.com/resin/doc/resin-ejb.xtp#Hello , World http://www.caucho.com/resin/doc/resin-ejb.xtp#Hello,%20World //... methods... @Stateless @Inject ... The dao can be injected to Servlet WITHOUT a @Stateless annotation , but when add @Stateless , it throws : com.caucho.config.ConfigException: foo.HelloServlet.personService: javax.enterprise.inject.UnsatisfiedResolutionException: Can't find a bean for 'interface foo.PersonService' because no beans implementing that class have been registered with the injection manager InjectManager[web-app: http://test.smallufo.com/testapp-1 ]. at com.caucho.config.ConfigException.create(ConfigException.java:102) at com.caucho.config.ConfigException.create(ConfigException.java:125) at com.caucho.config.inject.InjectionTargetImpl$FieldInjectProgram.inject(InjectionTargetImpl.java:809) at com.caucho.config.inject.InjectionTargetImpl.inject(InjectionTargetImpl.java:266) at com.caucho.server.dispatch.ServletConfigImpl.createServletImpl(ServletConfigImpl.java:1260) at com.caucho.server.dispatch.ServletConfigImpl.createServlet(ServletConfigImpl.java:1142) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:98) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:780) at com.caucho.server.connection.TcpConnection.dispatchRequest(TcpConnection.java:600) at com.caucho.server.connection.TcpConnection.handleRequestsImpl(TcpConnection.java:566) at com.caucho.server.connection.TcpConnection.handleRequests(TcpConnection.java:519) at com.caucho.server.connection.TcpConnection$AcceptTask.doTask(TcpConnection.java:1100) at com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1037) at com.caucho.server.connection.TcpConnection$AcceptTask.run(TcpConnection.java:1068) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: javax.enterprise.inject.UnsatisfiedResolutionException: Can't find a bean for 'interface foo.PersonService' because no beans implementing that class have been registered with the injection manager InjectManager[web-app: http://test.smallufo.com/testapp-1 ]. at com.caucho.config.inject.InjectManager.unsatisfiedException(InjectManager.java:1389) at com.caucho.config.inject.InjectManager.resolveByInjectionPoint(InjectManager.java:1545) at com.caucho.config.inject.InjectManager.resolveByInjectionPoint(InjectManager.java:1523) at com.caucho.config.inject.InjectManager.getInjectableReference(InjectManager.java:1476) at com.caucho.config.inject.InjectionTargetImpl$FieldInjectProgram.inject(InjectionTargetImpl.java:805) ... 16 more Http[2] HTTP/1.1 500 Internal Server Error</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI unable to inject @Stateless</header>
    <date>Tue Mar 23 19:23:07 CET 2010</date>
    <body>I only define &amp;lt;database&amp;gt; tags there : http://caucho.com/ns/resin"</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI unable to inject @Stateless</header>
    <date>Tue Mar 23 19:29:52 CET 2010</date>
    <body>http://www.caucho.com/resin/doc/resin-ejb.xtp#Hello , World http://www.caucho.com/resin/doc/resin-ejb.xtp#Hello,%20World Do you have a META-INF/ejb-jar.xml? We're currently requiring that file as a marker for classpath scanning (although it appears that we should always scan for those classes.) - Scott http://test.smallufo.com/testapp-1 ]. http://test.smallufo.com/testapp-1 ]. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI unable to inject @Stateless</header>
    <date>Wed Mar 24 03:00:22 CET 2010</date>
    <body>Mmm... There is no ejb-jar.xml in META-INF/ After adding an empty ejb-jar.xml , it still doesn't work. No matter 4.0.4 or 4.0.5 http://www.caucho.com/resin/doc/resin-ejb.xtp#Hello , World http://www.caucho.com/resin/doc/resin-ejb.xtp#Hello,%20World http://test.smallufo.com/testapp-1 ]. http://test.smallufo.com/testapp-1 ]. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI unable to inject @Stateless</header>
    <date>Wed Mar 24 03:07:56 CET 2010</date>
    <body>BTW I tried a lot of ejb-jar.xml settings , but non works... Is there any working example for this simple scenario ?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI unable to inject @Stateless</header>
    <date>Wed Mar 24 18:09:11 CET 2010</date>
    <body>mailto:small...@gmail.com Thanks. Can you add an &amp;lt;ejb-server/&amp;gt; to your resin.xml (inside the That's a Resin bug because the &amp;lt;ejb-server/&amp;gt; wasn't supposed to be required any more. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI unable to inject @Stateless</header>
    <date>Wed Mar 24 19:03:21 CET 2010</date>
    <body>Thank you , it works ! @EJB / @Inject both works Now I can inject into Servlet with @EJB and @Inject , though I don't know the difference , the console dump seems nothing different. BTW , what is the populated JNDI name of the Stateless Bean ? in my code : @Stateless(mappedName="ejb/personService") @Local(PersonService.class) public class PersonServiceImpl implements PersonService , Serializable But I cannot find this EJB in the InitialContext (under wicket) , it throws : Caused by: java.lang.RuntimeException: Could not locate ejb of class [[interface data.PersonService]] and name [[ejb/personService]] at org.wicketstuff.javaee.JavaEEBeanLocator.lookupEjb(JavaEEBeanLocator.java:131) at org.wicketstuff.javaee.JavaEEBeanLocator.locateProxyTarget(JavaEEBeanLocator.java:109) at org.apache.wicket.proxy.LazyInitProxyFactory$JdkHandler.invoke(LazyInitProxyFactory.java:412) at org.apache.wicket.proxy.$Proxy51.getPerson(Unknown Source) at wicket.CurrentPage.&amp;lt;init&amp;gt;(CurrentPage.java:33) ... 31 more Caused by: javax.naming.NameNotFoundException: java:comp/env/ejb/personService at com.caucho.naming.ContextImpl.lookupImpl(ContextImpl.java:205) at com.caucho.naming.ContextImpl.lookup(ContextImpl.java:157) at javax.naming.InitialContext.lookup(InitialContext.java:392) at org.wicketstuff.javaee.JavaEEBeanLocator.lookupEjb(JavaEEBeanLocator.java:124) ... 35 more Where goes wrong ? Isn't the mappedName="ejb/personService" hooked into "java:comp/env" ? Why resin (4.0.4) throws NameNotFoundException ?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI unable to inject @Stateless</header>
    <date>Wed Mar 24 19:19:30 CET 2010</date>
    <body>mailto:f...@caucho.com Well, you can think of @EJB as the obsolete JavaEE injection method, although @EJB does have JNDI side-effects. This is kind of complicated. Technically (according to the spec), the @Stateless does not register with JNDI at all - that's a Resin-specific feature. The JNDI registration occurs either with an &amp;lt;ejb-ref&amp;gt; or a @EJB annotation somewhere. But that's a part of the spec that we haven't completely tested yet. We have an open bug at http://bugs.caucho.com/view.php?id=3964 to restore Resin's old behavior for backward compatibility. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI unable to inject @Stateless</header>
    <date>Thu Mar 25 04:28:49 CET 2010</date>
    <body>Thanks , but I tried some settings in 'ejb-jar.xml' ,  but still cannot get the Stateless bean from JNDI , Here are some of my settings : BeanType[com.caucho.config.types.DescriptionGroupConfig]: conflicting attribute for 'xxx' between SetterAttribute NameNotFoundException: java:comp/env/ejb/personService EjbLocalRef[ejb/personService, null, null] init NameNotFoundException: java:comp/env/ejb/personService Not working com.caucho.config.ConfigException: 'data.PersonService' must extend EJBHome. Is there any valid settings I can refer to (I've searched a lot ) ? mailto:f...@caucho.com http://bugs.caucho.com/view.php?id=3964 to restore http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI unable to inject @Stateless</header>
    <date>Fri Mar 26 22:09:02 CET 2010</date>
    <body>As a followup, the old-style JNDI registration does exist in Resin 4.0.5. It requires an ejb-server in the &amp;lt;cluster&amp;gt; which looks like: ... Basic &amp;lt;ejb-ref&amp;gt; support will be added to 4.0.6, although the full support won't be ready until 4.0.8. -- Scott http://www.caucho.com/resin/doc/resin-ejb.xtp#Hello , World http://www.caucho.com/resin/doc/resin-ejb.xtp#Hello,%20World http://test.smallufo.com/testapp-1 ]. http://test.smallufo.com/testapp-1 ]. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI unable to inject @Stateless</header>
    <date>Wed Mar 24 00:22:10 CET 2010</date>
    <body>Hi! I have the problem with CanDI's tag @Startup in 4.0.4. I upgrade to 4.0.5 and now it works. So I suppose you may try 4.0.5. May be it fix? ;) В Wed, 24 Mar 2010 01:52:17 +0800 smallufo &amp;lt;small...@gmail.com&amp;gt; пишет: http://www.caucho.com/resin/doc/resin-ejb.xtp#Hello , World http://test.smallufo.com/testapp-1 ]. http://test.smallufo.com/testapp-1 ]. at -- Виталий Бердинских UR6LAD 73 &amp;amp; 72!</body>
  </mail>
  <mail>
    <header>[Resin-interest] Is Wicket-for-Resin no longer supported ?</header>
    <date>Tue Mar 23 10:59:38 CET 2010</date>
    <body>I follow this doc : http://www.caucho.com/resin/doc/resin-ioc.xtp#Injection pattern But cannot compile : http://old.nabble.com/-4.0.3--CanDI-in-Wicket-:-InjectManager.injectObject ()---td27494543.html#a27494543 I then grabbed the source code , after doing some cleaning , I cannot find WebBeansContainer , It seems it is InjectManager , but it still cannot compile ... Is it no longer maintained ? Any valid documentation ? Thanks a lot.</body>
  </mail>
  <mail>
    <header>[Resin-interest] [Amber] NoSuchMethodException :	__caucho_super_get_id()</header>
    <date>Tue Mar 23 04:21:46 CET 2010</date>
    <body>public class Person implements Serializable @Id @GeneratedValue(strategy = GenerationType.AUTO) @Column(name = "id") @OneToMany(targetEntity=PersonHouse.class , mappedBy="person" , cascade=CascadeType.ALL , fetch=FetchType.LAZY ) @MapKey(name="house") public class PersonHouse implements Serializable @Id @GeneratedValue(strategy = GenerationType.AUTO) @Column(name = "id") @ManyToOne @JoinColumn(name="personId" , insertable=false , updatable=false) The simple @OneToMany bi-directional Map works fine in Hibernate , but has such error with Amber : com.caucho.amber.AmberRuntimeException: java.lang.NoSuchMethodException: foo.PersonHouse.this.__caucho_super_get_id()() at com.caucho.amber.AmberRuntimeException.create(AmberRuntimeException.java:70) at foo.Person.__caucho_get_houseMap(Person.java) at foo.Person.getHouseMap(Person.java:232) at foo.HelloServlet.doGet(HelloServlet.java:46) at javax.servlet.http.HttpServlet.service(HttpServlet.java:119) at javax.servlet.http.HttpServlet.service(HttpServlet.java:96) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:780) at com.caucho.server.connection.TcpConnection.dispatchRequest(TcpConnection.java:600) at com.caucho.server.connection.TcpConnection.handleRequestsImpl(TcpConnection.java:566) at com.caucho.server.connection.TcpConnection.handleRequests(TcpConnection.java:519) at com.caucho.server.connection.TcpConnection$AcceptTask.doTask(TcpConnection.java:1100) at com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1037) at com.caucho.server.connection.TcpConnection$AcceptTask.run(TcpConnection.java:1068) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: java.lang.NoSuchMethodException: foo.PersonHouse.this.__caucho_super_get_id()() at java.lang.Class.getDeclaredMethod(Class.java:1937) ... 18 more BTW , targetEntity is skippable in Hibernate , but seems indispensable in Amber . Is it imperative in JPA spec ? Resin 4.0.4</body>
  </mail>
  <mail>
    <header>[Resin-interest] Questions about building the 4.0.5 distro</header>
    <date>Tue Mar 23 01:31:44 CET 2010</date>
    <body>Hi guys, I built 4.0.5 (and 4.0.4, but it's working better) from the distro using the old build instructions (build-in-place, so to speak). Do you think that would make a difference in the functionality I'm currently seeing? I want to build it into a directory /usr/local/resin/versions/resin-4.0.5, and then point a symlink to that, and run via the symlink. Will that work? I feel like in the past, some autoconf-based projects weren't happy if I ran using a directory path different from the one passed to --prefix. Also, is there a way to prevent it from installing files into any other directories but the one I specify with --prefix? I don't want to risk it overwriting my existing config files. TIA, Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] JSP Tag and PHP Issues, Resin 4.0.4 vs 4.0.5</header>
    <date>Mon Mar 22 20:56:22 CET 2010</date>
    <body>So, I have conflicting results with 4.0.4 and 4.0.5: 4.0.4 ----- JSP Tags don't work: http://bugs.caucho.com/view.php?id=3956 PHP errors parsing certain PHP constructs Seems to run reliably (however, can't stop server reliably, need to kill it) 4.0.5 ----- JSP Tags work correctly PHP parsing error still in place WordPress 2.9.2 post titles don't appear anywhere (admin or blog) Very unreliable, stops responding after short period (also can't stop it reliably) Right now, the most critical thing for me will be to get the JSP tag issue resolved, but obviously not at the expense of a reliable server. I might have to write Java-based implementations of those tags to get them to work under 4.0.4. Any additional help on tracking down the stability and WordPress title issues in 4.0.5 would be much appreciated, and I'm happy to pay (within my budget) for this support. Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.5 production/stable?</header>
    <date>Mon Mar 22 20:00:02 CET 2010</date>
    <body>I just noticed that resin-pro-3.1.10 no longer says "latest stable", or whatever it used to say.  Is 4.0.5 now considered stable and production ready? Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.5 production/stable?</header>
    <date>Mon Mar 22 20:08:44 CET 2010</date>
    <body>I'm sure having a lot of problems with 4.0.5 that I don't have with 4.0.4 (which has different problems). I haven't been able to determine if I'm just doing something wrong, but it seems flaky, at best. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.5 production/stable?</header>
    <date>Mon Mar 22 20:11:52 CET 2010</date>
    <body>I noticed that, which was another reason I thought I should ask before going nuts on 4.0.5. Aaron</body>
  </mail>
  <mail>
    <header>[Resin-interest] Bug in Resin 4.0.x (and 3.1.x)?</header>
    <date>Mon Mar 22 17:31:29 CET 2010</date>
    <body>This page says that I can obfuscate a password in the resin.xml file, but doesn't appear to work.  It works in 3.0.23, but stopped working in 3.1.x and 4.0.x.  We use this feature, not to protect the password on the server, but to make sure it isn't accidentally transmitted in clear-text by mistake when sharing our resin.xml files with consultants, via email, etc: http://www.caucho.com/resin/admin/database-pool-config.xtp#Protecting%20the%20database%20password Here is the error I am getting.  I have tried in resin-pro-4.0.2,.4, and .5, and resin-pro-3.1.9: /opt/server/conf/resin.xml:44: resin:type="com.encryption.Password" is an unexpected attribute in &amp;lt;password&amp;gt;. Any thoughts? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bug in Resin 4.0.x (and 3.1.x)?</header>
    <date>Mon Mar 22 19:12:19 CET 2010</date>
    <body>http://www.caucho.com/resin/admin/database-pool-config.xtp#Protecting%20the%20database%20password Thanks. That's a documentation issue. The resin:type has been replaced by a more general CanDI syntax, which looks like: In other words, the custom class now has its own XML tag instead of the resin:type syntax. (Unfortunately, it was not possible for us to keep the old resin:type for backwards compatibility, because that would have complicated the key underlying configuration too much.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bug in Resin 4.0.x (and 3.1.x)?</header>
    <date>Mon Mar 22 20:10:50 CET 2010</date>
    <body>http://www.caucho.com/resin/admin/database-pool-config.xtp#Protecting%20the%20database%20password Ok, so I thought what you were saying is that this: is a drop-in replacement for this: but apparently I think you are trying to tell me that we need to change our Java source code somehow, based on getting this when trying to start Resin: /opt/server/conf/resin.xml:47: unable to create attribute SetterAttribute[public void com.caucho.vfs.JsseSSLFactory.setPassword(java.lang.String)] for com.caucho.vfs.jssesslfact...@6779e6 and ] So is there a link that you can point me to in order to give me a clue in what I need to do to modify our source to handle this new syntax? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bug in Resin 4.0.x (and 3.1.x)?</header>
    <date>Mon Mar 22 20:30:23 CET 2010</date>
    <body>Yes, it should be a direct replacement. (The internal implementation is a bit tricky, though.) ] Let me check. I tested the replacement against &amp;lt;database&amp;gt;. I'll see why it's causing trouble with jsse. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bug in Resin 4.0.x (and 3.1.x)?</header>
    <date>Mon Mar 22 20:55:48 CET 2010</date>
    <body>] Ok, here is the full http block I am using, in case its out of date for some reason (I am using the block directly from our working 3.0.23 implementation verbatim, with your recommended tweak): - Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bug in Resin 4.0.x (and 3.1.x)?</header>
    <date>Mon Mar 22 21:45:06 CET 2010</date>
    <body>What I've found is that if the XML namespace for &amp;lt;encryption:*&amp;gt; isn't right, i.e. not "urn:java:...", you'll get that cryptic error message. If it's right, it's working for me. I'm working on first getting a better error message, and second seeing if there are other failure cases. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bug in Resin 4.0.x (and 3.1.x)?</header>
    <date>Mon Mar 22 22:55:45 CET 2010</date>
    <body>Man, I don't see how I am blowing it then.  Does this look right: Where the [full package, not including the class] would be something like "java.util" and the class name would be something like "Hashmap" with an uppercase first character like classes normally are capitalized? If so, I am a bit baffled. Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bug in Resin 4.0.x (and 3.1.x)?</header>
    <date>Tue Mar 23 00:10:41 CET 2010</date>
    <body>That looks fine. I'll have a snapshot in a day or two with the improved error messages. That may give a better idea of the issue. You could also try removing the whitespace around the should work.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bug in Resin 4.0.x (and 3.1.x)?</header>
    <date>Mon May 17 17:46:36 CEST 2010</date>
    <body>Scott, Still struggling with the issue where we cannot encrypt passwords in our resin.xml file.  As you have indicated, there is now a better clue: C:\opt\. . .\conf\admin.xml:41: unable to create attribute SetterAttribute[public void com.caucho.vfs.JsseSSLFactory.setPassword(java.lang.String)] for com.caucho.vfs.jssesslfact...@79f03d7 and ] Thanks, Aaron O Man, I don't see how I am blowing it then.  Does this look right: Where the [full package, not including the class] would be something like "java.util" and the class name would be something like "Hashmap" with an uppercase first character like classes normally are capitalized? If so, I am a bit baffled. That looks fine. I'll have a snapshot in a day or two with the improved error messages. That may give a better idea of the issue. You could also try removing the whitespace around the should work.) -- Scott Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bug in Resin 4.0.x (and 3.1.x)?</header>
    <date>Mon May 17 18:02:48 CEST 2010</date>
    <body>Oooh, I should have mentioned .. this exact syntax works with the database connection, but NOT for the SSL setup.  So the class exists, Resin can find it, and it works great -- but only for database connections and not within the JSSE configuration node. Thanks, Aaron Scott, Still struggling with the issue where we cannot encrypt passwords in our resin.xml file.  As you have indicated, there is now a better clue: C:\opt\. . .\conf\admin.xml:41: unable to create attribute SetterAttribute[public void com.caucho.vfs.JsseSSLFactory.setPassword(java.lang.String)] for com.caucho.vfs.jssesslfact...@79f03d7 and ] Thanks, Aaron O Man, I don't see how I am blowing it then.  Does this look right: Where the [full package, not including the class] would be something like "java.util" and the class name would be something like "Hashmap" with an uppercase first character like classes normally are capitalized? If so, I am a bit baffled. That looks fine. I'll have a snapshot in a day or two with the improved error messages. That may give a better idea of the issue. You could also try removing the whitespace around the should work.) -- Scott Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bug in Resin 4.0.x (and 3.1.x)?</header>
    <date>Fri May 28 20:56:18 CEST 2010</date>
    <body>Sorry to bump this question, but any idea if this will be fixed in 4.0.7 or 4.0.8 (or if's even a bug or something I am doing wrong)? Thanks, Aaron Scott, Still struggling with the issue where we cannot encrypt passwords in our resin.xml file.  As you have indicated, there is now a better clue: C:\opt\. . .\conf\admin.xml:41: unable to create attribute SetterAttribute[public void com.caucho.vfs.JsseSSLFactory.setPassword(java.lang.String)] for com.caucho.vfs.jssesslfact...@79f03d7 and ] Thanks, Aaron O Man, I don't see how I am blowing it then.  Does this look right: Where the [full package, not including the class] would be something like "java.util" and the class name would be something like "Hashmap" with an uppercase first character like classes normally are capitalized? If so, I am a bit baffled. That looks fine. I'll have a snapshot in a day or two with the improved error messages. That may give a better idea of the issue. You could also try removing the whitespace around the should work.) -- Scott Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bug in Resin 4.0.x (and 3.1.x)?</header>
    <date>Fri May 28 21:15:40 CEST 2010</date>
    <body>I've added is as a bug report at http://bugs.caucho.com/view.php?id=4054 . Since your syntax is correct for 4.0.x, this looks like a Resin bug. It should be possible to fix in 4.0.8. -- Scott ] http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bug in Resin 4.0.x (and 3.1.x)?</header>
    <date>Fri May 28 21:41:45 CEST 2010</date>
    <body>Awesome -- also note that the exact same syntax DOES work in place of the &amp;lt;password&amp;gt; in the Aaron http://bugs.caucho.com/view.php?id=4054 . ] http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] More Quercus problems (Resin 4.0.4)</header>
    <date>Sun Mar 21 21:23:43 CET 2010</date>
    <body>While Resin 4.0.5 choked on this particular PHP construct everywhere, 4.0.4 chokes on it a bit differently only here (so far). Resin 4.0.5 would get a StackOverflowError trying to parse it, 4.0.4 gets this java.lang.UnsupportedOperationException. The PHP causing the error is: foreach ( (array) current($wp_filter[$tag]) as $the_ ) if ( !is_null($the_['function']) ) call_user_func_array($the_['function'], In previous investigations, I determined that it is the while clause that triggers the problem. WARNING (com.caucho.server.webapp.ErrorPageManager) java.lang.UnsupportedOperationException: com.caucho.quercus.env.ArgGetValue at com.caucho.quercus.env.Value.serialize(Value.java:2759) at com.caucho.quercus.env.Value.serialize(Value.java:2741) at com.caucho.quercus.env.ArrayValue.serialize(ArrayValue.java:1294) at com.caucho.quercus.lib.VariableModule.serialize(VariableModule.java:631) at sun.reflect.GeneratedMethodAccessor151.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at com.caucho.quercus.module.StaticFunction.invoke(StaticFunction.java:135) at com.caucho.quercus.env.JavaInvoker.callMethod(JavaInvoker.java:727) at com.caucho.quercus.env.JavaInvoker.call(JavaInvoker.java:641) at com.caucho.quercus.expr.CallExpr.evalImpl(CallExpr.java:238) at com.caucho.quercus.expr.CallExpr.eval(CallExpr.java:151) at com.caucho.quercus.expr.Expr.evalValue(Expr.java:469) at com.caucho.quercus.statement.ReturnStatement.execute(ReturnStatement.java:69) at com.caucho.quercus.statement.IfStatement.execute(IfStatement.java:81) at com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) at com.caucho.quercus.program.Function.callImpl(Function.java:431) at com.caucho.quercus.program.Function.call(Function.java:349) at com.caucho.quercus.expr.CallExpr.evalImpl(CallExpr.java:236) at com.caucho.quercus.expr.CallExpr.evalCopy(CallExpr.java:164) at com.caucho.quercus.expr.BinaryAssignExpr.eval(BinaryAssignExpr.java:88) at com.caucho.quercus.expr.Expr.evalTop(Expr.java:523) at com.caucho.quercus.statement.ExprStatement.execute(ExprStatement.java:67) at com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) at com.caucho.quercus.program.Function.callImpl(Function.java:431) at com.caucho.quercus.program.Function.call(Function.java:349) at com.caucho.quercus.expr.CallExpr.evalImpl(CallExpr.java:238) at com.caucho.quercus.expr.CallExpr.eval(CallExpr.java:151) at com.caucho.quercus.expr.Expr.evalTop(Expr.java:523) at com.caucho.quercus.statement.ExprStatement.execute(ExprStatement.java:67) at com.caucho.quercus.statement.IfStatement.execute(IfStatement.java:84) at com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) at com.caucho.quercus.statement.IfStatement.execute(IfStatement.java:81) at com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) at com.caucho.quercus.program.Function.callImpl(Function.java:431) at com.caucho.quercus.program.Function.call(Function.java:349) at com.caucho.quercus.env.CallbackFunction.call(CallbackFunction.java:171) at com.caucho.quercus.lib.FunctionModule.call_user_func_array(FunctionModule.java:101) at sun.reflect.GeneratedMethodAccessor86.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at com.caucho.quercus.module.StaticFunction.invoke(StaticFunction.java:135) at com.caucho.quercus.env.JavaInvoker.callMethod(JavaInvoker.java:727) at com.caucho.quercus.env.JavaInvoker.call(JavaInvoker.java:641) at com.caucho.quercus.expr.CallExpr.evalImpl(CallExpr.java:238) at com.caucho.quercus.expr.CallExpr.eval(CallExpr.java:151) at com.caucho.quercus.expr.Expr.evalTop(Expr.java:523) at com.caucho.quercus.statement.ExprStatement.execute(ExprStatement.java:67) at com.caucho.quercus.statement.IfStatement.execute(IfStatement.java:81) at com.caucho.quercus.statement.ForeachStatement.execute(ForeachStatement.java:103) at com.caucho.quercus.statement.DoStatement.execute(DoStatement.java:73) at com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) at com.caucho.quercus.program.Function.callImpl(Function.java:431) at com.caucho.quercus.program.Function.call(Function.java:349) at com.caucho.quercus.expr.CallExpr.evalImpl(CallExpr.java:238) at com.caucho.quercus.expr.CallExpr.eval(CallExpr.java:151) at com.caucho.quercus.expr.Expr.evalTop(Expr.java:523) at com.caucho.quercus.statement.ExprStatement.execute(ExprStatement.java:67) at com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) at com.caucho.quercus.statement.IfStatement.execute(IfStatement.java:81) at com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) at com.caucho.quercus.statement.IfStatement.execute(IfStatement.java:81) at com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) at com.caucho.quercus.program.QuercusProgram.execute(QuercusProgram.java:396) at com.caucho.quercus.page.InterpretedPage.execute(InterpretedPage.java:89) at com.caucho.quercus.env.Env.executePage(Env.java:3839) at com.caucho.quercus.env.Env.include(Env.java:5296) at com.caucho.quercus.env.Env.includeOnce(Env.java:5249) at com.caucho.quercus.expr.FunIncludeOnceExpr.eval(FunIncludeOnceExpr.java:89) at com.caucho.quercus.expr.Expr.evalTop(Expr.java:523) at com.caucho.quercus.statement.ExprStatement.execute(ExprStatement.java:67) at com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) at com.caucho.quercus.program.QuercusProgram.execute(QuercusProgram.java:396) at com.caucho.quercus.page.InterpretedPage.execute(InterpretedPage.java:89) at com.caucho.quercus.env.Env.executePageTop(Env.java:3850) at com.caucho.quercus.env.Env.executeTop(Env.java:3793) at com.caucho.quercus.servlet.QuercusServletImpl.service(QuercusServletImpl.java:185) at com.caucho.quercus.servlet.QuercusServlet.service(QuercusServlet.java:610) at javax.servlet.http.HttpServlet.service(HttpServlet.java:96) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:780) at com.caucho.server.connection.TcpConnection.dispatchRequest(TcpConnection.java:600) at com.caucho.server.connection.TcpConnection.handleRequestsImpl(TcpConnection.java:566) at com.caucho.server.connection.TcpConnection.handleRequests(TcpConnection.java:519) at com.caucho.server.connection.TcpConnection$AcceptTask.doTask(TcpConnection.java:1100) at com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1037) at com.caucho.server.connection.TcpConnection$AcceptTask.run(TcpConnection.java:1068) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: com.caucho.quercus.QuercusExecutionException: java.lang.UnsupportedOperationException com.caucho.quercus.env.ArgGetValue at com.caucho.quercus.env.Value.serialize(Value.java:2759) at com.caucho.quercus.env.Value.serialize(Value.java:2741) at com.caucho.quercus.env.ArrayValue.serialize(ArrayValue.java:1294) at com.caucho.quercus.lib.VariableModule.serialize(VariableModule.java:631) at sun.reflect.GeneratedMethodAccessor151.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at com.caucho.quercus.module.StaticFunction.invoke(StaticFunction.java:135) at com.caucho.quercus.env.JavaInvoker.callMethod(JavaInvoker.java:727) at com.caucho.quercus.env.JavaInvoker.call(JavaInvoker.java:641) at com.caucho.quercus.expr.CallExpr.evalImpl(CallExpr.java:238) at com.caucho.quercus.expr.CallExpr.eval(CallExpr.java:151) at com.caucho.quercus.expr.Expr.evalValue(Expr.java:469) at com.caucho.quercus.statement.ReturnStatement.execute(ReturnStatement.java:69) at com.caucho.quercus.statement.IfStatement.execute(IfStatement.java:81) at com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) at com.caucho.quercus.program.Function.callImpl(Function.java:431) at com.caucho.quercus.program.Function.call(Function.java:349) at com.caucho.quercus.expr.CallExpr.evalImpl(CallExpr.java:236) at com.caucho.quercus.expr.CallExpr.evalCopy(CallExpr.java:164) at com.caucho.quercus.expr.BinaryAssignExpr.eval(BinaryAssignExpr.java:88) at com.caucho.quercus.expr.Expr.evalTop(Expr.java:523) at com.caucho.quercus.statement.ExprStatement.execute(ExprStatement.java:67) at com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) at com.caucho.quercus.program.Function.callImpl(Function.java:431) at com.caucho.quercus.program.Function.call(Function.java:349) at com.caucho.quercus.expr.CallExpr.evalImpl(CallExpr.java:238) at com.caucho.quercus.expr.CallExpr.eval(CallExpr.java:151) at com.caucho.quercus.expr.Expr.evalTop(Expr.java:523) at com.caucho.quercus.statement.ExprStatement.execute(ExprStatement.java:67) at com.caucho.quercus.statement.IfStatement.execute(IfStatement.java:84) at com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) at com.caucho.quercus.statement.IfStatement.execute(IfStatement.java:81) at com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) at com.caucho.quercus.program.Function.callImpl(Function.java:431) at com.caucho.quercus.program.Function.call(Function.java:349) at com.caucho.quercus.env.CallbackFunction.call(CallbackFunction.java:171) at com.caucho.quercus.lib.FunctionModule.call_user_func_array(FunctionModule.java:101) at sun.reflect.GeneratedMethodAccessor86.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at com.caucho.quercus.module.StaticFunction.invoke(StaticFunction.java:135) at com.caucho.quercus.env.JavaInvoker.callMethod(JavaInvoker.java:727) at com.caucho.quercus.env.JavaInvoker.call(JavaInvoker.java:641) at com.caucho.quercus.expr.CallExpr.evalImpl(CallExpr.java:238) at com.caucho.quercus.expr.CallExpr.eval(CallExpr.java:151) at com.caucho.quercus.expr.Expr.evalTop(Expr.java:523) at com.caucho.quercus.statement.ExprStatement.execute(ExprStatement.java:67) at com.caucho.quercus.statement.IfStatement.execute(IfStatement.java:81) at com.caucho.quercus.statement.ForeachStatement.execute(ForeachStatement.java:103) at com.caucho.quercus.statement.DoStatement.execute(DoStatement.java:73) at .do_action(/export/home/me/www/org/mysite/mgfb/wp-includes/plugin.php:336)</body>
  </mail>
  <mail>
    <header>[Resin-interest] Conditionalizing rewrite rules based on	file/directory?</header>
    <date>Sun Mar 21 21:04:10 CET 2010</date>
    <body>With my WordPress installation, I need to redirect some kinds of posts to /index.php. I currently have these two rules: The first redirects URIs that match /year/month/post-name The second redirects the one and only "page" I have currently, the about page. Under Apache, the rewrite rules can be conditionalized to say, "redirect according to this rule only if the resource pointed to by they URI is not an actual file or directory." Is there any way to do that in Resin? TIA, -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Conditionalizing rewrite rules based	on	file/directory?</header>
    <date>Mon Mar 22 15:07:16 CET 2010</date>
    <body>On this link there is &amp;lt;resin:IfFileExists&amp;gt; tag, but I am thinking what you want to do is more simple than that, if you want to elaborate: http://caucho.com/resin-4.0/admin/http-rewrite.xtp Aaron</body>
  </mail>
  <mail>
    <header>[Resin-interest] How to make this simplest CanDI work ?</header>
    <date>Sun Mar 21 04:05:46 CET 2010</date>
    <body>I am new to CanDI , I want to migrate my spring app to JavaEE6 , but having a lot of troubles in Resin (4.0.5) CanDI : There is no working sample in the resin site , most are outdated ... Here is my very basic sample , just JPA 2 and a Servlet : @PersistenceContext(unitName = "mining", type = PersistenceContextType.EXTENDED) @Override @javax.inject.Inject @Override protected void doGet(HttpServletRequest hreq, HttpServletResponse hres) System.out.println("personDao = " + personDao); // outputs Null Person p = personDao.get(1L); //NPE , personDao is not injected persistence.xml http://java.sun.com/xml/ns/persistence" META-INF/beans.xml http://java.sun.com/xml/ns/javaee" my environment : This is a very basic Dao + JPA pattern , but I cannot find how to inject the PersonDaoImpl to the Dao in the Servlet , Can somebody give me a hint ? Thanks in advenced ! BTW , Is META-INF/beans.xml defined in the JavaEE spec ?  What's the relation with beans.xml and resin-web.xml ?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to make this simplest CanDI work ?</header>
    <date>Sun Mar 21 05:32:22 CET 2010</date>
    <body>relation with beans.xml and resin-web.xml ? yes, beans.xml is part of JSR-299. resin-web.xml has the same role as web.xml, it is processed by Resin after web.xml. You can place resin specific / non-standard configuration into resin-web.xml. smallufo írta: I am new to CanDI , I want to migrate my spring app to JavaEE6 , but having a lot of troubles in Resin (4.0.5) CanDI : There is no working sample in the resin site , most are outdated ... Here is my very basic sample , just JPA 2 and a Servlet : @PersistenceContext(unitName = "mining", type = PersistenceContextType.EXTENDED) @Override @javax.inject.Inject @Override protected void doGet(HttpServletRequest hreq, HttpServletResponse System.out.println("personDao = " + personDao); // outputs Null Person p = personDao.get(1L); //NPE , personDao is not injected persistence.xml http://java.sun.com/xml/ns/persistence" value="jdbc:mysql://db/mining?useUnicode=true&amp;amp;amp;characterEncoding=UTF8" META-INF/beans.xml http://java.sun.com/xml/ns/javaee" my environment : This is a very basic Dao + JPA pattern , but I cannot find how to inject the PersonDaoImpl to the Dao in the Servlet , Can somebody give me a hint ? Thanks in advenced ! BTW , Is META-INF/beans.xml defined in the JavaEE spec ?  What's the relation with beans.xml and resin-web.xml ? ------------------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to make this simplest CanDI work ?</header>
    <date>Sun Mar 21 05:40:03 CET 2010</date>
    <body>Thank you ... Back to the topic .. Is there any example that shows injecting JPA entitymanager to the DaoImpl , and inject the DaoImpl (as a Dao interface)  to the Servlet ? http://java.sun.com/xml/ns/persistence" http://java.sun.com/xml/ns/javaee" http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to make this simplest CanDI work ?</header>
    <date>Sun Mar 21 19:46:07 CET 2010</date>
    <body>After a whole day work (but in vain) , I modified my code : I take off all hibernate-related settings/libraries from persistence.xml and maven dependencies , I just want to first use resin's Amber to test whether CanDI works... This is database settings in resin-web.xml : This is persistence.xml : http://java.sun.com/xml/ns/persistence" When resin inits , I can see Amber successfully get the connection , and build the connection pool (ManagedPoolItem) . But I still cannot get PersonDao's implementation , it seems resin cannot successfully create the PersistenceContext , here is the FINER log dump : WebApp[ http://test.smallufo.com/testapp-1 ] map (uri:/hello -&amp;gt; hello) Dispatch '/hello' to AccessLogFilterChain[ http://test.smallufo.com/testapp-1 , next=WebAppFilterChain[ http://test.smallufo.com/testapp-1 , next=ServletFilterChain[hello]]] com.caucho.config.ConfigException: foo.HelloServlet.personDao: foo.PersonDaoImpl.entityManager java.lang.NullPointerException at com.caucho.config.ConfigException.create(ConfigException.java:99) at com.caucho.config.ConfigException.create(ConfigException.java:125) at com.caucho.config.inject.InjectionTargetImpl$FieldInjectProgram.inject(InjectionTargetImpl.java:811) at com.caucho.config.inject.InjectionTargetImpl.inject(InjectionTargetImpl.java:266) at com.caucho.server.dispatch.ServletConfigImpl.createServletImpl(ServletConfigImpl.java:1260) at com.caucho.server.dispatch.ServletConfigImpl.createServlet(ServletConfigImpl.java:1142) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:98) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:775) at com.caucho.server.connection.TcpConnection.dispatchRequest(TcpConnection.java:600) at com.caucho.server.connection.TcpConnection.handleRequestsImpl(TcpConnection.java:566) at com.caucho.server.connection.TcpConnection.handleRequests(TcpConnection.java:519) at com.caucho.server.connection.TcpConnection$AcceptTask.doTask(TcpConnection.java:1100) at com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1037) at com.caucho.server.connection.TcpConnection$AcceptTask.run(TcpConnection.java:1068) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: com.caucho.config.ConfigException: foo.PersonDaoImpl.entityManager java.lang.NullPointerException at com.caucho.config.ConfigException.create(ConfigException.java:102) at com.caucho.config.j2ee.PersistenceContextGenerator.create(PersistenceContextGenerator.java:121) at com.caucho.config.program.FieldGeneratorProgram.inject(FieldGeneratorProgram.java:84) at com.caucho.config.inject.InjectionTargetImpl$FieldHandlerProgram.inject(InjectionTargetImpl.java:860) at com.caucho.config.inject.InjectionTargetImpl.inject(InjectionTargetImpl.java:266) at com.caucho.config.inject.ManagedBeanImpl.create(ManagedBeanImpl.java:149) at com.caucho.config.inject.InjectManager.getInstanceRec(InjectManager.java:1347) at com.caucho.config.inject.InjectManager.getReference(InjectManager.java:1311) at com.caucho.config.inject.InjectManager.getInjectableReference(InjectManager.java:1509) at com.caucho.config.inject.InjectionTargetImpl$FieldInjectProgram.inject(InjectionTargetImpl.java:807) ... 16 more Caused by: java.lang.NullPointerException at com.caucho.config.inject.InjectManager.getInstanceRec(InjectManager.java:1337) at com.caucho.config.inject.InjectManager.getReference(InjectManager.java:1311) at com.caucho.config.j2ee.WebBeanGenerator.create(WebBeanGenerator.java:66) at com.caucho.config.j2ee.PersistenceContextGenerator.create(PersistenceContextGenerator.java:108) ... 24 more Http[5] HTTP/1.1 500 Internal Server Error I've stuck with this problem for days , but cannot find an answer ... I'm very appreciated if somebody helps me... thanks. I am using Resin (non-Pro) 4.0.5</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to make this simplest CanDI work ?</header>
    <date>Mon Mar 22 04:02:01 CET 2010</date>
    <body>I can now pinpoint the error , It's because I declare the PersistenceContextType to PersistenceContextType.EXTENDED !!! I don't know why resin cannot initialize EXTENDED  PersistenceContext Maybe caucho should look into the PersistenceContextGenerator.java  , create() method _manager = create(EntityManager.class, http://java.sun.com/xml/ns/persistence" http://test.smallufo.com/testapp-1 ] map (uri:/hello -&amp;gt; hello) http://test.smallufo.com/testapp-1 , next=WebAppFilterChain[ http://test.smallufo.com/testapp-1 , next=ServletFilterChain[hello]]]</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to make this simplest CanDI work ?</header>
    <date>Mon Mar 22 17:26:05 CET 2010</date>
    <body>Because extended is only allowed when it's integrated with a stateful session bean and we haven't finished that part of EJB yet. (I've never been certain that extended is a good idea. With connection pooling, the normal transaction should be equivalent.) -- Scott mailto:small...@gmail.com http://java.sun.com/xml/ns/persistence" http://test.smallufo.com/testapp-1 ] map (uri:/hello -&amp;gt; hello) http://test.smallufo.com/testapp-1 , http://test.smallufo.com/testapp-1 , http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to make this simplest CanDI work ?</header>
    <date>Mon Mar 22 19:39:37 CET 2010</date>
    <body>beans.xml is also an important marker because it tells Resin which jars to scan for CanDI beans. So even if it's empty, it's an important file. -- Scott http://java.sun.com/xml/ns/persistence" http://java.sun.com/xml/ns/javaee" http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0.5 keeps throwing NPE from	TransactionImpl.close()</header>
    <date>Sat Mar 20 16:25:00 CET 2010</date>
    <body>from this sample : http://caucho.com/resin-4.0/examples/servlet-hello/index.xtp A very basic hello Servlet always shows this message in the log: WebApp[ http://test.com/test ] active java.lang.NullPointerException at com.caucho.transaction.TransactionImpl.close(TransactionImpl.java:1224) at com.caucho.server.webapp.ContextFilterChain.doFilter(ContextFilterChain.java:135) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:775) at com.caucho.server.connection.TcpConnection.dispatchRequest(TcpConnection.java:600) at com.caucho.server.connection.TcpConnection.handleRequestsImpl(TcpConnection.java:566) at com.caucho.server.connection.TcpConnection.handleRequests(TcpConnection.java:519) at com.caucho.server.connection.TcpConnection$AcceptTask.doTask(TcpConnection.java:1100) at com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1037) at com.caucho.server.connection.TcpConnection$AcceptTask.run(TcpConnection.java:1068) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866)</body>
  </mail>
  <mail>
    <header>[Resin-interest] tag cast issues???</header>
    <date>Sat Mar 20 02:33:56 CET 2010</date>
    <body>ARghh. If it's not one thing, it's another. I'm finally 99% in place with resin-4.0.4, and suddenly I notice this stack trace, for a JSP tag defines like this: %&amp;gt;&amp;lt;%...@attribute name="value" required="true" rtexprvalue="true" type="java.lang.Long" description="Duration value in seconds" %&amp;gt;&amp;lt;%@ taglib prefix="c" uri=" http://java.sun.com/jsp/jstl/core" %&amp;gt;&amp;lt;%@ taglib prefix="fmt" uri=" http://java.sun.com/jsp/jstl/fmt" %&amp;gt;&amp;lt;% trace: [show] java.lang.ClassCastException: _jsp._WEB_22dINF._tags._lz._durT__tag cannot be cast to javax.servlet.jsp.tagext.Tag javax.servlet.ServletException: javax.servlet.ServletException: com.caucho.jsp.QJspException: java.lang.ClassCastException: _jsp._WEB_22dINF._tags._lz._durT__tag cannot be cast to javax.servlet.jsp.tagext.Tag at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:286) at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913) at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449) at javax.servlet.http.HttpServlet.service(HttpServlet.java:119) at javax.servlet.http.HttpServlet.service(HttpServlet.java:96) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109) at com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:124) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at com.latencyzero.satdb.SecurityFilter.doFilter(SecurityFilter.java:215) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:780) at com.caucho.server.connection.TcpConnection.dispatchRequest(TcpConnection.java:600) at com.caucho.server.connection.TcpConnection.handleRequestsImpl(TcpConnection.java:566) at com.caucho.server.connection.TcpConnection.handleRequests(TcpConnection.java:519) at com.caucho.server.connection.TcpConnection$AcceptTask.doTask(TcpConnection.java:1100) at com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1037) at com.caucho.server.connection.TcpConnection$AcceptTask.run(TcpConnection.java:1068) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: javax.servlet.ServletException: com.caucho.jsp.QJspException: java.lang.ClassCastException: _jsp._WEB_22dINF._tags._lz._durT__tag cannot be cast to javax.servlet.jsp.tagext.Tag at com.caucho.jsp.PageContextImpl.handlePageException(PageContextImpl.java:1255) at _jsp._WEB_22dINF._jsp._mission__jsp._jspService(_mission__jsp.java:30) at com.caucho.jsp.JavaPage.service(JavaPage.java:61) at com.caucho.jsp.Page.pageservice(Page.java:535) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:195) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:283) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:121) at org.apache.struts.chain.commands.servlet.PerformForward.handleAsForward(PerformForward.java:113) at org.apache.struts.chain.commands.servlet.PerformForward.perform(PerformForward.java:96) at org.apache.struts.chain.commands.AbstractPerformForward.execute(AbstractPerformForward.java:54) at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51) at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190) at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304) at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190) at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283) at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913) at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449) at javax.servlet.http.HttpServlet.service(HttpServlet.java:119) at javax.servlet.http.HttpServlet.service(HttpServlet.java:96) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109) at com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:124) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at com.latencyzero.satdb.SecurityFilter.doFilter(SecurityFilter.java:215) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:780) at com.caucho.server.connection.TcpConnection.dispatchRequest(TcpConnection.java:600) at com.caucho.server.connection.TcpConnection.handleRequestsImpl(TcpConnection.java:566) at com.caucho.server.connection.TcpConnection.handleRequests(TcpConnection.java:519) at com.caucho.server.connection.TcpConnection$AcceptTask.doTask(TcpConnection.java:1100) at com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1037) at com.caucho.server.connection.TcpConnection$AcceptTask.run(TcpConnection.java:1068) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: com.caucho.jsp.QJspException: java.lang.ClassCastException: _jsp._WEB_22dINF._tags._lz._durT__tag cannot be cast to javax.servlet.jsp.tagext.Tag at com.caucho.jsp.QJspException.createJspException(QJspException.java:74) at _jsp._WEB_22dINF._tags._lz._durT__tag.doTag(_durT__tag.java:39) at _jsp._WEB_22dINF._jsp._mission__jsp._jspService(WEB-INF/jsp/mission.jsp:140) at _jsp._WEB_22dINF._jsp._mission__jsp._jspService(_mission__jsp.java:28) at com.caucho.jsp.JavaPage.service(JavaPage.java:61) at com.caucho.jsp.Page.pageservice(Page.java:535) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:195) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:283) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:121) at org.apache.struts.chain.commands.servlet.PerformForward.handleAsForward(PerformForward.java:113) at org.apache.struts.chain.commands.servlet.PerformForward.perform(PerformForward.java:96) at org.apache.struts.chain.commands.AbstractPerformForward.execute(AbstractPerformForward.java:54) at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51) at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190) at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304) at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190) at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283) at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913) at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449) at javax.servlet.http.HttpServlet.service(HttpServlet.java:119) at javax.servlet.http.HttpServlet.service(HttpServlet.java:96) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109) at com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:124) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at com.latencyzero.satdb.SecurityFilter.doFilter(SecurityFilter.java:215) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:780) at com.caucho.server.connection.TcpConnection.dispatchRequest(TcpConnection.java:600) at com.caucho.server.connection.TcpConnection.handleRequestsImpl(TcpConnection.java:566) at com.caucho.server.connection.TcpConnection.handleRequests(TcpConnection.java:519) at com.caucho.server.connection.TcpConnection$AcceptTask.doTask(TcpConnection.java:1100) at com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1037) at com.caucho.server.connection.TcpConnection$AcceptTask.run(TcpConnection.java:1068) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: java.lang.ClassCastException: _jsp._WEB_22dINF._tags._lz._durT__tag cannot be cast to javax.servlet.jsp.tagext.Tag at _jsp._WEB_22dINF._tags._lz._durT__tag$TagState.get_jsp_FormatNumberTag_0(_durT__tag.java:213) at _jsp._WEB_22dINF._tags._lz._durT__tag.doTag(_durT__tag.java:90) at _jsp._WEB_22dINF._tags._lz._durT__tag.doTag(_durT__tag.java:35) at _jsp._WEB_22dINF._jsp._mission__jsp._jspService(WEB-INF/jsp/mission.jsp:140) at _jsp._WEB_22dINF._jsp._mission__jsp._jspService(_mission__jsp.java:28) at com.caucho.jsp.JavaPage.service(JavaPage.java:61) at com.caucho.jsp.Page.pageservice(Page.java:535) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:195) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:283) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:121) at org.apache.struts.chain.commands.servlet.PerformForward.handleAsForward(PerformForward.java:113) at org.apache.struts.chain.commands.servlet.PerformForward.perform(PerformForward.java:96) at org.apache.struts.chain.commands.AbstractPerformForward.execute(AbstractPerformForward.java:54) at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51) at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190) at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:304) at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:190) at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283) at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913) at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449) at javax.servlet.http.HttpServlet.service(HttpServlet.java:119) at javax.servlet.http.HttpServlet.service(HttpServlet.java:96) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:109) at com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:124) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at com.latencyzero.satdb.SecurityFilter.doFilter(SecurityFilter.java:215) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:780) at com.caucho.server.connection.TcpConnection.dispatchRequest(TcpConnection.java:600) at com.caucho.server.connection.TcpConnection.handleRequestsImpl(TcpConnection.java:566) at com.caucho.server.connection.TcpConnection.handleRequests(TcpConnection.java:519) at com.caucho.server.connection.TcpConnection$AcceptTask.doTask(TcpConnection.java:1100) at com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1037) at com.caucho.server.connection.TcpConnection$AcceptTask.run(TcpConnection.java:1068) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] tag cast issues???</header>
    <date>Sat Mar 20 03:21:15 CET 2010</date>
    <body>I'm pretty sure resin is borking the Java file generation of my tag. I've written a bug with all my notes about how the cast can't work as is: http://bugs.caucho.com/bug_view_advanced_page.php?bug_id=3956 http://java.sun.com/jsp/jstl/core" http://java.sun.com/jsp/jstl/fmt" http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] conflicting attibute warnings</header>
    <date>Fri Mar 19 22:59:06 CET 2010</date>
    <body>Hmm. In my latest upgrade to 4.0.4, I'm seeing a lot of these on startup: BeanType[com.mysql.jdbc.ConnectionProperties]: conflicting attribute for 'pedantic' between SetterAttribute[public void com.mysql.jdbc.ConnectionProperties.setPedantic(boolean)] and SetterAttribute[public void com.mysql.jdbc.ConnectionProperties.setPedantic(boolean)] Is this something to worry about? -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Warning building resin-4.0.4</header>
    <date>Fri Mar 19 21:47:34 CET 2010</date>
    <body>Just an FYI, when I make resin, I get this warning: $ uname -a SunOS foo 5.11 NexentaOS_20081207 i86pc i386 i86pc Solaris $ ./configure --prefix=/usr/local/resin/versions/resin-4.0.4 --datadir=/usr/local/resin/versions/resin-4.0.4 ... $ make ... gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -D__SOLARIS__ -DHAS_JVMTI -DRESIN_HOME=\"/usr/local/resin/versions/resin-4.0.4\" -I/usr/include -I/usr/local/java/current/jre/include -I/usr/local/java/current/jre/include/solaris -I../common -DCPU=\"i386\" -DOS= -c -o jni_socket.o jni_socket.c jni_socket.c: In function 'Java_com_caucho_vfs_JniServerSocketImpl_bindPort': jni_socket.c:691: warning: passing argument 2 of 'getsockname' from incompatible pointer type</body>
  </mail>
  <mail>
    <header>[Resin-interest] Location of WEB-INF/work dirs?</header>
    <date>Fri Mar 19 21:18:29 CET 2010</date>
    <body>Is there any way to configure Resin to put the WEB-INF/work dir somewhere other than under WEB-INF? I'd like to designate a completely separate location for all the work dirs Resin creates, that I can delete with a single rm -rf, rather than having to visit a bunch of separate webapps. As a general rule, I'd like to leave my webapp deployment directories untouched as the system runs. TIA, Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Location of WEB-INF/work dirs?</header>
    <date>Fri Mar 19 21:42:15 CET 2010</date>
    <body>With  Resin 3.1 it was possible: http://www.caucho.com/resin-3.1/doc/env-tags.xtp#work-dir The documentation of Resin 4 is very strange, I even can't find the web-app configuration stuff. So I don't know if the &amp;lt;work-dir&amp;gt; element still works. -- Steffen http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Location of WEB-INF/work dirs?</header>
    <date>Fri Mar 19 21:46:32 CET 2010</date>
    <body>http://www.caucho.com/resin-3.1/doc/env-tags.xtp#work-dir There are a lot of broken Resin 4 doc links. I'll try that Resin 3 tag. Hmm. It appears that it's relative to the webapp dir. What I want is to say, at the server or resin level, an absolute path to a location, and have it then create a series of work directories underneath that, one for each app it instantiates. Thanks, though. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Location of WEB-INF/work dirs?</header>
    <date>Fri Mar 19 22:11:32 CET 2010</date>
    <body>http://www.caucho.com/resin-3.1/doc/env-tags.xtp#work-dir With Resin 3.1, I would do this: This configures the work-dir for all web-apps to be your resin.root (you might want to change it to an asolute path you prefer) plus /work plus the webApp Name. The &amp;lt;resin:message&amp;gt; element is just to show you the work-dir on startupt. Please note that the work-dir might be generated only, when the web-app gets started or accessed. At least it was just seconds ago in my installation. -- Steffen. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Location of WEB-INF/work dirs?</header>
    <date>Fri Mar 19 22:18:00 CET 2010</date>
    <body>Thanks, I'll try that out! http://www.caucho.com/resin-3.1/doc/env-tags.xtp#work-dir http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Classpath Question</header>
    <date>Fri Mar 19 15:48:56 CET 2010</date>
    <body>Resin version: resin-pro-3.1.9 I am trying to convert my resin-pro-3.0.23 startup scripts and resin.conf file to work with resin-pro-3.1.9.  It's close, but there is a small error.  I am trying to build a start script similar to: $RESIN_HOME/bin/httpd.sh -verbose \ -J-server \ -J-Xmx$JAVA_MX \ -J-Xms$JAVA_MS \ -J-verbose:gc \ -J-XX:MaxGCPauseMillis=5000 \ -J-XX:GCTimeRatio=19 \ -J-XX:+PrintGCTimeStamps \ -J-Djava.security.egd=/dev/urandom \ -J-cp=/opt/server/java/test.jar \ -server-root $SERVER_ROOT \ -Dresin.home=/opt/resin-pro-3.1.9 \ -conf /opt/server/conf/resin.xml \ $1 But when I launch it, it fails on this line in the resin.xml: /opt/server/conf/resin.xml:41: java.lang.ClassNotFoundException: com.encryption. Password in EnvironmentClassLoader[] How do I set my classpath such that Resin can find the com.encryption.Password class we have written, which resides in the test.jar?  I have tried adding -J-cp=... and just setting the CLASSPATH environment variable in our start script, but not having any luck.  I also have this in my resin.xml: http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Classpath Question</header>
    <date>Fri Mar 19 17:43:01 CET 2010</date>
    <body>I think what you want to do is add To your resin.xml. At least, that's how I do it in resin-4.0.x In 4, you can also add all those Java args in the resin.xml file (I think you can in 3.1, too, but I don't know for sure). http://caucho.com/ns/resin" http://caucho.com/ns/resin/core" http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Classpath Question</header>
    <date>Fri Mar 19 22:23:24 CET 2010</date>
    <body>Thanks.  That didn't help, so I just stopped using the resin:type feature and through the password in plaintext to see what would happen. Now when I launch resin I get this: [r...@alpha bin]# ./transfer.3.1.9.sh start Resin/3.1.9 started -server '' for watchdog at 127.0.0.1:6600 [r...@alpha bin]# ps awx | grep java 4388 pts/1    S+     0:00 grep java [r...@alpha bin]# It seems like it's starting, but when I ps for the process it never creates the java server process.  There are no logs under the Where else can I look, or what else can I do to see why I can't start the server? Thanks, Aaron I think what you want to do is add To your resin.xml. At least, that's how I do it in resin-4.0.x In 4, you can also add all those Java args in the resin.xml file (I think you can in 3.1, too, but I don't know for sure). Resin version: resin-pro-3.1.9 I am trying to convert my resin-pro-3.0.23 startup scripts and resin.conf file to work with resin-pro-3.1.9.  It's close, but there is a small error.  I am trying to build a start script similar to: $RESIN_HOME/bin/httpd.sh -verbose \ -J-server \ -J-Xmx$JAVA_MX \ -J-Xms$JAVA_MS \ -J-verbose:gc \ -J-XX:MaxGCPauseMillis=5000 \ -J-XX:GCTimeRatio=19 \ -J-XX:+PrintGCTimeStamps \ -J-Djava.security.egd=/dev/urandom \ -J-cp=/opt/server/java/test.jar \ -server-root $SERVER_ROOT \ -Dresin.home=/opt/resin-pro-3.1.9 \ -conf /opt/server/conf/resin.xml \ $1 But when I launch it, it fails on this line in the resin.xml: /opt/server/conf/resin.xml:41: java.lang.ClassNotFoundException: com.encryption. Password in EnvironmentClassLoader[] How do I set my classpath such that Resin can find the com.encryption.Password class we have written, which resides in the test.jar?  I have tried adding -J-cp=... and just setting the CLASSPATH environment variable in our start script, but not having any luck.  I also have this in my resin.xml: http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Classpath Question</header>
    <date>Fri Mar 19 22:36:26 CET 2010</date>
    <body>Whoa, by total accident I launched my start script without passing "start", like this: ./resin.sh instead of ./resin.sh start And it seems to run fine when not in "daemon" mode, or whatever Caucho calls it when the server runs in the background.  So it's still a mystery what could be causing it to not work when I run with the "start" option. Aaron Thanks.  That didn't help, so I just stopped using the resin:type feature and through the password in plaintext to see what would happen.  Now when I launch resin I get this: [r...@alpha bin]# ./transfer.3.1.9.sh start Resin/3.1.9 started -server '' for watchdog at 127.0.0.1:6600 [r...@alpha bin]# ps awx | grep java 4388 pts/1    S+     0:00 grep java [r...@alpha bin]# It seems like it's starting, but when I ps for the process it never creates the java server process.  There are no logs under the Where else can I look, or what else can I do to see why I can't start the server? Thanks, Aaron I think what you want to do is add To your resin.xml. At least, that's how I do it in resin-4.0.x In 4, you can also add all those Java args in the resin.xml file (I think you can in 3.1, too, but I don't know for sure). Resin version: resin-pro-3.1.9 I am trying to convert my resin-pro-3.0.23 startup scripts and resin.conf file to work with resin-pro-3.1.9.  It's close, but there is a small error.  I am trying to build a start script similar to: $RESIN_HOME/bin/httpd.sh -verbose \ -J-server \ -J-Xmx$JAVA_MX \ -J-Xms$JAVA_MS \ -J-verbose:gc \ -J-XX:MaxGCPauseMillis=5000 \ -J-XX:GCTimeRatio=19 \ -J-XX:+PrintGCTimeStamps \ -J-Djava.security.egd=/dev/urandom \ -J-cp=/opt/server/java/test.jar \ -server-root $SERVER_ROOT \ -Dresin.home=/opt/resin-pro-3.1.9 \ -conf /opt/server/conf/resin.xml \ $1 But when I launch it, it fails on this line in the resin.xml: /opt/server/conf/resin.xml:41: java.lang.ClassNotFoundException: com.encryption. Password in EnvironmentClassLoader[] How do I set my classpath such that Resin can find the com.encryption.Password class we have written, which resides in the test.jar?  I have tried adding -J-cp=... and just setting the CLASSPATH environment variable in our start script, but not having any luck.  I also have this in my resin.xml: http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Classpath Question</header>
    <date>Fri Mar 19 22:44:01 CET 2010</date>
    <body>Bah the entire start mechanism is quite different from 3.0.x to 3.1.x. I didn't realize that and was continuing to use my 3.0.x start script call out to a direct call to java. Aaron Thanks.  That didn't help, so I just stopped using the resin:type feature and through the password in plaintext to see what would happen.  Now when I launch resin I get this: [r...@alpha bin]# ./transfer.3.1.9.sh start Resin/3.1.9 started -server '' for watchdog at 127.0.0.1:6600 [r...@alpha bin]# ps awx | grep java 4388 pts/1    S+     0:00 grep java [r...@alpha bin]# It seems like it's starting, but when I ps for the process it never creates the java server process.  There are no logs under the Where else can I look, or what else can I do to see why I can't start the server? Thanks, Aaron I think what you want to do is add To your resin.xml. At least, that's how I do it in resin-4.0.x In 4, you can also add all those Java args in the resin.xml file (I think you can in 3.1, too, but I don't know for sure). Resin version: resin-pro-3.1.9 I am trying to convert my resin-pro-3.0.23 startup scripts and resin.conf file to work with resin-pro-3.1.9.  It's close, but there is a small error.  I am trying to build a start script similar to: $RESIN_HOME/bin/httpd.sh -verbose \ -J-server \ -J-Xmx$JAVA_MX \ -J-Xms$JAVA_MS \ -J-verbose:gc \ -J-XX:MaxGCPauseMillis=5000 \ -J-XX:GCTimeRatio=19 \ -J-XX:+PrintGCTimeStamps \ -J-Djava.security.egd=/dev/urandom \ -J-cp=/opt/server/java/test.jar \ -server-root $SERVER_ROOT \ -Dresin.home=/opt/resin-pro-3.1.9 \ -conf /opt/server/conf/resin.xml \ $1 But when I launch it, it fails on this line in the resin.xml: /opt/server/conf/resin.xml:41: java.lang.ClassNotFoundException: com.encryption. Password in EnvironmentClassLoader[] How do I set my classpath such that Resin can find the com.encryption.Password class we have written, which resides in the test.jar?  I have tried adding -J-cp=... and just setting the CLASSPATH environment variable in our start script, but not having any luck.  I also have this in my resin.xml: http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Classpath Question</header>
    <date>Fri Mar 19 22:54:45 CET 2010</date>
    <body>It's working now.  For completeness and to help others moving from 3.0.x to 3.1.x or 4.0.x you should change your startup script from this style (which relies on a wrapper.pl): $RESIN_HOME/bin/httpd.sh -verbose \ -J-server \ -J-Xmx$JAVA_MX \ -J-Xms$JAVA_MS \ -J-verbose:gc \ -J-XX:MaxGCPauseMillis=5000 \ -J-XX:GCTimeRatio=19 \ -J-XX:+PrintGCTimeStamps \ -J-Djava.security.egd=/dev/urandom \ -J-cp=/opt/server/java/test.jar \ -server-root $SERVER_ROOT \ -Dresin.home=/opt/resin-pro-3.1.9 \ -conf /opt/server/conf/resin.xml \ $1 To something like this: $JAVA_HOME/bin/java \ -server \ -Xmx$JAVA_MX \ -Xms$JAVA_MS \ -Djava.util.logging.manager=com.caucho.log.LogManagerImpl \ -Djava.security.egd=/dev/urandom \ $* And by the way that magically fixed my resin:type problem as well.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Classpath Question</header>
    <date>Fri Mar 19 23:11:00 CET 2010</date>
    <body>You may also find this Wiki page useful: http://wiki.caucho.com/Migrating_from_Resin_3.0_to_Resin_4.0 -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: Friday, March 19, 2010 4:54 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Classpath Question It's working now.  For completeness and to help others moving from 3.0.x to 3.1.x or 4.0.x you should change your startup script from this style (which relies on a wrapper.pl): $RESIN_HOME/bin/httpd.sh -verbose \ -J-server \ -J-Xmx$JAVA_MX \ -J-Xms$JAVA_MS \ -J-verbose:gc \ -J-XX:MaxGCPauseMillis=5000 \ -J-XX:GCTimeRatio=19 \ -J-XX:+PrintGCTimeStamps \ -J-Djava.security.egd=/dev/urandom \ -J-cp=/opt/server/java/test.jar \ -server-root $SERVER_ROOT \ -Dresin.home=/opt/resin-pro-3.1.9 \ -conf /opt/server/conf/resin.xml \ $1 To something like this: $JAVA_HOME/bin/java \ -server \ -Xmx$JAVA_MX \ -Xms$JAVA_MS \ -Djava.util.logging.manager=com.caucho.log.LogManagerImpl \ -Djava.security.egd=/dev/urandom \ $* And by the way that magically fixed my resin:type problem as well.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Classpath Question</header>
    <date>Mon Mar 22 16:22:05 CET 2010</date>
    <body>The command line arguments for starting Resin 4.0.x only applied to the watchdog and NOT the actual resin process itself.  JVM command line arguments are specified in resin.xml.  For example, in the command above, $JAVA_MX and $JAVA_MS applies to the watchdog only.  I wouldn't increase the default 32m max heap size of the watchdog since it does need much memory. Bill http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Classpath Question</header>
    <date>Mon Mar 22 17:29:21 CET 2010</date>
    <body>Ah excellent catch.  I just copied those from my 3.0 startup script and what you said makes complete sense.  I will revisit each parameter carefully. Thanks, Aaron The command line arguments for starting Resin 4.0.x only applied to the watchdog and NOT the actual resin process itself.  JVM command line arguments are specified in resin.xml.  For example, in the command above, $JAVA_MX and $JAVA_MS applies to the watchdog only.  I wouldn't increase the default 32m max heap size of the watchdog since it does need much memory. Bill On Fri, Mar 19, 2010 at 5:53 PM, Aaron Freeman mailto:aaron.free...@layerz.com It's working now.  For completeness and to help others moving from 3.0.x to 3.1.x or 4.0.x you should change your startup script from this style http://wrapper.pl $RESIN_HOME/bin/httpd.sh -verbose \ -J-server \ -J-Xmx$JAVA_MX \ -J-Xms$JAVA_MS \ -J-verbose:gc \ -J-XX:MaxGCPauseMillis=5000 \ -J-XX:GCTimeRatio=19 \ -J-XX:+PrintGCTimeStamps \ -J-Djava.security.egd=/dev/urandom \ -J-cp=/opt/server/java/test.jar \ -server-root $SERVER_ROOT \ -Dresin.home=/opt/resin-pro-3.1.9 \ -conf /opt/server/conf/resin.xml \ $1 To something like this: $JAVA_HOME/bin/java \ -server \ -Xmx$JAVA_MX \ -Xms$JAVA_MS \ -Djava.util.logging.manager=com.caucho.log.LogManagerImpl \ -Djava.security.egd=/dev/urandom \ $* And by the way that magically fixed my resin:type problem as well.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Qeurcus Stack Overflow (resin 4.0.0)</header>
    <date>Fri Mar 19 09:53:33 CET 2010</date>
    <body>Hi. Under resin 4.0.0, my Word Press installation fails with a stack overflow. foreach ( (array) current($wp_filter[$tag]) as $the_ ) if ( !is_null($the_['function']) ) call_user_func_array($the_['function'], The stack trace excerpt is (this is the lastmost portion in the log; it continues prior to this for a long time): com.caucho.quercus.env.ObjectExtValue.callMethod(ObjectExtValue.java:809) com.caucho.quercus.expr.MethodCallExpr.eval(MethodCallExpr.java:104) com.caucho.quercus.statement.ExprStatement.execute(ExprStatement.java:64) com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) com.caucho.quercus.program.Function.callImpl(Function.java:381) com.caucho.quercus.program.Function.call(Function.java:310) com.caucho.quercus.function.AbstractFunction.callMethod(AbstractFunction.java:375) com.caucho.quercus.env.ObjectExtValue.callMethod(ObjectExtValue.java:809) com.caucho.quercus.expr.MethodCallExpr.eval(MethodCallExpr.java:104) com.caucho.quercus.statement.ExprStatement.execute(ExprStatement.java:64) com.caucho.quercus.program.Function.callImpl(Function.java:381) com.caucho.quercus.program.Function.call(Function.java:310) com.caucho.quercus.function.AbstractFunction.callMethod(AbstractFunction.java:375) com.caucho.quercus.env.ObjectExtValue.callMethod(ObjectExtValue.java:809) com.caucho.quercus.expr.MethodCallExpr.eval(MethodCallExpr.java:104) com.caucho.quercus.statement.ExprStatement.execute(ExprStatement.java:64) com.caucho.quercus.statement.BlockStatement.execute(BlockStatement.java:105) .do_action(/export/home/rmann/www/org/roderickmann/mgfb/wp-includes/plugin.php:336) It appears to be stuck in an infinite recursion. Any ideas? I see there are two stack overflow-related fixes in 4.0.0 and 4.0.1, but if this isn't the one fixed in 4.0.1, I don't want to try to upgrade Resin (I tried to upgrade to 4.0.5 today, and it failed to work well). TIA, Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] configure not finding 64-bit java</header>
    <date>Fri Mar 19 04:35:00 CET 2010</date>
    <body>Hi. I'm pretty sure I have a 64-bit java running on my Nxenta/Open Solaris box. SunOS -- 5.11 NexentaOS_20081207 i86pc i386 i86pc Solaris However, when preparing to install resin 4.0.5 on it, I notice the configure script didn't find 64-bit java. However: $ java -version java version "1.6.0_12" Java(TM) SE Runtime Environment (build 1.6.0_12-b04) Java HotSpot(TM) Server VM (build 11.2-b01, mixed mode) $ java -d64 -version java version "1.6.0_12" Java(TM) SE Runtime Environment (build 1.6.0_12-b04) Java HotSpot(TM) 64-Bit Server VM (build 11.2-b01, mixed mode) Do I need to install a different JVM, or should configure add -d64 when checking? TIA, Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] configure not finding 64-bit java</header>
    <date>Fri Mar 19 04:41:33 CET 2010</date>
    <body>Add "--enable-64bit" when calling ./configure. -tyson http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] configure not finding 64-bit java</header>
    <date>Fri Mar 19 05:27:13 CET 2010</date>
    <body>Ah! Thank you! http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] configure not finding 64-bit java</header>
    <date>Fri Mar 19 05:30:35 CET 2010</date>
    <body>Hmm, configure still reports checking if Java is 64-bit... no http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] configure not finding 64-bit java</header>
    <date>Fri Mar 19 05:33:44 CET 2010</date>
    <body>Are you pointing ./configure to the right JDK installation via "--with-java-home=DIR"? http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] configure not finding 64-bit java</header>
    <date>Fri Mar 19 05:45:51 CET 2010</date>
    <body>I only have one JDK installed. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] configure not finding 64-bit java</header>
    <date>Fri Mar 19 20:44:45 CET 2010</date>
    <body>You can always use --enable-64bit. The configure script uses "java -version" to see if it's 64-bit and as you showed below, "java -version" is 32-bit on your machine.  (And Resin's configure script won't try to assume that you really want to use -d64.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] configure not finding 64-bit java</header>
    <date>Fri Mar 19 21:15:08 CET 2010</date>
    <body>Even with --enable-64bit, it didn't find that java was 64-bit. Does --enable-64bit override that? Even so, it ran into other problems as a 64-bit build. My needs currently allow me to get by with 32-bit, so I'll not worry about that for now. -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin keeps restarting...</header>
    <date>Fri Mar 19 04:25:25 CET 2010</date>
    <body>I have a server that Resin keeps restarting every 15-20 minutes. Where should we start to look to see what is going on. I just enabled full debug logging so starting to gather that information. I'd like to know any pointers we should start looking at once some data is captured. -- Peter Amiri Founder | Alurium Hosting 949-338-3862 | pe...@alurium.com | http://www.alurium.com LinkedIn: http://www.linkedin.com/in/peteramiri | IM bpamiri (AIM/MSN/Y!/GTLK/SKYPE)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin keeps restarting...</header>
    <date>Fri Mar 19 08:18:12 CET 2010</date>
    <body>-----BEGIN PGP SIGNED MESSAGE----- Hash: SHA1 Hi Peter, maybe your jvm memory is running low and so the watchdog process restarts your env. It might help to just increase your jvm mem a bit by adding to your resin config. (You didn't write which version you're using, so I assume v4.x here) Best regards, --- Jan. -----BEGIN PGP SIGNATURE----- Version: GnuPG v1.4.10 (Darwin) iEYEARECAAYFAkujJQwACgkQME/SSH3iSFlOtQCeKyhdsKsadgI6Rg0QpY5JvTRA Z1wAnj3q09Lx41IIAJHxGbREwLFZH92B =dAnl -----END PGP SIGNATURE-----</body>
  </mail>
  <mail>
    <header>[Resin-interest] New 4.0.5 install constantly dropping connections	on unloaded server</header>
    <date>Thu Mar 18 08:48:30 CET 2010</date>
    <body>Hi. My new insatll of 4.0.5 is running very badly. My server is basically unloaded, except for the requests I make, but connections are constantly dropped. I was running 3.0.23 without any real problems before this. Also, I don't see anything in any of the logs when this happens. Any suggestions? Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install constantly dropping	connections on unloaded server</header>
    <date>Thu Mar 18 20:08:01 CET 2010</date>
    <body>My 4.0.5 install is really very slow. It just won't stay running (although ps shows many resin threads), and it's much, much slower than 3.0.23 was. I'm actually running fewer webapps currently, and my server is always idle. Configuration is slightly different than it used to be, a necessity of updating the config file(s), but I don't think it's radically different from what I had. ps -axwwu | grep resin on redhat 7.2 (I know, it's old) gives me many lines like this: root     20511  0.0  5.1 226964 26396 pts/2  S    10:54   0:00 /usr/java/bin/java -jar /usr/local/resin/lib/resin.jar -conf /var/resin/resin.xml -log-directory /var/logs/resin -root-directory /var/resin/root -J-verbosegc console root     20517  0.0  6.8 450916 35108 pts/2  S    10:54   0:00 /usr/local/java-versions/jdk1.6.0_07/bin/java -server -Djava.awt.headless=true -Dfile.encoding=utf-8 -Dresin.server=1 -Djava.util.logging.manager=com.caucho.log.LogManagerImpl -Djava.system.class.loader=com.caucho.loader.SystemClassLoader -Djavax.management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl -Djava.awt.headless=true -Dresin.home=/usr/local/resin/ -Xss1m -Xmx256m -verbosegc -verbosegc com.caucho.server.resin.Resin --root-directory /var/resin/root -conf /var/resin/resin.xml -socketwait 34280 -log-directory /var/logs/resin -root-directory /var/resin/root console I can't find where the -Xss1m and -Xmx256m are being set. According to the admin manual, it should default to -Xss2m. The verbose GC output seems reasonable. Every few seconds, a line like this. I'm pretty sure my app(s) aren't leaking, since they've run for months before under 3.0.23: [GC 41277K-&amp;gt;35464K(63664K), 0.0226660 secs] Sigh. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install constantly dropping	connections on unloaded server</header>
    <date>Thu Mar 18 20:38:50 CET 2010</date>
    <body>How are you measuring the "slower"? (ab? latency? startup? some particular page size?) If the server is idle, how is it slow? Also, I'm not sure I understand you mean by "not-running" if there are Resin threads. Do the two JVMs exist? What do the logs show? Hmm. If it's showing separate ps lines for each thread, that's very old. Some of those very old linux versions only partially implemented some of the system calls we use, like epoll(). (So the configure script would discover epoll(), but it didn't actually work as advertised.) You can change that in the resin.xml with a &amp;lt;jvm-arg&amp;gt;-Xss1m&amp;lt;/jvm-arg&amp;gt;. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install constantly	dropping	connections on unloaded server</header>
    <date>Thu Mar 18 22:09:19 CET 2010</date>
    <body>Thanks for getting back to me, Scott! Responses below Slower is subjective. Unfortunately, I can't currently run the old server to actually measure times, but it's just slowwwww. I can see individual requests (images, CSS, etc) taking a long time to be fulfilled, whereas before, the pages would just come up fully rendered. Time to first render is longer, too. I left the server running late last night, tried to make requests of it this morning, but I just got "server not responding" errors in the browser. Mind you, these were not timeouts, but actual connection refusals. logs show nothing with this config: level="all" path="/var/logs/resin/out.log" rollover-period="1W" archive-format="out-%Y-%W.log.gz" I'm not sure how to verify that the JVMs exist, other than the ps command outputs many lines for java (as described before). It's not that the server died, it just stopped listening. So, that's an interesting and scary thought. However, I'm not using Resin Professional, so I thought I didn't get native sockes. I used to have exactly those values specified in resin.xml, and thought perhaps that was part of the problem, so I commented them out (to let the JVM and resin pick defaults). I was still seeing those in the command, though, and didn't know where they were coming from. That was something I had not been specifying in my 3.0.23 installation, and so I thought they were causing more problems than they were solving.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install constantly	dropping	connections on unloaded server</header>
    <date>Thu Mar 18 22:38:36 CET 2010</date>
    <body>"finer" logging might show the issue, but there's a good chance it's related to the connection issue. Thanks. Refusing connections is a more helpful description. If possible, can you get a thread dump in that situation? There are a couple of possible scenarios: 1. After a while, Resin no longer has a thread listening for an accept(). (for example, if it doesn't properly spawn a new thread.) 2. The JVM is truly frozen. It is possible, by the way, that the older Linux is having trouble with the threading. They made huge improvements in the kernel's threading after the version you're using. Ok, although, the "warning" level would only show pretty serious issues. Ok. That's one less variable. The main issue is the connection failures. That could cause your slowness as well. For example, if only one thread is listening for connections for some reason, the server would appear to be very slow. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install	constantly	dropping	connections on unloaded server</header>
    <date>Thu Mar 18 23:33:50 CET 2010</date>
    <body>I replied with the thread dump, but don't see it appearing in the list. Seems like the list server is flaky. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install	constantly	dropping	connections on unloaded server</header>
    <date>Fri Mar 19 00:17:11 CET 2010</date>
    <body>Hmm, I can't seem to post longer email to the list. Here's a link to my last post: http://pastie.org/private/2c4lrjuj4oybdtzmj4gbzw http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install	constantly	dropping	connections on unloaded server</header>
    <date>Fri Mar 19 00:31:17 CET 2010</date>
    <body>http://pastie.org/private/2c4lrjuj4oybdtzmj4gbzw Thanks. There is a size limit for the list. That trace looks normal, assuming the *.216 and *.217 are your two HTTP ports. I assume that's the connection-refused state?  Each one has several threads in the nativeAccept() state. The situation that would be a problem is if there are no threads for the port waiting in accept(). When you're in a connection-refused, can you try both addresses, just to make sure? (It's possible, too, that netstat might show something in that state.) The JNI is used in Resin-OS for ports/sockets because we needed the JNI capability to handle the setuid (and we decided setuid really should be in Resin-OS.) And it may be better to set the &amp;lt;thread-idle-max&amp;gt; for your older OS to something smaller, like 10 or 15, because that OS may not be as good with lots of threads. -- Sctt http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5	install	constantly	dropping	connections on unloaded server</header>
    <date>Fri Mar 19 01:12:22 CET 2010</date>
    <body>http://pastie.org/private/2c4lrjuj4oybdtzmj4gbzw Will do. It's currently responding, so I'll have to wait. That's great! Thank you for that. In the past, there have always been a lot of threads spawned. I wanted to limit the number of threads here to see, but I always have trouble finding the right configuration stuff in the website docs. I wanted to search for "thread" because I've seen that for older versions, but my experience is that links are broken (i.e. http://caucho.com/resin-4.0/admin/index-tags.xtp , http://caucho.com/resin-4.0/admin/cluster-tags ), or the index doesn't fully reflect the available tags, etc. I do wish there was a more comprehensive document describing configuration. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5	install	constantly	dropping	connections on unloaded server</header>
    <date>Fri Mar 19 02:19:34 CET 2010</date>
    <body>I got to that connection-refused state again, and tried connecting to each IP address separately. They both behaved the same way, although apparently the server isn't completely dead. Every now and again, it will respond. But attempting to load a web page, it's obvious that many of the connections are being refused (no CSS, images, etc). netstat -an output in that state (sorry, I might've forgotten an option on that command): http://pastie.org/private/bttcmdyixr023xasvvsdzq -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install constantly	dropping	connections on unloaded server</header>
    <date>Fri Mar 19 04:21:01 CET 2010</date>
    <body>seems to have no effect on the overall stability. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install constantly	dropping	connections on unloaded server</header>
    <date>Fri Mar 19 06:11:28 CET 2010</date>
    <body>Some additional information: I tried installing 4.0.5 on my better server (Resin-4.0.0, Nexenta/Open Solaris, recent, lots of RAM, faster CPUs), and got similar behavior. I got it up and running, noticed some oddness at first (java link errors running my app, slow page loads the first few times), then it seemed to get normal. Then about  5 minutes later, it stopped responding. I didn't investigate, but rather just switched back to using resin-4.0.0. No idea if it was the same issue. In the logs, I saw it restarting, but it never came back. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install constantly	dropping	connections on unloaded server</header>
    <date>Fri Mar 19 20:41:36 CET 2010</date>
    <body>Thanks for the update. Just to review the symptoms: 1. Both JVMs are around and responds to kill -QUIT (there have been cases where the JVM has been so frozen it doesn't respond to anything.) 2. Resin is not responding to connect() for either of two ports. 3. The thread dump shows active threads in the nativeAccept() of both ports. 4. Netstat looks normal (i.e. it's not showing lots of connections in strange states.) My stress testing isn't showing anything like this kind of behavior yet, but any further details would help narrow the tests. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install constantly	dropping	connections on unloaded server</header>
    <date>Fri Mar 19 21:14:01 CET 2010</date>
    <body>Scott, I finally just moved my webapps to my Open Solaris machine, which is much more modern, and has a lot more RAM available. (It is currently running resin-4.0.0, warts and all.) This will allow me to update the older machine at my leisure. The problem I'm facing now is twofold, and the first of these might be related. 1) Attempts to upgrade to resin-4.0.5 have failed. Resin seems to run fine, but then stops after an hour or two. Because this machine is more critical (it hosts the data for my iPhone app), I just switch back to resin-4.0.0, which has problems but is stable. More details about how I installed it below. 2) On both 4.0.0 and 4.0.5, I have problems with Quercus and WordPress. In 4.0.0, I get a StackOverflowError. In 4.0.5, I get a PHP report of a database connection error (and I believe that comes with a 500 response). Installation Details -------------------- The configuration for both is exactly the same, as much as I can remember and glean from my history. I put the individual resin released in /usr/local/resin/versions(/resin-4.0.0, resin-4.0.5, etc.), and symlink one of those to /usr/local/resin/current. When I installed 4.0.0, I believe I set that up first, then ran ./configure --prefix=/usr/local/resin/current, then make, sudo make install. For 4.0.5, I put it in place, but left the symlink pointing to 4.0.0, and did configure --prefix=/usr/local/resin/versions/resin-4.0.5, make, make install (not sudo). This complains that it couldn't install /etc/resin/ stuff, but I already had that from the previous build. Now, when I switch between versions, I change the symlink, and blow away all the WEB-INF/work directories (I'm posting a separate question about that), sometimes I stop and restart the server via the resin.sh script I have (which is just a wrapper around: java -jar /usr/local/resin/current/lib/resin.jar -verbose -root-directory /var/www -conf /etc/resin/resin.xml $* But usually it restarts itself (because of the symlink change, I presume). When I get some time, I'll try with resin-4.0.4, but I'm supposed to be doing "real" work for my employer today. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install constantly	dropping	connections on unloaded server</header>
    <date>Tue Mar 23 00:31:05 CET 2010</date>
    <body>Scott, I've opened a bug for my 4.0.5 woes, including the config file and logs from my much more modern Open Solaris machine: http://bugs.caucho.com/view.php?id=3960 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install constantly	dropping	connections on unloaded server</header>
    <date>Tue Mar 23 20:11:47 CET 2010</date>
    <body>http://bugs.caucho.com/view.php?id=3960 Thanks for the detailed bug report. We're not seeing the behavior here yet, but the details should help track down the differences. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install	constantly	dropping	connections on unloaded server</header>
    <date>Tue Mar 23 20:16:07 CET 2010</date>
    <body>http://bugs.caucho.com/view.php?id=3960 Did the way I built and installed it have anything to do with the flakiness? -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install	constantly	dropping	connections on unloaded server</header>
    <date>Tue Mar 23 21:48:10 CET 2010</date>
    <body>Rick, Out of curiosity did you trying running a vanilla version of 4.0.5 without compiling (using Java sockets instead of the native sockets)?  I am curious if you still have the issue with it uncompiled. Aaron Scott, I've opened a bug for my 4.0.5 woes, including the config file and logs from my much more modern Open Solaris machine: http://bugs.caucho.com/view.php?id=3960 Thanks for the detailed bug report. We're not seeing the behavior here yet, but the details should help track down the differences. Did the way I built and installed it have anything to do with the flakiness? No virus found in this incoming message. Checked by AVG - www.avg.com Version: 9.0.791 / Virus Database: 271.1.1/2765 - Release Date: 03/23/10 02:33:00</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5	install	constantly	dropping	connections on unloaded server</header>
    <date>Tue Mar 23 21:51:26 CET 2010</date>
    <body>I have not. I think that's probably a good idea, so late tonight I'll try installing it fresh. What's the right way to invoke it? Just not run make/make install? http://bugs.caucho.com/view.php?id=3960 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5	install	constantly	dropping	connections on unloaded server</header>
    <date>Tue Mar 23 21:58:58 CET 2010</date>
    <body>Yes, we just untar it and run it with something like the following script: /**************************/ export JAVA_HOME=/opt/java/ export RESIN_HOME=/opt/[whatever]/ext/resin-pro-4.0.5 export SERVER_ROOT=/opt/[whatever]/server $JAVA_HOME/bin/java \ -server \ -Djava.util.logging.manager=com.caucho.log.LogManagerImpl \ -Djava.security.egd=/dev/urandom \ $* /**************************/ Aaron I have not. I think that's probably a good idea, so late tonight I'll try installing it fresh. What's the right way to invoke it? Just not run make/make install? Rick, Out of curiosity did you trying running a vanilla version of 4.0.5 without compiling (using Java sockets instead of the native sockets)?  I am curious if you still have the issue with it uncompiled. Aaron Scott, I've opened a bug for my 4.0.5 woes, including the config file and logs from my much more modern Open Solaris machine: http://bugs.caucho.com/view.php?id=3960 Thanks for the detailed bug report. We're not seeing the behavior here yet, but the details should help track down the differences. Did the way I built and installed it have anything to do with the flakiness? No virus found in this incoming message. Checked by AVG - www.avg.com Version: 9.0.791 / Virus Database: 271.1.1/2765 - Release Date: 03/23/10 02:33:00</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New	4.0.5	install	constantly	dropping	connections on unloaded server</header>
    <date>Sat Mar 27 07:26:34 CET 2010</date>
    <body>Well, it seems to be running pretty solidly like that. However, my only PHP app, WordPress, can't even find its database connection now. Moreover, I can't, no matter how much I crank up the logging, get Quercus to log anything about anything it does. If I modify a page, I get an info line indicating that the size changed (implying it's recompiling the page). I had some problems with Quercus and 4.0.5 before, but they were limited to certain constructs not rendering correctly. Why it's at all different running with an un-make-ed version of resin is beyond me. -- Rick http://bugs.caucho.com/view.php?id=3960 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New	4.0.5	install	constantly	dropping	connections on unloaded server</header>
    <date>Sat Mar 27 07:35:12 CET 2010</date>
    <body>I spoke a bit too soon. WordPress behaves exactly like it did before; title of blog posts don't appear anywhere. I had forgotten to tell resin where resin-root was, and it didn't load the DB driver. So, I feel like I'm pretty close to having a working 4.0.5, if it stays up and stable for a while, and if I can address the WordPress titles issue. http://bugs.caucho.com/view.php?id=3960 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New	4.0.5	install	constantly	dropping	connections on unloaded server</header>
    <date>Sat Mar 27 11:49:58 CET 2010</date>
    <body>Well, it definitely runs stably when running as pure Java. http://bugs.caucho.com/view.php?id=3960 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] New 4.0.5 install constantly	dropping	connections on unloaded server</header>
    <date>Thu Mar 18 22:14:48 CET 2010</date>
    <body>By the way, the server-dying thing seems to happen within just a couple of hours after launch. I launched it before lunch, and checked it just now, and it was dead again.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin and permissions</header>
    <date>Thu Mar 18 01:49:09 CET 2010</date>
    <body>I'm having a hard time getting resin (any version, but specifically 4.0.5) to behave in various modes. I'd like to use user "www" and group "www." Resin is sometimes launched by the OS, and sometimes by me with sudo. However, I can't use "console" mode with a user &amp;amp; group specified in the config file (it barfs). I also can't connect to port 80 if I don't launch as root. I also can't seem to make it happy regarding the permissions of the various directories. I keep my individual webapps inside my user home directories (I have a couple friends who use it, too), and so I want them to be able to deploy their webapps in their own directories. To that end, I tell everyone to use group "www" on their deployed files, and to let the group create directories and files in their WEB-INF. But I'm always having all sorts of issues with permissions, as my recent posts would attest. How am I actually supposed to run resin, and what perms must my deployments have? -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin and permissions</header>
    <date>Thu Mar 18 03:33:10 CET 2010</date>
    <body>Console isn't for launching root. It's really just a debugging mode. It's not a deployment mode. Well, you could start by setting the logging level to "finer" and giving the stack trace that I asked for earlier. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Expanding on errors</header>
    <date>Thu Mar 18 01:18:58 CET 2010</date>
    <body>I'm getting this error: [03/17 17:13:34.577]  WARNING com.caucho.server.webapp.ErrorPageManager sendServletErrorImpl /home1/rmann/www/org/roderickmann/comics/WEB-INF/work/_jsp/_index__jsp.java (Permission denied) But it's not clear to me why. the work dir is owned by www:www, and the user has rwx perms all the way down. The file actually exists. The directory was created by resin 4.0.5. Resin is configured for user &amp;amp; group "www". It was launched with: sudo /usr/java/bin/java -jar /usr/local/resin/lib/resin.jar -conf /var/resin/resin.xml -log-directory /var/logs/resin -root-directory /var/resin/root -verbose start It'd sure be nice if the exception could indicate what it's trying to do that file (obviously not create it, because it succeeded in doing that). Ideas? TIA! Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Expanding on errors</header>
    <date>Thu Mar 18 01:29:47 CET 2010</date>
    <body>Can you turn level="finer" in the &amp;lt;logger&amp;gt; configuration and send the stack trace? That message looks like a JDK IOException message (which is why it's cryptic :-) The stack trace will show what's actually happening. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] URGENT help! I can't get 4.0.5 configured</header>
    <date>Thu Mar 18 01:05:53 CET 2010</date>
    <body>In an effort to upgrade my server from 3.0.23 to 4.0.5, I screwed something up with the 3.0.23 installation, forcing me to complete the move to 4.0.5 right now. However, despite my best efforts, I get this error when I try to load one of the configured hosts: java.lang.NoClassDefFoundError: com/caucho/make/PersistentDependency There's no other information in the log to indicate what's wrong. Any suggestions? Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] URGENT help! I can't get 4.0.5 configured</header>
    <date>Thu Mar 18 01:11:21 CET 2010</date>
    <body>I lied. There's a bit more info. I'm trying deleting the work dir and restarting: [03/17 17:07:29.441]  WARNING com.caucho.jsp.JspManager compile java.lang.NoClassDefFoundError: com/caucho/make/PersistentDependency at java.lang.Class.getDeclaredConstructors0(Native Method) at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389) at java.lang.Class.getConstructor0(Class.java:2699) at java.lang.Class.newInstance0(Class.java:326) at java.lang.Class.newInstance(Class.java:308) at com.caucho.jsp.JspManager.preload(JspManager.java:333) at com.caucho.jsp.JspManager.compile(JspManager.java:237) at com.caucho.jsp.JspManager.createPage(JspManager.java:190) at com.caucho.jsp.JspManager.createPage(JspManager.java:169) at com.caucho.jsp.PageManager.getPage(PageManager.java:336) at com.caucho.jsp.PageManager.getPage(PageManager.java:266) at com.caucho.jsp.PageManager.getPage(PageManager.java:249) at com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) at com.caucho.jsp.QServlet.getPage(QServlet.java:210) at com.caucho.server.dispatch.PageFilterChain.compilePage(PageFilterChain.java:238) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:145) at com.latencyzero.server.filter.ExternalReferrerBlockFilter.doFilter(ExternalReferrerBlockFilter.java:145) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:286) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:775) at com.caucho.server.connection.TcpConnection.dispatchRequest(TcpConnection.java:600) at com.caucho.server.connection.TcpConnection.handleRequestsImpl(TcpConnection.java:566) at com.caucho.server.connection.TcpConnection.handleRequests(TcpConnection.java:519) at com.caucho.server.connection.TcpConnection$AcceptTask.doTask(TcpConnection.java:1100) at com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1037) at com.caucho.server.connection.TcpConnection$AcceptTask.run(TcpConnection.java:1068) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: java.lang.ClassNotFoundException: com.caucho.make.PersistentDependency in DynamicClassLoader[SimpleLoader[/home1/rmann/www/org/roderickmann/www/WEB-INF/work]] at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1340) at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1316) at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) ... 30 more http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] SOLVED (at least for now) I can't get 4.0.5	configured</header>
    <date>Thu Mar 18 01:13:25 CET 2010</date>
    <body>Yep, that was it. Sorry for the noise. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Comet without AJAX</header>
    <date>Fri Mar 12 01:42:55 CET 2010</date>
    <body>Suppose I only had the regular J2SE http libraries but wanted to write a client for comet, very much like the example: http://www.caucho.com/resin-3.1/examples/servlet-comet/ , but as theres no browser the updates just get System.out.println'd out. Is this possible please? Thanks.</body>
  </mail>
  <mail>
    <header>[Resin-interest] XSLT Processing</header>
    <date>Wed Mar 10 19:31:52 CET 2010</date>
    <body>Hi, To process XSL using resin, can I change the location of where XSL is processed?  I think that by default it is WEB-INF/xsl, but I'd like to move it out of the subfolder WEB-INF. Thanks Joey</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] XSLT Processing</header>
    <date>Wed Mar 10 23:56:16 CET 2010</date>
    <body>You can specify the full path if you want when you specify the stylesheet. Even the WEB-INF/xsl itself isn't special; it's just a directory on the classpath. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] XSLT Processing</header>
    <date>Thu Mar 11 00:07:05 CET 2010</date>
    <body>-----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Wednesday, March 10, 2010 2:56 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] XSLT Processing You can specify the full path if you want when you specify the stylesheet. Even the WEB-INF/xsl itself isn't special; it's just a directory on the classpath. -- Scott ------------------------------------------------------------------------ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] User resin runs as</header>
    <date>Mon Mar 08 23:23:03 CET 2010</date>
    <body>Is there a way to modify the user that Resin runs at per virtual host? I know that we can overwrite the User setting in resin.conf to make the server run as some other user than root, but what I want to know is if there is a way to specify the user setting within each virtual host entry. Here is my problem, I have Resin integrated into a cPanel server. Whenever a new account is setup in cPanel we automatically create config files that configures Resin for the account. The issue is when new files or directories are created within code. If someone creates a new directory in their home directory via code the directory is create with the 644 as the attributes and root:root as the owner. When this happens the user can't access the new file or directory via their FTP account because they don't have permissions. Every time this happens then need to open a ticket to have us modify the permissions of the file or directory so they can access it. I've tried to explain that they could access it via code but most of the time that goes over peoples heads. So my issue is that Resin is running as root and creating files as root in a users home directory. Is there any settings in the config files that I may not be aware of that may help with this scenario? -- Peter Amiri Founder | Alurium Hosting 949-338-3862 | pe...@alurium.com | http://www.alurium.com LinkedIn: http://www.linkedin.com/in/peteramiri | IM bpamiri (AIM/MSN/Y!/GTLK/SKYPE)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] User resin runs as</header>
    <date>Tue Mar 09 07:37:51 CET 2010</date>
    <body>You're running resin as root?? You should be slapped. Run as apache, resin or nobody, never root. To answer your question you could create a group called 'web' and add your clients and resin to that group. Adjust umasks to create directories as 775 and files as 664. Alternatively run multiple instances of resin as different users on different ports and use a front-end transparent proxy to serve the pages (this takes care of caching as well). The only issue I've had with this approach in the past is that the proxy causes the IP address seen by resin to be the IP address of the proxy, not the client (which can mess up IP-based authentication). http://www.alurium.com http://www.linkedin.com/in/peteramiri | IM bpamiri http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] User resin runs as</header>
    <date>Tue Mar 09 16:27:34 CET 2010</date>
    <body>We set ours at the &amp;lt;server-default&amp;gt; level to globally set all of our Resin processes to the same uid/gid, but you could just as easily move it down to the Our config looks like this (which was taken from one of the example resin configs): - If starting Resin as root on Unix, specify the user name - and group name for the web server user. Hope that helps. -Jamie -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Peter Amiri Sent: Monday, March 08, 2010 4:22 PM To: General Discussion for the Resin application server Subject: [Resin-interest] User resin runs as Is there a way to modify the user that Resin runs at per virtual host? I know that we can overwrite the User setting in resin.conf to make the server run as some other user than root, but what I want to know is if there is a way to specify the user setting within each virtual host entry. Here is my problem, I have Resin integrated into a cPanel server. Whenever a new account is setup in cPanel we automatically create config files that configures Resin for the account. The issue is when new files or directories are created within code. If someone creates a new directory in their home directory via code the directory is create with the 644 as the attributes and root:root as the owner. When this happens the user can't access the new file or directory via their FTP account because they don't have permissions. Every time this happens then need to open a ticket to have us modify the permissions of the file or directory so they can access it. I've tried to explain that they could access it via code but most of the time that goes over peoples heads. So my issue is that Resin is running as root and creating files as root in a users home directory. Is there any settings in the config files that I may not be aware of that may help with this scenario? -- Peter Amiri Founder | Alurium Hosting 949-338-3862 | pe...@alurium.com | http://www.alurium.com LinkedIn: http://www.linkedin.com/in/peteramiri | IM bpamiri (AIM/MSN/Y!/GTLK/SKYPE)</body>
  </mail>
  <mail>
    <header>[Resin-interest] AMFPHP on Quercus</header>
    <date>Fri Mar 05 01:32:02 CET 2010</date>
    <body>Greetings, I'm just getting started with Quercus and am in a situation where an existing application is using AMFPHP.  Looking at the client packets that AMFPHP is storing in the logs, they appear to be well-formed. When I look at them on the wire with Wireshark, they have Java class names in them. It makes perfect sense that the objects in Quercus are Java objects, but the serialization of same seems to be different than what AMFPHP wants to serialize them as, causing the issue. If I am understanding the issue correctly, is there a way to have the objects serialize as if they were native PHP objects? Failing that, I would like to modify AMFPHP so that it uses BlazeDS to send the object over the wire.  Has anyone attempted this?  If it's just dead simple, that's a perfectly appropriate answer too.  I was just hoping to not dig all the way into this to find there are known issues in this realm. Any information kindly appreciated, Brian</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] AMFPHP on Quercus</header>
    <date>Fri Mar 05 01:43:59 CET 2010</date>
    <body>Hi Brian, I think your best bet is to use BlazeDS. As far as I know, nobody has used AMFPHP with Quercus, but using BlazeDS would be simple (just use new Java("some.blazeds.Clazz", "first arg", "etc") to create objects). You could also try using Hessian Flash, but then you'd need your objects to be Java objects that you access from PHP. Thanks, Emil http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] AMFPHP on Quercus</header>
    <date>Fri Mar 05 17:58:01 CET 2010</date>
    <body>Thanks Emil.  That makes some sense, but as I think about it, I'm not sure I understand how to wire these together.  Blaze is obviously Java, and the point of any of these RPC abstractions is to instantiate a remote service bean and call methods.  PHP can instantiate Java easily enough, but I do not see a supported way for Java to instantiate a PHP service object.  So there's no way for Blaze to instantiate a "PHP object" (i.e. a PHP object compiled into Java), or even a proxy for the PHP object that contains the glue.  Without that, I can't imagine (in hindsight) how using Blaze will ever work as a front end for PHP code. I'm far from being a master of PHP, but I'm wondering if there might be a misfeature in the PHP standard library implementation for Quercus.  This is super simple to test... unpack http://sourceforge.net/projects/amfphp/files/amfphp/amfphp%201.9.zip and drop it into your webapp root.  No configuration is necessary. Then load http://localhost:8080/amfphp/browser/index.html and you'll see the issue. Am I missing anything obvious? Cheers, Brian http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] AMFPHP on Quercus</header>
    <date>Fri Mar 05 18:36:58 CET 2010</date>
    <body>http://sourceforge.net/projects/amfphp/files/amfphp/amfphp%201.9.zip http://localhost:8080/amfphp/browser/index.html and you'll I don't think so. I'll file this as a bug - there might be an easy fix. http://bugs.caucho.com/view.php?id=3926 Invoking the PHP from Java can be tricky for cases like these.  Some care needs to be taken to do it correctly. Thanks, Emil http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] AMFPHP on Quercus</header>
    <date>Wed Mar 17 22:19:04 CET 2010</date>
    <body>http://bugs.caucho.com/view.php?id=3926 Hi Emil, I thought to check in on this as we get our PHP in deployed in the Java WAR.  Unfortunately, the path that I've had to take is to unzip the tarball into /var/www/html and let httpd handle it.  But it would be much nicer to not have to do that. I noticed the bug was marked as "minor".  If that's the case, I guess I should be able to debug it.  Is Quercus open source?  I didn't see a source jar attached to the maven repository artifacts, so I just assumed something so cool was closed source.  :-) If not, maybe I could hire someone on your end to look at it.  Hit me off-list if that's an option. Failing all that (or possibly in addition to that), it would be great to figure out how to call PHP from Java too. Any thoughts much appreciated!</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin 4.0.4 lacks of bin/ dir</header>
    <date>Fri Feb 26 21:58:48 CET 2010</date>
    <body>resin 4.0.4 lacks of bin/ directory</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4.0.4 lacks of bin/ dir</header>
    <date>Thu Mar 04 02:23:53 CET 2010</date>
    <body>The bin/ directory only had a resin.sh script in it before.  Do you want that back?  All it does is run "java -jar lib/resin.jar", followed by the commands you pass in.  If it's helpful, we can replace it. BTW, the command to run Resin with console output has changed to "java -jar lib/resin.jar console" if you're used to running it that way. Thanks, Emil</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4.0.4 lacks of bin/ dir</header>
    <date>Thu Mar 04 03:20:12 CET 2010</date>
    <body>Well , for an application server , having a "bin/"  directory with some start-up / shut-down scripts is natural / conventional for most developers...</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4.0.4 lacks of bin/ dir</header>
    <date>Thu Mar 04 05:32:18 CET 2010</date>
    <body>That's fair.  I'll see if it can go back into the 4.0.5 distro. Thanks, Emil http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4.0.4 lacks of bin/ dir</header>
    <date>Wed Mar 17 17:46:54 CET 2010</date>
    <body>That's fair.  I'll see if it can go back into the 4.0.5 distro. Thanks, Emil Well , for an application server , having a "bin/"  directory with some start-up / shut-down scripts is natural / conventional for most developers... BTW, the command to run Resin with console output has changed to "java -jar lib/resin.jar console" if you're used to running it that way. Upgrades/downgrades are simpler too for those longtime users who link the init.d/... startup script to the bin/ dir.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Apache vhosts and Resin regex</header>
    <date>Mon Feb 22 07:00:44 CET 2010</date>
    <body>Hi all. I have some sites I'm moving from CF/JRun to Railo/Resin3.1.9. I'm using Apache 2.0 with the caucho connector. I'm struggling with the resin.conf setup. My goal is to only setup Apache for each new site and leave resin.conf alone. This is what I have, it mostly works: This is what I want, It doesn't work. It's a valid regex so I'm a bit stumped. It seems like resin doesn't support the full capabilities of Perl regex syntax. Is there anything I can do to get this working? My second issue is that when I say "mostly works" the issue is that CFML templates in the ../base/site directory spawn a seperate web-context. This means I can't share session variables with scripts running in the main root. Is there a way I can have 2 document directories/roots that share a context (without nesting base under the root-directory)?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Apache vhosts and Resin regex</header>
    <date>Mon Feb 22 14:08:40 CET 2010</date>
    <body>I use a product called regex buddy.  Java regexes are different than perl regexes, which are different than Unix, PCRE, Xpath, .NET.... I'm not a regex expert so sorry I couldn't be of more help, but that tool is immensely helpful. -jk http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin:AdminAuthenticator -	com.caucho.bam.NotAuthorizedException</header>
    <date>Thu Feb 18 16:08:44 CET 2010</date>
    <body>I've configured an admin user in Resin 4.0.3: When I try to start the server, an exception occurs: $ java -jar lib/resin.jar start -verbose Resin/4.0.3 can't start -server '' for watchdog at 127.0.0.1:6600. com.caucho.bam.NotAuthorizedException: ActorError[type=auth,group=not-authorized,text=SelfEncryptedCookie[] is invalid because it does not correctly decrypt] What is now the syntax for passing username and password to command-line admin? Or am I misguided in that this is not meant to be used when you intend to use the command line? What is the syntax for the admin-users.xml file commented out in the example given above? Is it just the user element wrapped in any top-level element like &amp;lt;users&amp;gt;? -- Michael.Ludwig (#) XING.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin:AdminAuthenticator - com.caucho.bam.NotAuthorizedException</header>
    <date>Thu Feb 18 18:55:47 CET 2010</date>
    <body>Hi Michael, Can you try running: $ java -jar lib/resin.jar shutdown It's possible you have an old watchdog running that hasn't updated its authenticator.  "shutdown" kills all watchdogs and resin instances. Emil http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin:AdminAuthenticator - com.caucho.bam.NotAuthorizedException</header>
    <date>Thu Feb 18 19:48:50 CET 2010</date>
    <body>Am 18.02.2010 um 18:55 schrieb Emil Ong: Hi Emil, that worked. With regard to the following exception: This seems to occur when I make a change to the username or password while the server (or watchdog, for that matter) is running. I assume it is meant to be read at startup and stay as it is. It seems that start/stop/status etc via the command line doesn't have anything to do with admin authentication. But maybe the command line goes via the watchdog service, and that service gets confused when the config file changes? -- Michael.Ludwig (#) XING.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin:AdminAuthenticator - com.caucho.bam.NotAuthorizedException</header>
    <date>Thu Feb 18 21:06:59 CET 2010</date>
    <body>Cool. Yup. That's right. The username and password aren't intended to come from the command line. They are pulled from the configuration file by the Resin boot and passed to the watchdog. The command line authentication uses the admin password to verify the Resin boot is allowed to start or stop an instance. You don't really need to know the password or enter it on the command line. It's essentially using the password hash as a shared key. http://caucho.com/ns/resin" Whenever you do a resin:import within an element, the top-level tag of Take care, Emil</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin:AdminAuthenticator - com.caucho.bam.NotAuthorizedException</header>
    <date>Fri Feb 19 14:17:31 CET 2010</date>
    <body>Am 18.02.2010 um 21:05 schrieb Emil Ong: Thanks for these clarifications. http://caucho.com/ns/resin" Works. Okay, sounds like: The document element (top-level tag) of the imported file has to match the parent element of &amp;lt;resin:import&amp;gt; in the importing document. Correct? If that's the rule, maybe it would be useful to spell it out more explicitly here: http://www.caucho.com/resin/doc/env-tags.xtp#resin:import Thanks. -- Michael.Ludwig (#) XING.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin:AdminAuthenticator - com.caucho.bam.NotAuthorizedException</header>
    <date>Mon Feb 22 19:46:36 CET 2010</date>
    <body>That's right. http://www.caucho.com/resin/doc/env-tags.xtp#resin:import I agree.  We're actually in a doc refactor right now, so I'll make sure we integrate the description. Thanks, Emil</body>
  </mail>
  <mail>
    <header>[Resin-interest] [4.0.3] Two Strange Errors</header>
    <date>Thu Feb 18 16:04:32 CET 2010</date>
    <body>Hi , I am trying 4.0.3 , and found two strange errors that never occurred in 3.1.9 : First is db error : SessionImpl[aaahmbrfEEwfP7hs0KHBs,]: can't serialize session Block ReadBlock[Table[resin_data_default:2],ea8002] is not an index com.caucho.db.index.BTree.validateIndex(BTree.java:887) com.caucho.db.index.BTree.lookup(BTree.java:196) com.caucho.db.index.BTree.lookup(BTree.java:211) com.caucho.db.index.BTree.lookup(BTree.java:211) com.caucho.db.index.BTree.lookup(BTree.java:171) com.caucho.db.sql.IndexExpr.evalIndex(IndexExpr.java:145) com.caucho.db.sql.IndexExpr.initRow(IndexExpr.java:104) com.caucho.db.sql.Query$TailInitRow.initBlockRow(Query.java:1034) com.caucho.db.sql.Query.start(Query.java:745) com.caucho.db.sql.UpdateQuery.execute(UpdateQuery.java:98) com.caucho.db.jdbc.PreparedStatementImpl.execute(PreparedStatementImpl.java:344) com.caucho.db.jdbc.PreparedStatementImpl.executeUpdate(PreparedStatementImpl.java:311) com.caucho.server.distcache.DataStore.updateExpires(DataStore.java:417) com.caucho.server.distcache.DataStore.save(DataStore.java:339) com.caucho.server.distcache.AbstractDataCacheManager.writeData(AbstractDataCacheManager.java:967) com.caucho.server.distcache.AbstractDataCacheManager.putStream(AbstractDataCacheManager.java:409) com.caucho.server.distcache.FileCacheEntry.put(FileCacheEntry.java:117) com.caucho.distcache.AbstractCache.put(AbstractCache.java:506) com.caucho.server.session.SessionImpl.save(SessionImpl.java:746) com.caucho.server.session.SessionImpl.saveAfterRequest(SessionImpl.java:717) com.caucho.server.session.SessionImpl.finishRequest(SessionImpl.java:531) com.caucho.server.http.AbstractCauchoRequest.finishRequest(AbstractCauchoRequest.java:405) com.caucho.server.http.HttpServletRequestImpl.finishRequest(HttpServletRequestImpl.java:2106) com.caucho.server.http.AbstractHttpRequest.finishRequest(AbstractHttpRequest.java:1684) com.caucho.server.http.HttpRequest.finishRequest(HttpRequest.java:1243) com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:801) com.caucho.server.connection.TcpConnection.handleRequestsImpl(TcpConnection.java:620) com.caucho.server.connection.TcpConnection.handleRequests(TcpConnection.java:558) com.caucho.server.connection.TcpConnection$AcceptTask.doTask(TcpConnection.java:1200) com.caucho.server.connection.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1137) com.caucho.server.connection.TcpConnection$AcceptTask.run(TcpConnection.java:1168) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Second is NotSerializableException: java.nio.HeapCharBuffer (thrown by wicket 1.4.6) Caused by: java.io.NotSerializableException: java.nio.HeapCharBuffer at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1156) at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509) at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1474) at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392) at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150) at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509) at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1474) at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392) at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150) at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1338) at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1146) at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509) at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1474) at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392) at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150) at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509) at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1474) at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392) at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150) at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509) at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1474) at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392) at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150) at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509) at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1474) at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392) at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150) at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509) at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1474) at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392) at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150) at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509) at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1474) at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392) at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150) at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509) at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1474) at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1392) at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1150) at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1509) at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:416) at org.apache.wicket.Component.writeObject(Component.java:4439) at sun.reflect.GeneratedMethodAccessor1878.invoke(Unknown Source)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [4.0.3] Two Strange Errors</header>
    <date>Thu Feb 18 23:19:05 CET 2010</date>
    <body>I've reported the first as a bug report. This looks like a missing transient field somewhere. java.io serialization isn't very helpful with tracking that down, though, so I can't suggest anything beyond that. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [4.0.3] Two Strange Errors</header>
    <date>Fri Feb 19 04:51:40 CET 2010</date>
    <body>So , is this the problem of Wicket or Resin or JDK (1.6.0_18) ?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [4.0.3] Two Strange Errors</header>
    <date>Fri Feb 19 18:22:16 CET 2010</date>
    <body>mailto:f...@caucho.com http://java.io There's not enough information, but it's probably not the JDK. Do you have any idea what's being stored in the serialized object? -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Custom Tag or XSLT for website theme</header>
    <date>Thu Feb 18 01:23:01 CET 2010</date>
    <body>Hi, We've developed a custom tag library for our ecommerce application.  We have a requirement to be able to apply many different themes/templates to the software.    We currently are using a series of custom tags for much of the functions/themes in the software. Right now we are setting pages variables that hold theme information, and are sending these settings into the TAG, to process a desired output. Instead of setting pages variables we are looking into XSL + Custom Tags, but are not sure if this will yield a better solution.  The custom tags are nice because we have created an easy way to configure functions, but they don't deal with the theme requirements very well. Is there a better way to apply a theme in Java than custom tags?   I've used XSLT before, but not sure if this would be a better way to handle this. Requirements are many themes, fast loading, object oriented, easily configurable.  Any suggestions are welcome and greatly appreciated. Thanks!</body>
  </mail>
  <mail>
    <header>[Resin-interest] Starting Resin 4.x on OS X using launchd</header>
    <date>Sat Feb 13 01:16:46 CET 2010</date>
    <body>The preferred way to launch processes at boot/login in OS X since 10.4 is to http://developer.apple.com/MacOsX/launchd.html launchd daemon takes over many tasks from cron, xinetd, mach_init, and init, which are UNIX programs that traditionally have handled system initialization, called system scripts, run startup items, and generally prepared the system for the user." All well and good. It's a nice service and reasonably easy to manage, especially when using something like Lingon http://www.macupdate.com/info.php/id/19879/lingon feature that is annoyingly incompatible with Resin 4.x; it kills all child processes that the first process started when the first process exits. Unfortunately, from what I can tell, this is exactly what Resin 4.x does. The ResinBoot class is responsible for creating the WatchDog process, and the WatchDog is what creates and then monitors the main Resin process, but after the WatchDog starts, ResinBoot exits so launchd kills the child processes. So what's a girl to do? I don't know. I'm not a girl. But here's what I did. Buried down in an Apple Developer Connection document, Daemons and Agents, is a http://j.mp/bHw3XZ the section that explains how launchd will kill child processes if the original process exits. But it also lists a few work-arounds. The first two are specific to daemon and probably not doable for Resin, at least not without mucking around with Resin and rebuilding it. But the third, and of course the "least-preferable" by Apple's standards, is to use the AbandonProcessGroup property in Resin's startup plist file. Success! Once you have your .plist file created (easy with Lingon), you can either edit it directly (it should be in /Library/LaunchDaemons), or within Lingon switch into "Expert Mode" and choose the AbandonProcessGroup parameter from the "Insert parameter..." drop down. It will look like this in the plist file: Here's the definition of AbandonProcessGroup: When a job dies, launchd kills any remaining processes with the same process group ID as the job. Setting this key to true disables that behavior. I can't say this is the best/only solution, but it worked for me. Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Starting Resin 4.x on OS X using launchd</header>
    <date>Wed Feb 17 23:10:55 CET 2010</date>
    <body>http://developer.apple.com/MacOsX/launchd.html http://www.macupdate.com/info.php/id/19879/lingon Thanks. I've added this as  a bug report. It might be possible to add a "watchdog" argument like "console" for Mac (I'm not sure if the JNI will get properly loaded in that case, but I'm sure there's a way to work around it.) -- Scott http://j.mp/bHw3XZ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Starting Resin 4.x on OS X using launchd</header>
    <date>Thu Feb 18 01:47:56 CET 2010</date>
    <body>http://developer.apple.com/MacOsX/launchd.html http://www.macupdate.com/info.php/id/19879/lingon You're welcome. But I don't think it's a bug. Resin isn't the only "daemon" or "thing that you want to act like a daemon" that isn't compatible with launchd's default behavior of killing child processes. Which I guess is why launchd provides the AbandonProcessGroup argument in the first place. Anyway, it works and I don't think it's doing any harm. It just wasn't obvious (to me) how to get it working. I did try running it with the 'console' argument, but that (obviously) dumps all the output to the console (stdout, stderr, even gc messages). I didn't go as far as checking if ResinBoot still exits when starting with the console argument, but as I recall the code, I think it does (could be wrong though). You'd have to add a "noexit" or "launchd-compatible" parameter, or whatever, that stops ResinBoot from exiting. But presumably that would just eat up a small chunk of memory for no reason other than to allow compatibility with OSX's launchd. Unless it's a security risk, I think using AbandonProcessGroup is preferable. I guess the other option would be to abandon ResinBoot and fold its behavior directly into the WatchDog. Rob http://j.mp/bHw3XZ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Starting Resin 4.x on OS X using launchd</header>
    <date>Fri Apr 09 05:25:15 CEST 2010</date>
    <body>Has there been any progress on this front? I was running resin under launchd before, but it's been broken for some time (not sure if it's because of something I did to my little launcher tool, or because I upgraded to 4.x). http://developer.apple.com/MacOsX/launchd.html http://www.macupdate.com/info.php/id/19879/lingon http://j.mp/bHw3XZ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.1 Snapshot</header>
    <date>Fri Feb 12 19:06:18 CET 2010</date>
    <body>After the Resin 3.1 section has been resurrected on the Caucho Download page, I've tested today a bug-report marked as fixed and it looks quite well so far. One minor issue is the deviating Version of the Snapshot. It reports be be "Resin-3.1.s090506", but it is "Resin-3.1.s100107". This is what /resin-admin shows Server id: snapshot-test Version: Resin-3.1.s090506 (built Wed, 06 May 2009 11:45:04 PDT) Config file: /home/stbu/snapshot-test/conf/resin.conf Resin home: /home/stbu/snapshots/resin-pro-3.1.s100107 However, when does Caucho plan to release Resin 3.1.10? -- Steffen</body>
  </mail>
  <mail>
    <header>[Resin-interest] Documentation bug?</header>
    <date>Fri Feb 12 01:38:58 CET 2010</date>
    <body>The documentation for the &amp;lt;keepalive-max&amp;gt; tag ( http://caucho.com/resin-3.1/doc/server-tags.xtp#keepalive-max ) states: "A value of -1 disables keepalives." I tried this with resin-3.1.8 and it appears to still use keep-alive with that setting.  If I follow the source code correctly, resin will use an effective setting of 256 if the config file specifies a value less than zero.  However, a setting of "0" (zero) appears to disable keepalives. -- Erik</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.1 disappeared from www.caucho.com/download</header>
    <date>Wed Feb 10 22:12:47 CET 2010</date>
    <body>Why isn't Resin 3.1 anymore available for Download at http://www.caucho.com/download/ I'd like to download the current 3.1 snapshot :-( -- Steffen</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1 disappeared from	www.caucho.com/download</header>
    <date>Thu Feb 11 22:42:26 CET 2010</date>
    <body>Why isn't Resin 3.1 anymore available for Download at  http://www.caucho.com/download/ I'd like to download the current 3.1 snapshot :-( It's right there. At the bottom. ???</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1 disappeared from	www.caucho.com/download</header>
    <date>Thu Feb 11 22:47:56 CET 2010</date>
    <body>http://www.caucho.com/download/ maybe 3.0 will be there again ;-) http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1 disappeared from	www.caucho.com/download</header>
    <date>Thu Feb 11 22:52:10 CET 2010</date>
    <body>He's not crazy! I looked yesterday too and it wasn't there :) No worries, it's back. -tyson http://www.caucho.com/download/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1 disappeared	from	www.caucho.com/download</header>
    <date>Thu Feb 11 23:26:50 CET 2010</date>
    <body>I fixed it :-) -- Scott mailto:steffen.bu...@gmail.com mailto:lockst...@mac.com http://www.caucho.com/download/ mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] CanDI java.lang.StackOverflowError</header>
    <date>Wed Feb 10 10:44:17 CET 2010</date>
    <body>I receive java.lang.StackOverflowError when Resin tries to read the configuration file: C:/Progra~1/mireka-1.2/conf/mireka.xml:325: com.caucho.confi g.core.ResinIf.init(): java.lang.StackOverflowError I believe there is no circular constructor dependency in the file. To be sure I replaced almost all constructor initialisation blocks with setter initialization. Is there a way to debug this error? There is no stack trace or anything else in the log.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI java.lang.StackOverflowError</header>
    <date>Wed Feb 10 18:23:35 CET 2010</date>
    <body>Can you send that section of the configuration file? It looks like it's something to do with the &amp;lt;resin:if&amp;gt; like the test EL expression, although it could also be the contents of the if. Also, it's possible that adding a &amp;lt;logger name="" level="finer"/&amp;gt; in the -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI java.lang.StackOverflowError</header>
    <date>Wed Feb 10 22:43:08 CET 2010</date>
    <body>I reduced the configuration to the minimum. It consists of a circular setter dependency, and then a separate third constructor initialization which refers to one of circular items. Both have to be present, otherwise StackOverflow doesn't happen. I attached a configuration sample and a part of the log file, logged on "finer" level. Scott Ferguson írta: I receive java.lang.StackOverflowError when Resin tries to read the configuration file: C:/Progra~1/mireka-1.2/conf/mireka.xml:325: com.caucho.confi g.core.ResinIf.init(): java.lang.StackOverflowError I believe there is no circular constructor dependency in the file. To be sure I replaced almost all constructor initialisation blocks with setter initialization. Is there a way to debug this error? There is no stack trace or anything else in the log. Can you send that section of the configuration file? It looks like it's something to do with the &amp;lt;resin:if&amp;gt; like the test EL expression, although it could also be the contents of the if. Also, it's possible that adding a &amp;lt;logger name="" level="finer"/&amp;gt; in the -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI java.lang.StackOverflowError</header>
    <date>Thu Feb 11 00:11:47 CET 2010</date>
    <body>This could be a lazy init problem I think. The scheduled tasks would be inited before some of other beans which the tasks need. I've met this before. The workaround: Inject the Injector into your task, no other webbeans. When the task starts (run()), create webbeans instances via the injector. -Wesley 2010/2/11 Hontvári József &amp;lt;hontv...@flyordie.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.caucho.com for information on Resin Professional, http://www.caucho.com for information and licensing. http://default ] add http://default ] initializing http://default ] add http://default ] http://default ] initializing http://default ] add http://default ]'. http://default ] init http://default ] starting http://default ] active http://default/resin-admin ] add bean http://default/resin-admin ] http://default/resin-admin ] add bean http://default/resin-admin ] http://default/resin-admin ] add bean http://default/resin-admin ] add bean XmlBean[Allow, http://default/resin-admin ] add bean http://default/resin-admin ] add bean http://default/resin-admin ] http://default/resin-admin ] add bean http://default/resin-admin ] add bean http://default/resin-admin ]'. http://default/resin-admin ] init http://default/resin-admin ] starting http://default/resin-admin ] active http://default/resin-doc ] add bean http://default/resin-doc ] initializing http://default/resin-doc ] add bean http://default/resin-doc ] http://default/resin-doc ] add bean http://default/resin-doc ] initializing http://default/resin-doc ] add bean http://default/resin-doc ]'. http://default/resin-doc ] init http://default/resin-doc ] starting http://default/resin-doc ] active http://default/mireka ] http://default/mireka ] initializing http://default/mireka ] http://default/mireka ] http://default/mireka ] http://default/mireka ] http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI java.lang.StackOverflowError</header>
    <date>Thu Feb 11 12:37:16 CET 2010</date>
    <body>The name of the first class is misleading (maybe Scheduled... would have been better, it is executing scheduled tasks itself), Resin's scheduler hasn't been involved in the configuration. But the issue is either the same or we have two independent issues. If I remove the constructor initialization by creating an empty constructor and use setter instead of it, then the CanDI initialization does completes. However, if I add @Startup annotation, so a class instance is actually created, then I again receive StackOverflow. Wesley Wu írta:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI java.lang.StackOverflowError</header>
    <date>Thu Feb 11 23:38:45 CET 2010</date>
    <body>Thanks. I have this fixed for 4.0.4. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI java.lang.StackOverflowError</header>
    <date>Sun Mar 14 04:23:46 CET 2010</date>
    <body>I have downloaded 4.0.4 but it still throws StackOverflowError on the same example configuration file. Scott Ferguson írta: The name of the first class is misleading (maybe Scheduled... would have been better, it is executing scheduled tasks itself), Resin's scheduler hasn't been involved in the configuration. But the issue is either the same or we have two independent issues. If I remove the constructor initialization by creating an empty constructor and use setter instead of it, then the CanDI initialization does completes. However, if I add @Startup annotation, so a class instance is actually created, then I again receive StackOverflow. Thanks. I have this fixed for 4.0.4. -- Scott Wesley Wu írta: This could be a lazy init problem I think. The scheduled tasks would be inited before some of other beans which the tasks need. I've met this before. The workaround: Inject the Injector into your task, no other webbeans. When the task starts (run()), create webbeans instances via the injector. -Wesley 2010/2/11 Hontvári József &amp;lt;hontv...@flyordie.com&amp;gt;: I reduced the configuration to the minimum. It consists of a circular setter dependency, and then a separate third constructor initialization which refers to one of circular items. Both have to be present, otherwise StackOverflow doesn't happen. I attached a configuration sample and a part of the log file, logged on "finer" level. Scott Ferguson írta: I receive java.lang.StackOverflowError when Resin tries to read the configuration file: C:/Progra~1/mireka-1.2/conf/mireka.xml:325: com.caucho.confi g.core.ResinIf.init(): java.lang.StackOverflowError I believe there is no circular constructor dependency in the file. To be sure I replaced almost all constructor initialisation blocks with setter initialization. Is there a way to debug this error? There is no stack trace or anything else in the log. Can you send that section of the configuration file? It looks like it's something to do with the &amp;lt;resin:if&amp;gt; like the test EL expression, although it could also be the contents of the if. Also, it's possible that adding a &amp;lt;logger name="" level="finer"/&amp;gt; in the -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI java.lang.StackOverflowError</header>
    <date>Sun Mar 14 16:24:15 CET 2010</date>
    <body>The workaround recommended by Wesley would work (using javax.enterprise.inject.Instance, I tried it, it doesn't throw StackOverflowError), assuming that there is only one instance, but there is more then one in my case. Using setter injection instead of constructor injection, but using @Startup doesn't work either, StackOverflowError is thrown here too. Hontvári József írta: I have downloaded 4.0.4 but it still throws StackOverflowError on the same example configuration file. Scott Ferguson írta: The name of the first class is misleading (maybe Scheduled... would have been better, it is executing scheduled tasks itself), Resin's scheduler hasn't been involved in the configuration. But the issue is either the same or we have two independent issues. If I remove the constructor initialization by creating an empty constructor and use setter instead of it, then the CanDI initialization does completes. However, if I add @Startup annotation, so a class instance is actually created, then I again receive StackOverflow. Thanks. I have this fixed for 4.0.4. -- Scott Wesley Wu írta: This could be a lazy init problem I think. The scheduled tasks would be inited before some of other beans which the tasks need. I've met this before. The workaround: Inject the Injector into your task, no other webbeans. When the task starts (run()), create webbeans instances via the injector. -Wesley 2010/2/11 Hontvári József &amp;lt;hontv...@flyordie.com&amp;gt;: I reduced the configuration to the minimum. It consists of a circular setter dependency, and then a separate third constructor initialization which refers to one of circular items. Both have to be present, otherwise StackOverflow doesn't happen. I attached a configuration sample and a part of the log file, logged on "finer" level. Scott Ferguson írta: I receive java.lang.StackOverflowError when Resin tries to read the configuration file: C:/Progra~1/mireka-1.2/conf/mireka.xml:325: com.caucho.confi g.core.ResinIf.init(): java.lang.StackOverflowError I believe there is no circular constructor dependency in the file. To be sure I replaced almost all constructor initialisation blocks with setter initialization. Is there a way to debug this error? There is no stack trace or anything else in the log. Can you send that section of the configuration file? It looks like it's something to do with the &amp;lt;resin:if&amp;gt; like the test EL expression, although it could also be the contents of the if. Also, it's possible that adding a &amp;lt;logger name="" level="finer"/&amp;gt; in the -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI java.lang.StackOverflowError</header>
    <date>Mon Mar 15 11:09:53 CET 2010</date>
    <body>one possibility of the problem: * Tasks was now initialized before any(maybe some of) @ApplicationScoped/@Singleton bean initialized. * If a task need to inject a bean which was not prepared by the CanDI container yet (I.E. an EntityManagerFactory) , it will not be injected. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CanDI java.lang.StackOverflowError</header>
    <date>Wed Mar 17 19:26:30 CET 2010</date>
    <body>Hmm. I did simplify the original test case (the simplified test triggered the original error), so it's possible there's something the simplified test case didn't catch. I've added a new bug report at http://bugs.caucho.com/view.php?id=3954 -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] [4.0.3] CanDI in Wicket :	InjectManager.injectObject() ?</header>
    <date>Mon Feb 08 03:34:50 CET 2010</date>
    <body>I am trying to integrate CanDI in Wicket , but ... In the bottom of the document : http://www.caucho.com/resin/doc/resin-ioc.xtp But , I cannot find an injectObject() method in InjectManager  ... Is it deprecated too ? What is the correct way now ? Thanks a lot.</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin-2.1.11 configure Script Missing</header>
    <date>Mon Feb 08 02:12:43 CET 2010</date>
    <body>I'm trying to build mod_caucho.so on Linux.  The instructions say to run the configure script but there isn't one in the installation tree.  No configure.in either.  All I see are a few Makefile.in files. Where/how do I get the configure script? Thanks. -- Scott Dudley Senior Developer Telesoft Corp. | 3443 N. Central Ave., 18th Floor | Phoenix, AZ, 85012 *o:* (602) 308-1115* *| *f:* (602) 308-1300 | *w:* www.telesoft.com http://www.telesoft.com/?utm_source=signature&amp;amp;utm_medium=email&amp;amp;utm_campaign=signature</body>
  </mail>
  <mail>
    <header>[Resin-interest] Where is javax.inject.Current ?</header>
    <date>Sun Feb 07 09:26:11 CET 2010</date>
    <body>I am migrating from Spring to JSR-299 , I followed this http://blog.caucho.com/?p=137 , but the first frustration is that I cannot find @Current . I extracted javaee-16.jar from resin 4.0.2 , but I cannot find that ... I grabbed glassfish v3 but sees no such annotation , Is it deprecated ?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Where is javax.inject.Current ?</header>
    <date>Sun Feb 07 09:35:54 CET 2010</date>
    <body>according to the JSR299 &amp;amp; JSR330 final spec should use javax.inject.Inject instead 2010/2/7 smallufo &amp;lt;small...@gmail.com&amp;gt;: http://blog.caucho.com/?p=137 , http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Where is javax.inject.Current ?</header>
    <date>Sun Feb 07 09:48:51 CET 2010</date>
    <body>Oops , thanks for replying so soon. BTW , the docs should be updated ... http://blog.caucho.com/?p=137 , http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Where is javax.inject.Current ?</header>
    <date>Sun Feb 07 10:09:26 CET 2010</date>
    <body>the docs should be updated I can't agree more. :) 2010/2/7 smallufo &amp;lt;small...@gmail.com&amp;gt;: http://blog.caucho.com/?p=137 , http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Problem with com.caucho.log.EnvironmentLogger</header>
    <date>Sat Feb 06 20:57:52 CET 2010</date>
    <body>Dear Cognoscenti, I believe I have found a bug. The situation is a webapp with BerkeleyDB[1] (from Sleepycat software, now Oracle). Running it in Resin 3.1.8 fails during initialization and the culprit is the method com.caucho.log.EnvironmentLogger.getHandlers(). BerkeleyDB plays around with the loggers (java.util.logging) and the expectation[2] in the code base is that an array is always returned from getHandlers(), never null.  That seems to be a valid assumption, the method in EnvironmentLogger overrides a method in java.util.logging.Logger[3], which does indeed make sure return an empty array instead of null. mistaken it is just a matter of making the default value an empty array. In other words the constructor of EnvironmentLogger should call: That approach could affect how "parent" environments work, so maybe the fix should be a little bit more like the implementation in java.util.logging.Logger.  I don't understand the code well enough to make that judgement. The workaround is not entirely simple, I ended up grabbing all 8 loggers used by BerkeleyDB in this configuration and add a dummy handler to each of them. Thanks, Knut Forkalsrud [1]: http://download.oracle.com/maven/com/sleepycat/je/4.0.92/je-4.0.92.jar [2]: https://www.docjar.com/html/api/com/sleepycat/je/utilint/LoggerUtils.java.html#151 [3]: http://www.docjar.com/html/api/java/util/logging/Logger.java.html#1211</body>
  </mail>
  <mail>
    <header>[Resin-interest] [4.0.3] No bean named 'resin-webbeans-factory' is	defined</header>
    <date>Sat Feb 06 15:17:24 CET 2010</date>
    <body>Hi I'm trying to migrate from resin 3.1.9 to 4.1.3 , and from Spring to CanDI , The first error I encountered is to use Resin's WebBeans in Spring : I followed this step : http://wiki.caucho.com/Spring But resin 4.0.3 pops this error after a lot of initialization and mapping : What's going wrong ? 2010-02-06 22:14:20,570 INFO  support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.defaultlistablebeanfact...@1f9eba0: defining beans []; root of factory hierarchy 2010-02-06 22:14:20,581 ERROR context.ContextLoader - Context initialization failed org.springframework.beans.factory.access.BootstrapException: Unable to return specified BeanFactory instance: factory key [resin-webbeans-factory], from group with resource name [classpath*:beanRefContext.xml]; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'resin-webbeans-factory' is defined at org.springframework.beans.factory.access.SingletonBeanFactoryLocator.useBeanFactory(SingletonBeanFactoryLocator.java:410) at org.springframework.web.context.ContextLoader.loadParentContext(ContextLoader.java:341) at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:195) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45) at com.caucho.server.webapp.WebApp.start(WebApp.java:2726) at com.caucho.server.deploy.DeployController.startImpl(DeployController.java:693) at com.caucho.server.deploy.DeployController.restartImpl(DeployController.java:652) at com.caucho.server.deploy.StartAutoRedeployAutoStrategy.alarm(StartAutoRedeployAutoStrategy.java:177) at com.caucho.server.deploy.DeployController.handleAlarm(DeployController.java:815) at com.caucho.util.Alarm.handleAlarm(Alarm.java:432) at com.caucho.util.Alarm.run(Alarm.java:404) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'resin-webbeans-factory' is defined at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:387) at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:971) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:246) at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185) at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:168) at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:884) at org.springframework.beans.factory.access.SingletonBeanFactoryLocator.useBeanFactory(SingletonBeanFactoryLocator.java:397) ... 12 more</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [4.0.3] No bean named 'resin-webbeans-factory'	is defined</header>
    <date>Sat Feb 06 15:27:04 CET 2010</date>
    <body>I found resin-support.jar in 3.1.9 , but it seems not compatible with 4.0.3 , and throws these exceptions : ClassNotFoundException: com.caucho.webbeans.manager.WebBeansContainer in EnvironmentClassLoader [...] http://wiki.caucho.com/Spring</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 2.1.11 LoadBalanceServlet not Round-Robin?</header>
    <date>Sat Feb 06 02:17:40 CET 2010</date>
    <body>I'm using resin to load-balance requests to two srun's on another server.  We're long-time Resin users and much experience with this particular version.  We've implemented load-balancing a number of times so are familiar with same. In this particular scenario, I've observed while stress-testing the applications that requests are not being equally distributed to both services.  I've seen as many as 98 sessions on the first srun with the heap nearly exhausted with only 15 being served by the second and it's virtually idle. At other times, I've seen the load more equally distributed.  If it's truly round-robin, how could this gross imbalance occur?  The behavior seems to be intermittent but when it's bad, it's really bad. Thanks. -- Scott Dudley Senior Developer Telesoft Corp. | 3443 N. Central Ave., 18th Floor | Phoenix, AZ, 85012 *o:* (602) 308-1115* *| *f:* (602) 308-1300 | *w:* www.telesoft.com http://www.telesoft.com/?utm_source=signature&amp;amp;utm_medium=email&amp;amp;utm_campaign=signature</body>
  </mail>
  <mail>
    <header>[Resin-interest] Thread.sleep(100000) in contextDestroyed() does	not work</header>
    <date>Thu Feb 04 14:50:26 CET 2010</date>
    <body>Hi, Using Resin 3.1.9 In ServletContextListener if I do something like... void contextDestroyed(ServletContextEvent event) While(!isWorkCompleted) ... ... It works fine. But if we make it sleep for 100 seconds like... void contextDestroyed(ServletContextEvent event) While(!isWorkCompleted) ... ... And stop the server, and wait until ps -ef |grep resin shows that there is no such process running.  I don't find "after sleep..." in stdout.log. There is no exception in stdout.log/stderr.log/jvm.log either. What is going wrong? Any help? Thanks Vivek Saini</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Thread.sleep(100000) in contextDestroyed() does not work</header>
    <date>Wed Feb 10 15:49:20 CET 2010</date>
    <body>Hi, Watchdog's ShutdownWaitTime is the real culprit, which is * hardcoded * in com.caucho.boot.WatchdogConfig (line 86). As it is set to 60 seconds, it terminates its child resin process even if &amp;lt;shutdown-wait-max&amp;gt; (child of &amp;lt;server&amp;gt;) is more than 60s . (while loop at line 304 of com.caucho.boot.WatchdogProcess.closeInstance() gets terminated, which causes premature server process termination). Unless Watchdog's ShutdownWaitTime is configurable there is no use of com.caucho.server.resin.Resin only) Regards Vivek Saini Hi, Using Resin 3.1.9 In ServletContextListener if I do something like... void contextDestroyed(ServletContextEvent event) While(!isWorkCompleted) ... ... It works fine. But if we make it sleep for 100 seconds like... void contextDestroyed(ServletContextEvent event) While(!isWorkCompleted) ... ... And stop the server, and wait until ps -ef |grep resin shows that there is no such process running.  I don't find "after sleep..." in stdout.log. There is no exception in stdout.log/stderr.log/jvm.log either. What is going wrong? Any help? Thanks Vivek Saini</body>
  </mail>
  <mail>
    <header>[Resin-interest] [resin-interest] how to make isapi_srun.dll not to	use chunked encoding?</header>
    <date>Sun Jan 31 06:24:18 CET 2010</date>
    <body>Hi, we're using IIS6.0 + Resin 3.0.21. when I use an http client to send a request Resin via IIS, the reponse I got used chunked encoding. but my http client can't read that, so I want to make Resin not to use chunked encoding. When I send the request directly to Resin, but not IIS, the reponse wasn't chunked encoding, so i guess it's isapi_srun.dll changed that. is there any way to disable the chunked encoding when using isapi_srun.dll? Thanks.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [resin-interest] how to make isapi_srun.dll	not to use chunked encoding?</header>
    <date>Tue Feb 02 01:51:37 CET 2010</date>
    <body>Not at the moment, I am afraid. I added a bug report: http://bugs.caucho.com/view.php?id=3871 Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [resin-interest] how to make isapi_srun.dll	not to use chunked encoding?</header>
    <date>Tue Feb 02 15:33:06 CET 2010</date>
    <body>Thanks. We now send the request in 'HTTP/1.0' to avoid that problem. Hope we can see that feature in the next release. http://bugs.caucho.com/view.php?id=3871 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] @ApplicationScoped/@Singleton bean lazy init	problem</header>
    <date>Thu Jan 28 16:56:25 CET 2010</date>
    <body>Hi Scott, When a @ApplicationScoped/@Singleton bean is designed to be initialized after webapp starts (I.E. when first http request was fired) instead of being initialized during startup stage, in given circumstance, it won't be injected correctly. This is my test case: ========== StartBean =========== @Inject ========== FirstBean  =========== @Inject ========== SecondBean =========== @Inject @Inject ========== ThirdBean =========== @Inject ========== FourthBean =========== @Inject ========== SingletonBean  =========== @Singleton //@Startup ========== MyServlet =========== @Inject protected void doGet(HttpServletRequest request, HttpServletResponse response) ========= web.xml =========== http://java.sun.com/xml/ns/javaee" xmlns:xsi=" http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation=" http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" ================================= The " http://localhost:8080/MyServlet" ; request will produce this exception: com.mycompany.servlet.MyServlet.startBean: com.mycompany.beans.StartBean.firstBean: com.mycompany.beans.FirstBean.secondBean: com.mycompany.beans.SecondBean.fourthBean: com.mycompany.beans.FourthBean.singletonBean: java.lang.IllegalArgumentException: Can not set com.mycompany.beans.SingletonBean field com.mycompany.beans.FourthBean.singletonBean to com.mycompany.beans.FourthBean When I annotate the SingletonBean as @Startup, it's fine. (uncomment the //@Startup line in SingletonBean.java) Either @Singleton or @ApplicationScoped throws the exception. It's a weird bug, taking me nearly two days to reproduce it in such a simple test case. -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] @ApplicationScoped/@Singleton bean lazy init problem</header>
    <date>Thu Jan 28 18:25:40 CET 2010</date>
    <body>Thanks for tracking this down. It looks like a circularity problem, which we should handle but our current tests don't have exactly this configuration. -- Scott http://java.sun.com/xml/ns/javaee" http://www.w3.org/2001/XMLSchema-instance" http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" http://localhost:8080/MyServlet" ; request will produce this exception: http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] @ApplicationScoped/@Singleton bean lazy init	problem</header>
    <date>Thu Jan 28 18:42:55 CET 2010</date>
    <body>Thanks for the quick response. I don't expect a quick resolve of this bug, since it DOES have a workaround. After some examination of the source code, I think the implementation around scoped adapter may need a serious refactorying because it's something like a HACK resolution. -Wesley 2010/1/29 Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: http://java.sun.com/xml/ns/javaee" http://www.w3.org/2001/XMLSchema-instance" http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" http://localhost:8080/MyServlet" ; request will produce this exception: http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] @ApplicationScoped/@Singleton bean lazy init problem</header>
    <date>Thu Jan 28 20:17:05 CET 2010</date>
    <body>Yep. The final spec API for that concept doesn't match the way I think about the circular resolution issue (and had changed many times before the final release), but I'm still not sure if I just need to study the API more or if it's cleaner to work around it. So the current code is a mixture between the two. -- Scott http://java.sun.com/xml/ns/javaee" http://www.w3.org/2001/XMLSchema-instance" http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" http://localhost:8080/MyServlet" ; request will produce this exception: http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] QuercusModuleException:	java.lang.NoClassDefFoundError: java.net.Proxy</header>
    <date>Thu Jan 21 14:06:52 CET 2010</date>
    <body>Hi, I have got  a problem when run my facebook application on google app engine. I use quercus for this purpose. here is a simple code, that throws an exception: // the facebook client library // some basic library functions // this defines some of your basic setup *$user_details = $facebook-&amp;gt;api_client-&amp;gt;users_getInfo('754748720', 'sex');* The EXCEPTION I got was : com.caucho.quercus.QuercusModuleException: java.lang.NoClassDefFoundError: java.net.Proxy is a restricted class. Please see the Google App Engine developer's guide for more details. How can I avoid this exception. Help me please. Thanks in advance, Tigran Martirosyan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] QuercusModuleException: java.lang.NoClassDefFoundError: java.net.Proxy</header>
    <date>Thu Jan 21 20:47:48 CET 2010</date>
    <body>Hi Tigran, I think the Facebook API is probably using cURL to access its services, which allows the use of HTTP proxies.  We've implemented the cURL module using some java.net classes which the App Engine prohibits to do the proxying, so the App Engine won't even load the class regardless of whether you're using a proxy or not. Anyway, it's possible that we could find a workaround.  I've filed a bug here: http://bugs.caucho.com/view.php?id=3854 We might be able to turn this around fairly quickly since I'm working on Quercus/App Engine compatibility right now anyway. I'm actually presenting a talk on using Quercus on the App Engine next month, so if you've made some progress in other areas, please let me know and I might be able to mention your work. Thanks, Emil http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Build issue with 3.1.x snapshot</header>
    <date>Wed Jan 20 07:01:45 CET 2010</date>
    <body>Hi, I'm trying to build the latest snapshot of Resin Pro 3.1.x on a 64-bit RHEL5 machine, and I'm getting an error when it gets to the OpenSSL JNI compilation, I get the following error: make[2]: Leaving directory `/usr/local/resin-pro-3.1.s100107/modules/c/src/resin' make[2]: Entering directory `/usr/local/resin-pro-3.1.s100107/modules/c/src/resinssl' make[2]: *** No rule to make target `resin.h', needed by `std.o'.  Stop. The existing installation of 3.1.8 had no issues with the compilation, so I know I have all the appropriate dependencies, etc. Has anybody seen this and/or know what tweaks I might make to the makefiles? Thanks, Matt</body>
  </mail>
  <mail>
    <header>[Resin-interest] IllegalStateException at session load</header>
    <date>Mon Jan 18 09:17:03 CET 2010</date>
    <body>Last week we saw a whole bunch of these exceptions. Removing resin_data_default.db and resin_mnode_default.db and restarting Resin removed the problem, but possibly there is something there that needs attention. java.lang.IllegalStateException at com.caucho.db.sql.QueryContext.unlock(QueryContext.java:546) at com.caucho.db.sql.QueryContext.close(QueryContext.java:591) at com.caucho.db.sql.UpdateQuery.execute(UpdateQuery.java:117) at com.caucho.db.jdbc.PreparedStatementImpl.execute(PreparedStatementImpl.java:344) at com.caucho.db.jdbc.PreparedStatementImpl.executeUpdate(PreparedStatementImpl.java:311) at com.caucho.server.distcache.MnodeStore.updateUpdateTime(MnodeStore.java:607) at com.caucho.server.distcache.AbstractDataCacheManager.saveLocalUpdateTime(AbstractDataCacheManager.java:690) at com.caucho.server.distcache.AbstractDataCacheManager.saveUpdateTime(AbstractDataCacheManager.java:628) at com.caucho.server.distcache.AbstractDataCacheManager.updateIdleTime(AbstractDataCacheManager.java:503) at com.caucho.server.distcache.AbstractDataCacheManager.getMnodeValue(AbstractDataCacheManager.java:250) at com.caucho.server.distcache.ProCacheEntry.getMnodeValue(ProCacheEntry.java:106) at com.caucho.distcache.AbstractCache.getExtCacheEntry(AbstractCache.java:452) at com.caucho.server.session.SessionImpl.load(SessionImpl.java:562) at com.caucho.server.session.SessionManager.createSession(SessionManager.java:1282) at com.caucho.server.connection.AbstractCauchoRequest.createSession(AbstractCauchoRequest.java:248) at com.caucho.server.connection.AbstractCauchoRequest.getSession(AbstractCauchoRequest.java:191) at ...</body>
  </mail>
  <mail>
    <header>[Resin-interest] Bean as HessianServices Breaks Injection</header>
    <date>Sun Jan 17 03:50:17 CET 2010</date>
    <body>I noticed when I registered my class as a HessianService it was no longer able to inject it. Is this an expected behavior? I am working against 4.0.3. BTW. You can reproduce all the problems I'm find using our resin4.0.3 branch of subetha - http://subetha.googlecode.com/svn/branches/resin4.0.3/ . There are quite a few more things that seems broken I will post about when I have more time. Take a look at http://subetha.googlecode.com/svn/branches/resin4.0.3/src/org/subethamail/core/admin/ListWizardBean.java for an example bean that no longer works once I add this to our config: -Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bean as HessianServices Breaks Injection</header>
    <date>Sun Jan 17 08:28:15 CET 2010</date>
    <body>Given that we have a nice and fairly complex open source reference implementation application (subetha), it would be great if Scott (et. al) would test Resin 4.x releases against it. jon On Sat, Jan 16, 2010 at 6:47 PM, Scott Hernandez &amp;lt;scotthernan...@hotmail.com http://subetha.googlecode.com/svn/branches/resin4.0.3/ . There are http://subetha.googlecode.com/svn/branches/resin4.0.3/src/org/subethamail/core/admin/ListWizardBean.java http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bean as HessianServices Breaks Injection</header>
    <date>Tue Jan 19 17:30:59 CET 2010</date>
    <body>This seems broken, I've added a bug report to http://bugs.caucho.com/view.php?id=3852 We are adding ResinBeanContext with the intended use from JUnit tests. Basically it's a light container that bootstraps Resin CDI Implementation allowing for bean creation in a way that's done inside resin. usage: * static void main(String []args) * * * Thanks, --Alex http://subetha.googlecode.com/svn/branches/resin4.0.3/ . There are http://subetha.googlecode.com/svn/branches/resin4.0.3/src/org/subethamail/core/admin/ListWizardBean.java http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bean as HessianServices Breaks Injection</header>
    <date>Tue Jan 19 18:59:20 CET 2010</date>
    <body>Cool, (more below) http://bugs.caucho.com/view.php?id=3852 Is this going to be the suggested way to unit test apps then? As you can probably tell from our source code the main reason we expose the objects as HessianServices is so that we can run unit tests against the container. There are still a few places where it might be useful to expose services for things other than unit testing, but for the most part that is why we need to use HessianServices.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bean as HessianServices Breaks Injection</header>
    <date>Tue Jan 19 19:15:22 CET 2010</date>
    <body>http://bugs.caucho.com/view.php?id=3852 Yes, although there may be some tests that need different containers. The ResinBeanContainer is a CDI/EJB context (with the usual Resin things like database configuration), but it is not a servlet environment. (No ServletContext, no servlet listeners, etc.) So it will work fine for the key parts of unit testing. For that need a servlet environment (more toward integration rather than unit testing), you'd need to use ResinEmbed currently (which is a full embedded Resin server.) Alex has brought up the idea of creating a WebAppContainer (or ServletContainer) which is something in between: a web-app context, but not a full server. Jon's idea of running subEtha's tests as part of our nightly regressions is an interesting one, basically a kind of CI testing where we could svn update to the latest subetha, and run the tests against the current Resin build. To make that happen, the subetha testing environment would need to be pretty self-contained, at least for the tests that we'd be running, i.e. they'd basically need to work in a bare environment and do any self-configuration/mocking/database instantiation as part of the test run. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Messaging Config</header>
    <date>Fri Jan 15 23:33:13 CET 2010</date>
    <body>I was looking at the lastest 4.0.3 docs and it seems to indicate that I should do this for my configuration: ... http://caucho.com/resin/admin/candi.xtp#Custom%20Services But there is no JmsListener class, and resin complains like this: instantiated because it does not map to a known class. I wanted to replace the old style way with the new candi config. Here is the old (working) style. This stuff seems pretty confusing and the docs seem to be misleading and wrong. In addition there seems to be some missing pieces in making the connections, even if the docs were correct. What is the suggestion config here? Is there a more consise syntax that I should be using? Thanks in advance, Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest]  Resin: configuration for a jms client]</header>
    <date>Fri Jan 15 12:43:50 CET 2010</date>
    <body>Hi there, Nobody uses Resin's JMS from external applications? Do people use other JMS solutions inside Resin? I'll stick with OpenJMS for now, but as we already have Resin nodes installed, I thought it would have been intesting to use them and remove one service. The scarce documentation and apparent lack of usage is making me think twice :). D. ---  Begin Message  --- While we are talking about JMS configuration, how can one access the JMS queues on a Resin server from an external client? I've seen the documentation regarding accessing the queues defined in the same server, from JSPs, using dependency injection etc. but I have been unable to find how to access the queues from another JVM. I'm guessing one would need to configure access to the JMS queues through hessian/burlap? And then what would be the appropriate JNDI_PROVIDER_URL and INITIAL_CONTEXT_FACTORY formats? Thanks, D.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin: configuration for a jms client]</header>
    <date>Fri Jan 15 19:13:37 CET 2010</date>
    <body>The 4.0.x JMS is very new, since we rewrote it to use BAM and the underlying model. I do think we need another pass through that implementation before we declare it production ready. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin: configuration for a jms client]</header>
    <date>Mon Jan 18 08:38:00 CET 2010</date>
    <body>Hi Scott, I'm still using 3.1.*, is JMS in those versions production ready? Documentation is a bit scarce so I'm not sure what to think of it. :) D. Scott Ferguson escribió:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin: configuration for a jms client]</header>
    <date>Tue Jan 19 17:58:06 CET 2010</date>
    <body>Because the 4.0 version is an entire rewrite (to match our new clustering model), I think we'd rather have new Resin JMS users on the 4.0 and not the 3.1 branch. If you're on the 3.1 branch and evaluating it, you might look at a different solution because it would be more difficult to support 3.1 JMS (and any bugs/suggestions wouldn't help 4.0.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin: configuration for a jms client]</header>
    <date>Tue Jan 19 23:08:07 CET 2010</date>
    <body>Well, good to know. I'll stick to our current solution until we can move to the 4.X branch. Thanks for the info. D. S'està citant Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>[Resin-interest] the response time</header>
    <date>Fri Jan 15 11:40:32 CET 2010</date>
    <body>Hi, there, I integrate resin with apache. My resin's version is 3.0.19 and apache is 2.0.59. I configured both of them to record the response time in microseconds(log format %D). But I found the time recorded by resin is much larger than apache. Sometimes it's hundreds of times larger. Does anyone know the reason? Regards, Ken</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] the response time</header>
    <date>Fri Jan 15 18:11:27 CET 2010</date>
    <body>Resin's response time measurement isn't exact. For performance reasons, it's only accurate to about 500ms. In Resin 4.0.x, we've updated the time algorithm to increase the accuracy, but Resin still doesn't measure the exact time. For real performance/profiling, you'd want to look at something like the /resin-admin profiler or some 3rd-party profiling tool. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] the response time</header>
    <date>Mon Jan 18 03:43:52 CET 2010</date>
    <body>Hi, Scott, Thanks for your reply. Could you give me some hints about the 3rd-party tool? I want to record the exact time. The time should be accurate to about 1ms at least. Regards http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] the response time</header>
    <date>Fri Jan 15 18:11:33 CET 2010</date>
    <body>I don't understand why people still put their container behind apache. Unless you are using mod_rewrite or something like that, you don't need to do that. It isn't like apache somehow 'protects' resin from evil doers. If you need a load balancer, get a load balancer. jon http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] the response time</header>
    <date>Sat Jan 16 11:25:57 CET 2010</date>
    <body>Hi Jon &amp;amp; Scott, I don't like apache either but resin 4.0.2 cluster web-tier seems unstable for me. I've not tested the 4.0.3 cluster. My Apache config: ResinHost 192.168.1.4 6801 ResinBackup 192.168.1.5 6801 Which load balancer will be more appropriate for this usage? Thanks. -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] the response time</header>
    <date>Sat Jan 16 19:03:46 CET 2010</date>
    <body>It depends on what your services, performance, and bandwidth requirements are. Anyway, there are (a few) options. ldirectord - (low level) http://linux.die.net/man/8/ldirectord balance -- (low level) http://www.inlab.de/balance.html trafficmanager -- (yahoo lb turned open-source) http://incubator.apache.org/projects/trafficserver.html zxtm -- (free/commercial) http://www.zeus.com/products/traffic-manager/index.html You can do this at the network level (MAC/IP) or application level (http, etc.). There are tons of reverse-proxies with load-balancing too. There is nothing wrong with using Apache and Resin, but people do use apache for things that aren't in its core set of features and then wonder why there are problems...</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] the response time</header>
    <date>Sat Jan 16 19:15:47 CET 2010</date>
    <body>Also, my point in mentioning an LB is that it should be done at the network level so as to not incur the same overhead of a reverse proxy like Apache (which is why this email started in the first place). At work we have zxtm connecting to jboss/tomcat which does well enough. Obviously if you are using the Resin&amp;lt;-&amp;gt;Apache module, then that is another story entirely as well. I assumed that the http layer in Resin is as good as Tomcat in terms of stability. If that is not the case, then you should be using the R&amp;lt;-&amp;gt;A module. jon http://linux.die.net/man/8/ldirectord http://www.inlab.de/balance.html http://incubator.apache.org/projects/trafficserver.html http://www.zeus.com/products/traffic-manager/index.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] the response time</header>
    <date>Sat Jan 16 19:36:55 CET 2010</date>
    <body>Resin's load balancer (proxy) is an entire different module from Resin's basic HTTP processing. Load balancing is a far more complicated issue than HTTP protocol parsing, because the load balancer handles another set of sockets/round-robin, etc. HTTP is just parsing strings. The issue in 4.0.2 was the load-balancer to Resin communication protocol (basically messed-up acks). It had nothing at all to do with HTTP. -- Scott mailto:scotthernan...@hotmail.com http://linux.die.net/man/8/ldirectord http://www.inlab.de/balance.html http://incubator.apache.org/projects/trafficserver.html http://www.zeus.com/products/traffic-manager/index.html mailto:wumen...@gmail.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] java unicode problem in cross-plateform situation</header>
    <date>Fri Jan 15 09:48:28 CET 2010</date>
    <body>Hello I wrote a piece of code to remove diacritics : for (idx=0;idx&amp;lt;urlset3a.length;idx++) if (lit!=null) This code works perfectly on macosx and on linux when compiled on the plateform it is run on. javac com/adl/java/utils/Stringutils.java java com.adl.java.utils.Stringutils "aÄaé° ç%Щx" URL:aaae-cx But when I compile this class on macosx and if I copy and use this .class on linux, the accents and special characters are no more replaced correctly (same in the other way) : Mac class used on linux : java com.adl.java.utils.Stringutils "aÄaé° ç%Щx" aäaé°-çx Linux class used on mac : java com.adl.java.utils.Stringutils "aÄaé° ç%Щx" URL:a?a??-?x My LANG env var is fr_FR.UTF-8 on both plateforms. java version "1.5.0_17" on linux and "1.5.0_22" on mac Does anybody know why and how to correct this ? (this class is in a jar that is copied to the server and not compiled by resin) Thanks -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java unicode problem in cross-plateform	situation</header>
    <date>Sat Jan 16 00:23:22 CET 2010</date>
    <body>You may want to double check if you really have UTF-8 in your environment in all circumstances. Here you also depend on the character set of the source file, which is unnecessary. And your code could be simpler. escapes for (int i=0; i&amp;lt;urlset3a.length; i++) On Fri, Jan 15, 2010 at 00:40, Riccardo Cohen http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java unicode problem in	cross-plateform	situation</header>
    <date>Mon Jan 18 07:49:03 CET 2010</date>
    <body>Thanks Knut, Using numeric is more difficult because I have to make a program to write these values as I don't know them, and after that I cannot check my source code anymore... I'll try to see if it changes something. But in the same time, source code is not used at run time, and the problem is at run time. I checked my locales on unix and there is no other locale installed than UTF-8. On mac it is more difficult to check. mailto:r...@architectedulogiciel.fr http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java unicode problem in cross-plateform	situation</header>
    <date>Mon Jan 18 21:00:54 CET 2010</date>
    <body>You most likely will have to know which characters you want to replace, I don't see any way around that.  Anyway the more interesting change is probably to replace a character at a time instead of a byte at a time. How to specify each character literal in your source file is a separate problem. In general, the problem could be at compile time even if you don't see the symptoms until runtime. Try "man locale" in your terminal window. Good luck, -Knut PS: If you get all the character set issues under control you probably don't even need to replace characters in the URLs.  See for example Wikipedia with URLs like http://en.wikipedia.org/wiki/Sebastián_Piñera http://en.wikipedia.org/wiki/Sebasti%C3%A1n_Pi%C3%B1era</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java unicode problem in	cross-plateform	situation</header>
    <date>Mon Jan 18 22:18:03 CET 2010</date>
    <body>When I do sb_replace(ret,lit,urlset3b[idx]) I replace strings, not bytes. This is probably not very performant... but it is not at byte level. this gives many locales available, including fr_FR.UTF-8 Thanks for your help, I'll try. probably don't http://en.wikipedia.org/wiki/Sebastián_Piñera http://en.wikipedia.org/wiki/Sebasti%C3%A1n_Pi%C3%B1era The problem with full unicode url is that it does not work with old navigators like ie6. Well if a page appears bad with IE6 i don't mind, but if it gives error 404 it is a problem. Should I consider unicode url as mainly supported ? At the end my application will need unicode url since it should work in russian language. But for the moment I just try to understand the runtime problem. Thanks -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] re sin configuration for jms</header>
    <date>Mon Jan 11 19:04:37 CET 2010</date>
    <body>I am trying to configure jms with resin. In my web.xml,i added &amp;lt;jms:jms-topic error. I had the namespaces as below xmlns=" http://java.sun.com/xml/ns/javaee" xmlns:xsi=" http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation=" http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" ;&amp;gt; I tried adding xmlns:jms=" http://caucho.com/ns/resin" ;&amp;gt; still the jms topic and connection factory give me an error. Please reply if anyone encountered a similar situation and has a fix. -- View this message in context: http://old.nabble.com/resin-configuration-for-jms-tp27114840p27114840.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] re sin configuration for jms</header>
    <date>Mon Jan 11 19:13:39 CET 2010</date>
    <body>http://java.sun.com/xml/ns/javaee" http://www.w3.org/2001/XMLSchema-instance" http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" ;&amp;gt; I tried adding http://caucho.com/ns/resin" ;&amp;gt; still the jms topic and connection The resin-web.xml is where you normally put custom configuration like the JMS queues. Resin is strict about its validation, and since you're using " http://java.sun.com/xml/ns/javaee" ; for your web.xml, Resin is only allowing the tags specified by JavaEE in that section. In your resin-web.xml, you'll use &amp;lt;web-app xmlns=" http://caucho.com/ns/resin" ;&amp;gt;, which allows all the javaee tags plus the Resin-specific tags like the &amp;lt;resin:jms-topic&amp;gt;. (Although, if you're using Resin 4.0, I'd recommend using the CanDI configuration instead.) The CanDI configuration looks like: Where "resin" is xmlns:resin="urn:java:com.caucho.resin". -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin: configuration for a jms client</header>
    <date>Tue Jan 12 14:39:51 CET 2010</date>
    <body>While we are talking about JMS configuration, how can one access the JMS queues on a Resin server from an external client? I've seen the documentation regarding accessing the queues defined in the same server, from JSPs, using dependency injection etc. but I have been unable to find how to access the queues from another JVM. I'm guessing one would need to configure access to the JMS queues through hessian/burlap? And then what would be the appropriate JNDI_PROVIDER_URL and INITIAL_CONTEXT_FACTORY formats? Thanks, D.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Oracle driver issue</header>
    <date>Fri Jan 08 19:43:46 CET 2010</date>
    <body>Hi, I am using Resin 3.1.9 on Vista. This is my development machine and it is experiencing an issue that is not showing up in other environments. I am getting the following error: *java.sql.SQLException: Bigger type length than Maximum at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:124) at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:161) at oracle.jdbc.driver.DatabaseError.check_error(DatabaseError.java:884) at oracle.jdbc.driver.T4CMAREngine.buffer2Value(T4CMAREngine.java:2230) at oracle.jdbc.driver.T4CMAREngine.unmarshalUB2(T4CMAREngine.java:1047) at oracle.jdbc.driver.T4CTTIdcb.receiveCommon(T4CTTIdcb.java:111) at oracle.jdbc.driver.T4CTTIdcb.receiveFromRefCursor(T4CTTIdcb.java:103) at oracle.jdbc.driver.T4CResultSetAccessor.unmarshalOneRow(T4CResultSetAccessor.java:165) at oracle.jdbc.driver.T4CTTIrxd.unmarshal(T4CTTIrxd.java:787) at oracle.jdbc.driver.T4CTTIrxd.unmarshal(T4CTTIrxd.java:704) at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:526) at oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:179) at oracle.jdbc.driver.T4CCallableStatement.execute_for_rows(T4CCallableStatement.java:782) at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1027) at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:2887) at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:2978) at oracle.jdbc.driver.OracleCallableStatement.execute(OracleCallableStatement.java:4102) at com.caucho.sql.UserPreparedStatement.execute(UserPreparedStatement.java:124) * I was googling this and the most common answer is that it is an issue with the oracle jdbc driver not being up to date. I tried the following solutions: 1. I removed classes12.jar from WEB-INF/lib and replaced it with ojdbc6.jar - didn't help 2. then I dug into the Resin lib directory - I placed ojdbc6.jar there, but could not remove classes12.jar because when I tried starting the server up from Eclipse - it complained that classes112.jar which is referenced in classpath is not in "lib". So my question is - which "classpath" specifies the classes12.jar in Resin/lib and how can I edit it out from there. Thanks.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Linux startup issue</header>
    <date>Thu Jan 07 17:08:16 CET 2010</date>
    <body>I'm trying to set up a server with multiple instances of Resin to start those instances on system boot. I've configured the runlevels with chkboot, but I'm running into a problem... When the two instances try to start up at runlevel 3, they're both trying to start the Watchdog, and the second one fails because it can't bind the port, so the instance doesn't start. I'm on FC8, which doesn't seem to support the richer chkconfig dependencies that are stubbed out in the resin startup script. Does anybody know a good way to reliably get the second instance to start without colliding with the first? Thanks in advance, --Matt</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Linux startup issue</header>
    <date>Thu Jan 07 17:35:18 CET 2010</date>
    <body>Maybe you should prepare multiple resin.conf with different watchdog port (default 6600) http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Linux startup issue</header>
    <date>Thu Jan 07 17:40:20 CET 2010</date>
    <body>The second instance should attach to the first watchdog (assuming you're working from the same configuration file.) The "start" flow looks like: 1. try to contact and existing watchdog at the watchdog port a. if that succeeds, send a BAM/HMTP command to start the new Resin instance 2. otherwise start a new watchdog instance The watchdog does use the configuration file for authentication. If you have different AdminAuthenticator users, the "start/stop" will fail authentication. So if you need isolated instances, you'll need to start separate watchdogs. The &amp;lt;watchdog-port&amp;gt; in the &amp;lt;server&amp;gt; block can be used to create separate watchdog instances. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Linux startup issue</header>
    <date>Thu Jan 07 17:55:32 CET 2010</date>
    <body>Right, I think what's happening, though, is something like this: 1. linux starts instance a (/etc/rc3.d/S86resin-a start) 1a. that script returns control. - At this point the script has completed, but resin isn't done starting, but watchdog isn't up, running, and ready to respond to the command. 2. linux starts instance b (/etc/rc3.d/S95resin-b start) 2a. this tries to connect to watchdog and can't so it initiates that 3. by now the a instance has completed starting its watchdog, so the instance b attempt collides All the config is shared. I could do this, just to avoid the problem, although it seems undesirable. I guess another option could be for the server to retry the connect if it finds a port conflict. Would that be a desirable mod? If so, I could enter it in Mantis.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Linux startup issue</header>
    <date>Thu Jan 07 18:05:23 CET 2010</date>
    <body>Hmm. So basically the "start" command is returning too early, i.e. forking the new watchdog but not delaying until it starts. We should probably change that behavior. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Linux startup issue</header>
    <date>Thu Jan 07 18:12:24 CET 2010</date>
    <body>Yeah, that's how I'm interpreting what I'm seeing. A change to that would probably resolve my issue. -- Matt</body>
  </mail>
  <mail>
    <header>[Resin-interest]  Hessian Debug Exception in Production</header>
    <date>Tue Jan 05 20:50:27 CET 2010</date>
    <body>We're seeing two possibly related issues with the Hessian Debug facilities in our production environment.  The first is the exception pasted below.  The second is that hessian debug will run for a few hours after we restart the web app, then just die.  We are running 3.1.19.  Any ideas? java.lang.ClassCastException: java.util.Date cannot be cast to java.lang.Integer at com.caucho.hessian.io.HessianDebugState$ObjectState.shift(HessianDebugState.java:1186) at com.caucho.hessian.io.HessianDebugState$DateState.next(HessianDebugState.java:649) at com.caucho.hessian.io.HessianDebugState.next(HessianDebugState.java:93) at com.caucho.hessian.io.HessianDebugOutputStream.write(HessianDebugOutputStream.java:96) at java.io.OutputStream.write(OutputStream.java:99) at com.caucho.hessian.io.Hessian2Output.flushBuffer(Hessian2Output.java:1541) at com.caucho.hessian.io.Hessian2Output.flush(Hessian2Output.java:1522) at com.caucho.hessian.io.Hessian2Output.printString(Hessian2Output.java:1450) at com.caucho.hessian.io.Hessian2Output.writeString(Hessian2Output.java:1060) at com.caucho.hessian.io.JavaSerializer$StringFieldSerializer.serialize(JavaSerializer.java:346) at com.caucho.hessian.io.JavaSerializer.writeInstance(JavaSerializer.java:213) at com.caucho.hessian.io.JavaSerializer.writeObject(JavaSerializer.java:177) at com.caucho.hessian.io.Hessian2Output.writeObject(Hessian2Output.java:490) at com.caucho.hessian.io.CollectionSerializer.writeObject(CollectionSerializer.java:102) at com.caucho.hessian.io.Hessian2Output.writeObject(Hessian2Output.java:490) at com.caucho.hessian.io.JavaSerializer$FieldSerializer.serialize(JavaSerializer.java:256) at com.caucho.hessian.io.JavaSerializer.writeInstance(JavaSerializer.java:213) at com.caucho.hessian.io.JavaSerializer.writeObject(JavaSerializer.java:177) at com.caucho.hessian.io.Hessian2Output.writeObject(Hessian2Output.java:490) at com.caucho.hessian.io.MapSerializer.writeObject(MapSerializer.java:100) at com.caucho.hessian.io.Hessian2Output.writeObject(Hessian2Output.java:490) at com.caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java:199) at com.caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java:109) at com.caucho.hessian.server.HessianServlet.service(HessianServlet.java:396) at com.caucho.server.dispatch.WebServiceFilterChain.doFilter(WebServiceFilterChain.java:101) at com.caucho.filters.GzipFilter.doFilter(GzipFilter.java:169) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) at com.caucho.server.cache.CacheFilterChain.doFilter(CacheFilterChain.java:162) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:187) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:265) at com.caucho.server.hmux.HmuxRequest.handleRequest(HmuxRequest.java:436) at com.caucho.server.port.TcpConnection.run(TcpConnection.java:682) at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:743) at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:662) at java.lang.Thread.run(Thread.java:619) -- View this message in context: http://old.nabble.com/Hessian-Debug-Exception-in-Production-tp27026698p27026698.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hessian Debug Exception in Production</header>
    <date>Tue Jan 05 20:52:26 CET 2010</date>
    <body>One more nugget.  Here's our configuration in web.xml: -tyson -- View this message in context: http://old.nabble.com/Hessian-Debug-Exception-in-Production-tp27026698p27026699.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hessian Debug Exception in Production</header>
    <date>Tue Jan 05 21:01:33 CET 2010</date>
    <body>And a follow up ... We have two webapps in the same host that use hessian.  If we disabled logging in both webapps, all is fine.  It seems like they are somehow contending for use of the same logging facilities? Only one webapp seemed to be allowed to log at once. -- View this message in context: http://old.nabble.com/Hessian-Debug-Exception-in-Production-tp27026698p27026702.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hessian Debug Exception in Production</header>
    <date>Tue Jan 05 22:00:53 CET 2010</date>
    <body>This looks like a bug (checked 3.1.9). The code on the trunk looks valid – testing instanceof before casting. Thanks, Alex http://old.nabble.com/Hessian-Debug-Exception-in-Production-tp27026698p27026698.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hessian Debug Exception in Production</header>
    <date>Tue Jan 05 22:11:51 CET 2010</date>
    <body>Tyson I've reported the bug against 3.1.9: http://bugs.caucho.com/view.php?id=3836 Thanks, Alex http://old.nabble.com/Hessian-Debug-Exception-in-Production-tp27026698p27026698.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hessian Debug Exception in Production</header>
    <date>Tue Jan 05 22:21:53 CET 2010</date>
    <body>So, grab the 3.1.9 trunk?  There was another issue we reported about ScheduledTasks not running until 1 week after the server started (at least when started on Sunday). Know if that one is fixed as well (e.g. 3.1.8 would run scheduled tasks immedately after start, 3.1.9 would start running them a week after start - same app config). -tyson http://old.nabble.com/Hessian-Debug-Exception-in-Production-tp27026698p27026698.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hessian Debug Exception in Production</header>
    <date>Tue Jan 05 23:06:00 CET 2010</date>
    <body>Actually it's only fixed on the trunk (4.0), the 3.1 branch still has that issue. This is the one I believe – an open issue: http://bugs.caucho.com/view.php?id=3736 Thanks, Alex http://old.nabble.com/Hessian-Debug-Exception-in-Production-tp27026698p27026698.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hessian Debug Exception in Production</header>
    <date>Tue Jan 05 23:14:01 CET 2010</date>
    <body>I know you guys want the base to move to 4, but can we get these two fixed in 3.1.9?  It's going to be a while before we upgrade to 4. The hessian issue stopped one of our remote services cold and we'd like to leave debugging in place.  The scheduled task issue means we have to patch resin.jar with our own hand-modified ScheduledTask.java.  Maybe we have a couple of magic beans to use up under our small allocation of license maintenance (we'll be needing more pro licenses soon anyway)? http://bugs.caucho.com/view.php?id=3736 http://old.nabble.com/Hessian-Debug-Exception-in-Production-tp27026698p27026698.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hessian Debug Exception in Production</header>
    <date>Wed Jan 06 18:52:24 CET 2010</date>
    <body>The HessianDebugState may not be fixable in 3.1.9, but we can certainly fix the ScheduledTask back in 3.1.x. The HessianDebugState is a huge, complicated state machine and 4.0.x has a large number of fixes. I just checked the code and it's not as simple as patching back the 4.0.x fixes back to 3.1.x. -- Scott http://bugs.caucho.com/view.php?id=3736 http://old.nabble.com/Hessian-Debug-Exception-in-Production-tp27026698p27026698.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest]  Need help writing a JUnit test to lookup an EJB</header>
    <date>Tue Jan 05 16:07:56 CET 2010</date>
    <body>I'm using Resin 3.0.19 (Java 1.5), JUnit 4.3, and Maven 1.1 as the build tool (sadly, can't upgrade at this time).  I have an EJB running locally and my question is, is there a Resin Maven dependency I can download that will allow me to simulate my container for looking up this EJB?  Obviously, when writing JUnit tests, I am not running them in the context of my normal Resin container. Thanks, - Dave -- View this message in context: http://old.nabble.com/Need-help-writing-a-JUnit-test-to-lookup-an-EJB-tp27026632p27026632.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Need help writing a JUnit test to lookup an EJB</header>
    <date>Tue Jan 05 21:55:48 CET 2010</date>
    <body>I think you may need to instantiate Resin in test's setup method by calling a main(String[] args) with arguments that resin's start–up scripts usually passes in. (try resin.sh -verbose for the list of args), write a servlet that'll do the actual test. The servlet will be need to be called from the test method. version 3.0 is  not in maven repositories, so the dependencies will need to be specified using a different maven–valid way. Thanks, alex http://old.nabble.com/Need-help-writing-a-JUnit-test-to-lookup-an-EJB-tp27026632p27026632.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Need help writing a JUnit test to lookup an EJB</header>
    <date>Wed Jan 06 17:45:11 CET 2010</date>
    <body>I've added a bug report for this. We've discussed making CanDI/EJB/Resin internals available to JUnit, but aren't certain of the priority yet. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest]  GzipFilter Overrides Cache-Control</header>
    <date>Tue Jan 05 02:35:47 CET 2010</date>
    <body>Not sure this is a bug with GzipFilter or expected behavior, but found something worth sharing and dropping in the forum record for others to find. We had a problem distributing content to a CDN and keeping it in cache there because the CDN was requesting content with an "Accept-Encoding: gzip" request header, which was causing our GzipFilter to slap a "Cache-Control: private" response header via the http response object. Our file servlet (an extension of the default resin file servlet) was adding a Cache-Control header with "max-age=840000, public" that the GzipFilter ended up writing "Cache-Control: max-age=84000, public, private".  In our testing, we were using curl to test/examine the headers, so we didn't pick up that the private cache control header was being added.  Our CDN provider, however, was testing with a user agent that indicated it accepted the gzip encoding and was thus seeing the cache-control header appear. Made for a lively debate.  Thus, they were seeing the private declaration and not caching the result. So, we had to add an exclude-pattern to our GzipFilter configuration to not pick up files in the directory we wanted to control caching on. So, fyi, either GzipFilter has a bug in that it is not honoring Cache-Control headers set by responses further downstream, or it is operating properly and you must remember to disable the GzipFilter on content you want to be cached publicly. It would be nice if GzipFilter honored cache-control directives. configuration e.g.: -tyson -- View this message in context: http://old.nabble.com/GzipFilter-Overrides-Cache-Control-tp27022353p27022353.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] GzipFilter Overrides Cache-Control</header>
    <date>Tue Jan 05 21:45:49 CET 2010</date>
    <body>Hi Tyson, What's version of resin is this on? thanks Alex http://old.nabble.com/GzipFilter-Overrides-Cache-Control-tp27022353p27022353.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] GzipFilter Overrides Cache-Control</header>
    <date>Tue Jan 05 21:54:48 CET 2010</date>
    <body>Resin Pro 3.1.9 -tyson http://old.nabble.com/GzipFilter-Overrides-Cache-Control-tp27022353p27022353.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] GzipFilter Overrides Cache-Control</header>
    <date>Tue Jan 05 22:50:58 CET 2010</date>
    <body>The private cache-control is added by Resin Cache in this case(not gzip filter ) following the value set in resin.conf &amp;lt;cache&amp;gt;&amp;lt;rewrite-vary-as-private. It has to do with the IE bug (outlined in more detail at : http://www.caucho.com/resin/doc/cluster-tags.xtp#rewrite-vary-as-private ) -Alex http://old.nabble.com/GzipFilter-Overrides-Cache-Control-tp27022353p27022353.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Why isn't startup output going to resin stdout file?</header>
    <date>Mon Jan 04 15:50:32 CET 2010</date>
    <body>Hi, I'm using Resin 3.0.19 on a Mac 10.5.6.  When I run my startup script, all my output is sent to the terminal window where it used to go to a stdout file.  This happened when I changed my resin configuration to run in a cluster, but the startup script changed very little.  I have included it below.  Please let me know if you know of additional steps to troubleshoot. Thanks, - Dave ===========Begin startup script =================== #!/bin/ksh umask 006 export JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/ export RESIN_HOME=/opt/resin/current export ORACLE_HOME=/opt/oracle #export ORACLE_HOME=/opt/oracle/instantclient export DYLD_LIBRARY_PATH=$ORACLE_HOME:$DYLD_LIBRARY_PATH DATE_TIME=`date +%Y-%m-%d-%H.%M.%S` LOGS_DIRECTORY=/opt/var/logs/resin/dev-resin if [[ ! -d $LOGS_DIRECTORY ]]; then mkdir -p $LOGS_DIRECTORY else rm -f $LOGS_DIRECTORY/jvm rm -f $LOGS_DIRECTORY/stderr rm -f $LOGS_DIRECTORY/stdout fi $RESIN_HOME/bin/httpd.sh \ -Djava.awt.headless=true \ -J-d64 \ -Xms256m \ -Xmx512m \ -XX:PermSize=256m \ -XX:MaxPermSize=512m \ -server-root /opt/containers/resin/dev-resin \ -server dev-resin-1 \ -conf /opt/containers/resin/dev-resin/conf/resin.conf \ -J-Djava.library.path=$ORACLE_HOME \ -stderr $LOGS_DIRECTORY/stderr-$DATE_TIME \ -stdout $LOGS_DIRECTORY/stdout-$DATE_TIME \ -jvm-log $LOGS_DIRECTORY/jvm-$DATE_TIME \ start 2&amp;gt;&amp;amp;1 &amp;gt; /dev/null while [[ ! -e /opt/containers/resin/dev-resin/httpd.pid ]] ; do done HTTPD_PID=`cat /opt/containers/resin/dev-resin/httpd.pid` echo "Resin [$HTTPD_PID] Started." echo `cat /opt/containers/resin/dev-resin/httpd.pid` ln -s $LOGS_DIRECTORY/jvm-$DATE_TIME $LOGS_DIRECTORY/jvm ln -s $LOGS_DIRECTORY/stderr-$DATE_TIME $LOGS_DIRECTORY/stderr ln -s $LOGS_DIRECTORY/stdout-$DATE_TIME $LOGS_DIRECTORY/stdout ============End startup script =================== -- View this message in context: http://old.nabble.com/Why-isn%27t-startup-output-going-to-resin-stdout-file--tp27013941p27013941.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Undeploy web-deployed app</header>
    <date>Mon Jan 04 03:06:59 CET 2010</date>
    <body>We have an app server cluster and we've used the resin-admin web console to deploy an application to it. Now we want to undeploy that app. We've tried using the com.caucho.management.server.ArchiveDeployMXBean.undeploy method through the MBeanServer.invoke functionality, but it doesn't seem to be doing the trick. The call I'm trying looks like: Does anybody have some sample JMX code or another idea of how to undeploy applications that aren't dropped just dropped into the local webapps dir? Thanks in advance, --Matt</body>
  </mail>
  <mail>
    <header>[Resin-interest]  failed scanning class -- what does it mean?</header>
    <date>Wed Dec 30 23:13:59 CET 2009</date>
    <body>Hi, I'm running Resin 3.0.19 locally on my Mac 10.5.6 (Java 1.5).  Upon starting my Resin server, I see a lot of errors like this on startup.  Can you explain what they mean and ways to troubleshoot further?  The errors are scattered in a range of different applications, but all say "failed scanning class". Thanks, - Dave [2009/12/30 15:08:54.722] failed scanning class myco.feedback.model.EmailForm [2009/12/30 15:08:54.724] java.lang.IllegalStateException [2009/12/30 15:08:54.724]       at com.caucho.bytecode.ByteCodeClassScanner.parseElementValue(ByteCodeClassScanner.java:402) [2009/12/30 15:08:54.724]       at com.caucho.bytecode.ByteCodeClassScanner.parseElementValue(ByteCodeClassScanner.java:408) [2009/12/30 15:08:54.724]       at com.caucho.bytecode.ByteCodeClassScanner.parseAttribute(ByteCodeClassScanner.java:360) [2009/12/30 15:08:54.724]       at com.caucho.bytecode.ByteCodeClassScanner.parseMethod(ByteCodeClassScanner.java:325) [2009/12/30 15:08:54.724]       at com.caucho.bytecode.ByteCodeClassScanner.scan(ByteCodeClassScanner.java:112) [2009/12/30 15:08:54.724]       at com.caucho.loader.enhancer.EnhancerManager.enhance(EnhancerManager.java:237) [2009/12/30 15:08:54.724]       at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1241) [2009/12/30 15:08:54.724]       at com.caucho.loader.DynamicClassLoader.findClass(DynamicClassLoader.java:1155) [2009/12/30 15:08:54.724]       at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1078) [2009/12/30 15:08:54.724]       at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1027) [2009/12/30 15:08:54.724]       at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:374) [2009/12/30 15:08:54.724]       at java.lang.Class.getDeclaredMethods0(Native Method) [2009/12/30 15:08:54.724]       at java.lang.Class.privateGetDeclaredMethods(Class.java:2395) [2009/12/30 15:08:54.724]       at java.lang.Class.getDeclaredMethods(Class.java:1763) [2009/12/30 15:08:54.724]       at com.caucho.bytecode.JClassWrapper.getMethod(JClassWrapper.java:264) [2009/12/30 15:08:54.724]       at com.caucho.bytecode.JClassWrapper.getMethod(JClassWrapper.java:254) [2009/12/30 15:08:54.724]       at com.caucho.ejb.cfg.EjbBean.setEJBClassWrapper(EjbBean.java) [2009/12/30 15:08:54.724]       at com.caucho.ejb.cfg.EjbBean.setEJBClass(EjbBean.java:283) -- View this message in context: http://old.nabble.com/failed-scanning-class----what-does-it-mean--tp26972823p26972823.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.0.x and PCI Compliance</header>
    <date>Tue Dec 29 14:50:54 CET 2009</date>
    <body>I am a bit baffled.  For PCI compliance we must restrict weak ciphers, but I see no mechanism to do that with JSSE, which we have been using for years.  It appears we can do this with openssl on Resin 3.0.x  Is that correct? Does that mean I need to purchase a new certificate or can we easily switch to openssl using the certificate we already have. Did the person's query about fixing JSSE's cipher-suite issue in Resin 3.1.x get resolved in Resin 4.0.2? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.0.x and PCI Compliance</header>
    <date>Wed Dec 30 05:38:54 CET 2009</date>
    <body>Back in the 2.1 days you could choose which to enable with attributes on the HTTP tag: http://www.caucho.com/resin-2.1/ref/port-config.xtp#http You could try, with a little luck it may still work with 3.0.x If you want to switch to OpenSSL you can extract your JSSE key/cert, although last time I tried the "keytool" shipped with the JDK did not offer an easy way. The solution was to use the java libraries to extract the key directly and some openssl utility to convert to the typical ascii format. -Knut http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.0.x and PCI Compliance</header>
    <date>Wed Dec 30 15:34:46 CET 2009</date>
    <body>Knut, Good idea on the 2.1 try.  It didn't work though. I found a link for converting the cert to something compatible with OpenSSL, so I will drudge through that murky water and see what happens as a next try. Or maybe I should spend time getting the application running 4.0.2 -- assuming that I can still use the JSSE cert with it and limit the weak ciphers? Thanks, Aaron http://www.caucho.com/resin-2.1/ref/port-config.xtp#http mailto:aaron.free...@layerz.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] WebSocket binary stream read error</header>
    <date>Tue Dec 22 21:30:11 CET 2009</date>
    <body>My log output this error: com.caucho.hemp.broker.HempMemoryQueue consumeQueue java.lang.IllegalStateException: WebSocket binary must begin with a 0x80 packet at 0x51 (Q) com.caucho.hessian.io.Hessian2StreamingInput$StreamingInputStream.readChunkLength(Hessian2StreamingInput.java:216) com.caucho.hessian.io.Hessian2StreamingInput$StreamingInputStream.startPacket(Hessian2StreamingInput.java:142) com.caucho.hessian.io.Hessian2StreamingInput.startPacket(Hessian2StreamingInput.java:82) com.caucho.hmtp.HmtpReader.readPacket(HmtpReader.java:86) com.caucho.server.cluster.HmuxQueue.authenticate(HmuxQueue.java:259) com.caucho.server.cluster.HmuxQueue.openStream(HmuxQueue.java:191) com.caucho.server.cluster.HmuxQueue.dispatch(HmuxQueue.java:110) com.caucho.hemp.broker.HempMemoryQueue.consumeQueue(HempMemoryQueue.java:330) com.caucho.hemp.broker.HempMemoryQueue.run(HempMemoryQueue.java:388) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Resin 4.0.s091222 snapshot -Wesley</body>
  </mail>
  <mail>
    <header>[Resin-interest] HempMemoryQueue consumeQueue NullPointerException</header>
    <date>Tue Dec 22 21:30:07 CET 2009</date>
    <body>My log output this error: com.caucho.hemp.broker.HempMemoryQueue consumeQueue java.lang.NullPointerException com.caucho.server.cluster.HmuxQueue.authenticate(HmuxQueue.java:263) com.caucho.server.cluster.HmuxQueue.openStream(HmuxQueue.java:191) com.caucho.server.cluster.HmuxQueue.dispatch(HmuxQueue.java:110) com.caucho.hemp.broker.HempMemoryQueue.consumeQueue(HempMemoryQueue.java:330) com.caucho.hemp.broker.HempMemoryQueue.run(HempMemoryQueue.java:388) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) com.caucho.hemp.broker.HempMemoryQueue consumeQueue java.lang.NullPointerException com.caucho.server.cluster.HmuxQueue.authenticate(HmuxQueue.java:263) com.caucho.server.cluster.HmuxQueue.openStream(HmuxQueue.java:191) com.caucho.server.cluster.HmuxQueue.dispatch(HmuxQueue.java:110) com.caucho.hemp.broker.HempMemoryQueue.consumeQueue(HempMemoryQueue.java:330) com.caucho.hemp.broker.HempMemoryQueue.run(HempMemoryQueue.java:388) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) com.caucho.hemp.broker.HempMemoryQueue consumeQueue java.lang.NullPointerException com.caucho.server.cluster.HmuxQueue.authenticate(HmuxQueue.java:263) com.caucho.server.cluster.HmuxQueue.openStream(HmuxQueue.java:191) com.caucho.server.cluster.HmuxQueue.dispatch(HmuxQueue.java:110) com.caucho.hemp.broker.HempMemoryQueue.consumeQueue(HempMemoryQueue.java:330) com.caucho.hemp.broker.HempMemoryQueue.run(HempMemoryQueue.java:388) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Resin 4.0.s091222 snapshot -Wesley</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin class reloading not working (3.1.19)</header>
    <date>Tue Dec 22 17:54:28 CET 2009</date>
    <body>Hi : I remember long long time ago , resin was (the only one that) able to reload only the modified class , not the entire web-app. That was great ! But after I upgraded to some version (sorry , I forget what version , it is long ago) , it didn't work anymore. Today , I check again , 3.1.19 still reload all web-app even I modified a String in println()  , (The class signature remains intact) How to recall this feature now ? Thanks.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin class reloading not working (3.1.19)</header>
    <date>Wed Dec 23 01:49:04 CET 2009</date>
    <body>I am not sure if you mean 3.1.9, but I checked with 3.1.9 and JDK 1.6.0_17 on windows – worked fine. When resin starts serving first app it'll output either "In-place class redefinition (HotSwap) is available." or "In-place class redefinition (HotSwap) is not available.  In-place class reloading during development requires a compatible JDK and -Xdebug." at the config level (by default the logging level is lower, so you'll need to change levels to see the message. --Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin class reloading not working (3.1.19)</header>
    <date>Wed Dec 23 02:14:05 CET 2009</date>
    <body>Hi , this is my resin's init message : I grep no HotSwap keyword here ... log level is enabled : -Xdebug is enabled too : Resin-3.1.9 (built Mon, 13 Apr 2009 11:09:12 PDT) Copyright(c) 1998-2008 Caucho Technology.  All rights reserved. Using Resin(R) Open Source under the GNU Public License (GPL). See http://www.caucho.com for information on Resin Professional, including caching, clustering, JNI acceleration, and OpenSSL integration. Starting Resin on Wed, 23 Dec 2009 09:04:50 +0800 (CST) http://www.caucho.com for information and licensing. zh sharing, Sun Microsystems Inc. http://localhost:8080 ] active http://localhost:8080/resin-admin ] active http://localhost:8080/resin-doc ] active http://foobar.com ] Initializing Spring root WebApplicationContext lot of spring initialization message... http://foobar.com ] active http://foobar.com/resin-doc ] active</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin class reloading not working (3.1.19)</header>
    <date>Wed Dec 23 02:18:05 CET 2009</date>
    <body>Oops But after I restart resin , I still cannot grep  any HotSwap  keyword in jvm-default.log</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin class reloading not working (3.1.19)</header>
    <date>Wed Dec 23 02:30:04 CET 2009</date>
    <body>Actually it's log and logger and The record should appear (once) when a class is loaded from WEB-INF/classes , so after first request to the page using it. Also, resin jni should be compiled. --Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin class reloading not working (3.1.19)</header>
    <date>Wed Dec 23 05:36:14 CET 2009</date>
    <body>Putting Spring aside for a moment, make sure the following is done: - compile resin.jni (./configure --prefix=/pathtoyourresin; make; make install) - change default resin.conf from to: - deploy a simple app into webapps with a jsp page and a class (simple webapp attached) - start resin - access the deployed webapp's index.jsp page with a browser (curl, wget) After these steps you should see the following: available. and after a touch on qa/Test.class and accessing the webapp again the following line will appear The resin.conf and webapp are attached. --Alex resin.conf Description: Binary data x.war Description: Binary data http://www.caucho.com for information on Resin Professional, http://www.caucho.com for information and licensing. http://localhost:8080 ] active http://localhost:8080/resin-admin ] active http://localhost:8080/resin-doc ] active http://foobar.com ] Initializing Spring root http://foobar.com ] active http://foobar.com/resin-doc ] active http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin class reloading not working (3.1.19)</header>
    <date>Wed Dec 23 11:22:44 CET 2009</date>
    <body>Oops , I know what went wrong . I didn't compile resin.jni make install' was to build the apache module. But last year , I changed apache-with-resin-module to using ProxyPass/ProxyPassReverse to redirect java requests to backend resin server. That's why I forgot to compile resin.jni ... :p</body>
  </mail>
  <mail>
    <header>[Resin-interest] ava.lang.ClassNotFoundException: org.apache.xerces.parsers.SAXParser</header>
    <date>Tue Dec 22 15:22:05 CET 2009</date>
    <body>This servlet (34 MB) runs o.k. on tomcat .. http://www.openlaszlo.org/download/form?dl_path=http://download.openlaszlo.org/4.6.1/openlaszlo-4.6.1-servlet.war openlaszlo-4.6.1-servlet.war When I try deploying the *.war into c:\resin-4.0.2\webapps\ and running a "hello world" test app ... http://localhost:8100/openlaszlo-4.6.1/my-apps/copy-of-hello.lzx I get this exception error .. 500 Servlet Exception [show] java.lang.ClassNotFoundException: org.apache.xerces.parsers.SAXParser in EnvironmentClassLoader[web-app: http://default/openlaszlo-4.6.1 ] Is the openlaszlo web application looking for Xerces/Xalan  processors instead of the Resin XML/XSL processors? What must I change / add in resin configuration to run this webapp which runs in tomcat 6.0? Here is the full dump .. java.lang.ExceptionInInitializerError at org.openlaszlo.servlets.LZServlet.initLPS(LZServlet.java:104) at org.openlaszlo.servlets.LZServlet.doGet(LZServlet.java:341) at javax.servlet.http.HttpServlet.service(HttpServlet.java:119) at javax.servlet.http.HttpServlet.service(HttpServlet.java:96) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:112) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:290) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:784) at com.caucho.server.port.TcpConnection.handleRequestsImpl(TcpConnection.java:619) at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:556) at com.caucho.server.port.TcpConnection$AcceptTask.doTask(TcpConnection.java:1194) at com.caucho.server.port.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1127) at com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1158) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: java.lang.RuntimeException: org.jdom.JDOMException: Could not load default SAX parser: org.apache.xerces.parsers.SAXParser: SAX2 driver class org.apache.xerces.parsers.SAXParser not found: org.apache.xerces.parsers.SAXParser in EnvironmentClassLoader[web-app: http://default/openlaszlo-4.6.1 ] at org.openlaszlo.server.LPS.&amp;lt;clinit&amp;gt;(LPS.java:74) Caused by: org.jdom.JDOMException: Could not load default SAX parser: org.apache.xerces.parsers.SAXParser: SAX2 driver class org.apache.xerces.parsers.SAXParser not found: org.apache.xerces.parsers.SAXParser in EnvironmentClassLoader[web-app: http://default/openlaszlo-4.6.1 ] at org.jdom.input.SAXBuilder.createParser(SAXBuilder.java:618) at org.jdom.input.SAXBuilder.build(SAXBuilder.java:460) at org.jdom.input.SAXBuilder.build(SAXBuilder.java:807) at org.openlaszlo.server.LPS.&amp;lt;clinit&amp;gt;(LPS.java:72) at org.openlaszlo.servlets.LZServlet.initLPS(LZServlet.java:104) at org.openlaszlo.servlets.LZServlet.doGet(LZServlet.java:341) at javax.servlet.http.HttpServlet.service(HttpServlet.java:119) at javax.servlet.http.HttpServlet.service(HttpServlet.java:96) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:112) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:290) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:784) at com.caucho.server.port.TcpConnection.handleRequestsImpl(TcpConnection.java:619) at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:556) at com.caucho.server.port.TcpConnection$AcceptTask.doTask(TcpConnection.java:1194) at com.caucho.server.port.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1127) at com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1158) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: org.xml.sax.SAXException: SAX2 driver class org.apache.xerces.parsers.SAXParser not found at org.xml.sax.helpers.XMLReaderFactory.loadClass(Unknown Source) at org.xml.sax.helpers.XMLReaderFactory.createXMLReader(Unknown Source) at org.jdom.input.SAXBuilder.createParser(SAXBuilder.java:610) at org.jdom.input.SAXBuilder.build(SAXBuilder.java:460) at org.jdom.input.SAXBuilder.build(SAXBuilder.java:807) at org.openlaszlo.server.LPS.&amp;lt;clinit&amp;gt;(LPS.java:72) at org.openlaszlo.servlets.LZServlet.initLPS(LZServlet.java:104) at org.openlaszlo.servlets.LZServlet.doGet(LZServlet.java:341) at javax.servlet.http.HttpServlet.service(HttpServlet.java:119) at javax.servlet.http.HttpServlet.service(HttpServlet.java:96) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:112) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:290) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:784) at com.caucho.server.port.TcpConnection.handleRequestsImpl(TcpConnection.java:619) at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:556) at com.caucho.server.port.TcpConnection$AcceptTask.doTask(TcpConnection.java:1194) at com.caucho.server.port.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1127) at com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1158) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Caused by: java.lang.ClassNotFoundException: org.apache.xerces.parsers.SAXParser in EnvironmentClassLoader[web-app: http://default/openlaszlo-4.6.1 ] at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1335) at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1311) at org.xml.sax.helpers.NewInstance.newInstance(Unknown Source) -- View this message in context: http://old.nabble.com/ava.lang.ClassNotFoundException%3A-org.apache.xerces.parsers.SAXParser-tp26889066p26889066.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.ClassNotFoundException:	org.apache.xerces.parsers.SAXParser</header>
    <date>Wed Dec 23 00:36:16 CET 2009</date>
    <body>http://www.openlaszlo.org/download/form?dl_path=http://download.openlaszlo.org/4.6.1/openlaszlo-4.6.1-servlet.war I wasn't able to reproduce this error on a clean setup. You should check the system properties and and services that may be affecting the choice of parser/xml driver. --Alex http://localhost:8100/openlaszlo-4.6.1/my-apps/copy-of-hello.lzx http://default/openlaszlo-4.6.1 ] http://default/openlaszlo-4.6.1 ] http://default/openlaszlo-4.6.1 ] http://default/openlaszlo-4.6.1 ] http://old.nabble.com/java.lang.ClassNotFoundException%3A-org.apache.xerces.parsers.SAXParser-tp26889066p26889066.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] quercus php include paths</header>
    <date>Tue Dec 22 00:04:29 CET 2009</date>
    <body>How do I set the php include path in Quercus?  I have some php files that I want to be able to include, but I don't want people to be able to browse to them directly.  They are in WEB_INF/php, though I could move them if there was a convention. Michael</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] quercus php include paths</header>
    <date>Tue Dec 22 23:49:49 CET 2009</date>
    <body>include "inc.php"; // will look for inc.php in WEB-INF/php directory then --Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] HempMemoryQueue Exception when synchronizing	sessions between two nodes in a cluster</header>
    <date>Thu Dec 17 18:46:36 CET 2009</date>
    <body>com.caucho.hemp.broker.HempMemoryQueue consumeQueue java.lang.IllegalStateException: WebSocket binary must begin with a 0x80 packet at 0x51 (Q) com.caucho.hessian.io.Hessian2StreamingInput$StreamingInputStream.readChunkLength(Hessian2StreamingInput.java:216) com.caucho.hessian.io.Hessian2StreamingInput$StreamingInputStream.startPacket(Hessian2StreamingInput.java:142) com.caucho.hessian.io.Hessian2StreamingInput.startPacket(Hessian2StreamingInput.java:82) com.caucho.hmtp.HmtpReader.readPacket(HmtpReader.java:86) com.caucho.server.cluster.HmuxQueue.authenticate(HmuxQueue.java:258) com.caucho.server.cluster.HmuxQueue.openStream(HmuxQueue.java:190) com.caucho.server.cluster.HmuxQueue.dispatch(HmuxQueue.java:110) com.caucho.hemp.broker.HempMemoryQueue.consumeQueue(HempMemoryQueue.java:330) com.caucho.hemp.broker.HempMemoryQueue.run(HempMemoryQueue.java:388) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) com.caucho.hemp.broker.HempMemoryQueue consumeQueue java.lang.IllegalStateException: WebSocket binary must begin with a 0x80 packet at 0x51 (Q) com.caucho.hessian.io.Hessian2StreamingInput$StreamingInputStream.readChunkLength(Hessian2StreamingInput.java:216) com.caucho.hessian.io.Hessian2StreamingInput$StreamingInputStream.startPacket(Hessian2StreamingInput.java:142) com.caucho.hessian.io.Hessian2StreamingInput.startPacket(Hessian2StreamingInput.java:82) com.caucho.hmtp.HmtpReader.readPacket(HmtpReader.java:86) com.caucho.server.cluster.HmuxQueue.authenticate(HmuxQueue.java:258) com.caucho.server.cluster.HmuxQueue.openStream(HmuxQueue.java:190) com.caucho.server.cluster.HmuxQueue.dispatch(HmuxQueue.java:110) com.caucho.hemp.broker.HempMemoryQueue.consumeQueue(HempMemoryQueue.java:330) com.caucho.hemp.broker.HempMemoryQueue.run(HempMemoryQueue.java:388) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) com.caucho.hemp.broker.HempMemoryQueue consumeQueue java.lang.IllegalStateException: WebSocket binary must begin with a 0x80 packet at 0x51 (Q) com.caucho.hessian.io.Hessian2StreamingInput$StreamingInputStream.readChunkLength(Hessian2StreamingInput.java:216) com.caucho.hessian.io.Hessian2StreamingInput$StreamingInputStream.startPacket(Hessian2StreamingInput.java:142) com.caucho.hessian.io.Hessian2StreamingInput.startPacket(Hessian2StreamingInput.java:82) com.caucho.hmtp.HmtpReader.readPacket(HmtpReader.java:86) com.caucho.server.cluster.HmuxQueue.authenticate(HmuxQueue.java:258) com.caucho.server.cluster.HmuxQueue.openStream(HmuxQueue.java:190) com.caucho.server.cluster.HmuxQueue.dispatch(HmuxQueue.java:110) com.caucho.hemp.broker.HempMemoryQueue.consumeQueue(HempMemoryQueue.java:330) com.caucho.hemp.broker.HempMemoryQueue.run(HempMemoryQueue.java:388) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) com.caucho.hemp.broker.HempMemoryQueue consumeQueue java.lang.IllegalStateException: WebSocket binary must begin with a 0x80 packet at 0x51 (Q) com.caucho.hessian.io.Hessian2StreamingInput$StreamingInputStream.readChunkLength(Hessian2StreamingInput.java:216) com.caucho.hessian.io.Hessian2StreamingInput$StreamingInputStream.startPacket(Hessian2StreamingInput.java:142) com.caucho.hessian.io.Hessian2StreamingInput.startPacket(Hessian2StreamingInput.java:82) com.caucho.hmtp.HmtpReader.readPacket(HmtpReader.java:86) com.caucho.server.cluster.HmuxQueue.authenticate(HmuxQueue.java:258) com.caucho.server.cluster.HmuxQueue.openStream(HmuxQueue.java:190) com.caucho.server.cluster.HmuxQueue.dispatch(HmuxQueue.java:110) com.caucho.hemp.broker.HempMemoryQueue.consumeQueue(HempMemoryQueue.java:330) com.caucho.hemp.broker.HempMemoryQueue.run(HempMemoryQueue.java:388) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) com.caucho.hemp.broker.HempMemoryQueue consumeQueue java.lang.IllegalStateException: WebSocket binary must begin with a 0x80 packet at 0x51 (Q) com.caucho.hessian.io.Hessian2StreamingInput$StreamingInputStream.readChunkLength(Hessian2StreamingInput.java:216) com.caucho.hessian.io.Hessian2StreamingInput$StreamingInputStream.startPacket(Hessian2StreamingInput.java:142) com.caucho.hessian.io.Hessian2StreamingInput.startPacket(Hessian2StreamingInput.java:82) com.caucho.hmtp.HmtpReader.readPacket(HmtpReader.java:86) com.caucho.server.cluster.HmuxQueue.authenticate(HmuxQueue.java:258) com.caucho.server.cluster.HmuxQueue.openStream(HmuxQueue.java:190) com.caucho.server.cluster.HmuxQueue.dispatch(HmuxQueue.java:110) com.caucho.hemp.broker.HempMemoryQueue.consumeQueue(HempMemoryQueue.java:330) com.caucho.hemp.broker.HempMemoryQueue.run(HempMemoryQueue.java:388) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HempMemoryQueue Exception when synchronizing	sessions between two nodes in a cluster</header>
    <date>Thu Dec 17 18:48:35 CET 2009</date>
    <body>this node is using Resin-4.0.s091216 the other is using Resin-4.0.s091202 -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HempMemoryQueue Exception when synchronizing sessions between two nodes in a cluster</header>
    <date>Thu Dec 17 19:00:36 CET 2009</date>
    <body>The exception itself is a known issue that's blocking 4.0.3, but you also can't mix those two versions. We needed to change the cluster protocol to handle our upcoming EC2 support, and those two snapshots are basically a before-and-after of the change. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HempMemoryQueue Exception when synchronizing	sessions between two nodes in a cluster</header>
    <date>Thu Dec 17 19:36:50 CET 2009</date>
    <body>Thanks. I switched back to 091202 snapshot and this issue was resolved. Would u take some time to look at my other mail about @ApplicationScoped bean distribution? -Wesley 2009/12/18 Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HempMemoryQueue Exception when synchronizing sessions between two nodes in a cluster</header>
    <date>Thu Dec 17 20:15:56 CET 2009</date>
    <body>I'm pretty sure the distributed events got dropped from the spec. It really was a capability that just didn't belong. In any case, there's never been a distributed bean concept in the spec, just distributed events. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HempMemoryQueue Exception when synchronizing	sessions between two nodes in a cluster</header>
    <date>Thu Dec 17 20:53:02 CET 2009</date>
    <body>So if I want my beans synchronized across the cluster, I have to use either JMS or some thirdparty cluster middleware like JBossCache? -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HempMemoryQueue Exception when synchronizing	sessions between two nodes in a cluster</header>
    <date>Fri Dec 18 00:39:51 CET 2009</date>
    <body>DO NOT USE JBOSS CACHE. Pile of shit. ehcache + terracotta (yes, there is an oss free version) = love. I'm not super clear on what you want, but it sounds like you want the TIM-MasterWorker (ExecutorService): http://forge.terracotta.org/releases/projects/tim-messaging/docs/about.html jon http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HempMemoryQueue Exception when synchronizing	sessions between two nodes in a cluster</header>
    <date>Fri Dec 18 00:52:52 CET 2009</date>
    <body>I know that Jon has spent many, many days debugging and tuning JBoss Cache on a production cluster, so I'd endorse his "review", despite the brashness. Jeff http://forge.terracotta.org/releases/projects/tim-messaging/docs/about.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HempMemoryQueue Exception when synchronizing	sessions between two nodes in a cluster</header>
    <date>Fri Dec 18 04:07:27 CET 2009</date>
    <body>thanks Jon &amp;amp; Jeff, lol, I'll take a serious look at ehcache + terracotta. I've used JBossCache for more than 2 years, but only on single JVM (not clustered). I might think the clustered cache should be working as they advertised. -Wesley 2009/12/18 Jeff Schnitzer &amp;lt;j...@infohazard.org&amp;gt;: http://forge.terracotta.org/releases/projects/tim-messaging/docs/about.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HempMemoryQueue Exception when synchronizing	sessions between two nodes in a cluster</header>
    <date>Fri Dec 18 08:27:56 CET 2009</date>
    <body>Yea, I've been using it for 3 years, clustered. I recently moved to ehcache and all my problems magically went away, I got way better JMX stats and performance increased. That and I configured ehcache in invalidation mode. WAAAY better than replication. jon http://forge.terracotta.org/releases/projects/tim-messaging/docs/about.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HempMemoryQueue Exception when synchronizing	sessions between two nodes in a cluster</header>
    <date>Fri Dec 18 08:43:50 CET 2009</date>
    <body>Thanks Jon, I'll definitely give terracotta a try. As far as I know, EHCache was a opensymphony project one or two years ago. I noticed that ehcache was acquired by terracotta and became a key component of terracotta. That's great! -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HempMemoryQueue Exception when synchronizing	sessions between two nodes in a cluster</header>
    <date>Fri Dec 18 21:50:14 CET 2009</date>
    <body>yep, i've had several conversations with the cto of terracotta and they are very on the ball about their products. jon http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HempMemoryQueue Exception when synchronizing	sessions between two nodes in a cluster</header>
    <date>Fri Dec 18 21:54:12 CET 2009</date>
    <body>Great Jon, you help me to make a critical decision (not to use JBC any more and switch to EHC &amp;amp; Terracotta). I'll give it a shot. -Wesley 2009/12/19 Jon Stevens &amp;lt;latch...@gmail.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HempMemoryQueue Exception when synchronizing	sessions between two nodes in a cluster</header>
    <date>Fri Dec 18 22:05:17 CET 2009</date>
    <body>Fortunately I found ehcache's concept is very like Jbosscache with regional eviction and cache loader. I really did not know ehcache had gone such far in the last two years, otherwise I should have evaluated it intensively :p That means my abstract cache layer won't need too much modification to accommodate ehcache. One of the feature I think ehcache may miss is the searchability of cache entries by key or property values. I've used Jbosscache Searchable edition (which use lucene) and it did some trick for me to search given cache entries and let them go stale. Any corrections or suggestions? Thanks very much, Jon. -Wesley 2009/12/19 Wesley Wu &amp;lt;wumen...@gmail.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HempMemoryQueue Exception when synchronizing	sessions between two nodes in a cluster</header>
    <date>Sat Dec 19 01:14:57 CET 2009</date>
    <body>Not sure what you mean, but here is an example of checking to see if something is in the cache, if it is missing, populating the cache and then returning the object... I have a @Service CacheMgrHelperBean bean which wraps around my caches and makes them available to my other beans... I will say that I think the need to do new Element() is pretty lame. imho, there should be a cache.put(Object, Object) method. @SuppressWarnings("unchecked") *public* Map&amp;lt;ClipType, List&amp;lt;ClipData&amp;gt;&amp;gt; getShootClips(Long shootId) *throws*NotFoundException *if* (shootId == *null*) Map&amp;lt;ClipType, List&amp;lt;ClipData&amp;gt;&amp;gt; val = *new* HashMap&amp;lt;ClipType, *try* *if* (element == *null*) *if* (val != *null* &amp;amp;&amp;amp; val.size() &amp;gt; 0) *else* *catch* (CacheException ce) *try* // Last ditch fallback. *catch* (CacheException ce1) //do nothing... *if* (val == *null*) cheers, jon http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HempMemoryQueue Exception when synchronizing	sessions between two nodes in a cluster</header>
    <date>Sat Dec 19 02:11:03 CET 2009</date>
    <body>I gave some code for the request: When forum2 got a new post, then the page1 &amp;amp; page2 of forum2 should be stale and must be removed, while all pages in forum1 remained valid. My request : I should remove the stale cache entries ("forum_2_page1" &amp;amp; "forum_2_page2") by a maintainable manner? I want to do some search like this List&amp;lt;String&amp;gt; cacheKeys = myCacheKeySearcher.doSearch(new Normally the search capability will be implemented by a lucene in-memory IndexSearcher. And I'll use a CacheEventListener or some AOP interceptor to synchronize the cache keys to the keys index store. My problem is: While I could index and search all the index keys in one JVM, how could I synchronized the keys index store (a lucene memory store) across the cluster? -Wesley</body>
  </mail>
  <mail>
    <header>[Resin-interest] ignore-client-disconnect not working?</header>
    <date>Wed Dec 16 21:15:13 CET 2009</date>
    <body>Environment: Resin Pro 3.1.9, Windows 2003 Server, JDK 1.6 We have ignore-client-disconnect set to true; however, I'm seeing a fair number of these in the logs: com.caucho.vfs.ClientDisconnectException: client timeout com.caucho.vfs.JniStream.exception(JniStream.java:175) com.caucho.vfs.JniStream.read(JniStream.java:73) com.caucho.vfs.ReadStream.readBuffer(ReadStream.java:1015) com.caucho.vfs.ReadStream.read(ReadStream.java:425) com.caucho.server.http.ContentLengthStream.read(ContentLengthStream.java:74) com.caucho.vfs.ReadStream.readBuffer(ReadStream.java:1015) com.caucho.vfs.ReadStream.skip(ReadStream.java:384) com.caucho.server.connection.AbstractHttpRequest.skip(AbstractHttpRequest.java:1907) com.caucho.server.http.HttpRequest.skip(HttpRequest.java:1212) com.caucho.server.connection.AbstractHttpResponse.finish(AbstractHttpResponse.java:2162) com.caucho.server.connection.AbstractHttpResponse.close(AbstractHttpResponse.java:279) com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:204) com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:265) com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:273) com.caucho.server.port.TcpConnection.run(TcpConnection.java:682) com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:743) com.caucho.util.ThreadPool$Item.run(ThreadPool.java:662) java.lang.Thread.run(Thread.java:619) I see there was a previous bug reported concerning this http://bugs.caucho.com/view.php?id=914 was for writes and the above is for reads, if that's significant. It was fixed in 3.0.18. Rob</body>
  </mail>
  <mail>
    <header>[Resin-interest] To make @ApplicationScoped Bean distributed</header>
    <date>Wed Dec 16 10:38:57 CET 2009</date>
    <body>Hi Scott, I'm deploying Resin 4.0.2 snapshot to a cluster and found my @ApplicationScoped bean  not distributed across the cluster nodes. Is there anything to config to make it possible? I searched Gavin's blog and found some examples regarding @Observes to resolve this situation. If I dispatch events to my @ApplicationScoped bean, instead of call its methods directly, could I make the data synchronized across the cluster? like this: ============= original implementation =============== @ApplicationScoped @Inject this implementation  was not distributable. ============= proposed implementation =============== @ApplicationScoped should this event be distributated to all MyAppScopedBean instances in cluster nodes? -Wesley</body>
  </mail>
  <mail>
    <header>[Resin-interest] Lots of Connection reset</header>
    <date>Wed Dec 16 09:15:48 CET 2009</date>
    <body>We are seeing a lot of "Connection reset" with Hessian since the upgrade of our production environment to 4.0.2 (both client and server). Would this be related to the problems already reported against 4.0.2 and thus fixed in the snapshot? Caused by: com.caucho.hessian.io.HessianFieldException: se.exder.marketplace.api.MarketplaceAddressDTO.addressName: Connection reset at com.caucho.hessian.io.JavaDeserializer.logDeserializeError(JavaDeserializer.java:726) at com.caucho.hessian.io.JavaDeserializer$StringFieldDeserializer.deserialize(JavaDeserializer.java:639) at com.caucho.hessian.io.JavaDeserializer.readObject(JavaDeserializer.java:286) at com.caucho.hessian.io.JavaDeserializer.readObject(JavaDeserializer.java:178) at com.caucho.hessian.io.Hessian2Input.readObjectInstance(Hessian2Input.java:2110) at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:2030) at com.caucho.hessian.io.CollectionDeserializer.readLengthList(CollectionDeserializer.java:93) at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:1689) at com.caucho.hessian.io.Hessian2Input.readReply(Hessian2Input.java:351) at com.caucho.hessian.client.HessianProxy.invoke(HessianProxy.java:241) ... 39 more Caused by: java.net.SocketException: Connection reset at java.net.SocketInputStream.read(SocketInputStream.java:168) at java.io.BufferedInputStream.fill(BufferedInputStream.java:218) at java.io.BufferedInputStream.read1(BufferedInputStream.java:258) at java.io.BufferedInputStream.read(BufferedInputStream.java:317) at sun.net.www.http.ChunkedInputStream.readAheadBlocking(ChunkedInputStream.java:525) at sun.net.www.http.ChunkedInputStream.readAhead(ChunkedInputStream.java:582) at sun.net.www.http.ChunkedInputStream.read(ChunkedInputStream.java:669) at java.io.FilterInputStream.read(FilterInputStream.java:116) at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2391) at com.caucho.hessian.io.Hessian2Input.readBuffer(Hessian2Input.java:2704) at com.caucho.hessian.io.Hessian2Input.read(Hessian2Input.java:2676) at com.caucho.hessian.io.Hessian2Input.parseUTF8Char(Hessian2Input.java:2501) at com.caucho.hessian.io.Hessian2Input.parseChar(Hessian2Input.java:2492) at com.caucho.hessian.io.Hessian2Input.readString(Hessian2Input.java:1328) at com.caucho.hessian.io.JavaDeserializer$StringFieldDeserializer.deserialize(JavaDeserializer.java:635) ... 47 more --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Lots of Connection reset</header>
    <date>Wed Dec 16 11:12:17 CET 2009</date>
    <body>If u'r using apache or other web server backended by resin instead of running resin standalone, I think the 1202 snapshot should fix this issue. 2009/12/16 Mattias Jiderhamn &amp;lt;mj-li...@expertsystems.se&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Lots of Connection reset</header>
    <date>Wed Dec 16 11:26:17 CET 2009</date>
    <body>Nope - standalone Resin. Wesley Wu wrote (2009-12-16 11:10): If u'r using apache or other web server backended by resin instead of running resin standalone, I think the 1202 snapshot should fix this issue. 2009/12/16 Mattias Jiderhamn &amp;lt;mj-li...@expertsystems.se&amp;gt;: We are seeing a lot of "Connection reset" with Hessian since the upgrade of our production environment to 4.0.2 (both client and server). Would this be related to the problems already reported against 4.0.2 and thus fixed in the snapshot? Caused by: com.caucho.hessian.io.HessianFieldException: se.exder.marketplace.api.MarketplaceAddressDTO.addressName: Connection reset at com.caucho.hessian.io.JavaDeserializer.logDeserializeError(JavaDeserializer.java:726) at com.caucho.hessian.io.JavaDeserializer$StringFieldDeserializer.deserialize(JavaDeserializer.java:639) at com.caucho.hessian.io.JavaDeserializer.readObject(JavaDeserializer.java:286) at com.caucho.hessian.io.JavaDeserializer.readObject(JavaDeserializer.java:178) at com.caucho.hessian.io.Hessian2Input.readObjectInstance(Hessian2Input.java:2110) at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:2030) at com.caucho.hessian.io.CollectionDeserializer.readLengthList(CollectionDeserializer.java:93) at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:1689) at com.caucho.hessian.io.Hessian2Input.readReply(Hessian2Input.java:351) at com.caucho.hessian.client.HessianProxy.invoke(HessianProxy.java:241) ... 39 more Caused by: java.net.SocketException: Connection reset at java.net.SocketInputStream.read(SocketInputStream.java:168) at java.io.BufferedInputStream.fill(BufferedInputStream.java:218) at java.io.BufferedInputStream.read1(BufferedInputStream.java:258) at java.io.BufferedInputStream.read(BufferedInputStream.java:317) at sun.net.www.http.ChunkedInputStream.readAheadBlocking(ChunkedInputStream.java:525) at sun.net.www.http.ChunkedInputStream.readAhead(ChunkedInputStream.java:582) at sun.net.www.http.ChunkedInputStream.read(ChunkedInputStream.java:669) at java.io.FilterInputStream.read(FilterInputStream.java:116) at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2391) at com.caucho.hessian.io.Hessian2Input.readBuffer(Hessian2Input.java:2704) at com.caucho.hessian.io.Hessian2Input.read(Hessian2Input.java:2676) at com.caucho.hessian.io.Hessian2Input.parseUTF8Char(Hessian2Input.java:2501) at com.caucho.hessian.io.Hessian2Input.parseChar(Hessian2Input.java:2492) at com.caucho.hessian.io.Hessian2Input.readString(Hessian2Input.java:1328) at com.caucho.hessian.io.JavaDeserializer$StringFieldDeserializer.deserialize(JavaDeserializer.java:635) ... 47 more --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Lots of Connection reset</header>
    <date>Wed Dec 16 15:58:16 CET 2009</date>
    <body>It would be a different issue. This looks like a timeout issue, while the previous one was a protocol problem. On the server side, are you seeing any timeout of that connection? Or does changing the socket-timeout avoid the issue? -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Lots of Connection reset</header>
    <date>Fri Jan 08 21:25:58 CET 2010</date>
    <body>I was able to see the error myself today. It occurs within 3 seconds from the Hessian call, so I doubt this is some kind of timeout issue. I can't see any traces of this on the server side. Any other ideas??? Should I add some debugging code somewhere? Scott Ferguson wrote (2009-12-16 15:56): Nope - standalone Resin. It would be a different issue. This looks like a timeout issue, while the previous one was a protocol problem. On the server side, are you seeing any timeout of that connection? Or does changing the socket-timeout avoid the issue? -- Scott Wesley Wu wrote (2009-12-16 11:10): If u'r using apache or other web server backended by resin instead of running resin standalone, I think the 1202 snapshot should fix this issue. 2009/12/16 Mattias Jiderhamn &amp;lt;mj-li...@expertsystems.se&amp;gt;: We are seeing a lot of "Connection reset" with Hessian since the upgrade of our production environment to 4.0.2 (both client and server). Would this be related to the problems already reported against 4.0.2 and thus fixed in the snapshot? Caused by: com.caucho.hessian.io.HessianFieldException: se.exder.marketplace.api.MarketplaceAddressDTO.addressName: Connection reset at com.caucho.hessian.io.JavaDeserializer.logDeserializeError(JavaDeserializer.java:726) at com.caucho.hessian.io.JavaDeserializer$StringFieldDeserializer.deserialize(JavaDeserializer.java:639) at com.caucho.hessian.io.JavaDeserializer.readObject(JavaDeserializer.java:286) at com.caucho.hessian.io.JavaDeserializer.readObject(JavaDeserializer.java:178) at com.caucho.hessian.io.Hessian2Input.readObjectInstance(Hessian2Input.java:2110) at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:2030) at com.caucho.hessian.io.CollectionDeserializer.readLengthList(CollectionDeserializer.java:93) at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:1689) at com.caucho.hessian.io.Hessian2Input.readReply(Hessian2Input.java:351) at com.caucho.hessian.client.HessianProxy.invoke(HessianProxy.java:241) ... 39 more Caused by: java.net.SocketException: Connection reset at java.net.SocketInputStream.read(SocketInputStream.java:168) at java.io.BufferedInputStream.fill(BufferedInputStream.java:218) at java.io.BufferedInputStream.read1(BufferedInputStream.java:258) at java.io.BufferedInputStream.read(BufferedInputStream.java:317) at sun.net.www.http.ChunkedInputStream.readAheadBlocking(ChunkedInputStream.java:525) at sun.net.www.http.ChunkedInputStream.readAhead(ChunkedInputStream.java:582) at sun.net.www.http.ChunkedInputStream.read(ChunkedInputStream.java:669) at java.io.FilterInputStream.read(FilterInputStream.java:116) at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2391) at com.caucho.hessian.io.Hessian2Input.readBuffer(Hessian2Input.java:2704) at com.caucho.hessian.io.Hessian2Input.read(Hessian2Input.java:2676) at com.caucho.hessian.io.Hessian2Input.parseUTF8Char(Hessian2Input.java:2501) at com.caucho.hessian.io.Hessian2Input.parseChar(Hessian2Input.java:2492) at com.caucho.hessian.io.Hessian2Input.readString(Hessian2Input.java:1328) at com.caucho.hessian.io.JavaDeserializer$StringFieldDeserializer.deserialize(JavaDeserializer.java:635) ... 47 more --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Lots of Connection reset</header>
    <date>Wed Jan 13 13:25:35 CET 2010</date>
    <body>Scott, I notice that in com.caucho.hessian.server.HessianSkeleton there are lots of out.close() but no out.flush(). Could unflushed buffers be what is causing this? At least then difference in output size could explain why it works sometimes on the production server and always in test environment. (There is a 200 status in the server log regardless of the result on the client and the size of the response is about 200 kB) Mattias Jiderhamn wrote (2010-01-08 21:24): I was able to see the error myself today. It occurs within 3 seconds from the Hessian call, so I doubt this is some kind of timeout issue. I can't see any traces of this on the server side. Any other ideas??? Should I add some debugging code somewhere? Scott Ferguson wrote (2009-12-16 15:56): Nope - standalone Resin. It would be a different issue. This looks like a timeout issue, while the previous one was a protocol problem. On the server side, are you seeing any timeout of that connection? Or does changing the socket-timeout avoid the issue? -- Scott Wesley Wu wrote (2009-12-16 11:10): If u'r using apache or other web server backended by resin instead of running resin standalone, I think the 1202 snapshot should fix this issue. 2009/12/16 Mattias Jiderhamn &amp;lt;mj-li...@expertsystems.se&amp;gt;: We are seeing a lot of "Connection reset" with Hessian since the upgrade of our production environment to 4.0.2 (both client and server). Would this be related to the problems already reported against 4.0.2 and thus fixed in the snapshot? Caused by: com.caucho.hessian.io.HessianFieldException: se.exder.marketplace.api.MarketplaceAddressDTO.addressName: Connection reset at com.caucho.hessian.io.JavaDeserializer.logDeserializeError(JavaDeserializer.java:726) at com.caucho.hessian.io.JavaDeserializer$StringFieldDeserializer.deserialize(JavaDeserializer.java:639) at com.caucho.hessian.io.JavaDeserializer.readObject(JavaDeserializer.java:286) at com.caucho.hessian.io.JavaDeserializer.readObject(JavaDeserializer.java:178) at com.caucho.hessian.io.Hessian2Input.readObjectInstance(Hessian2Input.java:2110) at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:2030) at com.caucho.hessian.io.CollectionDeserializer.readLengthList(CollectionDeserializer.java:93) at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:1689) at com.caucho.hessian.io.Hessian2Input.readReply(Hessian2Input.java:351) at com.caucho.hessian.client.HessianProxy.invoke(HessianProxy.java:241) ... 39 more Caused by: java.net.SocketException: Connection reset at java.net.SocketInputStream.read(SocketInputStream.java:168) at java.io.BufferedInputStream.fill(BufferedInputStream.java:218) at java.io.BufferedInputStream.read1(BufferedInputStream.java:258) at java.io.BufferedInputStream.read(BufferedInputStream.java:317) at sun.net.www.http.ChunkedInputStream.readAheadBlocking(ChunkedInputStream.java:525) at sun.net.www.http.ChunkedInputStream.readAhead(ChunkedInputStream.java:582) at sun.net.www.http.ChunkedInputStream.read(ChunkedInputStream.java:669) at java.io.FilterInputStream.read(FilterInputStream.java:116) at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2391) at com.caucho.hessian.io.Hessian2Input.readBuffer(Hessian2Input.java:2704) at com.caucho.hessian.io.Hessian2Input.read(Hessian2Input.java:2676) at com.caucho.hessian.io.Hessian2Input.parseUTF8Char(Hessian2Input.java:2501) at com.caucho.hessian.io.Hessian2Input.parseChar(Hessian2Input.java:2492) at com.caucho.hessian.io.Hessian2Input.readString(Hessian2Input.java:1328) at com.caucho.hessian.io.JavaDeserializer$StringFieldDeserializer.deserialize(JavaDeserializer.java:635) ... 47 more -- ------------------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Lots of Connection reset</header>
    <date>Wed Jan 13 18:09:05 CET 2010</date>
    <body>I wouldn't think that would make a difference, as long as the flush/close for the request always occurs at the end of the request. The 4.0.3 hessian did change the i/o handling, because of the URL disconnect() that I'd added for testing purposes (the 4.0.3 change generalized the http connection and made it pluggable.) It's possible the disconnect() was causing problems, which might not be a problem in the new version. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Lots of Connection reset</header>
    <date>Thu Jan 14 14:13:30 CET 2010</date>
    <body>Scott Ferguson wrote (2010-01-13 18:07): Scott, I notice that in com.caucho.hessian.server.HessianSkeleton there are lots of out.close() but no out.flush(). Could unflushed buffers be what is causing this? At least then difference in output size could explain why it works sometimes on the production server and always in test environment. (There is a 200 status in the server log regardless of the result on the client and the size of the response is about 200 kB) I wouldn't think that would make a difference, as long as the flush/close for the request always occurs at the end of the request. The 4.0.3 hessian did change the i/o handling, because of the URL disconnect() that I'd added for testing purposes (the 4.0.3 change generalized the http connection and made it pluggable.) It's possible the disconnect() was causing problems, which might not be a problem in the new version. I'll cross my fingers and wait. Thanks. -- Scott Mattias Jiderhamn wrote (2010-01-08 21:24): I was able to see the error myself today. It occurs within 3 seconds from the Hessian call, so I doubt this is some kind of timeout issue. I can't see any traces of this on the server side. Any other ideas??? Should I add some debugging code somewhere? Scott Ferguson wrote (2009-12-16 15:56): Nope - standalone Resin. It would be a different issue. This looks like a timeout issue, while the previous one was a protocol problem. On the server side, are you seeing any timeout of that connection? Or does changing the socket-timeout avoid the issue? -- Scott Wesley Wu wrote (2009-12-16 11:10): If u'r using apache or other web server backended by resin instead of running resin standalone, I think the 1202 snapshot should fix this issue. 2009/12/16 Mattias Jiderhamn &amp;lt;mj-li...@expertsystems.se&amp;gt;: We are seeing a lot of "Connection reset" with Hessian since the upgrade of our production environment to 4.0.2 (both client and server). Would this be related to the problems already reported against 4.0.2 and thus fixed in the snapshot? Caused by: com.caucho.hessian.io.HessianFieldException: se.exder.marketplace.api.MarketplaceAddressDTO.addressName: Connection reset at com.caucho.hessian.io.JavaDeserializer.logDeserializeError(JavaDeserializer.java:726) at com.caucho.hessian.io.JavaDeserializer$StringFieldDeserializer.deserialize(JavaDeserializer.java:639) at com.caucho.hessian.io.JavaDeserializer.readObject(JavaDeserializer.java:286) at com.caucho.hessian.io.JavaDeserializer.readObject(JavaDeserializer.java:178) at com.caucho.hessian.io.Hessian2Input.readObjectInstance(Hessian2Input.java:2110) at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:2030) at com.caucho.hessian.io.CollectionDeserializer.readLengthList(CollectionDeserializer.java:93) at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:1689) at com.caucho.hessian.io.Hessian2Input.readReply(Hessian2Input.java:351) at com.caucho.hessian.client.HessianProxy.invoke(HessianProxy.java:241) ... 39 more Caused by: java.net.SocketException: Connection reset at java.net.SocketInputStream.read(SocketInputStream.java:168) at java.io.BufferedInputStream.fill(BufferedInputStream.java:218) at java.io.BufferedInputStream.read1(BufferedInputStream.java:258) at java.io.BufferedInputStream.read(BufferedInputStream.java:317) at sun.net.www.http.ChunkedInputStream.readAheadBlocking(ChunkedInputStream.java:525) at sun.net.www.http.ChunkedInputStream.readAhead(ChunkedInputStream.java:582) at sun.net.www.http.ChunkedInputStream.read(ChunkedInputStream.java:669) at java.io.FilterInputStream.read(FilterInputStream.java:116) at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2391) at com.caucho.hessian.io.Hessian2Input.readBuffer(Hessian2Input.java:2704) at com.caucho.hessian.io.Hessian2Input.read(Hessian2Input.java:2676) at com.caucho.hessian.io.Hessian2Input.parseUTF8Char(Hessian2Input.java:2501) at com.caucho.hessian.io.Hessian2Input.parseChar(Hessian2Input.java:2492) at com.caucho.hessian.io.Hessian2Input.readString(Hessian2Input.java:1328) at com.caucho.hessian.io.JavaDeserializer$StringFieldDeserializer.deserialize(JavaDeserializer.java:635) ... 47 more -- ------------------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin License Question</header>
    <date>Tue Dec 15 22:20:22 CET 2009</date>
    <body>I see in our resin license file a "version-expire-date" tag and an "expire-date" tag. The version-expire-date tag corresponds to the date our license expires, but what is the expire-date? I see it's several months after the version-expire-date, but I couldn't find an explanation for what it means. Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin License Question</header>
    <date>Wed Dec 16 11:28:21 CET 2009</date>
    <body>One theory is that it is the last date you may purchase a renewal, before you have to buy a new license? Rob Lockstone wrote (2009-12-15 22:18):</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin License Question</header>
    <date>Wed Dec 16 17:13:24 CET 2009</date>
    <body>My theory is that it's the day resin pro ceases to be "pro". I think this is fairly new, introduced within the last year or so. I don't recall previous licenses having it. Rob</body>
  </mail>
  <mail>
    <header>[Resin-interest] hmux broken pipe</header>
    <date>Mon Dec 14 17:18:15 CET 2009</date>
    <body>when running resin in load-balance cluster with a web-tier(one server) and a app-tier(two server) my app-tier console display the error com.caucho.java.JavaCompiler compileInt Compiling _jsp/_person/_Index__jsp.java com.caucho.java.JavaCompiler compileInt Compiling _jsp/_person/_Header__jsp.java com.caucho.server.cluster.HmuxQueue dispatch java.net.SocketException: Write failed: Broken pipe jrockit.net.SocketNativeIO.writeBytesPinned(Native Method) jrockit.net.SocketNativeIO.socketWrite(SocketNativeIO.java:73) java.net.SocketOutputStream.socketWrite0(SocketOutputStream.java) java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92) java.net.SocketOutputStream.write(SocketOutputStream.java:137) com.caucho.vfs.TcpStream.write(TcpStream.java:150) com.caucho.vfs.WriteStream.flush(WriteStream.java:367) com.caucho.server.cluster.ClusterStream.writeYield(ClusterStream.java:626) com.caucho.server.cluster.HmuxQueue.dispatch(HmuxQueue.java:132) com.caucho.hemp.broker.HempMemoryQueue.consumeQueue(HempMemoryQueue.java:415) com.caucho.hemp.broker.HempMemoryQueue.run(HempMemoryQueue.java:473) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) I'm using resin 4.0.2.s20091202 snapshot on CentOS 5.2 x86 linux compiled with JNI, with a evaluation PRO lisence. JDK: jrockit 1.6.0_14 x86 I thinks maybe caused by &amp;lt;jsp:include&amp;gt; directive. Any ideas? -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] hmux broken pipe</header>
    <date>Mon Dec 14 18:18:34 CET 2009</date>
    <body>Thanks. I've filed this. It looks like a socket timeout issue. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Why is port getting included when request goes to Resin?</header>
    <date>Fri Dec 11 18:27:26 CET 2009</date>
    <body>Hi, I have Apache 2.2 and Resin 3.0.19 running locally on my Mac 10.5.6.  I am trying to run a cluster of 2 resin instances locally.  However, if I visit a page like http://localhost/apps/oit/governor/citizen/assistanceUtility/contactInfo.jsf and submit the form, the resulting URL looks ilke http://localhost:8080/apps/oit/governor/citizen/assistanceUtility/requestAssistanceGovOfficeReview.jsf How can I eliminate the port from being included?  Here is how I'm setting that clustering in my httpd.conf file ... ServerAdmin webmas...@localhost BalancerMember http://localhost:8080 loadfactor=1 disablereuse=on BalancerMember http://localhost:8081 loadfactor=1 disablereuse=on ProxyPass /apps balancer://mycluster/apps lbmethod=byrequests and here is how I set up one of my resin instances (from resin.conf): ... Any ideas are appreciated, - Dave -- View this message in context: http://old.nabble.com/Why-is-port-getting-included-when-request-goes-to-Resin--tp26748298p26748298.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Potential class loader leaks</header>
    <date>Thu Dec 10 21:24:09 CET 2009</date>
    <body>So I've spent another day hunting that lo(ooo)ng standing PermGen memory leak in our application and/or Resin. I made a new discovery which "shouldn't" be an issue, but could potentially fix problems. From my investigation it seems that whenever the application is reloaded, a reference to the old com.caucho.loader.EnvironmentClassLoader is kept in com.caucho.hessian.io.SerializerFactory._defaultFactory. I agree that in theory this shouldn't happen, since the ClassLoader is a weak reference key, /however/ if I add some code to the application shutdown, explicitly removing the EnvironmentClassLoader from _defaultFactory using reflection, the garbage collector is able to unload these classes. I should mention though, that there is still a minimum of two EnvironmentClassLoaders for the given application after reloading at least once. The former one seem to stick around somehow. We have discussed this before, Scott; how references are kept inside com.caucho.server.dispatch.Invocation, at least in a low traffic (dev / debugging) environment. Not sure if this a real problem, but ideally the class loader of the previous version should be available for garbage collection before the classes of the new version are loaded ('cause there is no turning back anyway, is there...?). Otherwise you always have to set MaxPermSize to at least twice as much as the application actually needs. In some profiling session I've also seen references from logging and "index-cache-writer" threads, which might be worth looking into. Scott, could you tell me if anything can be done to the issues mentioned above? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Potential class loader leaks</header>
    <date>Fri Dec 11 00:25:39 CET 2009</date>
    <body>I changed this in 4.0.2 (with some more changes in 4.0.3). Even though the key is a weak reference, the value is a strong reference. On a web-app change the Invocation cache is cleared, so there shouldn't be any old references there. In the past this could be a problem with JNI because a JNI library can only be loaded in one classloader (that may have been changed but it always was a JDK restriction.) The index writer shouldn't have any references to any non-system classloaders. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Potential class loader leaks</header>
    <date>Fri Dec 11 08:38:52 CET 2009</date>
    <body>Scott Ferguson wrote (2009-12-11 00:23): So I've spent another day hunting that lo(ooo)ng standing PermGen memory leak in our application and/or Resin. I made a new discovery which "shouldn't" be an issue, but could potentially fix problems. From my investigation it seems that whenever the application is reloaded, a reference to the old com.caucho.loader.EnvironmentClassLoader is kept in com.caucho.hessian.io.SerializerFactory._defaultFactory. I agree that in theory this shouldn't happen, since the ClassLoader is a weak reference key, /however/ if I add some code to the application shutdown, explicitly removing the EnvironmentClassLoader from _defaultFactory using reflection, the garbage collector is able to unload these classes. I changed this in 4.0.2 (with some more changes in 4.0.3). Even though the key is a weak reference, the value is a strong reference. Indeed, this has been fixed in the latest snapshot! Good job! Sorry for not testing against that... I should mention though, that there is still a minimum of two EnvironmentClassLoaders for the given application after reloading at least once. The former one seem to stick around somehow. We have discussed this before, Scott; how references are kept inside com.caucho.server.dispatch.Invocation, at least in a low traffic (dev / debugging) environment. On a web-app change the Invocation cache is cleared, so there shouldn't be any old references there. Could you please double check that? For example, what happens to the 503:ed requests received during redeployment? I have an examplifying YourKit (freely available EAP) snapshot I could send you if it helps. Here is what I'm getting, which seems repeatable over and over in my environment: Startup: 9k loaded classes, no unloaded classes, 49 MB PermGen First redeployment: 15k loaded classes, no unloaded classes, 77 MB PermGen = one extra instance of the app with 6k classes loaded. Assumed a total of 2 classloaders Second redeployment: 15k loaded classes, 6k unloaded classes, 77 MB PermGen = initial/first(?) instance GC:ed and a new one loaded. Still 2 classloaders. Third redeployment: 21k loaded classes, 6k unloaded classes, 105 MB PermGen = one extra instance of the app with 6k classes loaded, nothing GC:ed. Assumed a total of 3 classloaders Fourth redeployment: 21k loaded classes, 12k unloaded classes, 105 MB PermGen = second(?) instance GC:ed and a new one loaded. Still 3 classloaders. (Fifth redeployment: 15k loaded classes, 24k unloaded classes, 77 MB PermGen = third and fourth(?) instance GC:ed and a new one loaded. 2 classloaders. Haven't repeated this test enough to build a thesis) Not sure if this a real problem, but ideally the class loader of the previous version should be available for garbage collection before the classes of the new version are loaded ('cause there is no turning back anyway, is there...?). In the past this could be a problem with JNI because a JNI library can only be loaded in one classloader (that may have been changed but it always was a JDK restriction.) Are you saying this shouldn't be a issue in 4.0.2/snapshot running on JDK 1.6? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Potential class loader leaks</header>
    <date>Fri Dec 11 09:35:35 CET 2009</date>
    <body>Mattias Jiderhamn wrote (2009-12-11 08:34): I should mention though, that there is still a minimum of two EnvironmentClassLoaders for the given application after reloading at least once. The former one seem to stick around somehow. We have discussed this before, Scott; how references are kept inside com.caucho.server.dispatch.Invocation, at least in a low traffic (dev / debugging) environment. On a web-app change the Invocation cache is cleared, so there shouldn't be any old references there. Could you please double check that? For example, what happens to the 503:ed requests received during redeployment? I have an examplifying YourKit (freely available EAP) snapshot I could send you if it helps. Here is what I'm getting, which seems repeatable over and over in my environment: Startup: 9k loaded classes, no unloaded classes, 49 MB PermGen First redeployment: 15k loaded classes, no unloaded classes, 77 MB PermGen = one extra instance of the app with 6k classes loaded. Assumed a total of 2 classloaders Second redeployment: 15k loaded classes, 6k unloaded classes, 77 MB PermGen = initial/first(?) instance GC:ed and a new one loaded. Still 2 classloaders. Third redeployment: 21k loaded classes, 6k unloaded classes, 105 MB PermGen = one extra instance of the app with 6k classes loaded, nothing GC:ed. Assumed a total of 3 classloaders Fourth redeployment: 21k loaded classes, 12k unloaded classes, 105 MB PermGen = second(?) instance GC:ed and a new one loaded. Still 3 classloaders. (Fifth redeployment: 15k loaded classes, 24k unloaded classes, 77 MB PermGen = third and fourth(?) instance GC:ed and a new one loaded. 2 classloaders. Haven't repeated this test enough to build a thesis) I should probably point out that garbage collection was forced a couple of times before noting these numbers, so it shouldn't be a cased of delayed GC. --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Potential class loader leaks</header>
    <date>Mon Dec 14 18:22:23 CET 2009</date>
    <body>Scott, can you tell me whether you've been able to reproduce this scenario? Mattias Jiderhamn wrote (2009-12-11 08:34): Scott Ferguson wrote (2009-12-11 00:23): So I've spent another day hunting that lo(ooo)ng standing PermGen memory leak in our application and/or Resin. I made a new discovery which "shouldn't" be an issue, but could potentially fix problems. From my investigation it seems that whenever the application is reloaded, a reference to the old com.caucho.loader.EnvironmentClassLoader is kept in com.caucho.hessian.io.SerializerFactory._defaultFactory. I agree that in theory this shouldn't happen, since the ClassLoader is a weak reference key, /however/ if I add some code to the application shutdown, explicitly removing the EnvironmentClassLoader from _defaultFactory using reflection, the garbage collector is able to unload these classes. I changed this in 4.0.2 (with some more changes in 4.0.3). Even though the key is a weak reference, the value is a strong reference. Indeed, this has been fixed in the latest snapshot! Good job! Sorry for not testing against that... I should mention though, that there is still a minimum of two EnvironmentClassLoaders for the given application after reloading at least once. The former one seem to stick around somehow. We have discussed this before, Scott; how references are kept inside com.caucho.server.dispatch.Invocation, at least in a low traffic (dev / debugging) environment. On a web-app change the Invocation cache is cleared, so there shouldn't be any old references there. Could you please double check that? For example, what happens to the 503:ed requests received during redeployment? I have an examplifying YourKit (freely available EAP) snapshot I could send you if it helps. Here is what I'm getting, which seems repeatable over and over in my environment: Startup: 9k loaded classes, no unloaded classes, 49 MB PermGen First redeployment: 15k loaded classes, no unloaded classes, 77 MB PermGen = one extra instance of the app with 6k classes loaded. Assumed a total of 2 classloaders Second redeployment: 15k loaded classes, 6k unloaded classes, 77 MB PermGen = initial/first(?) instance GC:ed and a new one loaded. Still 2 classloaders. Third redeployment: 21k loaded classes, 6k unloaded classes, 105 MB PermGen = one extra instance of the app with 6k classes loaded, nothing GC:ed. Assumed a total of 3 classloaders Fourth redeployment: 21k loaded classes, 12k unloaded classes, 105 MB PermGen = second(?) instance GC:ed and a new one loaded. Still 3 classloaders. (Fifth redeployment: 15k loaded classes, 24k unloaded classes, 77 MB PermGen = third and fourth(?) instance GC:ed and a new one loaded. 2 classloaders. Haven't repeated this test enough to build a thesis) Not sure if this a real problem, but ideally the class loader of the previous version should be available for garbage collection before the classes of the new version are loaded ('cause there is no turning back anyway, is there...?). In the past this could be a problem with JNI because a JNI library can only be loaded in one classloader (that may have been changed but it always was a JDK restriction.) Are you saying this shouldn't be a issue in 4.0.2/snapshot running on JDK 1.6? --</body>
  </mail>
  <mail>
    <header>[Resin-interest] support spatial queries in amber</header>
    <date>Thu Dec 10 18:25:34 CET 2009</date>
    <body>Hello I use mysql with spatial index and would like to use amber queries with spatial field I tried these sort of queries : select p from Prop p where Spatial.within(p.pos,Spatial.mPointFromText('MULTIPOINT(238500 6229301,238500 6260453,283700 6260453,283700 6229301)',0)) But the java program stops (with no exception) when I call createQuery()... I found nothing in amber doc, but I've read here : http://www.jpox.org/docs/1_2/spatial.html that there could be spatial support in jpql. Is there any plan to add spatial support in amber ? Thanks -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] support spatial queries in amber</header>
    <date>Wed Dec 16 16:36:14 CET 2009</date>
    <body>I really would like to know what is the Caucho point of view about this... Thanks http://www.jpox.org/docs/1_2/spatial.html -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] support spatial queries in amber</header>
    <date>Wed Dec 16 18:26:42 CET 2009</date>
    <body>At the moment, Amber development is being put on hold (except critical bugs), until we finish the web profile, because our main strategy is to focus on the core quality for both Resin and Quercus. So we would not be looking at adding spatial support for another 6 months at minimum, and even then we may decide Amber is still a lower priority than core Resin quality. -- Scott http://www.jpox.org/docs/1_2/spatial.html</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] support spatial queries in amber</header>
    <date>Wed Dec 16 18:47:45 CET 2009</date>
    <body>It's worth mentioning that Hibernate works great as a JPA provider for Resin.  I haven't tried it, but there's this: http://www.hibernatespatial.org/ Jeff http://www.jpox.org/docs/1_2/spatial.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] support spatial queries in amber</header>
    <date>Thu Dec 17 23:43:46 CET 2009</date>
    <body>Thanks Jeff &amp;amp; Scott Of course Resin quality stability and performance are the priority also for me. And for the moment I use simple sql queries instead of Amber. Amber comes with Resin as many other features like hessian, comet etc. - "all in one". That also makes Resin very attractive and as spatial queries becomes more and more popular (and really useful), it makes sense that Amber could handle spatial queries. That's a wish at least. Thanks. http://www.hibernatespatial.org/ http://www.jpox.org/docs/1_2/spatial.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.1.9 Authentication problem</header>
    <date>Sat Dec 05 22:04:36 CET 2009</date>
    <body>Hello. I use resin 3.1.9.. om.caucho.server.security.JdbcAuthenticator fail form-base Authentication which use UTF-8(2-byte) character. resin 3.1.3 is success in UTF-8(2-byte) character. -------- resin.conf ------------------------------ SELECT login_pass FROM isas.login_view WHERE login_id=? SELECT role FROM isas.login_view WHERE login_id=? ----------- testweb/WEB-INF/web.xml ------------------ http://java.sun.com/xml/ns/j2ee ... ... ------------------------------------------------------ How can I success authentication by JdbcAuthenticator in UTF-8 2-byte character ?</body>
  </mail>
  <mail>
    <header>[Resin-interest] new Resin 4.0 snapshot</header>
    <date>Wed Dec 02 20:09:05 CET 2009</date>
    <body>There's a new Resin 4.0 snapshot with additional fixes for the hmux/forwarding issues. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Wed Dec 02 20:51:28 CET 2009</date>
    <body>Thanks Scott. This snapshot finally fix it all. I'll have to fix it for you if you don't get this snapshot out in a week :) -Wesley 2009/12/3 Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Wed Dec 02 21:16:37 CET 2009</date>
    <body>Thanks, Scott. The snapshot doesn't seem to have fixed the related error that we were seeing with one of our apps. If we submit a form with a long list of files in a text box, we get the same error according to Grails (I don't see anything special in Resin's "finer" logging, though). If the list of files in the field is shortened, we get no error. Could this be a related POST size error? We're trying to troubleshoot the app itself on our end, but there's not much in the logs to go by. Thanks, Jamie -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Wednesday, December 02, 2009 1:08 PM To: resin-interest@caucho.com Subject: [Resin-interest] new Resin 4.0 snapshot There's a new Resin 4.0 snapshot with additional fixes for the hmux/forwarding issues. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Wed Dec 02 21:47:42 CET 2009</date>
    <body>You can ignore this. After further investigation, the developer in charge of the app says that it's returning a similar error under Tomcat, which he claims it was not before. There must be something else going on. Thanks for the snapshot, though. Shiny new toys are always fun... -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak Sent: Wednesday, December 02, 2009 2:16 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] new Resin 4.0 snapshot Thanks, Scott. The snapshot doesn't seem to have fixed the related error that we were seeing with one of our apps. If we submit a form with a long list of files in a text box, we get the same error according to Grails (I don't see anything special in Resin's "finer" logging, though). If the list of files in the field is shortened, we get no error. Could this be a related POST size error? We're trying to troubleshoot the app itself on our end, but there's not much in the logs to go by. Thanks, Jamie -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Wednesday, December 02, 2009 1:08 PM To: resin-interest@caucho.com Subject: [Resin-interest] new Resin 4.0 snapshot There's a new Resin 4.0 snapshot with additional fixes for the hmux/forwarding issues. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Wed Dec 02 22:02:42 CET 2009</date>
    <body>Thanks for the update. The tests I added for the most recent changes should have covered large-file posts as well, but there's always a chance some case was missing. Yep. We did some important refactoring for 4.0.2 that had been put off for ages, but unfortunately exposed holes in the QA tests. (Of course, now we have the new tests, so there's a silver lining.) -- Scott mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Wed Dec 02 22:24:48 CET 2009</date>
    <body>Another SEVERE issues with this snapshot. All "POST" request was dramatically CHANGED to "GET" request. -Wesley 2009/12/3 Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Wed Dec 02 22:37:54 CET 2009</date>
    <body>I'm not seeing that behavior. Can you turn on the finer logging and see what filters/includes/forwards are happening? -- Scott mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Wed Dec 02 23:02:57 CET 2009</date>
    <body>I turned it on: com.caucho.server.hmux.HmuxRequest handleRequestImpl Hmux[4] start request com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[4] r: end of file com.caucho.server.connection.ResponseStream finish Hmux[4] close stream com.caucho.server.hmux.HmuxResponseStream flushNext Hmux[4] flush() com.caucho.server.hmux.HmuxRequest handleRequestImpl Hmux[1] start request com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[1] r: end of file com.caucho.server.connection.ResponseStream finish Hmux[1] close stream com.caucho.server.hmux.HmuxResponseStream flushNext Hmux[1] flush() com.caucho.server.hmux.HmuxRequest handleRequestImpl Hmux[3] start request com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] channel-r 1 com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] U:uri /register/ com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] m:method GET com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] c protocol: HTTP/1.1 com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] v server-host: localhost com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] g server-port: 889 com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] h 127.0.0.1 com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] i 127.0.0.1 com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] j remote-port: 40942 com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] H Host=localhost:889 com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] H Connection=keep-alive com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] H User-Agent=Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US) AppleWebKit/532.0 (KHTML, like Gecko) Chrome/3.0.195.33 Safari/532.0 com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] H Referer= http://localhost:889/register/ com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] H Cache-Control=max-age=0 com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] H Accept=application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5 com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] H Accept-Encoding=gzip,deflate,sdch com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] H JSESSIONID=aaaYdu83foOsrfeQW7qvs com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] H Accept-Language=zh-CN,zh;q=0.8 com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] H Accept-Charset=gb18030,utf-8;q=0.7,*;q=0.3 com.caucho.server.hmux.HmuxRequest scanHeaders Hmux[3] Q-r: end of request If I use 8080 port I saw: com.caucho.server.http.HttpRequest parseRequest Http[1] POST /register HTTP/1.1 com.caucho.server.http.HttpRequest parseRequest Http[1] Remote-IP: 127.0.0.1:61096 com.caucho.server.http.HttpRequest parseHeaders Http[1] Host: localhost:8080 com.caucho.server.http.HttpRequest parseHeaders Http[1] Connection: keep-alive com.caucho.server.http.HttpRequest parseHeaders Http[1] User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US) AppleWebKit/532.0 (KHTML, like Gecko) Chrome/3.0.195.33 Safari/532.0 com.caucho.server.http.HttpRequest parseHeaders Http[1] Referer: http://localhost:8080/register com.caucho.server.http.HttpRequest parseHeaders Http[1] Content-Length: 110 com.caucho.server.http.HttpRequest parseHeaders Http[1] Cache-Control: max-age=0 com.caucho.server.http.HttpRequest parseHeaders Http[1] Origin: http://localhost:8080 com.caucho.server.http.HttpRequest parseHeaders Http[1] Content-Type: application/x-www-form-urlencoded com.caucho.server.http.HttpRequest parseHeaders Http[1] Accept: application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5 com.caucho.server.http.HttpRequest parseHeaders Http[1] Accept-Encoding: gzip,deflate,sdch com.caucho.server.http.HttpRequest parseHeaders Http[1] Cookie: JSESSIONID=aaaYdu83foOsrfeQW7qvs com.caucho.server.http.HttpRequest parseHeaders Http[1] Accept-Language: zh-CN,zh;q=0.8 com.caucho.server.http.HttpRequest parseHeaders Http[1] Accept-Charset: gb18030,utf-8;q=0.7,*;q=0.3 2009/12/3 Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Wed Dec 02 23:07:56 CET 2009</date>
    <body>I wonder why this happened. I encountered this in all 4.0.2 versions in my developer machine while not occurred in production machine. I'll do some investigation next. Thanks Scoot. 2009/12/3 Wesley Wu &amp;lt;wumen...@gmail.com&amp;gt;: http://localhost:889/register/ http://localhost:8080/register http://localhost:8080 mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Wed Dec 02 23:43:03 CET 2009</date>
    <body>I think the win32/win64 dlls should be recompiled against the new modification. 2009/12/3 Wesley Wu &amp;lt;wumen...@gmail.com&amp;gt;: http://localhost:889/register/ http://localhost:8080/register http://localhost:8080 mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Thu Dec 03 01:24:16 CET 2009</date>
    <body>I changed my post url to "/register1" instead or "/register" and the post request was handled properly. So I think a request to the url "/register" will be always treated as "GET"? I scanned the apache log, and the post request was logged correct: localhost 127.0.0.1 - - [03/Dec/2009:08:18:21 +0800] "POST /register HTTP/1.1" 301 346 " http://localhost:889/register/" ; "Mozilla/5.0 (Windows; U; Windows NT 6.0; zh-CN; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5 GTB6 (.NET CLR 3.5.30729)" 1000 localhost 127.0.0.1 - - [03/Dec/2009:08:18:21 +0800] "GET /register/ HTTP/1.1" 200 9174 " http://localhost:889/register/" ; "Mozilla/5.0 (Windows; U; Windows NT 6.0; zh-CN; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5 GTB6 (.NET CLR 3.5.30729)" 77000 But when I looked into resin's access log, I was shocked. I found no access log item in it, only the subsequent redirected items: 127.0.0.1 - - [03/Dec/2009:08:18:21 +0800] "GET /register/ HTTP/1.1" 200 8707 " http://localhost:889/register/" Windows NT 6.0; zh-CN; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5 GTB6 (.NET CLR 3.5.30729)" 127.0.0.1 - - [03/Dec/2009:08:18:21 +0800] "GET /css/common.css HTTP/1.1" 304 - " http://localhost:889/register/" ; "Mozilla/5.0 (Windows; U; Windows NT 6.0; zh-CN; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5 GTB6 (.NET CLR 3.5.30729)" 127.0.0.1 - - [03/Dec/2009:08:18:21 +0800] "GET /js/humanmessage.js HTTP/1.1" 304 - " http://localhost:889/register/" ; "Mozilla/5.0 (Windows; U; Windows NT 6.0; zh-CN; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5 GTB6 (.NET CLR 3.5.30729)" 127.0.0.1 - - [03/Dec/2009:08:18:21 +0800] "GET /css/style05.css HTTP/1.1" 304 - " http://localhost:889/register/" ; "Mozilla/5.0 (Windows; U; Windows NT 6.0; zh-CN; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5 GTB6 (.NET CLR 3.5.30729)" -Wesley 2009/12/3 Wesley Wu &amp;lt;wumen...@gmail.com&amp;gt;: http://localhost:889/register/ http://localhost:8080/register http://localhost:8080 mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Thu Dec 03 02:07:21 CET 2009</date>
    <body>Resin doesn't have any special URL like /register (except the servlet j_*). Is there something in the Apache end which is redirecting, or changing it, like a filter? From the log you sent earlier, it was the front end (Apache) that's sending the GET. (There's a log entry for the HTTP method parsing.) -- Scott http://localhost:889/register/" ; "Mozilla/5.0 http://localhost:889/register/" ; "Mozilla/5.0 http://localhost:889/register/" http://localhost:889/register/" ; "Mozilla/5.0 http://localhost:889/register/" ; "Mozilla/5.0 http://localhost:889/register/" ; "Mozilla/5.0 http://localhost:889/register/ http://localhost:8080/register http://localhost:8080 mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Thu Dec 03 02:23:24 CET 2009</date>
    <body>that GET was the subsequent redirect after the POST. I use redirect after post pattern. A request first POST to "/register" and after some processing, redirect to "/register" again using a GET request. -Wesley 2009/12/3 Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: http://localhost:889/register/" ; "Mozilla/5.0 http://localhost:889/register/" ; "Mozilla/5.0 http://localhost:889/register/" http://localhost:889/register/" ; "Mozilla/5.0 http://localhost:889/register/" ; "Mozilla/5.0 http://localhost:889/register/" ; "Mozilla/5.0 http://localhost:889/register/ http://localhost:8080/register http://localhost:8080 mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jamison Novak mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Thu Dec 03 08:40:55 CET 2009</date>
    <body>From your logs, one can see that the POST request to Apache is answered with a redirect (301) to http://localhost:889/register/ and that's why there is a second request to the same URL with GET. That second one makes it through Apache and gets to Resin which answers it. So, it is Apache that is answering the first POST request with a redirect. Resin never gets to see the POST request. I would check the Apache configuration to look for rewrite rules etc. that would make that happen. S! D. Wesley Wu escribió: http://localhost:889/register/" ; "Mozilla/5.0 http://localhost:889/register/" ; "Mozilla/5.0 http://localhost:889/register/" http://localhost:889/register/" ; "Mozilla/5.0 http://localhost:889/register/" ; "Mozilla/5.0 http://localhost:889/register/" ; "Mozilla/5.0</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Thu Dec 03 08:54:56 CET 2009</date>
    <body>Hi Scott, sorry to have to let you know that the POST data problem still occurs randomly with our applications ( http://bugs.caucho.com/view.php?id=3789 ). It seems that there are (also) other issues compared to 0003790. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Thu Dec 03 21:25:20 CET 2009</date>
    <body>http://bugs.caucho.com/view.php?id=3789 ). Thanks for the update. It'll be another couple of days before we can release a new snapshot. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Fri Dec 18 07:00:43 CET 2009</date>
    <body>Hi Scott, http://bugs.caucho.com/view.php?id=3789 ). to keep you updated on this issue: it's still not solved with the latest snapshot (Resin-Pro-4.0.s091216, Apache 2.2.14/mod_caucho) Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Fri Dec 18 18:20:38 CET 2009</date>
    <body>http://bugs.caucho.com/view.php?id=3789 ). Can you send the stack trace/error you're seeing with the latest snapshot? The classes and lines have changed considerably as part of the cleanup/fixes for this bug. thanks, -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Sun Dec 20 06:48:17 CET 2009</date>
    <body>Hi Scott, there's is no stack/error log I could post, the whole bunch of form parameters just aren't avialable within the Wicket application once in a while. This also doesn't occur to only our applications, but also e.g. happens with Artifactory (2.0.8 - with modified jersey package-resource-attributes, where resin seems to do the wrong thing, but that's another bug...). It would be great if you could deploy some "default" applications on resin before releasing in your QA process. This would help to check where problems in the wild might occur. I'd suggest a few apps like TeamCity, Jira, Artifactory and SubEtha for a start. Theses use many aspects of the container/classloader and could point out a lot of things some of us are running into... Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Wed Dec 30 14:58:50 CET 2009</date>
    <body>Hi Scott, resin-pro-4.0.s091228 the post-problem still persist with this snapshot. Once in a while the parameters don't get thru to the Wicket application. No exception/stacktrace for this, I'm sorry. I wish you a happy new year 2010 - all the best! Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] new Resin 4.0 snapshot</header>
    <date>Wed Dec 30 21:46:48 CET 2009</date>
    <body>Hmm. That snapshot should have had a fix. Thanks for the update. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin-spring missing in resin-4.0.2 ?</header>
    <date>Wed Dec 02 10:56:45 CET 2009</date>
    <body>resin-spring-4.0.1.jar is in 4.0.1 but resin-spring-4.0.2.jar is missing in 4.0.2 why ?</body>
  </mail>
  <mail>
    <header>[Resin-interest] meaning of "/" in rewrite-dispatch</header>
    <date>Mon Nov 30 22:50:11 CET 2009</date>
    <body>I have a (hopefully) quick question about the meaning of "/" in regexp attributes of the rewrite-dispatch tags. For example: ... Does the "/" have the same meaning as in servlet mappings, i.e. "default"? Or does it only match requests for "/"? That is, does the above &amp;lt;dispatch&amp;gt; match a request for "/foo.jpg", in addition to "/" and "/bar.html"? Thanks, Ethan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] meaning of "/" in rewrite-dispatch</header>
    <date>Mon Nov 30 23:53:35 CET 2009</date>
    <body>This will match any request that has a '/' (basically every request has a '/') Something like the following will change .html to .jsp http://www.caucho.com/resin/admin/rewrite.xtp Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] meaning of "/" in rewrite-dispatch</header>
    <date>Tue Dec 01 02:44:04 CET 2009</date>
    <body>Thanks for the reply Alex. So how would I match only "/" and ".html"? Something like this? Cheers, Ethan ----- Original Message ----- To: "General Discussion for the Resin application server" Sent: Monday, November 30, 2009 2:52:45 PM Subject: Re: [Resin-interest] meaning of "/" in rewrite-dispatch This will match any request that has a '/' (basically every request has a '/') Something like the following will change .html to .jsp http://www.caucho.com/resin/admin/rewrite.xtp Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] meaning of "/" in rewrite-dispatch</header>
    <date>Tue Dec 01 03:17:26 CET 2009</date>
    <body>That looks right, Ethan. The parenthesis are optional here but they do make regexp more readable. Alex http://www.caucho.com/resin/admin/rewrite.xtp http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] 3.1.9 - Database Session Clustering Problem</header>
    <date>Mon Nov 30 18:31:36 CET 2009</date>
    <body>Hi everyone, I'm seeing some strange behavior on Resin 3.1.9 with database session clustering. I have two app servers in the cluster. If I take one of the servers down. I see in the database all the data for the server's sessions cleared. The sessions remain in the database just without any data except for I'm guessing an identification value like - 0xACED0005770400000000. Is there a reason why this happens? I'm not using always-load or always save attributes. Any help would be appreciated. Cheers, Matt. Matt Garner Senior Java Developer ------------------------------- mgar...@limehousesoftware.co.uk Limehouse Software Ltd DDI:  01628 640 451 Main: 01628 640 401 Fax:  01628 640 461 Limehouse Software Ltd St Cloud Gate St Cloud Way Cookham Road Maidenhead, Berks SL6 8XD www.limehousesoftware.co.uk - Unifying Information Limehouse Software Limited - An Objective Company The information contained in this e-mail or in any attachments is confidential and is intended solely for the named addressee only. Access to this e-mail by anyone else is unauthorised. If you are not the intended recipient, please notify Limehouse Software Ltd immediately by returning this e-mail to sender or calling 01628 640 401 and do not read, use or disseminate the information. Opinions expressed in this e-mail are those of the sender and not necessarily the company. Although an active anti-virus policy is operated, the company accepts no liability for any damage caused by any virus transmitted by this e-mail, including any attachments.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.1.9 - Database Session Clustering Problem</header>
    <date>Tue Dec 01 03:17:22 CET 2009</date>
    <body>Hi Matt, Can you print what a typical row would look like for the 'erased' session. What database and driver do you use? Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.1: resin:import of jvm-args</header>
    <date>Mon Nov 30 16:21:13 CET 2009</date>
    <body>I have a situation where different servers should have different jvm-args, but I would like to have a single resin.xml. I tried doing a resin:import on a jvm.xml file that has just jvm-args in it, but I haven't found a combination that works.  I have tried surrounding the &amp;lt;jvm-arg&amp;gt; tags like this: Try1: ...jvm-args.. Try 2: Try 3: Try 4: None of these are working.  Any thoughts? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1: resin:import of jvm-args</header>
    <date>Mon Nov 30 18:30:36 CET 2009</date>
    <body>Regards, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1: resin:import of jvm-args</header>
    <date>Mon Nov 30 18:58:48 CET 2009</date>
    <body>Hmm, that's exactly what I tried first, as mentioned below.  Can you have jvm-arg inside a resin:import'ed file? Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1: resin:import of jvm-args</header>
    <date>Mon Nov 30 19:18:55 CET 2009</date>
    <body>Did it work for you? What version of Resin 3.1 did you try it with if it did not work? Nope, the server does not allow &amp;lt;resin:import tag. Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1: resin:import of jvm-args</header>
    <date>Mon Nov 30 19:26:02 CET 2009</date>
    <body>No, none of those scenarios worked.  It is with Resin 3.1.9.  I was trying to resin:import the jvm-args, so I guess that's why it was failing.  I have unique jvm-arg needs for different servers so I was hoping I could pull that off. Bummer.  Thanks for clarifying. Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1: resin:import of jvm-args</header>
    <date>Mon Nov 30 19:31:04 CET 2009</date>
    <body>The excerpt below should work and it will allow you to have all the configuration in one file. Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1: resin:import of jvm-args</header>
    <date>Mon Nov 30 21:09:44 CET 2009</date>
    <body>Thanks Alex.  My problem isn't with multiple servers on a single machine though.  I have multiple machines, each with one server, and a few of the machines need a different set of jvm-args.  I was trying to get by with one Resin configuration file where I could pass in a fileset option of resin:import).  It's working great except the one little snafu of not being able to import jvm-arg settings. I think I will just have to throw some resin:choose around the jvm-arg stuff. Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1: resin:import of jvm-args</header>
    <date>Mon Nov 30 22:06:01 CET 2009</date>
    <body>Hi Aaron, Maybe I am missing something, but if you can pass in -Dconfiguration=wherever to your individual machines (in your /etc/init.d/resin script or wherever, I assume?), can't you pass in your server specific JVM args there too? Rachel http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1: resin:import of jvm-args</header>
    <date>Mon Nov 30 22:27:09 CET 2009</date>
    <body>Probably.  The configuration is passed in via an environment variable, but I could pass those in dynamically too if I have too.  If we set those from our resin script will the ResinWatchdogManager pass the same values to the actual Resin server, when it launches it?  I wasn't sure, so I was just going by the example resin.conf file that comes with Resin 3.1.9. Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1: resin:import of jvm-args</header>
    <date>Mon Nov 30 23:20:29 CET 2009</date>
    <body>Well, they are JVM system variables so it isn't so much that ResinWatchdogManager would pass them to the server, but that they're set in the JVM when it's started and anything in that runtime instance will have them available.  My startup script uses this technique and it works great. I suppose it is possible that a later version changed this behavior (we're still on 3.0.21) but I'd be extremely surprised if that's the case. Rachel http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1: resin:import of jvm-args</header>
    <date>Mon Nov 30 23:30:30 CET 2009</date>
    <body>Yes. The variable needs to be exported !#/bin/bash export foo=foo-value bin/httpd.sh -server a start resin.conf file: Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1: resin:import of jvm-args</header>
    <date>Mon Nov 30 23:51:35 CET 2009</date>
    <body>I've got this, which is a slightly different but equivalent technique that doesn't require the jvm-arg tag (applicable bits only, my startup script does other things too): USER=username HTTPD=/usr/local/resin/bin/httpd.sh su $USER -c "$HTTPD start -verbose -J-server -Dvar1=value1 -Dvar2=value2 $*" Rachel http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1: resin:import of jvm-args</header>
    <date>Tue Dec 01 00:00:35 CET 2009</date>
    <body>Just for the benefit of understanding the use case: is this to support n environments that are identical but serve two distinct purposes e.g. - development - testing - production where let's suppose 'testing' runs on a different set of servers and therefor needs different bindings and jvm arguments? Alex http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1: resin:import of jvm-args</header>
    <date>Tue Dec 01 15:23:24 CET 2009</date>
    <body>Yes, very close.  We have several servers, a couple are web servers, a few of them are file servers, we have a remote development system and we run locally.  Each of those "configurations" has a different set of memory constraints.  Development might have 2GB, local has 500MB, web servers have 4GB, file-servers 2GB, for example. Each configuration has its own host.xml and those are loading great via resin:import--&amp;gt;fileset, but the jvm-args can't be pushed into those classes.  So I guess I just have to push them in via command line or use resin:choose in the main resin configuration file, I guess. Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1: resin:import of jvm-args</header>
    <date>Tue Dec 01 08:41:47 CET 2009</date>
    <body>Hi, This works with 3.1.9 but careful as it does not work with 3.1.5, I think it was a new feature introduced later in 3.1 or a bug fixed. We had to go back to 3.1.5 due to JPA issues and had to change our scripts accordingly. In our case, we use different Node.conf configuration files that import the common pieces from a set of files shared between all the nodes. If you share the whole configuration file, be aware that modifying it will "bump" all of your nodes. S! D. Alex escribió:</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin:import (3.1)</header>
    <date>Sun Nov 29 15:10:23 CET 2009</date>
    <body>I am working with 3.1, was wondering if there is a trick to allowing recursive resin:imports?  In other words I would like to resin:import a file from within another file that was already resin:imported. Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin:import (3.1)</header>
    <date>Sun Nov 29 15:34:21 CET 2009</date>
    <body>I just tried it and it looks fine: My resin.conf contains this: http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" When I start Resin, resin.conf will read web-app-ext.conf and also jsp-ext.conf: http://localhost:8080/resin-admin ] active 'file:/C:/Downloads/resin-pro-3.1.9/conf/web-app-ext.conf' ... 'file:/C:/Downloads/resin-pro-3.1.9/conf/jsp-ext.conf' ... http://localhost:8080/ext ] active -- Steffen http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin:import (3.1)</header>
    <date>Sun Nov 29 16:30:24 CET 2009</date>
    <body>mailto:aaron.free...@layerz.com Odd.  I will play with it some more and see what the user error is.  Thanks! Aaron</body>
  </mail>
  <mail>
    <header>[Resin-interest] Multi-Part request error when using HmuxRequest in	Resin 4.0.2(GA)</header>
    <date>Sat Nov 28 06:28:23 CET 2009</date>
    <body>Multi-Part request error when using HmuxRequest. My resin 4.0.2 was behind an apache 2.1.x using CauchoRequest to forward all request for a virtual host to resin. If I use 8080 port without apache, everything goes fine. 2009-11-28 13:14:28.916 ERROR [server-127.0.0.1:6800-5] c.b.c.s.MultiPartRequest (103) - Unable to parse request org.apache.commons.fileupload.FileUploadBase$IOFileUploadException: Processing of multipart/form-data request failed. Stream ended unexpectedly at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:367) [FileUploadBase.class:1.2.1] at com.buysou.cms.servlet.JakartaMultiPartRequest.parse(JakartaMultiPartRequest.java:61) [classes:na] at com.buysou.cms.servlet.MultiPartRequestWrapper.&amp;lt;init&amp;gt;(MultiPartRequestWrapper.java:47) [classes:na] at com.buysou.cms.servlet.CmsPageFilter.wrapRequest(CmsPageFilter.java:268) [classes:na] at com.buysou.cms.servlet.CmsPageFilter.doFilter(CmsPageFilter.java:138) [classes:na] at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) [resin.jar:4.0.2] at com.buysou.servlet.filters.encoding.EnhancedEncodingFilter.doFilter(EnhancedEncodingFilter.java:85) [classes:na] at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) [resin.jar:4.0.2] at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) [resin.jar:4.0.2] at com.caucho.server.cache.CacheFilterChain.doFilter(CacheFilterChain.java:169) [pro.jar:4.0.2] at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) [resin.jar:4.0.2] at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:290) [resin.jar:4.0.2] at com.caucho.server.hmux.HmuxRequest.handleInvocation(HmuxRequest.java:475) [resin.jar:4.0.2] at com.caucho.server.hmux.HmuxRequest.handleRequestImpl(HmuxRequest.java:394) [resin.jar:4.0.2] at com.caucho.server.hmux.HmuxRequest.handleRequest(HmuxRequest.java:357) [resin.jar:4.0.2] at com.caucho.server.port.TcpConnection.handleRequestsImpl(TcpConnection.java:619) [resin.jar:4.0.2] at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:556) [resin.jar:4.0.2] at com.caucho.server.port.TcpConnection$AcceptTask.doTask(TcpConnection.java:1194) [resin.jar:4.0.2] at com.caucho.server.port.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1127) [resin.jar:4.0.2] at com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1158) [resin.jar:4.0.2] at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) [resin.jar:4.0.2] at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) [resin.jar:4.0.2] Caused by: org.apache.commons.fileupload.MultipartStream$MalformedStreamException: Stream ended unexpectedly at org.apache.commons.fileupload.MultipartStream$ItemInputStream.makeAvailable(MultipartStream.java:983) [MultipartStream$ItemInputStream.class:1.2.1] at org.apache.commons.fileupload.MultipartStream$ItemInputStream.read(MultipartStream.java:887) [MultipartStream$ItemInputStream.class:1.2.1] at java.io.InputStream.read(InputStream.java:85) [na:1.6.0_14] at org.apache.commons.fileupload.util.Streams.copy(Streams.java:94) [Streams.class:1.2.1] at org.apache.commons.fileupload.util.Streams.copy(Streams.java:64) [Streams.class:1.2.1] at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:362) [FileUploadBase.class:1.2.1] ... 21 common frames omitted -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multi-Part request error when using	HmuxRequest in Resin 4.0.2(GA)</header>
    <date>Sat Nov 28 18:38:17 CET 2009</date>
    <body>Thanks Wesley, I reported a bug: http://bugs.caucho.com/view.php?id=3790 Alex</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multi-Part request error when using	HmuxRequest in Resin 4.0.2(GA)</header>
    <date>Sun Nov 29 20:05:34 CET 2009</date>
    <body>This bug should be marked as "block" because it prevents resin load-balancer and third-party web server integration from working properly. It seems caucho QA team did not pay much attention to Hmux stuff, because I suffered a lot from it... -Wesley http://bugs.caucho.com/view.php?id=3790 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multi-Part request error when using	HmuxRequest in Resin 4.0.2(GA)</header>
    <date>Mon Nov 30 13:54:55 CET 2009</date>
    <body>Without this bug fixed, 4.0.2 can't be used in production environment. I use two machines with two resin as a load balance cluster, one with a web-tier and a app-tier the other only a app-tier. Every file upload block it. http://bugs.caucho.com/view.php?id=3790 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multi-Part request error when using	HmuxRequest in Resin 4.0.2(GA)</header>
    <date>Mon Nov 30 16:37:16 CET 2009</date>
    <body>Resin 4.x is a development version, so it's not supposed to be used in a production environment anyway :) Cheers, Kai 2009/11/30 Wesley Wu &amp;lt;wumen...@gmail.com&amp;gt;: http://bugs.caucho.com/view.php?id=3790 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multi-Part request error when using	HmuxRequest in Resin 4.0.2(GA)</header>
    <date>Mon Nov 30 16:49:18 CET 2009</date>
    <body>The intent of 4.0.2 was to bring the quality up to be production worthy, so this is a significant issue. It looks like we'll be releasing a 4.0.3 earlier than planned to take care of these issue. -- Scott http://bugs.caucho.com/view.php?id=3790 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multi-Part request error when using	HmuxRequest in Resin 4.0.2(GA)</header>
    <date>Mon Nov 30 16:55:19 CET 2009</date>
    <body>Can you turn on "finer" logging for both machines and send the protocol part of the logs? I can't reproduce the issue here; posts are going through fine. So there must be some difference in the request or the reading that's triggering the problem. -- Scott http://bugs.caucho.com/view.php?id=3790 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multi-Part request error when using	HmuxRequest in Resin 4.0.2(GA)</header>
    <date>Mon Nov 30 18:17:37 CET 2009</date>
    <body>Nevermind. I found it. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multi-Part request error when using	HmuxRequest in Resin 4.0.2(GA)</header>
    <date>Mon Nov 30 18:49:40 CET 2009</date>
    <body>Thanks, Scott. You rocks. We're planning a launch of a new version of my website on December 18. All codes in this new version rely on JSR 299 (hopefully I'll see the final ballot today). So it's a bit emergency for me to solve this problem. I'll be happy if 4.0.3 will be ready by then, but a snapshot with fixes will be ok. Or I'll have to switch back to the 4.0.2 snapshot 091013 (which has performance/logging issue and JPA issues). 2009/12/1 Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multi-Part request error when using	HmuxRequest in Resin 4.0.2(GA)</header>
    <date>Mon Nov 30 21:39:57 CET 2009</date>
    <body>I've uploaded a new snapshot, so it would be great if you can check if this fix is the same one as you're seeing. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Multi-Part request error when using	HmuxRequest in Resin 4.0.2(GA)</header>
    <date>Tue Dec 01 02:36:04 CET 2009</date>
    <body>Thanks Scott. I think the blocking was resolved but another exception occurred: 2009-12-01 09:24:58.789 ERROR [server--6800-6] c.b.c.s.CmsPageFilter (213) - java.lang.IllegalStateException: forward() not allowed after buffer has committed. at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:163) at com.caucho.server.webapp.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:114) at com.buysou.cms.pageactions.TemplateForwardResolution.execute(TemplateForwardResolution.java:37) at com.buysou.cms.servlet.CmsPageFilter.doFilter(CmsPageFilter.java:211) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at com.buysou.servlet.filters.encoding.EnhancedEncodingFilter.doFilter(EnhancedEncodingFilter.java:85) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:88) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:183) at com.caucho.server.cache.CacheFilterChain.doFilter(CacheFilterChain.java:169) at com.caucho.server.webapp.AccessLogFilterChain.doFilter(AccessLogFilterChain.java:103) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:290) at com.caucho.server.hmux.HmuxRequest.handleInvocation(HmuxRequest.java:475) at com.caucho.server.hmux.HmuxRequest.handleRequestImpl(HmuxRequest.java:394) at com.caucho.server.hmux.HmuxRequest.handleRequest(HmuxRequest.java:357) at com.caucho.server.port.TcpConnection.handleRequestsImpl(TcpConnection.java:619) at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:556) at com.caucho.server.port.TcpConnection$AcceptTask.doTask(TcpConnection.java:1194) at com.caucho.server.port.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1127) at com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1158) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) After I processed the posted file attachment and then attempted forwarding to  a jsp page, it told me: forward() not allowed after buffer has committed. I don't think I had written anything to the response before the forwarding. If I use 8080 port, everything goes fine. 2009/12/1 Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Security policy and JSP compilation</header>
    <date>Fri Nov 27 20:33:33 CET 2009</date>
    <body>Hi, We have a security policy for Resin running on our servers. This policy causes JSP compilation to be blocked for Resin 3.1, although it works fine on Resin 2. The issue appears to be caused by Active CodeSource set to null during the compilation of JSP page. Did somebody happen to find a workaround for this? Additional details: CentOS 4, Resin 3.1.9, jdk1.6.0_17 Java security policy debug for failed  JSP compilation attempt: policy: evaluation (codesource/principals) passed policy: evaluate codesources: Policy CodeSource: (file:/usr/resin/resin-3.1.9/- &amp;lt;no signer certificates&amp;gt;) Active CodeSource: (null &amp;lt;no signer certificates&amp;gt;) policy: evaluation (codesource) failed policy: evaluate codesources: Policy CodeSource: (file:/home/test/- &amp;lt;no signer certificates&amp;gt;) Active CodeSource: (null &amp;lt;no signer certificates&amp;gt;) policy: evaluation (codesource) failed policy: evaluate codesources: Policy CodeSource: (file:/usr/java/jdk1.6.0_17/jre/lib/ext/* &amp;lt;no signer certificates&amp;gt;) Active CodeSource: (null &amp;lt;no signer certificates&amp;gt;) policy: evaluation (codesource) failed policy: evaluate codesources: Policy CodeSource: (file:/usr/java/packages/lib/ext/* &amp;lt;no signer certificates&amp;gt;) Active CodeSource: (null &amp;lt;no signer certificates&amp;gt;) policy: evaluation (codesource) failed policy: evaluate codesources: Policy CodeSource: (null &amp;lt;no signer certificates&amp;gt;) Active CodeSource: (null &amp;lt;no signer certificates&amp;gt;) policy: evaluate principals: Policy Principals: [] Active Principals: [] policy:   granting (java.lang.RuntimePermission stopThread) policy:   granting (java.net.SocketPermission localhost:1024- listen,resolve) policy:   granting (java.util.PropertyPermission java.version read) policy:   granting (java.util.PropertyPermission java.vendor read) policy:   granting (java.util.PropertyPermission java.vendor.url read) policy:   granting (java.util.PropertyPermission java.class.version read) policy:   granting (java.util.PropertyPermission os.name read) policy:   granting (java.util.PropertyPermission os.version read) policy:   granting (java.util.PropertyPermission os.arch read) policy:   granting (java.util.PropertyPermission file.separator read) policy:   granting (java.util.PropertyPermission path.separator read) policy:   granting (java.util.PropertyPermission line.separator read) policy:   granting (java.util.PropertyPermission java.specification.version read) policy:   granting (java.util.PropertyPermission java.specification.vendor read) policy:   granting (java.util.PropertyPermission java.specification.name read) policy:   granting (java.util.PropertyPermission java.vm.specification.version read) policy:   granting (java.util.PropertyPermission java.vm.specification.vendor read) policy:   granting (java.util.PropertyPermission java.vm.specification.name read) policy:   granting (java.util.PropertyPermission java.vm.version read) policy:   granting (java.util.PropertyPermission java.vm.vendor read) policy:   granting (java.util.PropertyPermission java.vm.name read) policy: evaluation (codesource/principals) passed [11:18:56.134] java.security.AccessControlException: access denied (java.io.FilePermission /home/test/public_html/WEB-INF/work read) [11:18:56.134]  at java.security.AccessControlContext.checkPermission(AccessControlContext.java:323) [11:18:56.134]  at java.security.AccessController.checkPermission(AccessController.java:546) 11:18:56.134]  at java.lang.SecurityManager.checkPermission(SecurityManager.java:532) [11:18:56.134]  at java.lang.SecurityManager.checkRead(SecurityManager.java:871) [11:18:56.134]  at java.io.File.isDirectory(File.java:752) [11:18:56.134]  at com.caucho.vfs.FilePath.isDirectory(FilePath.java:330) [11:18:56.134]  at com.caucho.loader.SimpleLoader.buildClassPath(SimpleLoader.java:248) [11:18:56.134]  at com.caucho.loader.Loader.buildSourcePath(Loader.java:215) [11:18:56.134]  at com.caucho.loader.DynamicClassLoader.buildResourcePathSpecificFirst(DynamicClassLoader.java:986) [11:18:56.134]  at com.caucho.loader.DynamicClassLoader.getResourcePathSpecificFirst(DynamicClassLoader.java:956) [11:18:56.134]  at _jsp._jsp__jsp.init(_jsp__jsp.java:110) [11:18:56.134]  at com.caucho.jsp.JspManager.loadPage(JspManager.java:397) [11:18:56.134]  at com.caucho.jsp.JspManager.compile(JspManager.java:247) [11:18:56.134]  at com.caucho.jsp.JspManager.createPage(JspManager.java:171) [11:18:56.134]  at com.caucho.jsp.JspManager.createPage(JspManager.java:150) [11:18:56.134]  at com.caucho.jsp.PageManager.getPage(PageManager.java:248) [11:18:56.134]  at com.caucho.jsp.PageManager.getPage(PageManager.java:178) Best Regards, Vlad</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Security policy and JSP compilation</header>
    <date>Sat Nov 28 07:28:36 CET 2009</date>
    <body>Looks like the issue appears to be fixed in http://bugs.caucho.com/view.php?id=3657 as of August 28. However, the latest snapshot of Resin 3.1 available is dated by July, 15.  I am wondering how obtain this change? ) ) ) ) ) ) ) ) ) ) -- Яндекс.Почта. Письма есть. Спама - нет. http://mail.yandex.ru/nospam/sign</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Security policy and JSP compilation</header>
    <date>Wed Dec 02 13:06:13 CET 2009</date>
    <body>Just to continue the one side discussion. Are there instructions on how to build Resin from sources and what dependencies are required for that? Best Wishes, Vlad 28.11.09, 09:27, "Artamonov Vlad" &amp;lt;vla...@yandex.ru&amp;gt;: Looks like the issue appears to be fixed in http://bugs.caucho.com/view.php?id=3657 as of August 28. However, the latest snapshot of Resin 3.1 available is dated by July, 15. I am wondering how obtain this change?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Security policy and JSP compilation</header>
    <date>Sat Dec 19 06:58:22 CET 2009</date>
    <body>  Finishing up the story. The backporting of patches from r6020 of SVN for Resin 4.0.2 and recompiling Resin worked just fine and permissions issue has gone. It would be very nice to have bug #3657 fixed in the upcoming resin 3.1.10 as well.     02.12.09, 14:56, "Artamonov Vlad" &amp;lt;vla...@yandex.ru&amp;gt;: Just to continue the one side discussion. Are there instructions on how to build Resin from sources and what dependencies are required for that? Best Wishes, Vlad 28.11.09, 09:27, "Artamonov Vlad" : Looks like the issue appears to be fixed in http://bugs.caucho.com/view.php?id=3657 as of August 28. However, the latest snapshot of Resin 3.1 available is dated by July, 15. I am wondering how obtain this change? -- Здесь спама нет http://mail.yandex.ru/nospam/sign</body>
  </mail>
  <mail>
    <header>[Resin-interest] test this mail list</header>
    <date>Fri Nov 27 03:30:07 CET 2009</date>
    <body>I am sorry to send your this test email. I just want to test the result of subscribtion. If you receive this email, please feed back. Thank you very much Rock ( A resin developper)</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin V Glassfish</header>
    <date>Fri Nov 27 03:36:06 CET 2009</date>
    <body>Hi All, We have had in-house Java based systems running on resin for many years now (since 2001). A few newer developers have thrown out the suggestion to switch to Glassfish V3. I am looking for justifications of why we should remain with Resin or switch to Glassfish. Is there anyone out there that has used both web containers? Regards Stavros Stavrakis Web: http://www.astasolutions.com.au http://www.astasolutions.com.au/ Address: Level 3, 420 St Kilda Road, Melbourne 3004 Tel: + 61 3 9644 3700 Fax: + 61 3 9820 9266 Mob: + 61 409 055 403</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin V Glassfish</header>
    <date>Fri Nov 27 07:20:03 CET 2009</date>
    <body>Hi Stavros Glassfish may be great - but even if it was technically and performance comparable to Resin I would be wary about adopting it as a free alternative because I am reassured to know that Resin is Caucho's bread and butter core business. Scott and his team will stand behind it but I would feel a whole lot less certain that Glassfish will have a guaranteed future as one of many projects competing for corporate resources in an Oracle universe with multiple overlapping products. Just my opinion from a human corporate behaviour / commercial risk perspective Regards Alan Wright Athene Systems - UK http://www.astasolutions.com.au http://www.astasolutions.com.au/ http://maillist.caucho.com/mailman/listinfo/resin-interest -- Alan Wright Athene Systems tel 0845 230 9803 Athene Systems Limited Registered Office: Shieling House Invincible Road Farnborough GU14 7QU Registered in England and Wales No. 3156080</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin V Glassfish</header>
    <date>Fri Nov 27 11:11:14 CET 2009</date>
    <body>As long as Scott continue to work for the Resin's future I'll never switch to other platform. I loved the WebBeans so much from December 2007, now called CDI. I don't think other vendors could produce a competitive implementation of CDI versus Resin, in at least next 12 months. They have to throw in lots of labor and money to keep up with the more than two years hard work of Scott and his stuff. The forthcoming failure of OpenJPA is an example, which can nowhere compete with Hibernate &amp;amp; EclipseLink in every aspect. -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin V Glassfish</header>
    <date>Sat Nov 28 16:24:16 CET 2009</date>
    <body>Well, JBoss already has a CDI implementation called Weld, so Resin really isn't exceptional in this account. CDI is actually based on JBoss Seam and Google Guice. Cheers, -Kai http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin V Glassfish</header>
    <date>Sat Nov 28 16:48:11 CET 2009</date>
    <body>Yes, congratulations to Gavin King. Competition is a good thing. I think Scott will produce products with less bugs or we'll change to Weld :) http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin V Glassfish</header>
    <date>Mon Nov 30 09:19:26 CET 2009</date>
    <body>Hi, From my personal point of view, I prefer Resin because its philosophy suits me better as it is more open and flexible, meaning it usually accomodates different ways of doing things. OTOH, GlassFish is for me more "opinionated" and it tries to guide you on how you should do things, so if you deviate from the norm you are usually on your own with scarce documentation and no support because nobody tried that. Similarly, Resin's community of users is smaller but they are usually more hardcore and knowledgeable, as they have to survive Resin's documentation ;) and have to choose their own path from the multiple ones allowed by Resin, but GlassFish is more popular which makes it easier for newcomers to start with, as they have more basic guides, it integrates "transparently" with IDES (meaning they don't have to have a clue about what's going on) etc. With that I don't want to imply that users of one server are better/smarter/whatever than users of the other, just that I think they are geared towards different markets, with both its benefits and drawbacks. S! D. Wesley Wu escribió: mailto:kai.vir...@gmail.com mailto:wumen...@gmail.com</body>
  </mail>
  <mail>
    <header>[Resin-interest] Note about max-uri-length</header>
    <date>Thu Nov 26 09:17:52 CET 2009</date>
    <body>Now that the Resin Change Log is up and running again I notice this item I think it should be noted that this applies to the path component of the URI, not the entire URI (as defined in RFC 3986) including query string. --</body>
  </mail>
  <mail>
    <header>[Resin-interest] change log page broken</header>
    <date>Wed Nov 25 16:30:36 CET 2009</date>
    <body>http://www.caucho.com/resin/changes/changes.xtp /var/www/hosts/www.caucho.com/webapps/resin/changes/changes.xtp:116: expected name at ` ' 115: &amp;lt;li&amp;gt;quercus: QuercusParseException - missing semicolon within a scriptlet 116: &amp;lt;li&amp;gt;quercus: StringBuilderValue.create() is not performing a "&amp;amp; 0xFF"</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] change log page broken</header>
    <date>Wed Nov 25 19:56:23 CET 2009</date>
    <body>Thanks, Wesley. It should be fixed now. Emil http://www.caucho.com/resin/changes/changes.xtp http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.1.9 behind apache's ProxyPass problem</header>
    <date>Tue Nov 24 05:35:32 CET 2009</date>
    <body>Hi , I am running resin 3.1.9 in my db server , with host name 'db' and private IP address (192.168.x.x). In the frontend , apache httpd redirect '/servlet' pattern to the backend db with the two lines : ProxyPass /servlet http://db:8080/servlet ProxyPassReverse /servlet http://db:8080/servlet In my servlet , I want to output a valid URL , linking to the webapp's some resources/apps But how do I get the correct [frontend] server name and port , instead of 'db' and '8080' ? In the resin.conf , I tried a lot of configuration , but all got : req.getServerName() = db , and req.getServerPort() = 8080 I need a correct URL , such as ' http://www.foobar.com/servlet/ooxx ' , not http://db:8080/servlet/ooxx I tried some configurations , but all in vain : and : and : and : and : I am running out of ideas ... Can somebody help me ? Thanks in advanced !</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1.9 behind apache's ProxyPass problem</header>
    <date>Tue Nov 24 06:00:31 CET 2009</date>
    <body>http://db:8080/servlet It looks to me like the ProxyPass directive will override the Host header of the request causing getServerName() return "db" (not what was actually sent with the request) You should be able to control that behaviour with ProxyPreserveHost directive. http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypreservehost --Alex http://db:8080/servlet http://www.foobar.com/servlet/ooxx ' , not http://db:8080/servlet/ooxx http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1.9 behind apache's ProxyPass problem</header>
    <date>Tue Nov 24 06:07:31 CET 2009</date>
    <body>Wow , It works !!! Thank you very much !</body>
  </mail>
  <mail>
    <header>[Resin-interest] Hibernate lazy loading with Quercus</header>
    <date>Mon Nov 23 11:08:46 CET 2009</date>
    <body>Title: Vincent LAUGIER Hello, we try to do the following on our php/EJB3 application : find a given client from its lastname using a stateless bean () load his orders using the getter [code] [/code] We get the usual LazyInitializationException : org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.opticneo.entity.client.Client.orders, no session or session was closed If we were using Hessian, before returning the list of clients we would have made a copy of the list (using beanlib) before it is serialized (in ordre to avoid LazyInitializationException) With Quercus, we do not have to do this. Good ! But we face the LazyInitializationException again when trying to access the complex attributes. What is the best way to handle this ? (maybe by taking control over the transaction from the php) Thanks for your help. Regards -- Vincent LAUGIER Email : vincent.laug...@helmet.fr Téléphone : + 33 (0)1 75 43 92 52 Fax : + 33 (0)1 79 75 01 12 ( monfax.com )</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate lazy loading with Quercus</header>
    <date>Tue Nov 24 06:02:31 CET 2009</date>
    <body>Seems that the objects no longer have the association with valid session, so either the Session or PersistenceManager should be kept around to fill the objects in upon use. Forcing eager load could also be used I think. Alex. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate lazy loading with Quercus</header>
    <date>Tue Nov 24 08:33:59 CET 2009</date>
    <body>Alex wrote (2009-11-24 06:01): Hello, we try to do the following on our php/EJB3 application : • find a given client from its lastname using a stateless bean () • load his orders using the getter [code] [/code] Seems that the objects no longer have the association with valid session, so either the Session or PersistenceManager should be kept around to fill the objects in upon use. Forcing eager load could also be used I think. Alex. I assume the easiest route here is to use a Filter to achieve "session/transaction per request". We get the usual LazyInitializationException : org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.opticneo.entity.client.Client.orders, no session or session was closed If we were using Hessian, before returning the list of clients we would have made a copy of the list (using beanlib) before it is serialized (in ordre to avoid LazyInitializationException) With Quercus, we do not have to do this. Good ! But we face the LazyInitializationException again when trying to access the complex attributes. What is the best way to handle this ? (maybe by taking control over the transaction from the php) Thanks for your help. Regards -- Vincent LAUGIER</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate lazy loading with Quercus</header>
    <date>Tue Nov 24 20:02:37 CET 2009</date>
    <body>session, so either the Session or PersistenceManager should be kept around to fill the objects in upon use. Forcing eager load could also be used I think. Just noting that this can be done on the configuration level, or you can do it using joins when you query for your objects. Along those same lines, you might also want to check out the "Open Session in View" pattern, which is mentioned in a number of places in the Hibernate docs: https://www.hibernate.org/43.html Michael http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hibernate lazy loading with Quercus</header>
    <date>Thu Nov 26 09:39:06 CET 2009</date>
    <body>Title: Vincent LAUGIER Thank you very much ! the filter works fine. We have added the following : 1. In web.xml :                         2. And the filter itself :     private static Logger log =     public void doFilter(ServletRequest request,             ServletResponse response,             FilterChain chain)             ut = (javax.transaction.UserTransaction)                 throw new EJBException             throw new EJBException     public void init(FilterConfig filterConfig) throws ServletException         log.debug("Initializing filter...");        Vincent LAUGIER Email : vincent.laug...@helmet.fr Téléphone : + 33 (0)1 75 43 92 52 Fax : + 33 (0)1 79 75 01 12 ( monfax.com )</body>
  </mail>
  <mail>
    <header>[Resin-interest] cakephp in resin 3.1.9</header>
    <date>Fri Nov 20 18:24:01 CET 2009</date>
    <body>Title: Vincent LAUGIER Hello, we have trouble using cakePhp in Resin we have conflicts between Resin classes and Cahe's (example : AppController) Is there a way to avoid conflicts between resin classes and cake's ? regards -- Vincent LAUGIER Email : vincent.laug...@helmet.fr Téléphone : + 33 (0)1 75 43 92 52 Fax : + 33 (0)1 79 75 01 12 ( monfax.com )</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin 401 watchdog does not stop</header>
    <date>Fri Nov 20 09:02:28 CET 2009</date>
    <body>Hello I'm reading in the docs that when running resin.sh stop this should stop the watchdog if the application is the last running. I'm on macosx with resin 4,0,1, the start works, the application runs correctly, but the watchdog does not seem to stop when calling resin.sh stop. Am I doing something wrong ? -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 401 watchdog does not stop</header>
    <date>Mon Nov 23 08:59:43 CET 2009</date>
    <body>Hi I'm experiencing the same behavior on Linux Boxes (Debian Lenny). But it doesn seem to effect the starting of the resin (after stopping). Georg -- Georg Buschbeck Information Technology THOMAS DAILY GmbH Adlerstraße 19 79098 Freiburg Deutschland T  + 49 761 3 85 59 502 F  + 49 761 3 85 59 550 E  g...@thomas-daily.de www.thomas-daily.de Geschäftsführer/Managing Directors: Wendy Thomas, Susanne Larbig Handelsregister Freiburg i.Br., HRB 3947</body>
  </mail>
  <mail>
    <header>[Resin-interest] multiple persistence units in persistence.xml</header>
    <date>Thu Nov 19 10:31:45 CET 2009</date>
    <body>Hi, we are using resin to serve our wicket applications, which at startup initalize the persistence unit (we have multiple in one persistence.xml for testing, development etc ... ) now we are testing resin-4.0.1, and here the container seems to try, to "open" each defined persistence unit, instead of leaving this to the application started ... can we change this behavior by some configuration statement i didn't found yet? i already posted this bug: http://bugs.caucho.com/view.php?id=3760 Thanks, Georg Buschbeck -- Georg Buschbeck Information Technology THOMAS DAILY GmbH Adlerstraße 19 79098 Freiburg Deutschland T  + 49 761 3 85 59 502 F  + 49 761 3 85 59 550 E  g...@thomas-daily.de www.thomas-daily.de Geschäftsführer/Managing Directors: Wendy Thomas, Susanne Larbig Handelsregister Freiburg i.Br., HRB 3947</body>
  </mail>
  <mail>
    <header>[Resin-interest] Can not get EntityManagerFactory when using	OpenJPA within Resin</header>
    <date>Wed Nov 18 11:07:07 CET 2009</date>
    <body>Hello, I use OpenJPA as my persistence tool to access database, without using EJB. If I use it as common java apllication started by main method, it works ok, and when I use it in web apllication in resin there's exception. I also tested it in Tomcat, everything works OK. When program goes to " EntityManagerFactory emf = ", the EntityManagerFactory is always null. And there are no specail configuration. Version of resin: resin-pro-3.0.28 Version of openjpa: openjpa:-1.2.0 The code of /META-INF/ persistence.xml     http://java.sun.com/xml/ns/persistence "  xmlns:xsi=" http://www.w3.org/2001/XMLSchema-instance "  &amp;lt;persistence-unit name="infosys"    org.apache.openjpa.persistence.PersistenceProviderImpl    com.bs.infosys.model.Category    com.bs.infosys.model.Article    com.bs.infosys.model.Property    &amp;lt;property name="openjpa.ConnectionURL"     value="jdbc:mysql://localhost/infosys?autoReconnect=true&amp;amp;amp;useUnicode=true&amp;amp;amp;characterEncoding=utf-8&amp;amp;amp;mysqlEncoding=utf8"    &amp;lt;property name="openjpa.ConnectionDriverName"          -------------------------------- Regards! Zhangping 2009/11/18</body>
  </mail>
  <mail>
    <header>[Resin-interest] How to using OpenJPA within Resin</header>
    <date>Wed Nov 18 01:56:17 CET 2009</date>
    <body>Hello, I use OpenJPA as my persistence tool to access database, without using EJB. And if I use it as common java apllication started by main method, it works ok, and when I use it in web apllication in resin there's exception. I also tested it in Tomcat, everything works OK. When program goes to " EntityManagerFactory emf = ", the EntityManagerFactory is always null. And there are no specail configuration. Version of resin: resin-pro-3.0.28 Version of openjpa: openjpa:-1.2.0 The code of /META-INF/ persistence.xml     http://java.sun.com/xml/ns/persistence "  xmlns:xsi=" http://www.w3.org/2001/XMLSchema-instance "  &amp;lt;persistence-unit name="infosys"    org.apache.openjpa.persistence.PersistenceProviderImpl    com.bs.infosys.model.Category    com.bs.infosys.model.Article    com.bs.infosys.model.Property    &amp;lt;property name="openjpa.ConnectionURL"     value="jdbc:mysql://localhost/infosys?autoReconnect=true&amp;amp;amp;useUnicode=true&amp;amp;amp;characterEncoding=utf-8&amp;amp;amp;mysqlEncoding=utf8"    &amp;lt;property name="openjpa.ConnectionDriverName"            </body>
  </mail>
  <mail>
    <header>[Resin-interest] java.lang.IllegalStateException: DESTROYED is an	illegal ... state</header>
    <date>Tue Nov 17 23:06:50 CET 2009</date>
    <body>I've just downloaded the current Resin Pro 4.0 snapshot (resin-pro-4.0.s091112) and installed it on a Linux box. While changing resin.xml which forced a restart and later on while looking on the really nice enhancements in /resin-admin the following IllegalStateException caught my attention on the console output: DESTROYED is an illegal idle state com.caucho.server.port.ConnectionState.toIdle(ConnectionState.java:346) com.caucho.server.port.TcpConnection.toIdle(TcpConnection.java:1001) com.caucho.server.port.Port.free(Port.java:1651) com.caucho.server.port.TcpConnection.finishThread(TcpConnection.java:1029) com.caucho.server.port.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1103) com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1121) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:900) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:867) DESTROYED is an illegal accept state com.caucho.server.port.ConnectionState.toAccept(ConnectionState.java:180) com.caucho.server.port.TcpConnection$AcceptTask.doTask(TcpConnection.java:1140) com.caucho.server.port.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1090) com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1121) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:900) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:867) -- Steffen</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.IllegalStateException: DESTROYED is an	illegal ... state</header>
    <date>Wed Nov 18 00:14:00 CET 2009</date>
    <body>Thanks. I just caught that one as part of the checkout. The connection management is becoming an interesting problem, because we now have async (comet) as well as websockets (full duplex tcp after http handshake), along with the usual http request and keepalive. The state machine is become fairly large. 4.0.2 has a good deal of cleanup, and it looks like we can do some more cleanup for 4.0.3. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] StatService Restarting Resin Prematurely on	Coolthreads Machine</header>
    <date>Wed Nov 18 00:32:01 CET 2009</date>
    <body>Hi all.  We are running performance tests with Resin 3.1.9 Pro on a t5120 server and it looks like StatService is restarting Resin even though none of the cpus (or cores) are saturated.  I didn't see this behavior on the free version of  Resin 3.1.7a. Here's an example: load=140.6953125 load=125.7890625 However mpstat shows that all the cpus are over 90% idle. _________________________________________________________________ Hotmail: Trusted email with Microsoft's powerful SPAM protection. http://clk.atdmt.com/GBL/go/177141664/direct/01/ http://clk.atdmt.com/GBL/go/177141664/direct/01/</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] StatService Restarting Resin Prematurely on Coolthreads Machine</header>
    <date>Wed Nov 18 00:53:03 CET 2009</date>
    <body>You can work around that with What is the "uptime" for that machine? In 3.1.9, Resin Pro is using the unix uptime as a load indicator, but that number seems very high. -- Scott http://clk.atdmt.com/GBL/go/177141664/direct/01/%0Ahttp://clk.atdmt.com/GBL/go/177141664/direct/01/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] StatService Restarting Resin Prematurely on Coolthreads Machine</header>
    <date>Wed Nov 18 01:09:06 CET 2009</date>
    <body>Hi Scott.  Thank you for getting back to me. Here's the uptime output. -bash-3.00$ uptime 4:04pm  up 21 day(s), 11 min(s),  3 users,  load average: 0.20, 1.57, 16.93 I'll try the setting you sent right now and post the results before I knock off for today. -skip http://clk.atdmt.com/GBL/go/177141664/direct/01/%0Ahttp://clk.atdmt.com/GBL/go/177141664/direct/01/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest _________________________________________________________________ Windows 7: I wanted simpler, now it's simpler. I'm a rock star. http://www.microsoft.com/Windows/windows-7/default.aspx?h=myidea?ocid=PID24727::T:WLMTAGL:ON:WL:en-US:WWL_WIN_myidea:112009</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] StatService Restarting Resin Prematurely on	Coolthreads Machine</header>
    <date>Wed Nov 18 15:42:37 CET 2009</date>
    <body>The  &amp;lt;stat-service cpu-load-exit-threshold="1000"/&amp;gt; did the trick. Thanks Scott! -skip Hi Scott.  Thank you for getting back to me. Here's the uptime output. -bash-3.00$ uptime 4:04pm  up 21 day(s), 11 min(s),  3 users,  load average: 0.20, 1.57, 16.93 I'll try the setting you sent right now and post the results before I knock off for today. -skip Prematurely on Coolthreads Machine even this exiting due exiting due using the --- --------------------------------------------------------------------- protection. Sign http://clk.atdmt.com/GBL/go/177141664/direct/01/%0Ahttp://clk.atdmt.com/GBL/go/177141664/direct/01/ --- --------------------------------------------------------------------- http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest Windows 7: I wanted simpler, now it's simpler. I'm a rock star.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] StatService Restarting Resin Prematurely on Coolthreads Machine</header>
    <date>Wed Nov 18 20:38:57 CET 2009</date>
    <body>Hi Scott, that did help but Resin now dumps threads at a pretty low cpu.  Is this 7.9% cpu at 10:59:02? oad=7.94921875 -bash-3.00$ uptime 11:36am  up  3:43,  3 users,  load average: 1.67, 1.36, 0.91 http://clk.atdmt.com/GBL/go/177141664/direct/01/%0Ahttp://clk.atdmt.com/GBL/go/177141664/direct/01/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest _________________________________________________________________ Bing brings you maps, menus, and reviews organized in one place. http://www.bing.com/search?q=restaurants&amp;amp;form=MFESRP&amp;amp;publ=WLHMTAG&amp;amp;crea=TEXT_MFESRP_Local_MapsMenu_Resturants_1x1</body>
  </mail>
  <mail>
    <header>[Resin-interest] Large negative range in the HTTP request</header>
    <date>Mon Nov 16 23:28:24 CET 2009</date>
    <body>Dear Cognoscenti, We have recently been getting a few requests with abnormal Range request headers.  For example Accept-Language: zh-cn,zh-hk,zh-tw,en-us User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1) Accept: */* Host: www.mydomain.com Connection: Keep-Alive Range: bytes=-335544320--1162852624 Accept-Encoding: gzip X-Forwarded-For: 124.115.0.146 This results in an exception like this: java.lang.ArrayIndexOutOfBoundsException at java.lang.System.arraycopy(Native Method) at com.caucho.vfs.WriteStream.write(WriteStream.java:301) at com.caucho.server.connection.ResponseStream.writeNext(ResponseStream.java:445) at com.caucho.server.connection.ToByteResponseStream.write(ToByteResponseStream.java:336) at com.caucho.server.connection.ServletOutputStreamImpl.write(ServletOutputStreamImpl.java:67) at com.caucho.vfs.ReadStream.writeToStream(ReadStream.java:899) at com.caucho.servlets.FileServlet.handleRange(FileServlet.java:498) at com.caucho.servlets.FileServlet.service(FileServlet.java:325) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:103) at com.caucho.server.webapp.NamedDispatcherImpl.forward(NamedDispatcherImpl.java:108) at com.mydomain.www.MyServlet.doGet(BaseServlet.java:167) at javax.servlet.http.HttpServlet.service(HttpServlet.java:114) at javax.servlet.http.HttpServlet.service(HttpServlet.java:91) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:103) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:187) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:265) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:273) at com.caucho.server.port.TcpConnection.run(TcpConnection.java:682) at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:730) at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:649) at java.lang.Thread.run(Thread.java:595) *Description* 2009-11-14 14:21:58,125 ERROR [http-httpd-12180-7$799557599] estalea.bucket.servlet.BaseServlet : HTTPRequest      Request: GET / Session Id: none      Attributes:           javax.servlet.error.servlet_name = resin-file      Headers:           Accept-Language: zh-cn,zh-hk,zh-tw,en-us           User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)           Accept: */*           Host: ojrq.net Connection: Keep-Alive           Range: bytes=-335544320--1162852624 Accept-Encoding: gzip           X-Forwarded-For: 124.115.0.146      Host: 10.16.4.8 at address 10.16.4.8      java.lang.ArrayIndexOutOfBoundsException at java.lang.System.arraycopy(Native Method) at com.caucho.vfs.WriteStream.write(WriteStream.java:301) at com.caucho.server.connection.ResponseStream.writeNext(ResponseStream.java:445) at com.caucho.server.connection.ToByteResponseStream.write(ToByteResponseStream.java:336) at com.caucho.server.connection.ServletOutputStreamImpl.write(ServletOutputStreamImpl.java:67) at com.caucho.vfs.ReadStream.writeToStream(ReadStream.java:899) at com.caucho.servlets.FileServlet.handleRange(FileServlet.java:498) at com.caucho.servlets.FileServlet.service(FileServlet.java:325) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:103) at com.caucho.server.webapp.NamedDispatcherImpl.forward(NamedDispatcherImpl.java:108) at estalea.ir.tracking.click.BrandedUrlServlet.doService(BrandedUrlServlet.java:64) at estalea.bucket.servlet.BaseServlet.serviceWrapper(BaseServlet.java:191) at estalea.bucket.servlet.BaseServlet.doGet(BaseServlet.java:167) at javax.servlet.http.HttpServlet.service(HttpServlet.java:114) at javax.servlet.http.HttpServlet.service(HttpServlet.java:91) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:103) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:187) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:265) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:273) at com.caucho.server.port.TcpConnection.run(TcpConnection.java:682) at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:730) at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:649) at java.lang.Thread.run(Thread.java:595) https://jira.estalea.net/jira/browse/IRT-2667 (I'm forwarding the request to the FileServlet).  No harm done here, the requests seems to fail without causing any other side effects, but I'm wondering if the FileServlet should handle the situation a little more gracefully and give a 4xx response code instead of throwing an exception, which ends up being a 5xx response code. This is Resin 3.1.8 btw. Thanks, Knut Forkalsrud</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Large negative range in the HTTP request</header>
    <date>Tue Nov 17 00:00:28 CET 2009</date>
    <body>Dear Cognoscenti, We have recently been getting a few requests with abnormal Range request headers.  For example:           Accept-Language: zh-cn,zh-hk,zh-tw,en-us           User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)           Accept: */*           Host: www.mydomain.com           Connection: Keep-Alive           Range: bytes=-335544320--1162852624           Accept-Encoding: gzip           X-Forwarded-For: 124.115.0.146 This results in an exception like this: java.lang.ArrayIndexOutOfBoundsException at java.lang.System.arraycopy(Native Method) at com.caucho.vfs.WriteStream.write(WriteStream.java:301) at com.caucho.server.connection.ResponseStream.writeNext(ResponseStream.java:445) at com.caucho.server.connection.ToByteResponseStream.write(ToByteResponseStream.java:336) at com.caucho.server.connection.ServletOutputStreamImpl.write(ServletOutputStreamImpl.java:67) at com.caucho.vfs.ReadStream.writeToStream(ReadStream.java:899) at com.caucho.servlets.FileServlet.handleRange(FileServlet.java:498) at com.caucho.servlets.FileServlet.service(FileServlet.java:325) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:103) at com.caucho.server.webapp.NamedDispatcherImpl.forward(NamedDispatcherImpl.java:108) at com.mydomain.www.MyServlet.doGet(BaseServlet.java:167) at javax.servlet.http.HttpServlet.service(HttpServlet.java:114) at javax.servlet.http.HttpServlet.service(HttpServlet.java:91) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:103) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:187) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:265) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:273) at com.caucho.server.port.TcpConnection.run(TcpConnection.java:682) at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:730) at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:649) at java.lang.Thread.run(Thread.java:595) (I'm forwarding the request to the FileServlet).  No harm done here, the requests seems to fail without causing any other side effects, but I'm wondering if the FileServlet should handle the situation a little more gracefully and give a 4xx response code instead of throwing an exception, which ends up being a 5xx response code. This is Resin 3.1.8 btw. Thanks, Knut Forkalsrud</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Large negative range in the HTTP request</header>
    <date>Tue Nov 17 00:06:28 CET 2009</date>
    <body>Knut, Thanks for reporting this. I've filed a bug: http://bugs.caucho.com/view.php?id=3766 Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Large negative range in the HTTP request</header>
    <date>Tue Nov 17 00:27:31 CET 2009</date>
    <body>Out of curiosity, what's the actual size of the file? And what kind of application? Just browser download or some kind of fancy streaming client. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Large negative range in the HTTP request</header>
    <date>Tue Nov 17 00:44:33 CET 2009</date>
    <body>One specific reason I'm curious is because the 4.0.2 benchmarks vs nginx are very, very close even for large static files. (We're already faster for small files.) That may mean we can look at competing in streaming large files directly from Resin. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Large negative range in the HTTP request</header>
    <date>Tue Nov 17 01:27:38 CET 2009</date>
    <body>The file is small, about 50 bytes.  The app is not fancy, however it isn't using the typical path mapping constructs in web.xml.  The reason is that there is business logic related to the hostname (and path) that is better described in application code than in exotic path mappings.  As a fallback the requests I don't handle specifically are forwarded to the file servlet. I'm more than happy with the current performance ;-) -Knut</body>
  </mail>
  <mail>
    <header>[Resin-interest] packaging EB3 application with Resin</header>
    <date>Mon Nov 16 17:10:59 CET 2009</date>
    <body>Hello, I am trying to package an EAR application in Resin. So far, I have achieved this kind of package : a WAR project embedded in a EAR project (specifying the 'ear-deploy' tag in the resin.conf). Project_EAR -&amp;gt; project_WAR I now want to to the following : one EAR project holding one EJB-JAR project (for the entity beans and session beans), some WAR projects for the pages and servlets. Project_EAR -&amp;gt; project_EJB-JAR -&amp;gt; project_1_WAR -&amp;gt; project_2_WAR Is it possible to achieve this in Resin ? (If I need to use http://www.caucho.com/resin/admin/jar-repository.xtp , is there an example we can follow ?) Thank you. Regards -- Vincent LAUGIER Email : vincent.laug...@helmet.fr Téléphone : 01 75 43 92 52 Fax : 01 79 75 01 12 (www.monfax.com) www.helmet.fr</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] packaging EB3 application with Resin</header>
    <date>Mon Nov 16 18:17:12 CET 2009</date>
    <body>Resin supports the ear layout as well as defining ejbs in resin-web.xml http://www.caucho.com/resin/admin/jar-repository.xtp , is This is only available in Resin 4. I don't believe there is a separate example, however there is a detailed draft of spec published on the blog: http://blog.caucho.com/?p=225 Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] packaging EB3 application with Resin</header>
    <date>Mon Nov 16 19:29:25 CET 2009</date>
    <body>Hello Alex, then we are waiting for the resin 4 stable release (we need to stick to resin 3 for the moment because of problem with the persistence context injection, see http://forum.caucho.com/showthread.php?t=1927 ). What do you mean by "defining ejbs in resin-web.xml" ? Could this be a workaround to package the project in differents WARs (one WAR for the entity beans, another for the session beans...) ? regards Vincent http://blog.caucho.com/?p=225 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] packaging EB3 application with Resin</header>
    <date>Mon Nov 16 19:49:31 CET 2009</date>
    <body>As a longtime J2EE developer, let me suggest that life is far more pleasant if you abandon the atrocious EAR packaging morass and build your applications in one or more WARs.  Just put all your classes in WEB-INF/classes (ejbs, servlets, etc), make sure you have WEB-INF/classes/META-INF/beans.xml and WEB-INF/classes/META-INF/ejb-jar.xml, and it all works the way you would expect. Note that separate WARs will be in separate classloader scopes, so inter-WAR calls will be Hessian not local method calls.  But this makes life a lot easier when you want to relocate a WAR to a different server. Jeff On Mon, Nov 16, 2009 at 10:02 AM, Vincent LAUGIER http://forum.caucho.com/showthread.php?t=1927 ). http://blog.caucho.com/?p=225 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] packaging EB3 application with Resin</header>
    <date>Mon Nov 16 19:49:36 CET 2009</date>
    <body>http://forum.caucho.com/showthread.php?t=1927 ). It's best to package an ear when there is more then one web-app. With a single web-app there is a possibility of deploying EJBs in a web-app. The ejb-jar.xml in that case is placed in to web-app and configured via &amp;lt;ejb-server ejb-descriptor , see http://caucho.com/resin/reference/env-tags.xtp#ejb-server for ejb-server doc and http://caucho.com/resin-3.1/examples/ejb-stateless/index.xtp for Best Regards, Alex http://blog.caucho.com/?p=225 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] packaging EB3 application with Resin</header>
    <date>Mon Nov 16 20:00:32 CET 2009</date>
    <body>Many/most applications only need a single .war file. Packaging a single ..war file in an .ear just to get EJB support is silly. The JavaEE 6 specs have finally caught up to this concept. I have no idea why you would want to package your session beans in a different .war file from the rest of your application. -- Scott http://blog.caucho.com/?p=225 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] packaging EB3 application with Resin</header>
    <date>Tue Nov 17 11:27:12 CET 2009</date>
    <body>Hello, thank you for your answers My previous post might be confusing. We have several webapps (several virtual hosts) that share the same ejbs. This is why we wanted to achieve this kind of packaging : Project_EAR -&amp;gt; project_EJB-JAR -&amp;gt; project_1_WAR (www.website1.com) -&amp;gt; project_2_WAR (www.website2.com) Also, we want to avoid Hessian because we want to access the ejbs with some simple imports/injections. My idea of using a WAR as an EJB3-JAR was coming from the fact that WAR and EJB3-JAR are quite similar but as Jeff says ( http://maillist.caucho.com/pipermail/resin-interest/2009-November/004187.html ) classes in a WAR are out of scope for other WARs. Not a good idea then. So in the end we will make some WARs directly deployed in the webapps dir (not in a EAR) and tune the ant script so that the same ejbs are put in the WAR at deployment. Looking forward resin 4 ! regards Vincent LAUGIER Email : vincent.laug...@helmet.fr Téléphone : 01 75 43 92 52 Fax : 01 79 75 01 12 (www.monfax.com) www.helmet.fr Scott Ferguson a écrit : http://blog.caucho.com/?p=225 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] session fixation</header>
    <date>Fri Nov 13 12:10:54 CET 2009</date>
    <body>hi all! we´re using resin 3.0.23 is there a possibility to avoid session fixation? it would be nice to have this both things: - accept only session id´s generated by the application server - change the session id after the login-procedure -- GRATIS für alle GMX-Mitglieder: Die maxdome Movie-FLAT! Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome01</body>
  </mail>
  <mail>
    <header>[Resin-interest] Automated deployment?</header>
    <date>Thu Nov 12 04:30:07 CET 2009</date>
    <body>We currently have a cluster of Resin web servers sitting behind a load balancer.  What do you recommend for automating/scripting deployment? Our "script" would look something like this: for each web server: - disable web server on the load balancer - upload application files (jsps + jars) - restart resin - enable on the balancer - wait a minute - go to next web server I'm not sure where to start on something like this, so you wisdom is much appreciated! Adam  :-)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Automated deployment?</header>
    <date>Thu Nov 12 04:43:09 CET 2009</date>
    <body>I use a tool called Capistrano ( http://www.capify.org/ ) to do very similar set of tasks.  Capistrano was written for Rails apps so I had to do a fair amount of scripting, including splitting out all my servers into separate tasks, but once I got this done it works extremely well.  It requires Ruby on the machine you're managing the process from, but of itself it only calls shell tasks on the remote machines so Ruby need not be installed on those. I too would be interested in what others use for this. Rachel http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Automated deployment?</header>
    <date>Thu Nov 12 06:16:17 CET 2009</date>
    <body>I wrote our deployment system. Our load balancer monitors our servers by sending certain commands to check if the server is responding. If it doesn't respond for 10 seconds, the server is removed from the pool. So our deployment system works by sending a privileged command to each server in each pool telling it to give the "I'm sleeping" response to the load balancer. After the load balancer removes the server, the deployment server (which has already retrieved the files to deploy from our repository) copies the files out and then tells resin to restart (if the particular type of deployment requires a restart, not all do). It then monitors the server to see when it's come back online before moving onto the next sever in the pool. The above is a somewhat simplified explanation, but that's the basics. For example, the deployment system is multi-threaded so it can operate on multiple pools at the same time, and even multiple servers in a particular pool depending on the time of day. When all is said and done, we can do an entire production deployment to scores of servers in about 10-15 minutes without our users ever knowing that servers have been popping in and out and restarting. Rob I use a tool called Capistrano ( http://www.capify.org/ ) to do very similar set of tasks.  Capistrano was written for Rails apps so I had to do a fair amount of scripting, including splitting out all my servers into separate tasks, but once I got this done it works extremely well.  It requires Ruby on the machine you're managing the process from, but of itself it only calls shell tasks on the remote machines so Ruby need not be installed on those. I too would be interested in what others use for this. Rachel We currently have a cluster of Resin web servers sitting behind a load balancer.  What do you recommend for automating/scripting deployment? Our "script" would look something like this: for each web server: - disable web server on the load balancer - upload application files (jsps + jars) - restart resin - enable on the balancer - wait a minute - go to next web server I'm not sure where to start on something like this, so you wisdom is much appreciated! Adam  :-)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Automated deployment?</header>
    <date>Thu Nov 12 13:58:45 CET 2009</date>
    <body>Easier yet, we call a page for system health, which any loadbalancer can do. That page checks for a couple mountpoints, and that it can connect to the database.  When we want to remove something from the LB we just rename that file, makes it very easy to script putting things in an out of the LB. http://www.capify.org/ ) to do very similar http://maillist.caucho.com/mailman/listinfo/resin-interest -- -jk</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Automated deployment?</header>
    <date>Thu Nov 12 15:45:06 CET 2009</date>
    <body>How does your deployment server communicate with Resin? Adam ________________________________ To: General Discussion for the Resin application server Sent: Wed, November 11, 2009 11:14:22 PM Subject: Re: [Resin-interest] Automated deployment? I wrote our deployment system. Our load balancer monitors our servers by sending certain commands to check if the server is responding. If it doesn't respond for 10 seconds, the server is removed from the pool. So our deployment system works by sending a privileged command to each server in each pool telling it to give the "I'm sleeping" response to the load balancer. After the load balancer removes the server, the deployment server (which has already retrieved the files to deploy from our repository) copies the files out and then tells resin to restart (if the particular type of deployment requires a restart, not all do). It then monitors the server to see when it's come back online before moving onto the next sever in the pool. The above is a somewhat simplified explanation, but that's the basics. For example, the deployment system is multi-threaded so it can operate on multiple pools at the same time, and even multiple servers in a particular pool depending on the time of day. When all is said and done, we can do an entire production deployment to scores of servers in about 10-15 minutes without our users ever knowing that servers have been popping in and out and restarting. Rob I use a tool called Capistrano ( http://www.capify.org/ ) to do very similar set of tasks.  Capistrano was written for Rails apps so I had to do a fair amount of scripting, including splitting out all my servers into separate tasks, but once I got this done it works extremely well.  It requires Ruby on the machine you're managing the process from, but of itself it only calls shell tasks on the remote machines so Ruby need not be installed on those.</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin-admin,	one watchdog with different config files</header>
    <date>Mon Nov 09 13:54:35 CET 2009</date>
    <body>Hi there, We are migrating all of our instances to Resin 3.1.5 (3.1.8-9 have a JPA bug that prevents us to go the latest version) and I've been asked by our admins if it would be possible to have ONE monitor to see all the different applications in all the different instances. The different instances share the Watchdog process but each of them uses a different configuration file, as we don't want all the instances and applications to be restarted each time we modify the configuration. If I understood correctly the documentation, the Watchdog process is able to monitor all applications when using Resin Pro and if they are all in the same cluster. Does that imply ONE configuration file? In that case, if I edit this unique file, is Resin smart enough to restart just the instance/server that was affected by changes? S! D. ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) Web Services Centre for Information and Technology Balearic Islands University (SPAIN) -------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin-admin, one watchdog with different config files</header>
    <date>Mon Nov 09 17:58:00 CET 2009</date>
    <body>blocks, if I understand your requirements. Since servers in a Resin blocks for each application. Not right now. It may be possible for us to add that capability in the future. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin-admin, one watchdog with different	config files</header>
    <date>Tue Nov 10 21:22:25 CET 2009</date>
    <body>S'està citant Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: Correct, I just have different instances to separate groups of applications so I can update/start/stop one group independent of the others. They are not really part of what one usually understands by a cluster. Ok. I'll keep them in separate instances at the moment, as being able to touch the instance configuration independently of one another is more important than having them in a single resin-admin instance. S! ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>[Resin-interest] entityManager injection using PersistenceContext annotation (with Hibernate as JPA implementation)</header>
    <date>Mon Nov 09 11:54:10 CET 2009</date>
    <body>Hello, this thread carries on a thread initiated on the forum : http://forum.caucho.com/showthread.php?p=2321#post2321 reza said : "Otherwise, I can look into how to make the Resin transaction manager work with Hibernate for you." indeed I would like to stay in a JEE environment. Are there some small changes in our configuration (in persistence.xml for instance) that will make injection work. regards vincent</body>
  </mail>
  <mail>
    <header>[Resin-interest] Controlling pool size for stateless EJBs</header>
    <date>Tue Nov 03 06:53:42 CET 2009</date>
    <body>Is it possible to control the pool size for stateless EJBs? I think I'm looking for something equivalent to &amp;lt;ejb-message-bean message-consumer-max="2"&amp;gt; but for &amp;lt;ejb-session-bean&amp;gt;.  The docs say that session beans are pooled, but I don't see anything about how to configure this pool. The use case is that I have a rather expensive resource (held-open connections to Apple's crappy iPhone Push Notification Service) that requires pooled access. Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Controlling pool size for stateless EJBs</header>
    <date>Tue Nov 03 18:01:16 CET 2009</date>
    <body>The stateless pool is infinite in size. Or rather, the idle-pool size is 1, and the active pool size is infinite. There's no throttling of the active size. I'm not sure if this is a capability we want to add, but I've created a bug report at http://bugs.caucho.com/view.php?id=3739 . Since session EJBs were really designed to be lightweight custom XA resources, like a cheap JDBC driver, it may make sense. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Controlling pool size for stateless EJBs</header>
    <date>Tue Nov 03 18:22:21 CET 2009</date>
    <body>Thanks.  Now that any bean can be given @TransactionAttribute and injection, the only point to using @Stateless seems to be pooling. Jeff http://bugs.caucho.com/view.php?id=3739 . http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Adding node to a cluster on the fly</header>
    <date>Mon Nov 02 05:14:48 CET 2009</date>
    <body>I just created my first resin based ec2 server on amazon.  I want to use amazons cloud computing to grow and shrink my cluster on the fly.  Is there a way to achieve this in resin. Nathan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Adding node to a cluster on the fly</header>
    <date>Tue Nov 03 04:55:13 CET 2009</date>
    <body>Nathan, In 4.0 there is a new -dynamic-server capability that allows servers be added to the cluster dynamically. The argument parameter value takes cluster to join, address and port for the new server. (more info available with resin.sh -help. You may find these two caucho blog entries of use: http://blog.caucho.com/?p=177 , http://blog.caucho.com/?p=220 Thanks, Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Pomgranate - jars in project-jars don't have	pom.xml</header>
    <date>Fri Oct 30 11:13:27 CET 2009</date>
    <body>Hello, The whole Pomgranate is really neat, but I cannot figure out one thing: I have a working project with maven, with all dependencies configured in projects pom.xml file. I can build a webapp war etc. To use pomgranate it says: take the jars from the war and put them to project-jars in resin directory and make sure pom.xml is in war's WEB-INF. When I deploy the war, resin spots pom.xml and tries to resolve dependencies; unfortunately it cannot find any artifacts in its repository. I suppose this is because all the jars I have put there do not have META-INF/maven...pom.xml files packed in them. They are just normal jars like those downloaded by maven. What should I do? Should I somehow generate jars with pom.xml files inside? Or should I manually copy the foo-bar-1.0.pom files from the repository on my devel machine to the resin's project-jars directory? Best regards, Horace</body>
  </mail>
  <mail>
    <header>[Resin-interest] url rewriting / search engine friendly</header>
    <date>Fri Oct 30 08:32:15 CET 2009</date>
    <body>Hello I didn't have yet the opportunity to work with search engine friendly urls with resin (I did it with apache/php). I suppose that there must be a set of &amp;lt;servlet-mapping&amp;gt; and &amp;lt;rewrite-dispatch&amp;gt; in conf and some url-dedicated servlets in the application. I wonder if there is any kind of "good practice" with resin configuration to build SEF web sites. In the wiki I found rewrite rules for php CMS, but not for java apps. (I use resin 3,2,0) Thanks a lot. -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] url rewriting / search engine friendly</header>
    <date>Fri Oct 30 11:23:27 CET 2009</date>
    <body>You may use http://tuckey.org/urlrewrite/ UrlRewriteFilter. I wrote a similar filter doing the same thing which loads rewrite config from database. http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] url rewriting / search engine friendly</header>
    <date>Fri Oct 30 11:51:29 CET 2009</date>
    <body>Thanks Wesley I'll try to use filter. Now in term of performance, isn't it better to integrate the url processing directly into the controller servlet ? http://tuckey.org/urlrewrite/ UrlRewriteFilter. mailto:r...@architectedulogiciel.fr http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] url rewriting / search engine friendly</header>
    <date>Fri Oct 30 18:19:25 CET 2009</date>
    <body>Not recommended. I think filter should handle this, which is not relative to business logic. http://tuckey.org/urlrewrite/ UrlRewriteFilter. mailto:r...@architectedulogiciel.fr http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] url rewriting / search engine friendly</header>
    <date>Fri Oct 30 22:27:39 CET 2009</date>
    <body>I understand your point of view : separate url management and application logic. It seems a good practice. In the same time this probably comes from the idea that search engine friendly urls are "added" to the application, which basically does not need it. On one hand it is true. The url "/user/name" is an alias of "/servlet?command=showuser&amp;amp;id=1354" in a functionnal point of view. On the other hand, you may think of the SEF url as a request by itself, and the controller is in charge of handling requests, of any syntax. So if my controller parses the url "/servlet?command=showuser&amp;amp;id=1354", why couldn't it parse the url "/user/name" instead directly ? This removes from the application one level of control and complexity . Am-I right ? mailto:r...@architectedulogiciel.fr http://tuckey.org/urlrewrite/ UrlRewriteFilter. mailto:r...@architectedulogiciel.fr mailto:r...@architectedulogiciel.fr mailto:r...@architectedulogiciel.fr http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] url rewriting / search engine friendly</header>
    <date>Sat Oct 31 11:04:23 CET 2009</date>
    <body>And why is it that a servlet filter is "outside the application"? I consider it to be part of the application; it is simply a matter that those services are not provided directly by the framework used to implement the logic. Otherwise each framework would have to provide that capability. I have seen both approaches (Cocoon uses the later approach) and both have their strong/weak points. In any case, I don't think there's "a good answer and a bad one". S! D. S'està citant Riccardo Cohen &amp;lt;r...@architectedulogiciel.fr&amp;gt;: mailto:r...@architectedulogiciel.fr http://tuckey.org/urlrewrite/ UrlRewriteFilter. mailto:r...@architectedulogiciel.fr mailto:r...@architectedulogiciel.fr mailto:r...@architectedulogiciel.fr http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] url rewriting / search engine friendly</header>
    <date>Sat Oct 31 12:34:28 CET 2009</date>
    <body>My filter handle the rewrite and parameter parsing, and dispatch to according controller/action with a wrapped http request. 1. user hit the url: /user/1354 2. filter knows that user request the UserController/UserServlet/UserAction/view-user.jsp with a param value 1354 (corresponding param should be the first pre-configed param, which should be id) 3. the filter wrap the http request to add param name/value pair (id=1354) 4. (optional) call your Controller/Action for additional processing using the wrapped request(probably a wrapped response for gzip/caching purpose) 5. dispatch to /UserServlet or /view-user.jsp using the wrapped request(probably a wrapped response for gzip/caching purpose) mailto:r...@architectedulogiciel.fr http://tuckey.org/urlrewrite/ UrlRewriteFilter. mailto:r...@architectedulogiciel.fr mailto:r...@architectedulogiciel.fr mailto:r...@architectedulogiciel.fr http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] url rewriting / search engine friendly</header>
    <date>Sat Oct 31 13:49:31 CET 2009</date>
    <body>you can use express-wind to build rest url like "/user/1234" http://code.google.com/p/express-me/wiki/ExpressWind It uses Filter or Servlet to handle all requests and match your rest url like: @Mapping("/user/$1") ... If you already have a struts / spring mvc app with *.do mapping, the url-rewrite-filter is the only choice. mailto:r...@architectedulogiciel.fr http://tuckey.org/urlrewrite/ UrlRewriteFilter. mailto:r...@architectedulogiciel.fr mailto:r...@architectedulogiciel.fr mailto:r...@architectedulogiciel.fr http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Best regards, Michael Liao</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] url rewriting / search engine friendly</header>
    <date>Sat Oct 31 15:51:37 CET 2009</date>
    <body>I've read the description of ExpressWind, it seems really nice. Thanks. http://code.google.com/p/express-me/wiki/ExpressWind mailto:r...@architectedulogiciel.fr http://tuckey.org/urlrewrite/ UrlRewriteFilter. mailto:r...@architectedulogiciel.fr mailto:r...@architectedulogiciel.fr mailto:r...@architectedulogiciel.fr http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://www.reflexe-conseil-centre.org http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49 Membre du réseau http://www.reflexe-conseil-centre.org</body>
  </mail>
  <mail>
    <header>[Resin-interest] UnsatisfiedLinkError:	com/caucho/vfs/JniSocketImpl.writeCloseNative</header>
    <date>Wed Oct 28 17:31:27 CET 2009</date>
    <body>Every request cause this stacktrace com.caucho.server.webapp.ErrorPageManager sendServletErrorImpl java.lang.UnsatisfiedLinkError: com/caucho/vfs/JniSocketImpl.writeCloseNative com.caucho.vfs.JniSocketImpl.write(JniSocketImpl.java:301) com.caucho.vfs.JniStream.write(JniStream.java:117) com.caucho.vfs.WriteStream.close(WriteStream.java:1160) com.caucho.server.http.HttpResponseStream.closeNext(HttpResponseStream.java:179) com.caucho.server.connection.ResponseStream.finish(ResponseStream.java:684) com.caucho.server.connection.ResponseStream.close(ResponseStream.java:829) com.caucho.server.connection.AbstractHttpResponse.finishInvocation(AbstractHttpResponse.java:975) com.caucho.server.connection.AbstractHttpResponse.close(AbstractHttpResponse.java:908) com.caucho.server.connection.HttpServletResponseImpl.close(HttpServletResponseImpl.java:1480) com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:200) com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:291) com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:783) com.caucho.server.port.TcpConnection.handleRequestsImpl(TcpConnection.java:567) com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:507) com.caucho.server.port.TcpConnection$AcceptTask.doTask(TcpConnection.java:1131) com.caucho.server.port.TcpConnection$ConnectionReadTask.runThread(TcpConnection.java:1059) com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1091) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:900) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:867) This exception occurs in both windows x86 and x64. -Wesley</body>
  </mail>
  <mail>
    <header>[Resin-interest] Tabulation evil</header>
    <date>Wed Oct 28 00:42:33 CET 2009</date>
    <body>This is really just a point of curiosity... What editor are you guys using at Caucho?  I've noticed all the code is formatted using a bizarre combination of tabs and spaces, like this: 1 indent = 4 spaces 2 indents = 1 tab 3 indents = 1 tab + 4 spaces 4 indents = 2 tabs 5 indents = 2 tabs + 4 spaces ...which, setting aside longstanding religious wars about tabs vs spaces, seems to combine the worst characteristics of each approach. I'm not really complaining, since Eclipse will "fix" it for me with two mouse clicks, but I'm terribly curious to know what editor can even be configured to abuse code like that :-) Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tabulation evil</header>
    <date>Wed Oct 28 08:42:52 CET 2009</date>
    <body>I have been asking myself the same question... Jeff Schnitzer wrote (2009-10-28 00:41):</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tabulation evil</header>
    <date>Wed Oct 28 17:34:27 CET 2009</date>
    <body>It's supposed to be indent = 2 spaces with no tabs, but my own emacs setting messed up the tabs for a large number of files. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tabulation evil</header>
    <date>Wed Oct 28 17:38:51 CET 2009</date>
    <body>According to the code convention we use a tab will expand to 8 spaces in IDE. That setting pretty much takes care of all the differences :) --Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tabulation evil</header>
    <date>Fri Oct 30 15:57:02 CET 2009</date>
    <body>It's supposed to be 1 indent = 2 spaces with no tabs. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tabulation evil</header>
    <date>Sat Oct 31 13:01:29 CET 2009</date>
    <body>I thought tabs were 4 spaces for us (if tabs were allowed) :P. Anyways, I got sick and tired of seeing/removing tabs that I twice brought this to Scott's attention.  So things could have been worse :). -- Nam</body>
  </mail>
  <mail>
    <header>[Resin-interest] Inactivity connection timeout over HTTP</header>
    <date>Mon Oct 26 21:46:35 CET 2009</date>
    <body>It seems that there is a inactivity timeout being enforced at the connection level by Resin (currently running 3.1.8). I searched the standard documentation and couldn't find any mention of this, is this a configurable value? Thanks, Caleb Richardson Software Engineer Everyone.net</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Inactivity connection timeout over HTTP</header>
    <date>Mon Oct 26 21:59:35 CET 2009</date>
    <body>There is keepalive-timeout setting. It can go in the server or server- default. Default value for the parameter is 15s. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Inactivity connection timeout over HTTP</header>
    <date>Tue Oct 27 08:05:00 CET 2009</date>
    <body>Sorry, I should have mentioned that this is occurring in a comet scenario, and the timeout we are seeing is 10 minutes. We are trying to do a "long poll", and are hoping to hold the connection open without sending a response for more than 10 minutes. Thanks, Caleb Richardson Date: Mon, 26 Oct 2009 13:57:11 -0700 There is keepalive-timeout setting. It can go in the server or server- default. Default value for the parameter is 15s. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Inactivity connection timeout over HTTP</header>
    <date>Tue Oct 27 19:03:51 CET 2009</date>
    <body>You should be able to change that with &amp;lt;suspend-time-max&amp;gt;Tm&amp;lt;/suspend- time-max&amp;gt; on a port Regards, -- Alex http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Servlet running Spring with log4j does not pick up jars (log4j.jar) from WEB-INF/lib under Resin-4.0.1</header>
    <date>Sun Oct 25 23:02:26 CET 2009</date>
    <body>Hi all. Please help me with a seemingly simple problem, which, however, took me hours of googling and trials with no success at all. I'm using spring 2.5 with Log4j 1.2.15, under Resin 4.0.1 server. I have a very simple test case: web app with just DispatcherServlet and Log4jConfigListener. My problem is that Log4jConfigListener runs Log4jConfigurer which throws ClassNotFoundException: org.apache.log4j.PropertyConfigurator. My configuration is as follows: 1. spring.jar, spring-webmvc.jar and commons-logging.jar are in server's global directory 2. log4j.jar is in apps WEB-INF/lib (and is not present in global lib dir) Resin configuration is not chagned from the default: Normal classloader configuration from conf/app-default.xml applies. The LibraryLoader for WEB-INF/lib seems to notice the jars places there, but it is not forwarded to Spring. I have written to spring forums regarding this issue already, but they told me to ask here. The exception: Code: http://default ] Initializing log4j from [/home/me/project/simple/out/exploded/simpleWeb/WEB-INF/log4j.properties] http://default ] error org.apache.log4j.PropertyConfigurator in EnvironmentClassLoader[] com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1326) com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1302) java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320) org.springframework.util.Log4jConfigurer.initLogging(Log4jConfigurer.java:73) org.springframework.web.util.Log4jWebConfigurer.initLogging(Log4jWebConfigurer.java:152) org.springframework.web.util.Log4jConfigListener.contextInitialized(Log4jConfigListener.java:47) com.caucho.server.webapp.WebApp.start(WebApp.java:2388) com.caucho.server.deploy.DeployController.startImpl(DeployController.java:693) com.caucho.server.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:72) com.caucho.server.deploy.DeployController.startOnInit(DeployController.java:557) com.caucho.server.deploy.DeployContainer.start(DeployContainer.java:160) com.caucho.server.webapp.WebAppContainer.startImpl(WebAppContainer.java:707) com.caucho.server.host.Host.startImpl(Host.java:496) com.caucho.server.webapp.WebAppContainer.start(WebAppContainer.java:687) com.caucho.server.deploy.DeployController.startImpl(DeployController.java:693) com.caucho.server.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:72) com.caucho.server.deploy.DeployController.startOnInit(DeployController.java:557) com.caucho.server.deploy.DeployContainer.start(DeployContainer.java:160) com.caucho.server.host.HostContainer.start(HostContainer.java:484) com.caucho.server.cluster.Server.start(Server.java:1817) com.caucho.server.resin.Resin.createServer(Resin.java:950) com.caucho.server.resin.Resin.start(Resin.java:1021) com.caucho.server.resin.Resin.initMain(Resin.java:1494) com.caucho.server.resin.Resin.main(Resin.java:1683) The Resin server uses WEB-INF/lib in its loaders. Please note, that both following configurations do work: * spring.jar, spring-webmvc.jar, commons-logging.jar and log4j.jar in global server lib directory (but I need to have a separate log4j for each app) * spring.jar, spring-webmvc.jar, commons-logging.jar and log4j.jar in WEB-INF/lib directory (but I want to share the spring's jars). It seems like spring's classloaders ignore WEB-INF/lib, except when spring.jar is also there, but I'd like to have spring.jar in a global directory. On the other hand it seems from the trace that Spring in fact uses com.caucho.loader.DynamicClassLoader. How can I debug this? I'm completely out of ideas. Suggestions, solutions, pointers greatly appreciated. m.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Servlet running Spring with log4j does not	pick up jars (log4j.jar) from WEB-INF/lib under Resin-4.0.1</header>
    <date>Sun Oct 25 23:22:28 CET 2009</date>
    <body>Well, in Resin 3.1 there was folder to place such files, it was $RESIN_HOME/ext-webapp-lib and it was configured in default resin.conf with this: - Defaults applied to each web-app. - Extension library for common jar files.  The ext is safe - even for non-classloader aware jars.  The loaded classes - will be loaded separately for each web-app, i.e. the class - itself will be distinct. Maybe you can try to put spring.jar, spring-webmvc.jar, commons-logging.jar into a new folder "ext-webapp-lib" into your resin.root folder and add this snippet into the &amp;lt;prologue&amp;gt; of your resin.xml - Extension library for common jar files.  The ext is safe - even for non-classloader aware jars.  The loaded classes - will be loaded separately for each web-app, i.e. the class - itself will be distinct. Please be aware, that there are maybe even better approaches to fit your requirements. e.g. http://blog.caucho.com/?p=211 -- Steffen http://default ] Initializing log4j http://default ] error http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Servlet running Spring with log4j does not	pick up jars (log4j.jar) from WEB-INF/lib under Resin-4.0.1</header>
    <date>Sun Oct 25 23:36:44 CET 2009</date>
    <body>yes, this is exactly what happens.  classloaders can look "up" the chain of classloaders, but not down.  spring classes in a global scope cannot see per-application classes. Unless you plan on deploying a large number of webapps, it's probably simpler (and less error prone) to drop the whole issue and put all application classes into WEB-INF/lib.  If you think you've got a good reason to not do this, I believe (as suggested in another email) that resin supports some sort of quasi-shared thing.  See also here: http://wiki.caucho.com/Install_FAQ#Where_can_I_put_.jar_files_so_that_they_are_available_to_all_of_my_web_applications.3F -- joe</body>
  </mail>
  <mail>
    <header>[Resin-interest] &amp;lt;web-app&amp;gt; pointing to war files directly?</header>
    <date>Thu Oct 22 07:47:16 CEST 2009</date>
    <body>Is it possible to configure a host &amp;lt;web-app&amp;gt; to use a war file somewhere on the filesystem, or is the only way by defining a Ie, is it possible to do something like &amp;lt;web-app id="" document-directory="my.war"&amp;gt; ? Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] &amp;lt;web-app&amp;gt; pointing to war files directly?</header>
    <date>Thu Oct 22 08:54:46 CEST 2009</date>
    <body>It's possible - just use the &amp;lt;archive-path&amp;gt; directive such as: Check this for further details: http://wiki.caucho.com/Archive-path Regards, Steffen mailto:resin-interest-boun...@caucho.com ] Im Auftrag von http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] LazyEntityManagerFactory is initialized too late	to be injected into scheduled tasks</header>
    <date>Tue Oct 20 06:14:56 CEST 2009</date>
    <body>Hi Scott, I got two new problems. I have a scheduled task need to inject a @PersistenceUnit, as the config below: I turned log level to finer, and found Resin tried to initialize my task before creating the persistence unit. But my task need the persistence unit to be injected in it! As long as I commented the task config lines out, my app run smoothly with Resin showing these log lines before initialization of any my classes/beans: PoolItem[jdbc/buysou_cms,0,ManagedConnectionImpl](active:0, total:0) allocate PoolItem[jdbc/buysou_cms,0,ManagedConnectionImpl] PoolItem[jdbc/buysou_cms,0,ManagedConnectionImpl] com.caucho.amber.manager.AmberContainer$LazyEntityManagerFactory init Amber creating persistence unit 'buysou_cms' created with provider 'org.hibernate.ejb.HibernatePersistence' ... I think the amber lazy init should be earlier than scheduled tasks, or any PU injected task should trigger amber lazy init? ==================================== Another problem, I can't use &amp;lt;scheduled-task&amp;gt; tag in resin-web.xml because any task will be initialized before the InjectManager add any beans in my classpath (except the resin related beans and persistent related beans). Then every task which need to inject some beans in my classpath would throw the exception: javax.enterprise.inject.UnsatisfiedResolutionException: Can't find a bean for 'class com.mycompany.MyBean' because no beans implementing that class have been registered with the injection manager InjectManager[web-app: http://default ]. I guess &amp;lt;scheduled-task&amp;gt; was different with &amp;lt;resin:ScheduledTask&amp;gt;? -Wesley</body>
  </mail>
  <mail>
    <header>[Resin-interest] Missing response headers for css files using	Quercus</header>
    <date>Mon Oct 19 20:03:32 CEST 2009</date>
    <body>I'm depoying a yii based php deployment and unless I comment out the following line in the app-default.xml The response headers simply have the following set for the css files: ServerResin/4.0.s091012Etag"+WnwLhhmIYV"DateMon, 19 Oct 2009 17:54:20 GMT This is a problem in Firefox as it wants to accept text/css and it doesn't render the tree correctly. Is this a 4.0 bug or have I missed something obvious. -- -matt</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Missing response headers for css files using	Quercus</header>
    <date>Fri Sep 10 20:30:48 CEST 2010</date>
    <body>I am having this same issue with Resin 4.0 for normal web applications, not Quercus. I have only noticed this running Resin on Mac. Is it a bug that is specific to Mac? Has it been discovered on other platforms? Also, I didn't seem to have the problem on 4.0.7 but I just upgraded to 4.0.10 and it immediately occurred. matt http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Missing response headers for css files using Quercus</header>
    <date>Sat Sep 11 03:50:33 CEST 2010</date>
    <body>Hi Matt, Try setting your file encoding to UTF-8 (or whatever you intend to use): On Mac, Java's default file encoding is "MacRoman", which Firefox doesn't understand.  We have a bug open for this here: http://bugs.caucho.com/view.php?id=4180 I'm not exactly sure what to do about it, because clearly Mac intends to use its MacRoman encoding, but Firefox is confused by it. Best, Emil http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Missing response headers for css files using	Quercus</header>
    <date>Sat Sep 11 04:51:17 CEST 2010</date>
    <body>I noticed the MacRoman charset via Firebug but couldn't find your bug searching google. Thanks for the workaround. matt http://bugs.caucho.com/view.php?id=4180 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0.2 schedule</header>
    <date>Mon Oct 12 18:07:39 CEST 2009</date>
    <body>FYI, we're taking extra time on 4.0.2 to bring it up from a development release to a stable release.  That process is taking several weeks of extra work. Our current target is the end of October, but that may slip if 4.0.2 is not ready by then. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Mon Oct 12 18:52:23 CEST 2009</date>
    <body>Scott, Any possibility of getting a snapshot ahead of the end of October, or is that an impossibility due to regressions, etc? The main reason I ask is because we'd love to do further testing of the 4.0 line in our QA environment, but the previously-resolved bug (3673) causes one of our sites to break and prevents us from moving to that version for testing. That, to my knowledge, is the only thing preventing us from upgrading. Just thought I'd ask. -Jamie -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Monday, October 12, 2009 11:06 AM To: General Discussion for the Resin application server Subject: [Resin-interest] 4.0.2 schedule FYI, we're taking extra time on 4.0.2 to bring it up from a development release to a stable release.  That process is taking several weeks of extra work. Our current target is the end of October, but that may slip if 4.0.2 is not ready by then. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Mon Oct 12 23:41:02 CEST 2009</date>
    <body>Yes, I'll put one out tonight.  It might not be very stable, though, especially related to include/forward and i18n. -- Scott mailto:resin-interest-boun...@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Mon Oct 12 22:07:33 CEST 2009</date>
    <body>Thanks for the update. Would it be helpful if we filed bugs against trunk? I tried it out a week ago but pretty quickly ran into a problem (@Named @RequestScoped didn't show up in the request attrs). I figured you guys were still working on it and probably didn't need the distraction, but if it would be useful, we can start reporting issues. Thanks, Jeff http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Mon Oct 12 23:40:58 CEST 2009</date>
    <body>For JSR-299/330, you can now report against the trunk, since it's been cleaned up. Other stuff might want to hold up, because we're still working through important include/forward and i18n issues. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Tue Oct 13 19:38:18 CEST 2009</date>
    <body>The 4.0.2 snapshot is now available.  Bugs can be reported at bugs.caucho.com. The snapshot isn't clean yet, so a bug report might duplicate one of our failing regression tests, but it's better to have two reports for a bug than zero. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Tue Oct 13 20:06:31 CEST 2009</date>
    <body>Thanks Scott. I'll test the JPA &amp;amp; JSR299/330 stuff. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Tue Oct 13 22:50:36 CEST 2009</date>
    <body>Seems 4.0.2 snapshot passed most of my web test. Passed: Thirdparty Hibernate JPA integration (* see issues below) @Inject @Qualifier @Observes (with @Qualifier bindings) @ApplicationScoped @RequestScoped Failed: @SessionScoped not tested: @InterceptorBinding I found two issues so far: 1. I have to use @PersistenceUnit(name = "myPU") when I use @PersistenceUnit(unitName = "myPU") resin reports com.caucho.server.webapp.WebApp setConfigException ... @PersistenceUnit(unitName='myPU') is an unknown persistence unit.  No matching JPA persistence-units have been deployed 2. @SessionScoped is not going to work well in my code. I noticed that resin use Hessian to serialize all session scoped beans (good approach). But this result in I have to implement Serializable interface in my session scoped beans and beans need to be injected in them. Unfortunately that could not be done because sometimes I need to inject third party beans and initiate third party objects in my session scoped beans. I think I could only use @SessionScoped annotation on "SINGLE" beans, though not tested yet. Thanks Scott. Magnificent work! -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Tue Oct 13 22:54:36 CEST 2009</date>
    <body>"I think I could only use @SessionScoped annotation on "SINGLE" beans, though not tested yet." sorry, I mean SIMPLE beans not SINGLE. -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Tue Oct 13 22:58:37 CEST 2009</date>
    <body>I found two issues so far: 1. I have to use @PersistenceUnit(name = "myPU") when I use @PersistenceUnit(unitName = "myPU") resin reports com.caucho.server.webapp.WebApp setConfigException ... @PersistenceUnit(unitName='myPU') is an unknown persistence unit. No matching JPA persistence-units have been deployed Thanks.  I've added that as http://bugs.caucho.com/view.php?id=3708 . 2. @SessionScoped is not going to work well in my code. I noticed that resin use Hessian to serialize all session scoped beans (good approach). But this result in I have to implement Serializable interface in my session scoped beans and beans need to be injected in them. Unfortunately that could not be done because sometimes I need to inject third party beans and initiate third party objects in my session scoped beans. I think I could only use @SessionScoped annotation on "SINGLE" beans, though not tested yet. Do you have &amp;lt;use-persistent-store/&amp;gt; enabled?  The sample resin.xml does enable it, but you might want to change that if you don't want persistent store. Thanks Scott. Magnificent work! thanks! -- Scott -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Tue Oct 13 23:09:39 CEST 2009</date>
    <body>Yes, I turned on &amp;lt;use-persistent-store/&amp;gt; (simply copied from my previous 4.0.0 conf file). When I turned it off (commented them out) @SessionScope worked fine. Thanks. -Wesley http://bugs.caucho.com/view.php?id=3708 . http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Wed Oct 14 08:56:18 CEST 2009</date>
    <body>This reminds me; what is the syntax for enabling Java serialization for persistent store (as of http://bugs.caucho.com/view.php?id=3648 )? Wesley Wu wrote (2009-10-13 23:07): mailto:f...@caucho.com http://bugs.caucho.com/view.php?id=3708 .</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Wed Nov 25 09:56:22 CET 2009</date>
    <body>Resin 4.0.2 can now be found on the download page, and for anyone else wondering, the syntax to use Java session serialization seems to be like this: ... Mattias Mattias Jiderhamn wrote (2009-10-14 08:55): This reminds me; what is the syntax for enabling Java serialization for persistent store (as of http://bugs.caucho.com/view.php?id=3648 )? Wesley Wu wrote (2009-10-13 23:07): Yes, I turned on &amp;lt;use-persistent-store/&amp;gt; (simply copied from my previous 4.0.0 conf file). When I turned it off (commented them out) @SessionScope worked fine. Thanks. -Wesley mailto:f...@caucho.com I found two issues so far: 1. I have to use @PersistenceUnit(name = "myPU") when I use @PersistenceUnit(unitName = "myPU") resin reports com.caucho.server.webapp.WebApp setConfigException ... @PersistenceUnit(unitName='myPU') is an unknown persistence unit.  No matching JPA persistence-units have been deployed Thanks.  I've added that as http://bugs.caucho.com/view.php?id=3708 . 2. @SessionScoped is not going to work well in my code. I noticed that resin use Hessian to serialize all session scoped beans (good approach). But this result in I have to implement Serializable interface in my session scoped beans and beans need to be injected in them. Unfortunately that could not be done because sometimes I need to inject third party beans and initiate third party objects in my session scoped beans. I think I could only use @SessionScoped annotation on "SINGLE" beans, though not tested yet. Do you have &amp;lt;use-persistent-store/&amp;gt; enabled?  The sample resin.xml does enable it, but you might want to change that if you don't want persistent store. Thanks Scott. Magnificent work! thanks! -- Scott -Wesley ------------------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Wed Nov 25 16:51:51 CET 2009</date>
    <body>Hi, with 4.0.2 posted password fields don't get thru to my wicket application any more... aaaaaaargh! Back to 4.0.1 Everytime new issues, I hate it! :-( Regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Thu Nov 26 10:10:58 CET 2009</date>
    <body>Hi Jan, i can't reproduce this behaviour, i tested with * Resin-4.0.2  (direct HTTP) * Resin-4.0.2 (Reverse Proxied Apache2 (2.2.3), mod_proxy) * Resin-4.0.2 (Apache2 (2.2.9), mod_ssl, mod_caucho) :x Georg http://maillist.caucho.com/mailman/listinfo/resin-interest -- Georg Buschbeck Information Technology THOMAS DAILY GmbH Adlerstraße 19 79098 Freiburg Deutschland T  + 49 761 3 85 59 502 F  + 49 761 3 85 59 550 E  g...@thomas-daily.de www.thomas-daily.de Geschäftsführer/Managing Directors: Wendy Thomas, Susanne Larbig Handelsregister Freiburg i.Br., HRB 3947</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Fri Nov 27 16:17:33 CET 2009</date>
    <body>Hi Georg, I'm using Resin-4.0.2 with Apache/2.2.14 and mod_caucho The problem is a bit difficult to reproduce. Out of 5 times posting form data only once the content reaches Wicket. Else the posted data is null! It seems to be a general problem and not just for the 'login-form'. It looks like there might be a timing problem. I.e. when Wicket processes the form data, these seems not to be available in the request object yet! This doesn't happen with resin-4.0.1 at all. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Mon Nov 30 21:40:55 CET 2009</date>
    <body>If you get a chance, can you check the snapshot? The issue fixed in the snapshot is related, but I'm not sure if it's the same problem as you're seeing. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Mon Nov 30 22:25:05 CET 2009</date>
    <body>Hi Scott, I just checked with Resin-4.0.s091130 (built Mon, 30 Nov 2009 11:11:59 PST) and a quick first check didn't have any problems any more. So you may consider the problem solved - thanks for the quick effort! :) Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.2 schedule</header>
    <date>Sat Nov 28 18:43:17 CET 2009</date>
    <body>Jan, I reported a bug: http://bugs.caucho.com/view.php?id=3791 Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Quercus - which php frameworks work best with	Quercus?</header>
    <date>Wed Oct 21 03:25:49 CEST 2009</date>
    <body>Hello, Fairly new to Resin and php.  I was wondering has anyone successfully gotten a framework to work on resin, and what that framework was called? Any assistance in this matter, would be greatly appreciated. Best regard, Levi</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin on Snow Leopard</header>
    <date>Thu Oct 08 19:43:10 CEST 2009</date>
    <body>Hi Ferg &amp;amp; list, I spent a bit of time trying to get resin installed on Snow Leopard this week, but wasn't able to manage it. I did see an earlier thread about this and wondered if there had been any movement on this or if there was a workaround? Thanks, RC -- Rich Curtis Mocospace</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin on Snow Leopard</header>
    <date>Thu Oct 08 20:14:17 CEST 2009</date>
    <body>Is this the problem you're seeing? http://bugs.caucho.com/view.php?id=3685 Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin on Snow Leopard</header>
    <date>Thu Oct 08 20:25:23 CEST 2009</date>
    <body>Yes I think it is, although I'm not that knowledgeable about Java on the Mac, yet. If anybody has the proper steps to getting resin working on Snow Leopard, or even just some stuff I could try, please do let me know. Thx in advance. RC http://bugs.caucho.com/view.php?id=3685 http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rich Curtis Mocospace</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin on Snow Leopard</header>
    <date>Thu Oct 08 21:40:21 CEST 2009</date>
    <body>We run Resin standalone (no Apache front-end), so we don't need to build mod_caucho.so. My co-worker who has upgraded to Snow Leopard (I have not, yet) is running the non-Pro version of Resin to avoid having to build the JNI libraries until Resin's build scripts are fixed to work with Snow Leopard. One thing to remember is that there's a bug in Apple's JVM which causes Resin (and other Java programs) to print out the following stack trace (which will probably get munged in this email, the important thing is the message, "Intentionally suppressing recursive invocation exception!"). I filed a bug with Apple about this, which turned out to be a duplicate of bug #7007567. Anyone reading this who works on a Mac should also file a bug and reference bug #7007567 because Apple uses the number of reports of a bug to prioritize fixes. Fwiw, the error doesn't seem to cause a problem, at least not with our stuff, but we're not running Resin on Macs in our production environment. Intentionally suppressing recursive invocation exception! java.lang.IllegalStateException: recursive invocation at java.lang.ClassLoader.initSystemClassLoader(ClassLoader.java:1394) at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:1377) at sun.security.jca.ProviderConfig$1.run(ProviderConfig.java:64) at java.security.AccessController.doPrivileged(Native Method) at sun.security.jca.ProviderConfig.getLock(ProviderConfig.java:62) at sun.security.jca.ProviderConfig.getProvider(ProviderConfig.java:187) at sun.security.jca.ProviderList.getProvider(ProviderList.java:215) at sun.security.jca.ProviderList.getService(ProviderList.java:313) at sun.security.jca.GetInstance.getInstance(GetInstance.java:140) at java .security.cert.CertificateFactory.getInstance(CertificateFactory.java: 148) at sun.security.pkcs.PKCS7.parseSignedData(PKCS7.java:244) at sun.security.pkcs.PKCS7.parse(PKCS7.java:141) at sun.security.pkcs.PKCS7.parse(PKCS7.java:110) at sun.security.pkcs.PKCS7.&amp;lt;init&amp;gt;(PKCS7.java:92) at sun .security.util.SignatureFileVerifier.&amp;lt;init&amp;gt;(SignatureFileVerifier.java: 80) at java.util.jar.JarVerifier.processEntry(JarVerifier.java:256) at java.util.jar.JarVerifier.update(JarVerifier.java:188) at java.util.jar.JarFile.initializeVerifier(JarFile.java:321) at java.util.jar.JarFile.getInputStream(JarFile.java:386) at sun.misc.JarIndex.getJarIndex(JarIndex.java:99) at sun.misc.URLClassPath$JarLoader$1.run(URLClassPath.java:606) at java.security.AccessController.doPrivileged(Native Method) at sun.misc.URLClassPath$JarLoader.ensureOpen(URLClassPath.java:597) at sun.misc.URLClassPath$JarLoader.&amp;lt;init&amp;gt;(URLClassPath.java:581) at sun.misc.URLClassPath$3.run(URLClassPath.java:331) at java.security.AccessController.doPrivileged(Native Method) at sun.misc.URLClassPath.getLoader(URLClassPath.java:320) at sun.misc.URLClassPath.getLoader(URLClassPath.java:297) at sun.misc.URLClassPath.getResource(URLClassPath.java:167) at java.net.URLClassLoader$1.run(URLClassLoader.java:192) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:188) at sun.misc.Launcher$ExtClassLoader.findClass(Launcher.java:244) at java.lang.ClassLoader.loadClass(ClassLoader.java:319) at java.lang.ClassLoader.loadClass(ClassLoader.java:309) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:330) at java.lang.ClassLoader.loadClass(ClassLoader.java:254) at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:402) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:247) at java.lang.SystemClassLoaderAction.run(ClassLoader.java:2150) at java.security.AccessController.doPrivileged(Native Method) at java.lang.ClassLoader.initSystemClassLoader(ClassLoader.java:1407) at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:1377) Rob Yes I think it is, although I'm not that knowledgeable about Java on the Mac, yet. If anybody has the proper steps to getting resin working on Snow Leopard, or even just some stuff I could try, please do let me know. Thx in advance. RC Is this the problem you're seeing? http://bugs.caucho.com/view.php?id=3685 Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin on Snow Leopard</header>
    <date>Fri Oct 09 00:34:49 CEST 2009</date>
    <body>Sorry about that. We've been focusing on the regressions for 4.0.2 and putting off the compatibility issues until we can make some headway. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] How to load jars dynamically in Resin 3.1?</header>
    <date>Thu Oct 08 12:34:04 CEST 2009</date>
    <body>Hi, I have a long list of jar files I want to include without specifying each and everyone of them in resin.conf. I tried: - by using a autogenerated stub jar with MANIFEST.MF to load the requested class-path. But it doesn't seem like Resin loads it, and Java complains: java -jar anders.jar Failed to load Main-Class manifest attribute from anders.jar In anders.jar I have anders.class with public class anders and a META-INF/MANIFEST.MF that looks like: Manifest-Version: 1.2 Main-Class: anders Created-By: 1.4.1_01 (Sun Microsystems Inc.) Class-Path: /foo/jar1.jar /foo/jar2.jar /foo/jar3.jar - by generating a resin.conf.jars with a list of jars: And loading it in server-default section in resin.conf: Then Resin complains: /usr/local/resin/conf/resin.conf:130: &amp;lt;resin:import&amp;gt; is an unexpected tag (parent &amp;lt;server-default&amp;gt; starts at 90). - the same with the import statement in one level up. Then Resin complains like this: /usr/local/resin/conf/resin.conf.jars:1: &amp;lt;jvm-classpath&amp;gt; is an unexpected top-level tag. - by using fileset: /usr/local/resin/conf/resin.conf:150: &amp;lt;fileset&amp;gt; is an unexpected tag (parent &amp;lt;server-default&amp;gt; starts at 90). 150:       &amp;lt;fileset dir="/opt/blabla/bob/lib"&amp;gt;&amp;lt;include Any clues? It seems Resin does not like me today. :-( Regards, -- Anders Nordby Media Norge ASA, Serverdrift/IT Postboks 1, 0051 Oslo Epost: anders.nor...@aftenposten.no, a...@ap.no Tlf.: +47 22864083 Fax: +47 22864074</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to load jars dynamically in Resin 3.1?</header>
    <date>Thu Oct 08 13:46:13 CEST 2009</date>
    <body>Hi, Seems a better day today. Just use tree-loader... Sigh. Mvh, -- Anders Nordby Media Norge ASA, Serverdrift/IT Postboks 1, 0051 Oslo Epost: anders.nor...@aftenposten.no, a...@ap.no Tlf.: +47 22864083 Fax: +47 22864074 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to load jars dynamically in Resin 3.1?</header>
    <date>Thu Oct 08 17:19:42 CEST 2009</date>
    <body>:) From the title, I was wondering if you had some super-fancy dynamic load and unload requirement. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Quercus bugs in unicode handling ( Resin 3.1.19 )</header>
    <date>Wed Oct 07 22:50:25 CEST 2009</date>
    <body>Hi all, as others have also noted, there seems to be bugs in unicode code of Quercus. Haven't tested thoroughly with quercus servlet as it is not in our use as we use Quercus as Spring View mechanism. Quercus viewresolver and view basicly use quercus more or less in the same way as quercus servlet does, so there shouldn't be much of a difference. If anyone is interested, I can share the code for the view and view resolver. WIth configuration like this: I get a situation where on a php page utf-8 content coming from java works ok ( for example i18n messages from spring ), but content that is in the php page OR is fetched with file_open from an url gets manhandled. For example: Ä becomes Ã Manhandled code however can be converted again into usable format with: .. converting from utf-8 to utf-8! Sounds like some kind of bug in how string values and encodings are stored/used internally in quercus. I tried different combinations of configuration, but did not manage to get any situation or combination where content from java code, strings in php template and content fetched with php code would all be represented with right encoding at the same time. I have checked and confirmed with for example working jsp views that: - properties files are encoded in UTF-8 and messages are served in utf-8 - php files are in utf-8 - content served via url to php file_open is in utf-8 For now we will just circumvent the bug and hope it will eventually be fixed. Any thoughts? -huima</body>
  </mail>
  <mail>
    <header>[Resin-interest] How to make only some directory's (and beneath)	PHPs processed by quercus ?</header>
    <date>Wed Oct 07 20:14:01 CEST 2009</date>
    <body>I tried to make quercus to process some of my PHPs with resin 4.0.1. I want to make 'quercus/" and all its sub-directory's PHPs processed by quercus. So , I tried url-pattern="/quercus/*.php" , and url-pattern="/quercus/**/*.php" But quercus still parse my other directory's php , which is not what I want.... How to accomplish this ? Thanks in advanced.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.1.9 - on Eclipse</header>
    <date>Tue Oct 06 23:12:01 CEST 2009</date>
    <body>Hi, I just installed the Resin plug-in into Galileo. I set up a resin 3.1.9 server and I regularly start it up from Eclipse. Everything looks fine, but I get the following exceptions in the Eclipse console when I start it up: *Context initialization failed** **[17:08:42.377] org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from ServletContext resource [/WEB-INF/applicationContext.xml]; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/applicationContext.xml]** **[17:08:42.377] Caused by: java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/applicationContext.xml]** **[17:08:42.377] at org.springframework.web.context.support.ServletContextResource.getInputStream(ServletContextResource.java:99) ** **[17:08:42.377] at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:351) ** **[17:08:42.377] at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334) ** **[17:08:42.377] at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:126) ** **[17:08:42.377] at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:142) ** **[17:08:42.377] at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:123) ** **[17:08:42.377] at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:91) ** **[17:08:42.377] at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:94) ** **[17:08:42.377] at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:294) ** **[17:08:42.377] at org.springframework.web.context.support.AbstractRefreshableWebApplicationContext.refresh(AbstractRefreshableWebApplicationContext.java:156) ** **[17:08:42.377] at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:246) ** **[17:08:42.377] at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:184) ** **[17:08:42.377] at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:49) ** **[17:08:42.377] at com.caucho.server.webapp.WebApp.start(WebApp.java:1866)* * **[17:08:42.377] at com.caucho.server.deploy.DeployController.startImpl(DeployController.java:667) ** * * * Did anyone ever encounter this issue? Thanks.</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin 4.0.1 : Chinese UTF8 characters problems in	Quercus</header>
    <date>Mon Oct 05 22:17:41 CEST 2009</date>
    <body>Hi I am new to Quercus . I just downloaded resin 4.0.1 , want to try java-php integration. But at first step , I am stuck in the encoding problem : Both of my java and php file are encoded in UTF8 It seems Chinese words in php can successfully pass to java side , BUT , java side cannot correctly pass Chinese words back. see my attachments for detail . If you cannot see the attachment , I uploaded to here : http://i273.photobucket.com/albums/jj212/smallufo/quercus_Chinese_bug.gif I've tried every setting in http://www.caucho.com/resin/doc/quercus.xtp#encoding , but still in vain. Can anybody tell me how to solve the problem ? Thanks a lot.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4.0.1 : Chinese UTF8 characters problems	in Quercus</header>
    <date>Mon Oct 05 22:46:46 CEST 2009</date>
    <body>That's a long live problem which exists in all http://caucho.com/resin/doc/quercus.xtp version. I believe that's because of the poor unicode implementation of mysql (or all db specific) functions. I raised the question to Scott one years before, yet not solved now. - Wesley http://i273.photobucket.com/albums/jj212/smallufo/quercus_Chinese_bug.gif http://www.caucho.com/resin/doc/quercus.xtp#encoding , but still in vain. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4.0.1 : Chinese UTF8 characters problems	in Quercus</header>
    <date>Thu Oct 22 10:39:53 CEST 2009</date>
    <body>http://i273.photobucket.com/albums/jj212/smallufo/quercus_Chinese_bug.gif Are you sure your javac encoding is set to utf-8? It should match your source encoding, or else. And it can still be latin-1.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4.0.1 : Chinese UTF8 characters problems	in Quercus</header>
    <date>Thu Oct 22 15:35:07 CEST 2009</date>
    <body>javac assumes the source file is latin-1 unless anything else is explicitly specified. The easiest way to deal with that is to use unicode http://java.sun.com/docs/books/jls/second_edition/html/lexical.doc.html#100850 the java source. -Knut http://i273.photobucket.com/albums/jj212/smallufo/quercus_Chinese_bug.gif http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4.0.1 : Chinese UTF8 characters problems	in Quercus</header>
    <date>Thu Oct 22 16:40:01 CEST 2009</date>
    <body>javac assumes the source file is latin-1 unless anything else is explicitly specified. The easiest way to deal with that is to use unicode escapes in the java source. Remember, too, that PHP-5 strings are 8-bit by default and Java is 16- bit. You may want to use unicode-encoding='true' to use 16-bit strings in PHP. -- Scott -Knut On Thu, Oct 22, 2009 at 01:38, Илья Казначеев http://i273.photobucket.com/albums/jj212/smallufo/quercus_Chinese_bug.gif http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] ETA on the 3.1.10 release</header>
    <date>Mon Oct 05 21:14:19 CEST 2009</date>
    <body>Hi, is there any schedule for the 3.1.10 release of Resin? Would it be possible to provide us with a more recent snapshot? Especially, I am looking for the bugfix for #3220 (JSP Precompile causes IOException and sometimes deadlock) which has been fixed on 25th of August in 3.1.10 accordingly to Mantis Bug tracker. BTW: Any chance to fix #3436 also with 3.1.10 release?  Bug #3436 is "findAncestorWithClass() does not return parent classic tag instance within classic tag embedded in a tag file". This is an older issue that has very bad side effects for us as all other Servlet Containers our application is deployed (Tomcat, Websphere, Weblogic, OC4J) handle this correctly. -- Steffen</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ETA on the 3.1.10 release</header>
    <date>Tue Oct 06 05:18:35 CEST 2009</date>
    <body>3.1.10 is tricky because it's after 4.0.2, and we're taking extra time on 4.0.2 to make it a stable release.  (It will still be early access because of the specs, but any further changes should be minor.) I can get a snapshot, though. That one is a bit tricky.  The parent/child reported in the bug isn't a normal parent/child, because the child is a child of the .tag not just the body content of the original XML (which is what a normal ancestor means in JSP.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ETA on the 3.1.10 release</header>
    <date>Fri Dec 18 20:44:58 CET 2009</date>
    <body>has been released some weeks ago? http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Howto inject Spring Beans into QuercusModule ?</header>
    <date>Mon Oct 05 15:24:19 CEST 2009</date>
    <body>Hi : I am interested in integrating Spring and PHP. I noticed QuercusModule from here : http://www.caucho.com/resin-3.0/quercus/tutorial/module/index.xtp I wonder if it's possible to inject Spring's bean into QuercusModule ? And... If my QuercusModule is compiled (by myself) and jar-ed into normal web-app , and uploaded to WEB-INF , including using libraries in WEB-INF/lib , Will resin's PHP able to find my QuercusModule ? Thanks.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Howto inject Spring Beans into QuercusModule ?</header>
    <date>Mon Oct 05 19:06:00 CEST 2009</date>
    <body>Hi : I am interested in integrating Spring and PHP. I noticed QuercusModule  from here : http://www.caucho.com/resin-3.0/quercus/tutorial/module/index.xtp I wonder if it's possible to inject Spring's bean into QuercusModule ? There's a spring_bean("my_name") function in the resin- spring-4.0.x.jar which will grab a spring bean.  If you drop that jar in your classpath, you should see that function appear to Quercus. And... If my QuercusModule  is compiled (by myself) and jar-ed into normal web-app , and uploaded to WEB-INF , including using libraries in WEB- INF/lib , Will resin's PHP able to find my QuercusModule  ? Yes, if your QuercusModule has a META-INF/services/ com.caucho.quercus.QuercusModule file with your module class name. Just list all your classes in that file.  If you look in the resin.jar, you'll see the standard Quercus modules are registered using the META-INF/services. -- Scott Thanks.</body>
  </mail>
  <mail>
    <header>[Resin-interest] bean tag and JMX</header>
    <date>Fri Oct 02 01:17:14 CEST 2009</date>
    <body>The doc for 4.0.x says that the resource tag is deprecated in favor of bean. If I try to setup  JMX bean with "bean" then it doesn't work. It is registered as a CanDI object, but it is not registered in the MBean server. However, if I replace "bean" with "resource" then everything is correct, the JMX bean is shown by JConsole and the resin log also shows that it was registered.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin LineConfigException and	InstantiationException at Startup</header>
    <date>Fri Oct 02 00:29:08 CEST 2009</date>
    <body>We are running Resin Pro 3.0.23 on RHEL 5.3 and are seeing occasional errors after a restart that are causing 500 exceptions to be thrown when JSPs are loaded.  This has now happened two times in the past several weeks and we can't seem to figure out what is causing this.  Here are the lines we are seeing in the stdout logs (unfortunately we haven't gotten a full stack trace): [16:15:31.939] com.caucho.log.EnvironmentLogger.log com.caucho.config.LineConfigException: /var/resin/appA/resin-pro-3.0.23/conf/resin.conf:577: java.lang.InstantiationException: com.caucho.vfs.Path ... [16:15:33.343] com.caucho.log.EnvironmentLogger.log com.caucho.config.LineConfigException: /var/resin/appA/resin-pro-3.0.23/conf/resin.conf:664: java.lang.InstantiationException: com.caucho.vfs.Path Line 577 in resin.conf is the tree-loader specified in this And line 664 is the &amp;lt;compiling-loader&amp;gt; tag in this host-default block: The virtual hosts (and their webapps) are on an external NFS mount, but we have never had an issue with the mount being unavailable.  Has anyone else seen this or know what might cause this to happen?  It seems that once this happens, there is no fix other than to restart Resin again. Any thoughts? Thanks, Shane Privileged/Confidential Information may be contained in this message. If you are not the addressee indicated in this message (or responsible for delivery of the message to such person), you may not copy or deliver this message to anyone. In such case, you should destroy this message and kindly notify the sender by reply email. Please advise immediately if you or your employer does not consent to Internet email for messages of this kind. Opinions, conclusions and other information in this message that do not relate to the official business of my firm shall be understood as neither given nor endorsed by it.</body>
  </mail>
  <mail>
    <header>[Resin-interest] File and Directory owners in virtual hosted	environment</header>
    <date>Thu Oct 01 20:02:16 CEST 2009</date>
    <body>We are providing virtual hosting using a host.xml file for each virtual account to set the host name and root directory. Is there a way to also pass in the user and group that should be used as the owners of any files or directories that are created via code for each virtual account. Currently if a file or directory is created via code in any virtual account the file or directory ownership is set to the main user that resin is running under. I'm not sure if I am making my self clear but any pointers would be appreciated. -Peter Amiri</body>
  </mail>
  <mail>
    <header>[Resin-interest] NoSuchMethodError</header>
    <date>Thu Oct 01 16:27:35 CEST 2009</date>
    <body>Hi, I am trying to deploy my application on Resin 3.1.9 and when I access my app at localhost:8080/ I get the following error on the Resin console: [10:20:58.631] java.lang.NoSuchMethodError: com.caucho.jsp.JavaPage.addDepend(Ljava/util/ArrayList;L com/caucho/make/PersistentDependency;)V [10:20:58.631]  at _jsp._home__jsp.init(_home__jsp.java:181) [10:20:58.631]  at com.caucho.jsp.JspManager.preload(JspManager.java:320) [10:20:58.631]  at com.caucho.jsp.JspManager.compile(JspManager.java:218) [10:20:58.631]  at com.caucho.jsp.JspManager.createPage(JspManager.java:171) [10:20:58.631]  at com.caucho.jsp.JspManager.createPage(JspManager.java:150) [10:20:58.631]  at com.caucho.jsp.PageManager.getPage(PageManager.java:248) [10:20:58.631]  at com.caucho.jsp.PageManager.getPage(PageManager.java:178) [10:20:58.631]  at com.caucho.jsp.PageManager.getPage(PageManager.java:161) [10:20:58.631]  at com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) [10:20:58.631]  at com.caucho.jsp.QServlet.getPage(QServlet.java:210) [10:20:58.631]  at com.caucho.server.dispatch.PageFilterChain.compilePage(PageFilterChain.java:238) [10:20:58.631]  at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:145) [10:20:58.631]  at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:187) [10:20:58.631]  at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:265) [10:20:58.631]  at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:273) [10:20:58.631]  at com.caucho.server.port.TcpConnection.run(TcpConnection.java:682) [10:20:58.631]  at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:743) [10:20:58.631]  at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:662) [10:20:58.631]  at java.lang.Thread.run(Thread.java:619) Could you please let me know what it means and how to remove it? Thanks.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] NoSuchMethodError</header>
    <date>Thu Oct 01 22:22:29 CEST 2009</date>
    <body>Given your previous posts I assume you've just upgraded from 3.0 and in that case, you need to make sure the WEB-INF/work directory is cleared so JSPs can be compiled by the new Resin version. ----- Original Message ----- Subject: [Resin-interest] NoSuchMethodError Date: Thu, 1 Oct 2009 10:25:33 -0400 From: Rom Sok Hi, I am trying to deploy my application on Resin 3.1.9 and when I access my app at localhost:8080/ I get the following error on the Resin console: [10:20:58.631] java.lang.NoSuchMethodError: com.caucho.jsp.JavaPage.addDepend(Ljava/util/ArrayList;L com/caucho/make/PersistentDependency;)V [10:20:58.631] at _jsp._home__jsp.init(_home__jsp.java:181) [10:20:58.631] at com.caucho.jsp.JspManager.preload(JspManager.java:320) [10:20:58.631] at com.caucho.jsp.JspManager.compile(JspManager.java:218) [10:20:58.631] at com.caucho.jsp.JspManager.createPage(JspManager.java:171) [10:20:58.631] at com.caucho.jsp.JspManager.createPage(JspManager.java:150) [10:20:58.631] at com.caucho.jsp.PageManager.getPage(PageManager.java:248) [10:20:58.631] at com.caucho.jsp.PageManager.getPage(PageManager.java:178) [10:20:58.631] at com.caucho.jsp.PageManager.getPage(PageManager.java:161) [10:20:58.631] at com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) [10:20:58.631] at com.caucho.jsp.QServlet.getPage(QServlet.java:210) [10:20:58.631] at com.caucho.server.dispatch.PageFilterChain.compilePage(PageFilterChain.java:238) [10:20:58.631] at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:145) [10:20:58.631] at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:187) [10:20:58.631] at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:265) [10:20:58.631] at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:273) [10:20:58.631] at com.caucho.server.port.TcpConnection.run(TcpConnection.java:682) [10:20:58.631] at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:743) [10:20:58.631] at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:662) [10:20:58.631] at java.lang.Thread.run(Thread.java:619) Could you please let me know what it means and how to remove it? Thanks.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] NoSuchMethodError</header>
    <date>Thu Oct 01 22:30:21 CEST 2009</date>
    <body>Thanks, I guess it happened by itself after I set up the resin plugin in Eclipse - I am not getting this error anymore. On Thu, Oct 1, 2009 at 4:18 PM, Mattias Jiderhamn &amp;lt;mj-li...@expertsystems.se http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] prologue</header>
    <date>Wed Sep 30 23:35:53 CEST 2009</date>
    <body>I have included a prologue section in resin-web.xml, but it is not accepted by Resin, see the log extract below. I have't find a section dedicated to the prologue element in the documentation, there are only indirect references to it. On the other hand it is included in the default resin-xml (host-default / webapp) so it mustn't be deprecated. This reference page contains almost the same code as an example (prologue in resin-web.xml): http://www.caucho.com/resin/reference/env-tags.xtp#class-loader Where is prologue valid? Or where can I find this myself? For the 3.1 there is a Relax NG section in the configuration part of the documentation, but not for 4.0. WEB-INF/resin-web.xml:8: 'prologue' is an unknown property of 'com.caucho.server.webapp.WebApp'. 6: 7: 8: 9: 10:                        &amp;lt;compiling-loader</body>
  </mail>
  <mail>
    <header>[Resin-interest] java.lang.OutOfMemoryError: Java heap space</header>
    <date>Wed Sep 30 18:16:02 CEST 2009</date>
    <body>Hi, I know this is probably a rookie mistake... I got the *java.lang.OutOfMemoryError: Java heap space* I also understand that I need to pass parameters when I start Java to increase the heap size. The problem is that I am not sure where to do that: I have Windows Vista and Resin 3.0.28. Thanks.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.OutOfMemoryError: Java heap space</header>
    <date>Wed Sep 30 18:46:01 CEST 2009</date>
    <body>Hi, I know this is probably a rookie mistake... I got the java.lang.OutOfMemoryError: Java heap space I also understand that I need to pass parameters when I start Java to increase the heap size. The problem is that I am not sure where to do that: I have Windows Vista and Resin 3.0.28. For Resin 3.0.x, the JVM configuration parameters are on the command line (Resin 3.1.x and later use the resin.xml file.)  The configuration you want is something like -J-Xmx512m. If you continue to run into memory issues (especially if you can reproduce the problem in your development lab), you might want to look at Resin 4.0.x or Resin 3.1.x and use the "memory" tab in the /resin- status to get a quick heap dump to give you an idea of what's taking up the memory. -- Scott Thanks.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.OutOfMemoryError: Java heap space</header>
    <date>Wed Sep 30 18:58:05 CEST 2009</date>
    <body>Thank you for the quick response. I normally start my server by calling "httpd.exe". When you say that I can pass the command line memory arguments, do you mean I have to start the server with the following command: "httpd.exe -J-Xmx512m -J-Xms512m"? Thanks. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.OutOfMemoryError: Java heap space</header>
    <date>Wed Sep 30 19:07:06 CEST 2009</date>
    <body>Thank you for the quick response. I normally start my server by calling "httpd.exe". When you say that I can pass the command line memory arguments, do you mean I have to start the server with the following command: "httpd.exe -J-Xmx512m -J-Xms512m"? That's correct. -- Scott Thanks. Hi, I know this is probably a rookie mistake... I got the java.lang.OutOfMemoryError: Java heap space I also understand that I need to pass parameters when I start Java to increase the heap size. The problem is that I am not sure where to do that: I have Windows Vista and Resin 3.0.28. For Resin 3.0.x, the JVM configuration parameters are on the command line (Resin 3.1.x and later use the resin.xml file.)  The configuration you want is something like -J-Xmx512m. If you continue to run into memory issues (especially if you can reproduce the problem in your development lab), you might want to look at Resin 4.0.x or Resin 3.1.x and use the "memory" tab in the / resin-status to get a quick heap dump to give you an idea of what's taking up the memory. -- Scott Thanks.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Building from trunk</header>
    <date>Sat Sep 26 05:20:15 CEST 2009</date>
    <body>I just tried "ant dist" from trunk and got an UNRESOLVED DEPENDENCIES error from Ivy: [ivy:retrieve] :: problems summary :: [ivy:retrieve] :::: WARNINGS [ivy:retrieve]  io problem while parsing ivy file: http://repository.jboss.com/maven2/jboss/jboss-common/2.2.1/jboss-common-2.2.1.pom: Impossible to load parent for file:/Users/jeff/.ivy2/cache/jboss/jboss-common/ivy-2.2.1.xml.original. Parent=org.jboss#jboss-parent;3 [ivy:retrieve]  io problem while parsing ivy file: http://repository.jboss.com/maven2/jboss/jboss-common-core/2.2.0.GA/jboss-common-core-2.2.0.GA.pom: Impossible to load parent for file:/Users/jeff/.ivy2/cache/jboss/jboss-common-core/ivy-2.2.0.GA.xml.original. Parent=jboss#jboss-common;2.2.1 [ivy:retrieve]          module not found: jboss#jboss-common-core;2.2.0.GA [ivy:retrieve]  ==== jboss: tried [ivy:retrieve] http://repository.jboss.com/maven2/jboss/jboss-common/2.2.1/jboss-common-2.2.1.pom [ivy:retrieve]          :::::::::::::::::::::::::::::::::::::::::::::: [ivy:retrieve]          ::          UNRESOLVED DEPENDENCIES         :: [ivy:retrieve]          :::::::::::::::::::::::::::::::::::::::::::::: [ivy:retrieve]          :: jboss#jboss-common-core;2.2.0.GA: not found [ivy:retrieve]          :::::::::::::::::::::::::::::::::::::::::::::: [ivy:retrieve] [ivy:retrieve] :: USE VERBOSE OR DEBUG MESSAGE LEVEL FOR MORE DETAILS Am I doing something wrong?  This is the first Ivy-based project I've tried to build. Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Building from trunk</header>
    <date>Sat Sep 26 05:50:17 CEST 2009</date>
    <body>I discovered the target "ant resin.dist.build" which seems to get farther, but then fails to find resin-cxf.jar: BUILD FAILED /Users/Shared/3rdparty/Resin/build-common.xml:753: The following error occurred while executing this line: /Users/Shared/3rdparty/Resin/build-common.xml:569: The following error occurred while executing this line: /Users/Shared/3rdparty/Resin/build-common.xml:433: Warning: Could not find file /Users/Shared/3rdparty/Resin/artifacts/cxf/dist/resin-cxf.jar to copy. So I tried "ant artifacts", which did produce the resin-cxf.jar, but then failed to compile the mule classes because "org.mule" doesn't exist.  And while the resin.dist.build gets a little farther, it needs more unbuilt artifacts. I scoured the wiki, the mailing list, and the source tree for some sort of description on "how to build" but for now, it seems I'm code 1 jeff 0 :-/ Jeff http://repository.jboss.com/maven2/jboss/jboss-common/2.2.1/jboss-common-2.2.1.pom: http://repository.jboss.com/maven2/jboss/jboss-common-core/2.2.0.GA/jboss-common-core-2.2.0.GA.pom: http://repository.jboss.com/maven2/jboss/jboss-common/2.2.1/jboss-common-2.2.1.pom</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Building from trunk</header>
    <date>Mon Sep 28 22:20:39 CEST 2009</date>
    <body>The "dist" rule builds a bunch of artifacts that are unrelated to the Resin core (stuff like integration with cxf).  Normally, if you're building from source, you shouldn't need to build the dist at all. -- Scott http://repository.jboss.com/maven2/jboss/jboss-common/2.2.1/jboss-common-2.2.1.pom http://repository.jboss.com/maven2/jboss/jboss-common-core/2.2.0.GA/jboss-common-core-2.2.0.GA.pom http://repository.jboss.com/maven2/jboss/jboss-common/2.2.1/jboss-common-2.2.1.pom http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] character encoding</header>
    <date>Wed Sep 23 21:16:37 CEST 2009</date>
    <body>Hi, Is there a way to force URI CHARACTER encoding to UTF-8? Thanks</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] character encoding</header>
    <date>Thu Sep 24 00:08:46 CEST 2009</date>
    <body>In a JSP? http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] character encoding</header>
    <date>Thu Sep 24 15:38:34 CEST 2009</date>
    <body>No, I mean in the request... on the java side. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] character encoding</header>
    <date>Thu Sep 24 16:03:31 CEST 2009</date>
    <body>Rom Sok schrieb: That's poor and inefficient communication. Consider giving a complete description of what you want to achieve and how it relates to Resin. Reading this might help you in doing so: http://catb.org/~esr/faqs/smart-questions.html -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] character encoding</header>
    <date>Thu Sep 24 17:02:42 CEST 2009</date>
    <body>Sorry, let's try this again: I am running into a problem where certain UTF-8 characters go into the application and come out as nonsense. The JSP's are using UTF-8 encoding, and so does the database. Accoridng to my research one of the things I have to do on the application side to make sure character encoding is always consistent is set the character encoding in the server configuration for URL-decoding GET request parameters. The equivalent in Tomcat configuration is *&amp;lt;Connector (...) URIEncoding="UTF-8" /&amp;gt;* Is there an equivalent in Resin? Thanks. http://catb.org/~esr/faqs/smart-questions.html http://catb.org/%7Eesr/faqs/smart-questions.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] character encoding</header>
    <date>Thu Sep 24 17:31:50 CEST 2009</date>
    <body>Rom Sok schrieb: Do you know the source of these characters, or maybe bytes? Application source code? Incoming HTTP request? Might you be relying on the platform's default charset (encoding)? Is your default charset indeed UTF-8? Consider: * String(byte[] bytes) - relying on the default charset here! * String(byte[] bytes, String charsetName) * String(byte[] bytes, Charset charset) java.nio.charset.Charset.defaultCharset().displayName() Is your HTML output also UTF-8? Or maybe rather ISO-8859-1, the default? Don't know, would have to look it up in the docs. -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] character encoding</header>
    <date>Thu Sep 24 18:04:57 CEST 2009</date>
    <body>Sorry, let's try this again: I am running into a problem where certain UTF-8 characters go into the application and come out as nonsense. The JSP's are using UTF-8 encoding, and so does the database. Accoridng to my research one of the things I have to do on the application side to make sure character encoding is always consistent is set the character encoding in the server configuration for URL-decoding GET request parameters. The equivalent in Tomcat configuration is Resin should default to utf-8.  The configuration is .. There's also a which affects all default character encodings in Resin, including POST parsing. JSP can be a bit tricky, though, because the JSP default is ISO-8859-1 (unfortunate, but it's part of the JSP spec.)  The &amp;lt;character- encoding&amp;gt; should override the JSP default. -- Scott Is there an equivalent in Resin? Thanks. Rom Sok schrieb: That's poor and inefficient communication. Consider giving a complete description of what you want to achieve and how it relates to Resin. Reading this might help you in doing so: http://catb.org/~esr/faqs/smart-questions.html -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] character encoding</header>
    <date>Thu Sep 24 18:14:59 CEST 2009</date>
    <body>Thanks, Where does   &amp;lt;character-encoding&amp;gt;utf-8&amp;lt;/character-encoding&amp;gt; go? In resin.conf? If so, what's the nesting? I.e. inside what tags is it nested. Thank you, R.S. http://catb.org/~esr/faqs/smart-questions.html http://catb.org/%7Eesr/faqs/smart-questions.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] character encoding</header>
    <date>Thu Sep 24 18:18:02 CEST 2009</date>
    <body>Thanks, Where does   &amp;lt;character-encoding&amp;gt;utf-8&amp;lt;/character-encoding&amp;gt; go? In resin.conf? If so, what's the nesting? I.e. inside what tags is it nested. It's actually contextual, though the &amp;lt;cluster&amp;gt; is the best place for it, because URL parsing happens at the &amp;lt;cluster&amp;gt; level. -- Scott Thank you, R.S. Sorry, let's try this again: I am running into a problem where certain UTF-8 characters go into the application and come out as nonsense. The JSP's are using UTF-8 encoding, and so does the database. Accoridng to my research one of the things I have to do on the application side to make sure character encoding is always consistent is set the character encoding in the server configuration for URL-decoding GET request parameters. The equivalent in Tomcat configuration is Resin should default to utf-8.  The configuration is .. There's also a which affects all default character encodings in Resin, including POST parsing. JSP can be a bit tricky, though, because the JSP default is ISO-8859-1 (unfortunate, but it's part of the JSP spec.)  The -- Scott Is there an equivalent in Resin? Thanks. On Thu, Sep 24, 2009 at 10:01 AM, Michael Ludwig &amp;lt;m...@as- Rom Sok schrieb: That's poor and inefficient communication. Consider giving a complete description of what you want to achieve and how it relates to Resin. Reading this might help you in doing so: http://catb.org/~esr/faqs/smart-questions.html -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] character encoding</header>
    <date>Thu Sep 24 18:27:04 CEST 2009</date>
    <body>Sorry, what do you mean by contextual? Does it mean I am required to run a cluster to use it? Not with a standalone instance? http://catb.org/~esr/faqs/smart-questions.html http://catb.org/%7Eesr/faqs/smart-questions.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] character encoding</header>
    <date>Thu Sep 24 19:13:13 CEST 2009</date>
    <body>Sorry, what do you mean by contextual? You can put the &amp;lt;character-encoding&amp;gt; inside the &amp;lt;cluster&amp;gt;, &amp;lt;host&amp;gt; or Does it mean I am required to run a cluster to use it? Not with a standalone instance? A standalone instance belongs to a cluster with 1 server, itself.  In Resin, a cluster is the container for all of your servers.  There's nothing special about clustering configuration, it just has multiple servers. -- Scott Thanks, Where does   &amp;lt;character-encoding&amp;gt;utf-8&amp;lt;/character-encoding&amp;gt; go? In resin.conf? If so, what's the nesting? I.e. inside what tags is it nested. It's actually contextual, though the &amp;lt;cluster&amp;gt; is the best place for it, because URL parsing happens at the &amp;lt;cluster&amp;gt; level. -- Scott Thank you, R.S. Sorry, let's try this again: I am running into a problem where certain UTF-8 characters go into the application and come out as nonsense. The JSP's are using UTF-8 encoding, and so does the database. Accoridng to my research one of the things I have to do on the application side to make sure character encoding is always consistent is set the character encoding in the server configuration for URL-decoding GET request parameters. The equivalent in Tomcat configuration is Resin should default to utf-8.  The configuration is .. There's also a which affects all default character encodings in Resin, including POST parsing. JSP can be a bit tricky, though, because the JSP default is ISO-8859-1 (unfortunate, but it's part of the JSP spec.)  The -- Scott Is there an equivalent in Resin? Thanks. On Thu, Sep 24, 2009 at 10:01 AM, Michael Ludwig &amp;lt;m...@as- Rom Sok schrieb: That's poor and inefficient communication. Consider giving a complete description of what you want to achieve and how it relates to Resin. Reading this might help you in doing so: http://catb.org/~esr/faqs/smart-questions.html -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] character encoding</header>
    <date>Thu Sep 24 20:01:20 CEST 2009</date>
    <body>I wrote up a quick blurb on the issues surrounding character encoding on the Resteasy list recently: http://sourceforge.net/mailarchive/message.php?msg_name=540eb7210908281001r6aafaa55u78615debb704e4c1%40mail.gmail.com The short of it is that, if you can get away with it, you should set UTF-8 everywhere.  In particular, you should set the platform default with -Dfile.encoding=utf-8 and ensure that all your pages are rendered in utf-8 (ie with the JSP directive).  It's cool that Resin has a config parameter for this, but it will be obviated by setting the platform default - right, Scott? The main problem is that POSTed form data will be sent by the browser in whatever charset encoding was used on the host page, and this information is not sent along with the request.  So the server must guess... and that usually means going with the platform default. If you for some reason need to manage multiple charsets in the same application, you'll need a Filter that executes early and calls request.setCharacterEncoding() *before* any code calls request.getParameter(). Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] character encoding</header>
    <date>Thu Sep 24 20:14:22 CEST 2009</date>
    <body>http://sourceforge.net/mailarchive/message.php?msg_name=540eb7210908281001r6aafaa55u78615debb704e4c1%40mail.gmail.com Hmm.  Yes, it should, but actually I need to check that.  Resin's command-line tests are a different section of the test suite (because it launches an external Resin) and I'm not sure we have coverage. I've filed a bug to make sure it's not forgotten.  Resin might just be defaulting to utf-8. Because of the Servlet/JSP TCK, we have a bit of a problem because the TCK requires all the defaults to be ISO-8859-1, but we want the default to be file.encoding or UTF-8. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] character encoding</header>
    <date>Fri Sep 25 12:18:00 CEST 2009</date>
    <body>Jeff Schnitzer schrieb: http://sourceforge.net/mailarchive/message.php?msg_name=540eb7210908281001r6aafaa55u78615debb704e4c1%40mail.gmail.com Good blurb! On the page you're referring to: * If there is an "acceptcharset" element on the form, it should submit with that encoding. I've never tested this. * Otherwise the browser will submit with whatever encoding the page was rendered in. That's not quite what the HTML spec says: accept-charset = charset list [CI] This attribute specifies the list of character encodings for input data that is accepted by the server processing this form. The value is a space- and/or comma-delimited list of charset values. The client must interpret this list as an exclusive-or list, i.e., the server is able to accept any single character encoding per entity received. The default value for this attribute is the reserved string "UNKNOWN". User agents may interpret this value as the character encoding that was used to transmit the document containing this FORM element. http://www.w3.org/TR/html401/interact/forms.html#adef-accept-charset So there is "must" and "may" instead of "should" and "will". But I've never tested it either. And tests would have to be done against multiple implementations, not against the spec :-/ Maybe worth trying, though. -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>[Resin-interest] Stopping Resin due to detected alarm freeze. What?</header>
    <date>Tue Sep 22 20:53:01 CEST 2009</date>
    <body>I've never seen this before and can't find this string in the Resin (non-Pro) source. This happened on several of our server this morning. But I've never seen it happen before in months of running this particular configuration. Environment: Windows Server 2003 Resin Pro 3.1.9 - 100 Server License JDK 1.6_13 What would cause this? Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Stopping Resin due to detected alarm freeze.	What?</header>
    <date>Tue Sep 22 21:45:17 CEST 2009</date>
    <body>Certain types of deadlock or a true JVM or thread freeze.  It's detected by the &amp;lt;ping&amp;gt; service. Resin has an timer thread in Alarm that returns the internal current time for Resin.  If that thread freezes, Resin's internal time won't be updated and will become out of sync with the System.currentTimeMillis().  If that discrepancy gets very large (15m), Resin will force an exit.  Basically, it's an indication that something is very, very wrong with the JVM. Since I just updated the shutdown logic for 4.0.2, it might be possible for Resin to give a thread dump before exiting in that case. Previously, Resin just does a halt() because the JVM might be in such a bad state that any additional work might create new problems. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Stopping Resin due to detected alarm	freeze.	What?</header>
    <date>Wed Sep 23 01:56:18 CEST 2009</date>
    <body>Thanks, Scott. The fact that it was a result of the ping service got me on the right path. Rob</body>
  </mail>
  <mail>
    <header>[Resin-interest] Noob question: Do I have to restart?</header>
    <date>Tue Sep 22 16:24:33 CEST 2009</date>
    <body>Hi, Sorry about the newbie question, do I have to restart Resin every time I drop a new version of some file into the deployment directory? like say web.xml? "Quit" -&amp;gt; httpd.exe all over again? Also, is that what is called hot deployment? Or is there another term for redeploying an app without starting the server? Thanks,</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Noob question: Do I have to restart?</header>
    <date>Tue Sep 22 18:11:53 CEST 2009</date>
    <body>Hot deployment works fine for me out of the box, but note that Resin doesn't immediately reload the webapp when web.xml or the war changes. You have to actually request a page, then the app will reload. If you change JSP files they are picked up immediately, no reload necessary. Jeff http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Noob question: Do I have to restart?</header>
    <date>Tue Sep 22 18:13:54 CEST 2009</date>
    <body>Thanks http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Noob question: Do I have to restart?</header>
    <date>Tue Sep 22 20:10:30 CEST 2009</date>
    <body>Hi, Be aware though, that hot redeployment requires all the libraries/classes that reside in WEB-INF to behave correctly, otherwise they are not recicled and end up consuming all the non-Heap memory and causing an OOM. And there are tons of libraries out there that do not behave properly, even some of the most popular ones. So, even though convenient, it is not something I would rely on much, unfortunately. Oh, and there is an attribute in resin.conf (or resin.xml) to control the interval to check for changes in the context-senstive files, so you can configure it so Resin is not checking all the time in production if some files have changed. On a related note, I think that I've seen Resin close the application and restart it before the next page is requested, even though I don't remember if that was with previous versions of Resin or depended on some time out. Could some one from Resin clarify this point? S! D. PS: S! = Salute!, so it's not my name :) S'està citant Rom Sok &amp;lt;romsok.re...@gmail.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Noob question: Do I have to restart?</header>
    <date>Tue Sep 22 20:46:57 CEST 2009</date>
    <body>There's a timeout thread in addition to the request check.  A request will force a check (assuming dependency-check-interval has expired). The timeout thread is something slower, like 60s. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin Eclipse Feature on Ecliple Galileo (3.5)</header>
    <date>Tue Sep 22 13:14:07 CEST 2009</date>
    <body>The Resin Eclipse Feature (REF) produces exceptions on my Eclipse Galileo (3.5) on Java 1.6 on Windows XP. After installation of the REF and the recommended subsequent restart, when clicking on the Servers view for the first time, there is an error that wasn't there before: Could not initialize class org.eclipse.wst.server.ui.internal.provisional.UIDecoratorManager Creating a Resin server ("temporary directory" flavour) works for me. When finishing the creation process, the error reoccurs: Could not initialize class org.eclipse.wst.server.ui.internal.provisional.UIDecoratorManager When clicking on the new Resin server in the Servers view, same error. When trying to start the server, a non-terminating sequence of errors occurs (stacktrace following). The funny thing is that the error sequence is respawned after clicking on OK or closing the little Eclipse error message dialogue. ---- stack trace ---- eclipse.buildId=I20090611-1540 java.version=1.6.0_11 java.vendor=Sun Microsystems Inc. BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=de_DE Framework arguments:  -product org.eclipse.epp.package.java.product Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.java.product This is a continuation of log file C:\MILU\eclipse35workspace\.metadata\.bak_0.log Created Time: 2009-09-22 12:54:41.500 Error Tue Sep 22 12:56:19 CEST 2009 Problems occurred when invoking code from plug-in: "org.eclipse.jface". java.lang.NoClassDefFoundError: Could not initialize class org.eclipse.wst.server.ui.internal.provisional.UIDecoratorManager at org.eclipse.wst.server.ui.internal.cnf.ServerDecorator.getStateImage(ServerDecorator.java:142) at org.eclipse.wst.server.ui.internal.cnf.ServerDecorator.getServerStateImage(ServerDecorator.java:137) at org.eclipse.wst.server.ui.internal.cnf.ServerLabelProvider.getImage(ServerLabelProvider.java:76) at org.eclipse.ui.internal.navigator.extensions.SafeDelegateCommonLabelProvider.getImage(SafeDelegateCommonLabelProvider.java:106) at org.eclipse.ui.internal.navigator.NavigatorContentServiceLabelProvider.findImage(NavigatorContentServiceLabelProvider.java:213) at org.eclipse.ui.internal.navigator.NavigatorContentServiceLabelProvider.getColumnImage(NavigatorContentServiceLabelProvider.java:110) at org.eclipse.ui.internal.navigator.NavigatorContentServiceLabelProvider.getImage(NavigatorContentServiceLabelProvider.java:103) at org.eclipse.ui.internal.navigator.NavigatorDecoratingLabelProvider$StyledLabelProviderAdapter.getImage(NavigatorDecoratingLabelProvider.java:60) at org.eclipse.jface.viewers.DelegatingStyledCellLabelProvider.getImage(DelegatingStyledCellLabelProvider.java:184) at org.eclipse.jface.viewers.DecoratingStyledCellLabelProvider.getImage(DecoratingStyledCellLabelProvider.java:167) at org.eclipse.jface.viewers.DelegatingStyledCellLabelProvider.update(DelegatingStyledCellLabelProvider.java:118) at org.eclipse.jface.viewers.DecoratingStyledCellLabelProvider.update(DecoratingStyledCellLabelProvider.java:134) at org.eclipse.jface.viewers.ViewerColumn.refresh(ViewerColumn.java:145) at org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem(AbstractTreeViewer.java:932) at org.eclipse.jface.viewers.AbstractTreeViewer$UpdateItemSafeRunnable.run(AbstractTreeViewer.java:102) at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) at org.eclipse.core.runtime.Platform.run(Platform.java:888) at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:48) at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175) at org.eclipse.jface.viewers.AbstractTreeViewer.doUpdateItem(AbstractTreeViewer.java:1012) at org.eclipse.jface.viewers.StructuredViewer$UpdateItemSafeRunnable.run(StructuredViewer.java:481) at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) at org.eclipse.core.runtime.Platform.run(Platform.java:888) at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:48) at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175) at org.eclipse.jface.viewers.StructuredViewer.updateItem(StructuredViewer.java:2111) at org.eclipse.jface.viewers.StructuredViewer.internalUpdate(StructuredViewer.java:2094) at org.eclipse.jface.viewers.StructuredViewer.update(StructuredViewer.java:2033) at org.eclipse.jface.viewers.ColumnViewer.update(ColumnViewer.java:554) at org.eclipse.ui.navigator.CommonViewer.update(CommonViewer.java:540) at org.eclipse.jface.viewers.StructuredViewer.update(StructuredViewer.java:1977) at org.eclipse.jface.viewers.StructuredViewer.handleLabelProviderChanged(StructuredViewer.java:1140) at org.eclipse.ui.navigator.CommonViewer.handleLabelProviderChanged(CommonViewer.java:235) at org.eclipse.jface.viewers.ContentViewer$1.labelProviderChanged(ContentViewer.java:97) at org.eclipse.jface.viewers.BaseLabelProvider$1.run(BaseLabelProvider.java:74) at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) at org.eclipse.core.runtime.Platform.run(Platform.java:888) at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:48) at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175) at org.eclipse.jface.viewers.BaseLabelProvider.fireLabelProviderChanged(BaseLabelProvider.java:72) at org.eclipse.jface.viewers.DecoratingStyledCellLabelProvider$1.labelProviderChanged(DecoratingStyledCellLabelProvider.java:77) at org.eclipse.ui.internal.decorators.DecoratorManager$1.run(DecoratorManager.java:430) at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42) at org.eclipse.ui.internal.decorators.DecoratorManager.fireListener(DecoratorManager.java:428) at org.eclipse.ui.internal.decorators.DecorationScheduler$3.runInUIThread(DecorationScheduler.java:530) at org.eclipse.ui.progress.UIJob$1.run(UIJob.java:95) at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35) at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134) at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3855) at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3476) at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2405) at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2369) at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2221) at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:500) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:493) at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:113) at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:194) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:368) at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:559) at org.eclipse.equinox.launcher.Main.basicRun(Main.java:514) at org.eclipse.equinox.launcher.Main.run(Main.java:1311) ---- stack trace ---- -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Eclipse Feature on Ecliple Galileo (3.5)</header>
    <date>Tue Sep 22 18:32:59 CEST 2009</date>
    <body>Is this a fresh install of Galileo or do you have other plugins installed?  I tested on the Java EE package of Galileo from eclipse.org and never saw this error. Actually, could you send the version of the "org.eclipse.wst.*" plugins that you've got installed?  It's possible one of our plugin dependencies is too specific about versions. Thanks, Emil http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Eclipse Feature on Ecliple Galileo (3.5)</header>
    <date>Wed Sep 23 11:34:06 CEST 2009</date>
    <body>Emil Ong schrieb: The install started out as "Eclipse IDE for Java Developers", not "Java EE". I then installed additional functionality. The Tomcat plugin works flawlessy, so I assume the Resin plugin should also work. Long list following: org.eclipse.wst.command.env.core.source_1.0.204.v200805140020.jar org.eclipse.wst.command.env.core_1.0.204.v200805140020.jar org.eclipse.wst.command.env.doc.user_1.5.200.v200806092138.jar org.eclipse.wst.command.env.infopop_1.0.100.v200805301544.jar org.eclipse.wst.command.env.source_1.0.408.v200903110045.jar org.eclipse.wst.command.env.ui.source_1.1.2.v200811200248.jar org.eclipse.wst.command.env.ui_1.1.2.v200811200248.jar org.eclipse.wst.command.env_1.0.408.v200903110045.jar org.eclipse.wst.common.api.doc_1.0.1.v200807181737.jar org.eclipse.wst.common.core.source_1.1.201.v200806010600.jar org.eclipse.wst.common.core_1.1.201.v200806010600.jar org.eclipse.wst.common.emf.source_1.1.300.v200905060430.jar org.eclipse.wst.common.emfworkbench.integration.source_1.1.300.v200811200330.jar org.eclipse.wst.common.emfworkbench.integration_1.1.300.v200811200330.jar org.eclipse.wst.common.emf_1.1.300.v200905060430.jar org.eclipse.wst.common.environment.source_1.0.202.v200807161459.jar org.eclipse.wst.common.environment_1.0.202.v200807161459.jar org.eclipse.wst.common.frameworks.source_1.1.300.v200904160730.jar org.eclipse.wst.common.frameworks.ui.source_1.1.300.v200904160730.jar org.eclipse.wst.common.frameworks.ui_1.1.300.v200904160730.jar org.eclipse.wst.common.frameworks_1.1.300.v200904160730.jar org.eclipse.wst.common.infopop.source_1.0.100.v200805301550.jar org.eclipse.wst.common.infopop_1.0.100.v200805301550.jar org.eclipse.wst.common.modulecore.source_1.1.300.v200904132230.jar org.eclipse.wst.common.modulecore_1.1.300.v200904132230.jar org.eclipse.wst.common.project.facet.core_1.4.0.v200906080535.jar org.eclipse.wst.common.project.facet.ui_1.4.0.v200906080543.jar org.eclipse.wst.common.snippets.source_1.1.300.v200903120643.jar org.eclipse.wst.common.snippets_1.1.300.v200903120643.jar org.eclipse.wst.common.ui.source_1.1.402.v200901262305.jar org.eclipse.wst.common.ui_1.1.402.v200901262305.jar org.eclipse.wst.common.uriresolver.source_1.1.301.v200805140415.jar org.eclipse.wst.common.uriresolver_1.1.301.v200805140415.jar org.eclipse.wst.css.core.source_1.1.300.v200904131653.jar org.eclipse.wst.css.core_1.1.300.v200904131653.jar org.eclipse.wst.css.ui.source_1.0.400.v200904292008.jar org.eclipse.wst.css.ui_1.0.400.v200904292008.jar org.eclipse.wst.doc.user_1.2.0.v200806052254.jar org.eclipse.wst.dtd.core.source_1.1.300.v200904181727.jar org.eclipse.wst.dtd.core_1.1.300.v200904181727.jar org.eclipse.wst.dtd.ui.infopop_1.0.300.v200805140200.jar org.eclipse.wst.dtd.ui.source_1.0.400.v200904300717.jar org.eclipse.wst.dtd.ui_1.0.400.v200904300717.jar org.eclipse.wst.dtdeditor.doc.user_1.0.500.v200904292308.jar org.eclipse.wst.html.core.source_1.1.300.v200903120608.jar org.eclipse.wst.html.core_1.1.300.v200903120608.jar org.eclipse.wst.html.ui.infopop_1.0.100.v200805301545.jar org.eclipse.wst.html.ui.source_1.0.400.v200904292008.jar org.eclipse.wst.html.ui_1.0.400.v200904292008.jar org.eclipse.wst.internet.cache.source_1.0.301.v200805140020.jar org.eclipse.wst.internet.cache_1.0.301.v200805140020.jar org.eclipse.wst.internet.monitor.core.source_1.0.404.v20090609.jar org.eclipse.wst.internet.monitor.core_1.0.404.v20090609.jar org.eclipse.wst.internet.monitor.ui.source_1.0.304.v200805140145.jar org.eclipse.wst.internet.monitor.ui_1.0.304.v200805140145.jar org.eclipse.wst.jsdt.core.source_1.0.200.v200905201910.jar org.eclipse.wst.jsdt.core_1.0.200.v200905201910.jar org.eclipse.wst.jsdt.doc_1.0.200.v200903120608.jar org.eclipse.wst.jsdt.manipulation.source_1.0.100.v200809240707.jar org.eclipse.wst.jsdt.manipulation_1.0.100.v200809240707.jar org.eclipse.wst.jsdt.support.firefox.source_1.0.200.v200904290357.jar org.eclipse.wst.jsdt.support.firefox_1.0.200.v200904290357.jar org.eclipse.wst.jsdt.support.ie.source_1.0.200.v200904290539.jar org.eclipse.wst.jsdt.support.ie_1.0.200.v200904290539.jar org.eclipse.wst.jsdt.ui.source_1.0.200.v200905242047.jar org.eclipse.wst.jsdt.ui_1.0.200.v200905242047.jar org.eclipse.wst.jsdt.web.core.source_1.0.200.v200905120445.jar org.eclipse.wst.jsdt.web.core_1.0.200.v200905120445.jar org.eclipse.wst.jsdt.web.support.jsp_1.0.200.v200904140255.jar org.eclipse.wst.jsdt.web.ui.source_1.0.200.v200904230847.jar org.eclipse.wst.jsdt.web.ui_1.0.200.v200904230847.jar org.eclipse.wst.server.core.source_1.1.101.v20090515.jar org.eclipse.wst.server.core_1.1.101.v20090515.jar org.eclipse.wst.server.discovery.source_1.0.0.v20090602.jar org.eclipse.wst.server.discovery_1.0.0.v20090602.jar org.eclipse.wst.server.http.core_1.0.200.v20090429.jar org.eclipse.wst.server.http.ui_1.0.200.v20090113.jar org.eclipse.wst.server.preview.adapter_1.1.0.v20090311b.jar org.eclipse.wst.server.preview_1.1.0.v20090113.jar org.eclipse.wst.server.ui.doc.user_1.1.150.v200901232034.jar org.eclipse.wst.server.ui.infopop_1.1.0.v200805140145.jar org.eclipse.wst.server.ui.source_1.1.102.v20090515.jar org.eclipse.wst.server.ui_1.1.102.v20090515.jar org.eclipse.wst.sse.core.source_1.1.400.v200905141750.jar org.eclipse.wst.sse.core_1.1.400.v200905141750.jar org.eclipse.wst.sse.doc.user_1.1.0.v200805211530.jar org.eclipse.wst.sse.ui.infopop_1.0.200.v200805301545.jar org.eclipse.wst.sse.ui.source_1.1.100.v200905141750.jar org.eclipse.wst.sse.ui_1.1.100.v200905141750.jar org.eclipse.wst.standard.schemas_1.0.200.v200902270215.jar org.eclipse.wst.validation.doc.isv_1.2.101.v200906031420.jar org.eclipse.wst.validation.infopop_1.0.300.v200806041506.jar org.eclipse.wst.validation.source_1.2.102.v200905201610.jar org.eclipse.wst.validation.ui.source_1.2.104.v200904232035.jar org.eclipse.wst.validation.ui_1.2.104.v200904232035.jar org.eclipse.wst.validation_1.2.102.v200905201610.jar org.eclipse.wst.web.source_1.1.300.v200901261500.jar org.eclipse.wst.web.ui.infopop_1.0.300.v200805140415.jar org.eclipse.wst.web.ui.source_1.1.300.v200905242131.jar org.eclipse.wst.web.ui_1.1.300.v200905242131.jar org.eclipse.wst.webtools.doc.user_1.0.400.v200805150134.jar org.eclipse.wst.web_1.1.300.v200901261500.jar org.eclipse.wst.ws.api.doc_1.0.1.v200807181721.jar org.eclipse.wst.ws.explorer.source_1.0.407.v200903301628.jar org.eclipse.wst.ws.explorer_1.0.407.v200903301628.jar org.eclipse.wst.ws.infopop_1.0.300.v200805140230.jar org.eclipse.wst.ws.parser.source_1.0.402.v200901220107.jar org.eclipse.wst.ws.parser_1.0.402.v200901220107.jar org.eclipse.wst.ws.service.policy.source_1.0.103.v200905151848.jar org.eclipse.wst.ws.service.policy.ui.source_1.0.102.v200903070248.jar org.eclipse.wst.ws.service.policy.ui_1.0.102.v200903070248.jar org.eclipse.wst.ws.service.policy_1.0.103.v200905151848.jar org.eclipse.wst.ws.source_1.1.103.v200903111822.jar org.eclipse.wst.ws.ui.source_1.1.100.v200903112221.jar org.eclipse.wst.ws.ui_1.1.100.v200903112221.jar org.eclipse.wst.wsdl.doc.isv_1.0.100.v200811240723.jar org.eclipse.wst.wsdl.source_1.2.0.v200904112052.jar org.eclipse.wst.wsdl.ui.doc.user_1.0.550.v200901232040.jar org.eclipse.wst.wsdl.ui.source_1.2.202.v200904271449.jar org.eclipse.wst.wsdl.ui_1.2.202.v200904271449.jar org.eclipse.wst.wsdl.validation.source_1.1.401.v200902271605.jar org.eclipse.wst.wsdl.validation_1.1.401.v200902271605.jar org.eclipse.wst.wsdl_1.2.0.v200904112052.jar org.eclipse.wst.wsi.source_1.0.305.v200902181431.jar org.eclipse.wst.wsi.ui.doc.user_1.0.401.v200809171927.jar org.eclipse.wst.wsi.ui.source_1.0.500.v200901141851.jar org.eclipse.wst.wsi.ui_1.0.500.v200901141851.jar org.eclipse.wst.wsi_1.0.305.v200902181431.jar org.eclipse.wst.ws_1.1.103.v200903111822.jar org.eclipse.wst.xml.core.source_1.1.400.v200904300540.jar org.eclipse.wst.xml.core_1.1.400.v200904300540.jar org.eclipse.wst.xml.ui.infopop_1.0.300.v200805140200.jar org.eclipse.wst.xml.ui.source_1.1.0.v200905242047.jar org.eclipse.wst.xml.ui_1.1.0.v200905242047.jar org.eclipse.wst.xml.xpath.core.source_1.0.0.v200904240436.jar org.eclipse.wst.xml.xpath.core_1.0.0.v200904240436.jar org.eclipse.wst.xml.xpath.ui.source_1.0.0.v200904240436.jar org.eclipse.wst.xml.xpath.ui_1.0.0.v200904240436.jar org.eclipse.wst.xml.xpath2.processor.source_1.0.0.v200905300355.jar org.eclipse.wst.xml.xpath2.processor_1.0.0.v200905300355.jar org.eclipse.wst.xmleditor.doc.user_1.0.600.v200901231300.jar org.eclipse.wst.xsd.core.source_1.1.401.v200903020335.jar org.eclipse.wst.xsd.core_1.1.401.v200903020335.jar org.eclipse.wst.xsd.ui.source_1.2.203.v200904300717.jar org.eclipse.wst.xsd.ui_1.2.203.v200904300717.jar org.eclipse.wst.xsdeditor.doc.user_1.0.700.v200905182240.jar org.eclipse.wst.xsl.core.source_1.0.0.v200905071815.jar org.eclipse.wst.xsl.core_1.0.0.v200905071815.jar org.eclipse.wst.xsl.debug.ui.source_1.0.0.v200904240436.jar org.eclipse.wst.xsl.debug.ui_1.0.0.v200904240436.jar org.eclipse.wst.xsl.doc_1.0.0.v200905071815.jar org.eclipse.wst.xsl.jaxp.debug.source_1.0.0.v200904240436.jar org.eclipse.wst.xsl.jaxp.debug.ui.source_1.0.0.v200904240436.jar org.eclipse.wst.xsl.jaxp.debug.ui_1.0.0.v200904240436.jar org.eclipse.wst.xsl.jaxp.debug_1.0.0.v200904240436.jar org.eclipse.wst.xsl.jaxp.launching.source_1.0.0.v200904240436.jar org.eclipse.wst.xsl.jaxp.launching_1.0.0.v200904240436.jar org.eclipse.wst.xsl.launching.source_1.0.0.v200904241348.jar org.eclipse.wst.xsl.launching_1.0.0.v200904241348.jar org.eclipse.wst.xsl.saxon.source_1.0.0.v200904240436.jar org.eclipse.wst.xsl.saxon_1.0.0.v200904240436.jar org.eclipse.wst.xsl.sdk.documentation_1.0.0.v200904240436.jar org.eclipse.wst.xsl.source_1.0.0.v200905250058.jar org.eclipse.wst.xsl.ui.source_1.0.0.v200904300717.jar org.eclipse.wst.xsl.ui_1.0.0.v200904300717.jar org.eclipse.wst.xsl.xalan.source_1.0.0.v200904240436.jar org.eclipse.wst.xsl.xalan_1.0.0.v200904240436.jar org.eclipse.wst.xsl_1.0.0.v200905250058.jar -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Eclipse Feature on Ecliple Galileo (3.5)</header>
    <date>Wed Sep 23 18:46:06 CEST 2009</date>
    <body>Thanks, Michael.  I'll see if I can reproduce it under these conditions. Emil http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Eclipse Feature on Ecliple Galileo (3.5)</header>
    <date>Mon Oct 05 21:59:37 CEST 2009</date>
    <body>Hi Michael, I tried to reproduce the error, but couldn't get it to show up. I installed on Java and JavaEE versions of Galileo with no problems. I actually just received an off-list note from a Tomcat user who hit the same exception.  (He had no idea what Resin was, he just Googled the message and found the list.)  Sounds like it might be something upstream.  There's no Caucho code in the exception you sent, which doesn't always mean it's not our fault, but it does make it harder to tie it to something in the Resin plugin. The other odd thing is that some of the versions on plugins below are incompatible with the versions in the Resin plugin, so in theory Eclipse never should have allowed it to install.  Either that or it's using OSGi to run multiple bundle versions. The Tomcat user managed to get the error to go away with an Eclipse restart.  I'm not sure if that would do it, but it might be a workaround until we can figure out the true source of the problem. Emil http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>[Resin-interest] [ANN]VTD-XML 2.7</header>
    <date>Mon Oct 05 22:06:37 CEST 2009</date>
    <body>VTD-XML 2.7 ( http://vtd-xml.sf.net ) is released and can be downloaded at http://sourceforge.net/projects/vtd-xml/files/ . Below is a summary of what are the new features and enhancements. Expanded VTD-XML's Core API a.. VTDNav: toStringUpperCase, toStringLowerCase, contains(), endsWith(), startsWith() b.. Extended VTD added in-memory buffer support Improved Xpath a.. Added the following XPath 2.0 functions: abs(), ends-with(), upper-case(),  lower-case() b.. Added support for variable reference * significantly enhanced XPath syntax, checking error reporting (Special thanks to Mark Swanson) c.. Internal performance tuning Bug fixes and Code Enhancement a.. C version significantly removed warning message, fix memory leak during  Xpath expression parsing, b.. Various bug fies (Special thanks to Jon Roberts, John Zhu, Matej Spiller,  Steve Polson, and Romain La Tellier)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Eclipse Feature on Ecliple Galileo (3.5)</header>
    <date>Wed Feb 24 00:48:31 CET 2010</date>
    <body>Hi Emil, I'm finally getting back to this: Emil Ong schrieb am 05.10.2009 um 12:58:05 (-0700): As just posted to the list, I think the error is due to starting Eclipse with a JRE-Java when a JDK-Java is required. -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Eclipse Feature on Ecliple Galileo (3.5)</header>
    <date>Wed Feb 24 00:45:16 CET 2010</date>
    <body>Michael Ludwig schrieb am 22.09.2009 um 13:11:56 (+0200): I've encountered this error again. I think I know the cause: starting Eclipse with a Java belonging to a JRE when a full JDK is required. As for why it is required, I think installation of the Maven (m2) plugin might be the cause; I got a warning to this effect after start-up. So this has nothing to do with Resin or Tomcat, at least not directly. -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Eclipse Feature on Ecliple Galileo (3.5)</header>
    <date>Wed Feb 24 19:30:27 CET 2010</date>
    <body>Thanks, Michael!  Good detective work.  I added a note to the wiki: http://wiki.caucho.com/Eclipse Emil http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Caucho site missing eclipse plug-in link?</header>
    <date>Mon Sep 21 23:01:00 CEST 2009</date>
    <body>I received the Caucho newsletter today, and although I don't use eclipse, several other devs here do. I was going to forward them the information about the eclipse plug-in, but when I clicked on the http://www.caucho.com/eclipse Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caucho site missing eclipse plug-in link?</header>
    <date>Tue Sep 22 00:45:20 CEST 2009</date>
    <body>http://caucho.com/eclipse/ http://caucho.com/eclipse/ configuration: 1. Within Eclipse, access the menu: Help -&amp;gt; Software Updates... 2. Click the "Available Software" tab 3. Click the "Add Site" 4. Enter http://caucho.com/eclipse 5. Click "OK" 6. Click "Refresh" and install the Resin Eclipse plugin! http://www.caucho.com/eclipse http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caucho site missing eclipse plug-in link?</header>
    <date>Tue Sep 22 02:09:29 CEST 2009</date>
    <body>Hi Rob, This was a newsletter bug - it got rewritten by our newsletter provider to a tracking URL, but if you just go directly it should work, as Randy demonstrated. Thanks, Emil http://caucho.com/eclipse/ http://caucho.com/eclipse http://www.caucho.com/eclipse http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caucho site missing eclipse plug-in link?</header>
    <date>Tue Sep 22 13:08:06 CEST 2009</date>
    <body>Randy Johnson schrieb: http://caucho.com/eclipse/ http://caucho.com/eclipse/ http://caucho.com/eclipse Can't see a "Refresh" button in Galileo, but if that's what you're using you may have to uncheck "Group items by category" in order for the "Resin Eclipse Feature" to show up. But there may be errors with Galileo and the Resin Feature. See following post. -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>[Resin-interest] Avoid "HTTP/1.1 requires host"</header>
    <date>Mon Sep 21 14:11:07 CEST 2009</date>
    <body>Is there any setting which would allow Resin to silently ignore connections that cause the following error? com.caucho.server.dispatch.BadRequestException: HTTP/1.1 requires host at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:261) at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:579) at com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java:1357) at com.caucho.server.port.TcpConnection$KeepaliveTask.run(TcpConnection.java:1435) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:874) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:787) --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Avoid "HTTP/1.1 requires host"</header>
    <date>Mon Sep 21 17:15:31 CEST 2009</date>
    <body>That's not something Resin should do.  A HTTP/1.1 request without a host is incorrect and the client must be fixed. However, if the issue is filling up the logs, we can certainly change the internal logging behavior.  It's the HTTP protocol response that needs to return the error. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Compiling Servlets in Eclipse Breaks the app</header>
    <date>Fri Sep 18 22:37:11 CEST 2009</date>
    <body>Hi, I ran into a problem. I created an Eclipse project and I use it as the deploy directory as well in Resin, but I am also using some code that was compiled a long time ago not by me. It works fine until I attempt to compile the servlet classes in Eclipse - then I get notices from Resin on the console, that it cannot find those servlet classes even though they are right there under the classes directory in WEB-INF. Could anyone please suggest why this might be happening? Thanks, Ramy.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Compiling Servlets in Eclipse Breaks the app</header>
    <date>Fri Sep 18 23:54:55 CEST 2009</date>
    <body>Do you know if those classes depend on a library that might be missing? The JDK can throw some misleading ClassNotFoundExceptions when the class exists, but one of its dependencies does not exist. (Hmm.  It might be possible in the future for Resin to modify the error a bit, so you can distinguish between the two cases.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Compiling Servlets in Eclipse Breaks the app</header>
    <date>Sat Sep 19 01:20:00 CEST 2009</date>
    <body>These are the only packages the class depends on: * import java.util.*;* Here is the error from the console: * [19:17:38.683] com.caucho.config.LineConfigException: /C:/resin/conf/app-default.xml:49: `romsok_srv' is not a known servlet. Servlets belong in the classpath, often in WEB-INF/classes.* http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Compiling Servlets in Eclipse Breaks the app</header>
    <date>Mon Sep 21 16:03:18 CEST 2009</date>
    <body>Rom Sok schrieb: I think the servlet identified by "romsok_srv" will have to be made available to the servlet engine on startup for general use, on a par with: * com.caucho.servlets.DirectoryServlet * com.caucho.servlets.FileServlet * com.caucho.jsp.JspServlet * com.caucho.jsp.XtpServlet So try putting the classes in $RESIN_HOME/lib and not in WEB-INF/classes. Does that work? -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Compiling Servlets in Eclipse Breaks the app</header>
    <date>Mon Sep 21 16:24:22 CEST 2009</date>
    <body>Actually the response from S! seems to have solved the problem. I was compiling with 1.6 - reduced it to 1.5 and it works just fine. Thank you all for your input. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Integrating Resin with NetBeans</header>
    <date>Thu Sep 17 16:25:55 CEST 2009</date>
    <body>Hi, I am trying to set up NetBeans to build a Web App, and it requires specifying the server I will be using. It is a shame that I can't set it up generically without tying it to a particular server, but anyway, I am using Resin, and cannot find it in the list of servers NetBeans gives. Could someone please tell me how I can add Resin to that list? Thanks.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Integrating Resin with NetBeans</header>
    <date>Thu Sep 17 16:51:01 CEST 2009</date>
    <body>I'm using Intellij IDEA which supports Resin 3.x. After some modification of the resin plugin, I managed to support 4.0.x in IDEA. Eclipse should support resin too. I don't know if NetBeans supports Resin 4.0.x. :-( -Wesley http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Integrating Resin with NetBeans</header>
    <date>Thu Sep 17 18:10:15 CEST 2009</date>
    <body>Wu Wesley schrieb: Or rather the other way round. And some bugs have been fixed recently. http://bugs.caucho.com/view.php?id=3502 http://bugs.caucho.com/view.php?id=3503 http://bugs.caucho.com/view.php?id=3589 -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Integrating Resin with NetBeans</header>
    <date>Wed Sep 30 21:32:19 CEST 2009</date>
    <body>Thanks, I installed the Resin Eclipse plug-in. I am now running into a small problem - the plug-in supports resin 3.1 and up. I've been using 3.0.28 so far, so I decided to up my Resin version. I copied app-default.xml and resin.conf from the 3.0.28 to the 3.1.9. I started the server from Eclipse. but when i hit localhost:8080 where my application was deployed to under Resin 3.0.28 - which I used to start manually, I get the following error: 500 Servlet Exception web-app root-directory can not be the same as the host root-directory /c:MyWebApp/MyApp Why would that be happening? http://bugs.caucho.com/view.php?id=3502 http://bugs.caucho.com/view.php?id=3503 http://bugs.caucho.com/view.php?id=3589 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Integrating Resin with NetBeans</header>
    <date>Thu Oct 01 17:07:43 CEST 2009</date>
    <body>Also, I managed to create an instance of Resin 3.1 in Eclipse, But when I try to start it I get the following error: * Error: no 'server' JVM at 'C:\Program Files(x86)\Java\jre6\bin\server\jvm.dll'.* http://bugs.caucho.com/view.php?id=3502 http://bugs.caucho.com/view.php?id=3503 http://bugs.caucho.com/view.php?id=3589 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Integrating Resin with NetBeans</header>
    <date>Thu Oct 01 18:55:03 CEST 2009</date>
    <body>Hi Rom, The Eclipse plugin does not support Resin 3.0.  The webapp root-directory/host root-directory I believe was due to a change in configuration from 3.0 to 3.1.  You won't be able to use a 3.1 config file in 3.0. Also you need to use a JDK with Resin.  It looks like you're trying to use a JRE and looks like it doesn't include the server JVM. Resin 3.1 now requires the server JVM.  If you're doing development, you're going to need the JDK anyway, so I'm guessing you probably already have it and just need to use that one instead. Take care, Emil http://bugs.caucho.com/view.php?id=3502 http://bugs.caucho.com/view.php?id=3503 http://bugs.caucho.com/view.php?id=3589 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Integrating Resin with NetBeans</header>
    <date>Thu Oct 01 19:49:16 CEST 2009</date>
    <body>Thanks Emil - I was able to correct the server VM error by going in Eclipse to configure JRE and pointing it to the JDK 6 I have. I am now running into a different problem. When I start Resin in Eclipse everything works - the application too, but I am getting the following error on the Eclipse console, and I am not certain why. *Context initialization failed [13:44:34.765] org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from ServletContext resource [/WEB-INF/applicationContext.xml]; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/applicationContext.xml] [13:44:34.765] Caused by: java.io.FileNotFoundException: Could not open ServletContext resource [/WEB-INF/applicationContext.xml]* http://bugs.caucho.com/view.php?id=3502 http://bugs.caucho.com/view.php?id=3503 http://bugs.caucho.com/view.php?id=3589 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin on Snow Leopard: Install scripts need	updating?</header>
    <date>Tue Sep 15 03:34:06 CEST 2009</date>
    <body>I have not yet installed Snow Leopard. However, a co-worker has and he couldn't get Resin running. This was with Resin 3.1.x and also 4.x. Neither would work properly. It looks like the Resin configuration/make scripts need to be updated. Please see this blog entry (not by me) for details. http://www.angry-fly.com/post.cfm/fixing-railo-and-resin-on-snow-leopard Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin on Snow Leopard: Install scripts need	updating?</header>
    <date>Tue Sep 15 18:56:10 CEST 2009</date>
    <body>Thanks.  I've filed this.  It looks like the ./configure script isn't detecting the 64-bit JDK.  ./configure uses java -version and pattern matches on the output to find 64-bit vs non-64-bit. -- Scott http://www.angry-fly.com/post.cfm/fixing-railo-and-resin-on-snow-leopard http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin on Snow Leopard: Install scripts need updating?</header>
    <date>Tue Sep 15 19:23:18 CEST 2009</date>
    <body>As a followup, after modifying the install script, he still could not get the Pro version to start. I'm sorry I don't have the exact error, but it had to do with the libexec64 JNI Libs. IIRC, one of the errors had to do with crc64. Sorry, I only saw this over his shoulder and did not write it down. Since I don't have SL installed, I have not been able to confirm this on my own machine. Anyway, he "fixed" it by downgrading to the non-Pro version. Rob http://www.angry-fly.com/post.cfm/fixing-railo-and-resin-on-snow-leopard</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin on Snow Leopard: Install scripts need	updating?</header>
    <date>Tue Sep 15 19:33:21 CEST 2009</date>
    <body>Hmm.  I've seen this when the JDK compile directory is different from the executable.  The MacOS JDK directory structure is a bit weird. I'll need to check it when closing the bug. -- Scott http://www.angry-fly.com/post.cfm/fixing-railo-and-resin-on-snow-leopard http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin on Snow Leopard: Install scripts need updating?</header>
    <date>Tue Sep 15 19:44:23 CEST 2009</date>
    <body>Yes, it is. And it sounds like it got a little weirder with SL. :( http://www.angry-fly.com/post.cfm/fixing-railo-and-resin-on-snow-leopard</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin-interest Digest, Vol 39, Issue 6</header>
    <date>Mon Sep 14 16:27:46 CEST 2009</date>
    <body>No this will not work, as its just creating a Session cookie for SSL by a new name. We need to secure all the cookies going over a SSL connection. Thanks, Abhinav http://caucho.com/resin-3.1/doc/cluster-tags.xtp#ssl-session-cookie http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] chunked encoding issue in HmuxResponse</header>
    <date>Mon Sep 14 14:12:27 CEST 2009</date>
    <body>affected version: Resin 4.0.0 &amp;amp; 4.0.1 reproducible: every time HmuxResponse.writeHeadersInt should not always return false, otherwise in ResponseStream "write-chunk5" will never happen if _chunkedEncoding==false. this result in UTF8Writer produces a reproducible error. I modified HmuxResponse.writeHeadersInt to add some lines below: // add by wesley start // add by wesley end // add by wesley start // add by wesley end // add by wesley start // add by wesley end ... // add by wesley start // add by wesley start and everything goes fine. -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] chunked encoding issue in HmuxResponse</header>
    <date>Wed Sep 16 20:18:59 CEST 2009</date>
    <body>I've just filed this as http://bugs.caucho.com/view.php?id=3686 , although we've already redesigned that code significantly, so it may not apply -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] chunked encoding issue in HmuxResponse</header>
    <date>Wed Sep 16 20:40:13 CEST 2009</date>
    <body>Thanks Scott. I found my resolution will cause another bug :( so don't use my code. waiting for the 4.0.2 :) - Wesley http://bugs.caucho.com/view.php?id=3686 , http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Cookie security over SSL (https) connections -	Sent Using Google Toolbar</header>
    <date>Thu Sep 10 14:36:32 CEST 2009</date>
    <body>Thanks Jeff, But we are creating no cookies by our own. Our requirement is to just secure the Apache OR Resin created Cookies for session management. So we created a generic filter for that. Regards, Abhinav [Resin-interest] Cookie security over SSL (https) http://maillist.caucho.com/pipermail/resin-interest/2009-September/004027.html [Resin-interest] Cookie security over SSL (https) connections *Jeff Schnitzer* jeff at infohazard.org *Wed Sep 9 09:30:32 CDT 2009* - Previous message: [Resin-interest] Cookie security over SSL (https) connections http://maillist.caucho.com/pipermail/resin-interest/2009-September/004026.html - *Messages sorted by:* [ date http://maillist.caucho.com/pipermail/resin-interest/2009-September/date.html#4027 [ thread http://maillist.caucho.com/pipermail/resin-interest/2009-September/thread.html#4027 [ subject http://maillist.caucho.com/pipermail/resin-interest/2009-September/subject.html#4027 [ author http://maillist.caucho.com/pipermail/resin-interest/2009-September/author.html#4027 ------------------------------ Why aren't you creating the cookies with setSecure(true) in the first place? If you have tons of legacy code that sets cookies, why not create a Filter that wraps HttpServletResponse (there is a convenient HttpServletResponseWrapper for this), intercepts the addCookie() method calls, and calls setSecure(true)? If you want this value set, you need to set it outbound, not after they've already been to the browser. Jeff On Wed, Sep 9, 2009 at 3:44 AM, Abhinav Gupta&amp;lt;abhinav at appirio.com http://maillist.caucho.com/mailman/listinfo/resin-interest *&amp;gt;* *&amp;gt;* *&amp;gt;* This problem is regarding cookie security over SSL(https). We are running a *&amp;gt;* J2EE webapplication, our motive is to get the cookie's "isSecure" flag set *&amp;gt;* to true. We tried researching around the resin config settings for this but *&amp;gt;* no luck. Details of the approach we tried and the issue faced are elaborated *&amp;gt;* below. *&amp;gt;* *&amp;gt;* Enviornment Details *&amp;gt;* ==================== *&amp;gt;* 1. Resin 3.1.7 server running a webapplication called "tool" *&amp;gt;* 2. Apache is in the front forwarding/redirecting all inbound traffic to the *&amp;gt;* resin server. *&amp;gt;* 3. Apache is setup with trusted SSL certificates from godaddy. *&amp;gt;* *&amp;gt;* *&amp;gt;* Problem Details *&amp;gt;* ================ *&amp;gt;* By default for all secure https requests, resin is sending cookies back with *&amp;gt;* "isSecure" flag as false. *&amp;gt;* We tried looking for resin config settings to fix this, but can't find any *&amp;gt;* setting. So we created a Servlet filter in our webapp *&amp;gt;* to trap all inbound requests and manually set the isSecure flag to true. *&amp;gt;* *&amp;gt;* This servlet filter approach partially fixed the problem. We are saying *&amp;gt;* partially because there are two cookies created by *&amp;gt;* the application in browser. *&amp;gt;* *&amp;gt;* Cookie 1: Its path is "&amp;lt;domain name&amp;gt;/" and the isSecure flag is "false" *&amp;gt;* Cookie 2: Its path is "&amp;lt;domain name&amp;gt;/tools" and the isSecure flag is "true" *&amp;gt;* *&amp;gt;* So Cookie 2 is as expected, but Cookie 1 is not coming secured, to fix this *&amp;gt;* we tried deploying the same servlet filter in the ROOT webapp of resin. But *&amp;gt;* the problem persisted as before. *&amp;gt;* *&amp;gt;* *&amp;gt;* Here is the servlet filter code. *&amp;gt;* *&amp;gt;* *&amp;gt;*     public void doFilter(ServletRequest req, ServletResponse res, *&amp;gt;*         // Secure if its a Http based request *&amp;gt;*                     // Make the cookie secure *&amp;gt;*                     // Add it to the response *&amp;gt;* *&amp;gt;* *&amp;gt;* *&amp;gt;* *&amp;gt;* Please suggest. *&amp;gt;* *&amp;gt;* Regards, *&amp;gt;* Abhinav *&amp;gt;* *&amp;gt;* _______________________________________________ *&amp;gt;* resin-interest mailing list *&amp;gt;* resin-interest at caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest *&amp;gt;* http://maillist.caucho.com/mailman/listinfo/resin-interest *&amp;gt;* *&amp;gt;* * ------------------------------ - Previous message: [Resin-interest] Cookie security over SSL (https) connections http://maillist.caucho.com/pipermail/resin-interest/2009-September/004026.html - *Messages sorted by:* [ date http://maillist.caucho.com/pipermail/resin-interest/2009-September/date.html#4027 [ thread http://maillist.caucho.com/pipermail/resin-interest/2009-September/thread.html#4027 [ subject http://maillist.caucho.com/pipermail/resin-interest/2009-September/subject.html#4027 [ author http://maillist.caucho.com/pipermail/resin-interest/2009-September/author.html#4027 ------------------------------ More information about the resin-interest mailing http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Cookie security over SSL (https) connections -	Sent Using Google Toolbar</header>
    <date>Mon Sep 14 18:37:54 CEST 2009</date>
    <body>I think you need to make sure you are using an SSL connection (request.isSecure()) before you create the Cookies in the first place. The behaviour when changing a non-secure cookie to a secure one may be browser dependant.// // // //Abhinav Gupta wrote (2009-09-10 14:34): http://maillist.caucho.com/pipermail/resin-interest/2009-September/004027.html mailto:resin-interest%40caucho.com?Subject=%5BResin-interest%5D%20Cookie%20security%20over%20SSL%20%28https%29%20connections&amp;amp;In-Reply-To=915837840909090344ye834f35t23cbd41bd44c423b%40mail.gmail.com http://maillist.caucho.com/pipermail/resin-interest/2009-September/004026.html http://maillist.caucho.com/pipermail/resin-interest/2009-September/date.html#4027 http://maillist.caucho.com/pipermail/resin-interest/2009-September/thread.html#4027 http://maillist.caucho.com/pipermail/resin-interest/2009-September/subject.html#4027 http://maillist.caucho.com/pipermail/resin-interest/2009-September/author.html#4027 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Cookie security over SSL (https) connections</header>
    <date>Wed Sep 09 12:46:20 CEST 2009</date>
    <body>Hi All, This problem is regarding cookie security over SSL(https). We are running a J2EE webapplication, our motive is to get the cookie's "isSecure" flag set to true. We tried researching around the resin config settings for this but no luck. Details of the approach we tried and the issue faced are elaborated below. Enviornment Details ==================== 1. Resin 3.1.7 server running a webapplication called "tool" 2. Apache is in the front forwarding/redirecting all inbound traffic to the resin server. 3. Apache is setup with trusted SSL certificates from godaddy. Problem Details ================ By default for all secure https requests, resin is sending cookies back with "isSecure" flag as false. We tried looking for resin config settings to fix this, but can't find any setting. So we created a Servlet filter in our webapp to trap all inbound requests and manually set the isSecure flag to true. This servlet filter approach partially fixed the problem. We are saying partially because there are two cookies created by the application in browser. Cookie 1: Its path is "&amp;lt;domain name&amp;gt;/" and the isSecure flag is "false" Cookie 2: Its path is "&amp;lt;domain name&amp;gt;/tools" and the isSecure flag is "true" So Cookie 2 is as expected, but Cookie 1 is not coming secured, to fix this we tried deploying the same servlet filter in the ROOT webapp of resin. But the problem persisted as before. Here is the servlet filter code. public void doFilter(ServletRequest req, ServletResponse res, // Secure if its a Http based request // Make the cookie secure // Add it to the response Please suggest. Regards, Abhinav</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Cookie security over SSL (https) connections</header>
    <date>Wed Sep 09 16:31:51 CEST 2009</date>
    <body>Why aren't you creating the cookies with setSecure(true) in the first place? If you have tons of legacy code that sets cookies, why not create a Filter that wraps HttpServletResponse (there is a convenient HttpServletResponseWrapper for this), intercepts the addCookie() method calls, and calls setSecure(true)? If you want this value set, you need to set it outbound, not after they've already been to the browser. Jeff http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Cookie security over SSL (https) connections</header>
    <date>Thu Sep 10 19:04:25 CEST 2009</date>
    <body>Hi! Have you tried using ssl-session-cookie configuration? Here's the documentation: http://caucho.com/resin-3.1/doc/cluster-tags.xtp#ssl-session-cookie Cheers, Kai 2009/9/9 Abhinav Gupta &amp;lt;abhi...@appirio.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] HttpSessionBindingListener.valueUnbound() not always called in Resin 4...?</header>
    <date>Tue Sep 08 14:00:24 CEST 2009</date>
    <body>After about a week with Resin 4.0.1 in production environment, we have twice seen symptoms indicating that a value implementing HttpSessionBindingListener has been removed from a session, without its valueUnbound() method being called. Has anyone else seen this? Are there any circumstances where such behavior should be expected...? --</body>
  </mail>
  <mail>
    <header>[Resin-interest]  Problem with IP Constraint of Resin Admin</header>
    <date>Wed Sep 02 19:23:33 CEST 2009</date>
    <body>I'm having an issue locking down the Resin admin pages to users on our VPN / private network, who will be using the private IPs.  Due to our requirement for PCI compliance, having an unencrypted login publicly available is a no-no, and after our upgrade to Resin 3.1.x, our security scans are flagging the admin pages for this requirement.  We have the IP constraint in place to limit access to our VPN users on the private network; loading the following page from the public network: http://outsidedomain.com/admin gives the correct "Unauthorized IP Address" message while pulling up: http://outsidedomain.com/admin/ actually pulls up a version of the admin login page (without the CSS file being loaded, as that's being correctly flagged as being IP protected I assume). Now you can't actually login from the public network (you get the same "Unauthorized IP Address" error message if you attempt that), but it's generally easier to get this fixed and not be accessible at all than fight with a QSA over a compensating control exception.  Our configuration, essentially taken right out of the docs, is below: I've tried removing slashes, adding wildcards, etc. and still can't get this to work.  Any ideas? I could also just run the admin pages as it's own virtual host on a different port that isn't forwarded from the public network, but I want it to all be the same JVM obviously as I'm looking to monitor the main webapp, not just itself.  Is that possible? -- View this message in context: http://www.nabble.com/Problem-with-IP-Constraint-of-Resin-Admin-tp25261802p25261802.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Cannot Start Resin on Vista</header>
    <date>Tue Sep 01 18:45:29 CEST 2009</date>
    <body>Hi, I am new to it so apologize for the newbie question. I have Windows Vista. I installed JRE &amp;amp; JDK 6. I downloaded Resin. I am running *resin start* and getting the following error: *Resin/4.0.1 can't start -server '' for watchdog at 127.0.0.1:6600. WatchdogClient[]: watchdog start failed because of 'java.io.FileNotFoundException: error:'* Nothing useful in the logs. Could anyone please suggest why this may be happening? Thanks.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Cannot Start Resin on Vista</header>
    <date>Wed Sep 02 21:30:32 CEST 2009</date>
    <body>Hi Rom, 4.0.1 has a bug(Windows specific i believe) that's been fixed for 4.0.2 (not released yet) http://bugs.caucho.com/view.php?id=3628 According to the bug description  resin should be starting fine when no watchdog is running. You need to manually shutdown the watchdog to start resin again. For development purposes you can use console command java -jar lib/resin.jar console Thanks, Alex Hi, I am new to it so apologize for the newbie question. I have Windows Vista. I installed JRE &amp;amp; JDK 6. I downloaded Resin. I am running resin start and getting the following error: Resin/4.0.1 can't start -server '' for watchdog at 127.0.0.1:6600. WatchdogClient[]: watchdog start failed because of 'java.io.FileNotFoundException: error:' Nothing useful in the logs. Could anyone please suggest why this may be happening? Thanks.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Configuring servlet logging properly.</header>
    <date>Mon Aug 31 19:10:22 CEST 2009</date>
    <body>Hello. I have trouble to configure standard JDK logging resin uses. I have read the documentation many times and looked for examples, but in the end I'm still puzzled. I run a servlet under resin 4.0.1 with simple logging requirements. 1. All logging configuration should be possible in web.xml (and not global resin.xml) 2. resin (com.caucho.*) and my app's (com.foo.*) log records with INFO+ levels should go to apps log file, in xml. (this part i got working) 3. Only records with levels SEVERE should go to jvm-default.log which resides in global resin/log directory. I cannot achieve both (2) and (3) at the same time. My log settings in web.xml are: Tips, explanations or pointers welcome, best regards Martin Koziej</body>
  </mail>
  <mail>
    <header>[Resin-interest] specifying implementation class in CanDI XML</header>
    <date>Sat Aug 29 03:17:06 CEST 2009</date>
    <body>I try to use the addXXX bean configuration pattern where the parameter is an interface. Is there a way to somehow specify the actual class which should be added? Here is an example. Of course this doesn't work, Resin doesn't accept the "class" attribute.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] specifying implementation class in CanDI XML</header>
    <date>Sat Aug 29 03:23:06 CEST 2009</date>
    <body>It's declared inline like the following: That way, there's a consistent syntax for all bean instances. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] How to set checking interval for war redeploy?</header>
    <date>Fri Aug 28 00:42:12 CEST 2009</date>
    <body>I tried many ways to set dependency-check-interval to 2s in resin.xml without any success. Resin 4.0.1 still checks war file change by 60 s, which is the default value. I attached a diff file about one of the configurations. ps: The "&amp;lt;web-app-deploy&amp;gt; schema" section in the documentation still lists this attribute as "redeploy-check-interval" which is likely an obsolete name. See here: http://caucho.com/resin/reference/webapp-tags.xtp#web-app-deploy Also the section refers to "attributes" in the title, but it refers to elements in the scheme. I am not sure, but it seems that this section lists elements not attributes. Maybe some of them can be both attributes and elements. --- C:/resin/conf/resin.xml     Cs aug. 27 23:59:03 2009 +++ C:/resin/conf/resin.xml.orig        Sze ápr. 29 18:51:48 2009 @@ -38,7 +38,7 @@ - level='info' for production - 'fine' or 'finer' for development and troubleshooting @@ -96,9 +96,7 @@ - @@ -143,7 +141,7 @@ @@ -169,8 +167,6 @@ - - configures an explicit root web-app matching the - webapp's ROOT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to set checking interval for war redeploy?</header>
    <date>Fri Aug 28 17:50:13 CEST 2009</date>
    <body>http://caucho.com/resin/reference/webapp-tags.xtp#web-app-deploy It's dependency-check-interval in the web-app-deploy.  There is a minimum of 5s. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] How to set checking interval for war redeploy?</header>
    <date>Sat Aug 29 03:02:05 CEST 2009</date>
    <body>I changed the following line of the original configuration but it still doesn't have any effect: I tried both: and There is no error message in the log, but war and resin.xml changes are still noticed only after 60 s. I tried many ways to set dependency-check-interval to 2s in resin.xml without any success. Resin 4.0.1 still checks war file change by 60 s, which is the default value. I attached a diff file about one of the configurations. ps: The "&amp;lt;web-app-deploy&amp;gt; schema" section in the documentation still lists this attribute as "redeploy-check-interval" which is likely an obsolete name. See here: http://caucho.com/resin/reference/webapp-tags.xtp#web-app-deploy Also the section refers to "attributes" in the title, but it refers to elements in the scheme. I am not sure, but it seems that this section lists elements not attributes. Maybe some of them can be both attributes and elements. It's dependency-check-interval in the web-app-deploy.  There is a minimum of 5s. -- Scott --- C:/resin/conf/resin.xml     Cs aug. 27 23:59:03 2009 +++ C:/resin/conf/resin.xml.orig        Sze ápr. 29 18:51:48 2009 @@ -38,7 +38,7 @@ - level='info' for production - 'fine' or 'finer' for development and troubleshooting @@ -96,9 +96,7 @@ - @@ -143,7 +141,7 @@ @@ -169,8 +167,6 @@ - - configures an explicit root web-app matching the - webapp's ROOT</body>
  </mail>
  <mail>
    <header>[Resin-interest] java.net.SocketTimeoutException: Read timed out</header>
    <date>Wed Aug 26 21:06:07 CEST 2009</date>
    <body>I am trying to investigate why some of the requests from users are ending up on 2 different app-tier servers during the course of the session. I turned on fine logging for com.caucho.servlets.HmuxLoadBalanceServlet on the load balancer and noticed these errors in the logs. What could cause this and what settings in the conf would I need to fine tune? [11:43:18.114] [web-tier-&amp;gt;app-xxxxxx:154]java.net.SocketTimeoutException: Read timed out [11:43:18.114] java.net.SocketTimeoutException: Read timed out [11:43:18.114]  at java.net.SocketInputStream.socketRead0(Native Method) [11:43:18.114]  at java.net.SocketInputStream.read(SocketInputStream.java:129) [11:43:18.114]  at com.caucho.vfs.TcpStream.read(TcpStream.java:163) [11:43:18.114]  at com.caucho.vfs.ReadStream.readBuffer(ReadStream.java:1015) [11:43:18.114]  at com.caucho.vfs.ReadStream.read(ReadStream.java:313) [11:43:18.114]  at com.caucho.servlets.HmuxLoadBalanceServlet.handleRequest(HmuxLoadBalanceServlet.java:647) [11:43:18.114]  at com.caucho.servlets.HmuxLoadBalanceServlet.service(HmuxLoadBalanceServlet.java:224) [11:43:18.114]  at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:103) [11:43:18.114]  at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:181) [11:43:18.114]  at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:266) [11:43:18.114]  at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:269) [11:43:18.114]  at com.caucho.server.port.TcpConnection.run(TcpConnection.java:603) [11:43:18.114]  at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:721) [11:43:18.114]  at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:643) [11:43:18.114]  at java.lang.Thread.run(Thread.java:595) [11:43:46.225] load-balance for session efcRAZ1fbPAHC_c07ayns primary web-tier-&amp;gt;app-bloodraven connection failed. [11:47:10.778] load-balance for session eadLesk-QyalBehSgcyns primary web-tier-&amp;gt;app-bloodraven connection failed. [11:47:11.546] load-balance for session eadLesk-QyalBehSgcyns primary web-tier-&amp;gt;app-bloodraven connection failed. [11:47:11.546] load-balance for session eadLesk-QyalBehSgcyns primary web-tier-&amp;gt;app-bloodraven connection failed. [11:47:11.553] load-balance for session eadLesk-QyalBehSgcyns primary web-tier-&amp;gt;app-bloodraven connection failed. [11:47:11.604] load-balance for session eadLesk-QyalBehSgcyns primary web-tier-&amp;gt;app-bloodraven connection failed. [11:47:11.672] load-balance for session eadLesk-QyalBehSgcyns primary web-tier-&amp;gt;app-bloodraven connection failed. [11:47:11.690] load-balance for session eadLesk-QyalBehSgcyns primary web-tier-&amp;gt;app-bloodraven connection failed. [11:47:11.810] load-balance for session eadLesk-QyalBehSgcyns primary web-tier-&amp;gt;app-bloodraven connection failed. [11:47:12.368] load-balance for session eadLesk-QyalBehSgcyns primary web-tier-&amp;gt;app-bloodraven connection failed. Here are my load balance settings as of now.  I just added the load-balance-connect-timeout since I thought initially it was a connect timeout, but it seems to be a read timeout instead.  I will probably remove this to have it go back to 5s. Let me know if you need additional info. Thanks, Anthony</body>
  </mail>
  <mail>
    <header>[Resin-interest] Non-Hessian file store?</header>
    <date>Wed Aug 26 17:39:26 CEST 2009</date>
    <body>In Resin 4 &amp;lt;persistent-store type="file"&amp;gt; seems to use Hessian for serializing the session values. This causes some trouble for us since Hessian in some cases tries to access uninitialized Hibernate collections after the session/transaction is closed. Is there a way to revert Resin 4 to the old behaviour...? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Non-Hessian file store?</header>
    <date>Wed Aug 26 19:03:43 CEST 2009</date>
    <body>I've filed this as a bug.  We've always intended to allow for non- Hessian serialization, but just didn't put it back in after the refactoring. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Non-Hessian file store?</header>
    <date>Wed Aug 26 21:49:27 CEST 2009</date>
    <body>You put Hibernate objects into the session? jon http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Non-Hessian file store?</header>
    <date>Thu Aug 27 09:06:30 CEST 2009</date>
    <body>http://docs.jboss.org/hibernate/stable/core/reference/en/html/transactions.html#transactions-basics-apptx Jon Stevens wrote (2009-08-26 21:48): mailto:mj-li...@expertsystems.se</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Non-Hessian file store?</header>
    <date>Thu Aug 27 17:37:24 CEST 2009</date>
    <body>Yea, just cause Hibernate has that feature doesn't mean it is a good feature. =) You may want to consider the  DTO pattern... http://java.sun.com/blueprints/corej2eepatterns/Patterns/TransferObject.html I've found that over time, the pain of creating and dealing with DTO's is mitigated by the cleanliness of it and you don't run into weird issues like you are running into... jon http://docs.jboss.org/hibernate/stable/core/reference/en/html/transactions.html#transactions-basics-apptx http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Non-Hessian file store?</header>
    <date>Thu Aug 27 18:26:34 CEST 2009</date>
    <body>Well, there are different opinions about DTOs too. I assume you've heard (Spring developer) Rod Johnsons take on the matter...? Jon Stevens wrote (2009-08-27 17:35): http://java.sun.com/blueprints/corej2eepatterns/Patterns/TransferObject.html mailto:mj-li...@expertsystems.se http://docs.jboss.org/hibernate/stable/core/reference/en/html/transactions.html#transactions-basics-apptx mailto:mj-li...@expertsystems.se</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Non-Hessian file store?</header>
    <date>Fri Aug 28 00:55:04 CEST 2009</date>
    <body>I haven't heard Rod's take on the matter (got url?), but then again I'm also not having problems with Hessian doing strange things to my objects. &amp;lt;wink jon http://java.sun.com/blueprints/corej2eepatterns/Patterns/TransferObject.html http://docs.jboss.org/hibernate/stable/core/reference/en/html/transactions.html#transactions-basics-apptx http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] multiple requests to same url not concurrent?</header>
    <date>Tue Aug 25 18:14:59 CEST 2009</date>
    <body>I am still test-driving resin 3.1.9 open source on my Windows desktop. It seems to me that if multiple concurrent requests are made to the same URL then Resin will only fulfill one request at a time.  Is this intentional?  Is there a reason for it?  Is this related to something in the config? More information about my tests follows: I tried this with straight-java servlets and with php scripts using Quercus.  The PHP script test is the most straightforward: My script (8seconds.php): If I load http://localhost:8080/toy-php/8seconds.php in two browser windows at as close to the same time as possible, I get: [Window 1] Start: 11:09:09 Wait 8 seconds... End: 11:09:17 [Window 2] Start: 11:09:17 Wait 8 seconds... End: 11:09:25 So, in Window 2, it didn't even start running until Window 1 was done. However, if I add ?foo=bar onto the end of the URL in Window 1, and load both at as close to the same time as possible, I get: [Window 1] Start: 11:10:54 Wait 8 seconds... End: 11:11:02 [Window 2] Start: 11:10:55 Wait 8 seconds... End: 11:11:03 They ran concurrently.  Since both are the same servlet (quercus) and php script, it seems to me that this is happening at the URL level. Haven't tried doing two different POSTs to the same URL yet... Michael</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] multiple requests to same url not concurrent?</header>
    <date>Tue Aug 25 20:07:15 CEST 2009</date>
    <body>Just double checked (4.0) and it's working fine. Since browsers aren't supposed to open more than two connections to the same site at a time, you might be hitting that limitation. -- Scott http://localhost:8080/toy-php/8seconds.php in two browser http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] multiple requests to same url not concurrent?</header>
    <date>Tue Aug 25 21:50:41 CEST 2009</date>
    <body>That's it!  It's the browser! Somehow in 7 years of web application development, I've never noticed or learned about this behavior in any other context--but it's there! I followed up with tests using the same php script on a LAMP stack, and it exhibited the same non-concurrent behavior (hence, it wasn't just resin). Then, I tried the test where the requests were done in two different browsers, and they did load concurrently, both with LAMP and resin/quercus. Thanks for the tip! Michael</body>
  </mail>
  <mail>
    <header>[Resin-interest] Security Manager and JSPs</header>
    <date>Tue Aug 25 10:14:03 CEST 2009</date>
    <body>Hi! We are trying to use SecurityManager with Resin 3.1.9 and run into the following problem: CodeSource.getLocation() returns null for compiled JSPs. This means that we cannot use a specific codebase in grant clause in our policy file, for example: ...some jsp-specific permissions Instead, we have to use a universal grant clause: ..some jsp-specific permissions. Unfortunately, these will be applied to all code!!! Is there a way to make JSPs have a proper CodeSource? Cheers, Kai</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Security Manager and JSPs</header>
    <date>Thu Aug 27 08:14:18 CEST 2009</date>
    <body>Hi, Is it really so that nobody uses JSPs and SecurityManager with Resin? :) Could this problem be solved by pre-compiling jsps to Java classes? Now we just let Resin handle the compilation from directories under WEB-INF. Cheers, Kai 2009/8/25 Kai Virkki &amp;lt;kai.vir...@gmail.com&amp;gt;:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Security Manager and JSPs</header>
    <date>Thu Aug 27 09:10:56 CEST 2009</date>
    <body>Hi, The only server where we have to limit such things is still using a Resin 2.1.17, but in case it helps, that's how we do it: We configure the application to have the work directory in a specifc place (.../ServerX/work/) and then... ... global restricted permissions for everyone. ... all permissions for core classes and Resin classes. // // Give a specific web-app additional permissions. // permission java.io.FilePermission permission java.io.FilePermission permission java.io.FilePermission permission java.io.FilePermission permission java.io.FilePermission In this case the App uses an in-memory database that is stored inside WEB-INF/db, so no network access is required. For the JSPs, codeBase .class files are generated. But as I've said, that is a 2.1.17 installation so some things might have changed for Resin 3.X. I remember it was quite a pain of trial and error to get to this in the first place, so that's why I haven't updated it in a while :). D. Kai Virkki escribió:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Security Manager and JSPs</header>
    <date>Fri Aug 28 18:07:18 CEST 2009</date>
    <body>Well, the security manager kills performance, so we generally discourage it.  I've added a bug report, though. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Class load order in a WAR</header>
    <date>Mon Aug 24 20:58:55 CEST 2009</date>
    <body>In a war file, why can't I seem to replace classes in a WEB-INF/lib jar file simply by creating them in WEB-INF/classes?  Do the classes in WEB-INF/lib override WEB-INF/classes?  Is there a way to change this order? I'm including a third-party jar that has some undesirable behavior in one class.  I'd like to replace it with my own implementation.  What's the easiest way to do this? FWIW, I'm integrating JSR299 into Resteasy, but Resteasy doesn't currently have the right hooks. Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Class load order in a WAR</header>
    <date>Mon Aug 24 21:18:59 CEST 2009</date>
    <body>The order is decided by the &amp;lt;class-loader&amp;gt; configuration, with the default defined in app-default.xml.  Just checking on it, it looks like the WEB-INF/classes should be searched first. It's not exactly an override, it's just a first-found search. The WEB-INF/classes should work.  You could also modify the &amp;lt;class- loader&amp;gt; in app-default.xml (although that's generally not recommended.) Very cool.  Although, the main annotations are changing because of JSR-330.  This spec is pretty rough on early adopters. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Class load order in a WAR</header>
    <date>Mon Aug 24 23:05:00 CEST 2009</date>
    <body>Oops, heh.  Apparently I had overlooked my own debug message; it was working.  Thanks. I saw that in the svn history, no worries.  @Default and @Qualifier make more sense to me than @Current and @BindingType anyways. Jeff</body>
  </mail>
  <mail>
    <header>[Resin-interest] Limit data rate?</header>
    <date>Sun Aug 23 07:45:42 CEST 2009</date>
    <body>Is there any way to configure resin to limit the rate at which it will send bits per resource? I have bandwidth limits on my server, and would be interested in slowing down the downloads of files (but not necessarily servlets). TIA, Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Limit data rate?</header>
    <date>Sun Aug 23 08:20:43 CEST 2009</date>
    <body>I wouldn't use Resin for that... I'd use apache2... and something like this... http://codee.pl/cband.html jon http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Limit data rate?</header>
    <date>Sun Aug 23 08:51:51 CEST 2009</date>
    <body>Thanks for the suggestion, but it's not really very helpful. I use Resin, and not Apache. http://codee.pl/cband.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Limit data rate?</header>
    <date>Sun Aug 23 18:44:17 CEST 2009</date>
    <body>If you want to limit the speed of a download, then write a filter to intercept the download and send out the data. It sends out X bytes of the file at a time and then waits X seconds before it sends another X bytes of the file and waits X seconds. read send wait read send wait ... ... jon http://codee.pl/cband.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Limit data rate?</header>
    <date>Sun Aug 23 19:13:16 CEST 2009</date>
    <body>You could also do this with an OutputStream. -- Serge Knystautas PrestoSports If you want to limit the speed of a download, then write a filter to intercept the download and send out the data. It sends out X bytes of the file at a time and then waits X seconds before it sends another X bytes of the file and waits X seconds. read send wait read send wait ... ... jon Thanks for the suggestion, but it's not really very helpful. I use Resin, and not Apache. http://codee.pl/cband.html will http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Limit data rate?</header>
    <date>Sun Aug 23 20:13:49 CEST 2009</date>
    <body>Hey Serge! You pretty much *have* to do this with an Input/OutputStream... jon http://codee.pl/cband.html http://codee.pl/cband.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Metrics</header>
    <date>Thu Aug 20 22:43:28 CEST 2009</date>
    <body>Hi, What metrics does Resin offer to measure system health? I'd like to store some data about system info for measurement and capacity planning. The problem is that the server with resin doesn't seem to show a real information. I used to see CPU as 3%, load as 0,8. How can I found out the possible bottlenecks in this server? Is there a way to get know many concurrent requests are running at a given time? PS: I know that we discover the requests ceiling with stress test tools, therefore I still like to measure system health. With actual system info it doesn't seem to correspond to the reality. Thank you, Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Metrics</header>
    <date>Thu Aug 20 23:25:44 CEST 2009</date>
    <body>Hi Ronan, Luckily Emil has recently published a blog entry right on the topic: http://blog.caucho.com/?p=219 --Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Metrics</header>
    <date>Fri Aug 21 22:36:33 CEST 2009</date>
    <body>Hi Alex, Perfect. Thank you very much, Ronan Alex escreveu: Hi Ronan, Luckily Emil has recently published a blog entry right on the topic: http://blog.caucho.com/?p=219 --Alex Hi, What metrics does Resin offer to measure system health? I'd like to store some data about system info for measurement and capacity planning. The problem is that the server with resin doesn't seem to show a real information. I used to see CPU as 3%, load as 0,8. How can I found out the possible bottlenecks in this server? Is there a way to get know many concurrent requests are running at a given time? PS: I know that we discover the requests ceiling with stress test tools, therefore I still like to measure system health. With actual system info it doesn't seem to correspond to the reality. Thank you, Ronan</body>
  </mail>
  <mail>
    <header>[Resin-interest] &amp;lt;min-free-memory&amp;gt;</header>
    <date>Thu Aug 20 17:23:25 CEST 2009</date>
    <body>What happened to the min-free-memory config tag in Resin 4? Still available? Where to put it? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] &amp;lt;min-free-memory&amp;gt;</header>
    <date>Thu Aug 20 17:30:25 CEST 2009</date>
    <body>Hi Mattias, It has changed to &amp;lt;memory-free-min&amp;gt;. Emil</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] &amp;lt;min-free-memory&amp;gt;</header>
    <date>Thu Aug 20 17:38:26 CEST 2009</date>
    <body>Emil Ong wrote (2009-08-20 17:28): --</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin 4 &amp;lt;socket-policy-file&amp;gt;</header>
    <date>Mon Aug 17 06:30:36 CEST 2009</date>
    <body>In resin 3.x there was &amp;lt;socket-policy-file&amp;gt; config, where do I put that in 4.x? Here is the full setting from 3.x that worked great. Right after cluster. I see that SocketPolicyProtocol is still in the resin 4.x source, just not sure how to set up config. Actionscript will not talk to  resin w/o it. tia, .V</body>
  </mail>
  <mail>
    <header>[Resin-interest] Tapestry on resin...</header>
    <date>Fri Aug 14 01:37:12 CEST 2009</date>
    <body>Hello, I need to work with tapestry on the resin application server, I am really new to Resin and I am getting this error. java.lang.RuntimeException: Exception constructing service 'TemplateParser': Error invoking constructor org.apache.tapestry5.internal.services.TemplateParserImpl(Map, boolean) (at TemplateParserImpl.java:50) via org.apache.tapestry5.internal.services.InternalModule.bind(ServiceBinder) (at InternalModule.java:65) (for service 'TemplateParser'): com.caucho.xml.stream.XMLInputFactoryImpl cannot be cast to org.codehaus.stax2.XMLInputFactory2 at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:78) at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.createObject(JustInTimeObjectCreator.java:57) at $TemplateParser_12315f2e17e.delegate($TemplateParser_12315f2e17e.java) at $TemplateParser_12315f2e17e.parseTemplate($TemplateParser_12315f2e17e.java) at org.apache.tapestry5.internal.services.ComponentTemplateSourceImpl.parseTemplate(ComponentTemplateSourceImpl.java:151) at org.apache.tapestry5.internal.services.ComponentTemplateSourceImpl.getTemplate(ComponentTemplateSourceImpl.java:135) at $ComponentTemplateSource_12315f2e17d.getTemplate($ComponentTemplateSource_12315f2e17d.java) Any suggestions? Thanks in advance. Favalos. _________________________________________________________________ Con Windows Live, puedes organizar, editar y compartir tus fotos. http://www.microsoft.com/mexico/windows/windowslive/products/photo-gallery-edit.aspx</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tapestry on resin...</header>
    <date>Fri Aug 14 01:59:06 CEST 2009</date>
    <body>Fernando, It seems that tapestry expects a particular parser implementation. You can force one by supplying a system property The &amp;lt;system-property&amp;gt; tag could also go under &amp;lt;resin&amp;gt;, &amp;lt;cluster&amp;gt; or Regards, Alex org.codehaus.stax2.XMLInputFactory2 Hello, I need to work with tapestry on the resin application server, I am really new to Resin and I am getting this error. java.lang.RuntimeException: Exception constructing service 'TemplateParser': Error invoking constructor org.apache.tapestry5.internal.services.TemplateParserImpl(Map, boolean) (at TemplateParserImpl.java:50) via org .apache.tapestry5.internal.services.InternalModule.bind(ServiceBinder) (at InternalModule.java:65) (for service 'TemplateParser'): com.caucho.xml.stream.XMLInputFactoryImpl cannot be cast to org.codehaus.stax2.XMLInputFactory2 at org .apache .tapestry5 .ioc .internal .services .JustInTimeObjectCreator .obtainObjectFromCreator(JustInTimeObjectCreator.java:78) at org .apache .tapestry5 .ioc .internal .services .JustInTimeObjectCreator.createObject(JustInTimeObjectCreator.java:57) at $TemplateParser_12315f2e17e.delegate($TemplateParser_12315f2e17e.java) at $ TemplateParser_12315f2e17e .parseTemplate($TemplateParser_12315f2e17e.java) at org .apache .tapestry5 .internal .services .ComponentTemplateSourceImpl .parseTemplate(ComponentTemplateSourceImpl.java:151) at org .apache .tapestry5 .internal .services .ComponentTemplateSourceImpl .getTemplate(ComponentTemplateSourceImpl.java:135) at $ ComponentTemplateSource_12315f2e17d .getTemplate($ComponentTemplateSource_12315f2e17d.java) Any suggestions? Thanks in advance. Favalos. Con Windows Live, puedes organizar, editar y compartir tus fotos.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tapestry on resin...</header>
    <date>Fri Aug 14 11:15:47 CEST 2009</date>
    <body>Alex schrieb: If they really want a particular implementation, they should not be using the JAXP mechanism at all, but directly instantiate their implementation class. But wouldn't that set the property for the entire JVM instead of for one particular webapp/context? And likewise this? Which may create problems for other apps? Nabble - Tomcat - User - Problem with system property http://www.nabble.com/Problem-with-system-property-td24389677.html -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tapestry on resin...</header>
    <date>Fri Aug 14 18:25:46 CEST 2009</date>
    <body>Not if you supply your own context aware instance of Properties using System.setProperties(Properties). That isolates the apps/hosts/cluster from each other and they can have their own sets of properties. --Alex http://www.nabble.com/Problem-with-system-property-td24389677.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tapestry on resin...</header>
    <date>Fri Aug 28 12:16:30 CEST 2009</date>
    <body>Alex schrieb: What is a context-aware instance of Properties? How do I get one? Wouldn't I rather need a context-aware instance of System (which I don't know about)? I just tested this doing System.getProperty("milu.test") in a JSP in webapp xxx and then deployed webapp yyy whose ServletContextListener does System.setProperties(props) where props contains "milu.test" set to a different value. That affects not only webapp yyy, but also webapp xxx, which now shows the value set by xxx. How would I use System.setProperties(props) without affecting the entire JVM? -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tapestry on resin...</header>
    <date>Fri Aug 28 13:10:38 CEST 2009</date>
    <body>Michael Ludwig schrieb: The last clause should read: Which now shows the value set by yyy. -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tapestry on resin...</header>
    <date>Fri Aug 28 17:37:11 CEST 2009</date>
    <body>If you're using Resin, you already have one.  Resin's system properties depend on the current context. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tapestry on resin...</header>
    <date>Fri Aug 28 19:02:26 CEST 2009</date>
    <body>Scott Ferguson schrieb: I deployed one webapp doing System.setProperties(props) in contextInitialized(ServletContextEvent sce) to /yyy in Resin 4.0.0. I then changed the property value and redeployed to /yyy2. Now both /yyy and /yyy2 show the new property value. They do not seem to be isolated regarding System properties. I'm probably missing something obvious. -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tapestry on resin...</header>
    <date>Fri Aug 28 19:08:28 CEST 2009</date>
    <body>You can't change the Properties object itself, or you'll override Resin's contextual properties.  You need to set the properties using the existing object. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tapestry on resin...</header>
    <date>Fri Aug 28 19:33:31 CEST 2009</date>
    <body>Scott Ferguson schrieb: Thanks! That works fine on Resin :-) Not on Tomcat, though. But we knew that. As you guessed, I foolishly did: Which, of course, went far beyond making one small change to the properties and caused a considerable general mess. I should have done: -- Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Tapestry on resin...</header>
    <date>Fri Aug 14 20:22:03 CEST 2009</date>
    <body>Hi Alex and Michael I added the jar files to resin, and I set the the system-properties in the app-default.xml file. And it is working now!!! I think it is working, cause, I dont have a resin-web.xml file in my war file, rigth? Thanks a lots for your help. Fernando Avalos. Date: Fri, 14 Aug 2009 09:23:49 -0700 Subject: Re: [Resin-interest] Tapestry on resin... To: General Discussion for the Resin application server Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes Not if you supply your own context aware instance of Properties using System.setProperties(Properties). That isolates the apps/hosts/cluster from each other and they can have their own sets of properties. --Alex http://www.nabble.com/Problem-with-system-property-td24389677.html http://maillist.caucho.com/mailman/listinfo/resin-interest _________________________________________________________________ Gracias Messenger por estos 10 años www.aniversariomessenger.com.mx</body>
  </mail>
  <mail>
    <header>[Resin-interest]  Error Handling on Per Directory Basis?</header>
    <date>Thu Aug 06 23:55:30 CEST 2009</date>
    <body>I've got a sub folder under a main folder that handles a mobile version of our site. In resin.conf I've got For the main site, but what I need to do is have a different location for the mobile site: (something like) In apache I'd put it in a &amp;lt;Directory&amp;gt; tag or put a line in an apache .htaccess file in that folder, but that won't work here.  Is there an equivalent tag or method for Resin? Thanks in advance! (PS - running resin 2.1.4 - yeah I know, it's old, but it works great!) -- View this message in context: http://www.nabble.com/Error-Handling-on-Per-Directory-Basis--tp24855159p24855159.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Non-interpreted EL expressions?</header>
    <date>Thu Aug 06 11:14:58 CEST 2009</date>
    <body>Is there a way to make Resin not try interpreting EL expressions in JSP pages (while still using fast jstl)? We have custom tags with string attributes which are evaluated as EL expressions using the Apache Taglibs implementation. After updating to 4.0, Resin refuses to treat these attributes as Strings. Example: When adding &amp;lt;rtexprvalue&amp;gt;true&amp;lt;/rtexprvalue&amp;gt; to the .tld, Resin will evaluate the expression and pass the String value of the result as the attribute of the tag. The tag will then try to evaluate this String value as if it was an EL expression (using the Apache) implementation, which of course does not give the expected result. Do we have to change the implementation of all the tags to use com.caucho.el.Expr instead, or is there another way? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Non-interpreted EL expressions?</header>
    <date>Thu Aug 06 17:48:42 CEST 2009</date>
    <body>I've added a bug report and will need to check on that.  Some of the Resin 4.0 was changed to pass the JSP TCK, and that looks like one of the cases we updated. But taglibs really shouldn't be evaluating EL itself any more, since EL is integrated with JSP.  If you need a deferred expression, you should be using javax.servlet.jsp.el.ValueExpression as the attribute parameter type. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] M2 and resin-quercus 4.01</header>
    <date>Wed Aug 05 12:44:56 CEST 2009</date>
    <body>Could someone responsible for it add the 4.0.1 (most recent) resin-quercus pom to the Maven repository? Thanks! Sebastiaan</body>
  </mail>
  <mail>
    <header>[Resin-interest] @Named doesn't work in 4.0.1</header>
    <date>Wed Aug 05 01:33:44 CEST 2009</date>
    <body>Another bug report:  It appears that @Named isn't working in 4.0.1. When I create an @ApplicationScoped @Named("foo") object, it doesn't seem to be available in EL. This is also demonstrated by the index.jsp of the sample app: http://code.google.com/p/scratchmonkey/source/browse/#svn/resin4/resource_injection Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] @Named doesn't work in 4.0.1</header>
    <date>Wed Aug 05 17:39:48 CEST 2009</date>
    <body>http://code.google.com/p/scratchmonkey/source/browse/#svn/resin4/ Hmm.  We did have issues with EJBs, but the standard beans are passing our tests.  There much be something that's missing from our qa. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.1 doesn't like Hibernate</header>
    <date>Wed Aug 05 01:16:39 CEST 2009</date>
    <body>Resin 4.0.1 doesn't seem to work with Hibernate anymore.  When Hibernate is configured as the JPA provider, attempts to inject an EntityManager produce this: InjectManager[] bind(EntityManager,[...@javax.enterprise.inject.current()]) -&amp;gt; none test.EchoService.em: javax.enterprise.inject.UnsatisfiedResolutionException: Can't find a bean for 'interface javax.persistence.EntityManager' because no beans implementing that class have been registered with the injection Manager. However there are no error messages on startup; it appears that Hibernate initializes normally. There is a test case here: http://code.google.com/p/scratchmonkey/source/browse/#svn/resin4/resource_injection If you comment out "&amp;lt;provider&amp;gt;org.hibernate.ejb.HibernatePersistence&amp;lt;/provider&amp;gt;" in persistence.xml, the injection works.  If you leave it, you can't inject.  If you use @PersistenceContext instead of @Current, it complains that the persistence unit cannot be found. Any ideas or workarounds? Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.1 doesn't like Hibernate</header>
    <date>Wed Mar 17 17:02:17 CET 2010</date>
    <body>Related: If you follow this http://wiki.caucho.com/Hibernate with Resin 4.0.4 and Hibernate 3.3.2, you get the "unknown @PersistenceContext" error you mention.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.1 doesn't like Hibernate</header>
    <date>Wed Mar 17 17:40:05 CET 2010</date>
    <body>Resin 4.0.1 doesn't seem to work with Hibernate anymore Related: If you follow this http://wiki.caucho.com/Hibernate with Resin 4.0.4 and Hibernate 3.3.2, you get the "unknown @PersistenceContext" error you mention.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.1 doesn't like Hibernate</header>
    <date>Wed Mar 17 18:52:54 CET 2010</date>
    <body>http://wiki.caucho.com/Hibernate with Resin That's fixed in 4.0.5, although it's more correct to use "unitName" for the @PersistenceContext because "name" is supposed to be the JNDI name. So @PersistenceContext(unitName="test") -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] WordPress and Resin 4.0.1</header>
    <date>Tue Aug 04 04:25:51 CEST 2009</date>
    <body>Greetings, I was wondering if anybody had gotten WordPress and Resin Pro 4.0.1 working together. I'm most of the way there, but there's apparently one piece missing. The installation went fine. I can do a direct MySQL import of an existing blog into the database and all of the content is displayed and browsable, but I can't actually log in to wp-admin. It accepts my username and password, the page flashes for a sec, and I'm back to an empty login form with no error. For reference, this is my super basic Resin config for it: Am I missing something obvious? -Jamie</body>
  </mail>
  <mail>
    <header>[Resin-interest]  multipart/form uploads not working</header>
    <date>Mon Aug 03 04:48:58 CEST 2009</date>
    <body>Our PHP webapp deployed in resin (3.2.1) has several forms to upload files using multipart/form. In the conf file resin.xml in the node we have: we also have the same in the webapps web.xml file, but these forms either upload nothing, or upload a file of 0 bytes. Permissions on temp and destination directories are world write-able. Does anyone have an idea as to what could be causing this? cheers b -- View this message in context: http://www.nabble.com/multipart-form-uploads-not-working-tp24784621p24784621.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Can't seem to get character encoding right.</header>
    <date>Wed Jul 29 03:20:41 CEST 2009</date>
    <body>I'm running Resin 4.0 on Mac OS X. I have a .jsp file encoded as UTF-8, and I pass -Dfile.encoding=utf-8 to the jvm. At the top of my JSPs, I have I've verified that the JSP thinks the request and response encodings are UTF-8 with: org.apache.log4j.Logger.getLogger("com.latencyzero").warn("Encoding: org.apache.log4j.Logger.getLogger("com.latencyzero").warn("resp But, the copyright symbol in my source file, which looks fine in my UTF-8 aware text editor, renders as a capital A with a grave accent, and the copyright symbol. What aspect of the encoding am I forgetting? TIA, Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can't seem to get character encoding right.</header>
    <date>Wed Jul 29 23:07:54 CEST 2009</date>
    <body>So, I created two dirt-simple files, identical in content, one ending in .jsp, one ending in .html. I have no filters or other processing in my webapp. Resin 4.0 seems to re-encode the UTF-8 copyright symbol, and I get four bytes "C3 82 C2 A9", when I should have two: "C2 A9", but ony in the .jsp, not in the .html. I figure at some point a conversion is happening where something is having the wrong encoding applied. Any suggestions? http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can't seem to get character encoding right.</header>
    <date>Wed Jul 29 23:25:08 CEST 2009</date>
    <body>Try adding either of these: One of them might do the trick -Knut [ language="java" ] [ extends="package.class" ] [ session="true|false" ] [ buffer="none|8kb|sizekb" ] [ autoFlush="true|false" ] [ isThreadSafe="true|false" ] [ info="text" ] [ errorPage="relativeURL" ] [ contentType="mimeType [ ; charset=characterSet ]" | "text/html ; charset=ISO-8859-1" ] [ isErrorPage="true|false" ] [ pageEncoding="characterSet |ISO-8859-1" ] http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can't seem to get character encoding right.</header>
    <date>Wed Jul 29 23:29:07 CEST 2009</date>
    <body>Gah! Thank you! I feel like I should've known this, or did know it once upon a time and just forgot. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can't seem to get character encoding right.</header>
    <date>Wed Jul 29 23:42:14 CEST 2009</date>
    <body>The charset in the contentType is the default value of the pageEncoding.  So it shouldn't matter. You can check the parsing, by the way, by looking at the generated *.java file.  Those characters will be the parsed unicode values. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can't seem to get character encoding right.</header>
    <date>Wed Jul 29 23:54:24 CEST 2009</date>
    <body>Are you saying that by only setting the content type, it should've also set the page encoding? For sure, that wasn't happening. Also, I'm trying to set the page encoding via the web.xml, with this: But so far it's not working. Still troubleshooting, though (might just need to restart resin). http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can't seem to get character encoding right.</header>
    <date>Wed Jul 29 23:56:23 CEST 2009</date>
    <body>Oh! I just needed to touch the .jsp page so it would recompile. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can't seem to get character encoding right.</header>
    <date>Wed Jul 29 23:58:26 CEST 2009</date>
    <body>I may be out of date, last time I used JSPs was in 2005 or so. Back then the default assumed page encoding was *ISO-8859-1*., not the same as contentType. The spec (JSP 1.2) http://java.sun.com/products/jsp/syntax/1.2/syntaxref12.pdf also indicated that (near the top of page 18. JSP 2.0 also indicates the same: http://java.sun.com/products/jsp/syntax/2.0/syntaxref2010.html#1001361 -Knut http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Having several resin-server behind an apache	webserver-instance</header>
    <date>Tue Jul 28 16:54:59 CEST 2009</date>
    <body>Hi, Is it possible to have several resin-server behind an apache webserver-instance? And if so is it possible to have some sort of load-balancing (e.g. with mod_caucho)? Kind regards, Martin "The information in this e-mail and in any attachments is confidential and intended solely for the attention and use of the named addressee(s). This information may be subject to legal, professional or other privilege and further distribution of it is strictly prohibited without our authority. If you are not the intended recipient, you are not authorised to and must not disclose, copy, distribute, or retain this message or any part of it, and should notify us immediately. This footnote also confirms that this email has been automatically scanned for the presence of computer viruses, profanities and certain file types."</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Having several resin-server behind an apache	webserver-instance</header>
    <date>Thu Jul 30 00:31:39 CEST 2009</date>
    <body>Hi, Is it possible to have several resin-server behind an apache webserver-instance? Certainly.  Resin's always allowed multiple servers. And if so is it possible to have some sort of load-balancing (e.g. with mod_caucho)? mod_caucho automatically load balances.  The load balancing when using Resin as the load balancer is more sophisticated, but mod_caucho can load balance as well. -- Scott Kind regards, Martin "The information in this e-mail and in any attachments is confidential and intended solely for the attention and use of the named addressee(s). This information may be subject to legal, professional or other privilege and further distribution of it is strictly prohibited without our authority. If you are not the intended recipient, you are not authorised to and must not disclose, copy, distribute, or retain this message or any part of it, and should notify us immediately. This footnote also confirms that this email has been automatically scanned for the presence of computer viruses, profanities and certain file types."</body>
  </mail>
  <mail>
    <header>[Resin-interest] Unavailability problem</header>
    <date>Fri Jul 24 16:22:54 CEST 2009</date>
    <body>Hello. We have 3 servers in cluster running resin with load-balance, and we are having an unavailability problem. When one of the servers on cluster becomes slow, all the system become slow, even if the others servers are not overloaded. Is anyone already had this problem, and solved? Thanks</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Unavailability problem</header>
    <date>Fri Jul 24 17:54:12 CEST 2009</date>
    <body>Do you have any clustering enabled?  If the servers are independent, then there shouldn't be a difference.  If you have a clustered cache or clustered sessions, it's possible that the other servers are waiting for the slow server to respond to a cluster request. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Unavailability problem</header>
    <date>Fri Jul 24 18:50:22 CEST 2009</date>
    <body>Scott Ferguson escreveu: Thanks for the reply Scott, How could I know what kind of cluster is the server? I mean, what is the parameter in the config file that I should search to find the answer? http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Unavailability problem</header>
    <date>Sat Jul 25 02:44:24 CEST 2009</date>
    <body>Are you using distributed sessions?  Or something similar? -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Unavailability problem</header>
    <date>Mon Jul 27 18:50:24 CEST 2009</date>
    <body>Scott Ferguson escreveu: Yes, we are using distributed sessions. This means we have clustered sessions right? By the way, this cause you suggested, that others servers are waiting for the slow server to response, have any solution? http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4 snapshot this week?</header>
    <date>Thu Jul 23 22:35:30 CEST 2009</date>
    <body>Hey, Scott, are we going to see that snapshot this week with the fixes to the JSP-recompile bug? TIA! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] replace XMLOutputFactory implementation class in resin 3.1.8</header>
    <date>Wed Jul 22 22:35:07 CEST 2009</date>
    <body>Those parameters are set on the command line when starting resin, and it works. I downloaded resin 4.0.0 and found that trying to configure system properties in resin.xml still does not work. Maybe it is a deprecated feature already in resin to configure system properties with &amp;lt;system-property&amp;gt; element? Thanks. NOTICE: This e-mail message is for the sole use of the intended recipient(s) and may contain confidential and privileged information.  Any unauthorized review, use, disclosure or distribution is prohibited. Nothing contained in this message or in any attachment shall constitute a contract or electronic signature under the Electronic Signatures in Global and National Commerce Act, any version of the Uniform Electronic Transactions Act or any other statute governing electronic transactions. ----- Original Message ----- To: resin-interest@caucho.com Sent: Wednesday, July 22, 2009 1:27:44 PM GMT -06:00 US/Canada Central Subject: [Resin-interest] replace XMLOutputFactory implementation class in resin 3.1.8 Hi, I need to replace the com.caucho.xml.stream.XMLOutputFactoryImpl with woodstox stax implementation version, since it seems that the com.caucho.xml.stream.XMLStreamWriterImpl class created from com.caucho.xml.stream.XMLOutputFactoryImpl has bugs in it and cannot build good xml (I notice that one namespace in the expected xml is not defined). Is there a way to do such replacement in resin 3.1.8? I tried to put in resin.conf. It did not work. Somehow the EnvironmentClassLoader for the web app still grabs the resin implementation of stax. Please help. Thanks. NOTICE: This e-mail message is for the sole use of the intended recipient(s) and may contain confidential and privileged information.  Any unauthorized review, use, disclosure or distribution is prohibited. Nothing contained in this message or in any attachment shall constitute a contract or electronic signature under the Electronic Signatures in Global and National Commerce Act, any version of the Uniform Electronic Transactions Act or any other statute governing electronic transactions.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] replace XMLOutputFactory implementation class in resin 3.1.8</header>
    <date>Wed Jul 22 22:50:09 CEST 2009</date>
    <body>By the way, the woodstox xml code reads and writes xml stream with no problem, correctly processing the instream and generating the correct outstream. I met similar xml processing problems a couple of years ago with resin. Those who got the same headache can try this approach to replace the default resin xml/stax implementation with woodstox implementation. It would be awesome if the future resin code handling xml/stax matches its counterparts. This problem cost me quite some development time. Thanks. NOTICE: This e-mail message is for the sole use of the intended recipient(s) and may contain confidential and privileged information.  Any unauthorized review, use, disclosure or distribution is prohibited. Nothing contained in this message or in any attachment shall constitute a contract or electronic signature under the Electronic Signatures in Global and National Commerce Act, any version of the Uniform Electronic Transactions Act or any other statute governing electronic transactions. ----- Original Message ----- To: "General Discussion for the Resin application server" Sent: Wednesday, July 22, 2009 3:32:52 PM GMT -06:00 US/Canada Central Subject: Re: [Resin-interest] replace XMLOutputFactory implementation class in resin 3.1.8 Those parameters are set on the command line when starting resin, and it works. I downloaded resin 4.0.0 and found that trying to configure system properties in resin.xml still does not work. Maybe it is a deprecated feature already in resin to configure system properties with &amp;lt;system-property&amp;gt; element? Thanks. NOTICE: This e-mail message is for the sole use of the intended recipient(s) and may contain confidential and privileged information.  Any unauthorized review, use, disclosure or distribution is prohibited. Nothing contained in this message or in any attachment shall constitute a contract or electronic signature under the Electronic Signatures in Global and National Commerce Act, any version of the Uniform Electronic Transactions Act or any other statute governing electronic transactions. ----- Original Message ----- To: resin-interest@caucho.com Sent: Wednesday, July 22, 2009 1:27:44 PM GMT -06:00 US/Canada Central Subject: [Resin-interest] replace XMLOutputFactory implementation class in resin 3.1.8 Hi, I need to replace the com.caucho.xml.stream.XMLOutputFactoryImpl with woodstox stax implementation version, since it seems that the com.caucho.xml.stream.XMLStreamWriterImpl class created from com.caucho.xml.stream.XMLOutputFactoryImpl has bugs in it and cannot build good xml (I notice that one namespace in the expected xml is not defined). Is there a way to do such replacement in resin 3.1.8? I tried to put in resin.conf. It did not work. Somehow the EnvironmentClassLoader for the web app still grabs the resin implementation of stax. Please help. Thanks. NOTICE: This e-mail message is for the sole use of the intended recipient(s) and may contain confidential and privileged information.  Any unauthorized review, use, disclosure or distribution is prohibited. Nothing contained in this message or in any attachment shall constitute a contract or electronic signature under the Electronic Signatures in Global and National Commerce Act, any version of the Uniform Electronic Transactions Act or any other statute governing electronic transactions.</body>
  </mail>
  <mail>
    <header>[Resin-interest] replace XMLOutputFactory implementation class in	resin 3.1.8</header>
    <date>Wed Jul 22 20:28:34 CEST 2009</date>
    <body>Hi, I need to replace the com.caucho.xml.stream.XMLOutputFactoryImpl with woodstox stax implementation version, since it seems that the com.caucho.xml.stream.XMLStreamWriterImpl class created from com.caucho.xml.stream.XMLOutputFactoryImpl has bugs in it and cannot build good xml (I notice that one namespace in the expected xml is not defined). Is there a way to do such replacement in resin 3.1.8? I tried to put in resin.conf. It did not work. Somehow the EnvironmentClassLoader for the web app still grabs the resin implementation of stax. Please help. Thanks. NOTICE: This e-mail message is for the sole use of the intended recipient(s) and may contain confidential and privileged information.  Any unauthorized review, use, disclosure or distribution is prohibited. Nothing contained in this message or in any attachment shall constitute a contract or electronic signature under the Electronic Signatures in Global and National Commerce Act, any version of the Uniform Electronic Transactions Act or any other statute governing electronic transactions.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Kernel PAE and JVM arguments</header>
    <date>Wed Jul 22 15:42:39 CEST 2009</date>
    <body>Hi, I have an environment that uses resin in cluster on 3 servers. Users want to test the Kernel PAE, with Linux Centos and making adjustments to the settings of the parameters of the JVM arguments, but I am in doubt whether you can make these changes only in a server without any impact on others, even to continue operating in cluster ? By using the PAE kernel is necessary to compile the resin with the --enable-64bit? Thanks, Mateus</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Kernel PAE and JVM arguments</header>
    <date>Wed Jul 22 19:40:27 CEST 2009</date>
    <body>Hi, I have an environment that uses resin in cluster on 3 servers. Users want to test the Kernel PAE, with Linux Centos and making adjustments to the settings of the parameters of the JVM arguments, but I am in doubt whether you can make these changes only in a server without any impact on others, even to continue operating in cluster ? Each Resin server can be configured inside the &amp;lt;server&amp;gt; block with different &amp;lt;jvm-arg&amp;gt; values.  So you could have one server experimenting with PAE settings and the other servers in the cluster using plain settings.  I don't actually know if PAE itself requires any extra settings.  I'd think it would just mean using different -Xmx values. -- Scott By using the PAE kernel is necessary to compile the resin with the -- enable-64bit? Thanks, Mateus</body>
  </mail>
  <mail>
    <header>[Resin-interest] java.lang.IllegalStateException: Connection null was not closed.</header>
    <date>Tue Jul 21 20:41:18 CEST 2009</date>
    <body>hi! from time to time [ say every 1000th request to one specific servlet ] i see following exception in resin stdout.log: java.lang.IllegalStateException: Connection null was not closed. Connections must have a close() in a finally block. com.caucho.jca.UserTransactionImpl.abortTransaction(UserTransactionImpl.java:533) com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:206) com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:264) com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:280) com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:644) com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java:1321) com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1262) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:871) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:784) i'm quite sure that my servlet closes connections properly including cases when exceptions are thrown. i'm quite puzzled especially with "Connection null was not closed." part. i'm running resin 4.0, i also tried this with 4.0 snapshot [ 2009.07.21 ]. can you give any hints how can i trace source of this problem? thanks! best regards Pawel Kudzia. -- View this message in context: http://www.nabble.com/java.lang.IllegalStateException%3A-Connection-null-was-not-closed.-tp24593349p24593349.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.IllegalStateException: Connection	null was not closed.</header>
    <date>Tue Jul 21 23:13:44 CEST 2009</date>
    <body>The null is strange.  Is there a chance that the connection could be passed from one thread to another? If you look further down in the log, you should see that a second failure saves the allocation stack trace. In other words, once Resin has detected a connection-close issue, it starts gathering the stack trace when the connection is allocated. The next time it sees the failure, it will write the allocation to the log (it will be an IllegalStateException.)  At very least, that should let you know which Connection is causing trouble. -- Scott http://www.nabble.com/java.lang.IllegalStateException%3A-Connection-null-was-not-closed.-tp24593349p24593349.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.IllegalStateException: Connection null was not closed.</header>
    <date>Tue Jul 21 23:31:49 CEST 2009</date>
    <body>this is the whole stack trace: java.lang.IllegalStateException: Connection null was not closed. Connections must have a close() in a finally block. com.caucho.jca.UserTransactionImpl.abortTransaction(UserTransactionImpl.java:533) com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:206) com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:264) com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:275) com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:644) com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java:1311) com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1252) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:866) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:779) [21:18:13.114] [21:18:13.114] java.lang.IllegalStateException: Connection null was not closed. Connections must have a close() in a finally block. [21:18:13.114]                  at com.caucho.jca.UserTransactionImpl.abortTransaction(UserTransactionImpl.java:533) [21:18:13.114]                  at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:206) [21:18:13.114]                  at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:264) [21:18:13.114]                  at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:275) [21:18:13.114]                  at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:644) [21:18:13.114]                  at com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java:1311) [21:18:13.114]                  at com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1252) [21:18:13.114]                  at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:866) [21:18:13.114]                  at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:779) it's [ and it was before ] duplicated - so i did not wanted to paste additional redundant info. i dont get anything more before / after - just my log marker telling that next invocation of servlet started. [..] thanks a lot for your explanation, this is in line with what i thought. your guess is right. my servlet spawns couple of threads and wait till they finish execution.: thread gets as paramete sql connection and is started. thread code [ run ] is enclosed in try-catch-finally i used to close connection in finally part of that try-catch - and was getting rarely [ but still ] exceptions as above. servlet waits for all threads to finish [ by calling join, looping until thread state is Thread.State.TERMINATED ]. i have worked-around the problem by moving closing of sql connection away from thread code. now it's after join-loop and after few 100k runs there are no problems. i will try to isolate the issue in some smaller readable code, if i manage to reproduce it i'll post the example. best regards Pawel Kudzia -- View this message in context: http://www.nabble.com/java.lang.IllegalStateException%3A-Connection-null-was-not-closed.-tp24593349p24596220.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.IllegalStateException: Connection null was not closed.</header>
    <date>Wed Jul 22 00:10:54 CEST 2009</date>
    <body>i can reproduce similar the problem with following code as at: http://www.copypastecode.com/7556/ during execution with  ab -n 200000 -c 1  " http://10.14.10.12:8080/app/Ta" [ plenty of requests one after another - to avoid additional complications no parallel requests ] i sporadically get: [22:04:37.654] done All connections must have a close() in a finally block. [22:04:37.654] [22:04:37.654] Closing dangling connections.  All connections must have a close() in a finally block. java.lang.IllegalStateException: Connection null was not closed. Connections must have a close() in a finally block. com.caucho.jca.UserTransactionImpl.abortTransaction(UserTransactionImpl.java:533) com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:206) com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:264) com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:275) com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:644) com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java:1311) com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1252) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:866) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:779) [22:04:37.654] [22:04:37.654] java.lang.IllegalStateException: Connection null was not closed. Connections must have a close() in a finally block. [22:04:37.654]                  at com.caucho.jca.UserTransactionImpl.abortTransaction(UserTransactionImpl.java:533) [22:04:37.654]                  at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:206) [22:04:37.654]                  at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:264) [22:04:37.654]                  at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:275) [22:04:37.654]                  at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:644) [22:04:37.654]                  at com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java:1311) [22:04:37.654]                  at com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1252) [22:04:37.654]                  at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:866) [22:04:37.654]                  at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:779) [22:04:37.655] done Ta points to servlet with linked code. blob00, blob01, blob02 are defined data sources pointing to mysql servers. during execution i do not get any exceptions thrown to the user or anything else in stdout.log problem seems to be gone if i move closing connection after join, outside thead's run method. right now i run resin 4.0. Java(TM) SE Runtime Environment (build 1.6.0_13-b03) under x86_64 debian, 2x quad core xeon. best regards, thanks for help! Pawel Kudzia -- View this message in context: http://www.nabble.com/java.lang.IllegalStateException%3A-Connection-null-was-not-closed.-tp24593349p24596756.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.IllegalStateException: Connection	null was not closed.</header>
    <date>Wed Jul 22 00:24:55 CEST 2009</date>
    <body>if t[i].join(); (or anything) throws an exception, then the first connection that you open will dangle. Do you see "we've got an exception" anywhere in your logs? put *all* the conn.close() in finally blocks... also, what is the point of calling ds.getConnection() two times? Your code should be: try // create your searcher threads and run the two for loops finally if (conn != null &amp;amp;&amp;amp; !conn.isClosed()) You need to check for null (and !isClosed() to be safe) because if there is a failure opening the connection the finally block will null out. jon http://www.copypastecode.com/7556/ http://10.14.10.12:8080/app/Ta" http://www.nabble.com/java.lang.IllegalStateException%3A-Connection-null-was-not-closed.-tp24593349p24596756.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.IllegalStateException: Connection null was not closed.</header>
    <date>Wed Jul 22 00:40:55 CEST 2009</date>
    <body>hi Jon, thx for your answer! this is just dummy code with which i can still reproduce the problem. i removed as much as possible [ including some try-caches ] but kept what is needed to reproduce the problem. i understand that code looks odd after taking out most of actual work that is done, but in this way it's [ hopefully ] readable. in my case other exceptions [ than reported IllegalStateException ] do not occur. so none of code in catch is executed. actually i'm very close to your suggestion. i usually run: if (conn!=null) conn.close() regards Pawel Kudzia -- View this message in context: http://www.nabble.com/java.lang.IllegalStateException%3A-Connection-null-was-not-closed.-tp24593349p24597084.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.IllegalStateException: Connection null was not closed.</header>
    <date>Wed Jul 22 08:02:37 CEST 2009</date>
    <body>One potential source of problems might be the start/run sequence of the Thread. If, for some reason, the run() method was never called then the Thread's connection would never be called. The "problem" with this theory is that I cannot think of any reason for start() to fail to call run()... :). Just to verify that's not the problem, you could pass the DBPool as parameter to the tread and perform the DBPool.getConnection() inside the thread's run method, so the connection is retrieved in the same method where you are sure it is going to be returned. And as Jon said, you should remove the dummy Connection conn = ds.getConnection(); piece of code, because right now it does nothing and adds confusion to the diagnostics. It is better to reduce it to just one piece of code with connections involved :). S! D. .pQd escribió:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.IllegalStateException: Connection null was not closed.</header>
    <date>Wed Jul 22 08:54:41 CEST 2009</date>
    <body>new sample code with which i can still reproduce the problem: http://www.copypastecode.com/7560/ i've removed unnecessary comment and added sanity check: control if thread was executed. sporadically i get result in stdout.log: [06:42:55.708] start [06:42:55.709] stop All connections must have a close() in a finally block. [06:42:55.709] [06:42:55.709] Closing dangling connections.  All connections must have a close() in a finally block. java.lang.IllegalStateException: Connection null was not closed. Connections must have a close() in a finally block. com.caucho.jca.UserTransactionImpl.abortTransaction(UserTransactionImpl.java:533) com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:206) com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:264) com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:275) com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:644) com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java:1311) com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1252) com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:866) com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:779) [06:42:55.709] [06:42:55.709] java.lang.IllegalStateException: Connection null was not closed. Connections must have a close() in a finally block. [06:42:55.709]                  at com.caucho.jca.UserTransactionImpl.abortTransaction(UserTransactionImpl.java:533) [06:42:55.709]                  at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:206) [06:42:55.709]                  at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:264) [06:42:55.709]                  at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:275) [06:42:55.709]                  at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:644) [06:42:55.709]                  at com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java:1311) [06:42:55.709]                  at com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1252) [06:42:55.709]                  at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:866) [06:42:55.709]                  at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:779) [06:42:55.710] start [06:42:55.710] stop rest is just: [06:42:55.714] stop [06:42:55.714] start [06:42:55.715] stop [06:42:55.715] start [06:42:55.716] stop [06:42:55.716] start [06:42:55.717] stop [06:42:55.717] start [06:42:55.717] stop if i move DBPool.getConnection() inside the thread - exception still [ rarely ] occurs: http://www.copypastecode.com/7564/ thanks for your suggestions Pawel Kudzia -- View this message in context: http://www.nabble.com/java.lang.IllegalStateException%3A-Connection-null-was-not-closed.-tp24593349p24600985.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.IllegalStateException: Connection null was not closed.</header>
    <date>Wed Jul 22 09:14:40 CEST 2009</date>
    <body>.pQd escribió: ... http://www.copypastecode.com/7564/ Try with this version http://www.copypastecode.com/7568/ that has the getConnection() call inside the run method and inside the try. If that still fails, I would start looking for other places where connections might be retrieved as getting out of that block without calling close should be not possible. S!</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.IllegalStateException: Connection null was not closed.</header>
    <date>Wed Jul 22 09:28:42 CEST 2009</date>
    <body>http://www.copypastecode.com/7568/ that has the new version: http://www.copypastecode.com/7576/ as long as connection is closed in the same thread where it's open - i do not get exceptions. if i try to close it in other thread - they occur [ rarely.. ]. is it general rule that i was not aware of or some bug that i trigger in resin's connection pool handler? regards Pawel Kudzia -- View this message in context: http://www.nabble.com/java.lang.IllegalStateException%3A-Connection-null-was-not-closed.-tp24593349p24601319.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.IllegalStateException: Connection	null was not closed.</header>
    <date>Wed Jul 22 19:44:31 CEST 2009</date>
    <body>http://www.copypastecode.com/7568/ that has the http://www.copypastecode.com/7576/ I'm not sure it's a bug.  Resin's connection pool handler is a transactional pool, and transactions are tied to the thread.  So handing off a connection to a separate thread isn't really part of the pool's model.  Normally, in a multithreaded situation, you'd have a second thread open its own connection. -- Scott http://www.nabble.com/java.lang.IllegalStateException%3A-Connection-null-was-not-closed.-tp24593349p24601319.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.IllegalStateException: Connection null was not closed.</header>
    <date>Wed Jul 22 20:05:31 CEST 2009</date>
    <body>hello Scott, thank you very much for your explanation. now i'll know! best regards Pawel Kudzia -- View this message in context: http://www.nabble.com/java.lang.IllegalStateException%3A-Connection-null-was-not-closed.-tp24593349p24611510.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Any response to bug 0003578?</header>
    <date>Wed Jul 15 00:49:31 CEST 2009</date>
    <body>Hi, I've reported to this list, and to mantis, a serious problem I'm seeing with 4.0.0. I've been hoping for some kind of acknowledgement, ideally a fix. I seem to have to choose between recompiling JSPs on every single request, or having Resin reload the entire context when a single JSP changes. http://bugs.caucho.com/view.php?id=3578 Am I correct that this is a bug, or have I just configured something wrong? Thanks, Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any response to bug 0003578?</header>
    <date>Wed Jul 15 23:21:31 CEST 2009</date>
    <body>http://bugs.caucho.com/view.php?id=3578 Thanks.  I've just fixed that one. 4.0.1 has relatively few bug fixes.  The CanDI refactoring (major), the Servlet 3.0 early access, and the leftover 4.0.0 regressions didn't leave much time for the bug list. There's a new 4.0 snapshot (not including this bug fix).  4.0.1 will probably be out next week. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any response to bug 0003578?</header>
    <date>Wed Jul 15 23:37:32 CEST 2009</date>
    <body>http://bugs.caucho.com/view.php?id=3578 Thanks, Scott, that's great news. Anyone get a chance to look at Hessian bug #3579? I'm going to deploy my new production environment this weekend, so I may have to go with 3.x.x, but hopefully 4.0 will be ready in time. I'm deploying on EC2, so there's still some work to do. Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any response to bug 0003578?</header>
    <date>Wed Jul 15 23:50:34 CEST 2009</date>
    <body>What are you using for the service?  A servlet like class MyBean extends HessianServlet? -- Scott http://bugs.caucho.com/view.php?id=3578 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any response to bug 0003578?</header>
    <date>Fri Jul 17 11:02:23 CEST 2009</date>
    <body>Hi Scott, I just tried the snapshot, there are following issues with it on my side: - jsf com.caucho.server.webapp.WebApp.createJsf(): java.lang.NoClassDefFoundError: Could not initialize class com.caucho.jsf.cfg.JsfPropertyGroup Is that not supported any more? This isn't automaticall recognized by the any more and gives the following error when using the apache-module: 2009-07-17 10:44:47,170 WARN  c.c.server.webapp.ErrorPageManager  - 'plugin_match' is not a known servlet.  Servlets must be defined by &amp;lt;servlet&amp;gt; before being used. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any response to bug 0003578?</header>
    <date>Fri Jul 17 17:47:07 CEST 2009</date>
    <body>We'll need to add that back for backward compatibility. We're putting JSF and JPA on hold for now, so we can focus on improving the core of Resin.  In the meantime, we'll be using the reference implementations.  We'll revisit that decision in 6 months or so. Thanks.  That's one of our failing regression tests that hasn't been fixed yet. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any response to bug 0003578?</header>
    <date>Mon Jul 20 19:40:26 CEST 2009</date>
    <body>http://bugs.caucho.com/view.php?id=3578 So, over the weekend I installed 3.2.1, and discovered that it has the same behavior. Sadly, the small EC2 instance seems to be significantly slower than the real hardware it's replacing, so it's really noticeable. Makes me wonder if I'm doing something wrong but I don't see how I could be. Am I? -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Google Checkout / Web Service</header>
    <date>Tue Jul 14 21:21:52 CEST 2009</date>
    <body>Hey Steffen, Thank you,  the authentication appears to be partially working .  However I am still having an issue.  I am creating a webservice for Google Checkout, as shown below.  The Basic authentication appears to now be working, as I can see from the log files, however, when the incoming XML is received I am still getting an 401 authentication failed error.  It is kind of strange because I am seeing the following in the log file?   Should the web service be setup a different way within Resin to allow for a web service or  is it possible a problem that the incoming file is viewed by Resin as "S charset=UTF-8" which was sent by Google? request channel 1 /notification m:method POST protocol: HTTP/1.0 server-host: www.domain.com server-port: 80 74.125.64.136 74.125.64.136 remote-port: 57305 content-type=application/xml; charset=UTF-8 User-Agent=Google Checkout Notification Agent 1.0 Authorization=Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== Host=www.domain.com content-length=2882 Via=1.1 proxy.google.com:80 (squid) X-Forwarded-For=unknown Cache-Control=max-age=259200 Connection=keep-alive SCRIPT_URL=/notification SCRIPT_URI= http://www.domain.com/notification post-data: 2882 WebAppFilterChain[ http://www.domain.com , next=CacheFilterChain[null?null, next=SecurityFilterChain[]]] [10:49:06.925] [10:49:06.925] session Authentication Failed. cpu-load Set-Cookie JSESSIONID=abcwZa9bhDI6b_OcDy6js; path=/ Content-Type text/html; charset=utf-8 write-chunk(161) 161 quit channel complete request - keepalive keepalive (thread) Thanks very much for your help! _____ From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Steffen Busch Sent: Tuesday, July 14, 2009 12:51 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Google Checkout Hi Joey, I don't have experience with Google Checkout integration with Resin, but maybe I can still help a little bit. First of all, do you know the content of Authorization-Header from Google? Something like this: Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== The above line contains the BASE64 value of user name "Aladdin", password "open sesame". If you put "QWxhZGRpbjpvcGVuIHNlc2FtZQ==" into a BASE64 decoder (for example http://www.motobit.com/util/base64-decoder-encoder.asp ) you will receive: "Aladdin:open sesame". If you receive a value that you already know and is your (afaik from the google api doc) MERCHANT_ID:MERCHANT_KEY then you would need to change the Resin Configuration to use BASIC auth-method and no password-digest: You need to regenerate the userPWD with digest-realm of "none". Hope this helps. Regards, Steffen Hello, I'm trying to integrate google checkout with Resin, and they require BASIC HTML authentication on callback of XML posts. It constantly fails with error of wrong password.  I have created the password as suggested in the Docs on caucho.com, however, the encrypted password sent back by Google is slightly different.  I can't post those passwords becuase they are live passwords, so instead I'll post to the Google Docs. http://code.google.com/apis/checkout/developer/index.html#https_auth_scheme Has anybody had success setting up Google Checkout to work with Resin? Thanks Joey.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Google Checkout / Web Service</header>
    <date>Tue Jul 14 22:28:11 CEST 2009</date>
    <body>I think the content-type S text/html; charset=utf-8 is due to the HTML answer of Resin for 401 Authentication Failed.Usually the sequence of requests is like this: 1.) Request without authentication header or wrong authentication supplied. 2.) Resin replies with 401 Unauthorized (actually I don't have a 3.1 instance to verify. 2.1 replies with 401 Unauthorized) 3.) New Request with authorization header. I would recommed to enable a full debug logging for the web-app (resin-web.xml): http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" - Debug Logging with a heavily loaded format attribute to get more information ... Maybe this can give further information about the underlying issue. http://www.domain.com/notification http://www.domain.com , next=CacheFilterChain[null?null, http://www.motobit.com/util/base64-decoder-encoder.asp ) you will http://code.google.com/apis/checkout/developer/index.html#https_auth_scheme http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] SPAM-LOW:  Re:  Google Checkout / Web Service</header>
    <date>Tue Jul 14 23:43:27 CEST 2009</date>
    <body>Hey Steffen, Thanks once again for your time and help! I enabled the additional log settings which provide some more data.  There are a couple of questionable items that I thought I may note: 1.)  It now shows the content=length: 2882, and the post-data: 2760. Apparently the entire xml file is being read in two pieces At the beginning of the incoming XML there is an initial READ, and then at the end of the XML their is another READ, to get the last couple of tags and closing XML tag. 2.)  It is also showing that the incoming connection is charset=utf-8. The apparent last post by Google is a Q:quit, this is right before the next log entry of  "s 401 Authentication Failed." I am guessing that the problem may be related to the incoming content type as an application, and Q:quit. Thanks again....Joey. _____ From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Steffen Busch Sent: Tuesday, July 14, 2009 1:26 PM To: General Discussion for the Resin application server Subject: SPAM-LOW: Re: [Resin-interest] Google Checkout / Web Service I think the content-type S text/html; charset=utf-8 is due to the HTML answer of Resin for 401 Authentication Failed. Usually the sequence of requests is like this: 1.) Request without authentication header or wrong authentication supplied. 2.) Resin replies with 401 Unauthorized (actually I don't have a 3.1 instance to verify. 2.1 replies with 401 Unauthorized) 3.) New Request with authorization header. I would recommed to enable a full debug logging for the web-app (resin-web.xml): http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" - Debug Logging with a heavily loaded format attribute to get more information ... Maybe this can give further information about the underlying issue. Hey Steffen, Thank you,  the authentication appears to be partially working .  However I am still having an issue.  I am creating a webservice for Google Checkout, as shown below.  The Basic authentication appears to now be working, as I can see from the log files, however, when the incoming XML is received I am still getting an 401 authentication failed error.  It is kind of strange because I am seeing the following in the log file?   Should the web service be setup a different way within Resin to allow for a web service or  is it possible a problem that the incoming file is viewed by Resin as "S charset=UTF-8" which was sent by Google? request channel 1 /notification m:method POST protocol: HTTP/1.0 server-host: www.domain.com server-port: 80 74.125.64.136 74.125.64.136 remote-port: 57305 content-type=application/xml; charset=UTF-8 User-Agent=Google Checkout Notification Agent 1.0 Authorization=Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== Host=www.domain.com content-length=2882 Via=1.1 proxy.google.com:80 (squid) X-Forwarded-For=unknown Cache-Control=max-age=259200 Connection=keep-alive SCRIPT_URL=/notification SCRIPT_URI= http://www.domain.com/notification post-data: 2882 WebAppFilterChain[ http://www.domain.com , next=CacheFilterChain[null?null, next=SecurityFilterChain[]]] [10:49:06.925] [10:49:06.925] session Authentication Failed. cpu-load Set-Cookie JSESSIONID=abcwZa9bhDI6b_OcDy6js; path=/ Content-Type text/html; charset=utf-8 write-chunk(161) 161 quit channel complete request - keepalive keepalive (thread) Thanks very much for your help! _____ From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Steffen Busch Sent: Tuesday, July 14, 2009 12:51 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Google Checkout Hi Joey, I don't have experience with Google Checkout integration with Resin, but maybe I can still help a little bit. First of all, do you know the content of Authorization-Header from Google? Something like this: Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== The above line contains the BASE64 value of user name "Aladdin", password "open sesame". If you put "QWxhZGRpbjpvcGVuIHNlc2FtZQ==" into a BASE64 decoder (for example http://www.motobit.com/util/base64-decoder-encoder.asp ) you will receive: "Aladdin:open sesame". If you receive a value that you already know and is your (afaik from the google api doc) MERCHANT_ID:MERCHANT_KEY then you would need to change the Resin Configuration to use BASIC auth-method and no password-digest: You need to regenerate the userPWD with digest-realm of "none". Hope this helps. Regards, Steffen Hello, I'm trying to integrate google checkout with Resin, and they require BASIC HTML authentication on callback of XML posts. It constantly fails with error of wrong password.  I have created the password as suggested in the Docs on caucho.com, however, the encrypted password sent back by Google is slightly different.  I can't post those passwords becuase they are live passwords, so instead I'll post to the Google Docs. http://code.google.com/apis/checkout/developer/index.html#https_auth_scheme Has anybody had success setting up Google Checkout to work with Resin? Thanks Joey.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] SPAM-LOW: Re: Google Checkout / Web Service</header>
    <date>Wed Jul 15 00:07:28 CEST 2009</date>
    <body>Unfortunately, I am not aware of Hmux when Resin is running behind Apache or IIS.Are there any further hints about the 401? The Q:quit is logged by the Hmux Protocol. I would expect something from com.caucho.server.security.* which indicates a reason for the 401. http://caucho.com/ns/resin" http://caucho.com/ns/resin/core" http://www.domain.com/notification http://www.domain.com , next=CacheFilterChain[null?null, http://www.motobit.com/util/base64-decoder-encoder.asp ) you will http://code.google.com/apis/checkout/developer/index.html#https_auth_scheme http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] SPAM-LOW: Re: Google Checkout / Web Service</header>
    <date>Wed Jul 15 02:18:41 CEST 2009</date>
    <body>Unfortunately, I am not aware of Hmux when Resin is running behind Apache or IIS. Are there any further hints about the 401? The Q:quit is logged by the Hmux Protocol. I would expect something from com.caucho.server.security.* which indicates a reason for the 401. The hmux codes don't have anything to do with authentication. The 's' is just the HTTP status line.  Either Resin or the application is calling sendError(401). -- Scott Hey Steffen, Thanks once again for your time and help! I enabled the additional log settings which provide some more data. There are a couple of questionable items that I thought I may note: 1.)  It now shows the content=length: 2882, and the post-data: 2760.  Apparently the entire xml file is being read in two pieces At the beginning of the incoming XML there is an initial READ, and then at the end of the XML their is another READ, to get the last couple of tags and closing XML tag. 2.)  It is also showing that the incoming connection is content- charset=utf-8. The apparent last post by Google is a Q:quit, this is right before the next log entry of  "s 401 Authentication Failed." I am guessing that the problem may be related to the incoming content type as an application, and Q:quit. Thanks again....Joey. From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Steffen Busch Sent: Tuesday, July 14, 2009 1:26 PM To: General Discussion for the Resin application server Subject: SPAM-LOW: Re: [Resin-interest] Google Checkout / Web Service I think the content-type S text/html; charset=utf-8 is due to the HTML answer of Resin for 401 Authentication Failed. Usually the sequence of requests is like this: 1.) Request without authentication header or wrong authentication supplied. 2.) Resin replies with 401 Unauthorized (actually I don't have a 3.1 instance to verify. 2.1 replies with 401 Unauthorized) 3.) New Request with authorization header. I would recommed to enable a full debug logging for the web-app (resin-web.xml): http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" - Debug Logging with a heavily loaded format attribute to get more information ... Maybe this can give further information about the underlying issue. Hey Steffen, Thank you,  the authentication appears to be partially working . However I am still having an issue.  I am creating a webservice for Google Checkout, as shown below.  The Basic authentication appears to now be working, as I can see from the log files, however, when the incoming XML is received I am still getting an 401 authentication failed error.  It is kind of strange because I am seeing the following in the log file?   Should the web service be setup a different way within Resin to allow for a web service or  is it possible a problem that the incoming file is viewed by Resin as "S text/html; charset=utf-8" , instead of  "content-type=application/ xml; charset=UTF-8" which was sent by Google? 8] start request 8] channel 1 8] U:uri /notification 8] m:method POST 8] c protocol: HTTP/1.0 8] v server-host: www.domain.com 8] g server-port: 80 8] h 74.125.64.136 8] i 74.125.64.136 8] j remote-port: 57305 8] q content-type=application/xml; charset=UTF-8 8] H User-Agent=Google Checkout Notification Agent 1.0 8] H Authorization=Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== 8] H Host=www.domain.com 8] p content-length=2882 8] H Via=1.1 proxy.google.com:80 (squid) 8] H X-Forwarded-For=unknown 8] H Cache-Control=max-age=259200 8] H Connection=keep-alive 8] H SCRIPT_URL=/notification 8] H SCRIPT_URI= http://www.domain.com/notification 8] D post-data: 2882 notification' to WebAppFilterChain[ http://www.domain.com , next=CacheFilterChain[null?null, next=SecurityFilterChain[]]] [10:49:06.925] new [10:49:06.925] create session resin 8] Q:quit 8] s 401 Authentication Failed. 8] M cpu-load 8] S 0 8] H Set-Cookie 8] S JSESSIONID=abcwZa9bhDI6b_OcDy6js; path=/ 8] H Content-Type 8] S text/html; charset=utf-8 8] G 8] write-chunk(161) 8] D:data 161 8] Q: quit channel 8] complete request - keepalive keepalive (thread) Thanks very much for your help! From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Steffen Busch Sent: Tuesday, July 14, 2009 12:51 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Google Checkout Hi Joey, I don't have experience with Google Checkout integration with Resin, but maybe I can still help a little bit. First of all, do you know the content of Authorization-Header from Google? Something like this: Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== The above line contains the BASE64 value of user name "Aladdin", password "open sesame". If you put "QWxhZGRpbjpvcGVuIHNlc2FtZQ==" into a BASE64 decoder (for example http://www.motobit.com/util/base64-decoder-encoder.asp ) you will receive: "Aladdin:open sesame". If you receive a value that you already know and is your (afaik from the google api doc) MERCHANT_ID:MERCHANT_KEY then you would need to change the Resin Configuration to use BASIC auth-method and no password-digest: You need to regenerate the userPWD with digest-realm of "none". Hope this helps. Regards, Steffen Hello, I'm trying to integrate google checkout with Resin, and they require BASIC HTML authentication on callback of XML posts. It constantly fails with error of wrong password.  I have created the password as suggested in the Docs on caucho.com, however, the encrypted password sent back by Google is slightly different.  I can't post those passwords becuase they are live passwords, so instead I'll post to the Google Docs. http://code.google.com/apis/checkout/developer/index.html#https_auth_scheme Has anybody had success setting up Google Checkout to work with Resin? Thanks Joey.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] SPAM-LOW: Re: Google Checkout / Web Service</header>
    <date>Wed Jul 15 07:55:07 CEST 2009</date>
    <body>Hi Scot/Steffen - Both your comments led me to resolve this issue.  In google checkout there is an additional conf file that their API relies on called checkout-config.xml.  This file includes a user/pwd combination that is must be changed from the default prior to using their API.  The comments by Steffen helped me to solve the configuration of Basic authentication, and Scot to identify that the authentication still needed work. When GC receives an incoming XML notification, they are defined by a message-type.  The message type then determines which type of XML notification is incoming, and loads the appropriate class to deal with it. Thanks to everyone (wish me luck). Joey _____ From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Tuesday, July 14, 2009 5:17 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] SPAM-LOW: Re: Google Checkout / Web Service Unfortunately, I am not aware of Hmux when Resin is running behind Apache or IIS. Are there any further hints about the 401? The Q:quit is logged by the Hmux Protocol. I would expect something from com.caucho.server.security.* which indicates a reason for the 401. The hmux codes don't have anything to do with authentication. The 's' is just the HTTP status line.  Either Resin or the application is calling sendError(401). -- Scott Hey Steffen, Thanks once again for your time and help! I enabled the additional log settings which provide some more data.  There are a couple of questionable items that I thought I may note: 1.)  It now shows the content=length: 2882, and the post-data: 2760. Apparently the entire xml file is being read in two pieces At the beginning of the incoming XML there is an initial READ, and then at the end of the XML their is another READ, to get the last couple of tags and closing XML tag. 2.)  It is also showing that the incoming connection is charset=utf-8. The apparent last post by Google is a Q:quit, this is right before the next log entry of  "s 401 Authentication Failed." I am guessing that the problem may be related to the incoming content type as an application, and Q:quit. Thanks again....Joey. _____ From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Steffen Busch Sent: Tuesday, July 14, 2009 1:26 PM To: General Discussion for the Resin application server Subject: SPAM-LOW: Re: [Resin-interest] Google Checkout / Web Service I think the content-type S text/html; charset=utf-8 is due to the HTML answer of Resin for 401 Authentication Failed. Usually the sequence of requests is like this: 1.) Request without authentication header or wrong authentication supplied. 2.) Resin replies with 401 Unauthorized (actually I don't have a 3.1 instance to verify. 2.1 replies with 401 Unauthorized) 3.) New Request with authorization header. I would recommed to enable a full debug logging for the web-app (resin-web.xml): http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" - Debug Logging with a heavily loaded format attribute to get more information ... Maybe this can give further information about the underlying issue. Hey Steffen, Thank you,  the authentication appears to be partially working .  However I am still having an issue.  I am creating a webservice for Google Checkout, as shown below.  The Basic authentication appears to now be working, as I can see from the log files, however, when the incoming XML is received I am still getting an 401 authentication failed error.  It is kind of strange because I am seeing the following in the log file?   Should the web service be setup a different way within Resin to allow for a web service or  is it possible a problem that the incoming file is viewed by Resin as "S charset=UTF-8" which was sent by Google? request channel 1 /notification m:method POST protocol: HTTP/1.0 server-host: www.domain.com server-port: 80 74.125.64.136 74.125.64.136 remote-port: 57305 content-type=application/xml; charset=UTF-8 User-Agent=Google Checkout Notification Agent 1.0 Authorization=Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== Host=www.domain.com content-length=2882 Via=1.1 proxy.google.com:80 (squid) X-Forwarded-For=unknown Cache-Control=max-age=259200 Connection=keep-alive SCRIPT_URL=/notification SCRIPT_URI= http://www.domain.com/notification post-data: 2882 WebAppFilterChain[ http://www.domain.com , next=CacheFilterChain[null?null, next=SecurityFilterChain[]]] [10:49:06.925] [10:49:06.925] session Authentication Failed. cpu-load Set-Cookie JSESSIONID=abcwZa9bhDI6b_OcDy6js; path=/ Content-Type text/html; charset=utf-8 write-chunk(161) 161 quit channel complete request - keepalive keepalive (thread) Thanks very much for your help! _____ From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Steffen Busch Sent: Tuesday, July 14, 2009 12:51 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Google Checkout Hi Joey, I don't have experience with Google Checkout integration with Resin, but maybe I can still help a little bit. First of all, do you know the content of Authorization-Header from Google? Something like this: Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== The above line contains the BASE64 value of user name "Aladdin", password "open sesame". If you put "QWxhZGRpbjpvcGVuIHNlc2FtZQ==" into a BASE64 decoder (for example http://www.motobit.com/util/base64-decoder-encoder.asp ) you will receive: "Aladdin:open sesame". If you receive a value that you already know and is your (afaik from the google api doc) MERCHANT_ID:MERCHANT_KEY then you would need to change the Resin Configuration to use BASIC auth-method and no password-digest: You need to regenerate the userPWD with digest-realm of "none". Hope this helps. Regards, Steffen Hello, I'm trying to integrate google checkout with Resin, and they require BASIC HTML authentication on callback of XML posts. It constantly fails with error of wrong password.  I have created the password as suggested in the Docs on caucho.com, however, the encrypted password sent back by Google is slightly different.  I can't post those passwords becuase they are live passwords, so instead I'll post to the Google Docs. http://code.google.com/apis/checkout/developer/index.html#https_auth_scheme Has anybody had success setting up Google Checkout to work with Resin? Thanks Joey.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Google Checkout</header>
    <date>Tue Jul 14 07:56:54 CEST 2009</date>
    <body>Hello, I'm trying to integrate google checkout with Resin, and they require BASIC HTML authentication on callback of XML posts. It constantly fails with error of wrong password.  I have created the password as suggested in the Docs on caucho.com, however, the encrypted password sent back by Google is slightly different.  I can't post those passwords becuase they are live passwords, so instead I'll post to the Google Docs. http://code.google.com/apis/checkout/developer/index.html#https_auth_scheme Has anybody had success setting up Google Checkout to work with Resin? Thanks Joey.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Google Checkout</header>
    <date>Tue Jul 14 09:53:06 CEST 2009</date>
    <body>Hi Joey, I don't have experience with Google Checkout integration with Resin, but maybe I can still help a little bit. First of all, do you know the content of Authorization-Header from Google? Something like this: Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ== The above line contains the BASE64 value of user name "Aladdin", password "open sesame". If you put "QWxhZGRpbjpvcGVuIHNlc2FtZQ==" into a BASE64 decoder (for example http://www.motobit.com/util/base64-decoder-encoder.asp ) you will receive: "Aladdin:open sesame". If you receive a value that you already know and is your (afaik from the google api doc) MERCHANT_ID:MERCHANT_KEY then you would need to change the Resin Configuration to use BASIC auth-method and no password-digest: You need to regenerate the userPWD with digest-realm of "none". Hope this helps. Regards, Steffen http://code.google.com/apis/checkout/developer/index.html#https_auth_scheme http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Wildcard Servlet Mappings with IIS</header>
    <date>Tue Jul 07 04:38:31 CEST 2009</date>
    <body>Hello! Is there a trick to getting IIS to pass off wildcard servlet mappings off to Resin? I have an application that's deployed on IIS with the ISAPI plugin. If a request comes in for a .jsp page Resin is invoked correctly, but if a request comes in for a URL that's mapped to a servlet with a wildcard mapping (ie /view/4, when the mapping is /view/*), IIS returns a 404. This is easy to do on Apache, but I'm struggling to make it work on IIS. Thanks! - Matt</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Wildcard Servlet Mappings with IIS</header>
    <date>Tue Jul 07 21:12:59 CEST 2009</date>
    <body>The /foo/* syntax should be supported the same in IIS as in Apache, because it's the same code for both plugins.  The only difficulty would be for regular expression matching, and I don't think there's a simple solution for IIS.  What does the /caucho-status show? -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0.0 on osx deploy problem</header>
    <date>Tue Jun 30 07:51:58 CEST 2009</date>
    <body>Here is another problem. When deploying subetha on osx using the apple jdk 6, I get the stack trace below. When deplying subetha on osx using the landon fuller soylatte jdk, things work fine. I get a different set of errors using jdk5 which relate to the resin servlets apparently being compiled with jdk6. [16][ ~/checkout/resin-4.0.0 ]% ./bin/resin.sh Intentionally suppressing recursive invocation exception! java.lang.IllegalStateException: recursive invocation at java.lang.ClassLoader.initSystemClassLoader(ClassLoader.java:1394) at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:1377) at sun.security.jca.ProviderConfig$1.run(ProviderConfig.java:64) at java.security.AccessController.doPrivileged(Native Method) at sun.security.jca.ProviderConfig.getLock(ProviderConfig.java:62) at sun.security.jca.ProviderConfig.getProvider(ProviderConfig.java:187) at sun.security.jca.ProviderList.getProvider(ProviderList.java:215) at sun.security.jca.ProviderList.getService(ProviderList.java:313) at sun.security.jca.GetInstance.getInstance(GetInstance.java:140) at java.security.cert.CertificateFactory.getInstance(CertificateFactory.java:148) at sun.security.pkcs.PKCS7.parseSignedData(PKCS7.java:244) at sun.security.pkcs.PKCS7.parse(PKCS7.java:141) at sun.security.pkcs.PKCS7.parse(PKCS7.java:110) at sun.security.pkcs.PKCS7.&amp;lt;init&amp;gt;(PKCS7.java:92) at sun.security.util.SignatureFileVerifier.&amp;lt;init&amp;gt;(SignatureFileVerifier.java:80) at java.util.jar.JarVerifier.processEntry(JarVerifier.java:256) at java.util.jar.JarVerifier.update(JarVerifier.java:188) at java.util.jar.JarFile.initializeVerifier(JarFile.java:321) at java.util.jar.JarFile.getInputStream(JarFile.java:386) at sun.misc.JarIndex.getJarIndex(JarIndex.java:99) at sun.misc.URLClassPath$JarLoader$1.run(URLClassPath.java:606) at java.security.AccessController.doPrivileged(Native Method) at sun.misc.URLClassPath$JarLoader.ensureOpen(URLClassPath.java:597) at sun.misc.URLClassPath$JarLoader.&amp;lt;init&amp;gt;(URLClassPath.java:581) at sun.misc.URLClassPath$3.run(URLClassPath.java:331) at java.security.AccessController.doPrivileged(Native Method) at sun.misc.URLClassPath.getLoader(URLClassPath.java:320) at sun.misc.URLClassPath.getLoader(URLClassPath.java:297) at sun.misc.URLClassPath.getResource(URLClassPath.java:167) at java.net.URLClassLoader$1.run(URLClassLoader.java:192) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:188) at sun.misc.Launcher$ExtClassLoader.findClass(Launcher.java:244) at java.lang.ClassLoader.loadClass(ClassLoader.java:319) at java.lang.ClassLoader.loadClass(ClassLoader.java:309) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:330) at java.lang.ClassLoader.loadClass(ClassLoader.java:254) at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:402) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:247) at java.lang.SystemClassLoaderAction.run(ClassLoader.java:2150) at java.security.AccessController.doPrivileged(Native Method) at java.lang.ClassLoader.initSystemClassLoader(ClassLoader.java:1407) at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:1377) Intentionally suppressing recursive invocation exception! java.lang.IllegalStateException: recursive invocation at java.lang.ClassLoader.initSystemClassLoader(ClassLoader.java:1394) at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:1377) at sun.security.jca.ProviderConfig$3.run(ProviderConfig.java:231) at java.security.AccessController.doPrivileged(Native Method) at sun.security.jca.ProviderConfig.doLoadProvider(ProviderConfig.java:225) at sun.security.jca.ProviderConfig.getProvider(ProviderConfig.java:205) at sun.security.jca.ProviderList.getProvider(ProviderList.java:215) at sun.security.jca.ProviderList.getService(ProviderList.java:313) at sun.security.jca.GetInstance.getInstance(GetInstance.java:140) at java.security.cert.CertificateFactory.getInstance(CertificateFactory.java:148) at sun.security.pkcs.PKCS7.parseSignedData(PKCS7.java:244) at sun.security.pkcs.PKCS7.parse(PKCS7.java:141) at sun.security.pkcs.PKCS7.parse(PKCS7.java:110) at sun.security.pkcs.PKCS7.&amp;lt;init&amp;gt;(PKCS7.java:92) at sun.security.util.SignatureFileVerifier.&amp;lt;init&amp;gt;(SignatureFileVerifier.java:80) at java.util.jar.JarVerifier.processEntry(JarVerifier.java:256) at java.util.jar.JarVerifier.update(JarVerifier.java:188) at java.util.jar.JarFile.initializeVerifier(JarFile.java:321) at java.util.jar.JarFile.getInputStream(JarFile.java:386) at sun.misc.JarIndex.getJarIndex(JarIndex.java:99) at sun.misc.URLClassPath$JarLoader$1.run(URLClassPath.java:606) at java.security.AccessController.doPrivileged(Native Method) at sun.misc.URLClassPath$JarLoader.ensureOpen(URLClassPath.java:597) at sun.misc.URLClassPath$JarLoader.&amp;lt;init&amp;gt;(URLClassPath.java:581) at sun.misc.URLClassPath$3.run(URLClassPath.java:331) at java.security.AccessController.doPrivileged(Native Method) at sun.misc.URLClassPath.getLoader(URLClassPath.java:320) at sun.misc.URLClassPath.getLoader(URLClassPath.java:297) at sun.misc.URLClassPath.getResource(URLClassPath.java:167) at java.net.URLClassLoader$1.run(URLClassLoader.java:192) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:188) at sun.misc.Launcher$ExtClassLoader.findClass(Launcher.java:244) at java.lang.ClassLoader.loadClass(ClassLoader.java:319) at java.lang.ClassLoader.loadClass(ClassLoader.java:309) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:330) at java.lang.ClassLoader.loadClass(ClassLoader.java:254) at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:402) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:247) at java.lang.SystemClassLoaderAction.run(ClassLoader.java:2150) at java.security.AccessController.doPrivileged(Native Method) at java.lang.ClassLoader.initSystemClassLoader(ClassLoader.java:1407) at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:1377) Intentionally suppressing recursive invocation exception! java.lang.IllegalStateException: recursive invocation at java.lang.ClassLoader.initSystemClassLoader(ClassLoader.java:1394) at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:1377) at java.lang.ClassLoader.getSystemResource(ClassLoader.java:1154) at java.lang.ClassLoader.getSystemResourceAsStream(ClassLoader.java:1272) at java.lang.Class.getResourceAsStream(Class.java:2028) at sun.text.normalizer.ICUData.getStream(ICUData.java:43) at sun.text.normalizer.ICUData.getRequiredStream(ICUData.java:63) at sun.text.normalizer.NormalizerImpl.&amp;lt;init&amp;gt;(NormalizerImpl.java:243) at sun.text.normalizer.NormalizerImpl.&amp;lt;clinit&amp;gt;(NormalizerImpl.java:40) at sun.text.normalizer.NormalizerBase.decompose(NormalizerBase.java:707) at sun.text.normalizer.NormalizerBase$NFKDMode.normalize(NormalizerBase.java:348) at sun.text.normalizer.NormalizerBase.normalize(NormalizerBase.java:1592) at sun.text.normalizer.NormalizerBase.normalize(NormalizerBase.java:1573) at java.text.Normalizer.normalize(Normalizer.java:146) at sun.security.x509.AVA.toRFC2253CanonicalString(AVA.java:986) at sun.security.x509.RDN.toRFC2253StringInternal(RDN.java:430) at sun.security.x509.RDN.toRFC2253String(RDN.java:409) at sun.security.x509.X500Name.getRFC2253CanonicalName(X500Name.java:714) at sun.security.x509.X500Name.equals(X500Name.java:400) at sun.security.pkcs.PKCS7.getCertificate(PKCS7.java:609) at sun.security.pkcs.SignerInfo.getCertificate(SignerInfo.java:202) at sun.security.pkcs.SignerInfo.verify(SignerInfo.java:328) at sun.security.pkcs.PKCS7.verify(PKCS7.java:494) at sun.security.pkcs.PKCS7.verify(PKCS7.java:511) at sun.security.util.SignatureFileVerifier.processImpl(SignatureFileVerifier.java:199) at sun.security.util.SignatureFileVerifier.process(SignatureFileVerifier.java:176) at java.util.jar.JarVerifier.processEntry(JarVerifier.java:277) at java.util.jar.JarVerifier.update(JarVerifier.java:188) at java.util.jar.JarFile.initializeVerifier(JarFile.java:321) at java.util.jar.JarFile.getInputStream(JarFile.java:386) at sun.misc.JarIndex.getJarIndex(JarIndex.java:99) at sun.misc.URLClassPath$JarLoader$1.run(URLClassPath.java:606) at java.security.AccessController.doPrivileged(Native Method) at sun.misc.URLClassPath$JarLoader.ensureOpen(URLClassPath.java:597) at sun.misc.URLClassPath$JarLoader.&amp;lt;init&amp;gt;(URLClassPath.java:581) at sun.misc.URLClassPath$3.run(URLClassPath.java:331) at java.security.AccessController.doPrivileged(Native Method) at sun.misc.URLClassPath.getLoader(URLClassPath.java:320) at sun.misc.URLClassPath.getLoader(URLClassPath.java:297) at sun.misc.URLClassPath.getResource(URLClassPath.java:167) at java.net.URLClassLoader$1.run(URLClassLoader.java:192) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:188) at sun.misc.Launcher$ExtClassLoader.findClass(Launcher.java:244) at java.lang.ClassLoader.loadClass(ClassLoader.java:319) at java.lang.ClassLoader.loadClass(ClassLoader.java:309) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:330) at java.lang.ClassLoader.loadClass(ClassLoader.java:254) at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:402) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:247) at java.lang.SystemClassLoaderAction.run(ClassLoader.java:2150) at java.security.AccessController.doPrivileged(Native Method) at java.lang.ClassLoader.initSystemClassLoader(ClassLoader.java:1407) at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:1377) Listening for transport dt_socket at address: 7890 Resin-4.0.0 (built Tue, 05 May 2009 10:33:38 PDT) Copyright(c) 1998-2008 Caucho Technology.  All rights reserved. Using Resin(R) Open Source under the GNU Public License (GPL). See http://www.caucho.com for information on Resin Professional, including caching, clustering, JNI acceleration, and OpenSSL integration. Starting Resin on Mon, 29 Jun 2009 22:47:37 -0700 (PDT) See http://www.caucho.com for information and licensing. 1.6.0_13-b03-206, MacRoman, en 11.3-b02-82, 64, mixed mode, Apple Inc.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.0 on osx deploy problem</header>
    <date>Sat Mar 20 10:17:28 CET 2010</date>
    <body>John, did you ever find an answer to this? I'm getting it, too. http://www.caucho.com for information on Resin Professional, http://www.caucho.com for information and licensing. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.0 on osx deploy problem</header>
    <date>Sat Mar 20 14:13:46 CET 2010</date>
    <body>Yes, I can't remember what the solution was. =( Sorry! jon http://www.caucho.com for information on Resin Professional, http://www.caucho.com for information and licensing. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.0 on osx deploy problem</header>
    <date>Mon Mar 22 01:40:42 CET 2010</date>
    <body>FWIW, Resin on OSX seems to work fine despite the error messages. Jeff http://www.caucho.com for information on Resin Professional, http://www.caucho.com for information and licensing. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.0 on osx deploy problem</header>
    <date>Mon Mar 22 03:23:01 CET 2010</date>
    <body>Hmm, not for me. It seems to keep restarting (I think, I'm not sure now). I've tried so many resin versions on so many platforms in the last week, it's all a blur. http://www.caucho.com for information on Resin Professional, http://www.caucho.com for information and licensing. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.0 on osx deploy problem</header>
    <date>Mon Mar 22 20:17:21 CET 2010</date>
    <body>My understanding is that this is a known issue with the Apple JDK, but it doesn't hurt anything. -- Scott http://www.caucho.com for information on Resin Professional, http://www.caucho.com for information and licensing. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.0 on osx deploy problem</header>
    <date>Thu Mar 25 05:18:48 CET 2010</date>
    <body>I submitted this as bug to Apple in September 2009. It was marked as a duplicate of bug #7007567. It doesn't seem to cause a problem, but it is disturbing. If you want Apple to give it a higher priority for fixing, your best bet is to submit your own bug on it, even mentioning that it's a duplicate of #7007567. Apple uses the number of reports of a particular bug to help them prioritize what gets fixed first. Rob http://www.caucho.com for information on Resin Professional, http://www.caucho.com for information and licensing. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.0 on osx deploy problem</header>
    <date>Fri Apr 09 08:34:01 CEST 2010</date>
    <body>This is with Resin 4.0.5 I finally really need to get this launching on OS X 10.6.2, and it doesn't work. I get the following over and over: $ java -jar /Library/Resin/Current/lib/resin.jar -verbose -root-directory /Library/Resin/Root -conf /Library/Resin/Resin.xml console Apr 8, 2010 11:30:46 PM com.caucho.boot.WatchdogTask run INFO: Watchdog[] starting /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/bin/java \ -Dresin.watchdog=6600 \ -Djava.util.logging.manager=com.caucho.log.LogManagerImpl \ -Djava.system.class.loader=com.caucho.loader.SystemClassLoader \ -Djavax.management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl \ -Djava.awt.headless=true \ -Dresin.home=/Library/Resin/Current/ \ -server \ -Xmx256m \ -XX:PermSize=128m \ -XX:MaxPermSize=128m \ -Xss1m \ -Xdebug \ -esa \ -ea \ -Dcom.sun.management.jmxremote \ -Djava.awt.headless=true \ -Dfile.encoding=utf-8 \ -d64 \ com.caucho.server.resin.Resin \ --root-directory \ /Library/Resin/Root \ -conf \ /Library/Resin/Resin.xml \ -socketwait \ 57050 \ -verbose \ -root-directory \ /Library/Resin/Root \ console TERM: xterm-color EC2_URL: https://us-east-1.ec2.amazonaws.com GOOS: darwin DYLD_LIBRARY_PATH: /Library/Resin/Current/libexec64 SHLVL: 1 JAVA_HOME: /System/Library/Frameworks/JavaVM.framework/Home TERM_PROGRAM_VERSION: 273 GREP_OPTIONS: --binary-files=without-match --exclude=tags RESIN_HOME: /Library/Resin/Current __CF_USER_TEXT_ENCODING: 0x1F5:0:0 TERM_PROGRAM: Apple_Terminal ANTLR_HOME: /Library/ANTLR MANPATH: :/usr/local/man GOROOT: /Users/rmann/Projects/Go P4CONFIG: .p4config RSYNC_RSH: /usr/bin/ssh M2: /Developer/Java/Maven/current/bin PWD: /Users/rmann/LZRepo/satdb/trunk _: /usr/bin/java SSH_AUTH_SOCK: /tmp/launch-iWzGPr/Listeners LD_LIBRARY_PATH: /Library/Resin/Current/libexec64 OLDPWD: /Users/rmann DFLAGS: -Dddoc -odobj SHELL: /bin/bash EDITOR: edit -w --resume +1 TMPDIR: /var/folders/VT/VTtKCduZGsm7vgkK2nQztU+++TI/-Tmp-/ HISTSIZE: 2000 CLASSPATH: /Library/Resin/Current/lib/resin.jar /Library/Resin/Current/lib/activation.jar /Library/Resin/Current/lib/javaee-16.jar /Library/Resin/Current/lib/javamail-141.jar /Library/Resin/Current/lib/jaxstream-15.jar /Library/Resin/Current/lib/jsf-api.jar /Library/Resin/Current/lib/jsf-impl.jar /Library/Resin/Current/lib/webservices-api.jar /Library/Resin/Current/lib/webservices-extra-api.jar /Library/Resin/Current/lib/webutil.jar M2_HOME: /Developer/Java/Maven/current PATH: /Library/Resin/Current/win64:/opt/local/bin:/opt/local/sbin:/Users/rmann/Projects/LLVM2/llvm/Debug/bin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/usr/X11/bin:/Users/rmann/bin:/Developer/usr/bin:/Users/rmann/Library/Amazon/EC2/Current/bin:/Users/rmann/Projects/LLVM/svn/llvm/Debug/bin:/Users/rmann/Projects/LLVM/svn/llvm/tools/clang/bin:/Applications/Development/Yagarto/yagarto-4.4.1/bin:/Applications/Development/Yagarto/yagarto-4.4.1/tools:/usr/local/samutils/bin:/usr/local/avr/bin:/usr/local/dfu/bin:/usr/local/sbin:/Developer/Tools:/usr/local/gputils/bin:/usr/local/bin:/usr/local/mysql/bin:/usr/local/acl:/Library/Frameworks/Python.framework/Versions/Current/bin:/Library/ANTLR/bin:/Developer/Java/Maven/current/bin:/Developer/Java/Ant/bin:/Library/ANTLR/bin:/usr/local/protobuf/current/bin:/Applications/Graphics/Graphviz/Graphviz.app/Contents/MacOS GOARCH: amd64 COMMAND_MODE: unix2003 DISPLAY: /tmp/launch-0TYqQ5/org.x:0 USER: rmann ANT_HOME: /Developer/Java/Ant HOME: /Users/rmann HISTCONTROL: ignoredups JAVA_MAIN_CLASS_59103: com.caucho.boot.ResinBoot Apple_PubSub_Socket_Render: /tmp/launch-WLqFFu/Render HISTFILESIZE: 2000 KM_HOME: /km LANG: en_US.UTF-8 Error occurred during initialization of VM java.lang.IllegalStateException: recursive invocation at java.lang.ClassLoader.initSystemClassLoader(ClassLoader.java:1340) at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:1323) at sun.security.jca.ProviderConfig$1.run(ProviderConfig.java:64) at java.security.AccessController.doPrivileged(Native Method) at sun.security.jca.ProviderConfig.getLock(ProviderConfig.java:62) at sun.security.jca.ProviderConfig.getProvider(ProviderConfig.java:187) at sun.security.jca.ProviderList.getProvider(ProviderList.java:215) at sun.security.jca.ProviderList.getService(ProviderList.java:313) at sun.security.jca.GetInstance.getInstance(GetInstance.java:140) at java.security.cert.CertificateFactory.getInstance(CertificateFactory.java:148) at sun.security.pkcs.PKCS7.parseSignedData(PKCS7.java:244) at sun.security.pkcs.PKCS7.parse(PKCS7.java:141) at sun.security.pkcs.PKCS7.parse(PKCS7.java:110) at sun.security.pkcs.PKCS7.&amp;lt;init&amp;gt;(PKCS7.java:92) at sun.security.util.SignatureFileVerifier.&amp;lt;init&amp;gt;(SignatureFileVerifier.java:80) at java.util.jar.JarVerifier.processEntry(JarVerifier.java:267) at java.util.jar.JarVerifier.update(JarVerifier.java:199) at java.util.jar.JarFile.initializeVerifier(JarFile.java:323) at java.util.jar.JarFile.getInputStream(JarFile.java:388) at sun.misc.JarIndex.getJarIndex(JarIndex.java:120) at sun.misc.URLClassPath$JarLoader$1.run(URLClassPath.java:608) at java.security.AccessController.doPrivileged(Native Method) at sun.misc.URLClassPath$JarLoader.ensureOpen(URLClassPath.java:599) at sun.misc.URLClassPath$JarLoader.&amp;lt;init&amp;gt;(URLClassPath.java:583) at sun.misc.URLClassPath$3.run(URLClassPath.java:333) at java.security.AccessController.doPrivileged(Native Method) at sun.misc.URLClassPath.getLoader(URLClassPath.java:322) at sun.misc.URLClassPath.getLoader(URLClassPath.java:299) at sun.misc.URLClassPath.getResource(URLClassPath.java:168) at java.net.URLClassLoader$1.run(URLClassLoader.java:194) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:190) at sun.misc.Launcher$ExtClassLoader.findClass(Launcher.java:229) at java.lang.ClassLoader.loadClass(ClassLoader.java:310) at java.lang.ClassLoader.loadClass(ClassLoader.java:296) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) at java.lang.ClassLoader.loadClass(ClassLoader.java:248) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:247) at java.lang.SystemClassLoaderAction.run(ClassLoader.java:2090) at java.security.AccessController.doPrivileged(Native Method) at java.lang.ClassLoader.initSystemClassLoader(ClassLoader.java:1348) at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:1323)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.0 on osx deploy problem</header>
    <date>Fri Apr 09 08:55:20 CEST 2010</date>
    <body>This also appears just before the restart: Apr 8, 2010 11:53:32 PM com.caucho.boot.WatchdogChildProcess run INFO: java.lang.NullPointerException java.lang.NullPointerException at com.caucho.boot.WatchdogChildProcess.run(WatchdogChildProcess.java:144) at com.caucho.boot.WatchdogChildTask.run(WatchdogChildTask.java:174) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:901) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:866) Apr 8, 2010 11:53:37 PM com.caucho.boot.WatchdogChildTask run INFO: WatchdogChild[] starting https://us-east-1.ec2.amazonaws.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.0 on osx deploy problem</header>
    <date>Fri Apr 09 08:57:32 CEST 2010</date>
    <body>One more thing. For a while I was getting an error that it couldn't create an existing table. I tossed out the resin-data directory, and re-ran it, but now I get nothing in the logs, and it doesn't re-create the data dir. -- Rick https://us-east-1.ec2.amazonaws.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.0 on osx deploy problem</header>
    <date>Fri Apr 09 10:27:42 CEST 2010</date>
    <body>A little more information: on a clean 10.6.3 install, with 1.6.0_17, I get the error, but it keeps on going and starts up. After upgrading to _19, it no longer starts after getting the error. -- Rick https://us-east-1.ec2.amazonaws.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0.0 on osx make problem</header>
    <date>Sun Jun 28 05:39:51 CEST 2009</date>
    <body>Hi there, configure/make fails on osx 10.5.7 (64bit core 2 duo, macbook pro) [17][ ~/checkout/resin-4.0.0 ]% ./configure checking build system type... i386-apple-darwin9.7.0 checking host system type... i386-apple-darwin9.7.0 checking target system type... i386-apple-darwin9.7.0 checking for a BSD-compatible install... /opt/local/bin/ginstall -c checking whether build environment is sane... yes checking for a thread-safe mkdir -p... /opt/local/bin/gmkdir -p checking for gawk... no checking for mawk... no checking for nawk... no checking for awk... awk checking whether make sets $(MAKE)... yes checking for gcc... gcc checking for C compiler default output file name... a.out checking whether the C compiler works... yes checking whether we are cross compiling... no checking for suffix of executables... checking for suffix of object files... o checking whether we are using the GNU C compiler... yes checking whether gcc accepts -g... yes checking for gcc option to accept ISO C89... none needed checking for style of include used by make... GNU checking dependency style of gcc... none checking for a sed that does not truncate output... /usr/bin/sed checking for grep that handles long lines and -e... /usr/bin/grep checking for egrep... /usr/bin/grep -E checking for ld used by gcc... /usr/libexec/gcc/i686-apple-darwin9/4.0.1/ld checking if the linker (/usr/libexec/gcc/i686-apple-darwin9/4.0.1/ld) is GNU ld... no checking for egrep... (cached) /usr/bin/grep -E checking how to run the C preprocessor... gcc -E checking for ANSI C header files... yes checking for sys/types.h... yes checking for sys/stat.h... yes checking for stdlib.h... yes checking for string.h... yes checking for memory.h... yes checking for strings.h... yes checking for inttypes.h... yes checking for stdint.h... yes checking for unistd.h... yes checking sys/poll.h usability... yes checking sys/poll.h presence... yes checking for sys/poll.h... yes checking sys/epoll.h usability... no checking sys/epoll.h presence... no checking for sys/epoll.h... no ROOT: ROOT2: /usr/local/resin ROOT3: /usr/local/resin checking for JAVA_HOME... /System/Library/Frameworks/JavaVM.framework/Home checking for /usr/libexec/gcc/i686-apple-darwin9/4.0.1/ld option to reload object files... -r checking for BSD-compatible nm... /usr/bin/nm -p checking whether ln -s works... yes checking how to recognize dependent libraries... pass_all checking dlfcn.h usability... yes checking dlfcn.h presence... yes checking for dlfcn.h... yes checking for g++... g++ checking whether we are using the GNU C++ compiler... yes checking whether g++ accepts -g... yes checking dependency style of g++... none checking how to run the C++ preprocessor... g++ -E checking for g77... no checking for xlf... no checking for f77... no checking for frt... no checking for pgf77... no checking for cf77... no checking for fort77... no checking for fl32... no checking for af77... no checking for xlf90... no checking for f90... no checking for pgf90... no checking for pghpf... no checking for epcf90... no checking for gfortran... no checking for g95... no checking for xlf95... no checking for f95... no checking for fort... no checking for ifort... no checking for ifc... no checking for efc... no checking for pgf95... no checking for lf95... no checking for ftn... no checking whether we are using the GNU Fortran 77 compiler... no checking whether  accepts -g... no checking the maximum length of command line arguments... 196608 checking command to parse /usr/bin/nm -p output from gcc object... rm: conftest.dSYM: is a directory ok checking for objdir... .libs checking for ar... ar checking for ranlib... ranlib checking for strip... strip checking for dsymutil... dsymutil checking for nmedit... nmedit checking for -single_module linker flag... yes checking for -exported_symbols_list linker flag... yes rm: conftest.dSYM: is a directory checking if gcc supports -fno-rtti -fno-exceptions... no checking for gcc option to produce PIC... -fno-common checking if gcc PIC flag -fno-common works... yes checking if gcc static flag -static works... no checking if gcc supports -c -o file.o... yes checking whether the gcc linker (/usr/libexec/gcc/i686-apple-darwin9/4.0.1/ld) supports shared libraries... yes checking dynamic linker characteristics... darwin9.7.0 dyld checking how to hardcode library paths into programs... immediate checking whether stripping libraries is possible... yes checking if libtool supports shared libraries... yes checking whether to build shared libraries... yes checking whether to build static libraries... yes configure: creating libtool appending configuration tag "CXX" to libtool checking for ld used by g++... /usr/libexec/gcc/i686-apple-darwin9/4.0.1/ld checking if the linker (/usr/libexec/gcc/i686-apple-darwin9/4.0.1/ld) is GNU ld... no checking whether the g++ linker (/usr/libexec/gcc/i686-apple-darwin9/4.0.1/ld) supports shared libraries... yes checking for g++ option to produce PIC... -fno-common checking if g++ PIC flag -fno-common works... yes checking if g++ static flag -static works... no checking if g++ supports -c -o file.o... yes checking whether the g++ linker (/usr/libexec/gcc/i686-apple-darwin9/4.0.1/ld) supports shared libraries... yes checking dynamic linker characteristics... darwin9.7.0 dyld (cached) (cached) checking how to hardcode library paths into programs... immediate appending configuration tag "F77" to libtool Using shared library flags from /usr/sbin/apxs -n checking if Java is 64-bit... yes Using Apache CFLAGS:   -DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK -no-cpp-precomp checking for JNI in /System/Library/Frameworks/JavaVM.framework/Home/include ... found Using JVMTI for class reloading Using openssl include in ... /usr/include Using openssl lib in ... /usr/lib Using openssl libraries ...  -lssl -lcrypto configure: creating ./config.status config.status: creating Makefile config.status: creating modules/c/src/Makefile config.status: creating modules/c/src/common/Makefile config.status: creating modules/c/src/apache2/Makefile config.status: creating modules/c/src/resin_os/Makefile config.status: creating init.d/resin config.status: executing depfiles commands Resin Configuration summary: RESIN_HOME: /usr/local/resin root: /usr/local/resin conf: /usr/local/resin/conf log : /usr/local/resin/log init: + poll() for keepalives + OpenSSL 0.9.7l 28 Sep 2006 OpenSSL include: /usr/include OpenSSL lib: /usr/lib OpenSSL libraries:  -lssl -lcrypto JAVA_HOME: /System/Library/Frameworks/JavaVM.framework/Home + 64-bit JNI in -I/System/Library/Frameworks/JavaVM.framework/Home/include JNI CFLAGS: -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -DHAS_SOCK_TIMEOUT -DHAS_JVMTI [18][ ~/checkout/resin-4.0.0 ]% make (cd modules/c/src; make) for dir in common resin_os  ; do (cd $dir; make); done gcc -c -I/usr/include -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -DHAS_SOCK_TIMEOUT -DHAS_JVMTI stream.c gcc -c -I/usr/include -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -DHAS_SOCK_TIMEOUT -DHAS_JVMTI config.c gcc -c -I/usr/include -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -DHAS_SOCK_TIMEOUT -DHAS_JVMTI memory.c /Users/jon/checkout/resin-4.0.0/libtool --silent --mode=compile gcc -o stream.lo -c -I/usr/include -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -DHAS_SOCK_TIMEOUT -DHAS_JVMTI stream.c /Users/jon/checkout/resin-4.0.0/libtool --silent --mode=compile gcc -o config.lo -c -I/usr/include -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -DHAS_SOCK_TIMEOUT -DHAS_JVMTI config.c /Users/jon/checkout/resin-4.0.0/libtool --silent --mode=compile gcc -o memory.lo -c -I/usr/include -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -DHAS_SOCK_TIMEOUT -DHAS_JVMTI memory.c gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -DHAS_SOCK_TIMEOUT -DHAS_JVMTI  -m64 -DRESIN_HOME=\"/usr/local/resin\" -I/usr/include -I/System/Library/Frameworks/JavaVM.framework/Home/include -I../common -DCPU=\"i386\" -DOS=   -c -o boot.o boot.c gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -DHAS_SOCK_TIMEOUT -DHAS_JVMTI  -m64 -DRESIN_HOME=\"/usr/local/resin\" -I/usr/include -I/System/Library/Frameworks/JavaVM.framework/Home/include -I../common -DCPU=\"i386\" -DOS=   -c -o java.o java.c gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -DHAS_SOCK_TIMEOUT -DHAS_JVMTI  -m64 -DRESIN_HOME=\"/usr/local/resin\" -I/usr/include -I/System/Library/Frameworks/JavaVM.framework/Home/include -I../common -DCPU=\"i386\" -DOS=   -c -o jni_os.o jni_os.c gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -DHAS_SOCK_TIMEOUT -DHAS_JVMTI  -m64 -DRESIN_HOME=\"/usr/local/resin\" -I/usr/include -I/System/Library/Frameworks/JavaVM.framework/Home/include -I../common -DCPU=\"i386\" -DOS=   -c -o jni_jvmti.o jni_jvmti.c gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -DHAS_SOCK_TIMEOUT -DHAS_JVMTI  -m64 -DRESIN_HOME=\"/usr/local/resin\" -I/usr/include -I/System/Library/Frameworks/JavaVM.framework/Home/include -I../common -DCPU=\"i386\" -DOS=   -c -o jni_socket.o jni_socket.c gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -DHAS_SOCK_TIMEOUT -DHAS_JVMTI  -m64 -DRESIN_HOME=\"/usr/local/resin\" -I/usr/include -I/System/Library/Frameworks/JavaVM.framework/Home/include -I../common -DCPU=\"i386\" -DOS=   -c -o memory.o memory.c gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -DHAS_SOCK_TIMEOUT -DHAS_JVMTI  -m64 -DRESIN_HOME=\"/usr/local/resin\" -I/usr/include -I/System/Library/Frameworks/JavaVM.framework/Home/include -I../common -DCPU=\"i386\" -DOS=   -c -o std.o std.c gcc -arch x86_64  -L/usr/lib -framework JavaVM -o libresin_os.jnilib boot.o java.o jni_os.o jni_jvmti.o jni_socket.o memory.o std.o Undefined symbols: "_main", referenced from: start in crt1.10.5.o ld: symbol(s) not found collect2: ld returned 1 exit status make[2]: *** [libresin_os.jnilib] Error 1 make[1]: *** [plugins] Error 2 make: *** [all] Error 2</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0.0 on osx make problem</header>
    <date>Tue Jun 30 04:32:34 CEST 2009</date>
    <body>Hi Jon, I confirmed this and filed this as a bug here: http://bugs.caucho.com/view.php?id=3588 Thanks, Emil http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>[Resin-interest] bugs.caucho.com down?</header>
    <date>Fri Jun 26 03:59:55 CEST 2009</date>
    <body>As of this writing, it seems to be. Connection refused.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] bugs.caucho.com down?</header>
    <date>Fri Jun 26 04:14:56 CEST 2009</date>
    <body>Yep, it's currently down – hardware failure at our provider's. We had been promised a fix soon. Thanks, --Alex http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] bugs.caucho.com down?</header>
    <date>Fri Jun 26 04:22:08 CEST 2009</date>
    <body>Ah bummer. Thanks for the quick reply. Do bug reports on this list get noticed? http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] bugs.caucho.com down?</header>
    <date>Fri Jun 26 05:03:59 CEST 2009</date>
    <body>The circumstances seem to call for it. If you use [bug] in subject I'll pick it up and enter into bugs.caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] bugs.caucho.com down?</header>
    <date>Fri Jun 26 05:16:00 CEST 2009</date>
    <body>Thanks for that, Alex, but I checked again, and Mantis was up, so I've logged a couple bugs that are currently plaguing me. -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Serious performance issue in 4.0</header>
    <date>Fri Jun 26 03:51:56 CEST 2009</date>
    <body>So, to follow up on my earlier post: Use of JSP-2.0 style tag definitions causes the calling page to get recompiled each and every time it's called. Adding a simple-loader to point to WEB-INF/root fixes this, because it avoids the ClassNotFoundException resin gets when attempting to load the class for the tag (how it manages to work even though it can't load the class escapes me). Unfortunately that seems to introduce a dependency check on that directory that causes resin to reload the context every time a JSP is changed. This strikes me as a fairly serious problem, particularly because Resin leaks terribly when it reloads the context, and so I have to shut it down and restart it. -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Replication of Principals</header>
    <date>Thu Jun 25 08:44:20 CEST 2009</date>
    <body>Hi I'm using resin 3.1.6 and I've run into an issue in our clustered environment. When a client hits our application for the first time we authenticate them as a guest and then the user may re-authenticate using their client credentials. What seems to be happening is a client hits server 1 and get authenticated as a guest, they then login on server 2 and get a new principal associated with their session. Later on they get directed back to server 1 and while the session detail is replicated it is once again associated with the guest principal from when they first visited. If the two principals are created on the one machine and then the user is directed to the second server everything is fine. I'm in the early stages of fully diagnosing this but can anyone confirm this is the case and if its fixed in a later version? Thanks, Dan</body>
  </mail>
  <mail>
    <header>[Resin-interest] Bug in 4.0.0: JSP tags cause page to recompile	every time.</header>
    <date>Thu Jun 25 03:58:55 CEST 2009</date>
    <body>I've got a fairly straightforward page that includes these lines: . . . . . . . . . In resin 4.0.0, the presence of the &amp;lt;lz:base/&amp;gt; tag triggers some work on Resin's part that results in recompiling both the tag and the page. The tag is defined by a .tag file in WEB-INF/tags/lz: %&amp;gt;&amp;lt;%@ taglib prefix="c" uri=" http://java.sun.com/jsp/jstl/core" %&amp;gt;&amp;lt;%@ taglib prefix="fmt" uri=" http://java.sun.com/jsp/jstl/fmt" %&amp;gt;&amp;lt;% request.getLocalPort() != 80) request.getLocalPort() != 443)) Here is what I see in the logs (set to FINE for most everything): the request comes in, resin decides that the class created for the base tag is missing, recompiles it, and then detects that the class digest is modified (notably, the new digest is -1, whereas the old is -4088317106370417708). So then it compiles the page's JSP again. Timing for the request on the browser shows it takes about 300 ms (repeated reloads) to get it when I include the tag, and about 40 ms when I don't. If I include the code for the tag directly in my JSP, I see no recompilation, and similarly rapid page loads. Referencing JSTL tags like fmt: does not seem to cause this difficulty. I also see a "_jsp._index__jsp destroy" message in the logs before it gets the ClassNotFoundException. I don't know what that means. Here are the logs: (com.caucho.server.port.TcpConnection) TcpConnection[id=9,] starting connection TcpConnection[id=http--80-9, http://*:80,ACCEPT ], total=5 (com.caucho.server.http.HttpRequest) Http[9] GET / HTTP/1.1 (com.caucho.server.http.HttpRequest) Http[9] Remote-IP: 12.155.29.1:56273 (com.caucho.server.http.HttpRequest) Http[9] Host: satdb.org (com.caucho.server.http.HttpRequest) Http[9] User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_5_7; en-us) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Safari/530.17 (com.caucho.server.http.HttpRequest) Http[9] Cache-Control: max-age=0 (com.caucho.server.http.HttpRequest) Http[9] Accept: application/ xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/ *;q=0.5 (com.caucho.server.http.HttpRequest) Http[9] Accept-Language: en-us (com.caucho.server.http.HttpRequest) Http[9] Accept-Encoding: gzip, deflate (com.caucho.server.http.HttpRequest) Http[9] Cookie: JSESSIONID=aaaRgt_gP5iYl6bUVcvis (com.caucho.server.http.HttpRequest) Http[9] Connection: keep-alive _jsp._index__jsp destroy Jsp[] uri:/index.jsp(cp:,app:/export/home/satdb/www/org/satdb/www) -&amp;gt; / export/home/satdb/www/org/satdb/www/index.jsp (com.caucho.make.ClassDependency) java.lang.ClassNotFoundException: _jsp._WEB_22dINF._tags._lz._base__tag in EnvironmentClassLoader[web- app: http://default ] com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java: 1313) com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java: 1291) java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320) java.lang.Class.forName0(Native Method) java.lang.Class.forName(Class.java:247) com.caucho.make.ClassDependency.&amp;lt;init&amp;gt;(ClassDependency.java:84) _jsp._index__jsp.init(_index__jsp.java:143) com.caucho.jsp.JspManager.preload(JspManager.java:320) com.caucho.jsp.JspManager.compile(JspManager.java:218) com.caucho.jsp.JspManager.createPage(JspManager.java:171) com.caucho.jsp.JspManager.createPage(JspManager.java:150) com.caucho.jsp.PageManager.getPage(PageManager.java:307) com.caucho.jsp.PageManager.getPage(PageManager.java:237) com.caucho.jsp.PageManager.getPage(PageManager.java:220) com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) com.caucho.jsp.QServlet.getPage(QServlet.java:210) com .caucho .server.dispatch.PageFilterChain.compilePage(PageFilterChain.java:238) com .caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java: 145) com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:114) com .caucho .server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) org .springframework .orm .hibernate3 .support .OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java: 198) org.springframework.web.filter.OncePerRequestFilter.doFilter (OncePerRequestFilter.java:76) com .caucho .server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) com .caucho .server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:185) com .caucho .server.dispatch.ServletInvocation.service(ServletInvocation.java:264) com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:275) com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java: 644) com.caucho.server.port.TcpConnection $AcceptTask.doAccept(TcpConnection.java:1311) com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java: 1252) $PoolThread.runTasks(ThreadPool.java:866) $PoolThread.run(ThreadPool.java:779) (com.caucho.make.ClassDependency) _jsp._WEB_22dINF._tags._lz._base__tag class digest is modified (old=-4088317106370417708,new=-1) (com.caucho.java.JavaCompiler) Compiling _jsp/_index__jsp.java (com.caucho.loader.JarListLoader) tools.jar does not exist (path=/usr/ local/java/versions/jdk1.6.0_12/jre/lib/tools.jar) (com.caucho.java.InternalCompiler) merging .smap for _index__jsp.class</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bug in 4.0.0: JSP tags cause page to recompile	every time.</header>
    <date>Thu Jun 25 04:07:57 CEST 2009</date>
    <body>Slight clarification: the tag isn't getting recompiled, just the page that calls it. http://java.sun.com/jsp/jstl/core" http://java.sun.com/jsp/jstl/fmt" http://*:80,ACCEPT ], total=5 http://default ] http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bug in 4.0.0: JSP tags cause page to recompile	every time.</header>
    <date>Thu Jun 25 06:09:11 CEST 2009</date>
    <body>I found a partial solution: I added this line to app-default.xml: It seems to me resin ought to implicitly add the work-dir, wherever it happens to be, but now the class loader can find the classes. http://java.sun.com/jsp/jstl/core" http://java.sun.com/jsp/jstl/fmt" http://*:80,ACCEPT ], total=5 http://default ] http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Sometimes resin can find jdbc driver in webapp,	other times no. What gives?</header>
    <date>Thu Jun 25 03:06:53 CEST 2009</date>
    <body>It seems to me that resin ought to be able to find the MySQL JDBC driver when the jar is loaded from WEB-INF/lib, rather than requiring it to be installed in resin's lib. Is there a way to see when each specific jar gets loaded, so I can sort of verify that resin should have access to it or not? Thanks.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Sometimes resin can find jdbc driver in webapp,	other times no. What gives?</header>
    <date>Thu Jun 25 03:15:53 CEST 2009</date>
    <body>where'd you get that idea?  unless things have changed very dramatically since 3.1.6 (the version I'm using) you can put database drivers in WEB-INF/lib just fine. I don't know a simple way to find out the location from which classes are loaded.  I agree -- that could be quite useful. If you're having problem with the driver living in WEB-INF/lib, then it's probably because you've got something *else* in resin/lib that needs the driver.  the classloaders can look "up", but they can't look "down". http://maillist.caucho.com/mailman/listinfo/resin-interest -- joe</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] SOLVED: Sometimes resin can find jdbc driver	in webapp, other times no. What gives?</header>
    <date>Thu Jun 25 03:41:55 CEST 2009</date>
    <body>I got the idea from being really dumb. I was just about to post as much. I had a typo in my resin.xml file, and it wasn't finding my webapp, so of course it couldn't find the driver. It's working just fine. I think, a long time ago, it was more problematic, and I might've had that thought stuck in my head. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Sometimes resin can find jdbc driver in webapp,	other times no. What gives?</header>
    <date>Thu Jun 25 16:26:09 CEST 2009</date>
    <body>If you define your database pools at the server level in resin.conf, then you need to put the JDBC drivers in the resin/lib directory so the pools can be created when the server starts. Privileged/Confidential Information may be contained in this message. If you are not the addressee indicated in this message (or responsible for delivery of the message to such person), you may not copy or deliver this message to anyone. In such case, you should destroy this message and kindly notify the sender by reply email. Please advise immediately if you or your employer does not consent to Internet email for messages of this kind. Opinions, conclusions and other information in this message that do not relate to the official business of my firm shall be understood as neither given nor endorsed by it.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Sometimes resin can find jdbc driver in webapp, other times no. What gives?</header>
    <date>Thu Jun 25 16:56:14 CEST 2009</date>
    <body>For resin-managed database pools or other shared resources/beans, polluting resin/lib with non-resin libraries can be avoided by adding a class-loader section to the top of resin.conf and defining a tree loader path or, if you want to explicitly iterate every include, a library loader path for every jar. -Leonid -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Shane Cruz Sent: Thursday, June 25, 2009 10:24 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Sometimes resin can find jdbc driver in webapp, other times no. What gives? If you define your database pools at the server level in resin.conf, then you need to put the JDBC drivers in the resin/lib directory so the pools can be created when the server starts. Privileged/Confidential Information may be contained in this message. If you are not the addressee indicated in this message (or responsible for delivery of the message to such person), you may not copy or deliver this message to anyone. In such case, you should destroy this message and kindly notify the sender by reply email. Please advise immediately if you or your employer does not consent to Internet email for messages of this kind. Opinions, conclusions and other information in this message that do not relate to the official business of my firm shall be understood as neither given nor endorsed by it.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Why does 4.0 on port 80 result in JNI errors,	while port 8080 is okay?</header>
    <date>Wed Jun 24 04:01:58 CEST 2009</date>
    <body>I've installed Resin Open Source 4.0 as per the instructions here: http://caucho.com/resin/doc/starting.xtp It seems to launch fine on port 8080 (after fixing some directory permissions), but when I change that to port 80, it complains about JNI: Jun 23, 2009 6:58:10 PM com.caucho.boot.WatchdogProcess createProcess WARNING: java.io.IOException: Socket JNI is not available because JNI support has not been compiled. On Unix, run ./configure; make; make install.  On Windows, check for resin.dll. java.lang.UnsatisfiedLinkError: no resin_os in java.library.path java.io.IOException: Socket JNI is not available because JNI support has not been compiled. On Unix, run ./configure; make; make install.  On Windows, check for resin.dll. java.lang.UnsatisfiedLinkError: no resin_os in java.library.path at com.caucho.vfs.JniServerSocketImpl.checkJni(JniServerSocketImpl.java: 115) at com.caucho.vfs.JniServerSocketImpl.create(JniServerSocketImpl.java:98) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun .reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java: 39) at sun .reflect .DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java: 25) at java.lang.reflect.Method.invoke(Method.java:597) at com.caucho.vfs.QJniServerSocket.createJNI(QJniServerSocket.java:135) at com.caucho.server.port.Port.bindForWatchdog(Port.java:1154) at com.caucho.boot.WatchdogProcess.createProcess(WatchdogProcess.java:562) at com.caucho.boot.WatchdogProcess.run(WatchdogProcess.java: 102) at com.caucho.boot.WatchdogTask.run(WatchdogTask.java:115) at java.lang.Thread.run(Thread.java:619) Is it because it requires JNI to bind to port 80 and then switch to running as non-root? That then requires Resin Pro, right? -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.2.1 can't find my taglib dir?</header>
    <date>Wed Jun 24 01:14:51 CEST 2009</date>
    <body>After cleaning up my webapp's libraries, and making sure it still runs on resin 4.0 (it does), I deployed it again (to a Resin 3.2.1 server). I get the following complaint: [show] /index.jsp:5: 'base' is an unknown tag in tag library 'urn:jsptagdir:/WEB-INF/tags/' . com.caucho.jsp.JspLineParseException: /index.jsp:5: 'base' is an unknown tag in tag library 'urn:jsptagdir:/WEB-INF/tags/'. at com.caucho.jsp.java.JavaJspBuilder.error(JavaJspBuilder.java:504) at com.caucho.jsp.java.JavaJspBuilder.startElement(JavaJspBuilder.java:259) Under 4.0, I see log errors also complaining about this tag, but the tag always executes, and so I've come to ignore the complaint. (com.caucho.make.ClassDependency) java.lang.ClassNotFoundException: _jsp._WEB_22dINF._tags._base__tag in EnvironmentClassLoader[web-app: http://default/sat ] com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java: 1313) com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java: 1291) But i wonder what's going on. My JSP pages refer to the tag with: And as near as I can tell, that's the right way to do it. Am I missing something? TIA, Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.2.1 can't find my taglib dir?</header>
    <date>Wed Jun 24 01:27:47 CEST 2009</date>
    <body>Hmm, I'm also seeing what appears to be the re-compilation of my .jsp on every request, as well as a couple other concerns (tools.jar doesn't exist): (com.caucho.make.ClassDependency) _jsp._WEB_22dINF._tags._lz._base__tag class digest is modified (old=-4088317106370417708,new=-1) (com.caucho.java.JavaCompiler) Compiling _jsp/_WEB_22dINF/_jsp/ _missionList__jsp.java (com.caucho.loader.JarListLoader) tools.jar does not exist (path=/ System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/ tools.jar) (com.caucho.loader.JarListLoader) tools.jar does not exist (path=/ System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/lib/tools.jar) (com.caucho.java.InternalCompiler) (com.caucho.java.JavaCompiler) merging .smap for _missionList__jsp.class Is this a concern? I certainly don't want to be recompiling my page each and every time it's requested. TIA http://default/sat http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Memory leaks when reloading context</header>
    <date>Wed Jun 24 00:53:43 CEST 2009</date>
    <body>I love resin's ability to detect changes in the webapp, and reload the context when those occur. Really speeds development. But after 3 - 7 such reloads, the whole thing fails, usually with a complaint about PermGen space. I can put off the problem by allocating more memory to resin, but that's not really a solution. I know others have written about this in the past, and I've had it happen with resin as far back as 3.0 (maybe even earlier). Is this something I'm doing wrong in my webapp, or does resin keep references to things around? Is there any way to track it down and work around the problem, if it is indeed a problem in resin? Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin &amp;amp; Wildcard SSL Certs?</header>
    <date>Tue Jun 23 23:37:23 CEST 2009</date>
    <body>Does anyone know if Resin (Pro 3.1.9 64-bit with OpenSSL) would have any problems handling a wildcard ssl certificate, as opposed to a domain specific cert, e.g. *.blahblah.com vs. poolOne.blahblah.com, poolTwo.blahblah.com, poolThree.blahblah.com. We're considering getting one because a few of our pools require ssl and it's easier to manage, though more expensive, to get just one certificate for all of them rather than deal with multiple different certs for the different pools (i.e. remembering to renew them and make sure they're deployed, etc). We know it works with IIS, but have never tried a wildcard cert with Resin and OpenSSL. I wouldn't anticipate there being a problem, but obviously we'd rather not spend the money only to find out it won't work for some reason. Anyone know? Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin &amp;amp; Wildcard SSL Certs?</header>
    <date>Tue Jun 23 23:46:24 CEST 2009</date>
    <body>We have used wildcard SSL certificates with resin 2.1.x using both OpenSSL and JSSE, and that worked fine.  I don't remember if I have tested it specifically for 3.1.x, but I see no reason why it wouldn't work. - Erik - http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin &amp;amp; Wildcard SSL Certs?</header>
    <date>Wed Jun 24 05:24:04 CEST 2009</date>
    <body>Thanks, Erik. Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin &amp;amp; Wildcard SSL Certs?</header>
    <date>Thu Jun 25 23:34:29 CEST 2009</date>
    <body>We use wildcard certs with 3.0.18Pro and 3.1.6Pro (JSSE and 32bit) without problems. If only we could correctly limit the cipher suites. http://bugs.caucho.com/view.php?id=3431 (which is a reopen of) http://bugs.caucho.com/view.php?id=2360 Scott or Emil, either of you had a chance to review my suggested changes, yet? + jay http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Okay, seriously, WTF is up with this?</header>
    <date>Tue Jun 23 19:37:46 CEST 2009</date>
    <body>I run resin 4.0 on a Mac with Java 6. I build my app here, and then I rsync it to resin running on an OpenSolaris machine also running Java 6. More often than not, I end up with weird Java link issues, like NoSuchMethodError or AbstractMethodError. I've written about this before but never gotten a reply. This never happened when I targeted a RedHat 7.2 machine I have, also running a recent Java (but Resin 3.0.x). Any idea what's going on? TIA, Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Okay, seriously, WTF is up with this?</header>
    <date>Tue Jun 23 19:45:47 CEST 2009</date>
    <body>I've had this issue with my new Mac... Check where Current and CurrentJDK point to in /System/Library/Frameworks/JavaVM.framework/Versions I've found that Mac Java updates keep pointing back to the 1.5 version. -- Serge Knystautas http://www.lokitech.com p. 301.656.5501 e. ser...@lokitech.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Okay, seriously, WTF is up with this?</header>
    <date>Tue Jun 23 19:59:48 CEST 2009</date>
    <body>Serge, thanks for the reply. Unfortunately, it doesn't appear to be the Mac's fault: I just checked out the sources and built them on the Solaris machine, and I still have issues. Thing is, it's never the same issue. Now it's. java.lang.NoSuchMethodError: org.springframework.util.ReflectionUtils.makeAccessible(Ljava/lang/ reflect/Constructor;)V http://www.lokitech.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Okay, seriously, WTF is up with this?</header>
    <date>Tue Jun 23 20:17:51 CEST 2009</date>
    <body>exceptions like these pretty much always (in fact always?) indicate a mismatch between the compilation and runtime environments.  A method that existed when the code was compiled doesn't exist when the code is run. in this case, that method (ReflectionUtils.makeAccessible(Constructor)) exists in Spring 2.5, but not in earlier versions.  I don't know precisely when it was added, but it certainly didn't exist in Spring 2.0. so, my guess is that you're building your app against spring 2.5 (or so) but running it against an earlier version.  check for stale spring libraries in the runtime app server. http://www.lokitech.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- joe</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Okay, seriously, WTF is up with this?</header>
    <date>Tue Jun 23 20:37:55 CEST 2009</date>
    <body>While your argument is perfectly correct, I don't see how that's the case here. I build all of the libraries into the webapp WEB-INF/lib directory. It is the exact same set of libraries in all environments. However, you got me to thinking: what if my webapp build is including multiple versions of the same classes, and they're loading in different orders in resin? Sure enough, I have spring.jar 2.5.6, and spring-core.jar 2.0.8, and they overlap. Ant always builds the classpath deterministically, but apparently Resin doesn't load deterministically (from one installation to the next: OS changes, slight resin differences)? I haven't verified this by cleaning up my webapp, but it's something to check. Thanks for the hint! http://www.lokitech.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Okay, seriously, WTF is up with this?</header>
    <date>Tue Jun 23 20:44:57 CEST 2009</date>
    <body>Yep, that's it! Silly me (of course). Boo Resin/Nexenta, too at least a little. Thanks! http://www.lokitech.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Chunked transfer going out 1 byte at a time?</header>
    <date>Tue Jun 23 10:02:27 CEST 2009</date>
    <body>I'm seeing this in my logs: (com.caucho.server.connection.AbstractHttpResponse) Http[5] HTTP/1.1 200 OK (com.caucho.server.connection.AbstractHttpResponse) Http[5] Content- Type: application/x-hessian; charset=null (com.caucho.server.connection.AbstractHttpResponse) Http[5] Transfer- Encoding: chunked (com.caucho.server.connection.ResponseStream) Http[5] write-chunk(8191) (com.caucho.server.connection.ResponseStream) Http[5] write-chunk(8192) (com.caucho.server.connection.ResponseStream) Http[5] write-chunk(1) (com.caucho.server.connection.ResponseStream) Http[5] write-chunk(1) (com.caucho.server.connection.ResponseStream) Http[5] write-chunk(1) (last line repeated thousands of times) I'm not sure, but it seems that it's writing thousands of 1-byte chunks, which is going to double or triple the total number of bytes sent. Any ideas what's going on? Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin Pro 3.1.9 - JDK Deadlock on Startup</header>
    <date>Fri Jun 19 02:25:01 CEST 2009</date>
    <body>I've never seen this happen with Resin. But ever since upgrading to Resin Pro 3.1.9 (from Pro 3.0.21), it's happening several times per week with different servers during restarts. Environment: Windows 2003 64-bit Server (SP2), Resin Pro 3.1.9 (100 Server License), JDK 1.6.0_13 (64-bit) I looked in the 1.6.0_14 release notes and didn't see anything specific to deadlock situations that were fixed in the .14 release. I don't know if this is a problem with our code, or Resin, or the JDK, or some combination thereof. Other than the obvious, "Why is this happening and how can I fix it?" question, I'm also curious about the 15 minutes that it always takes resin to notice the deadlock and restart. Is this 15 minutes configurable? If so, where can I adjust it and what are the implications of making it &amp;lt; 15 minutes? Rob Here's an example of the arguments we pass to Java. Most of our servers are configured similarly with variations in the heap sizes. And here's the portion of the log file from when a deadlock occurs. stopping [This is when the restart request is sent. --Rob] size=64M [Resin starts to restart here. --Rob] b03, Cp1252, en b02, 64, mixed mode, Sun Microsystems Inc. Resin. [15 minutes later is when Resin has detected the deadlock and restarts. --Rob] javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .ThreadInfo ,items = ((itemName = blockedCount ,itemType=javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = blockedTime ,itemType=javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = inNative ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = lockInfo ,itemType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer))))), (itemName = lockName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockOwnerId ,itemType=javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = lockOwnerName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockedMonitors ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .MonitorInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackDepth ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackFrame ,itemType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean))))))),primitiveArray=false)), (itemName = lockedSynchronizers ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Integer)))),primitiveArray=false)), (itemName = stackTrace ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean)))),primitiveArray=false)), (itemName = suspended ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = threadId ,itemType=javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = threadName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = threadState ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = waitedCount ,itemType=javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = waitedTime ,itemType = javax .management .openmbean blockedTime=-1, inNative=false, lockInfo = javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType (name = java .lang .Integer lockname=com.caucho.loader.environmentclassloa...@135c40eb, lockOwnerId=25, lockOwnerName=resin-8, lockedMonitors=[Ljavax.management.openmbean.CompositeData;@62135133, lockedSynchronizers =[Ljavax.management.openmbean.CompositeData;@62381d92, stackTrace=[Ljavax.management.openmbean.CompositeData;@521d8e9e, suspended=false, threadId=27, threadName=resin-10, javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .ThreadInfo ,items = ((itemName = blockedCount ,itemType=javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = blockedTime ,itemType=javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = inNative ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = lockInfo ,itemType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer))))), (itemName = lockName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockOwnerId ,itemType=javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = lockOwnerName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockedMonitors ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .MonitorInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackDepth ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackFrame ,itemType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean))))))),primitiveArray=false)), (itemName = lockedSynchronizers ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Integer)))),primitiveArray=false)), (itemName = stackTrace ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean)))),primitiveArray=false)), (itemName = suspended ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = threadId ,itemType=javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = threadName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = threadState ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = waitedCount ,itemType=javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = waitedTime ,itemType = javax .management .openmbean blockedTime=-1, inNative=false, lockInfo = javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType (name = java lockname=com.caucho.loader.classen...@23042fcc, lockOwnerId=27, lockOwnerName=resin-10, lockedMonitors=[Ljavax.management.openmbean.CompositeData;@67de0c09, lockedSynchronizers =[Ljavax.management.openmbean.CompositeData;@22e85825, stackTrace=[Ljavax.management.openmbean.CompositeData;@43f2f70a, suspended=false, threadId=25, threadName=resin-8, threadState=BLOCKED, b03, Cp1252, en b02, 64, mixed mode, Sun Microsystems Inc.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 3.1.9 - JDK Deadlock on Startup</header>
    <date>Fri Jun 19 04:32:20 CEST 2009</date>
    <body>I've never seen this happen with Resin. But ever since upgrading to Resin Pro 3.1.9 (from Pro 3.0.21), it's happening several times per week with different servers during restarts. Environment: Windows 2003 64-bit Server (SP2), Resin Pro 3.1.9 (100 Server License), JDK 1.6.0_13 (64-bit) I looked in the 1.6.0_14 release notes and didn't see anything specific to deadlock situations that were fixed in the .14 release. I don't know if this is a problem with our code, or Resin, or the JDK, or some combination thereof. It might be a classloading-related deadlock.  The log is horrible (it's straight JMX output), but I think it has some classloader classes that might be a problem. Other than the obvious, "Why is this happening and how can I fix it?" question, I'm also curious about the 15 minutes that it always takes resin to notice the deadlock and restart. Is this 15 minutes configurable? If so, where can I adjust it and what are the implications of making it &amp;lt; 15 minutes? The deadlock check is part of the &amp;lt;ping&amp;gt; functionality.  There's an needs to wait for the server to start before pinging. I've added a bug report to at least clean up that log report. -- Scott Rob Here's an example of the arguments we pass to Java. Most of our servers are configured similarly with variations in the heap sizes. And here's the portion of the log file from when a deadlock occurs. stopping [This is when the restart request is sent. --Rob] size=64M [Resin starts to restart here. --Rob] b03, Cp1252, en b02, 64, mixed mode, Sun Microsystems Inc. Resin. [15 minutes later is when Resin has detected the deadlock and restarts. --Rob] javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .ThreadInfo ,items = ((itemName = blockedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = blockedTime ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = inNative ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = lockInfo ,itemType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer))))), (itemName = lockName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockOwnerId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = lockOwnerName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockedMonitors ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .MonitorInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackDepth ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackFrame ,itemType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean))))))),primitiveArray=false)), (itemName = lockedSynchronizers ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Integer)))),primitiveArray=false)), (itemName = stackTrace ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean)))),primitiveArray=false)), (itemName = suspended ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = threadId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = threadName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = threadState ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = waitedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = waitedTime ,itemType = javax .management .openmbean blockedTime=-1, inNative=false, lockInfo = javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType (name = java .lang .Integer lockname=com.caucho.loader.environmentclassloa...@135c40eb, lockOwnerId=25, lockOwnerName=resin-8, lockedMonitors=[Ljavax.management.openmbean.CompositeData;@62135133, lockedSynchronizers =[Ljavax.management.openmbean.CompositeData;@62381d92, stackTrace=[Ljavax.management.openmbean.CompositeData;@521d8e9e, suspended=false, threadId=27, threadName=resin-10, javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .ThreadInfo ,items = ((itemName = blockedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = blockedTime ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = inNative ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = lockInfo ,itemType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer))))), (itemName = lockName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockOwnerId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = lockOwnerName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockedMonitors ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .MonitorInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackDepth ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackFrame ,itemType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean))))))),primitiveArray=false)), (itemName = lockedSynchronizers ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Integer)))),primitiveArray=false)), (itemName = stackTrace ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean)))),primitiveArray=false)), (itemName = suspended ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = threadId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = threadName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = threadState ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = waitedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = waitedTime ,itemType = javax .management .openmbean blockedTime=-1, inNative=false, lockInfo = javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType (name = java lockname=com.caucho.loader.classen...@23042fcc, lockOwnerId=27, lockOwnerName=resin-10, lockedMonitors=[Ljavax.management.openmbean.CompositeData;@67de0c09, lockedSynchronizers =[Ljavax.management.openmbean.CompositeData;@22e85825, stackTrace=[Ljavax.management.openmbean.CompositeData;@43f2f70a, suspended=false, threadId=25, threadName=resin-8, size=64M b03, Cp1252, en b02, 64, mixed mode, Sun Microsystems Inc.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 3.1.9 - JDK Deadlock on Startup</header>
    <date>Fri Jun 19 04:47:19 CEST 2009</date>
    <body>I've never seen this happen with Resin. But ever since upgrading to Resin Pro 3.1.9 (from Pro 3.0.21), it's happening several times per week with different servers during restarts. Environment: Windows 2003 64-bit Server (SP2), Resin Pro 3.1.9 (100 Server License), JDK 1.6.0_13 (64-bit) I looked in the 1.6.0_14 release notes and didn't see anything specific to deadlock situations that were fixed in the .14 release. I don't know if this is a problem with our code, or Resin, or the JDK, or some combination thereof. It might be a classloading-related deadlock.  The log is horrible (it's straight JMX output), but I think it has some classloader classes that might be a problem. Other than the obvious, "Why is this happening and how can I fix it?" question, I'm also curious about the 15 minutes that it always takes resin to notice the deadlock and restart. Is this 15 minutes configurable? If so, where can I adjust it and what are the implications of making it &amp;lt; 15 minutes? The deadlock check is part of the &amp;lt;ping&amp;gt; functionality.  There's an needs to wait for the server to start before pinging. Interesting, so even though I haven't defined a jsp page for the ping to check, it still operates? What is it checking? In any event, good to know. I'm going to crank this value down since our servers generally get started within about a minute or so. I'll pad it out a little to account for recompiling jsp's and such. Rob I've added a bug report to at least clean up that log report. -- Scott Rob Here's an example of the arguments we pass to Java. Most of our servers are configured similarly with variations in the heap sizes. And here's the portion of the log file from when a deadlock occurs. stopping [This is when the restart request is sent. --Rob] size=64M [Resin starts to restart here. --Rob] 1.6.0_13-b03, Cp1252, en b02, 64, mixed mode, Sun Microsystems Inc. Resin. [15 minutes later is when Resin has detected the deadlock and restarts. --Rob] javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .ThreadInfo ,items = ((itemName = blockedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = blockedTime ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = inNative ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = lockInfo ,itemType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer))))), (itemName = lockName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockOwnerId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = lockOwnerName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockedMonitors ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .MonitorInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackDepth ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackFrame ,itemType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean))))))),primitiveArray=false)), (itemName = lockedSynchronizers ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Integer)))),primitiveArray=false)), (itemName = stackTrace ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean)))),primitiveArray=false)), (itemName = suspended ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = threadId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = threadName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = threadState ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = waitedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = waitedTime ,itemType = javax .management .openmbean blockedTime=-1, inNative=false, lockInfo = javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType (name = java .lang .Integer lockname=com.caucho.loader.environmentclassloa...@135c40eb, lockOwnerId=25, lockOwnerName=resin-8, lockedMonitors =[Ljavax.management.openmbean.CompositeData;@62135133, lockedSynchronizers =[Ljavax.management.openmbean.CompositeData;@62381d92, stackTrace=[Ljavax.management.openmbean.CompositeData;@521d8e9e, suspended=false, threadId=27, threadName=resin-10, javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .ThreadInfo ,items = ((itemName = blockedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = blockedTime ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = inNative ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = lockInfo ,itemType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer))))), (itemName = lockName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockOwnerId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = lockOwnerName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockedMonitors ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .MonitorInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackDepth ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackFrame ,itemType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean))))))),primitiveArray=false)), (itemName = lockedSynchronizers ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Integer)))),primitiveArray=false)), (itemName = stackTrace ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean)))),primitiveArray=false)), (itemName = suspended ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = threadId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = threadName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = threadState ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = waitedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = waitedTime ,itemType = javax .management .openmbean blockedTime=-1, inNative=false, lockInfo = javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType (name = java lockname=com.caucho.loader.classen...@23042fcc, lockOwnerId=27, lockOwnerName=resin-10, lockedMonitors =[Ljavax.management.openmbean.CompositeData;@67de0c09, lockedSynchronizers =[Ljavax.management.openmbean.CompositeData;@22e85825, stackTrace=[Ljavax.management.openmbean.CompositeData;@43f2f70a, suspended=false, threadId=25, threadName=resin-8, size=64M 1.6.0_13-b03, Cp1252, en b02, 64, mixed mode, Sun Microsystems Inc.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 3.1.9 - JDK Deadlock on Startup</header>
    <date>Fri Jun 19 05:06:21 CEST 2009</date>
    <body>The deadlock check is part of the &amp;lt;ping&amp;gt; functionality.  There's an needs to wait for the server to start before pinging. Interesting, so even though I haven't defined a jsp page for the ping to check, it still operates? What is it checking? It's a JDK capability.  The JDK has an MBean "java.lang:type=Threading" with the operation "findMonitorDeadlockedThreads".  So it doesn't need anything HTTP- related. -- Scott In any event, good to know. I'm going to crank this value down since our servers generally get started within about a minute or so. I'll pad it out a little to account for recompiling jsp's and such. Rob I've added a bug report to at least clean up that log report. -- Scott Rob Here's an example of the arguments we pass to Java. Most of our servers are configured similarly with variations in the heap sizes. And here's the portion of the log file from when a deadlock occurs. stopping [This is when the restart request is sent. --Rob] size=64M [Resin starts to restart here. --Rob] 1.6.0_13-b03, Cp1252, en b02, 64, mixed mode, Sun Microsystems Inc. Resin. [15 minutes later is when Resin has detected the deadlock and restarts. --Rob] javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .ThreadInfo ,items = ((itemName = blockedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = blockedTime ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = inNative ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = lockInfo ,itemType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer))))), (itemName = lockName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockOwnerId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = lockOwnerName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockedMonitors ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .MonitorInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackDepth ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackFrame ,itemType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean))))))),primitiveArray=false)), (itemName = lockedSynchronizers ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Integer)))),primitiveArray=false)), (itemName = stackTrace ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean)))),primitiveArray=false)), (itemName = suspended ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = threadId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = threadName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = threadState ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = waitedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = waitedTime ,itemType = javax .management .openmbean blockedTime=-1, inNative=false, lockInfo = javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType (name = java .lang .Integer lockname=com.caucho.loader.environmentclassloa...@135c40eb, lockOwnerId=25, lockOwnerName=resin-8, lockedMonitors =[Ljavax.management.openmbean.CompositeData;@62135133, lockedSynchronizers =[Ljavax.management.openmbean.CompositeData;@62381d92, stackTrace=[Ljavax.management.openmbean.CompositeData;@521d8e9e, suspended=false, threadId=27, threadName=resin-10, javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .ThreadInfo ,items = ((itemName = blockedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = blockedTime ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = inNative ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = lockInfo ,itemType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer))))), (itemName = lockName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockOwnerId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = lockOwnerName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockedMonitors ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .MonitorInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackDepth ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackFrame ,itemType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean))))))),primitiveArray=false)), (itemName = lockedSynchronizers ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Integer)))),primitiveArray=false)), (itemName = stackTrace ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean)))),primitiveArray=false)), (itemName = suspended ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = threadId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = threadName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = threadState ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = waitedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = waitedTime ,itemType = javax .management .openmbean blockedTime=-1, inNative=false, lockInfo = javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType (name = java .lang lockname=com.caucho.loader.classen...@23042fcc, lockOwnerId=27, lockOwnerName=resin-10, lockedMonitors =[Ljavax.management.openmbean.CompositeData;@67de0c09, lockedSynchronizers =[Ljavax.management.openmbean.CompositeData;@22e85825, stackTrace=[Ljavax.management.openmbean.CompositeData;@43f2f70a, suspended=false, threadId=25, threadName=resin-8, size=64M 1.6.0_13-b03, Cp1252, en b02, 64, mixed mode, Sun Microsystems Inc.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 3.1.9 - JDK Deadlock on Startup</header>
    <date>Tue Jun 23 05:11:43 CEST 2009</date>
    <body>I've never seen this happen with Resin. But ever since upgrading to Resin Pro 3.1.9 (from Pro 3.0.21), it's happening several times per week with different servers during restarts. Environment: Windows 2003 64-bit Server (SP2), Resin Pro 3.1.9 (100 Server License), JDK 1.6.0_13 (64-bit) I looked in the 1.6.0_14 release notes and didn't see anything specific to deadlock situations that were fixed in the .14 release. I don't know if this is a problem with our code, or Resin, or the JDK, or some combination thereof. It might be a classloading-related deadlock.  The log is horrible (it's straight JMX output), but I think it has some classloader classes that might be a problem. Other than the obvious, "Why is this happening and how can I fix it?" question, I'm also curious about the 15 minutes that it always takes resin to notice the deadlock and restart. Is this 15 minutes configurable? If so, where can I adjust it and what are the implications of making it &amp;lt; 15 minutes? The deadlock check is part of the &amp;lt;ping&amp;gt; functionality.  There's an needs to wait for the server to start before pinging. Fyi, the online documentation for both 3.1 and 4.0 doesn't make mention of initial-sleep-time. In fact they explicitly state, "The first ping is always 15m after the server starts, ..." http://caucho.com/resin-3.1/doc/cluster-tags.xtp#ping http://caucho.com/resin/doc/cluster-tags.xtp#ping However, setting initial-sleep-time does work. But you do have to specify a URL for it to call. So even though there is a built-in deadlock detection mechanism that kicks in after 15 minutes (what I was seeing below), you can't control that one via the config file. Rob I've added a bug report to at least clean up that log report. -- Scott Rob Here's an example of the arguments we pass to Java. Most of our servers are configured similarly with variations in the heap sizes. And here's the portion of the log file from when a deadlock occurs. stopping [This is when the restart request is sent. --Rob] size=64M [Resin starts to restart here. --Rob] 1.6.0_13-b03, Cp1252, en b02, 64, mixed mode, Sun Microsystems Inc. Resin. [15 minutes later is when Resin has detected the deadlock and restarts. --Rob] javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .ThreadInfo ,items = ((itemName = blockedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = blockedTime ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = inNative ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = lockInfo ,itemType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer))))), (itemName = lockName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockOwnerId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = lockOwnerName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockedMonitors ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .MonitorInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackDepth ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackFrame ,itemType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean))))))),primitiveArray=false)), (itemName = lockedSynchronizers ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Integer)))),primitiveArray=false)), (itemName = stackTrace ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean)))),primitiveArray=false)), (itemName = suspended ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = threadId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = threadName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = threadState ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = waitedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = waitedTime ,itemType = javax .management .openmbean blockedTime=-1, inNative=false, lockInfo = javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType (name = java .lang .Integer lockname=com.caucho.loader.environmentclassloa...@135c40eb, lockOwnerId=25, lockOwnerName=resin-8, lockedMonitors =[Ljavax.management.openmbean.CompositeData;@62135133, lockedSynchronizers =[Ljavax.management.openmbean.CompositeData;@62381d92, stackTrace=[Ljavax.management.openmbean.CompositeData;@521d8e9e, suspended=false, threadId=27, threadName=resin-10, javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .ThreadInfo ,items = ((itemName = blockedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = blockedTime ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = inNative ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = lockInfo ,itemType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer))))), (itemName = lockName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockOwnerId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = lockOwnerName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lockedMonitors ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .MonitorInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackDepth ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = lockedStackFrame ,itemType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean))))))),primitiveArray=false)), (itemName = lockedSynchronizers ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Integer)))),primitiveArray=false)), (itemName = stackTrace ,itemType = javax .management .openmbean .ArrayType (name = [Ljavax .management .openmbean .CompositeData ;,dimension = 1 ,elementType = javax .management .openmbean .CompositeType (name = java .lang .StackTraceElement ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = fileName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = lineNumber ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Integer)), (itemName = methodName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = nativeMethod ,itemType = javax .management .openmbean .SimpleType(name=java.lang.Boolean)))),primitiveArray=false)), (itemName = suspended ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Boolean)), (itemName = threadId ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = threadName ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = threadState ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = waitedCount ,itemType =javax.management.openmbean.SimpleType(name=java.lang.Long)), (itemName = waitedTime ,itemType = javax .management .openmbean blockedTime=-1, inNative=false, lockInfo = javax .management .openmbean .CompositeDataSupport (compositeType = javax .management .openmbean .CompositeType (name = java .lang .management .LockInfo ,items = ((itemName = className ,itemType =javax.management.openmbean.SimpleType(name=java.lang.String)), (itemName = identityHashCode ,itemType = javax .management .openmbean .SimpleType (name = java lockname=com.caucho.loader.classen...@23042fcc, lockOwnerId=27, lockOwnerName=resin-10, lockedMonitors =[Ljavax.management.openmbean.CompositeData;@67de0c09, lockedSynchronizers =[Ljavax.management.openmbean.CompositeData;@22e85825, stackTrace=[Ljavax.management.openmbean.CompositeData;@43f2f70a, suspended=false, threadId=25, threadName=resin-8, size=64M 1.6.0_13-b03, Cp1252, en b02, 64, mixed mode, Sun Microsystems Inc.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Updating Hessian in Resin 4.0 deployments</header>
    <date>Wed Jun 17 22:48:59 CEST 2009</date>
    <body>If I download/build a separate Hessian library and drop it into my WEB- INF/lib directory, will it get used instead of the one built-in to Resin? TIA, -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Updating Hessian in Resin 4.0 deployments</header>
    <date>Wed Jun 17 22:59:57 CEST 2009</date>
    <body>No, you need to put the replacement in the CLASSPATH (so it's loaded before the resin.jar). In Java, the parent classloaders have priority (that order is needed because of class cast issues.)  So any hessian in WEB-INF/lib would be ignored. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Updating Hessian in Resin 4.0 deployments</header>
    <date>Wed Jun 17 23:11:58 CEST 2009</date>
    <body>Hmm. I've always tried to steer far clear of putting anything on the CLASSPATH when running servlet containers. I don't know if I learned that back when I used Tomcat, or if it was something Resin recommended. A better alternative would be for me to get to a place where I build resin and run my build; this would allow me to insert logging to help me figure out problems when I run into them all across resin, let alone just Hessian. But Hessian is my most urgent need right now. Are there instructions for building Resin anywhere? Thanks, Scott! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Updating Hessian in Resin 4.0 deployments</header>
    <date>Thu Jun 18 00:18:07 CEST 2009</date>
    <body>Well, it's normally not a good idea, but it's how you would override hessian. You should be able to just download the source and use ant.  I think we cleared up the dependencies (with the exception of 'ant dist'). -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Updating Hessian in Resin 4.0 deployments</header>
    <date>Thu Jun 18 01:07:14 CEST 2009</date>
    <body>Oh hey! Look at that! It seemed to work. I'll try actually running it later ;-) -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Updating Hessian in Resin 4.0 deployments</header>
    <date>Thu Jun 18 08:44:05 CEST 2009</date>
    <body>Hessian was extracted to a separate hessian.jar in the Resin dist a while back, which made it possible to upgrade Hessian without changing Resin version. For some reason hessian was moved back into resin.jar. /Mattias Scott Ferguson wrote (2009-06-18 00:16): --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Updating Hessian in Resin 4.0 deployments</header>
    <date>Thu Jun 18 21:42:24 CEST 2009</date>
    <body>Because having only two jars is more convenient for most people, and anyone sophisticated enough to want to change hessian is sophisticated enough to put it in front of resin.jar in the classpath. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Ignore query-parameters in Resin's rewrite-dispatch</header>
    <date>Wed Jun 17 22:34:53 CEST 2009</date>
    <body>Is it possible with Resin 3.1 to ignore query parameters in case of a redirect using the built-in rewrite-dispatch capabilities? For example requests to "/old.jsp?p1=val1" should be redirected to "/new.jsp", discarding the query parameters such as "?p1=val1" I have tried this but the query parameter is used in its new location: ---request begin--- GET /old.jsp?p1=val1 HTTP/1.0 User-Agent: Wget/1.11.4 Accept: */* Host: localhost:8080 Connection: Keep-Alive ---request end--- HTTP request sent, awaiting response... ---response begin--- HTTP/1.0 302 Found Server: Resin/3.1.9 Location: http://localhost:8080/new.jsp?p1=val1 Content-Type: text/html Content-Length: 75 Date: Wed, 17 Jun 2009 20:26:23 GMT ---response end--- Any ideas how to remove all query-parameters and just redirect to "/new.jsp" ? Steffen</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Ignore query-parameters in Resin's rewrite-dispatch</header>
    <date>Thu Jun 18 01:02:11 CEST 2009</date>
    <body>I don't think the query parameters are "reachable" by the rewrite engine. Not sure though. But in any event, why can't new.jsp just ignore them? Rob Is it possible with Resin 3.1 to ignore query parameters in case of a redirect using the built-in rewrite-dispatch capabilities? For example requests to "/old.jsp?p1=val1" should be redirected to "/ new.jsp", discarding the query parameters such as "?p1=val1" I have tried this but the query parameter is used in its new location: ---request begin--- GET /old.jsp?p1=val1 HTTP/1.0 User-Agent: Wget/1.11.4 Accept: */* Host: localhost:8080 Connection: Keep-Alive ---request end--- HTTP request sent, awaiting response... ---response begin--- HTTP/1.0 302 Found Server: Resin/3.1.9 Location: http://localhost:8080/new.jsp?p1=val1 Content-Type: text/html Content-Length: 75 Date: Wed, 17 Jun 2009 20:26:23 GMT ---response end--- Any ideas how to remove all query-parameters and just redirect to "/ new.jsp" ? Steffen</body>
  </mail>
  <mail>
    <header>[Resin-interest] Bug when Injecting beans in different scope with	bytecode java.lang.VerifyError</header>
    <date>Wed Jun 17 14:42:02 CEST 2009</date>
    <body>Dear Ferg, I found a annoying bug describing below: Environment: Resin 4.0.0 JDK: Sun JDK 1.6.0_14 x64 or JRockit 1.6.0_11 x64 ================ test.TestServlet =============================== @Current @Override protected void doGet(HttpServletRequest req, HttpServletResponse res) ================ test.TestBean =============================== @RequestScoped ================================================= When running this servlet at http://localhost:8080/TestServlet (mapped to /TestServlet in web.xml) Resin generate exceptions: error stack 1: javax.servlet.ServletException: java.lang.VerifyError: (class: test/TestBean$ScopeProxy, method: evilMethod signature: (IILjava/lang/String;I)Ljava/lang/String;) Register 0 contains wrong type at com.caucho.server.dispatch.ServletConfigImpl.createServlet(ServletConfigImpl.java:848) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:95) at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:452) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:185) at com.caucho.server.cache.CacheFilterChain.doFilter(CacheFilterChain.java:201) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:264) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:275) at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:644) at com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java:1311) at com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1252) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:866) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:779) Caused by: java.lang.VerifyError: (class: test/TestBean$ScopeProxy, method: evilMethod signature: (IILjava/lang/String;I)Ljava/lang/String;) Register 0 contains wrong type at java.lang.Class.getDeclaredConstructors0(Native Method) at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389) at java.lang.Class.getConstructors(Class.java:1459) at com.caucho.config.bytecode.ScopeAdapter.generateProxy(ScopeAdapter.java:163) at com.caucho.config.bytecode.ScopeAdapter.&amp;lt;init&amp;gt;(ScopeAdapter.java:59) at com.caucho.config.bytecode.ScopeAdapter.create(ScopeAdapter.java:64) at com.caucho.config.inject.SimpleBean.getScopeAdapter(SimpleBean.java:450) at com.caucho.config.inject.InjectManager.getInstanceToInject(InjectManager.java:1454) at com.caucho.config.program.FieldComponentProgram.inject(FieldComponentProgram.java:91) at com.caucho.config.inject.ComponentImpl.createNoInit(ComponentImpl.java:316) at com.caucho.server.dispatch.ServletConfigImpl.createServletImpl(ServletConfigImpl.java:895) at com.caucho.server.dispatch.ServletConfigImpl.createServlet(ServletConfigImpl.java:810) ... 14 more error stack 2 (with evilMethod commented): javax.servlet.ServletException: java.lang.VerifyError: (class: test/TestBean$ScopeProxy, method: evilMethod2 signature: (IIILjava/lang/String;)Ljava/lang/String;) Expecting to find object/array on stack at com.caucho.server.dispatch.ServletConfigImpl.createServlet(ServletConfigImpl.java:848) at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:95) at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:452) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:185) at com.caucho.server.cache.CacheFilterChain.doFilter(CacheFilterChain.java:201) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:264) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:275) at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:644) at com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java:1311) at com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1252) at com.caucho.util.ThreadPool$PoolThread.runTasks(ThreadPool.java:866) at com.caucho.util.ThreadPool$PoolThread.run(ThreadPool.java:779) Caused by: java.lang.VerifyError: (class: test/TestBean$ScopeProxy, method: evilMethod2 signature: (IIILjava/lang/String;)Ljava/lang/String;) Expecting to find object/array on stack at java.lang.Class.getDeclaredConstructors0(Native Method) at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389) at java.lang.Class.getConstructors(Class.java:1459) at com.caucho.config.bytecode.ScopeAdapter.generateProxy(ScopeAdapter.java:163) at com.caucho.config.bytecode.ScopeAdapter.&amp;lt;init&amp;gt;(ScopeAdapter.java:59) at com.caucho.config.bytecode.ScopeAdapter.create(ScopeAdapter.java:64) at com.caucho.config.inject.SimpleBean.getScopeAdapter(SimpleBean.java:450) at com.caucho.config.inject.InjectManager.getInstanceToInject(InjectManager.java:1454) at com.caucho.config.program.FieldComponentProgram.inject(FieldComponentProgram.java:91) at com.caucho.config.inject.ComponentImpl.createNoInit(ComponentImpl.java:316) at com.caucho.server.dispatch.ServletConfigImpl.createServletImpl(ServletConfigImpl.java:895) at com.caucho.server.dispatch.ServletConfigImpl.createServlet(ServletConfigImpl.java:810) ... 14 more servlet is good when evilMethod and evilMethod2 were both commented. I believe this is due to a bug in com.caucho.bytecode.JavaClass. -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Bug when Injecting beans in different scope	with bytecode java.lang.VerifyError</header>
    <date>Thu Jun 18 00:57:13 CEST 2009</date>
    <body>Thanks.  I've filed a bug report.  It's probably just some counting we got wrong in the bytecode enhancement. -- Scott http://localhost:8080/TestServlet http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] lighttpd and nginx</header>
    <date>Tue Jun 16 21:04:40 CEST 2009</date>
    <body>Hi, Does Resin works with lighttpd or nginx? Thanks, Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] lighttpd and nginx</header>
    <date>Tue Jun 16 21:11:41 CEST 2009</date>
    <body>I don't know about lighttpd, but there was a blog post recently regarding nginx, check this: http://blog.caucho.com/?p=173 http://blog.caucho.com/?p=173 Steffen http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] lighttpd and nginx</header>
    <date>Tue Jun 16 21:52:50 CEST 2009</date>
    <body>I don't know about lighttpd, but there was a blog post recently regarding nginx, check this: http://blog.caucho.com/?p=173 For Resin 4.0, you can use the new FastCgi protocol implementation (or use a http proxy).  It's configured like the &amp;lt;http&amp;gt; tag: http://caucho.com/ns/resin" ; xmlns:resin="urn:java:com.caucho.resin .. If you're looking at nginx for performance, you should benchmark Resin as a load-balancer as well, especially if you're using proxy caching. For 4.0, the performance numbers were fairly close (nginx slightly faster). -- Scott Regards, Steffen Hi, Does Resin works with lighttpd or nginx? Thanks, Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] lighttpd and nginx</header>
    <date>Wed Jun 17 15:16:03 CEST 2009</date>
    <body>Hi Scott, Scott Ferguson escreveu: Do you think Resin-4.0 is reliable for production? For all I have understood it seems it wont be release soon due so JEE-1.6 specifications. Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] lighttpd and nginx</header>
    <date>Wed Jun 17 19:11:03 CEST 2009</date>
    <body>Not yet.  We did add the FastCGI specifically for nginx. For 3.1, you'd need to use the nginx http proxy.  It should be pretty close to the fastcgi efficiency. That's correct.  For example, the JSR-299 (Java Injection) spec has changed its internal SPI pretty radically, causing a major refactor on our part. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] lighttpd and nginx</header>
    <date>Thu Jun 18 15:46:25 CEST 2009</date>
    <body>Understood Scott, thank you, Ronan Scott Ferguson escreveu: Hi Scott, Scott Ferguson escreveu: If you're looking at nginx for performance, you should benchmark Resin as a load-balancer as well, especially if you're using proxy caching. For 4.0, the performance numbers were fairly close (nginx slightly faster). Do you think Resin-4.0 is reliable for production? Not yet.  We did add the FastCGI specifically for nginx. For 3.1, you'd need to use the nginx http proxy.  It should be pretty close to the fastcgi efficiency. For all I have understood it seems it wont be release soon due so JEE-1.6 specifications. That's correct.  For example, the JSR-299 (Java Injection) spec has changed its internal SPI pretty radically, causing a major refactor on our part. -- Scott Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] lighttpd and nginx</header>
    <date>Wed Jun 17 13:38:49 CEST 2009</date>
    <body>Hi Steffen, For all I have understood it refers to Resin's-4.0, which is still beta. Anyway to use it with 3.1? Thanks, Ronan Steffen Busch escreveu: I don't know about lighttpd, but there was a blog post recently regarding nginx, check this: http://blog.caucho.com/?p=173 Regards, Steffen mailto:lis...@tiper.com.br Hi, Does Resin works with lighttpd or nginx? Thanks, Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Does dependency-check-interval affect jsp	changes?</header>
    <date>Tue Jun 16 20:19:22 CEST 2009</date>
    <body>Hi We’re pondering setting dependency-check-interval to -1 on “resin”- level to avoid automatic restart of resin when we need to do some pre-deploy changes, but I’m unsure how to interpret “environment for updates, generally class or configuration updates”. Does this affect updated jsp files (ie. a small hack to do some ad hoc low level change to the running VM), so they won’t be recompiled on the fly any longer, or is that controlled elsewhere? JSP is handled separately and has its own check interval.  The concepts are similar, of course, but the actual needs are different enough that it made more sense to configure them separately. -- Scott Regards, Jens Dueholm Christensen Business Process and Improvement, Rambøll Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Does dependency-check-interval affect	jspchanges?</header>
    <date>Wed Jun 17 00:05:16 CEST 2009</date>
    <body>JSP is handled separately and has its own check interval.  The concepts are similar, of course, but the actual needs are different enough that it made more sense to configure them separately. Is that only in Resin 3.1 and later or is that also in 3.0?  Is the JSP check interval configurable?  Does a JSP change always force the webapp to restart or will the JSP just recompile?  I tried searching through the 3.0 documentation, but I only see a reference to dependency-check-interval. Privileged/Confidential Information may be contained in this message. If you are not the addressee indicated in this message (or responsible for delivery of the message to such person), you may not copy or deliver this message to anyone. In such case, you should destroy this message and kindly notify the sender by reply email. Please advise immediately if you or your employer does not consent to Internet email for messages of this kind. Opinions, conclusions and other information in this message that do not relate to the official business of my firm shall be understood as neither given nor endorsed by it.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Does dependency-check-interval	affect	jspchanges?</header>
    <date>Wed Jun 17 04:16:46 CEST 2009</date>
    <body>It's not easy to find, but dependency-check-interval is available in 3.0, 3.1, and 4.0. Search for 'dependency-check-interval' on each of these pages. It's in the JSP section. http://caucho.com/resin-3.0/config/webapp.xtp http://caucho.com/resin-3.1/doc/webapp-tags.xtp (4.0 docs) http://caucho.com/resin/doc/webapp-tags.xtp Rob JSP is handled separately and has its own check interval.  The concepts are similar, of course, but the actual needs are different enough that it made more sense to configure them separately. Is that only in Resin 3.1 and later or is that also in 3.0?  Is the JSP check interval configurable?  Does a JSP change always force the webapp to restart or will the JSP just recompile?  I tried searching through the 3.0 documentation, but I only see a reference to dependency-check-interval. Privileged/Confidential Information may be contained in this message. If you are not the addressee indicated in this message (or responsible for delivery of the message to such person), you may not copy or deliver this message to anyone. In such case, you should destroy this message and kindly notify the sender by reply email. Please advise immediately if you or your employer does not consent to Internet email for messages of this kind. Opinions, conclusions and other information in this message that do not relate to the official business of my firm shall be understood as neither given nor endorsed by it.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Does dependency-check-interval affect	jspchanges?</header>
    <date>Wed Jun 17 10:48:34 CEST 2009</date>
    <body>JSP is handled separately and has its own check interval.  The concepts are similar, of course, but the actual needs are different enough that it made more sense to configure them separately. Thanks Scott However, as Rob Lockstone points out regarding the jsp version of the setting, the default value is inherited - but from where? If I were to do something like (Resin 3.0) (Resin 3.1/4) I would still get the behaviour I want (ie. able to change resin.conf without restart, but still get on-the-fly recompile of jsp changes), or is the setting for jsp inherited from elsewhere (and thus the last dependency-check-interval is unnessecary)? Regards, Jens Dueholm Christensen Business Process and Improvement, Rambøll Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Does dependency-check-interval	affect	jspchanges?</header>
    <date>Thu Jun 18 01:11:14 CEST 2009</date>
    <body>I'd recommend setting the global dependency-check-interval and the jsp one and not worry about the inheritance aspect. That's what we do and it works fine. What you have below should do what you want. The only change I'd make is to use 60s instead of just 60. I'm not sure if resin assumes 'seconds' or not. Rob JSP is handled separately and has its own check interval.  The concepts are similar, of course, but the actual needs are different enough that it made more sense to configure them separately. Thanks Scott However, as Rob Lockstone points out regarding the jsp version of the setting, the default value is inherited – but from where? If I were to do something like (Resin 3.0) (Resin 3.1/4) I would still get the behaviour I want (ie. able to change resin.conf without restart, but still get on-the-fly recompile of jsp changes), or is the setting for jsp inherited from elsewhere (and thus the last dependency-check-interval is unnessecary)? Regards, Jens Dueholm Christensen Business Process and Improvement, Rambøll Survey IT</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Does	dependency-check-intervalaffect	jspchanges?</header>
    <date>Thu Jun 18 14:13:10 CEST 2009</date>
    <body>Ok, thanks for that Rob. Regards, Jens Dueholm Christensen Business Process and Improvement, Rambøll Survey IT ________________________________ From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Rob Lockstone Sent: 18. juni 2009 01:09 To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Does dependency-check-intervalaffect jspchanges? I'd recommend setting the global dependency-check-interval and the jsp one and not worry about the inheritance aspect. That's what we do and it works fine. What you have below should do what you want. The only change I'd make is to use 60s instead of just 60. I'm not sure if resin assumes 'seconds' or not. Rob JSP is handled separately and has its own check interval.  The concepts are similar, of course, but the actual needs are different enough that it made more sense to configure them separately. Thanks Scott However, as Rob Lockstone points out regarding the jsp version of the setting, the default value is inherited - but from where? If I were to do something like (Resin 3.0) (Resin 3.1/4) I would still get the behaviour I want (ie. able to change resin.conf without restart, but still get on-the-fly recompile of jsp changes), or is the setting for jsp inherited from elsewhere (and thus the last dependency-check-interval is unnessecary)? Regards, Jens Dueholm Christensen Business Process and Improvement, Rambøll Survey IT</body>
  </mail>
  <mail>
    <header>[Resin-interest] Setting up Oracle Berkeley JE and XA Transactions via JCA (Resin 3.1.9)</header>
    <date>Tue Jun 16 06:37:36 CEST 2009</date>
    <body>I'm trying to configure Resin 3.1.9 to use Oracle Berkeley JE's JCA support so that it can participate in Resin-managed XA transactions.  We now have multiple Berkeley "Environments" (i.e. "databases") running in our app and need to start ensuring we get atomicity across those environments.  Oracle provides documentation and deployment descriptors for JBoss, SJAS, and Oracle's servers, but no docs for Resin (sniffle). What I've done thus far ... I've deployed Berkeley JE's RAR file successfully and see the following message at startup: loaded The part I'm stumbling through unsuccessfully is configuring the resource/connection factory in web.xml so that I can then inject that factory and use the factory to create connections to the "Environments" the way Berkeley prescribes.  I've tried various combinations in an attempt to figure out how resin interacts with Berkeley's implementation classes. The first simple configuration I tried results in no exceptions, but the result is simply an instance of  JEManagedConnectionFactory resident in the WebBeansContainer and Resin makes no setup calls to the instance (e.g. "JeMAnagedConnectionFactory.createConnectionFactory(ConnectionManager cxManager)", for example). The next configuration attempt, which was inspired by the JCA tutorial at http://www.caucho.com/resin-3.0/resource/tutorial/jca-connection/index.xtp , creates a JEManagedConnectionFactory instance and Resin calls createManagedConnection(Subject subject, ConnectionRequestInfo info) with null passed to the ConnectionRequestInfo parameter: I then tried using the database tags to prep the connection factory: In this variation, Resin calls JEManagedConnectionFactory's.createConnectionFactory(ConnectionManager cxManager) method, which seems like progress, but then Resin tosses "java.lang.ClassCastException: com.sleepycat.je.jca.ra.JEConnectionFactoryImpl cannot be cast to javax.sql.DataSource".  I thought from the 3.1 documentation the &amp;lt;database&amp;gt; tag would detect if the driver type was a JCA instance and set things up properly, so it's probable that I'm missing a key attribute that tells Resin this isn't a DataSource. The Resin JCA tutorial and classes there seem to line up well with Berkeley's ManagedConnectionFactory/ManagedConnection/ConnectionFactory/ConnectionFactoryImpl implementation classes, but I've not been successful construction the proper incantation to create the proper resin spell. Is it possible in Resin 3.1.9 to set up a JCA resource that isn't a DataSource? Ideas as to which &amp;lt;bean&amp;gt; or &amp;lt;resource&amp;gt; (or The JCA tutorials use the &amp;lt;resource&amp;gt; tags, but reading the 3.1 docs my tags don't seem to result in calls to the setup methods of the ManageConnectionFactory (e.g. createConnectionFactory).  Ideas greatly appreciated! Here's Berkeley's ra.xml file if it is of any help: Berkeley DB Java Edition; license may be required for redistribution. -tyson -- View this message in context: http://www.nabble.com/Setting-up-Oracle-Berkeley-JE-and-XA-Transactions-via-JCA-%28Resin-3.1.9%29-tp24047537p24047537.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Setting up Oracle Berkeley JE and XA	Transactions via JCA (Resin 3.1.9)</header>
    <date>Tue Jun 16 18:43:49 CEST 2009</date>
    <body>I've added a bug report to check into this.  The full-custom JCA configuration in Resin needs a cleanup (e.g. integration with CanDI and upgrade to JCA 1.6).  Some notes below. This just means it's stored internally.  For full JCA configuration, you can use Resin's &amp;lt;connector&amp;gt; configuration, although I think it expects a resource-adapter class. Unfortunately, &amp;lt;bean&amp;gt; doesn't know about JCA.  It's just a straight instantiation of the class, so it wouldn't create the connection factory properly. The &amp;lt;resource&amp;gt; should hook into JCA. http://www.caucho.com/resin-3.0/resource/tutorial/jca-connection/index.xtp That sounds like a bug in Resin.  &amp;lt;resource&amp;gt; should know about JCA. This should work if the JCA connection factory is a JDBC driver.  It sounds like it's a custom interface, so it won't match. The full configuration should be the &amp;lt;connector&amp;gt; and &amp;lt;connection- factory&amp;gt; (in this specific example, &amp;lt;resource&amp;gt; should also work.) (I'll need to look at this later.  It's been awhile since I've looked at JCA.) -- Scott http://www.nabble.com/Setting-up-Oracle-Berkeley-JE-and-XA-Transactions-via-JCA-%28Resin-3.1.9%29-tp24047537p24047537.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] SubEtha mailing list server now released on Resin</header>
    <date>Fri Jun 05 06:01:21 CEST 2009</date>
    <body>We have just released v2 of the opensource SubEtha mailing list server, rearchitected to use Resin and CanDI.  We are very, very happy with the new design that CanDI enables. Here it is: http://www.subethamail.org/ Thanks Scott, Steve, Emil, and the rest of the Caucho team (and great meeting you last night at JavaOne)!  If you're interested in converting your mailing lists to SubEtha, we'd be happy to help :-) Thanks, Jeff, Scott, and Jon</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] SubEtha mailing list server now released on	Resin</header>
    <date>Fri Jun 05 18:10:55 CEST 2009</date>
    <body>http://www.subethamail.org/ Very cool!  I've downloaded the source and I'm looking forward to reading it. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] SubEtha mailing list server now released on	Resin</header>
    <date>Mon Jun 08 21:35:29 CEST 2009</date>
    <body>http://www.subethamail.org/ I put up a quick post at http://blog.caucho.com/?p=209 about SubEtha's use of CanDI.  Hopefully, I didn't get too much wrong. :) SubEtha's really an excellent use of CanDI and JavaEE, and for anyone who likes to learn from others' code, or evaluating CanDI as a technology, it's a great example. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Config file location</header>
    <date>Wed Jun 03 22:02:42 CEST 2009</date>
    <body>I'm using DBCP with Resin. DBCP looks up the connection params in a config file and if the file needs to be in the classpath. I copied the config file in the web app's WEB-INF/classes and also the lib folder, but my servlet is not finding the config file. I tried the same configuration with Tomcat and it's finding the config file fine, so I'm sure the code is fine. Is there a way I can force Resin to find the config file? I'm using resin-3.1.8. Thanks, Gopi</body>
  </mail>
  <mail>
    <header>[Resin-interest] Can user threads call ejb methods?</header>
    <date>Wed Jun 03 02:34:37 CEST 2009</date>
    <body>Is there a problem calling ejb methods from user-started threads inside the resin container?  Yes, I know the ejb spec says that applications shouldn't start threads, but part of the spec is lame. The SubEtha mailing list server relies on an SMTP processing library which starts its own threads and then makes callbacks into our handlers as the email arrives.  These handlers call into an ejb which processes the message in a transaction. We're seeing some really bizarre behavior where sometimes there is a transaction and sometimes there isn't.  Could this be because the call is being done on a non-resin-started thread?  If so, is there any workaround? Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can user threads call ejb methods?</header>
    <date>Wed Jun 03 07:29:07 CEST 2009</date>
    <body>Nevermind, the problem was something else.  Calling a find() method on an EntityManager outside of a transaction scope, then calling an EJB which has a transaction scope causes all manner of havoc when the EJB tries to write to the database. Jeff</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin.conf = null when upgrading to Resin 4</header>
    <date>Tue Jun 02 06:49:50 CEST 2009</date>
    <body>Sitting here trying to upgrade the dev environment to Resin 4.0 with minimal changes to configuration and startup scripts. On Windows I'm up and running after a strange problem with a simple solution (deleting a default directory so that Resin would accept the explicit document-directory). On Linux however I'm still struggling. I think the heart of the problem is that Resin for some reason does not accept me trying to point out our old resin.conf file. [2009/06/02 06:33:08.066] resin.home = /u/resin/resin/ [2009/06/02 06:33:08.066] resin.root = /u/dna/exder.server.root [2009/06/02 06:33:08.066] resin.conf = null The arguments when starting Resin are -conf /u/dna/exder.server.root/conf/resin.conf -server-root /u/dna/exder.server.root and I also tried -conf /u/dna/exder.server.root/conf/resin.conf -root-directory /u/dna/exder.server.root Would anyone care to spare my time by telling me what I'm doing wrong here...? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin.conf = null when upgrading to Resin 4</header>
    <date>Tue Jun 02 07:24:50 CEST 2009</date>
    <body>That's odd.  What does the -verbose show as the command line passed to the Resin instance?  Also, do you see the same with "start" as with non-start? -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin.conf = null when upgrading to Resin 4</header>
    <date>Tue Jun 02 08:51:55 CEST 2009</date>
    <body>Scott Ferguson wrote (2009-06-02 07:23): Actually, without "start" seems to work fine. -verbose command is then: /usr/java/jdk1.5.0_11/bin/java \ -Djava.util.logging.manager=com.caucho.log.LogManagerImpl \ -Djava.system.class.loader=com.caucho.loader.SystemClassLoader \ -Djavax.management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl \ -Djava.awt.headless=true \ -Dresin.home=/u/resin/resin/ \ -Xss1m \ -Xmn256M \ -Xms512M \ -Xmx1024M \ -XX:MaxPermSize=128M \ -d64 \ -server \ com.caucho.server.resin.Resin \ --root-directory \ /u/dna/exder.server.root \ -conf \ /u/dna/exder.server.root/conf/resin.conf \ -socketwait \ 51562 \ -verbose \ -server-root \ /u/dna/exder.server.root With "start" the command is /usr/java/jdk1.5.0_11/bin/java \ -Djava.util.logging.manager=com.caucho.log.LogManagerImpl \ -Djava.system.class.loader=com.caucho.loader.SystemClassLoader \ -Djavax.management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl \ -Djava.awt.headless=true \ -Dresin.home=/u/resin/resin/ \ -Xss1m \ -Xmn256M \ -Xms512M \ -Xmx1024M \ -XX:MaxPermSize=128M \ -Djava.util.logging.manager=com.caucho.log.LogManagerImpl \ -Djavax.management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl \ -Djava.awt.headless=true \ -Dresin.home=/u/resin/resin/ \ -Dresin.root=/u/dna/exder.server.root \ -Djava.util.logging.manager=com.caucho.log.LogManagerImpl \ -Djavax.management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl \ -Djava.awt.headless=true \ -Dresin.home=/u/resin/resin/ \ -Dresin.root=/u/dna/exder.server.root \ -d64 \ -server \ com.caucho.server.resin.Resin \ --root-directory \ /u/dna/exder.server.root \ -conf \ /u/dna/exder.server.root/conf/resin.conf \ -socketwait \ 51666 \ -verbose \ -server-root \ /u/dna/exder.server.root \ start \ --log-directory \ /u/dna/exder.server.root/log /Mattias</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin.conf = null when upgrading to Resin 4</header>
    <date>Thu Jun 04 00:33:04 CEST 2009</date>
    <body>Is this in the watchdog-manager.log or jvm-default.log?  In Resin 4, the watchdog starts a Resin instance, so it produces those debugging lines, but in the case of the watchdog the resin.conf isn't getting logged properly.  The jvm-default.log should show the correct resin.conf. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] No sessions in Resin 4</header>
    <date>Tue Jun 02 21:31:55 CEST 2009</date>
    <body>I wrote on "resin.conf = null when upgrading to Resin 4" (2009-06-02 06:48): I apparently jumped the gun here. I am not up and running on Windows either. While picking up my resin.conf, Resin does not handle sessions but resets them on every request. Example "fine" log, first request: [20:56:44.359] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] new [20:56:44.359] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] create session ... Subsequent request: [20:57:27.250] Http[11] Cookie: JSESSIONID=aaaQKDKMBgGTm9hnkvIgs [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] reset [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] reset [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] new [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] create session Tried to find a configuration fault by debugging, but I end up really confused. When com.caucho.server.session.SessionImpl.save() is entered, I have a couple of values in the session, but when stepping into the isValid() the _values Map is suddenly empty??? Here is my session config: + --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] No sessions in Resin 4</header>
    <date>Tue Jun 02 23:52:20 CEST 2009</date>
    <body>The reset is normally a message that something went wrong in loading the session.  I'll need to see if we can either improve the information or just fix the issue. The bug is at http://bugs.caucho.com/view.php?id=3545 FYI, this is ignored, currently, because the persistent store is always available (it lives in resin-data).  You do still need use- persistent-store to enable the session to use it. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] No sessions in Resin 4</header>
    <date>Wed Jun 03 20:56:30 CEST 2009</date>
    <body>Ehrm... Scott, would you care to explain this to me...? On Windows, my RESIN_HOME is set to c:\java\resin c:\java\resin is a junction [1] path. If that path points to c:\java\resin-pro-4.0.0 sessions do NOT work If that path points to c:\java\resin-pro-3.1.8 sessions DO work, if I start Resin 4 (c:\java\resin-pro-4.0.0\resin.exe -server-root L:\sandbox\exder-server-root -conf L:\sandbox\exder-server-root\conf\resin.conf). (If the junction is removed, Resin refuses to start with the message "Unable to access jarfile C:\java\resin\lib\resin.jar". If the RESIN_HOME environment variable is removed, Resin 4 starts but sessions still don't work) Is Resin 4 dependent on Resin 3.1 to handle sessions...??? /Mattias [1] http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx Scott Ferguson wrote (2009-06-02 23:50): http://bugs.caucho.com/view.php?id=3545</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] No sessions in Resin 4</header>
    <date>Wed Jun 03 21:29:07 CEST 2009</date>
    <body>Ehrm... Scott, would you care to explain this to me...? On Windows, my RESIN_HOME is set to c:\java\resin c:\java\resin is a junction [1] path. If that path points to c:\java\resin-pro-4.0.0 sessions do NOT work If that path points to c:\java\resin-pro-3.1.8 sessions DO work, if I start Resin 4 (c:\java\resin-pro-4.0.0\resin.exe -server-root L: \sandbox\exder-server-root -conf L:\sandbox\exder-server-root\conf \resin.conf). (If the junction is removed, Resin refuses to start with the message "Unable to access jarfile C:\java\resin\lib\resin.jar". If the RESIN_HOME environment variable is removed, Resin 4 starts but sessions still don't work) Is Resin 4 dependent on Resin 3.1 to handle sessions...??? Can you check the permissions, particularly of the resin-data directory?  We had some trouble at the end of the release cycle with permissions issues on the created directories, and it's possible we didn't catch all of the cases. I've added a bug report for the junction issue.  It's not something I'm familiar with. -- Scott /Mattias [1] http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx Scott Ferguson wrote (2009-06-02 23:50): I wrote on "resin.conf = null when upgrading to Resin 4" (2009-06-02 06:48): Sitting here trying to upgrade the dev environment to Resin 4.0 with minimal changes to configuration and startup scripts. On Windows I'm up and running ... I apparently jumped the gun here. I am not up and running on Windows either. While picking up my resin.conf, Resin does not handle sessions but resets them on every request. Example "fine" log, first request: [20:56:44.359] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] new [20:56:44.359] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] create session ... Subsequent request: [20:57:27.250] Http[11] Cookie: JSESSIONID=aaaQKDKMBgGTm9hnkvIgs [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] reset [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] reset [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] new [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] create session The reset is normally a message that something went wrong in loading the session.  I'll need to see if we can either improve the information or just fix the issue. The bug is at http://bugs.caucho.com/view.php?id=3545 Tried to find a configuration fault by debugging, but I end up really confused. When com.caucho.server.session.SessionImpl.save() is entered, I have a couple of values in the session, but when stepping into the isValid() the _values Map is suddenly empty??? Here is my session config: FYI, this is ignored, currently, because the persistent store is always available (it lives in resin-data).  You do still need use- persistent-store to enable the session to use it. -- Scott + --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] No sessions in Resin 4</header>
    <date>Wed Jun 03 22:09:48 CEST 2009</date>
    <body>Scott Ferguson wrote (2009-06-03 21:17): I'm pretty sure it's not related to permissions. Running with full permissions, tried deleting resin-data dir and it is recreated. Should I send you the files in it??? I don't think there is a "junction issue". I've had this configuration for a long time just changing the target of the junction/symbolic link. But somehow the RESIN_HOME environment variable takes precedence over the resin.exe location and that affects sessions somehow. (I could probably just point RESIN_HOME straight to the resin-pro-3.1.8 dir but I'm too lazy to try it) /Mattias http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx http://bugs.caucho.com/view.php?id=3545 mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] No sessions in Resin 4</header>
    <date>Wed Jun 03 23:52:59 CEST 2009</date>
    <body>Scott Ferguson wrote (2009-06-03 21:17): Ehrm... Scott, would you care to explain this to me...? On Windows, my RESIN_HOME is set to c:\java\resin c:\java\resin is a junction [1] path. If that path points to c:\java\resin-pro-4.0.0 sessions do NOT work If that path points to c:\java\resin-pro-3.1.8 sessions DO work, if I start Resin 4 (c:\java\resin-pro-4.0.0\resin.exe -server-root L:\sandbox\exder-server-root -conf L:\sandbox\exder-server-root \conf\resin.conf). (If the junction is removed, Resin refuses to start with the message "Unable to access jarfile C:\java\resin\lib\resin.jar". If the RESIN_HOME environment variable is removed, Resin 4 starts but sessions still don't work) Is Resin 4 dependent on Resin 3.1 to handle sessions...??? Can you check the permissions, particularly of the resin-data directory?  We had some trouble at the end of the release cycle with permissions issues on the created directories, and it's possible we didn't catch all of the cases. I'm pretty sure it's not related to permissions. Running with full permissions, tried deleting resin-data dir and it is recreated. Should I send you the files in it??? Sure.  The important ones should be "resin_data_default.db" and "resin_mnode_default.db". I've added a bug report for the junction issue.  It's not something I'm familiar with. I don't think there is a "junction issue". I've had this configuration for a long time just changing the target of the junction/symbolic link. But somehow the RESIN_HOME environment variable takes precedence over the resin.exe location and that affects sessions somehow. (I could probably just point RESIN_HOME straight to the resin-pro-3.1.8 dir but I'm too lazy to try it) Hmm.  We did rewrite resin.exe.  If you launch the jar directly, "java -jar lib/resin.jar", skipping the resin.exe, do you see the same problem? -- Scott /Mattias -- Scott /Mattias [1] http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx Scott Ferguson wrote (2009-06-02 23:50): I wrote on "resin.conf = null when upgrading to Resin 4" (2009-06-02 06:48): Sitting here trying to upgrade the dev environment to Resin 4.0 with minimal changes to configuration and startup scripts. On Windows I'm up and running ... I apparently jumped the gun here. I am not up and running on Windows either. While picking up my resin.conf, Resin does not handle sessions but resets them on every request. Example "fine" log, first request: [20:56:44.359] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] new [20:56:44.359] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] create session ... Subsequent request: [20:57:27.250] Http[11] Cookie: JSESSIONID=aaaQKDKMBgGTm9hnkvIgs [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] reset [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] reset [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] new [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] create session The reset is normally a message that something went wrong in loading the session.  I'll need to see if we can either improve the information or just fix the issue. The bug is at http://bugs.caucho.com/view.php?id=3545 Tried to find a configuration fault by debugging, but I end up really confused. When com.caucho.server.session.SessionImpl.save() is entered, I have a couple of values in the session, but when stepping into the isValid() the _values Map is suddenly empty??? Here is my session config: FYI, this is ignored, currently, because the persistent store is always available (it lives in resin-data).  You do still need use- persistent-store to enable the session to use it. -- Scott + --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] No sessions in Resin 4</header>
    <date>Thu Jun 04 08:00:40 CEST 2009</date>
    <body>Scott Ferguson wrote (2009-06-03 23:52): Done a bit more debugging and I have arrived at com.caucho.server.distcache.FileCacheManager.put() which does nothing but return null!? Should persistent-store type="file" work at all...? Yes, that is exactly what is happening, so I was running 3.1.8 when the sessions worked... *blush* /Mattias http://bugs.caucho.com/view.php?id=3545</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] No sessions in Resin 4</header>
    <date>Fri Jun 05 18:13:56 CEST 2009</date>
    <body>Scott Ferguson wrote (2009-06-03 23:52): Scott Ferguson wrote (2009-06-03 21:17): Can you check the permissions, particularly of the resin-data directory?  We had some trouble at the end of the release cycle with permissions issues on the created directories, and it's possible we didn't catch all of the cases. I'm pretty sure it's not related to permissions. Running with full permissions, tried deleting resin-data dir and it is recreated. Should I send you the files in it??? Sure.  The important ones should be "resin_data_default.db" and "resin_mnode_default.db". Done a bit more debugging and I have arrived at com.caucho.server.distcache.FileCacheManager.put() which does nothing but return null!? Should persistent-store type="file" work at all...? Yikes.   All of our testing for sessions was against Resin Pro, which uses the "cluster" version.  I've refactored the code, and added open source testing for the basic session behavior. -- Scott I've added a bug report for the junction issue.  It's not something I'm familiar with. I don't think there is a "junction issue". I've had this configuration for a long time just changing the target of the junction/symbolic link. But somehow the RESIN_HOME environment variable takes precedence over the resin.exe location and that affects sessions somehow. Yes, that is exactly what is happening, so I was running 3.1.8 when the sessions worked... *blush* /Mattias Scott Ferguson wrote (2009-06-02 23:50): I wrote on "resin.conf = null when upgrading to Resin 4" (2009-06-02 06:48): Sitting here trying to upgrade the dev environment to Resin 4.0 with minimal changes to configuration and startup scripts. On Windows I'm up and running ... I apparently jumped the gun here. I am not up and running on Windows either. While picking up my resin.conf, Resin does not handle sessions but resets them on every request. Example "fine" log, first request: [20:56:44.359] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] new [20:56:44.359] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] create session ... Subsequent request: [20:57:27.250] Http[11] Cookie: JSESSIONID=aaaQKDKMBgGTm9hnkvIgs [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] reset [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] reset [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] new [20:57:27.750] SessionImpl[aaaQKDKMBgGTm9hnkvIgs,] create session The reset is normally a message that something went wrong in loading the session.  I'll need to see if we can either improve the information or just fix the issue. The bug is at http://bugs.caucho.com/view.php?id=3545 Tried to find a configuration fault by debugging, but I end up really confused. When com.caucho.server.session.SessionImpl.save() is entered, I have a couple of values in the session, but when stepping into the isValid() the _values Map is suddenly empty??? Here is my session config: FYI, this is ignored, currently, because the persistent store is always available (it lives in resin-data).  You do still need use- persistent-store to enable the session to use it. -- Scott + --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] No sessions in Resin 4</header>
    <date>Thu Jun 18 08:58:59 CEST 2009</date>
    <body>Scott Ferguson wrote (2009-06-05 18:11): I though I'd try this out by building Resin from trunk using Ant but I'm running into multiple issues when compiling with JDK 1.6.0_11. Is there documentation somewhere on building Resin from sources...?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] No sessions in Resin 4</header>
    <date>Thu Jun 18 09:13:04 CEST 2009</date>
    <body>I just downloaded the 4.0 distro sources, and built successfully with Java 1.6.0_07-b06-146 Haven't tried trunk, though. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] No sessions in Resin 4</header>
    <date>Thu Jun 18 09:21:01 CEST 2009</date>
    <body>Rick Mann wrote (2009-06-18 09:11): That doesn't work here either. Some new errors, some same. Well, the session bug should be fixed in trunk so... Hopefully there is a new snapshot out when I get back from summer vacation. --</body>
  </mail>
  <mail>
    <header>[Resin-interest] tag file '/WEB-INF/tags' must end with .tag or	.tagx</header>
    <date>Thu May 28 02:46:10 CEST 2009</date>
    <body>I keep getting this exception: tag file '/WEB-INF/tags' must end with .tag or .tagx but it's referring to a directory. In my .jsp files, I have this: Which I believe is valid. I also get complaints about one of the tags not existing: Jsp[] uri:/index.jsp(cp:/sat,app:/Users/rmann/LZRepo/satdb/trunk/ target/build/) -&amp;gt; /Users/rmann/LZRepo/satdb/trunk/target/build/index.jsp (com.caucho.loader.DynamicClassLoader) DynamicClassLoader[] adding loader SimpleLoader[/Users/rmann/LZRepo/satdb/trunk/target/build/WEB- INF/work] (com.caucho.make.ClassDependency) java.lang.ClassNotFoundException: _jsp._WEB_22dINF._tags._base__tag in EnvironmentClassLoader[web-app: http://default/sat ] (com.caucho.make.ClassDependency) _jsp._WEB_22dINF._tags._base__tag class digest is modified (old=6585694137753848998,new=-1) (com.caucho.jsp.java.JavaJspGenerator) taglib prefix=c uri: http://java.sun.com/jsp/jstl/core (com.caucho.jsp.java.JavaJspGenerator) taglib prefix=fmt uri: http://java.sun.com/jsp/jstl/fmt (com.caucho.jsp.java.JavaJspGenerator) taglib prefix=fn uri: http://java.sun.com/jsp/jstl/functions (com.caucho.server.webapp.WebApp) real-path /WEB-INF/tags/ -&amp;gt; /Users/ rmann/LZRepo/satdb/trunk/target/build/WEB-INF/tags/ (com.caucho.jsp.TagFileManager) com.caucho.jsp.JspParseException: tag file '/WEB-INF/tags/' must end with .tag or .tagx com.caucho.jsp.TagFileManager.getTag(TagFileManager.java:150) But the page seems to render properly anyway. Is this a bug in 4.0? I've experienced it in 3.2.1 as well. Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin-3.1.9 - rewrite-dispatch issue with	&amp;lt;query-param&amp;gt; condition</header>
    <date>Wed May 27 19:31:27 CEST 2009</date>
    <body>Dear all, I have some trouble with rewrite-dispatch in resin 3.1.9 Professional regarding the &amp;lt;query-param&amp;gt; condition. Previously with resin 2.1, I was using a simple JSP page to perform some kinds of redirections due to usage of frames. For example the URL: http://host/redirect.jsp?to=06/06_01_02.html has loaded a page for let's say a pricing option-1 in its main content with the outer frames as well. Now, with resin 3.1 the structure of the web-app is changed and there is a single page called "option-1.jsp" and I would like to rewrite requests to that former "redirect.jsp" to the new page, but I have to consider the query param for the most used invocations. I thought I can achieve this with the following &amp;lt;rewrite-dispatch&amp;gt; block inside the &amp;lt;host&amp;gt; tag. For a simple test case, I've configured it inside a &amp;lt;web-app&amp;gt; called "/rewrite-test": So I thought that a request to http://host/rewrite-test/redirect.jsp?to=06/06_01_02.html should be moved with 301 to http://host/rewrite-test/option-1.jsp due to the exact match of the &amp;lt;when query-param="..."&amp;gt; condition. But it does not work, so I've enabled 'finest' debug using and got this output: com.caucho.jsp.TldManager (initGlobal) Loading .tld files from global classpath com.caucho.server.rewrite.RewriteDispatch (map) rewrite-dispatch check uri '/redirect.jsp' com.caucho.server.rewrite.AbstractRuleWithConditions (map) match .* '/redirect.jsp' --&amp;gt; '/redirect.jsp' com.caucho.server.connection.Form (parseQueryString) query: to=06/06_01_02.html com.caucho.server.rewrite.ConditionFilterChain (doFilter) null ^/redirect.jsp '/redirect.jsp' --&amp;gt; '/rewrite-test/option-1.jsp' and that's what has been tracked by Firefox Live HTTP headers: GET /rewrite-test/redirect.jsp?to=06/06_01_02.html HTTP/1.1 Host: localhost:8080 User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.10) Gecko/2009042316 Firefox/3.0.10 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Language: de-de,en-us;q=0.7,en;q=0.3 Accept-Encoding: gzip,deflate Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7 Keep-Alive: 300 Connection: keep-alive HTTP/1.x 200 OK Server: Resin/3.1.9 Content-Type: text/html Transfer-Encoding: chunked Date: Wed, 27 May 2009 17:07:02 GMT ---------------------------------------------------------- condition is not working in this case. Thanks for any kind of hints or ideas. Steffen</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-3.1.9 - rewrite-dispatch issue with	&amp;lt;query-param&amp;gt; condition</header>
    <date>Fri May 29 15:50:50 CEST 2009</date>
    <body>Solved - just for the records, query-param provides two parameters: The request parameter name such as "to" and the value (regexp) to check for: The 4.0 syntax and its example at http://caucho.com/resin-javadoc/com/caucho/rewrite/IfQueryParam.html was giving me a better understanding than the actual 3.1 documentation without example. Steffen http://host/redirect.jsp?to=06/06_01_02.html has loaded a http://host/rewrite-test/redirect.jsp?to=06/06_01_02.html http://host/rewrite-test/option-1.jsp due to the exact match</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin cluster-backed session database</header>
    <date>Tue May 26 13:35:30 CEST 2009</date>
    <body>Is there a way to inspect the Resin session database to see how many session there are and what data they are storing? I could do this if we were using a SQL-backed session store but I've had issues with this in the past. rgds, Richard. Richard Grantham Development ------------------------------- rgrant...@limehousesoftware.co.uk Limehouse Software Ltd DDI: (020) 7566 3324 Main: (020) 7566 3320 Fax: (020) 7566 3321 Limehouse Software Ltd Bridewell Gate 9 Bridewell Place London EC4V 6AW www.limehousesoftware.co.uk - Unifying Information The information contained in this e-mail or in any attachments is confidential and is intended solely for the named addressee only. Access to this e-mail by anyone else is unauthorised. If you are not the intended recipient, please notify Limehouse Software Ltd immediately by returning this e-mail to sender or calling 020 7566 3320 and do not read, use or disseminate the information. Opinions expressed in this e-mail are those of the sender and not necessarily the company. Although an active anti-virus policy is operated, the company accepts no liability for any damage caused by any virus transmitted by this e-mail, including any attachments.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin cluster-backed session database</header>
    <date>Tue May 26 18:22:15 CEST 2009</date>
    <body>Can you give some details on exactly what you'd like to see?  We're upgrading the management and monitoring for 4.0.1, and can gather more information.  I've added a bug report at http://bugs.caucho.com/view.php?id=3533 , so you can also add notes to the bug report. The trouble in the past has been not really knowing what information would be useful other than a count of the current sessions. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin cluster-backed session database</header>
    <date>Tue May 26 18:32:26 CEST 2009</date>
    <body>Well, I guess I'd like to see session IDs, some representation of what's stored in the blob, when it was created, etc. Just simple stuff really. Perhaps ordering a view by creation date or size of blob. -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: 26 May 2009 17:14 To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Resin cluster-backed session database Can you give some details on exactly what you'd like to see?  We're upgrading the management and monitoring for 4.0.1, and can gather more information.  I've added a bug report at http://bugs.caucho.com/view.php?id=3533 , so you can also add notes to the bug report. The trouble in the past has been not really knowing what information would be useful other than a count of the current sessions. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Best Linux Flavor w/ Resin</header>
    <date>Fri May 22 22:21:00 CEST 2009</date>
    <body>Hi, I'm looking for the EASIEST TO MANAGE server &amp;amp; flavor of linux.  We are going to use these for hosting of multiple domains per server.  I'm also open to suggestions of VMware or Virtuosso.  I really want something that is built for linux/resin combination, and won't have any proprietory driver issues.  Also AMD or intel? I'm coming from the world of Solaris, so I'm trying to simplify my life.  I was just reviewing the 10,000 word document to upgrade the minor release of Solaris and thought....there has to be an easier way. Thanks much, Joey</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.0 embedded</header>
    <date>Fri May 22 12:19:31 CEST 2009</date>
    <body>Hi there, Now that version 4.0.0 has been released, I've tried again to integrate Resin into the Wembed project, which uses embedded container engines to facilitate automatic testing and I can happily confirm that version 4.0.0 works fine :). Just some minor issues: .- The default logging level is a bit verbose, as it is set at the info level and each line is doubled, as it is set to showing the full name of the class and the method from which the trace originated. Like: --- 22-may-2009 10:31:12 com.caucho.server.cluster.Server start INFO: resin.conf = null 22-may-2009 10:31:12 com.caucho.server.cluster.Server start INFO: 22-may-2009 10:31:12 com.caucho.server.cluster.Server start INFO: server     = 127.0.0.1:0 (:) ... -- Is there any place where I can configure, more or less easily, the default logging level in an embedded instance? .- The embedded engine requires a JDK for compiling as it needs a Java compiler, but... is it possible to configure it to use an "embedded compiler" like Apache Jasper or similar so it can be packed with the engine? It's not a big problem, but usually the default behaviour for .jar files, at least in Windows, is to be run with the JRE, and that implies that, by default, Resin chokes whereas Jetty and Tomcat do not. It's "the user's fault" but in any case I would like to be able to make Resin easier for "the average Joe" to use. .- Las issue is a licencing one. Resin's license is GPL, so I cannot pack it with the regular release, as the project is under the LGPL. But I could create a different package with the resin libs and with the single Java file that start/stops the server and is called through a neutral interface, and release that class under the GPL. Would that be ok for you, Caucho? The thing is that I want to promote Resin and I want to make it easy for users to test their applications with it, but I don't want to run into any legal trouble :). Packaging it with the default release would be great, Jetty and Tomcat 5.5 are already included, but that won't work so having an optinal package would be second best. I don't think getting users to download the .jar files themselves and putting them in the appropriate places would make it too popular. So, is the separate package and acceptable option for you guys? Salute and keep up the good work! :) D. ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) Web Services Centre for Information and Technology Balearic Islands University (SPAIN) -------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.0 embedded</header>
    <date>Fri May 22 18:29:14 CEST 2009</date>
    <body>I've added a bug report for this.  It's been something that's been bugging me a bit.  For normal Resin, we take control of the logging as soon as it's launched (so you could duplicate that -D... header), but we don't have a clean way of managing the logging if we're not in control at the start. I'm not sure I understand.  Jasper is the JSP implementation.  It isn't a compiler. You can bundle Resin with the eclipse compiler.  We already have a compiler="eclipse" option. That sounds fine. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.0 embedded</header>
    <date>Sun May 24 15:55:44 CEST 2009</date>
    <body>Hi Scott, S'està citant Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: I understand. The options that I've seen in other embedded containers are: .- Allow seetings to be configured through the API. .- Allow a "partial" configuration file where some settings can be specified. Both options have pros and cons, depending on whether you want to control everything programatically or just start it from your Java class and be able to configure it externally. In my case, I'd probably go for the second option, but that's just because it is the option that better suits my particular needs :D. Well, I might be wrong as I did not get into details, but with Tomcat a library is included that reads jasper-compiler.jar and that is in charge, if I'm not mistaken, of compiling the JSPs. And I can run that version using a JRE, so I asumed it included everything that was needed, JSP compiling included. I know that and I know how to configure it in the resin.conf file, but how does one configure the embedded version to use it? Is is detected automatically if is is found in the classpath? Otherwise, it might be another candidate to be included in the API/partial config file. Great. I'll provide a separate package licensed under the GPL and let you revise it in case you want to add something for the Resin part. On a related note, I cannot get the embedded container to run a .war file and I came across a quite weird thing. I'm setting it like that: --- --- After starting the server, I see that a WEB-INF directory is created in c:/tmp and a single empty directory "classes" inside it. Nothing else is there, so all I get are 404s. And then the weird thing. I wanted to test if using it with my full Resin 3.1.5 installation, so I changed the host configuration to be like this: ... ... The result was that it tried to deploy the application in the Resin directory, removing all the files... So Resin ended up removing itself! I'll have to try with the latest versions, but it looks like a problem :). S! D. ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin Pro 3.1.9 Hangs During Restart</header>
    <date>Thu May 21 18:50:34 CEST 2009</date>
    <body>Environment: Resin Pro 3.1.9, Windows 2003 Server 64-bit, Java 1.5_18 64-bit. I'm seeing a bad problem with Resin "waiting" many minutes before it restarts. I haven't been able to get a thread dump or sample because it happens intermittently. But I am seeing something in the logs that might point in the right direction. I don't know if this is a bug or something that can be fixed with a configuration change. Nevertheless, I have filed a bug &amp;lt;http:// bugs.caucho.com/view.php?id=3527&amp;gt;. This is happening in our development environment, which obviously gets very little traffic. We're planning on upgrading to Resin Pro 3.1.x in our production environment within the next couple of weeks, but obviously this is a big show-stopper for us. Note: Our restart process is to use the windows "sc stop \\machine resin", followed by a series of "sc query \\machine resin" to make sure it has stopped, followed by an "sc start \\machine resin". With Resin Pro 3.0.21, this process worked flawlessly. It's only with Resin Pro 3.1.9 that we started having this problem. What I usually see in the log files during a normal restart sequence is something like this. Notice the time stamps. Everything happens pretty quickly. stopping http://admin.caucho/resin- jmx-service] stopping http://localhost:80/resin- admin] stopping http://localhost:80 ] stopping Edition 1.5.0_18-b02, Cp1252, en 1.5.0_18-b02, 64, mixed mode, Sun Microsystems Inc. When there's a problem, I'm seeing this. Notice that it took 51 minutes (!!!) before it decided to restart. The only difference from above is that it says, "closing with 1 active requests". stopping http://admin.caucho/resin- jmx-service] stopping http://localhost:80/resin- admin] stopping http://localhost:80 ] stopping http://localhost:80 ] closing with 1 active requests. Edition 1.5.0_18-b02, Cp1252, en 1.5.0_18-b02, 64, mixed mode, Sun Microsystems Inc. Here's a second instance from a different server with the same configuration. This time the restart took 13 minutes. Again, it is closing with active requests (3 this time), along with a message about sessions. stopping http://admin.caucho/resin- jmx-service] stopping http://localhost:80/resin- admin] stopping http://localhost:80 ] stopping http://localhost:80 ] closing with 3 active requests. [abcy2ORXBFUU8dSJLfJfs,] LRU while in use (use-count=2).  Consider increasing session-count. Edition 1.5.0_18-b02, Cp1252, en 1.5.0_18-b02, 64, mixed mode, Sun Microsystems Inc. Any ideas? Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 3.1.9 Hangs During Restart</header>
    <date>Thu May 21 18:58:36 CEST 2009</date>
    <body>Environment: Resin Pro 3.1.9, Windows 2003 Server 64-bit, Java 1.5_18 64-bit. When there's a problem, I'm seeing this. Notice that it took 51 minutes (!!!) before it decided to restart. The only difference from above is that it says, "closing with 1 active requests". Can you get a thread dump to see why that request is hung? The &amp;lt;shutdown-wait-max&amp;gt; tag in &amp;lt;cluster&amp;gt; should determine the maximum time Resin will wait for requests before forcing a shutdown. -- Scott stopping http://admin.caucho/resin-jmx-service ] stopping http://localhost:80/resin-admin ] stopping http://localhost:80 ] stopping http://localhost:80 ] closing with 1 active requests. size=64M Edition 1.5.0_18-b02, Cp1252, en 1.5.0_18-b02, 64, mixed mode, Sun Microsystems Inc. Here's a second instance from a different server with the same configuration. This time the restart took 13 minutes. Again, it is closing with active requests (3 this time), along with a message about sessions. stopping http://admin.caucho/resin-jmx-service ] stopping http://localhost:80/resin-admin ] stopping http://localhost:80 ] stopping http://localhost:80 ] closing with 3 active requests. SessionImpl[abcy2ORXBFUU8dSJLfJfs,] LRU while in use (use-count=2). Consider increasing session-count. size=64M Edition 1.5.0_18-b02, Cp1252, en 1.5.0_18-b02, 64, mixed mode, Sun Microsystems Inc. Any ideas? Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 3.1.9 Hangs During Restart</header>
    <date>Thu May 21 19:05:36 CEST 2009</date>
    <body>Environment: Resin Pro 3.1.9, Windows 2003 Server 64-bit, Java 1.5_18 64-bit. When there's a problem, I'm seeing this. Notice that it took 51 minutes (!!!) before it decided to restart. The only difference from above is that it says, "closing with 1 active requests". Can you get a thread dump to see why that request is hung? I can try. I haven't had any luck so far as it seems to happen randomly. The &amp;lt;shutdown-wait-max&amp;gt; tag in &amp;lt;cluster&amp;gt; should determine the maximum time Resin will wait for requests before forcing a shutdown. I didn't configure that parameter, but the docs say the default is http://caucho.com/resin-3.1/doc/cluster-tags.xtp not be working, or the hang happens after that portion of the code that forces the shutdown. Rob -- Scott stopping http://admin.caucho/ resin-jmx-service] stopping http://localhost:80/ resin-admin] stopping http://localhost:80 ] stopping http://localhost:80 ] closing with 1 active requests. size=64M Standard Edition 1.5.0_18-b02, Cp1252, en 1.5.0_18-b02, 64, mixed mode, Sun Microsystems Inc. Here's a second instance from a different server with the same configuration. This time the restart took 13 minutes. Again, it is closing with active requests (3 this time), along with a message about sessions. stopping http://admin.caucho/ resin-jmx-service] stopping http://localhost:80/ resin-admin] stopping http://localhost:80 ] stopping http://localhost:80 ] closing with 3 active requests. [abcy2ORXBFUU8dSJLfJfs,] LRU while in use (use-count=2).  Consider increasing session-count. size=64M Standard Edition 1.5.0_18-b02, Cp1252, en 1.5.0_18-b02, 64, mixed mode, Sun Microsystems Inc. Any ideas? Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Pro 3.1.9 Hangs During Restart</header>
    <date>Thu May 21 19:19:40 CEST 2009</date>
    <body>Environment: Resin Pro 3.1.9, Windows 2003 Server 64-bit, Java 1.5_18 64-bit. When there's a problem, I'm seeing this. Notice that it took 51 minutes (!!!) before it decided to restart. The only difference from above is that it says, "closing with 1 active requests". Can you get a thread dump to see why that request is hung? I can try. I haven't had any luck so far as it seems to happen randomly. Ok.  If another 51 minute freeze happens, there should be enough time to get a thread dump. The &amp;lt;shutdown-wait-max&amp;gt; tag in &amp;lt;cluster&amp;gt; should determine the maximum time Resin will wait for requests before forcing a shutdown. I didn't configure that parameter, but the docs say the default is http://caucho.com/resin-3.1/doc/cluster-tags.xtp not be working, or the hang happens after that portion of the code that forces the shutdown. Hmm.  It is 60s.  The exit code uses Runtime.getRuntime().halt(1) in that situation to force the shutdown.  I don't see how the exit thread could get trapped, though.  It's designed to work even if the rest of the system is locked up. -- Scott Rob -- Scott stopping http://admin.caucho/resin-jmx-service ] stopping http://localhost:80/resin-admin ] stopping http://localhost:80 ] stopping http://localhost:80 ] closing with 1 active requests. size=64M Standard Edition 1.5.0_18-b02, Cp1252, en 1.5.0_18-b02, 64, mixed mode, Sun Microsystems Inc. Here's a second instance from a different server with the same configuration. This time the restart took 13 minutes. Again, it is closing with active requests (3 this time), along with a message about sessions. stopping http://admin.caucho/resin-jmx-service ] stopping http://localhost:80/resin-admin ] stopping http://localhost:80 ] stopping http://localhost:80 ] closing with 3 active requests. SessionImpl[abcy2ORXBFUU8dSJLfJfs,] LRU while in use (use- count=2).  Consider increasing session-count. size=64M Standard Edition 1.5.0_18-b02, Cp1252, en 1.5.0_18-b02, 64, mixed mode, Sun Microsystems Inc. Any ideas? Rob</body>
  </mail>
  <mail>
    <header>[Resin-interest] Watchdog &amp;amp; Chroot</header>
    <date>Wed May 20 00:20:50 CEST 2009</date>
    <body>Hi, I am using the following watchdog.conf to CHROOT &amp;amp; jail resin. http://caucho.com/ns/resin" After running the watchdog and starting the domain, I am able to use file.io to read any file on the server.  I want to prevent virtual hosts from reading files that they shouldn't have access to.  I think that I must be missing something somewhere, but I'm not sure what?  I know that CHROOT/JAIL typically has many steps involved with Tomcat, is that the same with Resin? Last twist::::If I am running Resin in conjunction with Apache does that cause additional CHROOT issues? Can resin handle multiple certs for virtual hosts using a watchdog.conf setup?  I primarily use apache for mod_rewrite &amp;amp; ssl certificates. Thanks, Joey</body>
  </mail>
  <mail>
    <header>[Resin-interest] Watchdog &amp;amp; Chroot</header>
    <date>Fri May 22 04:40:08 CEST 2009</date>
    <body>Hi, I am using the following watchdog.conf to CHROOT &amp;amp; jail resin. http://caucho.com/ns/resin" After running the watchdog and starting the domain, I am able to use file.io to read any file on the server.  I want to prevent virtual hosts from reading files that they shouldn't have access to.  I think that I must be missing something somewhere, but I'm not sure what?  I know that CHROOT/JAIL typically has many steps involved with Tomcat, is that the same with Resin? Last twist::::If I am running Resin in conjunction with Apache does that cause additional CHROOT issues? Can resin handle multiple certs for virtual hosts using a watchdog.conf setup?  I primarily use apache for mod_rewrite &amp;amp; ssl certificates. Thanks, Joey</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Watchdog &amp;amp; Chroot</header>
    <date>Fri May 22 04:52:08 CEST 2009</date>
    <body>Hi, I am using the following watchdog.conf to CHROOT &amp;amp; jail resin. http://caucho.com/ns/resin" After running the watchdog and starting the domain, I am able to use file.io to read any file on the server.  I want to prevent virtual hosts from reading files that they shouldn't have access to.  I think that I must be missing something somewhere, but I'm not sure what?  I know that CHROOT/JAIL typically has many steps involved with Tomcat, is that the same with Resin? Can you add the -verbose to check that chroot is occurring properly. Remember, for chroot to work, /resin/thehost/www.domain.com needs to have all the unix binaries, including the JVM. -- Scott Last twist::::If I am running Resin in conjunction with Apache does that cause additional CHROOT issues? Can resin handle multiple certs for virtual hosts using a watchdog.conf setup?  I primarily use apache for mod_rewrite &amp;amp; ssl certificates. Thanks, Joey</body>
  </mail>
  <mail>
    <header>[Resin-interest] MDB Config Using CanDI</header>
    <date>Tue May 19 07:53:01 CEST 2009</date>
    <body>I was going to start converting a bit of the config from the xml mapped names to the actual class names in our resin-web.xml . However the names have changed; Is there an example of how this works? Thanks in advance, Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] MDB Config Using CanDI</header>
    <date>Tue May 19 18:15:25 CEST 2009</date>
    <body>ejb-message-bean is a complicated case because the real bean is your DeliveryListener.  A similar kind of issue applies to remote service configuration, and bam-service and even Servlets. I think the right solution is to configure the DeliveryListener with annotations: Or for servlets: Where @MessageBean and @WebServlet are known annotations.  The CanDI spec's SPI has just changed radically in the last 3 weeks, making that kind of configuration possible (it's still a few weeks before Resin supports it, though.) So, until that's supported, you'll want to stick with &amp;lt;ejb-message- bean&amp;gt;. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] MDB Config Using CanDI</header>
    <date>Tue May 19 23:16:36 CEST 2009</date>
    <body>Right, and maybe then we will have support for @Current @MyQueue BlockingQueue&amp;lt;MyQueueItem&amp;gt; also. Yeah, the (remote) service/servlet stuff will be cleaner with that syntax.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Watchdog.conf usage Resin 3.1.8</header>
    <date>Tue May 19 01:14:35 CEST 2009</date>
    <body>Hi, I'm trying to setup a watchdog.conf to start multiple website and chroot to provide security. I have not been able to get this to work.    My watchdog.conf looks like: http://caucho.com/ns/resin" I'm not 100% certain as to what goes inside of:  www. http://www.domain.com.conf http://www.domain.com/ I'm assuming that the watchdog info is left out of here? I'm not 100% certain if the the resin.conf file that is being called by watchdog, will include additional watchdog configuration parameters?  I hope that I was able to clearly explain this.  I'm basically looking for guidance on what to include inside of the file called by watchdog.conf: Thanks!!! Joey</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Watchdog.conf usage Resin 3.1.8</header>
    <date>Tue May 19 18:18:27 CEST 2009</date>
    <body>Hi, I'm trying to setup a watchdog.conf to start multiple website and chroot to provide security. I have not been able to get this to work.    My watchdog.conf looks like: http://caucho.com/ns/resin" I'm not 100% certain as to what goes inside of:  www.domain.com.conf It's a complete resin.xml.  If you start with -verbose, you should see the Watchdog launch the new Resin instance using www.domain.com.conf as its configuration file. -- Scott I'm assuming that the watchdog info is left out of here? I'm not 100% certain if the the resin.conf file that is being called by watchdog, will include additional watchdog configuration parameters?  I hope that I was able to clearly explain this.  I'm basically looking for guidance on what to include inside of the file called by watchdog.conf: Thanks!!! Joey</body>
  </mail>
  <mail>
    <header>[Resin-interest] Re sin 3.1.9, Scheduled Tasks Broken after upgrade</header>
    <date>Sun May 17 17:04:40 CEST 2009</date>
    <body>We upgraded to resin 3.1.9 yesterday in our production environment.  The upgrade process for us was simple: unzip the 3.1.9 bundle, copy over the resin.conf, license, other supporting files and restart the server. However, 3.1.9 will not run any of our scheduled tasks.  The app comes up under 3.1.9, responds to requests, but won't run tasks (I think this carries over to JMS as well, but need to confirm).  Bring the server down and start up in 3.1.8 and schedule tasks resume executing. I recall when upgrading to 3.1.8 there may have been an issue with some of the Resin generated wrappers/proxies on registered beans that prevented tasks from running, and clearing something (WEB-INF/work, IIRC) ended up unblocking whatever kept ScheduledTasks from running.  We've tried doing clean builds and deploying under clean installs to 3.1.9 and can't get those tasks to run. We experience the exact same behavior in development, stage, and production. Any ideas? -tyson -- View this message in context: http://www.nabble.com/Resin-3.1.9%2C-Scheduled-Tasks-Broken-after-upgrade-tp23584210p23584210.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re sin 3.1.9, Scheduled Tasks Broken after upgrade</header>
    <date>Sun Nov 01 18:31:49 CET 2009</date>
    <body>Bumping this, still seeing the issue with 3.1.9.  We tried to move forward to 3.1.9 again today, but all ScheduledTasks would not run.  Reverted to 3.1.8 and AOK. -tyson -- View this message in context: http://old.nabble.com/Resin-3.1.9%2C-Scheduled-Tasks-Broken-after-upgrade-tp23584210p26149992.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re sin 3.1.9, Scheduled Tasks Broken after upgrade</header>
    <date>Sun Nov 01 19:29:48 CET 2009</date>
    <body>Things we've tried: * changing our tasks to implement Runnable vs Work (a swag, as com.caucho.resources.ScheduledTask operates on Runnables, which work is * Put breakpoints in com.caucho.resources.ScheduledTask methods including the init, start, and handleAlarm methods. The debugger breaks on init and start, but handleAlarm is never called. Is something killing the alarm service?  Did something change in the schedule-task tags that require changing syntax in 3.1.9? The 3.1.8 mem leak issues are a problem for us in production, thus the desire to move to 3.1.9. Thanks, -tyson -- View this message in context: http://old.nabble.com/Resin-3.1.9%2C-Scheduled-Tasks-Broken-after-upgrade-tp23584210p26150932.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re sin 3.1.9, Scheduled Tasks Broken after upgrade</header>
    <date>Sun Nov 01 20:20:48 CET 2009</date>
    <body>I stepped through CronType in the debugger and 3.1.9 is setting the next start time for the scheduled task a week out.  Here's the config we have: Running this today (Nov 1), the next start time is set to Nov 8.  I set resin's debug level to finer, and all scheduled tasks now start a week late. Although I have "*" in the day of week block, CronType is advancing the next time to current day + 7.  There was one change made to CronType between 3.1.8 and 3.1.9, which is highlighted below.  3.1.8 does not push the next start time out a week. -- View this message in context: http://old.nabble.com/Resin-3.1.9%2C-Scheduled-Tasks-Broken-after-upgrade-tp23584210p26152486.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re sin 3.1.9,	Scheduled Tasks Broken after upgrade</header>
    <date>Mon Nov 02 18:59:43 CET 2009</date>
    <body>Thanks, I've reported a bug: http://bugs.caucho.com/view.php?id=3736 --Alex http://old.nabble.com/Resin-3.1.9%2C-Scheduled-Tasks-Broken-after-upgrade-tp23584210p26152486.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re sin 3.1.9,	Scheduled Tasks Broken after 	upgrade</header>
    <date>Mon Nov 02 19:08:45 CET 2009</date>
    <body>Thanks.  As a work around, I ripped out the class file from the resin.jar in 3.1.8 and stuffed it in the 3.1.9 resin jar, and all is well. -tyson http://bugs.caucho.com/view.php?id=3736 http://old.nabble.com/Resin-3.1.9%2C-Scheduled-Tasks-Broken-after-upgrade-tp23584210p26152486.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Hessian remoted objects with @ApplicationScoped	break</header>
    <date>Sat May 16 03:07:27 CEST 2009</date>
    <body>ScottH and I have spent some time (fortunately, well-spent time in a pub with wifi and a deep reserve of Magners) trying to figure out why one of our @ApplicationScoped objects seems to have several instances in the container.  The problem seems to be when you declare the We have a test with two beans, EchoService (@Stateless) and DeeperService (@ApplicationScoped).  EchoService calls DeeperService, which logs the object id. When DeeperService has no &amp;lt;servlet-mapping&amp;gt;, calls to EchoService always return the same DeeperService id.  When DeeperService also has a &amp;lt;servlet-mapping&amp;gt;, calls to EchoService return different DeeperService ids. Code to demonstrate this is here: http://scratchmonkey.googlecode.com/svn/resin4/hessian_scopes This is a bug, right? Jeff</body>
  </mail>
  <mail>
    <header>[Resin-interest] Hessian Remote Refs</header>
    <date>Fri May 15 22:23:33 CEST 2009</date>
    <body>I have setup a hessian service (servlet) and when returning objects (stateless ejb for example) I see that a SingletonHandle instance if returned over the protocol. The client proxy then unpacks the object and tries to call the local (client) Injector to get the instance, instead of making the remote call to retrieve the instance from the server. How can I have the Hessian protocol return a ref to my actual bean, or a remote reference it won't try to resolve (create) at the client? Here is the type of  code I'm using on the client: MyService myService = (MyService)fact.create(MyService.class, " http://localhost:8080/mywebapp/api/myservice" myService.doServerThing(); // does server thing //UnsatisfiedDependencyException ; this should be called on the server Thanks in advance, Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hessian Remote Refs</header>
    <date>Fri May 15 23:07:51 CEST 2009</date>
    <body>The issue is on the EJB end, not technically Hessian.  You might be able to create a writeReplace() method (part of the java.io.Serializable pattern), to save a stub that will then deserialize into a Hessian client proxy. -- Scott http://localhost:8080/mywebapp/api/myservice" http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hessian Remote Refs</header>
    <date>Sat May 16 00:11:10 CEST 2009</date>
    <body>Hmmmm... let me ask the question that ScottH is, I think, trying to ask: What is the best way to make multiple hessian calls within a single session?  Ie, calls to a @SessionScoped object will get the same instance. Jeff http://localhost:8080/mywebapp/api/myservice" http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Regarding bug 3418,	Watchdog Startup Synchronization</header>
    <date>Thu May 14 21:59:33 CEST 2009</date>
    <body>Environment: Resin Pro 3.1.9 (100 Server License) on 64-bit Windows 2003/08 Server with Java 1.5_18. http://bugs.caucho.com/view.php?id=3418 Resin Pro 3.1.9. I've already updated the bug, but figured I would post here because I don't know how often bugs are read/updated. Our deployment system uses the Windows SC (Service Controller) commands to stop and then start resin. I built in a five second delay between the time the SC query command notifies me that resin has stopped and the time that it attempts to start it up again. My concern, of course, is that five seconds might not always be enough time for the watchdog to completely exit. The original reporter of this bug indicates that, on a busy machine, he has to wait as long as 15 seconds. However, it's unclear to me if he's confirmed that resin has stopped before initiating the 15 second delay. The five second delay I put in kicks in *after* I've confirmed that resin has stopped as reported by the sc query command. Is there any way to know if this five second delay is a legitimate hack? Waiting for the dev/QA cycle for the 3.1.10 release isn't going to work for us on our time table. I'm looking at the watchdog code now to see if I can figure out a fix, but I'm not going to be able to spend too much time on it, I'm afraid. Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Regarding bug 3418,	Watchdog Startup Synchronization</header>
    <date>Thu May 14 23:04:50 CEST 2009</date>
    <body>http://bugs.caucho.com/view.php?id=3418 Looking at the code, the socket timeout is only 1s, which is pretty short.  The timeout is in com.caucho.boot.WatchdogProcess.runInstance -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Regarding bug 3418, Watchdog Startup Synchronization</header>
    <date>Thu May 14 23:45:01 CEST 2009</date>
    <body>Environment: Resin Pro 3.1.9 (100 Server License) on 64-bit Windows 2003/08 Server with Java 1.5_18. http://bugs.caucho.com/view.php?id=3418 in Resin Pro 3.1.9. I've already updated the bug, but figured I would post here because I don't know how often bugs are read/updated. Looking at the code, the socket timeout is only 1s, which is pretty short.  The timeout is in com.caucho.boot.WatchdogProcess.runInstance Agreed. The logs indicate that the closingInstance() method is getting called. But look at the time stamps between the time when that happens and the time when it attempts to restart the WatchdogTask (which is when the problem occurs): [2009/05/14 06:29:58.873] WatchdogProcess[Watchdog[],1] stopping Resin [2009/05/14 06:30:01.827] java.lang.IllegalStateException: Can't start new task because of old task 'WatchdogTask[Watchdog[]]' That's about 3 seconds. So I don't think the socket time out is an issue. It does get to the closeInstance() method. In the closingInstance() method, line 322 is: So that means it has to wait for the process itself to exit. The destroy() method does a waitFor() on the process, which is reasonable. However, that waitFor() isn't encapsulated by any kind of maximum wait time thread. Java doesn't offer a waitFor() method with a wait time. In code that I've written that uses Processes, I always encapsulate the Process inside a thread and specify a maximum amount of time that I'm willing to wait for the process to end. In theory, this could lead to memory leaks if the process *never* ends. But at least that information can be logged. But anyway, none of this explains why the specified WatchdogTask isn't being set to null in the Watchdog (it does, but only in the kill() method), so that means the same Watchdog instance is getting re-used. That's where I'm getting a little lost in the code. I see the WatchdogManager, and I see that there are a few places that Watchdog instances get added to the Map, but I don't see where they get removed. Should there be some point where a Watchdog instance gets removed from the WatchdogManager? Then again, given that resin is getting completely shut down, why is there even a WatchdogManager and list of Watchdogs to worry about? Shouldn't all that disappear along with everything else? Rob -- Scott Our deployment system uses the Windows SC (Service Controller) commands to stop and then start resin. I built in a five second delay between the time the SC query command notifies me that resin has stopped and the time that it attempts to start it up again. My concern, of course, is that five seconds might not always be enough time for the watchdog to completely exit. The original reporter of this bug indicates that, on a busy machine, he has to wait as long as 15 seconds. However, it's unclear to me if he's confirmed that resin has stopped before initiating the 15 second delay. The five second delay I put in kicks in *after* I've confirmed that resin has stopped as reported by the sc query command. Is there any way to know if this five second delay is a legitimate hack? Waiting for the dev/QA cycle for the 3.1.10 release isn't going to work for us on our time table. I'm looking at the watchdog code now to see if I can figure out a fix, but I'm not going to be able to spend too much time on it, I'm afraid. Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Regarding bug 3418,	Watchdog Startup Synchronization</header>
    <date>Fri May 15 18:57:40 CEST 2009</date>
    <body>In Watchdog.stop() try the following: if (task != null) -- Scott Environment: Resin Pro 3.1.9 (100 Server License) on 64-bit Windows 2003/08 Server with Java 1.5_18. http://bugs.caucho.com/view.php?id=3418 present in Resin Pro 3.1.9. I've already updated the bug, but figured I would post here because I don't know how often bugs are read/updated. Looking at the code, the socket timeout is only 1s, which is pretty short.  The timeout is in com.caucho.boot.WatchdogProcess.runInstance Agreed. The logs indicate that the closingInstance() method is getting called. But look at the time stamps between the time when that happens and the time when it attempts to restart the WatchdogTask (which is when the problem occurs): [2009/05/14 06:29:58.873] WatchdogProcess[Watchdog[],1] stopping Resin [2009/05/14 06:30:01.827] java.lang.IllegalStateException: Can't start new task because of old task 'WatchdogTask[Watchdog[]]' That's about 3 seconds. So I don't think the socket time out is an issue. It does get to the closeInstance() method. In the closingInstance() method, line 322 is: So that means it has to wait for the process itself to exit. The destroy() method does a waitFor() on the process, which is reasonable. However, that waitFor() isn't encapsulated by any kind of maximum wait time thread. Java doesn't offer a waitFor() method with a wait time. In code that I've written that uses Processes, I always encapsulate the Process inside a thread and specify a maximum amount of time that I'm willing to wait for the process to end. In theory, this could lead to memory leaks if the process *never* ends. But at least that information can be logged. But anyway, none of this explains why the specified WatchdogTask isn't being set to null in the Watchdog (it does, but only in the kill() method), so that means the same Watchdog instance is getting re-used. That's where I'm getting a little lost in the code. I see the WatchdogManager, and I see that there are a few places that Watchdog instances get added to the Map, but I don't see where they get removed. Should there be some point where a Watchdog instance gets removed from the WatchdogManager? Then again, given that resin is getting completely shut down, why is there even a WatchdogManager and list of Watchdogs to worry about? Shouldn't all that disappear along with everything else? Rob -- Scott Our deployment system uses the Windows SC (Service Controller) commands to stop and then start resin. I built in a five second delay between the time the SC query command notifies me that resin has stopped and the time that it attempts to start it up again. My concern, of course, is that five seconds might not always be enough time for the watchdog to completely exit. The original reporter of this bug indicates that, on a busy machine, he has to wait as long as 15 seconds. However, it's unclear to me if he's confirmed that resin has stopped before initiating the 15 second delay. The five second delay I put in kicks in *after* I've confirmed that resin has stopped as reported by the sc query command. Is there any way to know if this five second delay is a legitimate hack? Waiting for the dev/QA cycle for the 3.1.10 release isn't going to work for us on our time table. I'm looking at the watchdog code now to see if I can figure out a fix, but I'm not going to be able to spend too much time on it, I'm afraid. Rob</body>
  </mail>
  <mail>
    <header>[Resin-interest] Custom hessian serialization in Resin</header>
    <date>Thu May 14 20:07:05 CEST 2009</date>
    <body>Is there a way to register custom hessian serializers in Resin? Resin4 can't serialize java.net.URL :-( Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Custom hessian serialization in Resin</header>
    <date>Thu May 14 20:29:09 CEST 2009</date>
    <body>In addition, we're having problems serializing a byte[]. One additional complication is that if we turn com.caucho.hessian logging to finest, it throws an exception that is not thrown when logging is lower (and not useful, unfortunately): java.lang.IllegalStateException: 1 is an unknown object type com.caucho.hessian.io.HessianDebugState$ObjectState.&amp;lt;init&amp;gt;(HessianDebugState.java:1345) com.caucho.hessian.io.HessianDebugState$State.nextObject(HessianDebugState.java:523) com.caucho.hessian.io.HessianDebugState$CompactListState.next(HessianDebugState.java:1651) com.caucho.hessian.io.HessianDebugState.next(HessianDebugState.java:98) Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Custom hessian serialization in Resin</header>
    <date>Thu May 14 23:06:50 CEST 2009</date>
    <body>Solved the problem of serializing a byte[]... it had nothing to do with the byte[], it was because we are calling overloaded methods. Must call HessianProxyFactory.setOverloadEnabled(true), which we here are now calling the "setBroken(false)" method :-) Still can't deserialize java.net.URL, looks like Hessian is calling the URL(String) constructor and passing in a null. Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Custom hessian serialization in Resin</header>
    <date>Thu May 14 23:43:01 CEST 2009</date>
    <body>Hmm.  I refactored that customization for Resin4 and it looks like URL wasn't handled properly. Serializers and deserializers can be registered in META-INF/hessian/ serializers and META-INF/hessian/deserializers.  The 4.0 resin.jar should include some already.  You would want to follow the pattern of the FileDeserializer in com.caucho.hessian.io. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] JNDI viewer?</header>
    <date>Thu May 14 03:44:58 CEST 2009</date>
    <body>Is there a JNDI viewer in Resin that will let me see what's in the JNDI tree? JBoss has a cool JMX bean that prints out the tree as HTML, which is very useful for debugging. Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JNDI viewer?</header>
    <date>Thu May 14 18:17:29 CEST 2009</date>
    <body>Hi Jeff, We don't have that right now, but you asked at just the right time.  I'm looking at upgrading our /resin-admin with a bunch of new information and features, so I'll put that on the list. Thanks, Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>[Resin-interest] Automating virtual hosting....</header>
    <date>Tue May 12 19:51:44 CEST 2009</date>
    <body>I am trying to automate the process of integrating Resin with a cPanel hosting environment. For each customer that signs up for a cPanel account I need to add the virtual hosting tags to the Resin conf file manually. Currently the code block that is added is similar to this: These blocks are added to the &amp;lt;cluster&amp;gt;...&amp;lt;/cluster&amp;gt; block within the resin conf file. Unfortunately the path to the domain is not based on the domain name so I cannot setup dynamic virtual hosting based on a path. But I wanted to know if there was a way to write these individual blocks into separate files that got included or imported by the Resin conf file. In other words I can take into a hook for cPanel and create a text file with the contents of the block above (or some new lines if needed) and save it as something like domain.conf. Then I would like to have the resin conf file automatically read in all these domain based conf files based on the path to the file locations and the extension so any new domain conf file that is dropped into the directory would automatically be included or become part of the Resin conf file. Is this doable with Resin 3.1? -Peter</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Automating virtual hosting....</header>
    <date>Tue May 12 20:09:48 CEST 2009</date>
    <body>You can try the resin:import with the fileset syntax: ... That sounds like it's what you're looking for. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Automating virtual hosting....</header>
    <date>Tue May 12 20:36:00 CEST 2009</date>
    <body>Scott, Do you know what the syntax of the actual xml files should be? Is there a container that should hold the &amp;lt;host&amp;gt; block in the individual xml files? -Peter http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Automating virtual hosting....</header>
    <date>Tue May 12 21:21:06 CEST 2009</date>
    <body>resin:import always uses the containing context for the top-level xml, because it's like an extension of the current context. Since your host import is inside the &amp;lt;cluster&amp;gt;, the syntax of your *.xml would be http://caucho.com/ns/resin" ... -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Automating virtual hosting....</header>
    <date>Wed May 13 01:35:49 CEST 2009</date>
    <body>Thanks Scott for all the help. This is how far I've gotten. I have added the import block to Resin conf file as follows: I have also created a directory at :  /var/www/vhosts/resinconf and placed the following file in it: showmyip.xml and the file contains the following: http://caucho.com/ns/resin" When I restart Railo it starts up and doesn't give any errors. But when I try to hit the virtual host I get an error that is indicative that the host block was not loaded. So it seems that the resin:import command doesn't through any errors but cannot find or access the showmyip.xml file. Any ideas what could be causing this? I've alrady chmod the resinconf dir and the showmyip.xml file to 777 to make sure it is not a permission issue but that didn't help matters either. -Peter http://caucho.com/ns/resin" http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Automating virtual hosting....</header>
    <date>Wed May 13 02:28:55 CEST 2009</date>
    <body>Try turning on resin logging to "fine" or "finest" and see if it detects your configuration files. I don't remember the logging statements, but it should be inside one of the default resin.conf files that comes with the distribution. -ck http://caucho.com/ns/resin" http://caucho.com/ns/resin" http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Automating virtual hosting....</header>
    <date>Mon May 18 19:10:23 CEST 2009</date>
    <body>Thank you everyone for your assistance on getting this setup. I now have a directory where I can drop individual config files for each domain and get them integrated into the resin.conf file using restart of Resin to discover the newly added file which will kill everyones sessions and forces a reload of all the web apps. Not a very appealing feature from the customer perspective ;-) Someone told me I could setup a cluster with two Resin instances running on the same server so if the instances had to be restarted the sessions would be preserved. Does anyone know how to do this? -Peter http://caucho.com/ns/resin" http://caucho.com/ns/resin" http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Automating virtual hosting....</header>
    <date>Tue May 19 18:28:28 CEST 2009</date>
    <body>Hmm. That's an interesting point.  Even if the directory change was detected, Resin would force a restart because the config file affects the &amp;lt;cluster&amp;gt;, even though you might just be adding a new host.  In other words, it wouldn't be sophisticated enough to know that adding a host is isolated. It would be a little more complicated because you'd also need a load balancer. You can use a single resin.xml file.  Each Resin server/virtual-host would have its own &amp;lt;cluster&amp;gt;.  (A cluster for Resin is a collection of identically-configured virtual hosts.  You can have one server in a cluster.)  Assuming you have a single HTTP port, you'd need a load- balance instance of Resin to forward the requests to the proper backend Resin instance. -- Scott http://caucho.com/ns/resin" http://caucho.com/ns/resin" http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Automating virtual hosting....</header>
    <date>Tue May 19 19:38:41 CEST 2009</date>
    <body>Scott, Thanks for the input. May be I'm going about this the wrong way. What is the best practices for setting up shared virtual hosting of Resin. I basically want to provide Railo ( http://www.getrailo.org ) hosting. Railo is a CFML engine that can run on top of any J2EE container. Right now I am using the cPanel control panel and have hooks programmed in to create the necessary domain.xml files which are tapped into a single install of Resin. The current architecture works ]like this, when a user signs up, a new domain.xml file is created and stored in a config directory. Then the script does a touch on the resin.conf file to force a restart. The resin.conf includes the newly created domain.xml using the directory. So everything is working and automated, I just wanted to know if there was a way to make it so the applications didn't see the service go up and down. Any advice you could provide on this would be appreciated. -Peter</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Automating virtual hosting....</header>
    <date>Wed May 20 16:42:03 CEST 2009</date>
    <body>We've been there, done that! Sample resin.conf: --&amp;gt; All your interesting settings stuff goes here! &amp;lt;-- then, we have resin/conf/virtual/&amp;lt;domain&amp;gt; directories, which contain only one configuration file: host.xml http://caucho.com/ns/resin" xmlns:resin=" http://caucho.com/ns/resin/core" (this is one example) This way, you get virtual hosting, adding and removing sites without restarting resin, flexible site directory locations and it works generally just fine. There's another way, you can leave &amp;lt;host-default&amp;gt; unchanged this way, your conf/virtual/&amp;lt;domain&amp;gt;/host.xml will look like this: http://caucho.com/ns/resin" But, I've chose to move all that info into host-default, and make host.xml only supply variables. http://www.getrailo.org ) hosting.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Automating virtual hosting....</header>
    <date>Wed May 13 11:32:24 CEST 2009</date>
    <body>Peter Amiri schrieb: In addition to the resin:import mechanism, you could also use the XML feature of so-called "external general parsed entities" (EGPE), which would allow you to append your &amp;lt;host&amp;gt; configuration snippets to a file called, say, "vhosts.ent", that is included in your configuration file using an entity declaration and an entity reference, like this: ... Note that the EGPE doesn't have to be a valid *document*, so it can be like a logfile: ... Maybe this gives you additional ideas on how to modularize your XML. Michael Ludwig</body>
  </mail>
  <mail>
    <header>[Resin-interest] Authentication using hessian</header>
    <date>Sat May 09 05:05:00 CEST 2009</date>
    <body>Hessian auth doesn't seem to work.  I have a small test project here: http://scratchmonkey.googlecode.com/svn/resin4/programmatic_auth The client code is very simple: public static void main(String[] args) throws Exception String url = " http://localhost:8080/ct/api/Echo" Yet even with a simple XmlAuthenticator on the backend, it always gives me permission denied.  I've tried putting my own authenticator on the backend and it never seems to get called. Is this a bug or am I doing something wrong?  Has anyone successfully performed remote authentication using hessian? This is using the 4.0.0 release. Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Authentication using hessian</header>
    <date>Wed May 13 02:57:57 CEST 2009</date>
    <body>We have basic authentication and access control with Hessian working. Auth in Hessian is done with BASIC auth, therefore there must be a BasicLogin - our custom Login must extend that class. The configuration of this is, unfortunately, tricky to figure out. Our custom Login is picked up out of the classpath, so if you declare it (or anything else) in resin-web.xml the appserver will throw ambiguity errors. There still seem to be a lot of problems - for instance, the &amp;lt;IfRole&amp;gt;, But that isn't holding us up. Our blocking problem now is that there doesn't seem to be any way to get the caller Principal in an EJB.  Injection of the SessionContext doesn't work: @Resource SessionContext ctx;  (standard ejb3 approach) @Current SessionContext ctx;   (expected CanDI approach) both fail.  ScottH found a workaround, calling SecurityContext.getUserPrincipal(), but this only works in the webapp and doesn't work from a Hessian call. We have the opensource SubEtha mailing list server deployed on Resin4, and it seems to work, but we can't run the unit tests without hessian. Obviously we can't release the server without running unit tests :-( Any ideas? Thanks, Jeff http://scratchmonkey.googlecode.com/svn/resin4/programmatic_auth http://localhost:8080/ct/api/Echo"</body>
  </mail>
  <mail>
    <header>[Resin-interest] Entities in Resin 4.0 (CanDI)</header>
    <date>Sat May 09 02:08:50 CEST 2009</date>
    <body>Hi all, Do entities gets all the CanDI (like servlets, EJBs and so on)? I'm assuming Amber does this when creating new instances. Also, if we use Hibernate will the entities created also be injected? I assume not, and if not, is there a plan for supporting this? Thanks in advance, Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Entities in Resin 4.0 (CanDI)</header>
    <date>Mon May 11 20:37:51 CEST 2009</date>
    <body>No they don't (unless JPA 2.0 adds that capability and I haven't looked at JPA recently).  That part of the CanDI spec is currently being revised to clarify what's injectable.  Basically, CanDI's injectable instances are the same as JavaEE.  So if you can use @Resource or @EJB, you can use @MyBinding and @Current.  Since JPA entities don't support injection for the older @Resource, they don't support CanDI. As a non-standard JPA extension, we could add that capability, but it would be non-standard. The issue is on the JPA side of things.  The current CanDI draft exposes methods so JPA could inject entity beans in a standard way, but unless there's a hook for to intercept JPA object creation, Resin's CanDI can't grab the objects at the right time. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] WebApp context-path</header>
    <date>Fri May 08 23:41:34 CEST 2009</date>
    <body>I'd like to set the context-path for my war (to be something other than the name of the war file). So that mywar.war deploys to http://localhost/someothername . It seems like setting the context-path of the &amp;lt;web-app&amp;gt; defined in resin-web.xml should be the way( http://www.caucho.com/resin/doc/resin-web-xml-schema.xtp ), but there is an error when I do this. I also thought that maybe setting the id would do it, since that is what the code uses, if no contect-path is set. Anyone got a suggestion? Thanks in advance, Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Trunk broken?</header>
    <date>Fri May 08 02:17:09 CEST 2009</date>
    <body>Should trunk compile?  I'm switching to 4.0.0, but still... resin-compile: module: [copy] Copying 127 files to /Users/jeff/Documents/workspace/Resin/modules/resin/classes [javac] Compiling 2524 source files to /Users/jeff/Documents/workspace/Resin/modules/resin/classes [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/GoogleQuercus.java:33: cannot find symbol [javac] symbol  : class Env [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/GoogleQuercus.java:35: package com.caucho.quercus.page does not exist [javac]                               ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/GoogleQuercus.java:36: cannot find symbol [javac] symbol  : class ModuleContext [javac] location: package com.caucho.quercus.module [javac]                                 ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/GoogleQuercus.java:54: cannot find symbol [javac] symbol: class Quercus [javac] public class GoogleQuercus extends Quercus [javac]                                    ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/GoogleQuercus.java:60: cannot find symbol [javac] symbol  : class ModuleContext [javac] location: class com.caucho.quercus.GoogleQuercus [javac]           ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/GoogleQuercus.java:95: cannot find symbol [javac] symbol  : class ModuleContext [javac] location: class com.caucho.quercus.GoogleQuercus [javac]   protected ModuleContext createModuleContext(ModuleContext parent, [javac]                                               ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/GoogleQuercus.java:95: cannot find symbol [javac] symbol  : class ModuleContext [javac] location: class com.caucho.quercus.GoogleQuercus [javac]   protected ModuleContext createModuleContext(ModuleContext parent, [javac]             ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/GoogleQuercus.java:101: cannot find symbol [javac] symbol  : class QuercusPage [javac] location: class com.caucho.quercus.GoogleQuercus [javac]   public Env createEnv(QuercusPage page, [javac]                        ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/GoogleQuercus.java:101: cannot find symbol [javac] symbol  : class Env [javac] location: class com.caucho.quercus.GoogleQuercus [javac]   public Env createEnv(QuercusPage page, [javac]          ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/ResinQuercus.java:33: cannot find symbol [javac] symbol  : class ModuleContext [javac] location: package com.caucho.quercus.module [javac]                                 ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/ResinQuercus.java:49: cannot find symbol [javac] symbol: class Quercus [javac] public class ResinQuercus extends Quercus [javac]                                   ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/ResinQuercus.java:55: cannot find symbol [javac] symbol  : class ModuleContext [javac] location: class com.caucho.quercus.ResinQuercus [javac]   private static EnvironmentLocal&amp;lt;ModuleContext&amp;gt; _localModuleContext [javac]                                   ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/ResinQuercus.java:87: cannot find symbol [javac] symbol  : class ModuleContext [javac] location: class com.caucho.quercus.ResinQuercus [javac]   public ModuleContext getLocalContext(ClassLoader loader) [javac]          ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/ResinQuercus.java:113: cannot find symbol [javac] symbol  : class ModuleContext [javac] location: class com.caucho.quercus.ResinQuercus [javac]   protected ModuleContext createModuleContext(ModuleContext parent, [javac]                                               ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/ResinQuercus.java:113: cannot find symbol [javac] symbol  : class ModuleContext [javac] location: class com.caucho.quercus.ResinQuercus [javac]   protected ModuleContext createModuleContext(ModuleContext parent, [javac]             ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/CompositeDataValue.java:37: cannot find symbol [javac] symbol: class Value [javac]                                         ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/CompositeDataValue.java:52: cannot find symbol [javac] symbol  : class Env [javac] location: class com.caucho.quercus.env.CompositeDataValue [javac]   public Value getField(Env env, StringValue attrName) [javac]                         ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/CompositeDataValue.java:52: cannot find symbol [javac] symbol  : class StringValue [javac] location: class com.caucho.quercus.env.CompositeDataValue [javac]   public Value getField(Env env, StringValue attrName) [javac]                                  ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/CompositeDataValue.java:52: cannot find symbol [javac] symbol  : class Value [javac] location: class com.caucho.quercus.env.CompositeDataValue [javac]   public Value getField(Env env, StringValue attrName) [javac]          ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/CompositeDataWrapper.java:33: cannot find symbol [javac] symbol  : class Value [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:33: package com.caucho.quercus.expr does not exist [javac]                               ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:34: cannot find symbol [javac] symbol  : class ErrorModule [javac] location: package com.caucho.quercus.lib [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:35: cannot find symbol [javac] symbol  : class VariableModule [javac] location: package com.caucho.quercus.lib [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:36: cannot find symbol [javac] symbol  : class OptionsModule [javac] location: package com.caucho.quercus.lib [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:37: package com.caucho.quercus.lib.file does not exist [javac]                                   ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:38: package com.caucho.quercus.lib.file does not exist [javac]                                   ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:39: package com.caucho.quercus.lib.file does not exist [javac]                                   ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:40: package com.caucho.quercus.lib.file does not exist [javac]                                   ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:41: package com.caucho.quercus.lib.regexp does not exist [javac]                                     ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:42: package com.caucho.quercus.lib.string does not exist [javac]                                     ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:43: package com.caucho.quercus.lib.string does not exist [javac]                                     ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:44: cannot find symbol [javac] symbol  : class ModuleContext [javac] location: package com.caucho.quercus.module [javac]                                 ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:45: cannot find symbol [javac] symbol  : class ModuleStartupListener [javac] location: package com.caucho.quercus.module [javac]                                 ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:46: cannot find symbol [javac] symbol  : class IniDefinition [javac] location: package com.caucho.quercus.module [javac]                                 ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:47: package com.caucho.quercus.page does not exist [javac]                               ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:49: package com.caucho.quercus.function does not exist [javac]                                   ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:50: package com.caucho.quercus.resources does not exist [javac]                                    ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:90: cannot find symbol [javac] symbol: class Env [javac]                                ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:93: cannot find symbol [javac] symbol  : class Quercus [javac] location: class com.caucho.quercus.env.GoogleEnv [javac]   public GoogleEnv(Quercus quercus, [javac]                    ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:94: cannot find symbol [javac] symbol  : class QuercusPage [javac] location: class com.caucho.quercus.env.GoogleEnv [javac]                QuercusPage page, [javac]                ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/GoogleEnv.java:102: cannot find symbol [javac] symbol  : class Quercus [javac] location: class com.caucho.quercus.env.GoogleEnv [javac]   public GoogleEnv(Quercus quercus) [javac]                    ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/ResinSessionArrayValue.java:39: cannot find symbol [javac] symbol: class SessionArrayValue [javac] public class ResinSessionArrayValue extends SessionArrayValue [javac]                                             ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/ResinSessionArrayValue.java:51: cannot find symbol [javac] symbol  : class ArrayValue [javac] location: class com.caucho.quercus.env.ResinSessionArrayValue [javac]                             long maxInactiveInterval, ArrayValue array) [javac]                                                       ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/ResinSessionArrayValue.java:60: cannot find symbol [javac] symbol  : class Env [javac] location: class com.caucho.quercus.env.ResinSessionArrayValue [javac]   public Value copy(Env env, IdentityHashMap&amp;lt;Value,Value&amp;gt; map) [javac]                     ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/ResinSessionArrayValue.java:60: cannot find symbol [javac] symbol  : class Value [javac] location: class com.caucho.quercus.env.ResinSessionArrayValue [javac]   public Value copy(Env env, IdentityHashMap&amp;lt;Value,Value&amp;gt; map) [javac]                                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/ResinSessionArrayValue.java:60: cannot find symbol [javac] symbol  : class Value [javac] location: class com.caucho.quercus.env.ResinSessionArrayValue [javac]   public Value copy(Env env, IdentityHashMap&amp;lt;Value,Value&amp;gt; map) [javac]                                                    ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/env/ResinSessionArrayValue.java:60: cannot find symbol [javac] symbol  : class Value [javac] location: class com.caucho.quercus.env.ResinSessionArrayValue [javac]   public Value copy(Env env, IdentityHashMap&amp;lt;Value,Value&amp;gt; map) [javac]          ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:37: cannot find symbol [javac] symbol  : class QuercusModuleException [javac] location: package com.caucho.quercus [javac]                          ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:38: package com.caucho.quercus.annotation does not exist [javac]                                     ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:39: package com.caucho.quercus.annotation does not exist [javac]                                     ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:40: package com.caucho.quercus.annotation does not exist [javac]                                     ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:41: package com.caucho.quercus.annotation does not exist [javac]                                     ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:43: cannot find symbol [javac] symbol  : class AbstractQuercusModule [javac] location: package com.caucho.quercus.module [javac]                                 ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:64: cannot find symbol [javac] symbol: class AbstractQuercusModule [javac]   extends AbstractQuercusModule [javac]           ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:82: cannot find symbol [javac] symbol  : class SaveState [javac] location: class com.caucho.quercus.lib.ResinModule [javac]                                  ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:88: cannot find symbol [javac] symbol  : class Env [javac] location: class com.caucho.quercus.lib.ResinModule [javac]   public static Value resin_string_to_binary(Env env, String string, [javac]                                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:88: cannot find symbol [javac] symbol  : class Value [javac] location: class com.caucho.quercus.lib.ResinModule [javac]   public static Value resin_string_to_binary(Env env, String string, [javac]                 ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:141: cannot find symbol [javac] symbol  : class Env [javac] location: class com.caucho.quercus.lib.ResinModule [javac]   public static boolean xa_begin(Env env) [javac]                                  ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:158: cannot find symbol [javac] symbol  : class Env [javac] location: class com.caucho.quercus.lib.ResinModule [javac]   public static boolean xa_commit(Env env) [javac]                                   ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:175: cannot find symbol [javac] symbol  : class Env [javac] location: class com.caucho.quercus.lib.ResinModule [javac]   public static boolean xa_rollback(Env env) [javac]                                     ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:192: cannot find symbol [javac] symbol  : class Env [javac] location: class com.caucho.quercus.lib.ResinModule [javac]   public static boolean xa_rollback_only(Env env) [javac]                                          ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:209: cannot find symbol [javac] symbol  : class Env [javac] location: class com.caucho.quercus.lib.ResinModule [javac]   public static boolean xa_set_timeout(Env env, int timeoutSeconds) [javac]                                        ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:257: cannot find symbol [javac] symbol  : class ArrayValue [javac] location: class com.caucho.quercus.lib.ResinModule [javac]   public static ArrayValue mbean_explode(String name) [javac]                 ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:286: cannot find symbol [javac] symbol  : class ArrayValue [javac] location: class com.caucho.quercus.lib.ResinModule [javac]   public static String mbean_implode(@NotNull @ReadOnly ArrayValue exploded) [javac]                                                         ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:333: cannot find symbol [javac] symbol  : class Env [javac] location: class com.caucho.quercus.lib.ResinModule [javac]   public static Value resin_var_dump(Env env, @ReadOnly Value []args) [javac]                                      ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:333: cannot find symbol [javac] symbol  : class Value [javac] location: class com.caucho.quercus.lib.ResinModule [javac]   public static Value resin_var_dump(Env env, @ReadOnly Value []args) [javac]                                                         ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:333: cannot find symbol [javac] symbol  : class Value [javac] location: class com.caucho.quercus.lib.ResinModule [javac]   public static Value resin_var_dump(Env env, @ReadOnly Value []args) [javac]                 ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:360: cannot find symbol [javac] symbol  : class Env [javac] location: class com.caucho.quercus.lib.ResinModule [javac]   public static boolean resin_restore_state(Env env) [javac]                                             ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:379: cannot find symbol [javac] symbol  : class Env [javac] location: class com.caucho.quercus.lib.ResinModule [javac]   public static boolean resin_save_state(Env env) [javac]                                          ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/ResinModule.java:398: cannot find symbol [javac] symbol  : class Env [javac] location: class com.caucho.quercus.lib.ResinModule [javac]   public static boolean resin_clear_state(Env env) [javac]                                           ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamClientResource.java:33: cannot find symbol [javac] symbol  : class EnvCleanup [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamClientResource.java:43: cannot find symbol [javac] symbol: class EnvCleanup [javac]   implements EnvCleanup [javac]              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamConnectionResource.java:33: cannot find symbol [javac] symbol  : class EnvCleanup [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamConnectionResource.java:43: cannot find symbol [javac] symbol: class EnvCleanup [javac]   implements EnvCleanup [javac]              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:44: cannot find symbol [javac] symbol  : class QuercusModuleException [javac] location: package com.caucho.quercus [javac]                          ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:45: package com.caucho.quercus.annotation does not exist [javac]                                     ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:46: package com.caucho.quercus.annotation does not exist [javac]                                     ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:47: cannot find symbol [javac] symbol  : class Env [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:48: cannot find symbol [javac] symbol  : class IniDefinitions [javac] location: package com.caucho.quercus.module [javac]                                 ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:49: cannot find symbol [javac] symbol  : class BooleanValue [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:50: cannot find symbol [javac] symbol  : class JavaValue [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:51: cannot find symbol [javac] symbol  : class LongValue [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:52: cannot find symbol [javac] symbol  : class NullValue [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:53: cannot find symbol [javac] symbol  : class ConstStringValue [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:54: cannot find symbol [javac] symbol  : class StringBuilderValue [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:55: cannot find symbol [javac] symbol  : class StringValue [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:56: cannot find symbol [javac] symbol  : class Value [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:57: cannot find symbol [javac] symbol  : class IniDefinition [javac] location: package com.caucho.quercus.module [javac]                                 ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:58: cannot find symbol [javac] symbol  : class AbstractQuercusModule [javac] location: package com.caucho.quercus.module [javac]                                 ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:59: package com.caucho.quercus.function does not exist [javac]                                   ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:73: cannot find symbol [javac] symbol: class AbstractQuercusModule [javac] public class BamModule extends AbstractQuercusModule [javac]                                ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:72: cannot find symbol [javac] symbol: class ClassImplementation [javac] @ClassImplementation [javac]  ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:79: cannot find symbol [javac] symbol  : class StringValue [javac] location: class com.caucho.quercus.lib.bam.BamModule [javac]   private static final StringValue PHP_SELF [javac]                        ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:82: cannot find symbol [javac] symbol  : class StringValue [javac] location: class com.caucho.quercus.lib.bam.BamModule [javac]   private static final StringValue SERVER_NAME [javac]                        ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamModule.java:85: cannot find symbol [javac] symbol  : class Env [javac] location: class com.caucho.quercus.lib.bam.BamModule [javac]   private static BamPhpActor getActor(Env env) [javac]                                       ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamPhpActor.java:43: cannot find symbol [javac] symbol  : class Quercus [javac] location: package com.caucho.quercus [javac]                          ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamPhpActor.java:44: cannot find symbol [javac] symbol  : class Env [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamPhpActor.java:45: cannot find symbol [javac] symbol  : class JavaValue [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamPhpActor.java:46: cannot find symbol [javac] symbol  : class LongValue [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] /Users/jeff/Documents/workspace/Resin/modules/resin/src/com/caucho/quercus/lib/bam/BamPhpActor.java:47: cannot find symbol [javac] symbol  : class NullValue [javac] location: package com.caucho.quercus.env [javac]                              ^ [javac] Note: Some input files use or override a deprecated API. [javac] Note: Recompile with -Xlint:deprecation for details. [javac] Note: Some input files use unchecked or unsafe operations. [javac] Note: Recompile with -Xlint:unchecked for details. [javac] 100 errors BUILD FAILED</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Trunk broken?</header>
    <date>Fri May 08 02:47:12 CEST 2009</date>
    <body>Do you need php compiled into your server? http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] FW: resin-interest Digest, Vol 35, Issue 9</header>
    <date>Thu May 07 19:08:40 CEST 2009</date>
    <body>http://caucho.com/download The resin-4.0-admin.pdf link on that page is broken. -T</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] FW: resin-interest Digest, Vol 35, Issue 9</header>
    <date>Thu May 07 19:38:51 CEST 2009</date>
    <body>http://caucho.com/download Thanks.  It's been fixed. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0.0 release</header>
    <date>Thu May 07 18:03:20 CEST 2009</date>
    <body>We've just released Resin 4.0.0 for download at http://caucho.com/download . Resin 4.0 has a large number of internal changes and enhancements over 3.1, and it is the development branch.  If you need a stable version of Resin, you should continue to use Resin 3.1.  The expected date for a stable version of Resin 4.0 is tied to the JavaEE spec dates for JavaEE 6, so it's a moving target. Major Features in Resin 4.0.0: o Resin 10,000 - 10,000 simultaneous connections o Project Jar Repository - uses Maven pom.xml dependencies to build classloaders - replaces complex OSGi bundles with simple .jar management o CanDI - Java Contexts and Dependency Injection (JSR-299) - resin.xml/web.xml config fully integrated with CanDI - Rewrite/Dispatch redesign using CanDI - Security redesign using CanDI - JMS Queue/Topic redesign using CanDI o Protocol enhancements - FastCGI port and proxy - HTTP proxy o Cloud Computing redesign - Dynamic servers - Distributed deployment with .git repository and BAM/HMTP * eclipse, ant, maven and /resin-admin deployment - Clustered session refactor with BAM/HMTP for dynamic servers - Clustered Cache (JCache) - Load Balance refactor for dynamic servers - Load Balance green connections - Remote JMX refactored to use BAM/HMTP - Watchdog refactored to use BAM/HMTP - BAM/HMTP rename and refactor o Quercus - performance and compatibility work - Google App Engine support</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.0 release</header>
    <date>Thu May 07 21:11:09 CEST 2009</date>
    <body>I just noticed that the status for JSR313 is now listed as "Withdrawn". What implication does that have on a stable release of 4.0? Bill http://caucho.com/download http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.0 release</header>
    <date>Thu May 07 21:17:09 CEST 2009</date>
    <body>I just found another JSR, JSR316, for Java EE 6: http://jcp.org/en/jsr/detail?id=316 I guess I was looking at the wrong JSR before. Bill http://caucho.com/download http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.0 release</header>
    <date>Thu May 07 21:27:12 CEST 2009</date>
    <body>I just noticed that the status for JSR313 is now listed as "Withdrawn".  What implication does that have on a stable release of 4.0? It looks like it's just replaced by 316. -- Scott Bill We've just released Resin 4.0.0 for download at http://caucho.com/download . Resin 4.0 has a large number of internal changes and enhancements over 3.1, and it is the development branch.  If you need a stable version of Resin, you should continue to use Resin 3.1.  The expected date for a stable version of Resin 4.0 is tied to the JavaEE spec dates for JavaEE 6, so it's a moving target. Major Features in Resin 4.0.0: o Resin 10,000 - 10,000 simultaneous connections o Project Jar Repository - uses Maven pom.xml dependencies to build classloaders - replaces complex OSGi bundles with simple .jar management o CanDI - Java Contexts and Dependency Injection (JSR-299) - resin.xml/web.xml config fully integrated with CanDI - Rewrite/Dispatch redesign using CanDI - Security redesign using CanDI - JMS Queue/Topic redesign using CanDI o Protocol enhancements - FastCGI port and proxy - HTTP proxy o Cloud Computing redesign - Dynamic servers - Distributed deployment with .git repository and BAM/HMTP * eclipse, ant, maven and /resin-admin deployment - Clustered session refactor with BAM/HMTP for dynamic servers - Clustered Cache (JCache) - Load Balance refactor for dynamic servers - Load Balance green connections - Remote JMX refactored to use BAM/HMTP - Watchdog refactored to use BAM/HMTP - BAM/HMTP rename and refactor o Quercus - performance and compatibility work - Google App Engine support</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.0 release</header>
    <date>Fri May 08 06:57:38 CEST 2009</date>
    <body>Hi Scott, http://caucho.com/download great to see it released. :-) I have a small problem with the maven-plugin, though, starting resin: ---8&amp;lt;--- 08.05.2009 06:52:54 com.caucho.server.webapp.WebApp setConfigException WARNUNG: WEB-INF/resin-web.xml:5: com.caucho.sql.DBPool.init(): javax.naming.NameNotFoundException: java:comp/env 3:   &amp;lt;system-property 4: ---8&amp;lt;--- This works with 3.1.8 - what do I need to do to get it working again? Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4.0.0 release</header>
    <date>Fri May 08 23:26:33 CEST 2009</date>
    <body>http://caucho.com/download Hi Jan, I've filed this here: http://bugs.caucho.com/view.php?id=3488 Not sure what the issue might be yet... the maven plugin just runs a simple embedded Resin.  I've confirmed that the same config works in the normal Resin environment so it must be something either with the plugin or the embedded code. Thanks, Emil</body>
  </mail>
  <mail>
    <header>[Resin-interest] watchdog stop authentication failure</header>
    <date>Wed May 06 22:38:59 CEST 2009</date>
    <body>Hi, Does anybody knows what can cause this error? ----------------------- [2009/05/06 16:18:16.552] watchdog stop authentication failure [2009/05/06 16:18:16.552] com.caucho.config.ConfigException: watchdog stop forbidden - authentication failed [2009/05/06 16:18:16.552]     at com.caucho.boot.WatchdogServlet.stop(WatchdogServlet.java:92) [2009/05/06 16:18:16.552]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [2009/05/06 16:18:16.552]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [2009/05/06 16:18:16.552]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [2009/05/06 16:18:16.552]     at java.lang.reflect.Method.invoke(Method.java:597) [2009/05/06 16:18:16.552]     at com.caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java:180) [2009/05/06 16:18:16.552]     at com.caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java:109) [2009/05/06 16:18:16.552]     at com.caucho.hessian.server.HessianServlet.service(HessianServlet.java:396) [2009/05/06 16:18:16.552]     at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:103) [2009/05/06 16:18:16.552]     at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:187) [2009/05/06 16:18:16.552]     at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:266) [2009/05/06 16:18:16.552]     at com.caucho.server.hmux.HmuxRequest.handleRequest(HmuxRequest.java:435) [2009/05/06 16:18:16.552]     at com.caucho.server.port.TcpConnection.run(TcpConnection.java:678) [2009/05/06 16:18:16.552]     at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:721) [2009/05/06 16:18:16.552]     at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:643) [2009/05/06 16:18:16.552]     at java.lang.Thread.run(Thread.java:619) ----------------------- I'm running Resin-Pro 3.1.6. No lucky researching about that in google. Thanks, Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] watchdog stop authentication failure</header>
    <date>Wed May 06 22:48:02 CEST 2009</date>
    <body>As far as I remember, I have experienced this once when changing the resin.conf and modifying (or adding) a &amp;lt;user/&amp;gt; to &amp;lt;management/&amp;gt; while Resin was started.... ... The change in resin.conf caused Resin to restart but trying to stop it was unsuccessful - similar to your exception. You could try to kill the watchdog and resin processes and start both again afterwards - then 'stop' should be working again. Best Regards, Steffen http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] watchdog stop authentication failure</header>
    <date>Wed May 06 22:59:05 CEST 2009</date>
    <body>Hi Steffen, Thank you very much, I think it's my case, too. After changing resin.conf I executed a restart. It probably doesn't. Thank you, Ronan Steffen Busch escreveu: As far as I remember, I have experienced this once when changing the resin.conf and modifying (or adding) a &amp;lt;user/&amp;gt; to &amp;lt;management/&amp;gt; while Resin was started. ... ... The change in resin.conf caused Resin to restart but trying to stop it was unsuccessful - similar to your exception. You could try to kill the watchdog and resin processes and start both again afterwards - then 'stop' should be working again. Best Regards, Steffen mailto:lis...@tiper.com.br Hi, Does anybody knows what can cause this error? ----------------------- [2009/05/06 16:18:16.552] watchdog stop authentication failure [2009/05/06 16:18:16.552] com.caucho.config.ConfigException: watchdog stop forbidden - authentication failed [2009/05/06 16:18:16.552]     at com.caucho.boot.WatchdogServlet.stop(WatchdogServlet.java:92) [2009/05/06 16:18:16.552]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [2009/05/06 16:18:16.552]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [2009/05/06 16:18:16.552]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [2009/05/06 16:18:16.552]     at java.lang.reflect.Method.invoke(Method.java:597) [2009/05/06 16:18:16.552]     at com.caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java:180) [2009/05/06 16:18:16.552]     at com.caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java:109) [2009/05/06 16:18:16.552]     at com.caucho.hessian.server.HessianServlet.service(HessianServlet.java:396) [2009/05/06 16:18:16.552]     at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:103) [2009/05/06 16:18:16.552]     at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:187) [2009/05/06 16:18:16.552]     at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:266) [2009/05/06 16:18:16.552]     at com.caucho.server.hmux.HmuxRequest.handleRequest(HmuxRequest.java:435) [2009/05/06 16:18:16.552]     at com.caucho.server.port.TcpConnection.run(TcpConnection.java:678) [2009/05/06 16:18:16.552]     at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:721) [2009/05/06 16:18:16.552]     at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:643) [2009/05/06 16:18:16.552]     at java.lang.Thread.run(Thread.java:619) ----------------------- I'm running Resin-Pro 3.1.6. No lucky researching about that in google. Thanks, Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] watchdog stop authentication failure</header>
    <date>Wed May 06 23:25:09 CEST 2009</date>
    <body>As far as I remember, I have experienced this once when changing the while Resin was started. ... ... The change in resin.conf caused Resin to restart but trying to stop it was unsuccessful - similar to your exception. You could try to kill the watchdog and resin processes and start both again afterwards - then 'stop' should be working again. Yes, that would cause the exception. For security reasons, the command line (resin.jar) authenticates with the watchdog based on the management users and passwords.   If you change the users, that authentication will fail. -- Scott Best Regards, Steffen Hi, Does anybody knows what can cause this error? ----------------------- [2009/05/06 16:18:16.552] watchdog stop authentication failure [2009/05/06 16:18:16.552] com.caucho.config.ConfigException: watchdog stop forbidden - authentication failed [2009/05/06 16:18:16.552]     at com.caucho.boot.WatchdogServlet.stop(WatchdogServlet.java:92) [2009/05/06 16:18:16.552]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [2009/05/06 16:18:16.552]     at sun .reflect .NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [2009/05/06 16:18:16.552]     at sun .reflect .DelegatingMethodAccessorImpl .invoke(DelegatingMethodAccessorImpl.java:25) [2009/05/06 16:18:16.552]     at java.lang.reflect.Method.invoke(Method.java:597) [2009/05/06 16:18:16.552]     at com .caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java: 180) [2009/05/06 16:18:16.552]     at com .caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java: 109) [2009/05/06 16:18:16.552]     at com.caucho.hessian.server.HessianServlet.service(HessianServlet.java: 396) [2009/05/06 16:18:16.552]     at com .caucho .server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java: 103) [2009/05/06 16:18:16.552]     at com .caucho .server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:187) [2009/05/06 16:18:16.552]     at com .caucho .server.dispatch.ServletInvocation.service(ServletInvocation.java:266) [2009/05/06 16:18:16.552]     at com.caucho.server.hmux.HmuxRequest.handleRequest(HmuxRequest.java:435) [2009/05/06 16:18:16.552]     at com.caucho.server.port.TcpConnection.run(TcpConnection.java:678) [2009/05/06 16:18:16.552]     at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:721) [2009/05/06 16:18:16.552]     at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:643) [2009/05/06 16:18:16.552]     at java.lang.Thread.run(Thread.java:619) ----------------------- I'm running Resin-Pro 3.1.6. No lucky researching about that in google. Thanks, Ronan</body>
  </mail>
  <mail>
    <header>[Resin-interest] JavaMail Session Injection</header>
    <date>Wed May 06 21:30:41 CEST 2009</date>
    <body>I'd like to inject a Session into a few of my beans. I believe the correct way to do this is to use the @Resource(name="java:comp/env/mail") annotation, but I would like to be less verbose (if possible), and just use @Current, so I have done the following: @ApplicationScoped @Resource(name="java:comp/env/jdbc/subetha") @Resource(name="java:comp/env/mail") @Produces //@Name("subetha") @Produces @Name("subetha") But this produces a stack overflow with reference to the sess field injection. It seems like it is actually getting this producer factory from the inject manager and trying to use its own "createMailSession" method (recursively) to do the injection.This seems very bad :(  , or have i misunderstood how this is supposed to work? Thanks in advance, Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] InjectManager not binding generified class?</header>
    <date>Wed May 06 11:23:26 CEST 2009</date>
    <body>The inject manager isn't adding this class to the registered beans. I have seen a few issues with Generic classes with matching classes but this ones seems pretty straight forward. Does anything anyone know why this isn't picked up and registered in the inject manager? @New @SuppressWarnings("unchecked") I'm still working against trunk :)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] InjectManager not binding generified class?</header>
    <date>Wed May 06 19:40:44 CEST 2009</date>
    <body>I'm not sure that @New is supposed to be allowed on the class itself, but that part of the spec has been changing a bit. But the main issue is that generic classes are not "simple beans", because the generic type is part of the Java Injection matching algorithm.  In other words, you can register a Foo&amp;lt;String&amp;gt; (using a producer method), but not a Foo&amp;lt;X&amp;gt;, because that's not a complete type. In other words, if you want to register a parameterized class, you currently need to have a @Produces factory for the class. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] About editing resin.conf</header>
    <date>Wed May 06 08:58:37 CEST 2009</date>
    <body>Hi all, I just subscribed to this list. Please, could you gimme advice for this problem - I believe this has been on the wall many times  in the history, but still... Resin seems to crash if I open resin.conf for editing with vi etc. Why? How can I configure resin not to do that? I have 5 resin servers and resin.conf is symlinked to nfs on all servers so if I just open resin.conf, all servers will crash... There must be some parameters to prevent this kind of feature... Thanks, Harry</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] About editing resin.conf</header>
    <date>Wed May 06 12:50:35 CEST 2009</date>
    <body>H.Päiväniemi schrieb: Access over NFS may be the issue here. Try reading the file over NFS from one of your Resin servers while you're editing it in VI, or any other editor, for that matter. Does that work? You could make your edits on a copy of the resin.conf. Saving the file in an invalid state might also be problematic. Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] About editing resin.conf</header>
    <date>Wed May 06 13:04:36 CEST 2009</date>
    <body>Thanks, but it's not due to nfs. I can read (more,cat etc) nfs-symlinked files from all servers when one has it opened by vi. It seems that resin is somehow "auto-deploy-minded" so it checks periodically (quite often) resin.conf and if it notices it has changed or it is open, it crashes... Strange... -hjp http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] About editing resin.conf</header>
    <date>Wed May 06 13:15:38 CEST 2009</date>
    <body>I would recommend to enable 'fine' or 'finest' logging in order to see what might cause Resin to 'crash' or cause the observed behaviour. Usually, there are pretty good messages in case of start/stop/restart activities due to different reasons. mailto:resin-interest-boun...@caucho.com ] Im Auftrag von H.Päiväniemi http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] About editing resin.conf</header>
    <date>Wed May 06 18:32:28 CEST 2009</date>
    <body>Can you describe how Resin "crashes"? When using NFS, you should disable dependency checking on files.  Set Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] About editing resin.conf</header>
    <date>Wed May 06 18:45:31 CEST 2009</date>
    <body>To followup, when you modify the resin.conf, Resin should restart. That's normal behavior. -- Scott mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Stack overflow on resin-web.xml load</header>
    <date>Tue May 05 20:09:43 CEST 2009</date>
    <body>I'm a little stumped on this one. I'm guessing that there is some kind of circular dep. in the classes (EJBs), but where is the question... 'c:\src\caucho\resin\webapps\subetha\WEB-INF\resin-web.xml' log4j:WARN No appenders could be found for logger (org.subethamail.core.smtp.SMTPService). log4j:WARN Please initialize the log4j system properly. file:/c:/src/caucho/resin/conf/app-default.xml:240: com.caucho.config.core.ResinImport.init(): java.lang.StackOverflowError com.caucho.config.ConfigContext.error(ConfigContext.java:1309) com.caucho.config.ConfigContext.configureChildNode(ConfigContext.java:496) com.caucho.config.ConfigContext.configureAttribute(ConfigContext.java:364) com.caucho.config.program.NodeBuilderChildProgram.inject(NodeBuilderChildProgram.java:71) com.caucho.config.program.ContainerProgram.inject(ContainerProgram.java:80) com.caucho.config.program.ConfigProgram.configure(ConfigProgram.java:70) com.caucho.server.deploy.EnvironmentDeployController.configureInstance(EnvironmentDeployController.java:381) com.caucho.server.deploy.EnvironmentDeployController.configureInstance(EnvironmentDeployController.java:55) com.caucho.server.deploy.DeployController.startImpl(DeployController.java:676) com.caucho.server.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:72) com.caucho.server.deploy.DeployController.startOnInit(DeployController.java:549) com.caucho.server.deploy.DeployContainer.start(DeployContainer.java:160) com.caucho.server.webapp.WebAppContainer.startImpl(WebAppContainer.java:707) com.caucho.server.host.Host.startImpl(Host.java:496) com.caucho.server.webapp.WebAppContainer.start(WebAppContainer.java:687) com.caucho.server.deploy.DeployController.startImpl(DeployController.java:678) com.caucho.server.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:72) com.caucho.server.deploy.DeployController.startOnInit(DeployController.java:549) com.caucho.server.deploy.DeployContainer.start(DeployContainer.java:160) com.caucho.server.host.HostContainer.start(HostContainer.java:484) com.caucho.server.cluster.Server.start(Server.java:1822) com.caucho.server.resin.Resin.createServer(Resin.java:927) com.caucho.server.resin.Resin.start(Resin.java:998) com.caucho.server.resin.Resin.initMain(Resin.java:1462) ... Here is the resin-web.xml ( http://subetha.googlecode.com/svn/branches/resin/web/WEB-INF/resin-web.xml ) http://caucho.com/ns/resin" xmlns:resin="urn:java:com.caucho.resin" xmlns:cfg="urn:java:com.caucho.config" xmlns:jms="urn:java:com.caucho.jms" xmlns:ejb="urn:java:com.caucho.ejb" xmlns:adm="urn:java:org.subethamail.core.admin" xmlns:util="urn:java:org.subethamail.core.util" xmlns:ss="urn:java:org.subethamail.web.security" xmlns:queue="urn:java:org.subethamail.core.queue" to find multiple matches. Seems to work just letting the class be mbean-name="subetha:name=Cleanup" type="org.subethamail.core.admin.CleanupBean" mbean-interface="org.subethamail.core.admin.CleanupManagement" mbean-name="subetha:name=SMTPService" type="org.subethamail.core.smtp.SMTPService" ...</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Stack overflow on resin-web.xml load</header>
    <date>Wed May 06 17:50:25 CEST 2009</date>
    <body>I've added a bug report at http://bugs.caucho.com/view.php?id=3480 The circular dependency problem can be a bit tricky internally, particularly in combination with EL expressions.  The CanDI spec does have some support for circular dependencies, but there's a bit of extra work that Resin needs to do to make it work. -- Scott http://subetha.googlecode.com/svn/branches/resin/web/WEB-INF/resin-web.xml http://caucho.com/ns/resin" http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Stack overflow on resin-web.xml load</header>
    <date>Wed May 06 20:04:48 CEST 2009</date>
    <body>Fair enough. Is there any way of debugging this, or detecting which injections are the cause of the problem(s)? It is fairly hard to get a debugger into the situation as these are such common operations in th injection system and I don't know  which classes (injection cases) are the cause. http://bugs.caucho.com/view.php?id=3480</body>
  </mail>
  <mail>
    <header>[Resin-interest] ResinDeploy Ant Task Error</header>
    <date>Tue May 05 09:15:35 CEST 2009</date>
    <body>So, I'm trying to get the ant task deployed using the new fangled stuff; It seems to fail horribly :( Here is some of the (pertinent) output from the ant task: resin-deploy: BUILD FAILED com.caucho.bam.RemoteConnectionFailedException: Failed to upgrade to HMTP X at com.caucho.bam.hmtp.HmtpClient.connectImpl(HmtpClient.java:230) at com.caucho.bam.hmtp.HmtpClient.connect(HmtpClient.java:161) at com.caucho.server.admin.DeployClient.&amp;lt;init&amp;gt;(DeployClient.java:78) at com.caucho.ant.ResinDeploy.execute(ResinDeploy.java:145) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) Here is what I am doing in my build file: This is what is going on in the output of resin (not very interesting): starting connection TcpConnection[id=hmux-127.0.0.1:6800-3,null,ACCEPT], total=5 Any help would be appreciated :) Thanks in advance, Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ResinDeploy Ant Task Error</header>
    <date>Tue May 05 09:31:34 CEST 2009</date>
    <body>So, I played around a bit and changed the port to 8080, instead of 6800 and now get a different error. BUILD FAILED com.caucho.bam.ServiceUnavailableException: ActorError[type=cancel,group=service-unavailable,text='dep...@resin.caucho' is an unknown actor for queryGet] at com.caucho.bam.ActorError.createException(ActorError.java:376) at com.caucho.bam.SimpleActorClient.queryGet(SimpleActorClient.java:156) at com.caucho.server.admin.DeployClient.queryGet(DeployClient.java:393) at com.caucho.server.admin.DeployClient.getCommitList(DeployClient.java:331) at com.caucho.server.admin.DeployClient.deployJar(DeployClient.java:286) at com.caucho.server.admin.DeployClient.deployJarContents(DeployClient.java:108) at com.caucho.ant.ResinDeploy.execute(ResinDeploy.java:147) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) Resin output: ServerFromLinkStream[null] querySet AuthQuery[subetha,EncryptedObject] HempDomainService[aaa.app-tier.admin.resin] onChildStart(sube...@aaa.app-tier.admin.resin/AAAASEPpKI/) ServerToLinkStream[null] queryResult serverfromlinkstream[hempconnectionimpl[sube...@aaa.app-tier.admin.resin/AAAASEPpKI/]] ServerToLinkStream[null] queryError ActorError[type=cancel,group=service-unavailable,text='dep...@resin.caucho' to:sube...@aaa.app-tier.admin.resin/AAAASEPpKI/, Note: The admin user is subetha, not "admin" if the output above seems a bit off ... On Tue, May 5, 2009 at 12:14 AM, Scott Hernandez</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ResinDeploy Ant Task Error</header>
    <date>Tue May 05 17:52:15 CEST 2009</date>
    <body>Switching to 8080 is right - HMTP operates on the HTTP port.  For the error below, can you send your resin.xml?  It looks like you didn't configure the deploy service somehow.  Depending on which snapshot you got, it's also possible that CanDI didn't configure/start the deploy service even if you configured it.  In the newest versions, those problems have been fixed. Emil http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ResinDeploy Ant Task Error</header>
    <date>Tue May 05 18:45:31 CEST 2009</date>
    <body>I'm working against trunk :) I added the following to the conf/resin.xml (copied from resin.xml.in) file. (as described here: http://blog.caucho.com/?p=134 ) InjectManager[cluster:??] BeanStartupEvent[SimpleBean[RemoteAdminService, at http://admin.resin/hmtp root-directory=/c:/src/caucho/resin/ resin.rar Description: Binary data</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ResinDeploy Ant Task Error</header>
    <date>Tue May 05 21:24:47 CEST 2009</date>
    <body>That should do it.  We did have the deploy service only in pro previously, but moved it to OS.  It's possible that something got omitted.  I've been using the deploy service with Pro, so I'll need to check if that's the issue.  I've filed this here: http://bugs.caucho.com/view.php?id=3477 Emil http://blog.caucho.com/?p=134 ) http://admin.resin/hmtp http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>[Resin-interest] Limiting session to a single IP for a given	session_id</header>
    <date>Mon May 04 09:01:22 CEST 2009</date>
    <body>Is there a way to force session to invalidate or not to be recognized if the client IP changes?  This is a PCI requirement so that if a third obtains a valid session ID they cannot use it to re-establish the original session with the server. Based on tests I have run using resin 3.1.8, the default configuration is seems that the session is maintained whenever the JSESSIONID cookie contains a valid session id. In particular, I established a session with the resin3.1 server, then changed my client IP, then reconnected to the server and all session information was maintained. Thanks in advance. Rafa.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Limiting session to a single IP for a	given	session_id</header>
    <date>Mon May 04 16:40:11 CEST 2009</date>
    <body>If Resin does not implement it itself, implementing a filter that stores the IP in the session and checks on each request before passing the request along should not be difficult. I don't know if Resin already provides such a feature. S! D. S'està citant Rafael Escolar | Bookassist &amp;lt;rafael.esco...@bookassist.com&amp;gt;: ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Limiting session to a single IP for a	given	session_id</header>
    <date>Wed May 06 18:11:25 CEST 2009</date>
    <body>Resin doesn't currently have that feature, so you'd need to use a filter.  There used to be ISPs that changed client IPs randomly as part of their normal operation.  AOL was the biggest.  If that behavior has changed so basically everyone uses a single client IP, we can make it an option. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Limiting session to a single IP for a given	session_id</header>
    <date>Wed May 06 20:11:50 CEST 2009</date>
    <body>According to the security researchers who took over the torpig botnet and analyzed the data (read the PDF, it's good), some ISPs still change IP addresses a lot... more than once an hour: http://www.cs.ucsb.edu/~seclab/projects/torpig/ Jeff http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] CipherSuites for Jsse in resin 3.1.6</header>
    <date>Sat May 02 01:35:35 CEST 2009</date>
    <body>Howdy, Please refer to: http://bugs.caucho.com/view.php?id=3431 (which is a reopen of) http://bugs.caucho.com/view.php?id=2360 We're using Resin Pro 3.1.6 and trying to limit the cipher suites for JSSE. I couldn't find the documentation, but through trial and error was able to discover that http stanza allows this syntax for setting ciphers... But running THCSSLCheck didn't show any change to the ciphers. I dove down in to com.caucho.vfs.JsseSSLFactory and had to make the following changes... 1) in the public QServerSocket create(InetAddress host, int port) method, there is a check for _cipherSuites != null. That if stmt includes the following line: While this appears to do what I need, it doesn't appear to really affect anything. I'm not sure where the new SSLEngine is used. The SSLServerSocketFactory is established in the same if block, but nothing new is set there. 2) there is some commented code below that method that looks like it was setting protocols - pretty close to ciphers. I added the following just before the return stmt: And now I see a difference with THCSSLCheck. Scott, I haven't looked any further than JsseSSLFactory and Port, so I don't know if this was supposed to be handled somewhere else. And I'm not sure if this is still an issue with 3.1.9, or the 3.2/4 code. I think we're in the minority running JSSE, but it works well enough for us. We upgraded to 3.1.6 because this was reported as fixed on this version, but obviously this isn't. Maybe there might be confusion with the https.cipherSuites system property/java-args usage versus the socket cipher suites - which would be my bad for not asking for the right thing. If I understand the https.cipherSuites properly (now), that is when you run as a client versus the server. To set server ciphers you need to interact with the API directly - like the SSLServerSocketFactory does. This may be why 3431 was opened. Is this a reasonable fix if we were to run 3.1.6mine? Has this been fixed in newer revisions? Are there others running JSSE with an interest in limiting the cipher suites and possibly the protocols? + jay</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CipherSuites for Jsse in resin 3.1.6</header>
    <date>Wed May 06 18:39:30 CEST 2009</date>
    <body>http://bugs.caucho.com/view.php?id=3431 (which is a reopen of) http://bugs.caucho.com/view.php?id=2360 I've added this information as a note to 3431.  Now that we've released 4.0.0, we can start clearing out the old, stalled bug reports. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CipherSuites for Jsse in resin 3.1.6</header>
    <date>Tue May 19 18:09:25 CEST 2009</date>
    <body>Thanks for adding the notes to issue 3431. I was hoping that Scott and Emil could chime in where I think the changes need to happen. We're wanting to implement 3.1.6 (up to 3.1.9) in our production environments, and this change is key to that development. If this is a logical place to start, we may implement 3.1.6x until 3.1.10 is available. ;) Have you guys had a chance to take a quick look, yet? + jay http://bugs.caucho.com/view.php?id=3431 (which is a reopen of) http://bugs.caucho.com/view.php?id=2360 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CipherSuites for Jsse in resin 3.1.6</header>
    <date>Fri Jul 24 21:41:38 CEST 2009</date>
    <body>http://bugs.caucho.com/view.php?id=3431 (which is a reopen of) http://bugs.caucho.com/view.php?id=2360 Are there any plans to address this in 3.1.x ? Thanks, Dan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CipherSuites for Jsse in resin 3.1.6</header>
    <date>Fri Jul 24 21:53:43 CEST 2009</date>
    <body>I second that. It would be really great if this and some other bugs reported against Resin 3.1.x could be addressed after the next 4.0.1 release. Many companies must run a stable and feature-complete application server in their mission critical environments and therefore can not get into the pleasurable situation to run on Resin 4.0.x with definitely nice new features and desired bug fixes :-( Best regards, Steffen http://bugs.caucho.com/view.php?id=3431 (which is a reopen of) http://bugs.caucho.com/view.php?id=2360 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CipherSuites for Jsse in resin 3.1.6</header>
    <date>Sat Jul 25 00:08:13 CEST 2009</date>
    <body>I second that. It would be really great if this and some other bugs reported against Resin 3.1.x could be addressed after the next 4.0.1 release. Many companies must run a stable and feature-complete application server in their mission critical environments and therefore can not get into the pleasurable situation to run on Resin 4.0.x with definitely nice new features and desired bug fixes :-( We're planning the 4.0.2 release cycle to be mostly about bug fixes (unless JavaEE-6 does something crazy with the spec drafts.)  So we should get through most of the older bugs (including patches for 3.1.x) -- Scott Best regards, Steffen http://bugs.caucho.com/view.php?id=3431 (which is a reopen of) http://bugs.caucho.com/view.php?id=2360 I've added this information as a note to 3431.  Now that we've released 4.0.0, we can start clearing out the old, stalled bug reports. -- Scott Are there any plans to address this in 3.1.x ? Thanks, Dan</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.1.8 --- JspParseException</header>
    <date>Thu Apr 30 10:25:52 CEST 2009</date>
    <body>Dear all, Our system uses resin 3.1.8. I have a proble that is not displayed the JSP at the first time access. But, I can see this JSP at the second time. At the first time access, I found the error message as below. com.caucho.jsp.JspParseException: illegal utf8 encoding at 0x3a And, in case of LANG=en_US.UTF-8, I can see the JSP at the first time. (  I have to use LANG=ja_JP.UTF-8. ) What parameter or option set  for solving this issue  ? Thanks, Ogu</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1.8 --- JspParseException</header>
    <date>Fri May 08 15:07:50 CEST 2009</date>
    <body>Dear all, I have not solved this issue. In case of windows, this issue may be solved like below. http://bugs.caucho.com/view.php?id=2967 But, in case of Linux, I have not solved. Do you have an idea for solving this issue ? mailto:resin-interest-boun...@caucho.com ] On Behalf Of Ogu http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1.8 --- JspParseException</header>
    <date>Fri Oct 02 07:07:38 CEST 2009</date>
    <body>Hi. I use resin-3.0.x at linux box and use encoding ja_JP.UTF-8. I solve this problem. edit  $RESIN_HOME/bin/http.sh LANG=ja_JP.UTF-8 LC_ALL=$LANG export LANG LC_ALL ....  set $JAVA_HOME and $RESIN_HOME args="-J-server -Xmx256M -Dfile.encoding=UTF-8 ...... "</body>
  </mail>
  <mail>
    <header>[Resin-interest] (Cluster)SingleSignon bug?</header>
    <date>Wed Apr 29 19:16:02 CEST 2009</date>
    <body>Hi all, The default logon authenticators create an instance of ClusterSingleSignon for use but this causes a problem as every time something is put in cache it is null (the update count is zero on the update query at MnodeStore.java:539). This seems to invalidate "sessions" as every time you come back to get your Principal it is empty. I was able to explicitly change to using the MemorySingleSignon and that fixed the problem (no mnode cache/db/table write problems), but this might be a bug somewhere. Also, where would I configure which single signon instance is used in the configuration for my webapp? Let me know if you need any more info, Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] ClusterSingleSignon typo</header>
    <date>Wed Apr 29 19:01:59 CEST 2009</date>
    <body>I found a typo in ClusterSingleSignon in the log instantiation (it uses another class to construct the log; see below). ... private final static Logger log Is there a place I should send these, other than the list?</body>
  </mail>
  <mail>
    <header>[Resin-interest] Re sin 3.2.1 web-app versioning doesn't work with ROOT war file</header>
    <date>Wed Apr 29 19:01:00 CEST 2009</date>
    <body>I've turned on web-app versioning using: Its working great for non-ROOT named war files and will deploy and direct new user sessions to the newest version of the web-app, without having to restart Resin. For the ROOT web-app, however, I have to restart Resin in order for it to recognize the latest version i.e. If I copy an updated war into webapps like ROOT-1.2.2.war, it will deploy the war file but new user sessions are still directed to the old version. Is this functionality restricted to only non-ROOT web-apps or is this a bug? Sib -- View this message in context: http://www.nabble.com/Resin-3.2.1-web-app-versioning-doesn%27t-work-with-ROOT-war-file-tp23296143p23296143.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] EC2 prebuilt resin instance?</header>
    <date>Tue Apr 28 18:10:35 CEST 2009</date>
    <body>Anyone throw one of these together yet?  I think it would be a great starting point for people.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] EC2 prebuilt resin instance?</header>
    <date>Tue Apr 28 18:18:36 CEST 2009</date>
    <body>Yup, ami-906087f9.  It's 3.1.8 on Hardy.  If other people find this helpful, we can create more and keep them updated.  I'm not sure yet if EC2 users prefer building their own or starting from an AMI.  The advantage of building your own is that you can preload the applications and other packages that you need.  With a prebuilt AMI, you have to upload what you need and/or use a userdata boot script every time you start a new instance. For those that haven't seen it, here's my blog post on building the AMIs for yourself: http://blog.caucho.com/?p=177 Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin-4.0 and multipart upload</header>
    <date>Tue Apr 28 15:51:09 CEST 2009</date>
    <body>I am using the latest snapshot of Resin-4.0 (4.0.s090425) and I am unable to obtain a file's original filename when I submit an upload.  I iterations to see if I can get the original filename, but no luck. Can anybody else get to that parameter? Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin-4.0 and multipart upload</header>
    <date>Tue Apr 28 17:36:32 CEST 2009</date>
    <body>Bah, while I tried many iterations, I didn't try enough.  This works: I was missing the apostrophes. Aaron http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Why does resin.conf treeloads ${resin.*}/lib	explicitly?</header>
    <date>Tue Apr 28 14:34:56 CEST 2009</date>
    <body>I was profiling file access, and I've found, by doing ls -al /proc/$resinpid/fd, that resin (3.1.8 in this case) keeps two fd-s on every file in resin-3.1.8/lib. After I've removed from resin.conf, I've experienced no actual difference, except that second fd copy of every file no longer haunts /proc/$foo/fd, and the fact that server starts up somewhat faster than it used to! (Server start up time is same, but it renders the first request way much sooner In case of a very massive app on my shabby test machine, 40 sec difference!) So, why do those tree-loaders are kept in resin.conf? I can justify resin.home one - it might be different than resin-3.1.8/lib, but why list resin.root one here if it only makes things slightly worse? Or do they carry a Deep Internal Meaning? Or are them not supposed to point to the same dir as resin loads implicitly? Maybe we've messed it up? Maybe they're just left-over and should be dropped from config?</body>
  </mail>
  <mail>
    <header>[Resin-interest] critical issue resin cluster serialization error	help....</header>
    <date>Thu Apr 23 21:50:07 CEST 2009</date>
    <body>i am having a hell of a time getn resin 3.2.0 to properly serialize my session data correctly.  i constantly get a cluster hessian serialization error when it communicates.  i did some refactoring of the object when this started to happen.  i have removed all old session data and caches but still the problem persists.  if we remove one of the severs from the cluster the problem also disappears.  This is a very critical as we are trying to release our product in the next few days and this is a blocker. here is the error: com.caucho.hessian.io.HessianFieldException: com.iovation.adminconsole.objectmodel.security.Subscriber.anonymous: expected boolean at end of file at com .caucho .hessian.io.JavaDeserializer.logDeserializeError(JavaDeserializer.java: 671) at com.caucho.hessian.io.JavaDeserializer $BooleanFieldDeserializer.deserialize(JavaDeserializer.java:423) at com .caucho.hessian.io.JavaDeserializer.readObject(JavaDeserializer.java: 233) at com .caucho.hessian.io.JavaDeserializer.readObject(JavaDeserializer.java: 157) ... at java.lang.Thread.run(Thread.java:619) Caused by: com.caucho.hessian.io.HessianProtocolException: expected boolean at end of file at com.caucho.hessian.io.Hessian2Input.error(Hessian2Input.java:2705) at com.caucho.hessian.io.Hessian2Input.expect(Hessian2Input.java:2668) at com.caucho.hessian.io.Hessian2Input.readBoolean(Hessian2Input.java: 713) at com.caucho.hessian.io.JavaDeserializer $BooleanFieldDeserializer.deserialize(JavaDeserializer.java:419) we also seen this exception as well: com .caucho .hessian .io .HessianFieldException:com .iovation .adminconsole.objectmodel.security.Subscriber.sharedSubscriber: expected boolean at end of file at com .caucho .hessian.io.JavaDeserializer.logDeserializeError(JavaDeserializer.java: 671) at com.caucho.hessian.io.JavaDeserializer $BooleanFieldDeserializer.deserialize(JavaDeserializer.java:423) at com .caucho.hessian.io.JavaDeserializer.readObject(JavaDeserializer.java: 233) .... Caused by: com.caucho.hessian.io.HessianProtocolException: expected boolean at end of file at com.caucho.hessian.io.Hessian2Input.error(Hessian2Input.java:2705) at com.caucho.hessian.io.Hessian2Input.expect(Hessian2Input.java:2668) at com.caucho.hessian.io.Hessian2Input.readBoolean(Hessian2Input.java: 713) at com.caucho.hessian.io.JavaDeserializer $BooleanFieldDeserializer.deserialize(JavaDeserializer.java:419) ... 46 more also is there anyway to not use hessian for cluster serialization. iovation 111 SW Fifth Avenue Suite 3200 Portland, OR 97204 http://www.iovation.com/ The information contained in this email message may be privileged, confidential and protected from disclosure. If you are not the intended recipient, any dissemination, distribution or copying is strictly prohibited. If you think that you have received this email message in error, please notify the sender by reply email and delete the message and any attachments.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.1.9 service restart fails in Windows</header>
    <date>Thu Apr 23 09:29:58 CEST 2009</date>
    <body>Hi! In Windows command-line, there is no such command as "net restart" to restart a service, but in the Services GUI there is a button for this. I guess it just does STOP and START in sequence. It seems that Resin only stops itself, but doesn't start. So the result is that Resin is stopped, but Windows tells that the service is started :( I haven't tested if the same problem happens also with 4.0, but with 3.0.15 it used to work. Scott, would this be an easy fix? Cheers, Kai</body>
  </mail>
  <mail>
    <header>[Resin-interest] Why is resin class loading so broken?</header>
    <date>Sat Apr 18 08:27:25 CEST 2009</date>
    <body>I've asked this (and related) question several times and gotten no answer. I can't figure out why, between 3.0.x, 3.1.x, and 3.2.x, resin class loading seems so broken. My webapp has a hierarchical WEB-INF/ lib directory, and I have tree loaders configured. But it can't find classes I know to be there. My app works under 3.0, but I had to change some of the library versions to get it to work in 3.1, and now, after having had to put it all aside for a while, I'm trying to get it to work under 3.2, with similar issues. What are the class-loading differences out of the box in those three versions? TIA. -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why is resin class loading so broken?</header>
    <date>Sat Apr 18 08:33:24 CEST 2009</date>
    <body>I may have whined too soon. I think I found the problem...it wasn't picking up my modified app-defaults.xml. ---- I've asked this (and related) question several times and gotten no answer. I can't figure out why, between 3.0.x, 3.1.x, and 3.2.x, resin class loading seems so broken. My webapp has a hierarchical WEB-INF/ lib directory, and I have tree loaders configured. But it can't find classes I know to be there. My app works under 3.0, but I had to change some of the library versions to get it to work in 3.1, and now, after having had to put it all aside for a while, I'm trying to get it to work under 3.2, with similar issues. What are the class-loading differences out of the box in those three versions? TIA. -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Fwd: regexp and security-contraints?</header>
    <date>Fri Apr 17 23:57:54 CEST 2009</date>
    <body>I'm trying this on 3.1.8 but not having any luck: The above does not work. This works: I've also tried variations with: or exclude-regexp. None work. Is there a way to accomplish applying a security contrains to everything BUT a certain page or directory? They all either don't authenticate at all for authenticate for everything (for me at least) Ryan -- NOTICE: This e-mail message is for the sole use of the intended recipient(s) and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. Nothing contained in this message or in any attachment shall constitute a contract or electronic signature under the Electronic Signatures in Global and National Commerce Act, any version of the Uniform Electronic Transactions Act or any other statute governing electronic transactions.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fwd: regexp and security-contraints?</header>
    <date>Sat Apr 18 00:11:55 CEST 2009</date>
    <body>It should be working on a first-match basis.  So you can create a security-constraint with no requirement for the page that should automatically pass, and then have one matching everything else. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fwd: regexp and security-contraints?</header>
    <date>Sat Apr 18 02:48:07 CEST 2009</date>
    <body>Should I assume the missing apostrophe in the example that doesn't work is actually there in your test case? should be Aaron</body>
  </mail>
  <mail>
    <header>[Resin-interest] JdbcAuthenticator Cookie-Domain</header>
    <date>Fri Apr 17 23:26:43 CEST 2009</date>
    <body>Should the cookie-domain setting on the JdbcAuthenticator from this page: http://wiki.caucho.com/JdbcAuthenticator work on Resin 4.0, or is that old documentation?  I am setting it inside the init tag, but it doesn't seem to be working.  I will keep trying other iterations. Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JdbcAuthenticator Cookie-Domain</header>
    <date>Sun Apr 19 18:39:13 CEST 2009</date>
    <body>Well this still isn't working for me.  I have tried: ".[domain].com" (with a preceding dot) and "[domain].com" (without a preceding dot) and no matter what it is still creating the cookie named: "[host].[domain].com" (where [host] is the virtual host I am running the app under). option under JdbcAuthenticator's &amp;lt;init&amp;gt; params. Anybody else doing this successfully? Aaron http://wiki.caucho.com/JdbcAuthenticator work on Resin 4.0, or is http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JdbcAuthenticator Cookie-Domain</header>
    <date>Thu Apr 30 22:54:28 CEST 2009</date>
    <body>This is still an open issue for me.  Does anybody out there use this and know if it works? Thanks, Aaron http://wiki.caucho.com/JdbcAuthenticator work on Resin 4.0, or is http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] PasswordDigest methods</header>
    <date>Fri Apr 17 20:55:20 CEST 2009</date>
    <body>Is there any reason why the getPasswordDigest( .. ) methods in PasswordDigest can't be static? Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] PasswordDigest methods</header>
    <date>Fri Apr 17 21:05:21 CEST 2009</date>
    <body>Also, for what it's worth if you add setUsername( .. ) and setPassword( .. ) methods then you could use this class with pure JSTL, which would be convenient: Something like: Just a thought I would throw out there.  There is probably a way to do something similar with the new CanDI stuff? -a http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] JdbcAuthenticator</header>
    <date>Fri Apr 17 19:44:09 CEST 2009</date>
    <body>I am playing with the JdbcAuthenticator on Resin 4.0 and for some reason I can not get it to authenticate properly.  With the detail level set to finest, I am always getting: mismatched password:aaron where "aaron" is the username I am trying to authenticate. I have tried trimming the password and even forcing it like: and cannot get it to authenticate. So the next question is, are the passwords stored in the database plaintext or do they need to be encrypted?  If they need to be encrypted, what is the default digest for doing that? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JdbcAuthenticator</header>
    <date>Fri Apr 17 20:14:14 CEST 2009</date>
    <body>Ah so I just stumbled on this and answered my own question: http://www.caucho.com/resin-3.0/security/digest.xtp By storing the digested form in the password field, it started working. Aaron http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Corrupted session</header>
    <date>Thu Apr 16 19:50:47 CEST 2009</date>
    <body>Hi, I start seeing this concurrency issue on save/load large session object. Did anybody had the same problem and found a solution to fix it? Below is a stack trace. Here is my configuration: resin 3.0.24, Linux, JDK 1.6 Thank you. [12:20:22.063] FileBacking.log: update cluster: test.xxxxxxx.com;dcaEE8dukDJF9_LAlRVcs length:5309265 [12:20:22.063] ClusterStoreManager.log: [app4] self-store(3) dcaEE8dukDJF9_LAlRVcs length=5309265 [12:20:22.063] AbstractHttpResponse.log: [app4, 12] HTTP/1.1 200 OK [12:20:22.063] AbstractHttpResponse.log: [app4, 12] Cache-Control: no-store, no-cache, post-check=0, pre-check=0 [12:20:22.063] AbstractHttpResponse.log: [app4, 12] Pragma: no-cache [12:20:22.063] AbstractHttpResponse.log: [app4, 12] Expires: Wed, 31 Dec 1969 23:59:59 GMT [12:20:22.063] AbstractHttpResponse.log: [app4, 12] Content-Type: text/html [12:20:22.063] AbstractHttpResponse.log: [app4, 12] Transfer-Encoding: chunked [12:20:22.063] ResponseStream.log: [12] write-chunk(7) [12:20:22.219] FileBacking.log: load local object: test.xxxxxxxx.com;dcaEE8dukDJF9_LAlRVcs [12:20:22.219] ClusterObject.log: java.io.UTFDataFormatException [12:20:22.219]  at java.io.ObjectInputStream$BlockDataInputStream.readUTFSpan(ObjectInputSt ream.java:3082) [12:20:22.219]  at java.io.ObjectInputStream$BlockDataInputStream.readUTFBody(ObjectInputSt ream.java:3007) [12:20:22.219]  at java.io.ObjectInputStream$BlockDataInputStream.readUTF(ObjectInputStream .java:2820) [12:20:22.219]  at java.io.ObjectInputStream.readString(ObjectInputStream.java:1599) [12:20:22.219]  at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1320) [12:20:22.219]  at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947) [12:20:22.219]  at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871) [12:20:22.219]  at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753 ) [12:20:22.219]  at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329) [12:20:22.219]  at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947) [12:20:22.219]  at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871) [12:20:22.219]  at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753 ) [12:20:22.219]  at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329) [12:20:22.219]  at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351) [12:20:22.219]  at java.util.ArrayList.readObject(ArrayList.java:593) [12:20:22.219]  at sun.reflect.GeneratedMethodAccessor1868.invoke(Unknown Source) [12:20:22.219]  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessor Impl.java:25) [12:20:22.219]  at java.lang.reflect.Method.invoke(Method.java:597) [12:20:22.219]  at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974) [12:20:22.219]  at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849) [12:20:22.219]  at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753 ) [12:20:22.219]  at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329) [12:20:22.219]  at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947) [12:20:22.219]  at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871) [12:20:22.219]  at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753 ) [12:20:22.219]  at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329) [12:20:22.219]  at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947) [12:20:22.219]  at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871) [12:20:22.219]  at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753 ) [12:20:22.219]  at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329) [12:20:22.219]  at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947) [12:20:22.219]  at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871) [12:20:22.219]  at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753 ) [12:20:22.219]  at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329) [12:20:22.219]  at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947) [12:20:22.219]  at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871) [12:20:22.219]  at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753 ) [12:20:22.219]  at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329) [12:20:22.219]  at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351) [12:20:22.219]  at java.util.ArrayList.readObject(ArrayList.java:593) [12:20:22.219]  at sun.reflect.GeneratedMethodAccessor1868.invoke(Unknown Source) [12:20:22.219]  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessor Impl.java:25) [12:20:22.219]  at java.lang.reflect.Method.invoke(Method.java:597) [12:20:22.219]  at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974) [12:20:22.219]  at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849) [12:20:22.219]  at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753 ) [12:20:22.219]  at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329) [12:20:22.219]  at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947) [12:20:22.219]  at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871) [12:20:22.219]  at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753 ) [12:20:22.219]  at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329) [12:20:22.219]  at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351) [12:20:22.219]  at com.caucho.server.session.SessionImpl.load(SessionImpl.java:898) [12:20:22.219]  at com.caucho.server.session.SessionManager.load(SessionManager.java:1482) [12:20:22.219]  at com.caucho.server.cluster.ClusterObject.load(ClusterObject.java:288) [12:20:22.219]  at com.caucho.server.cluster.FileBacking.loadSelf(FileBacking.java:318) [12:20:22.219]  at com.caucho.server.cluster.ClusterStore.load(ClusterStore.java:423) [12:20:22.219]  at com.caucho.server.cluster.ClusterObject.load(ClusterObject.java:259) [12:20:22.219]  at com.caucho.server.session.SessionImpl.load(SessionImpl.java:702) [12:20:22.219]  at com.caucho.server.session.SessionManager.getSession(SessionManager.java: 1278) [12:20:22.219]  at com.caucho.server.connection.AbstractHttpRequest.createSession(AbstractH ttpRequest.java:1448) [12:20:22.219]  at com.caucho.server.connection.AbstractHttpRequest.getSession(AbstractHttp Request.java:1260) [12:20:22.219]  at com.caucho.server.connection.AbstractHttpResponse.writeHeaders(AbstractH ttpResponse.java:1564) [12:20:22.219]  at com.caucho.server.connection.ResponseStream.writeHeaders(ResponseStream. java:216) [12:20:22.219]  at com.caucho.server.connection.ResponseStream.writeNext(ResponseStream.jav a:403) [12:20:22.219]  at com.caucho.server.connection.ToByteResponseStream.flushByteBuffer(ToByte ResponseStream.java:518) [12:20:22.219]  at com.caucho.server.connection.ToByteResponseStream.flushBuffer(ToByteResp onseStream.java:424) [12:20:22.219]  at com.caucho.server.connection.ResponseStream.getBuffer(ResponseStream.jav a:225) [12:20:22.219]  at com.caucho.vfs.Path.writeToStream(Path.java:1092) [12:20:22.219]  at com.caucho.server.connection.AbstractResponseStream.sendFile(AbstractRes ponseStream.java:254) [12:20:22.219]  at com.caucho.servlets.FileServlet.service(FileServlet.java:347) [12:20:22.219]  at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChai n.java:106) [12:20:22.219]  at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFi lter.java:299) [12:20:22.219]  at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain. java:70) [12:20:22.219]  at com.caucho.server.cache.CacheFilterChain.doFilter(CacheFilterChain.java: 209) [12:20:22.219]  at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.ja va:173) [12:20:22.219]  at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.j ava:229) [12:20:22.219]  at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:274) [12:20:22.219]  at com.caucho.server.port.TcpConnection.run(TcpConnection.java:514) [12:20:22.219]  at com.caucho.util.ThreadPool.runTasks(ThreadPool.java:520) [12:20:22.219]  at com.caucho.util.ThreadPool.run(ThreadPool.java:442) [12:20:22.219]  at java.lang.Thread.run(Thread.java:619) [12:20:22.219] [12:20:22.219] SessionImpl.log: reset session dcaEE8dukDJF9_LAlRVcs [12:20:22.219] FileBacking.log: update cluster: test.brokeroffice.com;dcaEE8dukDJF9_LAlRVcs length:10 Privileged/Confidential Information may be contained in this message. If you are not the addressee indicated in this message (or responsible for delivery of the message to such person), you may not copy or deliver this message to anyone. In such case, you should destroy this message and kindly notify the sender by reply email. Please advise immediately if you or your employer does not consent to Internet email for messages of this kind. Opinions, conclusions and other information in this message that do not relate to the official business of my firm shall be understood as neither given nor endorsed by it.</body>
  </mail>
  <mail>
    <header>[Resin-interest] SCGI Servlet</header>
    <date>Thu Apr 16 14:49:59 CEST 2009</date>
    <body>Anyone know if there are any plans for a SCGI Servlet ? ----------------------------------------- This electronic communication and any files transmitted with it, or attached to it, are confidential and are intended solely for the use of the individual or entity to who it is addressed and may contain information that is confidential, legally privileged, protected by privacy laws, or otherwise restricted from disclosure to anyone else.  If you are not the intended recipient or the person responsible for delivering the e-mail to the intended recipient, be advised that you have received this e-mail in error, and that any use, dissemination, forwarding, printing, or copying of this e-mail is strictly prohibited. If you received this e-mail in error, please return the e-mail to the sender, delete it from your computer and destroy any printed copy of it. Although our company attempts to sweep e-mail and attachments for viruses, it does not guarantee that either are virus-free and accepts no liability for any damage sustained as a result of viruses.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Hessian in Resin 3.1.x</header>
    <date>Thu Apr 16 14:31:56 CEST 2009</date>
    <body>I want to configure a remote-client with a hessian uri. I got this working but am having problems as to how a username/password can be specified for HTTP basic authentication. I tried the resin documentation with no luck. Could someone send me a sample as to how this can be done. Thanks Sashi</body>
  </mail>
  <mail>
    <header>[Resin-interest] Any chance to support an out of box JSR299	implementation for GAE?</header>
    <date>Wed Apr 15 19:21:56 CEST 2009</date>
    <body>Hi there, I wonder if Resin could distribute a library to support an out of box JSR299 implementation for Google App Engine. We know Resin can't run on GAE now, but I think Resin's implementation of CanDI may be run on GAE. Is there any plan for this? regards -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any chance to support an out of box JSR299	implementation for GAE?</header>
    <date>Wed Apr 15 20:48:14 CEST 2009</date>
    <body>Hi there, I wonder if Resin could distribute a library to support an out of box JSR299 implementation for Google App Engine. We know Resin can't run on GAE now, but I think Resin's implementation of CanDI may be run on GAE. Is there any plan for this? Hmm.  That's an interesting thought.  Resin's CanDI is in resin- kernel.jar and doesn't depend on Resin itself, with the important exception of the Request and Session scopes. Some of the Interception features wouldn't be available because of the current Google limitations on file writing (and probably missing javac), because Resin generates Java code instead of writing bytecode directly. There would be a few changes needed because Resin CanDI does expect Resin classloaders, but I think that would be straightforward to change. -- Scott regards -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any chance to support an out of box	JSR299implementation for GAE?</header>
    <date>Tue Apr 21 07:41:11 CEST 2009</date>
    <body>1. For bytecode generation: I can afford to use compile time weaver of byte code enhancer. 2. For classloader: Can we load resin's classloader at startup via servlet filter or listener and then use it for all class loading? -Wesley ----- Original Message ----- From: Scott Ferguson To: General Discussion for the Resin application server Sent: Thursday, April 16, 2009 2:47 AM Subject: Re: [Resin-interest] Any chance to support an out of box JSR299implementation for GAE? Hi there, I wonder if Resin could distribute a library to support an out of box JSR299 implementation for Google App Engine. We know Resin can't run on GAE now, but I think Resin's implementation of CanDI may be run on GAE. Is there any plan for this? Hmm.  That's an interesting thought.  Resin's CanDI is in resin-kernel.jar and doesn't depend on Resin itself, with the important exception of the Request and Session scopes. Some of the Interception features wouldn't be available because of the current Google limitations on file writing (and probably missing javac), because Resin generates Java code instead of writing bytecode directly. There would be a few changes needed because Resin CanDI does expect Resin classloaders, but I think that would be straightforward to change. -- Scott regards -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any chance to support an out of box	JSR299implementation for GAE?</header>
    <date>Thu Apr 23 01:33:25 CEST 2009</date>
    <body>Good point.  That's probably the best colution. Not in GAE because their security manager doesn't allow Thread.setContextClassLoader.  We're restricted to using the web-app's classloader.  I'm pretty sure we can create child classloaders (for proxy/enhancement), but I haven't checked yet. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any chance to support an out of	box	JSR299implementation for GAE?</header>
    <date>Thu Apr 23 06:38:49 CEST 2009</date>
    <body>I just got word that they are planning to make Thread.setContextClassLoader() available soon, so that may be an option. Emil http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any chance to support an out	ofbox	JSR299implementation for GAE?</header>
    <date>Thu Apr 23 07:14:51 CEST 2009</date>
    <body>Thanks. My app is heavily depending on Resin CanDI. Hope we'll get an out-of-box Resin CanDI before Gavin King's JSR299 RI 1.0 final release :) ----- Original Message ----- To: "General Discussion for the Resin application server" Sent: Thursday, April 23, 2009 12:37 PM Subject: Re: [Resin-interest] Any chance to support an out ofbox JSR299implementation for GAE? http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any chance to support an out ofbox	JSR299implementation for GAE?</header>
    <date>Thu Apr 23 07:48:51 CEST 2009</date>
    <body>There is also Guice, and it works on GAE. Just saying... http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Any chance to support an out	ofboxJSR299implementation for GAE?</header>
    <date>Thu Apr 23 08:51:55 CEST 2009</date>
    <body>Guice 1.0 lacks too many features of JSR299. I switched from Spring to Guice in 2007, then switched from Guice to Resin JSR299 draft in early 2008. ----- Original Message ----- To: "General Discussion for the Resin application server" Sent: Thursday, April 23, 2009 1:47 PM Subject: Re: [Resin-interest] Any chance to support an out ofboxJSR299implementation for GAE? http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Anyone using Terracotta with Resin 3.2.x?</header>
    <date>Tue Apr 14 04:29:04 CEST 2009</date>
    <body>Hi, Has anyone used Terracotta with Resin 3.2.x?  In particular I'm wanting to use it to scale out a lot of EHCache caches and some other POJOs.  I know there is the one page on the wiki, but it references 3.1. Thanks, Jonathan</body>
  </mail>
  <mail>
    <header>[Resin-interest] Namespace files (in META-INF)</header>
    <date>Mon Apr 13 22:16:27 CEST 2009</date>
    <body>Hi all, I was looking through the source of resin and noticed the namespace files in META-INF/caucho. Is there a place to read up on the placement, and format of these files? I would guess, without seeing it described other than in the resin module, that it goes something like this: The class loader looks for any *.namespace files and loads them. Then those defined namespaces can be used anywhere there is an xml def for JSR299 beans. Is this right? Thanks in advance Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Namespace files (in META-INF)</header>
    <date>Mon Apr 13 22:21:28 CEST 2009</date>
    <body>These are essentially obsolete.  Although Resin has been using an IoC/ DI style for its configuration since 3.0, there wasn't a standard to follow, so we needed to invent our own extension capabilities. Going forward, JSR-299 should be the way to go, and the META-INF/ caucho should be treated as backward-compatibility configuration. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Namespace files (in META-INF)</header>
    <date>Mon Apr 13 22:45:33 CEST 2009</date>
    <body>Is there a way in the jsr299 way of things to include namespaces in your package to shorten the need for explicitly listing them in the web/web-resin/beans.xml files? For example, if I want to use X (10) ns prefixes in web-resin.xml do I have to include them explicitly? http://caucho.com/ns/resin" xmlns:r="urn:java:com.caucho.resin" xmlns:rcfg="urn:java:com.caucho.config" xmlns:jms="urn:java:com.caucho.jms" xmlns:ejb="urn:java:com.caucho.ejb" xmlns:adm="urn:java:org.subethamail.core.admin" xmlns:util="urn:java:org.subethamail.core.util" xmlns:sec="urn:java:org.subethamail.web.security" xmlns:queue="urn:java:org.subethamail.core.queue" ... Thanks, Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Namespace files (in META-INF)</header>
    <date>Mon Apr 13 23:50:41 CEST 2009</date>
    <body>Yes to the first (no the the second).  The current filename is "namespace" (possibly subject to change in the next draft) and it's in the package directly, e.g. com/caucho/resin/namespace (not in META- INF).  The current Resin one looks like: com.caucho.admin com.caucho.config com.caucho.jms com.caucho.protocols com.caucho.resources com.caucho.rewrite com.caucho.security i.e. each alias package is listed on a new line. -- Scott http://caucho.com/ns/resin" http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] pool overflow when 200 users</header>
    <date>Mon Apr 13 22:06:27 CEST 2009</date>
    <body>Hi Today I've used Apache's JMeter to stress my server and looked what's happening. (I'm on a virtual server) With 50 users x 100 requests, it slows down but behaves nicely. With 200 users x 20 requests (with a ramp-up period of 600sec) I have a strange behaviour : after all threads finished (well some didn't do all requests), the cpu came back to calm (0%) It looks like the application works like before. But every time I go back to the server, the first request is very very slow. After about 10 seconds, the page appears and I can see in the info log : After that, the navigation works fine. I understand that my database pool is not configured correctly, this is the config : But I don't know what values to set, should I use max-overﬂow- connections, max-pool-time, etc ? and should this related to values set in thread-max ? (I use mysql on linux) Any advice would be greatly appreciated. Thanks. -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>[Resin-interest] Working from svn (Resin 4)</header>
    <date>Mon Apr 13 19:52:04 CEST 2009</date>
    <body>To Caucho Devs, In an effort to get some of my problems diagnosed from the old snapshot  I was using(3/18) I delved into the svn trunk. It seems like the snapshots (although listed as 03/04/09 in the download page) are actually nightly snapshots. This leads me to believe that going straight to trunk might be the best idea. Well, maybe it wasn't. Is it a good idea to work from svn trunk? I know that depends on how close to the edge you want to be but what is your philosophy of the state of trunk on each checkin? Is it considered "working" at all times? Should I expect things to be broken most of the time until a blessed build comes out? I noticed that the "Named" annotations no longer works in my queue def. against trunk. I'm not sure if this is a design decision (and will be updated with changes to come; including docs), or a bug. I don't want to cause any more confusion, or problems but I'm excited about getting things working and I keep running into issue that may be within resin, or at least with my understanding. I want to work as close to the front-lines as I can while still being a little safe. I'm happy to make tests for all the things I need in my applications so that I can run automated tests and stop asking questions which might better be answered with source. Is there a test framework for resin that I can hook into? Thanks in advance, Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Working from svn (Resin 4)</header>
    <date>Mon Apr 13 23:57:45 CEST 2009</date>
    <body>Generally, the svn trunk is not a good idea, because we often make fairly large changes that take several days to clean the regressions. It's supposed to compile :) That's a bug.  In the resin-web.xml and resin.xml, the Resin namespace ( http://caucho.com/ns/resin ) implicitly imports java:urn:ee, which contains javax.annotation.Named.  But there's a special bit of code to handle the Resin alias; it's not a general capability. Snapshots are generally better.  Since we're getting closer to 4.0, they should be more frequently updated. Not a public one.  Our tests are essentially organized around .war files, so a war duplicating a problem is really the perfect test. Although, a short code snip showing the problem is even better if it's simple. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Working from svn (Resin 4)</header>
    <date>Tue Apr 14 01:15:48 CEST 2009</date>
    <body>Okay, I will endeaver to work against the snapshots. Are the snapshots "regression" free then? [snip]</body>
  </mail>
  <mail>
    <header>[Resin-interest] Eclipse Plugin</header>
    <date>Mon Apr 13 06:43:45 CEST 2009</date>
    <body>I noticed there is an eclipse plugin in the svn tree (artifacts/eclipse) that has seen some recent checkins. The build instructions seem pretty straight forward and end with directions to post the update-site at http://caucho.com/eclipse . When I point the eclipse updates to that address there is nothing. Is this something I can build from source? Will it be hosted there sometime soon? Is the plugin in usable form? Oh, and what do people use for an IDE btw? Thanks in advance, Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Mon Apr 13 11:29:08 CEST 2009</date>
    <body>Hi, I use eclipse europa (3.3.2) for the source (java &amp;amp; flex), but cannot debug with it (I launch resin from console). The plugin never worked for me. (I'm on macosx) http://caucho.com/eclipse . When I point the http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Mon Apr 13 18:16:49 CEST 2009</date>
    <body>I use Eclipse and run Resin within it's framework but do not use a plug-in.  I just set it up as a Run Configuration doing these steps: 1) Run --&amp;gt; Run Configuration 2) Create a new Java Application On the new configurations screen I do: 1) Main (tab) Main class: com.caucho.server.resin.Resin 2) Arguments (tab) Program arguments: -conf /path-to-configuration/resin.xml VM arguments: -Xmx96m -Djava.util.logging.manager=com.caucho.log.LogManagerImpl -Dresin.home=/path-to-resin/resin-pro-3.0.22 3) Classpath (tab) Highlight Bootstrap Entries and click "Add External JARs ..." Add all of the jars under: /path-to-resin/resin-pro-3.0.22/lib/*.jar I think that's all the steps.  Once you do that you should have Resin running under Eclipse.  If you have a Java project, you will want to probably add it on the Main tab, and add any dependencies to your Java Configure Build Path" and then "Add external JARs" for each dependency so that it all compiles properly. Aaron http://caucho.com/eclipse . When I point the http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Mon Apr 13 18:53:56 CEST 2009</date>
    <body>Hi Scott, The Eclipse update site isn't up just yet, but will be with the new release, due out this week or early next. Emil http://caucho.com/eclipse . When I point the http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Mon Apr 13 19:22:00 CEST 2009</date>
    <body>Emil, What does the plug-in provide to us that setting up as a general application doesn't?  I haven't tried the plug-in so I am not aware of what it does? Thanks, Aaron http://caucho.com/eclipse . When I point the http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Mon Apr 13 19:28:02 CEST 2009</date>
    <body>Hi Aaron, The plugin is built on the WST/JST (Java webtools) framework, so you get all the goodies that come with that.  It also provides 3 different deployment mechanisms: 1) .war based 2) in place 3) new Resin 4.0 remote deploy Suggestions for other features are always welcome. Thanks, Emil http://caucho.com/eclipse . When I point the http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Fri Apr 17 16:58:35 CEST 2009</date>
    <body>Maven, maven maven !!!! http://caucho.com/eclipse . When I point the http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Fri Apr 17 17:10:37 CEST 2009</date>
    <body>Exadel Studios, use to integrate so well with resin.  I think it is great that you guys have a eclipse plugin. Best regards, Levi http://caucho.com/eclipse . When I point the http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Fri Apr 17 17:42:45 CEST 2009</date>
    <body>Could you explain? Thanks, Emil http://caucho.com/eclipse . When I point the http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Fri Apr 17 18:07:50 CEST 2009</date>
    <body>Oh no... I hate this discussion.  Let's just say that there are plenty of people on both sides of the fence.  I have a fair amount of experience with Maven on big complicated projects and loathe it intensely. This thread is worth reading, you can search for my name to see my long-winded comment: http://tapestryjava.blogspot.com/2007/11/maven-wont-get-fooled-again.html I'd rather see an ant build.  For all its flaws, it's still the better Java build tool.  I'd probably be willing to write and contribute a buildfile if the Powers That Be are interested. Jeff http://caucho.com/eclipse . When I point the http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Fri Apr 17 18:42:58 CEST 2009</date>
    <body>I'm confused. What does this have to do with the resin (app-server) plugin? Doesn't the WST/Eclipse framework for web projects take care of building (and deploying) everything? It seems like if you want to use ant/maven/xBuildTool you can do that outside eclipse, or use one of the existing plugins that work with eclipse, and WST. Oh, and I def. prefer ant, just to put my two cents in on that front. http://tapestryjava.blogspot.com/2007/11/maven-wont-get-fooled-again.html http://caucho.com/eclipse . When I point the http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Mon Apr 13 19:39:02 CEST 2009</date>
    <body>Hi all, Looking at the source (and trying it out from my own build) it seems like it integrates into eclipse's wst tools. This means you can build a "dynamic web" application and "resin X.x" (3.x/4.0 hot deploy/in-place) runtime (in eclipse) that can be deployed/run/debug/profiles within eclipse. The resin runtime objects (using wst and the eclipse framework) mean that you don't need to setup "launch/debug/etc" configurations using general java app settings (like class/classpath/jvmargs) and can just use the ones defined for resin X.x. Oh, and I think this also means you can target one of these runtimes without having to manually setup the libs/deps. I'm not sure if there is much more in there; that is all I saw when playing with it. There were no project or class helpers that I saw, but that would be nice too. Being able to create resin "Resin Project","Resource", "Persistence (JPA)", "Entity", "Service", "Queue", and so on would be great. Also, having completion and validation help with the resin.xml/resin-web.xml/beans.xml files would be great. It nice to know when you have a configuration/code errors before you try to deploy. On Mon, Apr 13, 2009 at 10:20 AM, Aaron Freeman http://caucho.com/eclipse . When I point the</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Mon May 11 15:21:03 CEST 2009</date>
    <body>Emil Ong schrieb: Would this still be http://caucho.com/eclipse ? 404 at the moment. But I guess you still need some more time to recover from the 4.0 release effort. Thanks for all the work! Michael</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Mon May 11 20:06:46 CEST 2009</date>
    <body>http://caucho.com/eclipse ? 404 at the moment. Hi Michael, Thanks for the recovery time... :-)  Please give it a try now. Thanks, Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Tue May 12 23:07:30 CEST 2009</date>
    <body>Emil Ong schrieb am 11.05.2009 um 11:04:39 (-0700): http://caucho.com/eclipse ? 404 at the moment. Hi Emil, the plugin installs fine from http://caucho.com/eclipse on Eclipse 3.4 Java 1.6 on Windows XP. I get the following choices in the Resin folder of the "New Server" menu: * Resin 3.1 * Resin 3.1 (in place) * Resin 4.0 * Resin 4.0 (hot deploy) * Resin 4.0 (in place) What's the difference between the three kinds? I'm afraid that for the moment, I'm unsure how to enable any of those on my Windows machine. (1) I'm going to start with "Resin 4.0", picking port 8090. In the top section of the "New Server" dialog, an error is flagged: Missing classpath entry \usr\share\resin\lib\resin.jar The field "Resin Home" is prefilled with "/usr/share/resin", although I've set RESIN_HOME to "C:\Resin", which contains my new Resin 4.0 installation. Okay, I can explicitly select "C:/Resin", and now error message has disappeared and the "Next" and "Finish" buttons have been activated. The port I specified isn't honoured. Instead, the default port 8080 is used. But Resin starts successfully. Now when I hit the stop button, an error pops up, saying "Server Resin 4.0 at localhost failed to start" (sic). But the server seems to have shutdown alright. (2) Next in line, "Resin 4.0 (hot deploy)", picking port 8091. Again, "C:/Resin" for "Resin Home", but I'm getting an exception: java.lang.NoClassDefFoundError: com/caucho/boot/ResinBoot Caused by: java.lang.ClassNotFoundException: com.caucho.boot.ResinBoot at java.net.URLClassLoader$1.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source) at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source) at java.lang.ClassLoader.loadClassInternal(Unknown Source) Exception in thread "main" (3) Next, "Resin 4.0 (in place), picking port 4092. "C:/Resin", once more. Getting an error, "failed to start". Well, I guess my environment lacks some essential configuration. Maybe you could shed some light on what precisely I'm missing? Thanks, Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Wed May 13 01:07:43 CEST 2009</date>
    <body>http://caucho.com/eclipse on Eclipse 3.4 That's a good start... :-) The "plain" versions use ant to build a .war file, then drop it into the Resin webapps directory for deployment. The "in place" versions point Resin at your workspace and runs directly from the project directory. "hot deploy" is the new Resin 4.0 feature that deploys over BAM. Better, more official docs are on the way... Do you mean that you've set RESIN_HOME as an environment variable?  If so, I don't think Eclipse has any way of picking that up.  You'll need to set your actual Resin directory in the text field. The port issue is a bug then.  I've filed it here: http://bugs.caucho.com/view.php?id=3502 I can't reproduce this.  Hot deploy _is_ broken, though in a different way for me.  Here's the bug for that: http://bugs.caucho.com/view.php?id=3503 Looks like the config files didn't make it into the plugin for some reason.  I've updated it, so "plain" and "in place" should work now. Sorry for the headaches... Eclipse is a lot trickier to QA than our main tree. Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Wed May 13 12:26:31 CEST 2009</date>
    <body>Emil Ong schrieb: Hi Emil, thanks for your feedback. Read on for more comments. Yes, RESIN_HOME as an environment variable. That was just a guess. I find it odd to have the field prefilled with a UNIX path like /usr/share/resin on a Windows box. http://bugs.caucho.com/view.php?id=3502 Okay. http://bugs.caucho.com/view.php?id=3503 Okay. Now retesting on another machine, still Windows XP, JDK 1.6.11 and Eclipse 3.4. The update went fine again ... (1) "plain" 0003502: Eclipse plugin doesn't respect port - Mantis http://bugs.caucho.com/view.php?id=3502 My choice of port still isn't honoured. The settings in conf/resin.xml are honoured. If this is the intention (why not?), then displaying configuration choices for the user to specify address and port are obviously misleading. An indication that resin.xml is used to configure the server would make more sense. I'm still seeing the same error message pop up on shutdown via the Eclipse server shutdown button: "failed to start" (sic). (2) "in place" A new error message :-) - "Reference to undefined variable resin.configuration.file". Won't start :-( (3) "hot deploy" - not tested Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Wed May 13 18:23:22 CEST 2009</date>
    <body>Eclipse's WTP framework doesn't really allow for putting platform dependent string in.  Without rewriting that part of the framework, we have to choose some default for everybody. http://bugs.caucho.com/view.php?id=3502 Yes, the bug has not yet been fixed, so I wouldn't expect it to work. Can you start Eclipse with "-consoleLog" and send any additional information for these?  I can't reproduce either. Thanks, Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Wed May 13 20:24:43 CEST 2009</date>
    <body>Emil Ong schrieb: Alright, it's not important. It just added to the uncertainty about how to use it. This is still there. Might be related to the other issue I wrote concerning the progress indicator in the bottom right corner of the IDE which keeps showing the job "Starting Resin 4.0 at localhost" in progress. Looks like that message got held up somewhere on its way to the list, so here's a copy of it: | Another issue: The process of starting Resin keeps sitting around in | the background while Resin is already serving requests. This is | indicated in the Eclipse IDE by a symbol in the bottom right corner | indicating ongoing background jobs. | | After some minutes, the following error message pops up: | |    Server Resin 4.0 at localhost was unable to start withing 240 |    seconds. If the server requires more time, try increasing the |    timeout in the server editor. | | Sounds like the Resin start job (Ant in this case, as per your mail) | should report back to Eclipse on finishing the job. So after a couple of minutes, this error message pops up in a window labeled "Problem Occurred" and the running and serving Resin is stopped, maybe because it hasn't reported startup success back to the parent process. I added -consoleLog to my eclipse.ini, but I have no idea where the log is going. If it is just the console window in the IDE, there is nothing special to see, just the usual Resin startup messages plus additional debug info my application generates. I can't reproduce this error. But I swear it was there the first time around! But with this "in place" configuration, all I get is 404. I tried all kinds of possible context paths, but none seems to work. Which is sort of logical, as I don't see my application's startup blurb in the console log. On the other hand, Resin mentions it (DbXml01): /C:/MILU/eclipse/plugins/com.caucho.resin.eclipse_4.0.0/conf/resin40/in-place.xml http://default/DbXml01 ] active 20:14:59,20 C:\MILU\dev\ds # netstat -p tcp -na | findstr 8099 TCP    0.0.0.0:8099           0.0.0.0:0              ABHÖREN TCP    127.0.0.1:4394         127.0.0.1:8099         SCHLIESSEN_WARTEN TCP    127.0.0.1:8099         127.0.0.1:4394         FIN_WARTEN_2 The port I specified is taken into account, the address isn't. Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Thu May 14 18:25:29 CEST 2009</date>
    <body>Can you try running eclipse from the command line and adding the -consoleLog?  On Windows it's supposed to pop up a "Java console window", but it might not work in eclipse.ini. :-) Could be some artifact from the upgrade. http://default/DbXml01 ] active It's trying to open http://localhost:8099/DbXml01 and not getting anything?  It looks like Resin's finding the webapp, so something else must be the issue. This is a hack, but can you add finest logging to the in-place.xml in C:/MILU/eclipse/plugins/com.caucho.resin.eclipse_4.0.0/conf/resin40/in-place.xml This should do it: That should show why Resin's serving a 404. Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Tue May 19 10:06:10 CEST 2009</date>
    <body>Hi Emil, Emil Ong schrieb: No output is shown on STDERR when starting "eclipse.exe -consoleLog". Does anyone here know how this is supposed to work? http://default/DbXml01 ] active As per your instructions, I configured finest level logging in "plugins/com.caucho.resin.eclipse_4.0.0/conf/resin40/in-place.xml", and that revealed the problem. The context path /DbXml01 is accepted, but somewhere along the way, there is a manifestation of the typical pathname-with-spaces issue. My %UserProfile% is in: "C:\Dokumente und Einstellungen\MiLu" - which is like: "C:\Documents and Settings\MiLu" And this gets split on spaces, so the resulting path is completely wrong: So I guess you just need to quote the path at the appropriate places. http://localhost:8099/DbXml01 and not getting In any case it didn't find the webapp because I didn't see the webapp startup blurb in the server log, and given the pathname issue, this is understandable. Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Tue Jun 30 23:04:58 CEST 2009</date>
    <body>Emil Ong schrieb am 14.05.2009 um 09:23:04 (-0700): And it did - see my last mail on this thread. If there is any additional information I should provide, please let me know. By the way, I uninstalled the Resin plugin, and then tried to reinstall it, which resulted in the following error message: An error occurred while collecting items to be installed No repository found containing: com.caucho.resin.eclipse/org.eclipse.update.feature/4.0.0 Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Wed Jul 01 17:27:19 CEST 2009</date>
    <body>Hi Michael, Sorry for the delay.  Somehow I lost track of the thread.  Thanks for the ping. I've filed a bug report for your problem here: http://bugs.caucho.com/view.php?id=3589 It should be pretty straightforward to fix, though I may need a couple of weeks to get a release/snapshot out due to some other Eclipse bugs and business travel. It should be up again.  Thanks for noticing. :-) Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Wed Jul 01 23:08:16 CEST 2009</date>
    <body>Emil Ong schrieb am 01.07.2009 um 08:26:15 (-0700): http://bugs.caucho.com/view.php?id=3589 Thanks! Take your time, I seem to be the only user. I just thought that given the wide-spread usage of Eclipse, having Resin integrated as a server wouldn't exactly be bad publicity. (Provided there is a certain reliability to the feature's operation, of course.) You're very welcome. Now there is a new error message :-) An error occurred during provisioning. Error reading signed content. The file "C:\IDE\eclipse\plugins\com.caucho.resin.eclipse_4.0.0" does not exist Probably trivial to solve. Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Fri Jul 03 01:38:07 CEST 2009</date>
    <body>Hmm... it could be an artifact of removing and reinstalling.  The plugin and site are unchanged from before.  Does this happen on install or when using the plugin? Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Fri Jul 03 12:32:34 CEST 2009</date>
    <body>Emil Ong schrieb: It happened on installing the plugin. On another machine, the installation has succeeded after a previous uninstall. I'll retry on the first machine and report back if the problem persists. Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Sat Jul 04 14:52:42 CEST 2009</date>
    <body>Emil Ong schrieb am 02.07.2009 um 16:36:38 (-0700): Back on the machine where the error occurred. This is XP Home and Eclipse 3.4.0 (vs XP Professional and Eclipse 3.4.?). I created the directory that Eclipse complained was missing: md C:\IDE\eclipse\plugins\com.caucho.resin.eclipse_4.0.0 I tried reinstalling the Resin plugin. Eclipse zipped away during installation. I started Eclipse anew and retried the installation. No crash this time. Apparent success, but nothing in the Resin plugin directory I created manually. I removed it manually. There is no Resin choice in the New Server menu either. Yet the Resin feature is listed under "Help &amp;gt; Software Updates &amp;gt; Installed Software". Uninstalling again. "Installing org.apache.oro"? I restarted Eclipse every time when prompted to do so. Last attempt to install. Success! No idea why. The filesystem path issue persists, of course. A workaround would be to move the Eclipse workspace to a path without spaces. Michael Ludwig</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Eclipse Plugin</header>
    <date>Sat Jul 04 15:03:42 CEST 2009</date>
    <body>Michael Ludwig schrieb am 13.05.2009 um 20:22:19 (+0200): http://bugs.caucho.com/view.php?id=3589 While we're at it, the startup/shutdown issue persists. So you might want to add the following to the bug entry you've created, or file a new bug: Michael Ludwig</body>
  </mail>
  <mail>
    <header>[Resin-interest] Class-loader problem?</header>
    <date>Mon Apr 13 03:28:38 CEST 2009</date>
    <body>(working against 03/18/09 snapshot of resin) It seems like there is a class-loader problem in my definition for my Queue (and I expect any global bean with an annotation class from the webapp). The first time through everything seems to work just fine, but in subsequent updates (webapp reloads) this error comes up. If I l start resin up with the app deployed, or deploy the app with it not existing yet, then things load fine. But once I have touched the resin-web.xml (or made any change causing the webapp to stop-start) of the deployed webapp then this error comes up. WEB-INF/resin-web.xml:24: java.lang.IllegalArgumentException: interface resinscratchspace.annotations.UserUpdate is not visible from class loader 26: The rssa namespace is set in the resin-xml file as a package in the classes directory of the webapp. Do these annotations need to be in the resin-dir/lib or someplace global? Thanks in advance, Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Class-loader problem?</header>
    <date>Mon Apr 13 18:15:49 CEST 2009</date>
    <body>This is a regression issue that should be fixed in the next snapshot. The exception is from the java.util.reflect.Proxy class. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Class-loader problem?</header>
    <date>Wed Apr 29 20:28:22 CEST 2009</date>
    <body>The behaviour has changed, but the problem still exists. It now just says that it can't find a registered bean. However, in walking through the code (at runtime), I can see there are valid beans in the (parent) manager. I'm guessing there is a classloader issue, and that the classes are not equal (even thought they are the same  textual name). The bindings on my field (java.util.concurrent.BlockingQueue org.subethamail.core.queue.InjectListener.outboundQueue) are: [...@org.subethamail.core.queue.deliveryqueue()] And there are two Queue(s) in the (parent) manager that look like this: @Production, name=delivery, @ApplicationScope] @Production, name=injection, @ApplicationScope] It sure seems like it should be matching the first one. Any suggestions? http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Help: Exception on simple JSF 1.1 test on Resin	2.1.13</header>
    <date>Fri Apr 10 19:45:47 CEST 2009</date>
    <body>I'm deploying a simple JSF 1.1 "Hello world" application to Resin 2.1.13 (using MyFaces 1.1.6, hosted by lunarpages.com) and I get this error when I visit the page (below). I tried putting the &amp;lt;listener&amp;gt; tag in the web.xml like it suggests, but that caused the entire webapp to die. Does anyone know what I'm doing wrong?  Any help is greatly appreciated. rh 500 Servlet Exception java.lang.IllegalStateException: No Factories configured for this Application. This happens if the faces-initialization does not work at all - make sure that you properly include all configuration settings necessary for a basic Make sure that the JSF-API (myfaces-api-xxx.jar) is not included twice on the classpath - if not, the factories might be configured in the wrong class If you use Tomcat, it might also pay off to clear your /[tomcat-installation]/work/ directory - Tomcat sometimes stumbles over its own tld-cache stored there, Also check the logging output of your web application and your container for any exceptions! fact that you use one of the very few web-containers which do not support registering context-listeners via TLD files and a context listener is not Add the following lines to your web.xml file to work around this issue at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:110) at javax.faces.webapp.FacesServlet.init(FacesServlet.java:99) at com.caucho.server.http.Application.createServlet(Application.java:3114) at com.caucho.server.http.Application.loadServlet(Application.java:3065) at com.caucho.server.http.QServletConfig.loadServlet(QServletConfig.java:435) at com.caucho.server.http.Application.getFilterChainServlet(Application.java:2809) at com.caucho.server.http.Application.buildFilterChain(Application.java:2765) at com.caucho.server.http.Invocation.service(Invocation.java:313) at com.caucho.server.http.CacheInvocation.service(CacheInvocation.java:135) at com.caucho.server.http.RunnerRequest.handleRequest(RunnerRequest.java:346) at com.caucho.server.http.RunnerRequest.handleConnection(RunnerRequest.java:274) at com.caucho.server.TcpConnection.run(TcpConnection.java:139) at java.lang.Thread.run(Thread.java:595) Resin 2.1.13 (built Thu Apr 1 10:57:42 PST 2004)</body>
  </mail>
  <mail>
    <header>[Resin-interest] where to download Resin 2.1.x ?</header>
    <date>Fri Apr 10 19:39:34 CEST 2009</date>
    <body>Hi, My web hosting provider (www.lunarpages.com) provides me JSP support with Resin 2.1.x. I'm developing a JSF application (my understanding is Resin 2.1.x supports JSF 1.1 -- please correct me if I'm wrong). So I'd like to develop to Resin 2.1.x locally on my Mac to ensure compatibility when I deploy it online. My question is, where can I download Resin 2.1.x?  On caucho.com I can see download links for Resin 3 and Resin 4, but now Resin 2. Any info is greatly appreciated! Thanks, rh</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] where to download Resin 2.1.x ?</header>
    <date>Sat Apr 11 00:27:19 CEST 2009</date>
    <body>Hi, My web hosting provider (www.lunarpages.com) provides me JSP support with Resin 2.1.x. I'm developing a JSF application (my understanding is Resin 2.1.x supports JSF 1.1 -- please correct me if I'm wrong). So I'd like to develop to Resin 2.1.x locally on my Mac to ensure compatibility when I deploy it online. My question is, where can I download Resin 2.1.x?  On caucho.com I can see download links for Resin 3 and Resin 4, but now Resin 2. http://caucho.com/download/resin-2.1.17.tar.gz We generally discourage the 2.1 versions, since they're very old. -- Scott Any info is greatly appreciated! Thanks, rh</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] where to download Resin 2.1.x ?</header>
    <date>Sat Apr 11 15:26:55 CEST 2009</date>
    <body>Thanks for that! lunarpages.com still uses Resin 2.1.16.  I've contacted their support people and apparently they have 3.1.x running on some servers so I may move to one of those if they don't charge me too much. BTW, can you recommend an affordable web hosting service that is better at keeping up with new versions of Java technologies? Thanks again, rh http://caucho.com/download/resin-2.1.17.tar.gz http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] where to download Resin 2.1.x ?</header>
    <date>Sat Apr 11 09:11:19 CEST 2009</date>
    <body>Hi! By trial and error, I could find out the following download links for 2.1.x http://www.caucho.com/download/resin-2.1.11.zip http://www.caucho.com/download/resin-2.1.17.zip but be fast with the downloads; Scott might remove them soon! ;) Cheers, Kai 2009/4/10 Robert Hume &amp;lt;rhum...@gmail.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Quercus war archives corrupted</header>
    <date>Thu Apr 09 23:22:33 CEST 2009</date>
    <body>I've tried to download the quercus.war file at http://quercus.caucho.com/ using several browsers and wget. They all seem to download a corrupted file. Is anyone else seeing this?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus war archives corrupted</header>
    <date>Fri Apr 10 19:24:31 CEST 2009</date>
    <body>http://quercus.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest Short answer is yes, not sure why. Some results of poking with curl, wget, firefox and testing the downloaded content. wget and curl both show the connection closing without getting the full download: wget snip: Connecting to quercus.caucho.com|207.44.178.4|:80... connected. HTTP request sent, awaiting response... 206 Partial Content Length: 1801281 (1.7M), 197 remaining Saving to: `quercus-3.2.1.war' curl snip: * transfer closed with 197 bytes remaining to read 99 1759k   99 1758k    0     0  47891      0  0:00:37  0:00:37 --:--:-- 396k* Closing connection #0 curl: (18) transfer closed with 197 bytes remaining to read Server is running Server: Resin/4.0.s090408 Here are hashes from the two downloads above, and one with firefox: u...@machine $ sha1sum quercus-* 2663b50c067ab91eeb68d90dbbdc637aef8d79d6  quercus-curld.war 49b3fb7c669f88899aa7c33860e334344ff3d5f5  quercus-firefox.war 49b3fb7c669f88899aa7c33860e334344ff3d5f5  quercus-wget.war Running unzip -t  (test mode) on each of those shows errors.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Issue with resin EL Variables</header>
    <date>Wed Apr 08 23:11:00 CEST 2009</date>
    <body>I am on Resin 3.1.8. I think I've found a bug, according to the docs there should be a resin property as follows: hostnameThe local hostname as returned by InetAddress When I use this in my configuration: conf/resin.conf:16: javax.el.PropertyNotFoundException: 'hostname' is an unknown bean property of 'com.caucho.server.resin.ResinELContext$ResinVar' 14: &amp;lt;!-- ********************** Logs handling Definition 15: Thanks guys. -- -jk</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Issue with resin EL Variables</header>
    <date>Thu Apr 09 00:07:07 CEST 2009</date>
    <body>Try "hostName" -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Issue with resin EL Variables</header>
    <date>Thu Apr 09 08:26:35 CEST 2009</date>
    <body>That works, thanks Scott.  Should update the docs :) http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- -jk</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin xss issue</header>
    <date>Tue Apr 07 00:26:16 CEST 2009</date>
    <body>Hi, We are currently using Resin3.0.25 and we could not pass PCI Compliance scan due to the following problem (The message below is taken from the scan results): ----------- Synopsis : The remote web server contains a Java Servlet that is affected by a cross-site scripting vulnerability. Description : The remote host is running Resin, an application server. The 'viewfile' Servlet included with the version of Resin installed on the remote host fails to sanitize user input to the 'file' parameter before including it in dynamic HTML output. An attacker may be able to leverage this issue to inject arbitrary HTML and script code into a user's browser to be executed within the security context of the affected site. Note that the affected Servlet is part of the Resin documentation, which should not be installed on production servers. See also : http://www.kb.cert.org/vuls/id/305208 http://www.securitymetrics.com/u?2ea1b70 f http://www.securitymetrics.com/u?2ea1b70f or Resin Pro version 3.1.4  / 3.0.25 or later. ------- If you try to view the following on a browser, it runs the script on our servers, causing XSS security problem (......./resin-doc/viewfile?file=SMetrics&amp;lt;script&amp;gt;alert('This is http://www.respond.com/resin-doc/viewfile?file=SMetrics his is vulnerable to XSS')&amp;lt;/script&amp;gt;&amp;gt; ). They are suggesting that we should use Resin3.0.25 and we are already using that version. Is there a way to overcome this issue without upgrading to version 3.1 or higher? Or is it possible to restrict access to /resin-doc folder? I would appreciate it a lot, if you could help me out. Thank you. Emre Durmus PRIVILEGED AND CONFIDENTIAL PLEASE NOTE: The information contained in this message is privileged and confidential, and is intended only for the use of the individual to whom it is addressed and others who have been specifically authorized to receive it. If you are not the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, or if any problems occur with transmission, please contact sender. Thank you.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin xss issue</header>
    <date>Tue Apr 07 00:52:15 CEST 2009</date>
    <body>The easiest thing is probably to delete the resin-doc folder. -Knut http://www.kb.cert.org/vuls/id/305208 http://www.securitymetrics.com/u?2ea1b70 http://www.securitymetrics.com/u?2ea1b70f http://www.respond.com/resin-doc/viewfile?file=SMetrics%3Cscript%3Ealert%28%27This+is+vulnerable+to+XSS%27%29%3C/script%3E http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin xss issue</header>
    <date>Tue Apr 07 04:09:36 CEST 2009</date>
    <body>That fixed the problem..Thank you for the quick response, I really appreciate that. ________________________________ From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Knut Forkalsrud Sent: Monday, April 06, 2009 6:50 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] resin xss issue The easiest thing is probably to delete the resin-doc folder. -Knut Hi, We are currently using Resin3.0.25 and we could not pass PCI Compliance scan due to the following problem (The message below is taken from the scan results): ----------- Synopsis : The remote web server contains a Java Servlet that is affected by a cross-site scripting vulnerability. Description : The remote host is running Resin, an application server. The 'viewfile' Servlet included with the version of Resin installed on the remote host fails to sanitize user input to the 'file' parameter before including it in dynamic HTML output. An attacker may be able to leverage this issue to inject arbitrary HTML and script code into a user's browser to be executed within the security context of the affected site. Note that the affected Servlet is part of the Resin documentation, which should not be installed on production servers. See also : http://www.kb.cert.org/vuls/id/305208 http://www.securitymetrics.com/u?2ea1b70 f http://www.securitymetrics.com/u?2ea1b70f or Resin Pro version 3.1.4  / 3.0.25 or later. ------- If you try to view the following on a browser, it runs the script on our servers, causing XSS security problem (......./resin-doc/viewfile?file=SMetrics&amp;lt;script&amp;gt;alert('This is http://www.respond.com/resin-doc/viewfile?file=SMetrics%3Cscript%3Ealer t%28%27This+is+vulnerable+to+XSS%27%29%3C/script%3E&amp;gt; ). They are suggesting that we should use Resin3.0.25 and we are already using that version. Is there a way to overcome this issue without upgrading to version 3.1 or higher? Or is it possible to restrict access to /resin-doc folder? I would appreciate it a lot, if you could help me out. Thank you. Emre Durmus PRIVILEGED AND CONFIDENTIAL PLEASE NOTE: The information contained in this message is privileged and confidential, and is intended only for the use of the individual to whom it is addressed and others who have been specifically authorized to receive it. If you are not the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, or if any problems occur with transmission, please contact sender. Thank you. P   Please consider the environment before printing this e-mail.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin xss issue</header>
    <date>Tue Apr 07 01:15:17 CEST 2009</date>
    <body>Why is resin-doc deployed to the production environment?  That sounds like a mistake, not something to patch or secure. -- Serge Knystautas PrestoSports Hi, We are currently using Resin3.0.25 and we could not pass PCI Compliance scan due to the following problem (The message below is taken from the scan results): ----------- Synopsis : The remote web server contains a Java Servlet that is affected by a cross-site scripting vulnerability. Description : The remote host is running Resin, an application server. The 'viewfile' Servlet included with the version of Resin installed on the remote host fails to sanitize user input to the 'file' parameter before including it in dynamic HTML output. An attacker may be able to leverage this issue to inject arbitrary HTML and script code into a user's browser to be executed within the security context of the affected site. Note that the affected Servlet is part of the Resin documentation, which should not be installed on production servers. See also : http://www.kb.cert.org/vuls/id/305208 http://www.securitymetrics.com/u?2ea1b70 f Solution: Upgrade to Resin or Resin Pro version 3.1.4  / 3.0.25 or later. ------- If you try to view the following on a browser, it runs the script on our servers, causing XSS security problem (......./resin-doc/ viewfile?file=SMetrics&amp;lt;script&amp;gt;alert('This is vulnerable to XSS')&amp;lt;/ script&amp;gt;). They are suggesting that we should use Resin3.0.25 and we are already using that version. Is there a way to overcome this issue without upgrading to version 3.1 or higher? Or is it possible to restrict access to /resin-doc folder? I would appreciate it a lot, if you could help me out. Thank you. Emre Durmus PRIVILEGED AND CONFIDENTIAL PLEASE NOTE: The information contained in this message is privileged and confidential, and is intended only for the use of the individual to whom it is addressed and others who have been specifically authorized to receive it. If you are not the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, or if any problems occur with transmission, please contact sender. Thank you. P   Please consider the environment before printing this e-mail.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin xss issue</header>
    <date>Tue Apr 07 04:09:30 CEST 2009</date>
    <body>Removing resin-doc folder fixed the problem. Thank you foir the quick response. ________________________________ From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Serge Knystautas Sent: Monday, April 06, 2009 7:14 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] resin xss issue Why is resin-doc deployed to the production environment?  That sounds like a mistake, not something to patch or secure. -- Serge Knystautas PrestoSports Hi, We are currently using Resin3.0.25 and we could not pass PCI Compliance scan due to the following problem (The message below is taken from the scan results): ----------- Synopsis : The remote web server contains a Java Servlet that is affected by a cross-site scripting vulnerability. Description : The remote host is running Resin, an application server. The 'viewfile' Servlet included with the version of Resin installed on the remote host fails to sanitize user input to the 'file' parameter before including it in dynamic HTML output. An attacker may be able to leverage this issue to inject arbitrary HTML and script code into a user's browser to be executed within the security context of the affected site. Note that the affected Servlet is part of the Resin documentation, which should not be installed on production servers. See also : http://www.kb.cert.org/vuls/id/305208 http://www.kb.cert.org/vuls/id/305208 http://www.securitymetrics.com/u?2ea1b70f http://www.securitymetrics.com/u?2ea1b70 f Solution: Upgrade to Resin or Resin Pro version 3.1.4  / 3.0.25 or later. ------- If you try to view the following on a browser, it runs the script on our servers, causing XSS security problem (......./resin-doc/viewfile?file=SMetrics&amp;lt;script&amp;gt;alert('This is http://www.respond.com/resin-doc/viewfile?file=SMetrics his is vulnerable to XSS')&amp;lt;/script&amp;gt;&amp;gt; ). They are suggesting that we should use Resin3.0.25 and we are already using that version. Is there a way to overcome this issue without upgrading to version 3.1 or higher? Or is it possible to restrict access to /resin-doc folder? I would appreciate it a lot, if you could help me out. Thank you. Emre Durmus PRIVILEGED AND CONFIDENTIAL PLEASE NOTE: The information contained in this message is privileged and confidential, and is intended only for the use of the individual to whom it is addressed and others who have been specifically authorized to receive it. If you are not the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, or if any problems occur with transmission, please contact sender. Thank you. P   Please consider the environment before printing this e-mail.</body>
  </mail>
  <mail>
    <header>[Resin-interest]  WSDL Equivalent for Hessian?</header>
    <date>Thu Apr 02 17:02:36 CEST 2009</date>
    <body>Is there any talk or plans for introducing a schema definition markup or technique for Hessian that would facilitate code generation of Hessian clients?  As we progress towards opening our APIs, having a set of tools that API consumers could use to construct objects in their language of choice from "Hessian Definition Language" would be a big help.  That might facilitate the spread of Hessian, too, which we are promoting to anyone we are integrating with. I recall when tinkering with the SOAP support in Resin that I could tack something like "?wsdl" on the service endpoint URL and get a WSDL returned. Doing something similar for Hessian services, like a "?hdl" would allow us to expose access without publishing and maintaining client libraries.  With the HDL, a suite of hessian2py, hessian2pojo, hessian2ruby tools would spring forth that clients could use to tie in to the services. -tyson -- View this message in context: http://www.nabble.com/WSDL-Equivalent-for-Hessian--tp22849729p22849729.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] WSDL Equivalent for Hessian?</header>
    <date>Thu Apr 02 18:01:49 CEST 2009</date>
    <body>We've talked about using Google's IDL for Hessian (I can't remember the name offhand.) So far, it hasn't come up often enough as an issue to make it a priority. -- Scott http://www.nabble.com/WSDL-Equivalent-for-Hessian--tp22849729p22849729.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Whence cometh web-jsptaglibrary_1_1.dtd?</header>
    <date>Thu Apr 02 04:57:54 CEST 2009</date>
    <body>I'm seeing this error in the logs when resin 3.2.1 is first started and a .jsp is fetched. [19:36:57.249] FINER com.caucho.xml.AbstractParser com.caucho.xml.RemoteURLException: URL ` http://java.sun.com/j2ee/dtds/web-jsptaglibrary_1_1.dtd ' was not opened because it is a remote URL.  Any URL scheme other than file: must be handled by a custom entity resolver. I can't find any reference to "web-jsptaglibrary_1_1.dtd" in the resin sources or my own webapp. I realize this is probably minor, but wanted to verify. -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Tag library issues</header>
    <date>Thu Apr 02 02:07:45 CEST 2009</date>
    <body>In trying to diagnose performance issues, I noticed some issues with my use of custom JSP tags. I have a set of tags defined in JSPs in WEB-INF/tags. I reference them in my JSP with But I see this in the logs: (com.caucho.jsp.TagFileManager) com.caucho.jsp.JspParseException: tag file '/WEB-INF/tags' must end with .tag or .tagx I also see complaints about invocation: (com.caucho.server.webapp.WebApp) real-path /test.jsp -&amp;gt; /export/home/ satdb/www/org/satdb/www/test.jsp Loading .tld files from global classpath Jsp[] uri:/test.jsp(cp:,app:/export/home/satdb/www/org/satdb/www) -&amp;gt; / export/home/satdb/www/org/satdb/www/test.jsp (com.caucho.loader.DynamicClassLoader) DynamicClassLoader[] adding loader SimpleLoader[/export/home/satdb/www/org/satdb/www/WEB-INF/work] (com.caucho.make.ClassDependency) java.lang.ClassNotFoundException: _jsp._WEB_22dINF._tags._base__tag in EnvironmentClassLoader[web-app: http://default ] But it does seem to get invoked in the end. Also, unrelated to tags, I see this: (com.caucho.loader.JarListLoader) tools.jar does not exist (path=/usr/ local/java/versions/jdk1.6.0_12/jre/lib/tools.jar) (com.caucho.loader.DynamicClassLoader) DynamicClassLoader[JarLoader[[]]] skipping duplicate URL file:/usr/ local/java/versions/jdk1.6.0_12/lib/tools.jar Now, I think I may have a wonky Java installation. I don't have tools.jar in "/usr/local/java/versions/jdk1.6.0_12/jre/lib", but I DO have one in "/usr/local/java/versions/jdk1.6.0_12/lib", which the second line above says it's skipping. Anyone know what's up with this? Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Debugging 404 errors</header>
    <date>Wed Apr 01 23:12:24 CEST 2009</date>
    <body>I just can't seem to get a handle on my resin installations. All sorts of wacky problems that differ by which machine I have installed. At this point, I have two installations, one on Nexenta OS (OpenSolaris) and one on Mac OS X. Resin 3.2.1 I have the resin-admin app configured like this: Administration application /resin-admin When I try to fetch /resin-admin, though, I get 404. resin.root = /Library/Resin/Root and in there, I have the doc/admin dir. Is there a way to see where it's really trying to find the admin app? Is there some other config I need to set? Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Authentication against LDAP with SSHA-encrypted	passwords ?</header>
    <date>Tue Mar 31 17:26:45 CEST 2009</date>
    <body>Hi, I am wondering if Resin Pro 3.1.8 can authenticate natively, ie. without writing any Java code, against a LDAP that stores user passwords encrypted  with SSHA ? (Sun Directory, OpenDS) I am trying to get that sort of auth working but to no avail, and thought it might be the reason. If not, what would you suggest ? Write a custom Authenticator class ? Thanks in advance for any answer or hint. Regards, -- Laurent</body>
  </mail>
  <mail>
    <header>[Resin-interest] Remoting without XML service declarations</header>
    <date>Tue Mar 31 10:32:07 CEST 2009</date>
    <body>Is it possible to expose EJBs (or POJOs) as remote-able objects without declaring them in XML (ie, resin-web.xml)?  The Resin Remoting docs ( http://caucho.com/resin/doc/resin-remoting.xtp ) make it look like I must declare a &amp;lt;servlet-mapping&amp;gt; for every bean I wish to expose.  Is there an annotation I can declare on my beans that will have the same effect? Are there any future plans to make J2EE-style InitialContext remote JNDI lookups work? Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remoting without XML service declarations</header>
    <date>Tue Mar 31 20:10:16 CEST 2009</date>
    <body>http://caucho.com/resin/doc/resin-remoting.xtp ) make it look Hmm.  It might be possible to use the new Servlet 3.0 annotations for that purpose (we haven't implemented it yet.) The original idea was that exposed URLs shouldn't generally be automatic.  In other words, having a class in a jar automatically listen to a URL as a servlet or a remote bean might be a security risk.  Basically, the same reason why /servlets/* is discouraged. That should already exist with the &amp;lt;remote-client&amp;gt; tag.  You do need to declare the remote services that you're using. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remoting without XML service declarations</header>
    <date>Tue Mar 31 20:48:25 CEST 2009</date>
    <body>Right... I just want to be able to define those URLs without resorting to XML.  The @ServletMapping annotation seems useful but you would still need something to define the protocol. As long as we're discussing wishes, I'd also like to be able to put the RMI-type protocols on a different port so that there is no chance of accidentally exposing anything :-) For now we will use the XML. But this is still within a running Resin container, right?  Is there a way to make this work with a standalone client? Thanks, Jeff</body>
  </mail>
  <mail>
    <header>[Resin-interest] Amber (JPA) Table Indexes</header>
    <date>Tue Mar 31 02:46:10 CEST 2009</date>
    <body>Is there a way to hint to Amber that a column should be indexed? For example we will be doing a lot of queries like this: "Select u from User where u.isActive == true ..." And it would be nice if the isActive column is indexed. Thanks in advance, Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Amber (JPA) Table Indexes</header>
    <date>Tue Mar 31 09:44:36 CEST 2009</date>
    <body>Isn't that something one would do at the database level? D. Scott Hernandez escribió:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Amber (JPA) Table Indexes</header>
    <date>Tue Mar 31 10:24:53 CEST 2009</date>
    <body>Hibernate lets you add a @Index to entities/tables for this. http://www.hibernate.org/hib_docs/annotations/reference/en/html_single/#d0e2305 Since JPA is creating, and maintaining the schema it is nice to keep that config all in one place. I would say that for serious tuning you may need to do this at the database level, but for simple things like indexes, constraints, and data validation much of this should be provided at the persistence definition level, and in the application definition (and applied where possible to the database).</body>
  </mail>
  <mail>
    <header>[Resin-interest] MBean Registration</header>
    <date>Tue Mar 31 02:32:08 CEST 2009</date>
    <body>Is there an annotation based way to register Management Beans? I know I can do this in XML, but is there an annotation, or interface that will work the same way? type="org.subethamail.core.admin.CleanupBean" Thanks in advance, Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] MBean Registration</header>
    <date>Tue Mar 31 19:58:13 CEST 2009</date>
    <body>Not currently.  It's something I've considered off and on, but never gave it a priority.  I've added the idea as http://bugs.caucho.com/view.php?id=3427 -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] 3.2.1 on Mac OS X/Darwin?</header>
    <date>Sun Mar 29 23:51:48 CEST 2009</date>
    <body>Hi. I tried to configure and make resin-3.2.1 on Mac OX X 10.5.6, but got some link errors. Is this known to build? I seem to have only 32-bit Java, according to my Java Preferences, but I'm not entirely clear: $ java -version java version "1.6.0_07" Java(TM) SE Runtime Environment (build 1.6.0_07-b06-146) Java HotSpot(TM) 64-Bit Server VM (build 1.6.0_07-b06-56, mixed mode) TIA, Rick ------ Full transcript: Eclipse:~ rmann$ cd resin-3.2.1 Eclipse:resin-3.2.1 rmann$ ls LICENSE         Makefile.in     aclocal.m4      bin/            configure* contrib/        ext-webapp- lib/    lib/            modules/        setup.exe*      win32/ Makefile.am     README          automake/       conf/           configure.ac* doc/            keys/ licenses/       resin.exe*      webapps/        win64/ Eclipse:resin-3.2.1 rmann$ ./configure checking build system type... i386-apple-darwin9.6.0 checking host system type... i386-apple-darwin9.6.0 checking target system type... i386-apple-darwin9.6.0 checking for a BSD-compatible install... /usr/bin/install -c checking whether build environment is sane... yes checking for a thread-safe mkdir -p... automake/install-sh -c -d checking for gawk... no checking for mawk... no checking for nawk... no checking for awk... awk checking whether make sets $(MAKE)... yes checking for gcc... gcc checking for C compiler default output file name... a.out checking whether the C compiler works... yes checking whether we are cross compiling... no checking for suffix of executables... checking for suffix of object files... o checking whether we are using the GNU C compiler... yes checking whether gcc accepts -g... yes checking for gcc option to accept ISO C89... none needed checking for style of include used by make... GNU checking dependency style of gcc... none checking for a sed that does not truncate output... /usr/bin/sed checking for grep that handles long lines and -e... /usr/bin/grep checking for egrep... /usr/bin/grep -E checking for ld used by gcc... /usr/libexec/gcc/i686-apple- darwin9/4.0.1/ld checking if the linker (/usr/libexec/gcc/i686-apple-darwin9/4.0.1/ld) is GNU ld... no checking for egrep... (cached) /usr/bin/grep -E checking how to run the C preprocessor... gcc -E checking for ANSI C header files... yes checking for sys/types.h... yes checking for sys/stat.h... yes checking for stdlib.h... yes checking for string.h... yes checking for memory.h... yes checking for strings.h... yes checking for inttypes.h... yes checking for stdint.h... yes checking for unistd.h... yes checking sys/poll.h usability... yes checking sys/poll.h presence... yes checking for sys/poll.h... yes checking sys/epoll.h usability... no checking sys/epoll.h presence... no checking for sys/epoll.h... no checking for /usr/libexec/gcc/i686-apple-darwin9/4.0.1/ld option to reload object files... -r checking for BSD-compatible nm... /usr/bin/nm -p checking whether ln -s works... yes checking how to recognize dependent libraries... pass_all checking dlfcn.h usability... yes checking dlfcn.h presence... yes checking for dlfcn.h... yes checking for g++... g++ checking whether we are using the GNU C++ compiler... yes checking whether g++ accepts -g... yes checking dependency style of g++... none checking how to run the C++ preprocessor... g++ -E checking for g77... no checking for xlf... no checking for f77... no checking for frt... no checking for pgf77... no checking for cf77... no checking for fort77... no checking for fl32... no checking for af77... no checking for xlf90... no checking for f90... no checking for pgf90... no checking for pghpf... no checking for epcf90... no checking for gfortran... no checking for g95... no checking for xlf95... no checking for f95... no checking for fort... no checking for ifort... no checking for ifc... no checking for efc... no checking for pgf95... no checking for lf95... no checking for ftn... no checking whether we are using the GNU Fortran 77 compiler... no checking whether  accepts -g... no checking the maximum length of command line arguments... 196608 checking command to parse /usr/bin/nm -p output from gcc object... rm: conftest.dSYM: is a directory ok checking for objdir... .libs checking for ar... ar checking for ranlib... ranlib checking for strip... strip checking for dsymutil... dsymutil checking for nmedit... nmedit checking for -single_module linker flag... yes checking for -exported_symbols_list linker flag... yes rm: conftest.dSYM: is a directory checking if gcc supports -fno-rtti -fno-exceptions... no checking for gcc option to produce PIC... -fno-common checking if gcc PIC flag -fno-common works... yes checking if gcc static flag -static works... no checking if gcc supports -c -o file.o... yes checking whether the gcc linker (/usr/libexec/gcc/i686-apple- darwin9/4.0.1/ld) supports shared libraries... yes checking dynamic linker characteristics... darwin9.6.0 dyld checking how to hardcode library paths into programs... immediate checking whether stripping libraries is possible... yes checking if libtool supports shared libraries... yes checking whether to build shared libraries... yes checking whether to build static libraries... yes configure: creating libtool appending configuration tag "CXX" to libtool checking for ld used by g++... /usr/libexec/gcc/i686-apple- darwin9/4.0.1/ld checking if the linker (/usr/libexec/gcc/i686-apple-darwin9/4.0.1/ld) is GNU ld... no checking whether the g++ linker (/usr/libexec/gcc/i686-apple- darwin9/4.0.1/ld) supports shared libraries... yes checking for g++ option to produce PIC... -fno-common checking if g++ PIC flag -fno-common works... yes checking if g++ static flag -static works... no checking if g++ supports -c -o file.o... yes checking whether the g++ linker (/usr/libexec/gcc/i686-apple- darwin9/4.0.1/ld) supports shared libraries... yes checking dynamic linker characteristics... darwin9.6.0 dyld (cached) (cached) checking how to hardcode library paths into programs... immediate appending configuration tag "F77" to libtool Using shared library flags from /usr/sbin/apxs checking for JAVA_HOME... /System/Library/Frameworks/JavaVM.framework/ Versions/1.6/Home -n checking if Java is 64-bit... yes Using Apache CFLAGS:   -DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK -no-cpp- precomp checking for JNI in /System/Library/Frameworks/JavaVM.framework/ Versions/1.6/Home/include ... found Using JVMTI for class reloading Using openssl include in ... /usr/include Using openssl lib in ... /usr/lib Using openssl libraries in ...  -lssl -lcrypto configure: creating ./config.status config.status: creating Makefile config.status: creating modules/c/src/Makefile config.status: creating modules/c/src/common/Makefile config.status: creating modules/c/src/apache2/Makefile config.status: creating modules/c/src/resin_os/Makefile config.status: executing depfiles commands Eclipse:resin-3.2.1 rmann$ make (cd modules/c/src; make) for dir in common resin_os  ; do (cd $dir; make); done gcc -c -I/usr/include -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 - D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 - DHAS_SOCK_TIMEOUT -DHAS_JVMTI stream.c gcc -c -I/usr/include -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 - D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 - DHAS_SOCK_TIMEOUT -DHAS_JVMTI config.c gcc -c -I/usr/include -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 - D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 - DHAS_SOCK_TIMEOUT -DHAS_JVMTI memory.c gcc -r -o common.o stream.o config.o memory.o /Users/rmann/resin-3.2.1/libtool --silent --mode=compile gcc -o stream.lo -c -I/usr/include -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS - DB64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 - DHAS_SOCK_TIMEOUT -DHAS_JVMTI stream.c /Users/rmann/resin-3.2.1/libtool --silent --mode=compile gcc -o config.lo -c -I/usr/include -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS - DB64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 - DHAS_SOCK_TIMEOUT -DHAS_JVMTI config.c /Users/rmann/resin-3.2.1/libtool --silent --mode=compile gcc -o memory.lo -c -I/usr/include -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS - DB64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 - DHAS_SOCK_TIMEOUT -DHAS_JVMTI memory.c gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -DHAS_SOCK_TIMEOUT - DHAS_JVMTI  -m64 -D_FILE_OFFSET_BITS=64 -DRESIN_HOME=\"/Users/rmann/ resin-3.2.1\" -I/usr/include -I/System/Library/Frameworks/ JavaVM.framework/Versions/1.6/Home/include -I../common -DCPU=\"i386\" - DOS=   -c -o boot.o boot.c gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -DHAS_SOCK_TIMEOUT - DHAS_JVMTI  -m64 -D_FILE_OFFSET_BITS=64 -DRESIN_HOME=\"/Users/rmann/ resin-3.2.1\" -I/usr/include -I/System/Library/Frameworks/ JavaVM.framework/Versions/1.6/Home/include -I../common -DCPU=\"i386\" - DOS=   -c -o java.o java.c gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -DHAS_SOCK_TIMEOUT - DHAS_JVMTI  -m64 -D_FILE_OFFSET_BITS=64 -DRESIN_HOME=\"/Users/rmann/ resin-3.2.1\" -I/usr/include -I/System/Library/Frameworks/ JavaVM.framework/Versions/1.6/Home/include -I../common -DCPU=\"i386\" - DOS=   -c -o jni_os.o jni_os.c gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -DHAS_SOCK_TIMEOUT - DHAS_JVMTI  -m64 -D_FILE_OFFSET_BITS=64 -DRESIN_HOME=\"/Users/rmann/ resin-3.2.1\" -I/usr/include -I/System/Library/Frameworks/ JavaVM.framework/Versions/1.6/Home/include -I../common -DCPU=\"i386\" - DOS=   -c -o jni_jvmti.o jni_jvmti.c gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -DHAS_SOCK_TIMEOUT - DHAS_JVMTI  -m64 -D_FILE_OFFSET_BITS=64 -DRESIN_HOME=\"/Users/rmann/ resin-3.2.1\" -I/usr/include -I/System/Library/Frameworks/ JavaVM.framework/Versions/1.6/Home/include -I../common -DCPU=\"i386\" - DOS=   -c -o jni_jvmdi.o jni_jvmdi.c gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -DHAS_SOCK_TIMEOUT - DHAS_JVMTI  -m64 -D_FILE_OFFSET_BITS=64 -DRESIN_HOME=\"/Users/rmann/ resin-3.2.1\" -I/usr/include -I/System/Library/Frameworks/ JavaVM.framework/Versions/1.6/Home/include -I../common -DCPU=\"i386\" - DOS=   -c -o jni_socket.o jni_socket.c gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -DHAS_SOCK_TIMEOUT - DHAS_JVMTI  -m64 -D_FILE_OFFSET_BITS=64 -DRESIN_HOME=\"/Users/rmann/ resin-3.2.1\" -I/usr/include -I/System/Library/Frameworks/ JavaVM.framework/Versions/1.6/Home/include -I../common -DCPU=\"i386\" - DOS=   -c -o memory.o memory.c gcc -g -O2 -DPOLL -D_POSIX_PTHREAD_SEMANTICS -DB64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -DHAS_SOCK_TIMEOUT - DHAS_JVMTI  -m64 -D_FILE_OFFSET_BITS=64 -DRESIN_HOME=\"/Users/rmann/ resin-3.2.1\" -I/usr/include -I/System/Library/Frameworks/ JavaVM.framework/Versions/1.6/Home/include -I../common -DCPU=\"i386\" - DOS=   -c -o std.o std.c gcc -bundle -undefined suppress -flat_namespace -L/usr/lib -framework JavaVM -o libresin_os.jnilib boot.o java.o jni_os.o jni_jvmti.o jni_jvmdi.o jni_socket.o memory.o std.o ld warning: in boot.o, file is not of required architecture ld warning: in java.o, file is not of required architecture ld warning: in jni_os.o, file is not of required architecture ld warning: in jni_jvmti.o, file is not of required architecture ld warning: in jni_jvmdi.o, file is not of required architecture ld warning: in jni_socket.o, file is not of required architecture ld warning: in memory.o, file is not of required architecture ld warning: in std.o, file is not of required architecture -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.2.1 on Mac OS X/Darwin?</header>
    <date>Mon Mar 30 01:35:52 CEST 2009</date>
    <body>I compiled the pro and open source version of resin321 on macos 10.5.6 last week and it worked with no problem on java 1.5 Any reason to use java 1.6 ? -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.2.1 on Mac OS X/Darwin?</header>
    <date>Mon Mar 30 05:38:00 CEST 2009</date>
    <body>Well, it's what I got. I guess I should try with 1.5. http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.2.1 on Mac OS X/Darwin?</header>
    <date>Mon Mar 30 23:14:53 CEST 2009</date>
    <body>I tried switching back to Java 1.5, and continue to get the same errors. I wonder what's going on. I wish ld was a little more informative about the architecture issues.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.2.1 on Mac OS X/Darwin?</header>
    <date>Tue Mar 31 00:04:54 CEST 2009</date>
    <body>Hi Rick, Check your JAVA_HOME environment variable and make sure it matches up with the version of java in your path.  If it doesn't, try setting your PATH to JAVA_HOME/bin:$PATH to ensure that the configure script and make are getting the same version. I'm not sure if this is the recommended Mac OS X way of specifying your JAVA_HOME, but I've got mine set to /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin-admin in 3.2.1. Pro feature only?</header>
    <date>Sun Mar 29 23:39:47 CEST 2009</date>
    <body>Hi. When I first installed resin on my new machine, I could swear I had access to resin-admin. Now, it just gives me 404 errors. Near as I can tell it's configured. Should I be able to access it (resin open-source). TIA, -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin-admin in 3.2.1. Pro feature only?</header>
    <date>Mon Mar 30 18:27:48 CEST 2009</date>
    <body>resin-admin is in both open source and pro.  It has a specific &amp;lt;web- app&amp;gt; in the default resin.xml.  The location of the web-app is config file might cause problems. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Docs for &amp;lt;resin:message&amp;gt;</header>
    <date>Sun Mar 29 23:33:51 CEST 2009</date>
    <body>I can't find documentation for this tag anywhere on the caucho site. There is one example, that doesn't show anything. I want to find a way to set the severity of the message. -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] all my requested are limited with 3.2.1</header>
    <date>Sun Mar 29 01:22:56 CET 2009</date>
    <body>Hello I have a problem with all my ejb requests in resin pro 3.2.1 When I execute this : I have the good result (starts at numstart, and get numcnt items) But when I do not set the limits : I have only 32 results whatever you have in the database. This appeared only from 3,2,1 because I do not have this problem with 3.2.0. Am I doing something wrong ? Thanks for any help. PS: I went to 3.2.1 because I had problems with scheduled-task in 3,2.0 -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] all my requested are limited with 3.2.1</header>
    <date>Mon Mar 30 18:31:50 CEST 2009</date>
    <body>I've filed this as http://bugs.caucho.com/view.php?id=3424 The 32 comes from an internal cache, but that cache should be invisible to any users. -- Scott http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] all my requested are limited with 3.2.1</header>
    <date>Tue Mar 31 08:02:36 CEST 2009</date>
    <body>Thanks a lot. If you know any workaround I'll be glad to apply it, because I'm using 3.2.1 in 2 applications that will soon be in production. http://bugs.caucho.com/view.php?id=3424 http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>[Resin-interest] Question about JEE Containers</header>
    <date>Fri Mar 27 16:57:31 CET 2009</date>
    <body>Caucho, et. al, I've been looking through the relevant specs, but can't find anything, so I figured I'd ask here. When a war file is unpacked to create the deployment directory, does the spec say anything about whether dates of the files in the archive are supposed to be preserved? Any info would be much appreciated. Thanks, -- Matt Pangaro Lokitech &amp;gt;&amp;gt; software . strategy . design http://www.lokitech.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about JEE Containers</header>
    <date>Fri Mar 27 17:23:36 CET 2009</date>
    <body>Hmm.  Not that I know of.  Resin doesn't preserve the dates, but it would be something we could add fairly easily. -- Scott http://www.lokitech.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about JEE Containers</header>
    <date>Fri Mar 27 17:59:41 CET 2009</date>
    <body>Hmm back. At least in my Windows development environment, with Resin Pro 3.0.x, when I drop a war file, the dates of all the files in the resulting webapps/foo dir are the same as the dates of the entries in webapps/foo.war. That's actually what drove the question. I'm used to that behavior from Resin, and in another app server all the exploded files were getting the time of the expansion for their modified dates. Either way, it sounds like either behavior is allowed, since the specs don't speak to it. Thanks, Matt</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about JEE Containers</header>
    <date>Fri Mar 27 22:26:25 CET 2009</date>
    <body>Oh. I'd forgotten that we'd done that.  I'm pretty sure that's outside the spec, so you can't rely on it. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about JEE Containers</header>
    <date>Sun Mar 29 05:08:04 CEST 2009</date>
    <body>Yeah, from some quick testing, Tomcat 6 did keep dates, but Glassfish V3 does not. As you say, certainly not something I can depend on. It complicates the clustered deployment of something like a JNLP app, but really any form of caching that uses the timestamp of the resource to determine whether it's current. Thanks for the follow-up. Matt</body>
  </mail>
  <mail>
    <header>[Resin-interest] Recompilation of jsp on every request for the same	page</header>
    <date>Fri Mar 27 12:31:03 CET 2009</date>
    <body>Hi All, Resin compiles the jsp page and its included tags every time that jsp page is clicked. Shouldn't Resin compile the JSP page only after first click? After the changing the log level of resin to fine it shows following stack trace. _jsp._web_22dinf._tags._template.&amp;lt;b&amp;gt;_mainnavigation__tag&amp;lt;/b&amp;gt; digest is modified (&amp;lt;b&amp;gt;old=-5390068824210296648,new=-1&amp;lt;/b&amp;gt;) _jsp._web_22dinf._tags._shop._searchbox__tag in EnvironmentClassLoader[web-app:http:// localhost:8080/web] com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1291) com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1269) java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) java.lang.Class.forName0(Native Method) java.lang.Class.forName(Class.java:247) com.caucho.make.ClassDependency.&amp;lt;init&amp;gt;(ClassDependency.java:83) _jsp._web_22dinf._jsp._shop._homepage._homepage__jsp.init(&amp;lt;b&amp;gt;_homepage__jsp.java:693&amp;lt;/b&amp;gt;) com.caucho.jsp.JspManager.preload(JspManager.java:320) com.caucho.jsp.JspManager.compile(JspManager.java:218) com.caucho.jsp.JspManager.createPage(JspManager.java:171) com.caucho.jsp.JspManager.createPage(JspManager.java:150) com.caucho.jsp.PageManager.getPage(PageManager.java:307) com.caucho.jsp.PageManager.getPage(PageManager.java:237) com.caucho.jsp.PageManager.getPage(PageManager.java:220) com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) com.caucho.jsp.QServlet.getPage(QServlet.java:210) com.caucho.server.dispatch.PageFilterChain.compilePage(PageFilterChain.java:238) com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:145) Same error as below can be observed for all included tags. Can experts here tell why this is happening and how can it be fixed. Best Regards</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Recompilation of jsp on every request for the	same page</header>
    <date>Fri Mar 27 23:48:30 CET 2009</date>
    <body>Hi All, Resin compiles the jsp page and its included tags every time that jsp page is clicked. Shouldn't Resin compile the JSP page only after first click? After the changing the log level of resin to fine it shows following stack trace. _jsp._web_22dinf._tags._template.&amp;lt;b&amp;gt;_mainnavigation__tag&amp;lt;/b&amp;gt; digest is modified (&amp;lt;b&amp;gt;old=-5390068824210296648,new=-1&amp;lt;/b&amp;gt;) java.lang.ClassNotFoundException: Can you turn on "fine" or "finer" logging? That "digest is modified" indicates that Resin can't load the tag class for some reason (so the calculated digest is -1). -- Scott _jsp._web_22dinf._tags._shop._searchbox__tag in EnvironmentClassLoader[web-app:http:// localhost:8080/web] com .caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java: 1291) com .caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java: 1269) java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) java.lang.Class.forName0(Native Method) java.lang.Class.forName(Class.java:247) com.caucho.make.ClassDependency.&amp;lt;init&amp;gt;(ClassDependency.java:83) _jsp ._web_22dinf ._jsp._shop._homepage._homepage__jsp.init(&amp;lt;b&amp;gt;_homepage__jsp.java: 693&amp;lt;/b&amp;gt;) com.caucho.jsp.JspManager.preload(JspManager.java:320) com.caucho.jsp.JspManager.compile(JspManager.java:218) com.caucho.jsp.JspManager.createPage(JspManager.java:171) com.caucho.jsp.JspManager.createPage(JspManager.java:150) com.caucho.jsp.PageManager.getPage(PageManager.java:307) com.caucho.jsp.PageManager.getPage(PageManager.java:237) com.caucho.jsp.PageManager.getPage(PageManager.java:220) com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) com.caucho.jsp.QServlet.getPage(QServlet.java:210) com .caucho .server.dispatch.PageFilterChain.compilePage(PageFilterChain.java:238) com .caucho .server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:145) Same error as below can be observed for all included tags. Can experts here tell why this is happening and how can it be fixed. Best Regards</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Recompilation of jsp on every request for the	same page</header>
    <date>Mon Mar 30 10:19:15 CEST 2009</date>
    <body>Hi Scott, Thanks for the reply. Level was "fine" now I have changed it to "finer". After this change, no additional information was logged except for some tags entire source code was printed out in the log file. Any guess why resin cannot load already compiled tag class? Best Regards Prasad --- Scott Ferguson &amp;lt;f...@caucho.com&amp;gt; schrieb am Fr, 27.3.2009: Betreff: Re: [Resin-interest] Recompilation of jsp on every request for the same page An: "General Discussion for the Resin application server" Datum: Freitag, 27. März 2009, 18:46 Hi All, Resin compiles the jsp page and its included tags every time that jsp page is clicked. Shouldn't Resin compile the JSP page only after first click? After the changing the log level of resin to fine it shows following stack trace. _jsp._web_22dinf._tags._template.&amp;lt;b&amp;gt;_mainnavigation__tag&amp;lt;/b&amp;gt; digest is modified (&amp;lt;b&amp;gt;old=-5390068824210296648,new=-1&amp;lt;/b&amp;gt;) Can you turn on "fine" or "finer" logging? That "digest is modified" indicates that Resin can't load the tag class for some reason (so the calculated digest is -1). -- Scott _jsp._web_22dinf._tags._shop._searchbox__tag in EnvironmentClassLoader[web-app:http:// localhost:8080/web] com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1291) com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1269) java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) java.lang.Class.forName0(Native Method) java.lang.Class.forName(Class.java:247) com.caucho.make.ClassDependency.&amp;lt;init&amp;gt;(ClassDependency.java:83) _jsp._web_22dinf._jsp._shop._homepage._homepage__jsp.init(&amp;lt;b&amp;gt;_homepage__jsp.java:693&amp;lt;/b&amp;gt;) com.caucho.jsp.JspManager.preload(JspManager.java:320) com.caucho.jsp.JspManager.compile(JspManager.java:218) com.caucho.jsp.JspManager.createPage(JspManager.java:171) com.caucho.jsp.JspManager.createPage(JspManager.java:150) com.caucho.jsp.PageManager.getPage(PageManager.java:307) com.caucho.jsp.PageManager.getPage(PageManager.java:237) com.caucho.jsp.PageManager.getPage(PageManager.java:220) com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) com.caucho.jsp.QServlet.getPage(QServlet.java:210) com.caucho.server.dispatch.PageFilterChain.compilePage(PageFilterChain.java:238) com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:145) Same error as below can be observed for all included tags. Can experts here tell why this is happening and how can it be fixed. Best Regards</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Recompilation of jsp on every request for the	same page</header>
    <date>Mon Mar 30 18:08:44 CEST 2009</date>
    <body>Using 3.2.1 produces same error. Is it 3.2.x specific issue? Best Regards Prasad --- Prasad Chaudhari &amp;lt;herrpra...@yahoo.com&amp;gt; schrieb am Mo, 30.3.2009: Betreff: Re: [Resin-interest] Recompilation of jsp on every request for the same page An: "General Discussion for the Resin application server" Datum: Montag, 30. März 2009, 4:18 Hi Scott, Thanks for the reply. Level was "fine" now I have changed it to "finer". After this change, no additional information was logged except for some tags entire source code was printed out in the log file. Any guess why resin cannot load already compiled tag class? Best Regards Prasad --- Scott Ferguson &amp;lt;f...@caucho.com&amp;gt; schrieb am Fr, 27.3.2009: Betreff: Re: [Resin-interest] Recompilation of jsp on every request for the same page An: "General Discussion for the Resin application server" Datum: Freitag, 27. März 2009, 18:46 On Mar Hi All, Resin compiles the jsp page and its included tags every time that jsp page is clicked. Shouldn't Resin compile the JSP page only after first click? After the changing the log level of resin to fine it shows following stack trace. _jsp._web_22dinf._tags._template.&amp;lt;b&amp;gt;_mainnavigation__tag&amp;lt;/b&amp;gt; digest is modified (&amp;lt;b&amp;gt;old=-5390068824210296648,new=-1&amp;lt;/b&amp;gt;) Can you turn on "fine" or "finer" logging? That "digest is modified" indicates that Resin can't load the tag class for some reason (so the calculated digest is -1). -- Scott _jsp._web_22dinf._tags._shop._searchbox__tag in EnvironmentClassLoader[web-app:http:// localhost:8080/web] com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1291) com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1269) java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) java.lang.Class.forName0(Native Method) java.lang.Class.forName(Class.java:247) com.caucho.make.ClassDependency.&amp;lt;init&amp;gt;(ClassDependency.java:83) _jsp._web_22dinf._jsp._shop._homepage._homepage__jsp.init(&amp;lt;b&amp;gt;_homepage__jsp.java:693&amp;lt;/b&amp;gt;) com.caucho.jsp.JspManager.preload(JspManager.java:320) com.caucho.jsp.JspManager.compile(JspManager.java:218) com.caucho.jsp.JspManager.createPage(JspManager.java:171) com.caucho.jsp.JspManager.createPage(JspManager.java:150) com.caucho.jsp.PageManager.getPage(PageManager.java:307) com.caucho.jsp.PageManager.getPage(PageManager.java:237) com.caucho.jsp.PageManager.getPage(PageManager.java:220) com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) com.caucho.jsp.QServlet.getPage(QServlet.java:210) com.caucho.server.dispatch.PageFilterChain.compilePage(PageFilterChain.java:238) com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:145) Same error as below can be observed for all included tags. Can experts here tell why this is happening and how can it be fixed. Best Regards</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Recompilation of jsp on every request for the	same page</header>
    <date>Mon Mar 30 18:18:47 CEST 2009</date>
    <body>Hi Scott, Thanks for the reply. Level was "fine" now I have changed it to "finer". After this change, no additional information was logged except for some tags entire source code was printed out in the log file. Any guess why resin cannot load already compiled tag class? Can you double check all the permissions, including all the parent directory permissions? The -1 implies that Resin can't load the class at all. -- Scott Best Regards Prasad --- Scott Ferguson &amp;lt;f...@caucho.com&amp;gt; schrieb am Fr, 27.3.2009: Betreff: Re: [Resin-interest] Recompilation of jsp on every request for the same page An: "General Discussion for the Resin application server" &amp;lt;resin-interest@caucho.com Datum: Freitag, 27. März 2009, 18:46 Hi All, Resin compiles the jsp page and its included tags every time that jsp page is clicked. Shouldn't Resin compile the JSP page only after first click? After the changing the log level of resin to fine it shows following stack trace. _jsp._web_22dinf._tags._template.&amp;lt;b&amp;gt;_mainnavigation__tag&amp;lt;/b&amp;gt; digest is modified (&amp;lt;b&amp;gt;old=-5390068824210296648,new=-1&amp;lt;/b&amp;gt;) java.lang.ClassNotFoundException: Can you turn on "fine" or "finer" logging? That "digest is modified" indicates that Resin can't load the tag class for some reason (so the calculated digest is -1). -- Scott _jsp._web_22dinf._tags._shop._searchbox__tag in EnvironmentClassLoader[web-app:http:// localhost:8080/web] com .caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java: 1291) com .caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java: 1269) java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) java.lang.Class.forName0(Native Method) java.lang.Class.forName(Class.java:247) com.caucho.make.ClassDependency.&amp;lt;init&amp;gt;(ClassDependency.java:83) _jsp ._web_22dinf ._jsp._shop._homepage._homepage__jsp.init(&amp;lt;b&amp;gt;_homepage__jsp.java: 693&amp;lt;/b&amp;gt;) com.caucho.jsp.JspManager.preload(JspManager.java:320) com.caucho.jsp.JspManager.compile(JspManager.java:218) com.caucho.jsp.JspManager.createPage(JspManager.java:171) com.caucho.jsp.JspManager.createPage(JspManager.java:150) com.caucho.jsp.PageManager.getPage(PageManager.java:307) com.caucho.jsp.PageManager.getPage(PageManager.java:237) com.caucho.jsp.PageManager.getPage(PageManager.java:220) com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) com.caucho.jsp.QServlet.getPage(QServlet.java:210) com .caucho .server.dispatch.PageFilterChain.compilePage(PageFilterChain.java: 238) com .caucho .server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:145) Same error as below can be observed for all included tags. Can experts here tell why this is happening and how can it be fixed. Best Regards</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Recompilation of jsp on every request for the	same page</header>
    <date>Tue Mar 31 09:26:47 CEST 2009</date>
    <body>I do not see it as a permissions issue. I use windows XP and resin can write to that directory as it everytime compiles classes(jsps and tags) to the directory (work). I have tried it with Resin 3.2.1 as well, same result. Some additional info. Resin is configured so that document-directory is a different location than resin home. Please see below the lines from resin.xml document-directory="D:/work/branches/web-projects/target/project-name" startup-mode="automatic"&amp;gt;    Best Regards Prasad --- Scott Ferguson &amp;lt;f...@caucho.com&amp;gt; schrieb am Mo, 30.3.2009: Betreff: Re: [Resin-interest] Recompilation of jsp on every request for the same page An: "General Discussion for the Resin application server" Datum: Montag, 30. März 2009, 12:17 Hi Scott, Thanks for the reply. Level was "fine" now I have changed it to "finer". After this change, no additional information was logged except for some tags entire source code was printed out in the log file. Any guess why resin cannot load already compiled tag class? Can you double check all the permissions, including all the parent directory permissions? The -1 implies that Resin can't load the class at all. -- Scott Best Regards Prasad --- Scott Ferguson &amp;lt;f...@caucho.com&amp;gt; schrieb am Fr, 27.3.2009: Betreff: Re: [Resin-interest] Recompilation of jsp on every request for the same page An: "General Discussion for the Resin application server" Datum: Freitag, 27. März 2009, 18:46 Hi All, Resin compiles the jsp page and its included tags every time that jsp page is clicked. Shouldn't Resin compile the JSP page only after first click? After the changing the log level of resin to fine it shows following stack trace. _jsp._web_22dinf._tags._template.&amp;lt;b&amp;gt;_mainnavigation__tag&amp;lt;/b&amp;gt; digest is modified (&amp;lt;b&amp;gt;old=-5390068824210296648,new=-1&amp;lt;/b&amp;gt;) Can you turn on "fine" or "finer" logging? That "digest is modified" indicates that Resin can't load the tag class for some reason (so the calculated digest is -1). -- Scott _jsp._web_22dinf._tags._shop._searchbox__tag in EnvironmentClassLoader[web-app:http:// localhost:8080/web] com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1291) com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1269) java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) java.lang.Class.forName0(Native Method) java.lang.Class.forName(Class.java:247) com.caucho.make.ClassDependency.&amp;lt;init&amp;gt;(ClassDependency.java:83) _jsp._web_22dinf._jsp._shop._homepage._homepage__jsp.init(&amp;lt;b&amp;gt;_homepage__jsp.java:693&amp;lt;/b&amp;gt;) com.caucho.jsp.JspManager.preload(JspManager.java:320) com.caucho.jsp.JspManager.compile(JspManager.java:218) com.caucho.jsp.JspManager.createPage(JspManager.java:171) com.caucho.jsp.JspManager.createPage(JspManager.java:150) com.caucho.jsp.PageManager.getPage(PageManager.java:307) com.caucho.jsp.PageManager.getPage(PageManager.java:237) com.caucho.jsp.PageManager.getPage(PageManager.java:220) com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) com.caucho.jsp.QServlet.getPage(QServlet.java:210) com.caucho.server.dispatch.PageFilterChain.compilePage(PageFilterChain.java:238) com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:145) Same error as below can be observed for all included tags. Can experts here tell why this is happening and how can it be fixed. Best Regards</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Recompilation of jsp on every request for the	same page</header>
    <date>Wed Apr 01 10:17:56 CEST 2009</date>
    <body>We have rolled back to Resin 3.1.8 and recompilation on every request does not happen. So this bug could be related to 3.2.x versions. Regards Prasad --- Prasad Chaudhari &amp;lt;herrpra...@yahoo.com&amp;gt; schrieb am Di, 31.3.2009: Betreff: Re: [Resin-interest] Recompilation of jsp on every request for the same page An: "General Discussion for the Resin application server" Datum: Dienstag, 31. März 2009, 3:24 I do not see it as a permissions issue. I use windows XP and resin can write to that directory as it everytime compiles classes(jsps and tags) to the directory (work). I have tried it with Resin 3.2.1 as well, same result. Some additional info. Resin is configured so that document-directory is a different location than resin home. Please see below the lines from resin.xml document-directory="D:/work/branches/web-projects/target/project-name" startup-mode="automatic"&amp;gt;    Best Regards Prasad --- Scott Ferguson &amp;lt;f...@caucho.com&amp;gt; schrieb am Mo, 30.3.2009: Betreff: Re: [Resin-interest] Recompilation of jsp on every request for the same page An: "General Discussion for the Resin application server" Datum: Montag, 30. März 2009, 12:17 Hi Scott, Thanks for the reply. Level was "fine" now I have changed it to "finer". After this change, no additional information was logged except for some tags entire source code was printed out in the log file. Any guess why resin cannot load already compiled tag class? Can you double check all the permissions, including all the parent directory permissions? The -1 implies that Resin can't load the class at all. -- Scott Best Regards Prasad --- Scott Ferguson &amp;lt;f...@caucho.com&amp;gt; schrieb am Fr, 27.3.2009: Von: Scott Ferguson Betreff: Re: [Resin-interest] Recompilation of jsp on every request for the same page An: "General Discussion for the Resin application server" Datum: Freitag, 27. März 2009, 18:46 Hi All, Resin compiles the jsp page and its included tags every time that jsp page is clicked. Shouldn't Resin compile the JSP page only after first click? After the changing the log level of resin to fine it shows following stack trace. _jsp._web_22dinf._tags._template.&amp;lt;b&amp;gt;_mainnavigation__tag&amp;lt;/b&amp;gt; digest is modified (&amp;lt;b&amp;gt;old=-5390068824210296648,new=-1&amp;lt;/b&amp;gt;) Can you turn on "fine" or "finer" logging? That "digest is modified" indicates that Resin can't load the tag class for some reason (so the calculated digest is -1). -- Scott _jsp._web_22dinf._tags._shop._searchbox__tag in EnvironmentClassLoader[web-app:http:// localhost:8080/web] com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1291) com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1269) java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) java.lang.Class.forName0(Native Method) java.lang.Class.forName(Class.java:247) com.caucho.make.ClassDependency.&amp;lt;init&amp;gt;(ClassDependency.java:83) _jsp._web_22dinf._jsp._shop._homepage._homepage__jsp.init(&amp;lt;b&amp;gt;_homepage__jsp.java:693&amp;lt;/b&amp;gt;) com.caucho.jsp.JspManager.preload(JspManager.java:320) com.caucho.jsp.JspManager.compile(JspManager.java:218) com.caucho.jsp.JspManager.createPage(JspManager.java:171) com.caucho.jsp.JspManager.createPage(JspManager.java:150) com.caucho.jsp.PageManager.getPage(PageManager.java:307) com.caucho.jsp.PageManager.getPage(PageManager.java:237) com.caucho.jsp.PageManager.getPage(PageManager.java:220) com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) com.caucho.jsp.QServlet.getPage(QServlet.java:210) com.caucho.server.dispatch.PageFilterChain.compilePage(PageFilterChain.java:238) com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:145) Same error as below can be observed for all included tags. Can experts here tell why this is happening and how can it be fixed. Best Regards</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Recompilation of jsp on every request for the	same page</header>
    <date>Thu Apr 02 01:28:43 CEST 2009</date>
    <body>I'm seeing this recompiling on every request, too. Are we sure it's a 3.2.1 bug? I sure hope not :-( http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Recompilation of jsp on every request for the	same page</header>
    <date>Thu Apr 02 09:32:11 CEST 2009</date>
    <body>I think so. I have compared my resin.conf of resin 3.1.8 with resin.xml of resing 3.2.x there is no difference. In 3.2.0 changes log I find following entry. May be this bug has to do something with it classloader: scan of ext paths must only add directories and jars (#2659, rep by Brian Burke) Regards Prasad --- Rick Mann &amp;lt;rm...@latencyzero.com&amp;gt; schrieb am Mi, 1.4.2009: Betreff: Re: [Resin-interest] Recompilation of jsp on every request for the same page An: "General Discussion for the Resin application server" Datum: Mittwoch, 1. April 2009, 19:27 I'm seeing this recompiling on every request, too. Are we sure it's a 3.2.1 bug? I sure hope not :-( 31.3.2009: document-directory="D:/work/branches/web-projects/ (&amp;lt;b&amp;gt;old=-5390068824210296648,new=-1&amp;lt;/b&amp;gt;) load the tag com.caucho.make.ClassDependency.&amp;lt;init&amp;gt;(ClassDependency.java:83) ._jsp._shop._homepage._homepage__jsp.init(&amp;lt;b&amp;gt;_homepage__jsp.java: .server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:145) fixed. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Recompilation of jsp on every request for the	same page</header>
    <date>Thu Apr 02 01:56:47 CEST 2009</date>
    <body>I think I'm seeing the same thing. I made a small test.jsp to load, and its class files (in the work dir) update every request. Here is the relevant log info. The complaint about the remote URI " http://java.sun.com/j2ee/dtds/web-jsptaglibrary_1_1.dtd " repeats 10 times, then there's a bit more, and finally a message about it compiling the JSP. I see the same issues WRT the digest computation (-1). (com.caucho.server.port.TcpConnection) TcpConnection[id=0,] starting connection TcpConnection[id=http--80-0, http://*:80,ACCEPT ], total=5 (com.caucho.server.http.HttpRequest) Http[0] GET /test.jsp HTTP/1.1 (com.caucho.server.http.HttpRequest) Http[0] Remote-IP: 12.155.29.1:11594 (com.caucho.server.http.HttpRequest) Http[0] User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_5_6; en-us) AppleWebKit/528.16 (KHTML, like Gecko) Version/4.0 Safari/528.16 (com.caucho.server.http.HttpRequest) Http[0] Accept: application/ xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/ *;q=0.5 (com.caucho.server.http.HttpRequest) Http[0] Cache-Control: max-age=0 (com.caucho.server.http.HttpRequest) Http[0] Accept-Language: en-us (com.caucho.server.http.HttpRequest) Http[0] Accept-Encoding: gzip, deflate (com.caucho.server.http.HttpRequest) Http[0] Cookie: JSESSIONID=abctAYvApeMeA_JvG_Jbs (com.caucho.server.http.HttpRequest) Http[0] Connection: keep-alive (com.caucho.server.http.HttpRequest) Http[0] Host: satdb.org resin-jsp) (com.caucho.server.dispatch.ServletInvocation) Dispatch '/test.jsp' to WebAppFilterChain[ http://default , next = FilterFilterChain [org .springframework.orm.hibernate3.support.opensessioninviewfil...@fa3ce5]] (com.caucho.server.dispatch.FilterFilterChain) Dispatch HttpServletRequestImpl[HttpRequest[0]] filter = org .springframework.orm.hibernate3.support.opensessioninviewfil...@fa3ce5 next=filterfilterchain[com.latencyzero.satdb.requestfil...@b41541] (com.caucho.server.dispatch.FilterFilterChain) Dispatch HttpServletRequestImpl[HttpRequest[0]] filter=com.latencyzero.satdb.requestfil...@b41541 next=PageFilterChain[JspServlet[WebApp[ http://default ]]] (com.caucho.server.webapp.WebApp) real-path /test.jsp -&amp;gt; /export/home/ satdb/www/org/satdb/www/test.jsp Loading .tld files from global classpath Jsp[] uri:/test.jsp(cp:,app:/export/home/satdb/www/org/satdb/www) -&amp;gt; / export/home/satdb/www/org/satdb/www/test.jsp (com.caucho.loader.DynamicClassLoader) DynamicClassLoader[] adding loader SimpleLoader[/export/home/satdb/www/org/satdb/www/WEB-INF/work] (com.caucho.make.ClassDependency) java.lang.ClassNotFoundException: _jsp._WEB_22dINF._tags._base__tag in EnvironmentClassLoader[web-app: http://default ] com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java: 1297) com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java: 1275) java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320) java.lang.Class.forName0(Native Method) java.lang.Class.forName(Class.java:247) com.caucho.make.ClassDependency.&amp;lt;init&amp;gt;(ClassDependency.java:83) _jsp._test__jsp.init(_test__jsp.java:122) com.caucho.jsp.JspManager.preload(JspManager.java:320) com.caucho.jsp.JspManager.compile(JspManager.java:218) com.caucho.jsp.JspManager.createPage(JspManager.java:171) com.caucho.jsp.JspManager.createPage(JspManager.java:150) com.caucho.jsp.PageManager.getPage(PageManager.java:307) com.caucho.jsp.PageManager.getPage(PageManager.java:237) com.caucho.jsp.PageManager.getPage(PageManager.java:220) com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) com.caucho.jsp.QServlet.getPage(QServlet.java:210) com .caucho .server.dispatch.PageFilterChain.compilePage(PageFilterChain.java:238) com .caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java: 145) com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:107) com .caucho .server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) org .springframework .orm .hibernate3 .support .OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java: 198) org.springframework.web.filter.OncePerRequestFilter.doFilter (OncePerRequestFilter.java:75) com .caucho .server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) com .caucho .server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:189) com .caucho .server.dispatch.ServletInvocation.service(ServletInvocation.java:266) com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:292) com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java: 577) com.caucho.server.port.TcpConnection $AcceptTask.doAccept(TcpConnection.java:1211) com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java: 1152) $Item.runTasks(ThreadPool.java:759) $Item.run(ThreadPool.java:681) java.lang.Thread.run(Thread.java:619) (com.caucho.make.ClassDependency) _jsp._WEB_22dINF._tags._base__tag digest is modified (old=6595753468373623674,new=-1) (com.caucho.server.webapp.WebApp) real-path /WEB-INF/jsp/prefix.inc - Loading .tld files (com.caucho.server.webapp.WebApp) real-path WEB-INF -&amp;gt; /export/home/ satdb/www/org/satdb/www/WEB-INF (com.caucho.xml.AbstractParser) com.caucho.xml.RemoteURLException: URL ` http://java.sun.com/j2ee/dtds/web-jsptaglibrary_1_1.dtd ' was not opened because it is a remote URL.  Any URL scheme other than file: must be handled by a custom entity resolver. com.caucho.xml.AbstractParser.openStream(AbstractParser.java:1020) ...repeated 10 times... (com.caucho.jsp.java.JavaJspGenerator) taglib prefix=c uri: http://java.sun.com/jsp/jstl/core (com.caucho.jsp.java.JavaJspGenerator) taglib prefix=fmt uri: http://java.sun.com/jsp/jstl/fmt (com.caucho.jsp.java.JavaJspGenerator) taglib prefix=fn uri: http://java.sun.com/jsp/jstl/functions (com.caucho.server.webapp.WebApp) real-path /WEB-INF/tags -&amp;gt; /export/ home/satdb/www/org/satdb/www/WEB-INF/tags (com.caucho.jsp.TagFileManager) com.caucho.jsp.JspParseException: tag file '/WEB-INF/tags' must end with .tag or .tagx com.caucho.jsp.TagFileManager.getTag(TagFileManager.java:150) com.caucho.jsp.TagFileManager.getTag(TagFileManager.java:115) com.caucho.jsp.TagFileManager.getTag(TagFileManager.java:75) com.caucho.jsp.ParseTagManager.getTagImpl(ParseTagManager.java:100) com.caucho.jsp.ParseTagManager.getTag(ParseTagManager.java:81) com.caucho.jsp.java.JavaJspGenerator.getTag(JavaJspGenerator.java:2297) com.caucho.jsp.java.JavaJspBuilder.startElement(JavaJspBuilder.java:257) com.caucho.jsp.JspParser.parseOpenTag(JspParser.java:1329) com.caucho.jsp.JspParser.parseNode(JspParser.java:544) com.caucho.jsp.JspParser.parseJsp(JspParser.java:374) com.caucho.jsp.JspParser.parse(JspParser.java:263) com.caucho.jsp.JspCompilerInstance.parse(JspCompilerInstance.java:525) com.caucho.jsp.JspCompilerInstance.generate(JspCompilerInstance.java: 464) com.caucho.jsp.JspCompilerInstance.compile(JspCompilerInstance.java:396) com.caucho.jsp.JspManager.compile(JspManager.java:242) com.caucho.jsp.JspManager.createPage(JspManager.java:171) com.caucho.jsp.JspManager.createPage(JspManager.java:150) com.caucho.jsp.PageManager.getPage(PageManager.java:307) com.caucho.jsp.PageManager.getPage(PageManager.java:237) com.caucho.jsp.PageManager.getPage(PageManager.java:220) com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) com.caucho.jsp.QServlet.getPage(QServlet.java:210) com .caucho .server.dispatch.PageFilterChain.compilePage(PageFilterChain.java:238) com .caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java: 145) com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:107) com .caucho .server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) org .springframework .orm .hibernate3 .support .OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java: 198) org.springframework.web.filter.OncePerRequestFilter.doFilter (OncePerRequestFilter.java:75) com .caucho .server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) com .caucho .server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:189) com .caucho .server.dispatch.ServletInvocation.service(ServletInvocation.java:266) com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:292) com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java: 577) com.caucho.server.port.TcpConnection $AcceptTask.doAccept(TcpConnection.java:1211) com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java: 1152) $Item.runTasks(ThreadPool.java:759) $Item.run(ThreadPool.java:681) java.lang.Thread.run(Thread.java:619) (com.caucho.server.webapp.WebApp) real-path /WEB-INF/tags/base.tag -&amp;gt; / export/home/satdb/www/org/satdb/www/WEB-INF/tags/base.tag (com.caucho.loader.DynamicClassLoader) DynamicClassLoader[] adding loader SimpleLoader[/export/home/satdb/www/org/satdb/www/WEB-INF/work] (com.caucho.loader.DynamicClassLoader) DynamicClassLoader[] adding loader SimpleLoader[/export/home/satdb/www/org/satdb/www/WEB-INF/work] (com.caucho.java.JavaCompiler) Compiling _jsp/_test__jsp.java (com.caucho.loader.DynamicClassLoader) DynamicClassLoader[] adding loader JarLoader[[]] (com.caucho.loader.JarListLoader) tools.jar does not exist (path=/usr/ local/java/versions/jdk1.6.0_12/jre/lib/tools.jar) (com.caucho.loader.DynamicClassLoader) DynamicClassLoader[JarLoader[[]]] skipping duplicate URL file:/usr/ local/java/versions/jdk1.6.0_12/lib/tools.jar (com.caucho.java.InternalCompiler) javac(int) -d /export/home/satdb/ www/org/satdb/www/WEB-INF/work -classpath /export/home/satdb/www/org/ satdb/www/WEB-INF/work:/usr/local/resin/current/lib/resin.jar:/usr/ local/java/versions/jdk1.6.0_12/lib/tools.jar:/usr/local/resin/current/ lib/osgi-14.jar:/usr/local/resin/current/lib/webutil.jar:/usr/local/ resin/current/lib/jsf-12.jar:/usr/local/resin/current/lib/ javaee-16.jar:/usr/local/resin/current/lib/activation.jar:/usr/local/ resin/current/lib/jaxstream-15.jar:/usr/local/resin/current/lib/ javamail-141.jar:/usr/local/java/versions/jdk1.6.0_12/jre/lib/ resources.jar:/usr/local/java/versions/jdk1.6.0_12/jre/lib/rt.jar:/usr/ local/java/versions/jdk1.6.0_12/jre/lib/jsse.jar:/usr/local/java/ versions/jdk1.6.0_12/jre/lib/jce.jar:/usr/local/java/versions/ jdk1.6.0_12/jre/lib/charsets.jar:/usr/local/resin/versions/resin-3.2.1/ lib/resin.jar:/usr/local/java/versions/jdk1.6.0_12/lib/tools.jar:/usr/ local/resin/versions/resin-3.2.1/lib/osgi-14.jar:/usr/local/resin/ versions/resin-3.2.1/lib/webutil.jar:/usr/local/resin/versions/ resin-3.2.1/lib/jsf-12.jar:/usr/local/resin/versions/resin-3.2.1/lib/ javaee-16.jar:/usr/local/resin/versions/resin-3.2.1/lib/ activation.jar:/usr/local/resin/versions/resin-3.2.1/lib/ jaxstream-15.jar:/usr/local/resin/versions/resin-3.2.1/lib/ javamail-141.jar:/usr/local/java/versions/jdk1.6.0_12/jre/lib/ext/ localedata.jar:/usr/local/java/versions/jdk1.6.0_12/jre/lib/ext/ dnsns.jar:/usr/local/java/versions/jdk1.6.0_12/jre/lib/ext/ sunjce_provider.jar:/usr/local/java/versions/jdk1.6.0_12/jre/lib/ext/ sunpkcs11.jar:/usr/local/java/versions/jdk1.6.0_12/jre/lib/ resources.jar:/usr/local/java/versions/jdk1.6.0_12/jre/lib/rt.jar:/usr/ local/java/versions/jdk1.6.0_12/jre/lib/jsse.jar:/usr/local/java/ versions/jdk1.6.0_12/jre/lib/jce.jar:/usr/local/java/versions/ jdk1.6.0_12/jre/lib/charsets.jar:/usr/local/java/versions/jdk1.6.0_12/ jre/lib/ext/localedata.jar:/usr/local/java/versions/jdk1.6.0_12/jre/ lib/ext/dnsns.jar:/usr/local/java/versions/jdk1.6.0_12/jre/lib/ext/ sunjce_provider.jar:/usr/local/java/versions/jdk1.6.0_12/jre/lib/ext/ sunpkcs11.jar:/usr/local/resin/current/lib/resin.jar:/usr/local/java/ versions/jdk1.6.0_12/lib/tools.jar:/usr/local/resin/current/lib/ osgi-14.jar:/usr/local/resin/current/lib/webutil.jar:/usr/local/resin/ current/lib/jsf-12.jar:/usr/local/resin/current/lib/javaee-16.jar:/usr/ local/resin/current/lib/activation.jar:/usr/local/resin/current/lib/ jaxstream-15.jar:/usr/local/resin/current/lib/javamail-141.jar:/export/ home/satdb/www/org/satdb/www/WEB-INF/classes:/export/home/satdb/www/ org/satdb/www/WEB-INF/lib/mysql/mysql-connector-java/5.0.5/mysql- connector-java-5.0.5.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/ lib/struts/struts/1.2.9/struts-1.2.9.jar:/export/home/satdb/www/org/ satdb/www/WEB-INF/lib/asm/asm/1.5.3/asm-1.5.3.jar:/export/home/satdb/ www/org/satdb/www/WEB-INF/lib/asm/asm-attrs/1.5.3/asm-attrs-1.5.3.jar:/ export/home/satdb/www/org/satdb/www/WEB-INF/lib/javax/persistence/ persistence-api/1.0/persistence-api-1.0.jar:/export/home/satdb/www/org/ satdb/www/WEB-INF/lib/javax/activation/activation/1.1/ activation-1.1.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/lib/ javax/jms/jms/1.1/jms-1.1.jar:/export/home/satdb/www/org/satdb/www/WEB- INF/lib/javax/transaction/jta/1.0.1B/jta-1.0.1B.jar:/export/home/satdb/ www/org/satdb/www/WEB-INF/lib/javax/transaction/jta/1.1/jta-1.1.jar:/ export/home/satdb/www/org/satdb/www/WEB-INF/lib/javax/mail/mail/1.4/ mail-1.4.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/lib/junit/ junit/4.5/junit-4.5.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/ lib/commons-beanutils/commons-beanutils/1.7.0/commons- beanutils-1.7.0.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/lib/ commons-validator/commons-validator/1.3.1/commons-validator-1.3.1.jar:/ export/home/satdb/www/org/satdb/www/WEB-INF/lib/xalan/xalan/2.5.1/ xalan-2.5.1.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/lib/oro/ oro/2.0.8/oro-2.0.8.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/ lib/commons-digester/commons-digester/1.8/commons-digester-1.8.jar:/ export/home/satdb/www/org/satdb/www/WEB-INF/lib/commons-collections/ commons-collections/2.1.1/commons-collections-2.1.1.jar:/export/home/ satdb/www/org/satdb/www/WEB-INF/lib/commons-collections/commons- collections/3.1/commons-collections-3.1.jar:/export/home/satdb/www/org/ satdb/www/WEB-INF/lib/org/apache/struts/struts-core/1.3.9/struts- core-1.3.9.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/lib/org/ springframework/spring-context/2.0.8/spring-context-2.0.8.jar:/export/ home/satdb/www/org/satdb/www/WEB-INF/lib/org/springframework/spring/ 2.5.5/spring-2.5.5.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/ lib/org/springframework/spring-beans/2.0.8/spring-beans-2.0.8.jar:/ export/home/satdb/www/org/satdb/www/WEB-INF/lib/org/springframework/ spring-beans/2.5.6/spring-beans-2.5.6.jar:/export/home/satdb/www/org/ satdb/www/WEB-INF/lib/org/springframework/spring-core/2.0.8/spring- core-2.0.8.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/lib/org/ springframework/spring-core/2.5.6/spring-core-2.5.6.jar:/export/home/ satdb/www/org/satdb/www/WEB-INF/lib/org/springframework/spring-struts/ 2.0.8/spring-struts-2.0.8.jar:/export/home/satdb/www/org/satdb/www/WEB- INF/lib/org/springframework/spring-web/2.0.8/spring-web-2.0.8.jar:/ export/home/satdb/www/org/satdb/www/WEB-INF/lib/org/slf4j/slf4j-api/ 1.5.3/slf4j-api-1.5.3.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/ lib/org/slf4j/slf4j-simple/1.5.3/slf4j-simple-1.5.3.jar:/export/home/ satdb/www/org/satdb/www/WEB-INF/lib/org/hibernate/hibernate-core/ 3.3.1.GA/hibernate-core-3.3.1.GA.jar:/export/home/satdb/www/org/satdb/ www/WEB-INF/lib/org/hibernate/hibernate-core/3.3.0.SP1/hibernate- core-3.3.0.SP1.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/lib/ org/hibernate/hibernate-annotations/3.4.0.GA/hibernate- annotations-3.4.0.GA.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/ lib/org/hibernate/hibernate-commons-annotations/3.3.0.ga/hibernate- commons-annotations-3.3.0.ga.jar:/export/home/satdb/www/org/satdb/www/ WEB-INF/lib/org/hibernate/ejb3-persistence/1.0.2.GA/ejb3- persistence-1.0.2.GA.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/ lib/org/hibernate/hibernate/3.2.1.ga/hibernate-3.2.1.ga.jar:/export/ home/satdb/www/org/satdb/www/WEB-INF/lib/org/hibernate/hibernate/ 3.2.6.ga/hibernate-3.2.6.ga.jar:/export/home/satdb/www/org/satdb/www/ WEB-INF/lib/net/sf/ehcache/ehcache/1.2.3/ehcache-1.2.3.jar:/export/ home/satdb/www/org/satdb/www/WEB-INF/lib/dom4j/dom4j/1.6.1/ dom4j-1.6.1.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/lib/cglib/ cglib/2.1_3/cglib-2.1_3.jar:/export/home/satdb/www/org/satdb/www/WEB- INF/lib/com/caucho/hessian/3.2.1/hessian-3.2.1.jar:/export/home/satdb/ www/org/satdb/www/WEB-INF/lib/com/sun/jdmk/jmxtools/1.2.1/ jmxtools-1.2.1.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/lib/ com/sun/jmx/jmxri/1.2.1/jmxri-1.2.1.jar:/export/home/satdb/www/org/ satdb/www/WEB-INF/lib/antlr/antlr/2.7.2/antlr-2.7.2.jar:/export/home/ satdb/www/org/satdb/www/WEB-INF/lib/commons-fileupload/commons- fileupload/1.0/commons-fileupload-1.0.jar:/export/home/satdb/www/org/ satdb/www/WEB-INF/lib/commons-logging/commons-logging/1.0.4/commons- logging-1.0.4.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/lib/ aopalliance/aopalliance/1.0/aopalliance-1.0.jar:/export/home/satdb/www/ org/satdb/www/WEB-INF/lib/log4j/log4j/1.2.15/log4j-1.2.15.jar:/export/ home/satdb/www/org/satdb/www/WEB-INF/lib/xml-apis/xml-apis/1.0.b2/xml- apis-1.0.b2.jar:/export/home/satdb/www/org/satdb/www/WEB-INF/lib/ commons-chain/commons-chain/1.1/commons-chain-1.1.jar -source 1.5 / export/home/satdb/www/org/satdb/www/WEB-INF/work/_jsp/_test__jsp.java (com.caucho.loader.DynamicClassLoader) DynamicClassLoader[] adding loader JarLoader[[]] (com.caucho.loader.JarListLoader) tools.jar does not exist (path=/usr/ local/java/versions/jdk1.6.0_12/jre/lib/tools.jar) (com.caucho.loader.DynamicClassLoader) DynamicClassLoader[JarLoader[[]]] skipping duplicate URL file:/usr/ local/java/versions/jdk1.6.0_12/lib/tools.jar merging .smap for _test__jsp.class (com.caucho.loader.DynamicClassLoader) DynamicClassLoader[] adding loader SimpleLoader[/export/home/satdb/www/org/satdb/www/WEB-INF/work] (com.caucho.make.ClassDependency) java.lang.ClassNotFoundException: _jsp._WEB_22dINF._tags._base__tag in EnvironmentClassLoader[web-app: http://default ] com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java: 1297) com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java: 1275) java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320) java.lang.Class.forName0(Native Method) java.lang.Class.forName(Class.java:247) com.caucho.make.ClassDependency.&amp;lt;init&amp;gt;(ClassDependency.java:83) _jsp._test__jsp.init(_test__jsp.java:122) com.caucho.jsp.JspManager.loadPage(JspManager.java:397) com.caucho.jsp.JspManager.compile(JspManager.java:247) com.caucho.jsp.JspManager.createPage(JspManager.java:171) com.caucho.jsp.JspManager.createPage(JspManager.java:150) com.caucho.jsp.PageManager.getPage(PageManager.java:307) com.caucho.jsp.PageManager.getPage(PageManager.java:237) com.caucho.jsp.PageManager.getPage(PageManager.java:220) com.caucho.jsp.QServlet.getSubPage(QServlet.java:295) com.caucho.jsp.QServlet.getPage(QServlet.java:210) com .caucho .server.dispatch.PageFilterChain.compilePage(PageFilterChain.java:238) com .caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java: 145) com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:107) com .caucho .server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) org .springframework .orm .hibernate3 .support .OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java: 198) org.springframework.web.filter.OncePerRequestFilter.doFilter (OncePerRequestFilter.java:75) com .caucho .server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) com .caucho .server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:189) com .caucho .server.dispatch.ServletInvocation.service(ServletInvocation.java:266) com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:292) com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java: 577) com.caucho.server.port.TcpConnection $AcceptTask.doAccept(TcpConnection.java:1211) com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java: 1152) $Item.runTasks(ThreadPool.java:759) $Item.run(ThreadPool.java:681) java.lang.Thread.run(Thread.java:619) (com.caucho.make.ClassDependency) _jsp._WEB_22dINF._tags._base__tag digest is modified (old=6595753468373623674,new=-1) (com.caucho.server.session.SessionImpl) SessionImpl[abctAYvApeMeA_JvG_Jbs,] new (com.caucho.server.session.SessionImpl) SessionImpl[abctAYvApeMeA_JvG_Jbs,] create session (com.caucho.server.connection.AbstractHttpResponse) Http[0] HTTP/1.1 200 OK (com.caucho.server.connection.AbstractHttpResponse) Http[0] Content- Type: application/xhtml+xml; charset=UTF-8 (com.caucho.server.connection.AbstractHttpResponse) Http[0] Transfer- Encoding: chunked (com.caucho.server.connection.ResponseStream) Http[0] write-chunk(350) (com.caucho.server.connection.ResponseStream) Http[0] write-chunk(7) (com.caucho.server.connection.ResponseStream) Http[0] finish/keepalive (com.caucho.server.http.HttpRequest) Http[0] keepalive (com.caucho.server.http.HttpRequest) Http[0] GET /main.css HTTP/1.1 (com.caucho.server.http.HttpRequest) Http[0] Remote-IP: 12.155.29.1:11594 (com.caucho.server.http.HttpRequest) Http[0] User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_5_6; en-us) AppleWebKit/528.16 (KHTML, like Gecko) Version/4.0 Safari/528.16 (com.caucho.server.http.HttpRequest) Http[0] Cache-Control: max-age=0 (com.caucho.server.http.HttpRequest) Http[0] If-None-Match: "/ 5Vf6BTMbk3" (com.caucho.server.http.HttpRequest) Http[0] Referer: http://satdb.org/test.jsp (com.caucho.server.http.HttpRequest) Http[0] Accept: text/css,*/*;q=0.1 (com.caucho.server.http.HttpRequest) Http[0] If-Modified-Since: Fri, 10 Oct 2008 02:12:26 GMT (com.caucho.server.http.HttpRequest) Http[0] Accept-Language: en-us (com.caucho.server.http.HttpRequest) Http[0] Accept-Encoding: gzip, deflate (com.caucho.server.http.HttpRequest) Http[0] Cookie: JSESSIONID=abctAYvApeMeA_JvG_Jbs (com.caucho.server.http.HttpRequest) Http[0] Connection: keep-alive (com.caucho.server.http.HttpRequest) Http[0] Host: satdb.org (com.caucho.server.webapp.WebApp) real-path /main.css -&amp;gt; /export/home/ satdb/www/org/satdb/www/main.css resin-file) (com.caucho.server.dispatch.ServletInvocation) Dispatch '/main.css' to WebAppFilterChain[ http://default , next = FilterFilterChain [org .springframework.orm.hibernate3.support.opensessioninviewfil...@fa3ce5]] (com.caucho.server.dispatch.FilterFilterChain) Dispatch HttpServletRequestImpl[HttpRequest[0]] filter = org .springframework.orm.hibernate3.support.opensessioninviewfil...@fa3ce5 next=filterfilterchain[com.latencyzero.satdb.requestfil...@b41541] (com.caucho.server.dispatch.FilterFilterChain) Dispatch HttpServletRequestImpl[HttpRequest[0]] filter=com.latencyzero.satdb.requestfil...@b41541 next=ServletFilterChain[resin-file] (com.caucho.server.webapp.WebApp) com.caucho.server.dispatch.ServletConfigException: 'directory' is not a known servlet.  Servlets must be defined by &amp;lt;servlet&amp;gt; before being used. com .caucho .server.dispatch.ServletManager.createServletChain(ServletManager.java: 180) com.caucho.server.webapp.WebApp.getNamedDispatcher(WebApp.java:2494) com.caucho.servlets.FileServlet.init(FileServlet.java:118) com .caucho .server .dispatch.ServletConfigImpl.createServletImpl(ServletConfigImpl.java: 852) com .caucho .server .dispatch.ServletConfigImpl.createServlet(ServletConfigImpl.java:754) com .caucho .server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:94) com.latencyzero.satdb.RequestFilter.doFilter(RequestFilter.java:107) com .caucho .server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) org .springframework .orm .hibernate3 .support .OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java: 198) org.springframework.web.filter.OncePerRequestFilter.doFilter (OncePerRequestFilter.java:75) com .caucho .server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) com .caucho .server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:189) com .caucho .server.dispatch.ServletInvocation.service(ServletInvocation.java:266) com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:292) com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java: 577) com.caucho.server.port.TcpConnection $AcceptTask.doAccept(TcpConnection.java:1211) com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java: 1152) $Item.runTasks(ThreadPool.java:759) $Item.run(ThreadPool.java:681) java.lang.Thread.run(Thread.java:619) (com.caucho.server.dispatch.ServletConfigImpl) Servlet[resin-file] active (com.caucho.server.dispatch.ServletConfigImpl) javax.management.NotCompliantMBeanException: resin:type=FileServlet,Host=default,WebApp=/,name=resin-file mbean has no MBean interface (com.caucho.server.dispatch.ServletConfigImpl) Servlet[resin-file] active (com.caucho.server.connection.AbstractHttpResponse) Http[0] HTTP/1.1 304 Not Modified (com.caucho.server.connection.AbstractHttpResponse) Http[0] ETag: "/ 5Vf6BTMbk3" (com.caucho.server.connection.AbstractHttpResponse) Http[0] Content- Length: 0 (com.caucho.server.connection.ResponseStream) Http[0] finish/keepalive (com.caucho.server.http.HttpRequest) Http[0] keepalive (com.caucho.server.http.HttpRequest) Http[0] GET /favicon.ico HTTP/1.1 (com.caucho.server.http.HttpRequest) Http[0] Remote-IP: 12.155.29.1:11594 (com.caucho.server.http.HttpRequest) Http[0] User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_5_6; en-us) AppleWebKit/528.16 (KHTML, like Gecko) Version/4.0 Safari/528.16 (com.caucho.server.http.HttpRequest) Http[0] Referer: http://satdb.org/test.jsp (com.caucho.server.http.HttpRequest) Http[0] Cache-Control: max-age=0 (com.caucho.server.http.HttpRequest) Http[0] Accept: */* (com.caucho.server.http.HttpRequest) Http[0] Accept-Language: en-us (com.caucho.server.http.HttpRequest) Http[0] Accept-Encoding: gzip, deflate (com.caucho.server.http.HttpRequest) Http[0] Cookie: JSESSIONID=abctAYvApeMeA_JvG_Jbs (com.caucho.server.http.HttpRequest) Http[0] Connection: keep-alive (com.caucho.server.http.HttpRequest) Http[0] Host: satdb.org (com.caucho.server.webapp.WebApp) real-path /favicon.ico -&amp;gt; /export/ home/satdb/www/org/satdb/www/favicon.ico (com.caucho.server.webapp.WebApp) real-path /favicon.ico/index.jsp -&amp;gt; / export/home/satdb/www/org/satdb/www/favicon.ico/index.jsp (com.caucho.server.webapp.WebApp) real-path /favicon.ico/index.html - resin-file) (com.caucho.server.dispatch.ServletInvocation) Dispatch '/favicon.ico' to WebAppFilterChain[ http://default , next = FilterFilterChain [org .springframework.orm.hibernate3.support.opensessioninviewfil...@fa3ce5]] (com.caucho.server.dispatch.FilterFilterChain) Dispatch HttpServletRequestImpl[HttpRequest[0]] filter = org .springframework.orm.hibernate3.support.opensessioninviewfil...@fa3ce5 next=filterfilterchain[com.latencyzero.satdb.requestfil...@b41541] (com.caucho.server.dispatch.FilterFilterChain) Dispatch HttpServletRequestImpl[HttpRequest[0]] filter=com.latencyzero.satdb.requestfil...@b41541 next=ServletFilterChain[resin-file] (com.caucho.server.connection.AbstractHttpResponse) Http[0] HTTP/1.1 404 Not Found (com.caucho.server.connection.AbstractHttpResponse) Http[0] Content- Type: text/html; charset=utf-8 (com.caucho.server.connection.AbstractHttpResponse) Http[0] Transfer- Encoding: chunked (com.caucho.server.connection.ResponseStream) Http[0] write-chunk(178) (com.caucho.server.connection.ResponseStream) Http[0] write-chunk(7) (com.caucho.server.connection.ResponseStream) Http[0] finish/keepalive (com.caucho.server.http.HttpRequest) Http[0] keepalive (com.caucho.server.port.TcpConnection) TcpConnection[id=0,]  keepalive (thread) (com.caucho.server.port.TcpConnection) TcpConnection[id=0,]  closing connection TcpConnection[id=http--80-0, http://*:80,CLOSED ], total=6 closing pool item from idle timeout:PoolItem[jdbc/satdb, 0,ManagedConnectionImpl] connection pool destroy PoolItem[jdbc/satdb,0,null] (com.caucho.sql.ManagedConnectionImpl) destroy ManagedConnectionImpl[jdbc/satdb.0]</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Recompilation of jsp on every request for the	same page</header>
    <date>Thu Apr 02 05:29:56 CEST 2009</date>
    <body>Here's some more information. This recompile happens when my .jsp includes one of my .tag files is referenced. Resin always complains that it couldn't find the class for the tag, and that the digest is old, but I don't see a javac line for the tag, only one for test.jsp. This happens *every* request. If I remove the tag from the .jsp. It doesn't happen. If I reference one of the JSTL tags, it works fine. [19:55:18.672] FINE com.caucho.java.InternalCompiler [19:55:18.673] FINE com.caucho.java.JavaCompiler merging .smap for _test__jsp.class [19:55:18.678] FINEST com.caucho.loader.DynamicClassLoader DynamicClassLoader[] adding loader SimpleLoader[/Users/rmann/LZRepo/ satdb/trunk/target/build/WEB-INF/work] [19:55:18.689] FINE com.caucho.make.ClassDependency java.lang.ClassNotFoundException: _jsp._WEB_22dINF._tags._base__tag in EnvironmentClassLoader[web-app: http://default/sat ] ... [19:55:18.256] CONFIG com.caucho.java.JavaCompiler Compiling _jsp/ _test__jsp.java [19:55:18.260] FINER com.caucho.java.InternalCompiler javac(int) -d / Users/rmann/LZRepo/satdb/trunk/target/build/WEB-INF/work ... ... [19:55:18.691] FINE com.caucho.make.ClassDependency _jsp._WEB_22dINF._tags._base__tag digest is modified (old=6595753468373623674,new=-1) ... http://java.sun.com/j2ee/dtds/web-jsptaglibrary_1_1.dtd http://*:80,ACCEPT ], total=5 http://default , -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.1.8: thread deadlock against Xalan XSLTC</header>
    <date>Fri Mar 27 10:42:51 CET 2009</date>
    <body>Hi *! I've occassionally found a thread deadlock in a halted instance of Resin-3.1.8. I've appended the jstack trace. Xalan XSLTC does employ some aggressive classloading, since it's a XSLT-to-java compiler. It seems that it would occassionally (I don't remember this happening often) cause resin's classloader to fail. Looks like thread http--8123-29 and thread http--8123-33 are deadlocked in the classloader code, Found one Java-level deadlock: ============================= "http--8123-120$22712691": waiting to lock monitor 0x08b126ac (object 0x5828b390, a ru.sbtc.util.StylesheetManager), which is held by "http--8123-25$8931423" "http--8123-25$8931423": waiting to lock monitor 0x08b0b5e0 (object 0x5525c6b0, a com.caucho.loader.SystemClassLoader), which is held by "http--8123-33$15917864" "http--8123-33$15917864": waiting to lock monitor 0x089d2be0 (object 0x5d3fea48, a com.caucho.loader.ClassEntry), which is held by "http--8123-29$31079116" "http--8123-29$31079116": waiting to lock monitor 0x08b0b5e0 (object 0x5525c6b0, a com.caucho.loader.SystemClassLoader), which is held by "http--8123-33$15917864" Java stack information for the threads listed above: =================================================== "http--8123-120$22712691": at ru.sbtc.util.StylesheetManager.getTransformer(StylesheetManager.java:139) - waiting to lock &amp;lt;0x5828b390&amp;gt; (a ru.sbtc.util.StylesheetManager) at ru.sbtc.sitebuilder.servlet.XMLMenuServlet.doGet(XMLMenuServlet.java:84) at javax.servlet.http.HttpServlet.service(HttpServlet.java:114) at javax.servlet.http.HttpServlet.service(HttpServlet.java:91) ... "http--8123-25$8931423": at org.apache.xalan.xsltc.compiler.XPathLexer.&amp;lt;init&amp;gt;(XPathLexer.java:165) at org.apache.xalan.xsltc.compiler.Parser.parseTopLevel(Parser.java:1092) at org.apache.xalan.xsltc.compiler.Parser.parseExpression(Parser.java:1055) at org.apache.xalan.xsltc.compiler.If.parseContents(If.java:61) at org.apache.xalan.xsltc.compiler.SyntaxTreeNode.parseChildren(SyntaxTreeNode.java:432) at org.apache.xalan.xsltc.compiler.VariableBase.parseContents(VariableBase.java:229) at org.apache.xalan.xsltc.compiler.Variable.parseContents(Variable.java:53) at org.apache.xalan.xsltc.compiler.Stylesheet.parseOwnChildren(Stylesheet.java:577) at org.apache.xalan.xsltc.compiler.Stylesheet.parseContents(Stylesheet.java:559) at org.apache.xalan.xsltc.compiler.Parser.createAST(Parser.java:383) at org.apache.xalan.xsltc.compiler.XSLTC.compile(XSLTC.java:361) at org.apache.xalan.xsltc.compiler.XSLTC.compile(XSLTC.java:446) at org.apache.xalan.xsltc.trax.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:799) at ru.sbtc.util.StylesheetManager.loadTemplates(StylesheetManager.java:174) at ru.sbtc.util.StylesheetManager.getTransformer(StylesheetManager.java:161) - locked &amp;lt;0x5828b390&amp;gt; (a ru.sbtc.util.StylesheetManager) at ru.sbtc.sitebuilder.servlet.XMLMenuServlet.doGet(XMLMenuServlet.java:84) at javax.servlet.http.HttpServlet.service(HttpServlet.java:114) at javax.servlet.http.HttpServlet.service(HttpServlet.java:91) ... "http--8123-33$15917864": at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1431) - waiting to lock &amp;lt;0x5d3fea48&amp;gt; (a com.caucho.loader.ClassEntry) at com.caucho.loader.DynamicClassLoader.findClassImpl(DynamicClassLoader.java:1390) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.java:1289) at com.caucho.loader.SystemClassLoader.loadClassImpl(SystemClassLoader.java:217) at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1219) at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1203) at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) - locked &amp;lt;0x5525c6b0&amp;gt; (a com.caucho.loader.SystemClassLoader) at org.apache.xalan.xsltc.compiler.Stylesheet.setImportPrecedence(Stylesheet.java:324) at org.apache.xalan.xsltc.compiler.Import.parseContents(Import.java:115) at org.apache.xalan.xsltc.compiler.Stylesheet.parseOwnChildren(Stylesheet.java:587) at org.apache.xalan.xsltc.compiler.Stylesheet.parseContents(Stylesheet.java:559) at org.apache.xalan.xsltc.compiler.Parser.createAST(Parser.java:383) at org.apache.xalan.xsltc.compiler.XSLTC.compile(XSLTC.java:361) at org.apache.xalan.xsltc.compiler.XSLTC.compile(XSLTC.java:446) at org.apache.xalan.xsltc.trax.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:799) at ru.sbtc.util.StylesheetManager.loadTemplates(StylesheetManager.java:174) at ru.sbtc.util.StylesheetManager.getTransformer(StylesheetManager.java:161) - locked &amp;lt;0x57067f10&amp;gt; (a ru.sbtc.util.StylesheetManager) at ru.sbtc.sitebuilder.servlet.XMLServlet.doGet(XMLServlet.java:193) at javax.servlet.http.HttpServlet.service(HttpServlet.java:114) at javax.servlet.http.HttpServlet.service(HttpServlet.java:91) ... "http--8123-29$31079116": at java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClass(ClassLoader.java:620) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124) at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1523) - locked &amp;lt;0x5d3fea48&amp;gt; (a com.caucho.loader.ClassEntry) at com.caucho.loader.DynamicClassLoader.findClassImpl(DynamicClassLoader.java:1390) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.java:1289) at com.caucho.loader.SystemClassLoader.loadClassImpl(SystemClassLoader.java:217) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.java:1279) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.java:1279) at com.caucho.loader.DynamicClassLoader.loadClassImpl(DynamicClassLoader.java:1279) at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1219) at com.caucho.loader.DynamicClassLoader.loadClass(DynamicClassLoader.java:1203) at org.apache.xalan.xsltc.compiler.ObjectFactory.findProviderClass(ObjectFactory.java:508) at org.apache.xalan.xsltc.compiler.Parser.makeInstance(Parser.java:919) at org.apache.xalan.xsltc.compiler.Parser.startElement(Parser.java:1243) at org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown Source) at org.apache.xerces.parsers.AbstractXMLDocumentParser.emptyElement(Unknown Source) at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source) at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source) at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source) at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source) at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source) at org.apache.xerces.parsers.XMLParser.parse(Unknown Source) at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source) at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source) at org.apache.xalan.xsltc.compiler.Parser.parse(Parser.java:415) at org.apache.xalan.xsltc.compiler.Parser.parse(Parser.java:467) at org.apache.xalan.xsltc.compiler.Import.parseContents(Import.java:99) at org.apache.xalan.xsltc.compiler.Stylesheet.parseOwnChildren(Stylesheet.java:587) at org.apache.xalan.xsltc.compiler.Stylesheet.parseContents(Stylesheet.java:559) at org.apache.xalan.xsltc.compiler.Parser.createAST(Parser.java:383) at org.apache.xalan.xsltc.compiler.XSLTC.compile(XSLTC.java:361) at org.apache.xalan.xsltc.compiler.XSLTC.compile(XSLTC.java:446) at org.apache.xalan.xsltc.trax.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:799) at ru.sbtc.util.StylesheetManager.loadTemplates(StylesheetManager.java:174) at ru.sbtc.util.StylesheetManager.getTransformer(StylesheetManager.java:161) - locked &amp;lt;0x5600ca80&amp;gt; (a ru.sbtc.util.StylesheetManager) at ru.sbtc.sitebuilder.InfoBlock.output(InfoBlock.java:2025) at ru.sbtc.sitebuilder.SectionToXML.process(SectionToXML.java:332) at ru.sbtc.sitebuilder.servlet.XMLServlet.doGet(XMLServlet.java:214) ... Found 1 deadlock.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Why must we define beans in xml?</header>
    <date>Thu Mar 26 03:29:15 CET 2009</date>
    <body>Is there a compelling reason why we must define our beans and services in resin-web.xml?  Will this continue to be the case going forward in Resin 4.0? It's a minor nuisance, yes, but... it's nice to add a class to the project, annotate it with @Service or @Stateless or whatever, and have it automatically detected as a bean.  JBoss works this way :-) This actually has some impact on the SubEtha code that Scott and I are working on.  SubEtha plugins automatically register themselves with the container when you drop a jar file containing them into the server.  This makes it easy for minimally java-savvy people to write some code, drop it in the container, and have it immediately available.  Adding xml files complicates the matter. Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why must we define beans in xml?</header>
    <date>Thu Mar 26 17:42:02 CET 2009</date>
    <body>You don't need to define the beans in resin-web.xml.  You do need a marker file like META-INF/beans.xml or META-INF/ejb-jar.xml. If you have a META-INF/ejb-jar.xml, Resin should already pick this up. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why must we define beans in xml?</header>
    <date>Mon Mar 30 23:18:51 CEST 2009</date>
    <body>Thanks... you're absolutely right.  Works great. Jeff http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Using Hibernate as EntityManager in Resin 4</header>
    <date>Wed Mar 25 21:47:41 CET 2009</date>
    <body>I'd like to replace Amber with Hibernate. We are migrating an app from JBoss (Hibernate EntityManager) and there are lots of Hibernate annotations used for validation, and to hint for database optimizations. In the first pass getting things going we would like to just drop in (as best as we can) the current entities and be able to let Hibernate manage them as before. Later we may cut back on Hibernate, and use Amber (but so far it seems to lack some of the features in Hibernate). Is there a way to replace Amber with Hibernate?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using Hibernate as EntityManager in Resin 4</header>
    <date>Wed Mar 25 21:52:43 CET 2009</date>
    <body>It is always the moment after you send the email that you find the answer: http://wiki.caucho.com/Hibernate I will try that method. Are there any additional issues I should worry about? Sorry for the spam, Scott On Wed, Mar 25, 2009 at 1:47 PM, Scott Hernandez</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using Hibernate as EntityManager in Resin 4</header>
    <date>Wed Mar 25 22:09:44 CET 2009</date>
    <body>http://wiki.caucho.com/Hibernate Well, we haven't gotten to the compatibility testing yet for Resin 4, and the Config/DI rewrite might have messed up the Hibernate integration. In other words, it should work, but if it doesn't we'll need to file a bug report on Resin 4. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using Hibernate as EntityManager in Resin 4</header>
    <date>Thu Mar 26 00:37:05 CET 2009</date>
    <body>No problem, I should have something to report in a few hours. Also, is there a way to annotate the persistence units (for EntityManager injection) like there was for the JMS stuff? Since the persistence stuff is in persistence.xml, will it too become a bean config driven system? for example, let us say that I want two persistence units. ........... But I get this error (of course) since I can't distinguish between the two without annotating them (or maybe I could  write a @Producer?). Can't find a component for 'javax.persistence.EntityManager' because no enabled beans match the bindings [...@javax.inject.current(), @com.caucho.config.Name(value=test)] . Enabled beans: @Production, name=test] [snip] [snip]</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using Hibernate as EntityManager in Resin 4</header>
    <date>Tue Mar 31 06:34:36 CEST 2009</date>
    <body>Well, I have configured a test app to use hibernate and I have a few problems (and a bit of success): I was able to get the same code working from a servlet, but when trying to get data I get an exception when running from a @Service (in the @PostConstruct method): EntityManagerTransactionProxy[test,null]: @PersistenceContext EntityManager may not be used outside of a transaction com.caucho.amber.manager.EntityManagerTransactionProxy.getCurrent(EntityManagerTransactionProxy.java:408) com.caucho.amber.manager.EntityManagerTransactionProxy.createQuery(EntityManagerTransactionProxy.java:193) test2.services.InitDBService.checkDBandInit(InitDBService.java:47) test2.services.InitDBService.postConstruct(InitDBService.java:36) sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) com.caucho.config.j2ee.PostConstructProgram.inject(PostConstructProgram.java:121) com.caucho.config.inject.ComponentImpl.init(ComponentImpl.java:344) com.caucho.config.inject.SimpleBean.create(SimpleBean.java:421) com.caucho.config.scope.ScopeContext.get(ScopeContext.java:90) com.caucho.config.inject.InjectManager.getInstanceRec(InjectManager.java:1331) com.caucho.config.inject.InjectManager.getInstance(InjectManager.java:1288) com.caucho.config.inject.InjectManager.getInstance(InjectManager.java:1345) com.caucho.server.webbeans.ResinWebBeansProducer.serviceStartup(ResinWebBeansProducer.java:167) sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) com.caucho.config.event.ObserverImpl.notify(ObserverImpl.java:191) com.caucho.config.inject.ObserverMap.fireEvent(ObserverMap.java:82) com.caucho.config.inject.InjectManager.fireEventImpl(InjectManager.java:1559) com.caucho.config.inject.InjectManager.fireEventImpl(InjectManager.java:1540) com.caucho.config.inject.InjectManager.fireEventImpl(InjectManager.java:1540) com.caucho.config.inject.InjectManager.fireEventImpl(InjectManager.java:1540) com.caucho.config.inject.InjectManager.fireEventImpl(InjectManager.java:1540) com.caucho.config.inject.InjectManager.fireEvent(InjectManager.java:1534) com.caucho.config.inject.InjectManager.registerBean(InjectManager.java:2066) com.caucho.config.inject.InjectManager.registerBean(InjectManager.java:2044) com.caucho.config.inject.InjectManager.registerBean(InjectManager.java:2047) com.caucho.config.inject.InjectManager.startServices(InjectManager.java:2013) com.caucho.config.inject.InjectManager.environmentStart(InjectManager.java:1993) com.caucho.loader.EnvironmentClassLoader.start(EnvironmentClassLoader.java:703) com.caucho.server.webapp.WebApp.start(WebApp.java:2021) com.caucho.server.deploy.DeployController.startImpl(DeployController.java:678) com.caucho.server.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:72) com.caucho.server.deploy.DeployController.startOnInit(DeployController.java:549) com.caucho.server.deploy.DeployContainer.start(DeployContainer.java:160) com.caucho.server.webapp.WebAppContainer.startImpl(WebAppContainer.java:681) com.caucho.server.webapp.WebAppContainer.start(WebAppContainer.java:661) com.caucho.server.deploy.DeployController.startImpl(DeployController.java:678) com.caucho.server.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:72) com.caucho.server.deploy.DeployController.startOnInit(DeployController.java:549) com.caucho.server.deploy.DeployContainer.start(DeployContainer.java:160) com.caucho.server.host.HostContainer.start(HostContainer.java:484) com.caucho.server.cluster.Server.start(Server.java:1737) com.caucho.server.resin.Resin.createServer(Resin.java:862) com.caucho.server.resin.Resin.initMain(Resin.java:1388) trying to use entityManager.getTransaction().begin got me this exception: java.lang.IllegalStateException: Container-manager @PersistenceContext may not use getTransaction. I'm guessing that the problem is that the @Service post construction is happened too soon, maybe. [snip]</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using Hibernate as EntityManager in Resin 4</header>
    <date>Tue Mar 31 20:04:14 CEST 2009</date>
    <body>It's a different issue, I believe.  The EntityManager is intended to be used inside a UserTransaction, i.e. a container-managed transaction.  The JavaEE model is that you're running inside a Session bean, although that's not strictly necessary as long as it's inside a transaction. If you're managing transactions with the EntityManager, you need to use EntityManagerFactory, not EntityManager.  (It's been a little while since I've read that part of the spec, though.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using Hibernate as EntityManager in Resin 4</header>
    <date>Tue Mar 31 21:51:35 CEST 2009</date>
    <body>Let me try this again from the beginning... I want to have services (that start with the application, and runs the length of the application lifetime) so I define a POJO with a @Service and a method with a @PostConstruct. Everything is going well so far. I define a persistenceunit in persistence.xml and corresponding jdbc info in the (resin-)web.xml config. So my service looks like this: @Service @PersistenceContext @PersistenceUnit @PostConstruct So I load up my webapp and away it goes. If I use amber (the native JPA impl) everything looks fine and the entity manager, and factory is injected as expected, and the data is queried (and inserted if empty). Now, if I switch to a hibernate backed persistenceunit (hbm) I get some kind of exception no matter how I do it. I have tried using @TransactionAttributes, the UserTransaction object, and various other attempts without any success on the hibernate persistenceunit. Now, later in my code, in a servlet, I have the same code and it runs fine against the @PersistenceContext using the hibernate persistenceunit. I hope this makes a bit more sense and maybe someone can point me in the right direction to get this working :) Thanks in advance, Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using Hibernate as EntityManager in Resin 4</header>
    <date>Tue Mar 31 21:52:35 CEST 2009</date>
    <body>Let me try this again from the beginning... I want to have services (that start with the application, and runs the length of the application lifetime) so I define a POJO with a @Service and a method with a @PostConstruct. Everything is going well so far. I define a persistenceunit in persistence.xml and corresponding jdbc info in the (resin-)web.xml config. So my service looks like this: @Service @PersistenceContext @PersistenceUnit @PostConstruct So I load up my webapp and away it goes. If I use amber (the native JPA impl) everything looks fine and the entity manager, and factory is injected as expected, and the data is queried (and inserted if empty). Now, if I switch to a hibernate backed persistenceunit (hbm) I get some kind of exception no matter how I do it. I have tried using @TransactionAttributes, the UserTransaction object, and various other attempts without any success on the hibernate persistenceunit. Now, later in my code, in a servlet, I have the same code and it runs fine against the @PersistenceContext using the hibernate persistenceunit. I hope this makes a bit more sense and maybe someone can point me in the right direction to get this working :) Thanks in advance, Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using Hibernate as EntityManager in Resin 4</header>
    <date>Wed Apr 01 00:26:59 CEST 2009</date>
    <body>I've added a bug report for this at http://bugs.caucho.com/view.php?id=3429 I didn't quite understand the situation.  The environment might not be properly setup at the @PostConstruct time for some reason. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using Hibernate as EntityManager in Resin 4</header>
    <date>Wed Apr 01 01:42:11 CEST 2009</date>
    <body>Yeah, I tracked it down the the start method of EnvironmentClassLoader. When walking through the EnvironmentListener[] list the webbeans (and @ApplicationScope @Service) are init'd before the EJB system. The EntityManagerFactory exists in the AmberContainer but it is still in the _pendingFactory list (and not in the wbManager it seems) until the startPersistenceUnits method is called for AmberContainer. The list of listeners is in this order: InjectManager OsgiLoader InjectManager (osgi) DBPoolImpl EjbContainer AmberContainer WeakStopListener (@Stateless EJB instance) Basically the @Service @PostConstruct is called during the first InjectManager, and the Amber/Ejb Container isn't good till much later (at the end). Well, that is what it seems to be. I think I should be able to find a workaround since it seems that there are events that fire after all this that I can hook into. Not the most elegant way, but should work for now (I can take care of re-initialization in case it changes behavior). I don't know enough about the internals of resin to know if this a problem, or fixable, but if I can help let me know :) http://bugs.caucho.com/view.php?id=3429</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.x assumes /usr/local/resin ?</header>
    <date>Wed Mar 25 20:23:28 CET 2009</date>
    <body>Something new in Resin 4.x is that when doing the standard configure/ make/make install on *nix (including OS X), it assumes that you want to install into /usr/local/resin. For me, that's not the case, since I often have multiple resins installed and I don't put them into /usr/ local. It's no big deal to move the built libs and delete the /usr/ local/resin directory that was created. But I didn't see any obvious way to tell the build process to use my local resin directory. Is there? I even went into the script for the configure and changed it by hand, and that worked, but then the make and make install ignored it. Shouldn't it default to building within the directory where the commands are being run? I think that's what it used to do. Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.x assumes /usr/local/resin ?</header>
    <date>Wed Mar 25 20:46:30 CET 2009</date>
    <body>What is frequently done is that a configure option let you change the install directory I just looked at configure help ("./configure --help") with the v4 snapshot. Did you try "./configure --prefix=/my/directory" wich is quite standard ? http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.x assumes /usr/local/resin ?</header>
    <date>Wed Mar 25 20:54:33 CET 2009</date>
    <body>Hi Rob &amp;amp; Riccardo, Riccardo is correct.  This should work, too: ./configure --prefix=`pwd` Emil http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.x assumes /usr/local/resin ?</header>
    <date>Wed Mar 25 21:09:36 CET 2009</date>
    <body>Thanks, Riccardo &amp;amp; Emil. I do think my last question is legitimate. Shouldn't the default behavior be to use --prefix=`pwd` ? And if a user *wants* to install into /usr/local/resin, then they can pass that in using the --prefix= argument. Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.x assumes /usr/local/resin ?</header>
    <date>Wed Mar 25 21:30:36 CET 2009</date>
    <body>What I meant is that it is frequent when I have to choose a prefix for install, and I agree with you, from a developer point of view, pwd is best. but from an "easy deployement" point of view, I suppose that /usr/local is best... http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.x assumes /usr/local/resin ?</header>
    <date>Wed Mar 25 22:07:45 CET 2009</date>
    <body>It's more of a standards issue.  I don't know of any other package that installs to pwd by default. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.x assumes /usr/local/resin ?</header>
    <date>Wed Mar 25 21:38:41 CET 2009</date>
    <body>+1 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Bug in Resin 3.2.1 which doesn't occur in Resin	3.1, Resin 2, or 	Tomcat 7/8</header>
    <date>Wed Mar 25 19:14:17 CET 2009</date>
    <body>We are using display tag component http://displaytag.sourceforge.net/1.2/ We are making a basic call to display a grid of values: supplierQuotes is a list of pojo object with quoteId attribute and quoteName Jsp code: requestURI="/pulse/customer.do" sort="list" The aim is put element from list supplierQuotes in pageContext in row attribute. This is working with Resin 2.x resin 3.1.x (7 and 8) tomcat also but not with resin 3.2.1 Java code from java class build from the jsp  with 3.2.1 final org.displaytag.tags.TableTag get_jsp_TableTag_3(PageContext pageContext, javax.servlet.jsp.tagext.JspTag _jsp_parent_tag) throws Throwable _jsp_TableTag_3.setParent((javax.servlet.jsp.tagext.Tag) Same with 3.1.8 _jsp_TableTag_3.setParent((javax.servlet.jsp.tagext.Tag) Something replace automatically ID by UID</body>
  </mail>
  <mail>
    <header>[Resin-interest] Log @Producer</header>
    <date>Wed Mar 25 00:22:55 CET 2009</date>
    <body>I was going to implement a few helper @Producers and I seem to have made a mistake somewhere along the way: RandomClass.java: @New @Produces return And I get this error: com.caucho.config.ConfigException: resinscratchspace.util.LogProducer.createLogger(): Type 'InjectionPoint' for method parameter #0 has no matching component. Anyone have any ideas what that might be?</body>
  </mail>
  <mail>
    <header>[Resin-interest] ip + auth constraint</header>
    <date>Tue Mar 24 03:09:29 CET 2009</date>
    <body>hi. is it possible to use multiple security-constraint to accomplish this? like if i want to give access w/o authentication to trusted IPs listed in an ip-constraint and then redirecting all others to an auth-constraint? thanks!</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4: JMS Queue Injection</header>
    <date>Mon Mar 23 20:48:54 CET 2009</date>
    <body>I'm developing a sample to test a few things and I have a simple question about injecting a Queue by name. I have a bit of xml in my resin-web.xml config like this: And my code is this: @Current And everything is fine, but if I add another Queue (in resin-web.xml) then I get a problem as I have more than one Queue and it is not unique for injection. Now, in the examples it shows using @Named("QueueName") but that annotation cannot be applied to a field as the example seems to indicate. @Named("userUpdates") How do I differentiate between the queues in my injection annotations? Thanks in advance, Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4: JMS Queue Injection</header>
    <date>Tue Mar 24 17:52:53 CET 2009</date>
    <body>The docs are a bit out of date, because the Java Injection spec has changed a bit from the earlier draft.  "@Named" is now _only_ for EL naming, not for binding. In this case, you're supposed to create your own @BindingType annotation, @UserUpdates.  So you inject it like: @UserUpdates And you configure it like: (I'd put the xmlns:mypkg at the top in a real config file.) Creating the annotation is a little bit of extra work but has the following advantages: 1. it's "type safe", i.e. the compiler (and Java Injection) can verify the @UserUpdates is a valid @BindingType annotation, e.g. saving you from typos. 2. it's documented by JavaDoc, so you can explain the purpose of the @UserUpdates 3. it fits into IDEs, because IDEs have access to the annotation and to the xmlns of your configuration 4. it gives you a chance to think carefully about the organization of your components, in this case to double check that "UserUpdates" is a logical and self-documenting description of the queue you're using. The UserUpdates annotation is defined like: @BindingType @Retention(RUNTIME) (Resin does have a com.caucho.config.Name for generic things like databases, but that kind of general annotation is discouraged.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4: JMS Queue Injection</header>
    <date>Tue Mar 24 18:08:55 CET 2009</date>
    <body>Okay, got it. I will give it a try. Also, this means I can annotate beans with @Production/@Mock in the xml also, right? I have a feeling my xmlns declarations section (in resin-web.xml) is going to be very long. ;( Maybe I missed it but was there a section in jsr299 dealing with annotations of beans in xml, or is this resin specific? Thanks, Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 4: JMS Queue Injection</header>
    <date>Tue Mar 24 21:26:29 CET 2009</date>
    <body>Correct. There's a solution for that.  There's a special "namespaces" file that sits in com/mycom/mypkg that lists alias packages, one per line.  So you could put all of your packages in a "namespaces" in com/mycom and use only one namespace declaration. It's part of jsr299.  You can specific any annotation as an XML child element of a bean definition and it gets added just as if you had declared the annotation on the bean. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin 4 + artifactory</header>
    <date>Sat Mar 21 17:35:16 CET 2009</date>
    <body>Hi, trying to get Artifactory 2.0.3 ( http://www.jfrog.org/products.php ) up 'n' running with resin 4 I get the following error: com.sun.jersey.api.container.ContainerException: The ResourceConfig instance com.sun.jersey.impl.application.WebApplicationImpl.processRootResources(WebApplicationImpl.java:774)[17:05:50.120] com.sun.jersey.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:671)[17:05:50.120] org.artifactory.rest.servlet.ArtifactoryRestServlet.initiate(ArtifactoryRestServlet.java:51)[17:05:50.120] com.sun.jersey.spi.container.servlet.ServletContainer.load(ServletContainer.java:538)[17:05:50.120] com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:197)[17:05:50.120] com.caucho.server.dispatch.ServletConfigImpl.createServletImpl(ServletConfigImpl.java:871)[17:05:50.120] com.caucho.server.dispatch.ServletConfigImpl.createServlet(ServletConfigImpl.java:772)[17:05:50.120] com.caucho.server.dispatch.ServletManager.init(ServletManager.java:159)[17:05:50.120] at com.caucho.server.deploy.DeployController.startImpl(DeployController.java:674)[17:05:50.120] com.caucho.server.deploy.DeployController.restartImpl(DeployController.java:637)[17:05:50.120] com.caucho.server.deploy.StartAutoRedeployAutoStrategy.alarm(StartAutoRedeployAutoStrategy.java:177)[17:05:50.120] com.caucho.server.deploy.DeployController.handleAlarm(DeployController.java:796)[17:05:50.120] com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:769)[17:05:50.120] com.caucho.util.ThreadPool$Item.run(ThreadPool.java:686)[17:05:50.120] Environment: Resin-4.0.s090304 (built Wed, 04 Mar 2009 09:21:23 PST)Linux 2.6.25.20-0.1-default amd64 Java(TM) SE Runtime Environment 1.6.0_11-b03, ISO-8859-15, en Java HotSpot(TM) 64-Bit Server VM 11.0-b16, 64, mixed mode, Sun Microsystems Inc. Has anyone successfully deployed Artifactory under resin? Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 4 + artifactory</header>
    <date>Wed Mar 25 17:34:57 CET 2009</date>
    <body>http://www.jfrog.org/products.php ) I've filed this as http://bugs.caucho.com/view.php?id=3416 -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] light image processing in resin application</header>
    <date>Fri Mar 20 19:18:14 CET 2009</date>
    <body>I'm not familiar with JAI, so I'll leave that for others to assess. For a server side application you may want to stick with imageio over java.awt.Toolkit. The Toolkit approach is very system dependent, but potentially faster, since it delegates to (potentially hardware accelerated) system libraries. In any case you will want to be aware of the aliasing effects you get when scaling either up or down in large steps.  Details are at: http://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html http://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html Good luck, Knut Forkalsrud</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] light image processing in resin application</header>
    <date>Fri Mar 20 23:14:51 CET 2009</date>
    <body>Thanks a lot for your point of views. I'll continue with awt. http://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html http://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] light image processing in resin application</header>
    <date>Mon Mar 23 06:26:46 CET 2009</date>
    <body>We use JMagick: http://www.jmagick.org . It's a JNI wrapper around the ImageMagick toolkit. It's not very well documented, but it's incredibly fast and lightweight. I haven't personally tried installing JMagick on OS X, but there is an ImageMagick binary distribution for OS X here: http://www.imagemagick.org/script/binary-releases.php It doesn't have any GUI or X dependencies either, and resizing an image is a very simple operation, ~10-20 lines of Java. Regards, - Hari</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] light image processing in resin application</header>
    <date>Mon Mar 23 08:14:48 CET 2009</date>
    <body>Thanks a lot, I'll try that also. http://www.jmagick.org . It's a JNI wrapper around the http://www.imagemagick.org/script/binary-releases.php http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>[Resin-interest] Perf Issues</header>
    <date>Fri Mar 20 17:10:52 CET 2009</date>
    <body>Hi, We have had a perf issue. Our servers have 4Gb RAM. It has just Resin and Apache installed. The problem is, when I start Resin, the whole server uses about 2.5 Gb RAM After that memory usage keep growing til it reachs the 4Gb RAM, use swap and so on. After few hours the application start getting slow. Analyzing the server sources, it's using so low CPU, load about 1... I see none overload evidence, except for RAM memory. So I just restart Resin and/or Apache and application gets fast again, but few ours later it will raise the same issue. This problem usually happens on peaks hours. So we upgraded RAM memory to 8Gb with a PAE kernel. Although it doesn't reach the 8G RAM, slow moments gots for frequent. It seems to work worse that way (8Gb + PAE kernel). The question is: Is there everyone having the same issue with Resin (3.1.6)? My doubt if such problem resides either on Resin or on my application. Thanks, Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Fri Mar 20 18:01:59 CET 2009</date>
    <body>The /resin-admin has a heap dump which will give you a general idea of what's taking the memory (you will need to add a -agentlib:resin to enable it. That heap information is very important because it will very quickly let you focus on the real issue.  Otherwise, it's almost impossible to guess what the underlying problem is. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Fri Mar 20 18:13:02 CET 2009</date>
    <body>Scott, Scott Ferguson escreveu: Thank you for the answer, I'll do that. Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Fri Mar 20 19:25:07 CET 2009</date>
    <body>I would also enable garbage collection logging (-Xloggc:&amp;lt;filename&amp;gt;) to see if your application is running slow because the JVM is spending a lot of time doing garbage collection. If you are running SUN Java 6, you can use the jmap command to do a heap dump also.  Jmap is available in Java 5 but it doesn't always produce a consistent heap dump. Bill http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Fri Mar 20 21:46:30 CET 2009</date>
    <body>Hi Bill, I have already done it some weeks ago, but it doesn't seem the problem. Thanks, Ronan Bill Au escreveu: I would also enable garbage collection logging (-Xloggc:&amp;lt;filename&amp;gt;) to see if your application is running slow because the JVM is spending a lot of time doing garbage collection. If you are running SUN Java 6, you can use the jmap command to do a heap dump also.  Jmap is available in Java 5 but it doesn't always produce a consistent heap dump. Bill On Fri, Mar 20, 2009 at 1:12 PM, Ronan Lucio &amp;lt;lis...@tiper.com.br mailto:lis...@tiper.com.br Scott, Scott Ferguson escreveu: idea of impossible to Thank you for the answer, I'll do that. Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Wed Apr 01 19:09:44 CEST 2009</date>
    <body>Scott, Scott Ferguson escreveu: The /resin-admin has a heap dump which will give you a general idea of what's taking the memory (you will need to add a -agentlib:resin to enable it. That heap information is very important because it will very quickly let you focus on the real issue.  Otherwise, it's almost impossible to guess what the underlying problem is. -- Scott Do you if it's normal? rank    self+desc       self    desc    count   class 1.0000  121.487M        121.487M        0.000M  943239  char[] 0.8121  98.662M         98.662M         0.000M  78702   byte[] Thanks, Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Wed Apr 01 20:26:58 CEST 2009</date>
    <body>Scott, Scott Ferguson escreveu: The /resin-admin has a heap dump which will give you a general idea of what's taking the memory (you will need to add a -agentlib:resin to enable it. That heap information is very important because it will very quickly let you focus on the real issue.  Otherwise, it's almost impossible to guess what the underlying problem is. -- Scott Do you if it's normal? rank    self+desc       self    desc    count   class 1.0000  121.487M        121.487M        0.000M  943239  char[] 0.8121  98.662M 98.662M 0.000M  78702   byte[] It depends on the caching in your system.  What do the next few entries show? The difficulty with char[] and byte[] by themselves is that they're generally held by other objects like String or a cache.  If you have a big cache, then that size could be perfectly normal.  If they're held by non-caching objects, then it's likely a leak. -- Scott Thanks, Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Wed Apr 01 21:28:08 CEST 2009</date>
    <body>Scott, Scott Ferguson escreveu: It depends on the caching in your system.  What do the next few entries show? The difficulty with char[] and byte[] by themselves is that they're generally held by other objects like String or a cache.  If you have a big cache, then that size could be perfectly normal.  If they're held by non-caching objects, then it's likely a leak. So it seems to be cache: rank    self+desc       self    desc    count   class 1.0000  123.367M        123.367M        0.000M  965651  char[] 0.8045  99.249M         99.249M         0.000M  78774   byte[] 0.7537  92.977M         20.117M         72.860M         878934  java.lang.String 0.5117  63.124M         0.046M  63.078M         1009 com.caucho.db.store.ReadBlock 0.3217 	39.690M 	6.001M 	33.688M 	65552 com.caucho.server.dispatch.Invocation 0.2474  30.527M         7.157M  23.370M         91701   java.lang.Object[] 0.2155  26.582M         3.574M  23.009M         156144 com.caucho.util.CharBuffer 0.1693  20.885M         0.566M  20.318M         14849   java.util.HashMap 0.1569  19.353M         3.071M  16.283M         134164  java.util.HashMap$Entry 0.1110  13.697M         0.014M  13.684M         253 railo.runtime.writer.CFMLWriterImpl 0.1110  13.688M         0.005M  13.683M         310     java.lang.StringBuffer I got this dump in a slow moment, but that slow moment seemed to be an apache issue because in that moment it was too slow to open images, too. Any way, thank you for the help. I'll try to get more data. Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Sat Mar 21 10:41:02 CET 2009</date>
    <body>I have been suffering from exactly those symptoms for years. Do your httpd processes consume all the swap, with top showing some at 450Mb? (default httpd.conf values)  I.e does restarting apache alone, and not resin, cause the swap to drop back down to normal until the next slow growth starts it all again? That is my pattern. So when I profile resin theres no unusual growth even through the whole server is effectiviley dead until restart. Given that, whos to blame? Could mod_caucho somehow be at fault even though resin itself is ok? I have another identical server running a couple of PHP CMS apps, no resin or java in sight - because of this problem actually. The plan is to move everything over when stable but these have become too critical to play with. Their typical httpd swap use is 25Mb, and its the default httpd.conf. I would dearly love to know what the httpd on the failing server thinks it needs to hold onto 450Mb for, without tweaking there could be 20 of these. There are other non-quercus PHP apps running on that server btw. My "solution" is to kill child httpd processes at a far quicker rate than you'd normally want, and it works of sorts: StartServers       8 MinSpareServers    5 MaxSpareServers   20 ServerLimit      256 MaxClients       256 MaxRequestsPerChild  96 StartServers         2 MaxClients         150 MinSpareThreads     25 MaxSpareThreads     75 ThreadsPerChild     25 MaxRequestsPerChild  96 All versions prior to 3.1.6, and currently with 3.2.1 Pro http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Sat Mar 21 15:40:10 CET 2009</date>
    <body>I would plug jconsole into your resin instance and watch what's happening to the JVM memory.  Could be loose open threads (and large thread size) that grows over time and eats up free memory.  Restarting would kill all the threads and free the memory. http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html Adam ----- Original Message ---- To: General Discussion for the Resin application server Sent: Saturday, March 21, 2009 4:39:56 AM Subject: Re: [Resin-interest] Perf Issues I have been suffering from exactly those symptoms for years. Do your httpd processes consume all the swap, with top showing some at 450Mb? (default httpd.conf values)  I.e does restarting apache alone, and not resin, cause the swap to drop back down to normal until the next slow growth starts it all again? That is my pattern. So when I profile resin theres no unusual growth even through the whole server is effectiviley dead until restart. Given that, whos to blame? Could mod_caucho somehow be at fault even though resin itself is ok? I have another identical server running a couple of PHP CMS apps, no resin or java in sight - because of this problem actually. The plan is to move everything over when stable but these have become too critical to play with. Their typical httpd swap use is 25Mb, and its the default httpd.conf. I would dearly love to know what the httpd on the failing server thinks it needs to hold onto 450Mb for, without tweaking there could be 20 of these. There are other non-quercus PHP apps running on that server btw. My "solution" is to kill child httpd processes at a far quicker rate than you'd normally want, and it works of sorts: StartServers       8 MinSpareServers    5 MaxSpareServers   20 ServerLimit      256 MaxClients       256 MaxRequestsPerChild  96 StartServers         2 MaxClients         150 MinSpareThreads     25 MaxSpareThreads     75 ThreadsPerChild     25 MaxRequestsPerChild  96 All versions prior to 3.1.6, and currently with 3.2.1 Pro http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Sat Mar 21 19:35:24 CET 2009</date>
    <body>It's also worth mentioning that for serious application tuning, there is no substitute for a good profiling tool.  In the past I have had great results with JProfiler: http://www.ej-technologies.com/products/jprofiler/overview.html I've even gone so far as to take one node in a production cluster, give it a reduced load profile at the balancer (because profiling slows things down considerably), and run the profiler against it live. You'll be amazed what you discover. Jeff http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Sat Mar 21 23:26:32 CET 2009</date>
    <body>From our years using Resin and other containers, even though basically Resin, we have found basically 2 things that containers do not like: .- Swap memory. I know it's stating the obvious, but when your app is running out of memory and the GC starts working like frenzy, the worst it can happen is that the memory it is working with is on disk. That's where the CPU usage starts going up the roof and there's no way to stop the JVM but with a hard kill. .- Restarting the context. Yeah, contexts should not be restarted in production, but sometimes it happens. No matter how good a container is or how careful you are with your application, there are many third-party libraries that were not really well thought-out for a multi-classloader environment and they leave dangling references, which in many cases means the old classloader is not properly cleaned and retains, sort of, a copy of all your WEB-INF/lib/.jar's in memory. Unless you do all on your own, we consider this one a lost battle, because there are so many popular libraries that cause such problems... We don't use mod_caucho, so we don't usually have problems with Apache, so in our case we simply make sure to stay in the "safe" RAM memory zone and restart the servers once a day just to stay on the safe side as well. There are some nodes we don't restart and can stay up for months, but our environment is many small applications and they don't need to be 24/7, so that works better for us. From your description it looks more probable to be a problem of your application, but even if it is not, as the other people recommended, a memory profiler should do wonders to find out what's going on. Take a memory snapshot when the application is in regular usage and then another when the memory starts growing too much and compare them. I've used YourKit Java Profiler in those situation with the compare-snapshots option and worked quite well. Many other profilers also have that capability. S! D. S'està citant Jeff Schnitzer &amp;lt;j...@infohazard.org&amp;gt;: http://www.ej-technologies.com/products/jprofiler/overview.html http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Sun Mar 22 04:21:45 CET 2009</date>
    <body>http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html I don't know about Ronan's problem, but yours sounds like non-java- heap memory or "native" memory is being exhausted. In my experience, the biggest consumers of that are threads and graphic operations. Depending on the system you're running on, your default stack size could be quite large. Have you tried setting your stack size to a much smaller value via -Xss? Unless you're doing a lot of heavy recursion, the chance that you'll need a large stack is fairly remote. On our (very busy) Windows boxes, we use a stack size of 128K (-Xss128K). Keep in mind that on a 32-bit system (not sure what you're running on), you have only 2G of addressable memory per process. So if you define a larg(ish) java heap, you have only 2G - YourHeapSize to use for allocating memory for threads and other non-java operations, such as some graphics operations. Rob http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Sun Mar 22 12:31:01 CET 2009</date>
    <body>http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html How come this doesn't happen when I move the non-resin stuff (i.e. the PHP apps) to another server? Its Linux Fed 7, dual core, 1G Ram/4G swap. What I'm really asking is how can you be sure its not mod_caucho? Btw there are no graphics operations involved, and the PHP apps are all popular packages like Joomla and Pligg, so if these were at fault I'm sure the users would be screaming in their forums about it. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Sun Mar 22 18:05:17 CET 2009</date>
    <body>http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html I don't know that it's not mod_caucho. I'm only suggesting a possible cause and something to try. Iirc, at least some versions of resin (perhaps all) set their own stack size if the user does not specify one. If this is the case, it may be that the version you're using is setting a stack size that is larger than the default stack size of your OS (or larger than the stack size set by whatever other software you're using to run you PHP apps). Anyway, it's easy to set and easy to test. Rob http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Sun Mar 22 20:00:22 CET 2009</date>
    <body>There are profiling/memory allocation tracking tools for C and Linux... if you're seeing what looks like a memory leak, it might be worth looking into.  They're quite a bit more complicated than the equivalent java tools but years ago in another life I got a lot of mileage out of Rational Purify, which has a free trial version. Jeff http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Sun Mar 22 20:20:20 CET 2009</date>
    <body>I just looked in resin 3.1.x's bin/wrapper.pl file and it sets the stack size to 1Meg: # # Default stack size.  The 1m is a good tradeoff between stack size and # allowing more threads.  The default stack size doesn't allow enough # threads for several operating systems. # I don't know what Fedora 7's default stack size is or what stack size is being set by whatever program you're using when you're not using resin, but on a 1G machine, depending on how big your java heap is, it might not take very many threads to eat up whatever "native" memory you have left (keeping in mind that you're using that same memory pool for everything else that's running). Rob http://java.sun.com/j2se/1.5.0/docs/guide/management/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Mon Mar 23 10:24:36 CET 2009</date>
    <body>Thanks Rob, Jeff. Some excellent ideas to go on there. http://java.sun.com/j2se/1.5.0/docs/guide/management/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Mon Mar 23 10:30:35 CET 2009</date>
    <body>If you suspect the problem lies in mod_caucho, another possible test would be to use see if using mod_proxy instead would prevent it from hapenning. Depending on your settings, that might be relatively simple and would allow you to discard mod_caucho easily. S! D. Rob Lockstone escribió: http://java.sun.com/j2se/1.5.0/docs/guide/management/jconsole.html</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Perf Issues</header>
    <date>Mon Mar 23 13:37:43 CET 2009</date>
    <body>Stargazer, Stargazer escreveu: I have been suffering from exactly those symptoms for years. Do your httpd processes consume all the swap, with top showing some at 450Mb? (default httpd.conf values)  I.e does restarting apache alone, and not resin, cause the swap to drop back down to normal until the next slow growth starts it all again? Yes, it does. Exactly the same behavior reported by you... :-/ Most of the times restarting only the httpd process back it to normal. Other times I need to restart resin, too. That is my pattern. So when I profile resin theres no unusual growth even through the whole server is effectiviley dead until restart. Given that, whos to blame? Could mod_caucho somehow be at fault even though resin itself is ok? Same thoughts. Thank you, Ronan</body>
  </mail>
  <mail>
    <header>[Resin-interest] Remote &amp;amp; programmatic authentication</header>
    <date>Thu Mar 19 22:11:05 CET 2009</date>
    <body>First of all, I'd just like to say wow, I'm happy to re-discover Resin - I recall using it briefly in 2002 and I'm impressed with what you've been doing since.  It's a sharp contrast to the progress of JBoss, which has sadly become a complete wreck in the last few years.  The web beans stuff is fantastic and you're way ahead of the game. I've read most of the docs now and I'm a bit confused about how you authenticate to the container in two different scenarios: #1) A remote caller using hessian, either from another Resin instance (using DI) or from a standalone client.  I presume at a protocol level this involves basic or digest auth, but I don't see the API hooks. #2) Within the container, how do you authenticate programmatically? Ie, not using login forms or basic auth.  This is the common case of a signup form; after the user has filled out their chosen username and password I want to authenticate them to the container without forcing them to re-enter the credentials. Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote &amp;amp; programmatic authentication</header>
    <date>Fri Mar 20 00:51:23 CET 2009</date>
    <body>Answering my own question #1, I found the HessionProxyFactory.setUser() and setPassword() methods.  Great. #2 is still a mystery to me.  I'm in a servlet, how do I programmatically tell the container to "log me in" with a username and password? Thanks, Jeff</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote &amp;amp; programmatic authentication</header>
    <date>Fri Mar 20 03:40:35 CET 2009</date>
    <body>This page has a good overview of how to do it: http://www.informit.com/articles/article.aspx?p=24253&amp;amp;seqNum=7 So you set up your security constraints in your resin.xml and reference a custom authenticator inside the login-config.  The create your custom authenticator by AbstractAuthenticator. Note the code in the example is referencing: com.caucho.server.http.AbstractAuthenticator but I think you want to extend com.caucho.server.AbstractAuthenticator instead, as I think the .http. version is deprecated. - Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote &amp;amp; programmatic authentication</header>
    <date>Fri Mar 20 04:31:37 CET 2009</date>
    <body>Thanks, but that is not what I'm looking for.  The document describes building an authentication source and using automatic authentication (aka web.xml security constraints). The problem is, j2ee automatic authentication is nearly useless.  It doesn't allow for autologin cookies nor does it allow me to sign up new users - they would have to then log in again.  It blows my mind that a decade later the servlet spec hasn't addressed these simple needs. I need a way, in my web app, to programmatically say to the container "authenticate as this user/pass".  Then these credentials will be used for further calls into the EJB tier or for responding to HttpServletRequest.isUserInRole() calls.  Of course at the SPI level these will end up calling into my Resin Authenticator. This is a pretty common problem, there must be a Resin way to do it. In JBoss5, it looks like this: Thanks, Jeff http://www.informit.com/articles/article.aspx?p=24253&amp;amp;seqNum=7 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote &amp;amp; programmatic authentication</header>
    <date>Fri Mar 20 04:46:48 CET 2009</date>
    <body>I need a way, in my web app, to programmatically say to the container "authenticate as this user/pass".  Then these credentials will be used for further calls into the EJB tier or for responding to HttpServletRequest.isUserInRole() calls.  Of course at the SPI level these will end up calling into my Resin Authenticator. Ah, well I haven't used it before but there is a JdbcAuthenticator that has a "cookie-auth-query" and "cookie-auth-update" to let you automatically log someone in using a persistent cookie.  It's still not what you are describing below, but may suffice to solve automatic logins if that's the end goal. Here is a link to some details on the JdbcAuthenticator: https://www.gopay.com.cn/resin-doc/security/authentication.xtp That link might be out of date though, depending on which version of Resin you are using. Sorry if this is still on the wrong track .. I'll let the gurus give you the answer. - Aaron This is a pretty common problem, there must be a Resin way to do it. In JBoss5, it looks like this: Thanks, Jeff #2 is still a mystery to me.  I'm in a servlet, how do I programmatically tell the container to "log me in" with a username and password? This page has a good overview of how to do it: http://www.informit.com/articles/article.aspx?p=24253&amp;amp;seqNum=7 So you set up your security constraints in your resin.xml and reference a custom authenticator inside the login-config.  The create your custom authenticator by AbstractAuthenticator. Note the code in the example is referencing: com.caucho.server.http.AbstractAuthenticator but I think you want to extend com.caucho.server.AbstractAuthenticator instead, as I think the .http. version is deprecated. - Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re mote &amp;amp; programmatic authentication</header>
    <date>Fri Mar 20 18:03:56 CET 2009</date>
    <body>We accomplish this by grabbing an instance of HttpSession from the request via request.getSession(), casting that to resin's SessionImpl, and calling the login() method on that impl.  Your controller can lift the username and password out of the request and pass them in to the login method, which will then rely on whatever FormLogin and Authenticator you have configured. We use a custom Authenticator and lifted the persistent cookie code out of the JdbcAuthenticator in order to provide authentication via a persistent cookie without requiring the user re-enter their credentials.  We also use a custom FormLogin that can both provide standard form authentication and HTTP basic authentication via one class.  Our app consists of both a web client and a mobile client that communicates to the server via Hessian, so we built our authenticators and login impls to support the mix of authentication methods we required. Our user store is Berkeley DB JE/DPL, so we needed a custom authenticator that could do what JdbcAuthenticator could, but with a different store. -tyson https://www.gopay.com.cn/resin-doc/security/authentication.xtp http://www.informit.com/articles/article.aspx?p=24253&amp;amp;seqNum=7 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- View this message in context: http://www.nabble.com/Remote---programmatic-authentication-tp22609440p22624584.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote &amp;amp; programmatic authentication</header>
    <date>Fri Mar 20 18:18:09 CET 2009</date>
    <body>Correct. Yep.  Almost as bizarre as not having multipart/mime (upload) support. Resin 4.0 has refactored Resin's login/authentication (because our old model really didn't make much sense.) The new Login handles servlet/http interaction and the Authenticator handles pure user/credentials (the old model mixed the two concepts into the old ServletAuthenticator.)  So, the capabilities you're looking for would be added to a Login class.  I don't know if you're looking for customizing the Login, or if you want a more general capability in our AbstractLogin. Since the new configuration uses Java DI, your application can grab the login.  The configuration looks like: And then you could use Or (At present, the Login interface itself wouldn't be useful from a programmatic standpoint, while we could add methods to AbstractLogin.) -- Scott http://www.informit.com/articles/article.aspx?p=24253&amp;amp;seqNum=7 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote &amp;amp; programmatic authentication</header>
    <date>Sat Mar 21 19:50:24 CET 2009</date>
    <body>I have only spent a little while browsing through the Resin code, so apologies in advance if I'm misunderstanding something.  I'd love to see something like: AbstractLogin.authenticate(HttpServletRequest request, Principal user, String credential) throws LoginException I just need any method that takes a user and password, checks it against the normal authentication SPI, and (if successful) registers the credentials to the container. I don't think I would need to customize the Login class.  I wouldn't be using any of the j2ee standard auth mechanisms, just programmatic authentication, so I'm guessing I could have a BasicLogin and just never use it.  As long as I can call the auth method from my normal webapp I'll be fine. BTW we are porting the opensource SubEthaMail over to Resin right now ( http://subetha.tigris.org/ ).  If we succeed, you might want to use it for this mailing list! Jeff http://www.informit.com/articles/article.aspx?p=24253&amp;amp;seqNum=7 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote &amp;amp; programmatic authentication</header>
    <date>Mon Mar 23 14:35:56 CET 2009</date>
    <body>While on the topic of programmatic authentication, I would be interested in resin 4.x having native support for web services standards like WS-Security, WS-Trust and ultimately, a recipe for SSO integration. Of course, I can always grab a framework like OpenSSO and drop it into resin container, but having the capability available in resin and particularly supported by hessian would allow to inject web security services into our existing applications without significant refactoring, keep existing streamlined workflow and architecture. -Leonid -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Jeff Schnitzer Sent: Saturday, March 21, 2009 2:49 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Remote &amp;amp; programmatic authentication I have only spent a little while browsing through the Resin code, so apologies in advance if I'm misunderstanding something.  I'd love to see something like: AbstractLogin.authenticate(HttpServletRequest request, Principal user, String credential) throws LoginException I just need any method that takes a user and password, checks it against the normal authentication SPI, and (if successful) registers the credentials to the container. I don't think I would need to customize the Login class.  I wouldn't be using any of the j2ee standard auth mechanisms, just programmatic authentication, so I'm guessing I could have a BasicLogin and just never use it.  As long as I can call the auth method from my normal webapp I'll be fine. BTW we are porting the opensource SubEthaMail over to Resin right now ( http://subetha.tigris.org/ ).  If we succeed, you might want to use it for this mailing list! Jeff http://www.informit.com/articles/article.aspx?p=24253&amp;amp;seqNum=7 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote &amp;amp; programmatic authentication</header>
    <date>Tue Mar 24 17:58:54 CET 2009</date>
    <body>I've added this as http://bugs.caucho.com/view.php?id=3411 . It will not be in 4.0.0, because 4.0.0 is feature-frozen.  So it would be in 4.0.1. -- Scott mailto:resin-interest-boun...@caucho.com http://subetha.tigris.org/ ).  If we succeed, you might want to use it http://www.informit.com/articles/article.aspx?p=24253&amp;amp;seqNum=7 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote &amp;amp; programmatic authentication</header>
    <date>Tue Mar 24 17:59:53 CET 2009</date>
    <body>Right.  That's a logical thing to add.  The bug report is http://bugs.caucho.com/view.php?id=3412 . I'm not sure yet if it belongs in Login.  It might. http://subetha.tigris.org/ ).  If we succeed, you might want to use it Very cool!  We can take a look when it's ready. -- Scott http://www.informit.com/articles/article.aspx?p=24253&amp;amp;seqNum=7 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote &amp;amp; programmatic authentication</header>
    <date>Tue Mar 24 21:06:26 CET 2009</date>
    <body>While on that topic... I have been "fighting" through the years, since version 3.2, to get the servlet spec. to improve the security part but well, not very successfully one could say. I guess not being famous or working for a mega-vendor does not help :). Bitching at forums and blogs (sending feedback to the servlet spec feedback email was like throwing it to the trash can) I've managed to get some attention lately, http://weblogs.java.net/blog/sekhar/archive/2009/03/weblogic_to_gla.html http://forums.java.net/jive/message.jspa?messageID=337626#337626 so if some of you that think along the same lines would also to say something, we might get "the small voices" to the be heard if we push together. So feel free to add your feedback, please, so at least they cannot say any longer that "users do not complain so it must be nothing needs to change". On a side node, what we did long ago was to separate the security settings from the business logic and also divide it in two parts: .- The security model specifies the relationship between roles and users and if a user is authenticated or not. .- The security policy specifies which roles are required to perform a request, this can be done per-request-on-the-fly so the same URL can have different requirements depending on the parameters, something on the session, the context, the date... the weather ;)... whatever. The security engine asks both entities and decides (it can decide first if a user is logged in or not, and knowing which roles are required for that specific request, deny or accept the request, redirect to the login page...). Some information is passed to the business logic in case it is required for something (usually the username) and some more complex checkings can be done, but in many applications that is more than enough. That also allows us to re-use the security model between applications, sharing the security policy is not that common as it tends to be app-specific, and be able to deploy the applications on any container. In any case, I wish it was part of the spec. so I did not have to maintain the code myself, and we cannot make use of isUserInRole() etc., but in any case it's worked for us since 1998, so I think we already made the ROI positive :). S! D. S'està citant Scott Ferguson &amp;lt;f...@caucho.com&amp;gt;: http://www.informit.com/articles/article.aspx?p=24253&amp;amp;seqNum=7 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote &amp;amp; programmatic authentication</header>
    <date>Fri Mar 20 19:01:13 CET 2009</date>
    <body>FYI, everyone who is excited about JSR-299 (WebBeans/Java DI/CanDI) should lobby Sun and the JCP in favor of the CanDI spec.  There's an internal political game from members of the EJB/JavaEE group trying to weaken CanDI, mostly because they believe EJB is the true JavaEE component model, and see CanDI as some kind of competition.  (It's not, really.  CanDI strengthens EJB if you want to use EJB, but it doesn't require EJB.  I think "doesn't require EJB"  gives them heartburn.) -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Remote &amp;amp; programmatic authentication</header>
    <date>Fri Mar 20 19:24:15 CET 2009</date>
    <body>What's the best way to lobby them?  I love the new IoC stuff. -Aaron First of all, I'd just like to say wow, I'm happy to re-discover Resin - I recall using it briefly in 2002 and I'm impressed with what you've been doing since.  It's a sharp contrast to the progress of JBoss, which has sadly become a complete wreck in the last few years.  The web beans stuff is fantastic and you're way ahead of the game. FYI, everyone who is excited about JSR-299 (WebBeans/Java DI/CanDI) should lobby Sun and the JCP in favor of the CanDI spec.  There's an internal political game from members of the EJB/JavaEE group trying to weaken CanDI, mostly because they believe EJB is the true JavaEE component model, and see CanDI as some kind of competition.  (It's not, really.  CanDI strengthens EJB if you want to use EJB, but it doesn't require EJB.  I think "doesn't require EJB"  gives them heartburn.) -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Classloader issues with Axis and Resin 3.1</header>
    <date>Thu Mar 19 14:45:55 CET 2009</date>
    <body>Hai Scott, I ran into this problem recently and fixed it by replacing the saaj.jar with the axis-saaj-1.4.jar. This appeared to have no effect on resin (v3.1.8) whatsoever. Was this wise to do? Is it really not used in 3.1.x anymore? Greetz, Ronald http://bugs.caucho.com/view.php?id=2705 Hmm.  Resin shouldn't have any dependencies on saaj any more.  I can put saaj back in 3.1 and remove the dependencies in 3.2 -- Scott -- View this message in context: http://www.nabble.com/Classloader-issues-with-Axis-and-Resin-3.1-tp17490804p22600548.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Classloader issues with Axis and Resin 3.1</header>
    <date>Mon Mar 23 16:57:16 CET 2009</date>
    <body>Hi Ronald, Resin itself doesn't use SAAJ - it was only provided for our now-defunct JAX-WS implementation.  In other words, you should be safe using the replacement SAAJ jar. Emil http://bugs.caucho.com/view.php?id=2705 http://www.nabble.com/Classloader-issues-with-Axis-and-Resin-3.1-tp17490804p22600548.html http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>[Resin-interest] mod_caucho filter mapping issue</header>
    <date>Thu Mar 19 10:45:43 CET 2009</date>
    <body>Hi .. I know this has been posed before but problem similar to item http://maillist.caucho.com/pipermail/resin-interest/2007-October/001703.html . I am using URLrewrite filter to remap old pages to current ones. This works fine in resin standalone mode but I have now setup with apache fronting as i need to setup other sites on the server. I have everything working but this urlrewrite issue as it only uses filter-mappings and not a servlet-mapping. The previous resin-interest article states he managed to solve with a sethandler request. Can anyone elaborate how i could adapt to work with URLrewrite as at the mo i'm just getting 404's from apache.. can i use this sethandler command in the httpd.conf for my virtual host? any suggestions will be greatly appreciated.. _________________________________________________________________ View your Twitter and Flickr updates from one place – Learn more! http://clk.atdmt.com/UKM/go/137984870/direct/01/</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] mod_caucho filter mapping issue</header>
    <date>Thu Mar 19 15:04:06 CET 2009</date>
    <body>Can you give some concrete examples of what mappings you want to achieve with the rewrite? Is the scenario like this? 1) You have a bunch of old servlets defined like: 2) And you want users to access them via something like: http://localhost/newpath/a , and http://localhost/newpath/b without changing the servlet-mapping? Or is the scenario somehow trickier than this? From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Nath Dod Sent: Thursday, March 19, 2009 4:44 AM To: resin-interest@caucho.com Subject: [Resin-interest] mod_caucho filter mapping issue Hi .. I know this has been posed before but problem similar to item http://maillist.caucho.com/pipermail/resin-interest/2007-October/001703.html . I am using URLrewrite filter to remap old pages to current ones. This works fine in resin standalone mode but I have now setup with apache fronting as i need to setup other sites on the server. I have everything working but this urlrewrite issue as it only uses filter-mappings and not a servlet-mapping. The previous resin-interest article states he managed to solve with a sethandler request. Can anyone elaborate how i could adapt to work with URLrewrite as at the mo i'm just getting 404's from apache.. can i use this sethandler command in the httpd.conf for my virtual host? any suggestions will be greatly appreciated.. _____ Beyond Hotmail - see what else you can do with Windows Live. Find out http://clk.atdmt.com/UKM/go/134665375/direct/01/</body>
  </mail>
  <mail>
    <header>[Resin-interest] 4.0 error</header>
    <date>Sat Mar 21 16:57:16 CET 2009</date>
    <body>This seems to be broken in 4.0.S090211. I have attached two JSPs that when run throw the following error. [show] &amp;lt;javascript:show();&amp;gt;  java.lang.IllegalAccessException: Class javax.el.BeanELResolver can not access a member of class com.caucho.server.webapp.DispatchRequest with modifiers "public" --- BEGIN JSP 1 ---- http://java.sun.com/jsp/jstl/core" End test1.jsp. ---- END JSP 1 ---- ---- BEGIN JSP 2 ---- http://java.sun.com/jsp/jstl/core" http://java.sun.com/jsp/jstl/functions" Works. End test2. ---- END JSP 2 ---- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Nath Dod Sent: Thursday, March 19, 2009 4:44 AM To: resin-interest@caucho.com Subject: [Resin-interest] mod_caucho filter mapping issue Hi .. I know this has been posed before but problem similar to item http://maillist.caucho.com/pipermail/resin-interest/2007-October/001703.html . I am using URLrewrite filter to remap old pages to current ones. This works fine in resin standalone mode but I have now setup with apache fronting as i need to setup other sites on the server. I have everything working but this urlrewrite issue as it only uses filter-mappings and not a servlet-mapping. The previous resin-interest article states he managed to solve with a sethandler request. Can anyone elaborate how i could adapt to work with URLrewrite as at the mo i'm just getting 404's from apache.. can i use this sethandler command in the httpd.conf for my virtual host? any suggestions will be greatly appreciated.. _____ Beyond Hotmail - see what else you can do with Windows Live. Find out http://clk.atdmt.com/UKM/go/134665375/direct/01/</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0 error</header>
    <date>Wed Mar 25 17:47:03 CET 2009</date>
    <body>This seems to be broken in 4.0.S090211. I have attached two JSPs that when run throw the following error. [show] java.lang.IllegalAccessException: Class javax.el.BeanELResolver can not access a member of class com.caucho.server.webapp.DispatchRequest with modifiers "public" Thanks.  I've filed this as http://bugs.caucho.com/view.php?id=3417 . Most likely, it's something like a class declared package-private when it needs to be public for introspection to work. -- Scott --- BEGIN JSP 1 ---- http://java.sun.com/jsp/jstl/core" End test1.jsp. ---- END JSP 1 ---- ---- BEGIN JSP 2 ---- http://java.sun.com/jsp/jstl/core" http://java.sun.com/jsp/jstl/functions" :substringBefore(fn:substringAfter(pageContext.request.requestURI, Works. End test2. ---- END JSP 2 ---- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Nath Dod Sent: Thursday, March 19, 2009 4:44 AM To: resin-interest@caucho.com Subject: [Resin-interest] mod_caucho filter mapping issue Hi .. I know this has been posed before but problem similar to item http://maillist.caucho.com/pipermail/resin-interest/2007-October/001703.html . I am using URLrewrite filter to remap old pages to current ones. This works fine in resin standalone mode but I have now setup with apache fronting as i need to setup other sites on the server. I have everything working but this urlrewrite issue as it only uses filter- mappings and not a servlet-mapping. The previous resin-interest article states he managed to solve with a sethandler request. Can anyone elaborate how i could adapt to work with URLrewrite as at the mo i'm just getting 404's from apache.. can i use this sethandler command in the httpd.conf for my virtual host? any suggestions will be greatly appreciated.. Beyond Hotmail — see what else you can do with Windows Live. Find out more!</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0 error</header>
    <date>Sat Mar 21 22:08:38 CET 2009</date>
    <body>I don't know if this is a bug in resin or not. But you are running an older version of the snapshot. The most recent download on the http://caucho.com/download/ 2009.03.04. And, in fact, if you download it, it's actually even newer: 2009.03.18. Yours is 2009.02.11. Give the latest version a try and maybe that will solve your issue. Fwiw, the latest version isn't working for me either, but it's a different error from what you're seeing and I haven't had time to investigate it enough to file a bug or fix whatever might be wrong in our code. Rob This seems to be broken in 4.0.S090211. I have attached two JSPs that when run throw the following error. [show] java.lang.IllegalAccessException: Class javax.el.BeanELResolver can not access a member of class com.caucho.server.webapp.DispatchRequest with modifiers "public" --- BEGIN JSP 1 ---- http://java.sun.com/jsp/jstl/core" End test1.jsp. ---- END JSP 1 ---- ---- BEGIN JSP 2 ---- http://java.sun.com/jsp/jstl/core" http://java.sun.com/jsp/jstl/functions" Works. End test2. ---- END JSP 2 ---- From: resin-interest-boun...@caucho.com [ mailto:resin-interest- boun...@caucho.com] On Behalf Of Nath Dod Sent: Thursday, March 19, 2009 4:44 AM To: resin-interest@caucho.com Subject: [Resin-interest] mod_caucho filter mapping issue Hi .. I know this has been posed before but problem similar to item http://maillist.caucho.com/pipermail/resin-interest/2007-October/ 001703.html . I am using URLrewrite filter to remap old pages to current ones. This works fine in resin standalone mode but I have now setup with apache fronting as i need to setup other sites on the server. I have everything working but this urlrewrite issue as it only uses filter-mappings and not a servlet-mapping. The previous resin-interest article states he managed to solve with a sethandler request. Can anyone elaborate how i could adapt to work with URLrewrite as at the mo i'm just getting 404's from apache.. can i use this sethandler command in the httpd.conf for my virtual host? any suggestions will be greatly appreciated.. Beyond Hotmail — see what else you can do with Windows Live. Find out more!</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0 error</header>
    <date>Sat Mar 21 22:30:31 CET 2009</date>
    <body>Ah, okay I will get on the latest snapshot and re-report the error so it doesn't get lost. Thanks, Aaron http://caucho.com/download/ http://java.sun.com/jsp/jstl/core"_/ http://java.sun.com/jsp/jstl/core"_/ http://java.sun.com/jsp/jstl/functions"_/ mailto:resin-interest-boun...@caucho.com ] *On Behalf Of *Nath Dod http://maillist.caucho.com/pipermail/resin-interest/2007-October/001703.html http://clk.atdmt.com/UKM/go/134665375/direct/01/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 4.0 error</header>
    <date>Tue Mar 24 15:47:31 CET 2009</date>
    <body>Just for closure, this is indeed working in the 2009.03.18 snapshot. http://caucho.com/download/ http://java.sun.com/jsp/jstl/core"_/ http://java.sun.com/jsp/jstl/core"_/ http://java.sun.com/jsp/jstl/functions"_/</body>
  </mail>
  <mail>
    <header>[Resin-interest] Still have NullPointerException in	ClusterStoreManager of 3.2.1</header>
    <date>Thu Mar 19 10:09:41 CET 2009</date>
    <body>I'm testing my application with 3.2.1 (it is still running 3.2.0 in prod) The first time I connect to the app after start, I always have the following error , is it normal ? resin-pro 3.2.1 / macosx with : Thanks. com.caucho.server.cluster.ClusterStoreManager.accessImpl(ClusterStoreManager.java:947) com.caucho.server.cluster.ClusterObject.objectAccess(ClusterObject.java:346) com.caucho.server.session.SessionImpl.setAccess(SessionImpl.java:890) com.caucho.server.session.SessionManager.load(SessionManager.java:1258) com.caucho.server.session.SessionManager.getSession(SessionManager.java:1161) com.caucho.server.connection.AbstractHttpRequest.createSession(AbstractHttpRequest.java:1518) com.caucho.server.connection.AbstractHttpRequest.getSession(AbstractHttpRequest.java:1326) com.caucho.server.connection.HttpServletRequestImpl.getSession(HttpServletRequestImpl.java:722) _jsp._index__jsp._jspService(_index__jsp.java:30) com.caucho.jsp.JavaPage.service(JavaPage.java:61) com.caucho.jsp.Page.pageservice(Page.java:580) com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:195) com.caucho.server.cache.CacheFilterChain.doFilter(CacheFilterChain.java:201) com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:189) com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:266) com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:292) com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:577) com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java:1211) com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1152) com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:759) com.caucho.util.ThreadPool$Item.run(ThreadPool.java:681) -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Still have NullPointerException in	ClusterStoreManager of 3.2.1</header>
    <date>Thu Mar 19 21:00:53 CET 2009</date>
    <body>That's somewhat tricky because that code is entirely different in 4.0 and 3.2.1 is really 4.0.0 - 1, so I'm not exactly sure of the right response. -- Scott http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Still have NullPointerException in	ClusterStoreManager of 3.2.1</header>
    <date>Fri Mar 20 00:10:22 CET 2009</date>
    <body>All right, thanks for the answer. I'll wait for the 4.0 stable :) http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Still have NullPointerException	in	ClusterStoreManager of 3.2.1</header>
    <date>Fri Mar 20 18:51:06 CET 2009</date>
    <body>By the way, the Resin 4.0 snapshots should be usable for experimentation (not deployment yet.)  We've worked through most of the regression failures and added the bulk of the refactoring and features. There's still cleanup and some features to be done.  The most important bits still missing: * stress testing (especially for the new clustering model) * boundary cases, especially for the dynamic servers * load balancer upgrade/integration with dynamic servers * servlet 3.0 pass (we added the capabilities for the new comet, but not the new config stuff.) -- Scott http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Still have NullPointerException	in	ClusterStoreManager of 3.2.1</header>
    <date>Fri Mar 20 19:11:13 CET 2009</date>
    <body>ok thanks for the info. http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>[Resin-interest] Hessian changes from Resin 3.0.x-3.1.x-3.2.x</header>
    <date>Thu Mar 19 05:30:26 CET 2009</date>
    <body>Hi. I'm using HessianKit to connect to a resin/hessian server setup. I build and deploy against three different Resin installations. One runs a version of 3.0, another 3.1, and a third 3.2. In the 3.0 and 3.1 installations, variables of type java.util.Date ended up getting wrapped in a dictionary with key "value". In Objective-C (the client), I had to get at them with code like this: because of this. I just pointed my client at my new 3.2.1 resin installation, and this is no longer the case; the Date object is not wrapped in a dictionary. Now, the client code hasn't changed from one version to the next. Also: I have a hessian-3.2.1.jar in the WEB-INF/lib directory of my webapp. But I have a feeling that's being ignored, since the hessian classes are also in resin.jar. Is there any way to put my own hessian version in a particular webapp? TIA, -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Can't start resin on port 80,	but 8080 okay (as root)</header>
    <date>Wed Mar 18 20:20:17 CET 2009</date>
    <body>Resin-3.2.1 (built Fri, 17 Oct 2008 04:11:01 PDT) I can't seem to run resin on port 80. I can run it on 8080 just fine, but when I change the config file to "80", I get: Can't use JNI to listen to port '0.0.0.0:80' because JNI support has not been compiled I'm launching it as root, but I've specified a non-root user, so I also get: INFO: com.caucho.config.ConfigException: &amp;lt;user-name&amp;gt; requires compiled JNI started with 'start'.  Resin cannot use &amp;lt;user-name&amp;gt; when started as a foreground process. I only seem to have this library: $ ls /usr/local/resin/current/libexec/ libresin_os.so* I followed the instructions in the Getting Started section of the PDF doc. Any ideas what I did wrong? Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can't start resin on port 80, but 8080 okay (as root)</header>
    <date>Wed Mar 18 20:46:33 CET 2009</date>
    <body>Rick, I don't think resin is picking up the right interface to listen on.  You may have to specify your hostname somewhere in the resin.conf.  I have a clustered setup, so I don't think my config file will help you much. Dan http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can't start resin on port 80, but 8080 okay (as root)</header>
    <date>Wed Mar 18 20:53:31 CET 2009</date>
    <body>On many UNIX systems only the root user can bind to ports below 1024, with out some tricks.  That's probably your situation since it works fine on port 8080 but not port 80.  If you comment out the user-name section and run it as root, it works fine on port 80? Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can't start resin on port 80,	but 8080 okay (as root)</header>
    <date>Wed Mar 18 21:25:39 CET 2009</date>
    <body>It does; I tried that right after sending the original post. But I thought resin was set up to do the binding (launched as root) then run as a different user after that. http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Select() vs poll()</header>
    <date>Wed Mar 18 01:50:17 CET 2009</date>
    <body>To answer my own question, compile with -DPOLL T</body>
  </mail>
  <mail>
    <header>[Resin-interest] select() vs poll()</header>
    <date>Thu Mar 19 14:27:52 CET 2009</date>
    <body>Looks like Solaris has an epoll() alternative via port_create(). http://developers.sun.com/solaris/articles/event_completion.html T</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] select() vs poll()</header>
    <date>Thu Mar 19 17:42:22 CET 2009</date>
    <body>Looks like Solaris has an epoll() alternative via port_create(). http://developers.sun.com/solaris/articles/event_completion.html Thanks.  I've added it as a bug report at http://bugs.caucho.com/view.php?id=3398 -- Scott T</body>
  </mail>
  <mail>
    <header>[Resin-interest] 3.0.23 select()</header>
    <date>Tue Mar 17 21:21:48 CET 2009</date>
    <body>Resin 3.0.23 uses the select() API.  This limits the server to only 1024 file descriptors.  Is there a version of Resin converted to use poll()? Thanks, T</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.0.23 select()</header>
    <date>Wed Mar 18 00:44:20 CET 2009</date>
    <body>3.1 uses poll or epoll when it's available. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin on multiple CPUs</header>
    <date>Tue Mar 17 10:09:10 CET 2009</date>
    <body>Is there anyone that is running Resin on multiple CPUs that could tell me if you did some special configuration to get this going? We are currently running Resin 3.1.8 under Red Hat Enterprise Linux 5.3 and we are evaluating using multi CPU servers for running Resin, but it just doesn't work. When running standalone Java applications we get multi CPU use, confirmed with both "sar" and the test class below. When running the same test (in a JSP) under Resin only one CPU is used. Why??? Is there some additional configuration we have to do? (It shouldn't be a licensing issue since we have a 4 CPU evaluation license) // keep ourselves busy for a while ... --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin on multiple CPUs</header>
    <date>Tue Mar 17 15:51:49 CET 2009</date>
    <body>I ran into a similar problem, On an older version of Resin, the performance was not what I expected from a dual cpu. By creating two instances of Resin and under Windows, tying each one to a cpu by setting the affinity, we were able to get the performance I had expected. I thought I had heard that the latest JDK's had fixes for some of these issues. MC -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com]on Behalf Of Mattias Jiderhamn Sent: Tuesday, March 17, 2009 4:08 AM To: Resin Subject: [Resin-interest] Resin on multiple CPUs Is there anyone that is running Resin on multiple CPUs that could tell me if you did some special configuration to get this going? We are currently running Resin 3.1.8 under Red Hat Enterprise Linux 5.3 and we are evaluating using multi CPU servers for running Resin, but it just doesn't work. When running standalone Java applications we get multi CPU use, confirmed with both "sar" and the test class below. When running the same test (in a JSP) under Resin only one CPU is used. Why??? Is there some additional configuration we have to do? (It shouldn't be a licensing issue since we have a 4 CPU evaluation license) // keep ourselves busy for a while ... --</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin cluster session performance problems</header>
    <date>Mon Mar 16 12:16:21 CET 2009</date>
    <body>Hi list, I've posted before with regards to problems with clustered sessions, but I've had session-db related outages on two production servers within half-an-hour of each other. I'm running Resin 3.1.8 with a clustered persistent session configuration. I took a stacktrace when both servers stopped responding and analysed then with TDA. What I found was many threads waiting on the internal Resin database, like this: "hmux-10.1.1.102:6800-10944$21858188" daemon prio=10 tid=0x5bc17800 nid=0x7a9b waiting for monitor entry [0x59f7c000..0x59f7d120] java.lang.Thread.State: BLOCKED (on object monitor) at com.caucho.db.store.Store.writeBlock(Store.java:1730) - locked &amp;lt;0x79f2aaa0&amp;gt; (a java.lang.Object) at com.caucho.db.store.Block.writeImpl(Block.java:228) at com.caucho.db.store.Block.write(Block.java:215) at com.caucho.db.store.Block.commit(Block.java:178) at com.caucho.db.store.Transaction.writeData(Transaction.java:580) at com.caucho.db.sql.QueryContext.unlock(QueryContext.java:537) at com.caucho.db.sql.UpdateQuery.execute(UpdateQuery.java:118) at com.caucho.db.jdbc.PreparedStatementImpl.execute(PreparedStatementImpl.j ava:345) at com.caucho.db.jdbc.PreparedStatementImpl.executeUpdate(PreparedStatement Impl.java:313) at com.caucho.server.cluster.FileBacking.updateAccess(FileBacking.java:353) at com.caucho.server.cluster.ClusterStore.updateAccess(ClusterStore.java:79 1) at com.caucho.server.hmux.HmuxClusterRequest.accessObject(HmuxClusterReques t.java:473) at com.caucho.server.hmux.HmuxClusterRequest.handleRequest(HmuxClusterReque st.java:215) at com.caucho.server.hmux.HmuxRequest.scanHeaders(HmuxRequest.java:655) at com.caucho.server.hmux.HmuxRequest.handleRequest(HmuxRequest.java:363) at com.caucho.server.port.TcpConnection.run(TcpConnection.java:682) - locked &amp;lt;0xaf6462c8&amp;gt; (a java.lang.Object) at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:730) at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:649) at java.lang.Thread.run(Thread.java:619) The session database currently stands at the 33Mb mark, which doesn't seem excessive to me. Is there anything I can do to get to the bottom of the and solve this. I'm unable to switch to database backed sessions due to issues with expired sessions not being pushed out to all nodes in the cluster (I've pressed logout but I'm still logged in - posted about this before). Any help would be greatly appreciated. rgds, Richard Richard Grantham Development ------------------------------- rgrant...@limehousesoftware.co.uk Limehouse Software Ltd DDI: (020) 7566 3324 Main: (020) 7566 3320 Fax: (020) 7566 3321 Limehouse Software Ltd Bridewell Gate 9 Bridewell Place London EC4V 6AW Check out Limehouse Software's innovative solutions www.limehousesoftware.co.uk - Transforming the way you publish and consult on information The information contained in this e-mail or in any attachments is confidential and is intended solely for the named addressee only. Access to this e-mail by anyone else is unauthorised. If you are not the intended recipient, please notify Limehouse Software Ltd immediately by returning this e-mail to sender or calling 020 7566 3320 and do not read, use or disseminate the information. Opinions expressed in this e-mail are those of the sender and not necessarily the company. Although an active anti-virus policy is operated, the company accepts no liability for any damage caused by any virus transmitted by this e-mail, including any attachments.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin cluster session performance problems</header>
    <date>Mon Mar 16 19:21:37 CET 2009</date>
    <body>Can you send me the full thread dump?  I'd need to look through the other threads to see what's holding that lock. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] java.lang.NoClassDefFoundError: javax/faces/application/Application</header>
    <date>Mon Mar 16 11:03:20 CET 2009</date>
    <body>Greetz, I'm having a problem with building my Resin server in MyEclipse. Can anyone help me out on this? I get the following exception: javax/faces/application/Application javax.faces.webapp.FacesServlet.init(FacesServlet.java:80) com.caucho.server.dispatch.ServletConfigImpl.createServletImpl(ServletConfigImpl.java:830) com.caucho.server.dispatch.ServletConfigImpl.createServlet(ServletConfigImpl.java:732) com.caucho.server.dispatch.ServletManager.init(ServletManager.java:159) com.caucho.server.webapp.WebApp.start(WebApp.java:1872) com.caucho.server.deploy.DeployController.startImpl(DeployController.java:667) com.caucho.server.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:72) com.caucho.server.deploy.DeployController.startOnInit(DeployController.java:549) com.caucho.server.deploy.DeployContainer.start(DeployContainer.java:160) com.caucho.server.webapp.WebAppContainer.start(WebAppContainer.java:659) com.caucho.server.deploy.DeployController.startImpl(DeployController.java:667) com.caucho.server.deploy.StartAutoRedeployAutoStrategy.startOnInit(StartAutoRedeployAutoStrategy.java:72) com.caucho.server.deploy.DeployController.startOnInit(DeployController.java:549) com.caucho.server.deploy.DeployContainer.start(DeployContainer.java:160) com.caucho.server.host.HostContainer.start(HostContainer.java:484) com.caucho.server.cluster.Server.start(Server.java:1315) com.caucho.server.cluster.Cluster.startServer(Cluster.java:710) com.caucho.server.cluster.ClusterServer.startServer(ClusterServer.java:542) com.caucho.server.resin.Resin.start(Resin.java:703) com.caucho.server.resin.Resin.initMain(Resin.java:1157) com.caucho.server.resin.Resin.main(Resin.java:1360) -- View this message in context: http://www.nabble.com/java.lang.NoClassDefFoundError%3A-javax-faces-application-Application-tp22534835p22534835.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] java.lang.NoClassDefFoundError:	javax/faces/application/Application</header>
    <date>Mon Mar 16 19:56:42 CET 2009</date>
    <body>It looks like the jsf.jar is missing from your classpath.  You might need to add it in the eclipse configuration. -- Scott http://www.nabble.com/java.lang.NoClassDefFoundError%3A-javax-faces-application-Application-tp22534835p22534835.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] select-manager warning,	but can't find it anywhere</header>
    <date>Sat Mar 14 01:20:53 CET 2009</date>
    <body>Ah! So I should include a line to disable it. Since this is resin open source, shouldn't it default to off? :-) Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] select-manager warning,	but can't find it anywhere</header>
    <date>Sat Mar 14 01:32:55 CET 2009</date>
    <body>Scott, where is the documentation for the &amp;lt;select-manager&amp;gt; tag? In general, there seem to be many tags not available in any given version's config tag index. Using the search feature of your site turned up this release note: "The &amp;lt;select-manager&amp;gt; tag replaces the resin:log was another tag I had trouble finding. The 3.2.1 PDF doesn't mention resin:log or select-manager. Am I just looking in the wrong places? TIA, http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] UnsatisfiedLinkError: no resin in java.library.path</header>
    <date>Sat Mar 14 01:19:56 CET 2009</date>
    <body>I can find some old references to this problem, but nothing seems to apply. In my case, I have: $ file /usr/local/resin/current/libexec/libresin_os.so /usr/local/resin/current/libexec/libresin_os.so: ELF 32-bit LSB shared object, Intel 80386, version 1 (SYSV), not stripped Starting resin 3.2.1 with -verbose shows (among other things): DYLD_LIBRARY_PATH: /usr/local/resin/current/libexec RESIN_HOME: /usr/local/resin/current LD_LIBRARY_PATH: /usr/local/resin/current/libexec /usr/local/java/versions/jdk1.6.0_12/jre/lib/i386/ client /usr/local/java/versions/jdk1.6.0_12/jre/lib/i386 /usr/local/java/versions/jdk1.6.0_12/jre/../lib/i386 Logging output shows: [03/13 16:11:12.967]  FINE (com.caucho.util.CauchoSystem) java.lang.UnsatisfiedLinkError: no resin in java.library.path [03/13 16:11:12.967]    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1709) [03/13 16:11:12.967]    at java.lang.Runtime.loadLibrary0(Runtime.java: 823) [03/13 16:11:12.967]    at java.lang.System.loadLibrary(System.java: 1030) [03/13 16:11:12.967]    at com.caucho.server.util.CauchoSystem.&amp;lt;clinit&amp;gt;(CauchoSystem.java:489) [03/13 16:11:12.967]    at com.caucho.log.TimestampFilter.write(TimestampFilter.java:202) [03/13 16:11:12.967]    at com.caucho.vfs.WriteStream.flush(WriteStream.java:358) [03/13 16:11:12.967]    at com.caucho.log.StreamHandler.publish(StreamHandler.java:97) [03/13 16:11:12.967]    at com.caucho.log.SubHandler.publish(SubHandler.java:60) [03/13 16:11:12.967]    at com.caucho.log.EnvironmentLogger.log(EnvironmentLogger.java:329) [03/13 16:11:12.967]    at java.util.logging.Logger.doLog(Logger.java: 480) . . . [03/13 16:11:13.019]  INFO (com.caucho.config.core.ResinLog) java.library.path: /usr/local/java/versions/jdk1.6.0_12/jre/lib/i386/ client:/usr/local/java/versions/jdk1.6.0_12/jre/lib/i386:/usr/local/ java/versions/jdk1.6.0_12/jre/../lib/i386:/usr/local/resin/current/ libexec:/usr/jdk/packages/lib/i386:/lib:/usr/lib So, it seems to have the proper directories on the path, and there's a libresin_os, but no libresin. I followed the quick-start instructios in the 3.2.1 docs. Any suggestions? TIA, -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] select-manager warning, but can't find it anywhere</header>
    <date>Sat Mar 14 01:07:56 CET 2009</date>
    <body>I'm getting the following warning when Resin 3.2.1 starts, but I've grepped through all of resin and my webapp, and there's no use of select-manager anywhere: [03/13 15:51:01.598]  WARNING (com.caucho.server.cluster.Server) 'select-manager' requires Resin Professional.  See http:// www.caucho.com for information and licensing. It seems implicit from something else. Any ideas? TIA, -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] select-manager warning,	but can't find it anywhere</header>
    <date>Sat Mar 14 01:14:55 CET 2009</date>
    <body>The select-manager defaults to being enabled.  The select manager is what would allow Resin to handle 1000s of keepalive requests (assuming smallmem mode.)  Otherwise, you have a thread per keepalive request. It's primarily intended for heavily loaded sites. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Troubleshooting class load issues</header>
    <date>Fri Mar 13 21:31:29 CET 2009</date>
    <body>Hi. I recently installed 3.2.1 on a new machine, and I'm having issues with my webapp. While I don't get class load errors, I do get NoSuchMethod errors. This webapp works on two different platforms with 3.0.x and 3.1.x versions of Resin, but not on NexentaOS with 3.2.1. I tried turning up the logging on the caucho classes, but nothing significant seems to appear. Any suggestions on how to troubleshoot an error like this? Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] 3.2.1 installed,	getting NoSuchMethodError errors in my webapp</header>
    <date>Fri Mar 13 07:09:20 CET 2009</date>
    <body>Hi. I've been setting up a new server, and I decided to go with resin 3.2.1. It seemed to install and run fine, but when I added my webapp, I'm getting a series of odd errors. org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'service' defined in ServletContext resource [/ nested exception is java.lang.NoSuchMethodError: org.springframework.util.ClassUtils.getAllInterfacesForClass(Ljava/ I don't get any class not found errors (I did, until I remembered to set the tree-loader for my apps). This same app runs just fine on resin 3.1.5 and 3.0.23. I know it's finding at least some of my jars, because before the tree-loader, the jdbc driver wouldn't load, and afterward, it did. I'm kind of at a loss on how to proceed. Also, I'm getting this: java.lang.UnsatisfiedLinkError: no resin in java.library.path Not sure why; I followed the quick start docs for 3.2.1. $ java -version java version "1.6.0_12" Java(TM) SE Runtime Environment (build 1.6.0_12-b04) Java HotSpot(TM) Client VM (build 11.2-b01, mixed mode) Any suggestions would be much appreciated. Thanks! -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] SOLVED 3.2.1 installed,	getting NoSuchMethodError errors in my webapp</header>
    <date>Sat Mar 14 07:22:07 CET 2009</date>
    <body>Well, I've worked around the problem, but I don't understand it. I was using the maven ant plugin to fetch dependencies. One of them was a springframework jar, which depended on a version of spring-beans. When I put in an explicit request for spring-beans (most recent version), the problem went away. What I don't understand is why it worked just fine in two other installations, running the exact same deployment (of the webapp). -- Rick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Removing generated code from WEB-INF/work/_jsp/	structure</header>
    <date>Fri Mar 13 05:43:15 CET 2009</date>
    <body>Until recently we have removed the work directory when making code and content changes.  We now have the flexibility to modify, add, and remove content related JSPs individually.  While adding and modifying work as expected, removing a JSP does not result in an eventual removal of the associated generated code files in the work directory. I've not come across anything that appears to account for the removal of a single JSP.  Is there a setting that will expire files in the work directory to cover this instance?  My only thought at the moment is to remove the work directory during major content pushes when the application is restarted as part of the push. David</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Removing generated code from	WEB-INF/work/_jsp/structure</header>
    <date>Fri Mar 13 09:17:29 CET 2009</date>
    <body>You might want to check http://caucho.com/resin/doc/webapp-tags.xtp#jsp ATTRIBUTE       DESCRIPTION                             DEFAULT ... require-source  Return 404 when JSP source is deleted   false But I haven't checked if this setting is deleting the content from work-directory. Regards, Steffen mailto:resin-interest-boun...@caucho.com ] Im Auftrag von david day http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin-interest Digest, Vol 33, Issue 15</header>
    <date>Fri Mar 13 01:17:08 CET 2009</date>
    <body>Thanks Kai for your reply, I'm using the opensource version - upgraded now to 3.1.8 and still have the same problem. Will propably have to try to isolate and try the issue with a webapp that has just one servlet and the listener. Or then again jump back to Glassfish :-D -huima</body>
  </mail>
  <mail>
    <header>[Resin-interest] caucho-status</header>
    <date>Thu Mar 12 20:07:26 CET 2009</date>
    <body>Hi, What exactly mean the numbers inside "Pooled" column in a caucho-status? When it should be 0/1/2? Thanks, Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] caucho-status</header>
    <date>Thu Mar 12 20:39:30 CET 2009</date>
    <body>It's the number of idle connections from mod_caucho to Resin. You'll generally only see 0/1 unless you're using the worker model or running under windows. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] caucho-status</header>
    <date>Thu Mar 12 21:08:35 CET 2009</date>
    <body>Thank you Scott, Understood, Ronan Scott Ferguson escreveu: Hi, What exactly mean the numbers inside "Pooled" column in a caucho- status? When it should be 0/1/2? It's the number of idle connections from mod_caucho to Resin. You'll generally only see 0/1 unless you're using the worker model or running under windows. -- Scott Thanks, Ronan</body>
  </mail>
  <mail>
    <header>[Resin-interest] web analytics piwik in quercus</header>
    <date>Wed Mar 11 17:38:47 CET 2009</date>
    <body>Hello I need an internal web analytics tools for a web site, and I only know php one. I tried to compile piwik 0.2.31 with resin 3.2.0 and 3.2,1 but have an error with the toArray() function at compilation time: 'toArray' is an unknown method of binary(12) "Installation". in 'Users/rc/ADLhtml/z_resintest/testpiwik/webapp/core/FrontController.php' at the line 228 This software is great but uses many libs including Zend. Can someone give me an advice on how to solve this (I don't know a lot about php), or does someone know a java web analytics tool that does not need external service ? Thanks -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] web analytics piwik in quercus</header>
    <date>Fri Mar 13 14:12:19 CET 2009</date>
    <body>Any info would be very much appreciated. Which web analytics tool do you use for your public web sites ? thanks -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>[Resin-interest]  resin.conf vs resin-web.xml</header>
    <date>Wed Mar 11 08:41:09 CET 2009</date>
    <body>I've started researching &amp;lt;rewrite-dispatch&amp;gt; and &amp;lt;ip-constraint&amp;gt; in an effort to move more configuration from Apache to Resin.  I've found quite a few threads on these that discuss settings in both about why one is used over the other. Are settings such as these available in either resin-web.xml or resin.conf?  If so, is the choice simply a management decision?  With the way we divide management of the applications, using resin.conf is preferred for these types of settings. Also, is resin.conf interchangeable with resin.xml?  Did this start with 3.2 or farther back? David</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin.conf vs resin-web.xml</header>
    <date>Wed Mar 11 14:13:19 CET 2009</date>
    <body>If you look at the config you can see this line: If you look at that file: So essentially you can put anything in any of these files and it will work. http://maillist.caucho.com/mailman/listinfo/resin-interest -- -jk</body>
  </mail>
  <mail>
    <header>[Resin-interest] Sharing cluster-sessions across multiple clusters.</header>
    <date>Wed Mar 11 07:56:11 CET 2009</date>
    <body>Hi, We are using the loadbalance/dispatch pretty much like in this example: http://www.caucho.com/resin/doc/resin-clustering.xtp#Dispatching where /foo dispatches to the foo-tier and /bar dispatches to the bar-bar The problem is with cluster-sessions in this setup is that foo-tier and bar-tier runs seperately while we want to maintain logins etc. across both clusters, since they are both part of the same "application", just with different responsibilities. So, is there any way to make foo-tier and bar-tier work as one cluster session-wise ? Kind regards, Anders.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Sharing cluster-sessions across multiple	clusters.</header>
    <date>Wed Mar 11 22:03:31 CET 2009</date>
    <body>Hi, We are using the loadbalance/dispatch pretty much like in this example: http://www.caucho.com/resin/doc/resin-clustering.xtp#Dispatching where /foo dispatches to the foo-tier and /bar dispatches to the bar-bar The problem is with cluster-sessions in this setup is that foo-tier and bar-tier runs seperately while we want to maintain logins etc. across both clusters, since they are both part of the same "application", just with different responsibilities. So, is there any way to make foo-tier and bar-tier work as one cluster session-wise ? Not currently.  The clusters are entirely separate from each other. You could create a small database app to store the login information that would be shared for the two servers (and possibly cached in the session.) -- Scott Kind regards, Anders.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Session-timeout in web.xml has no effect</header>
    <date>Wed Mar 11 00:39:48 CET 2009</date>
    <body>Hi all, we're running resin 3.17a and seem to have a problem with session timeouts. If I have in web.xml defined: http://caucho.com/ns/resin" It does not seem to have any effect on sessions. I added session listener and outputted debugging information: @Override log.info("New session started " + arg0.getSession().getId() + " creationtime " + arg0.getSession().getCreationTime() + " now is " + new Date() + " max interval " @Override log .info("Session destroyed " + arg0.getSession().getId() + " lifespan " + (System.currentTimeMillis() - arg0.getSession() .getCreationTime()) + " now is " + new Date() + " last accessed " + arg0.getSession().getLastAccessedTime() + " max interval " It seemed that max inactive interval on sessions was 10 minutes, no matter what I set for session timeout in web.xml. To get longer sessions, I then had to add in sessionlistener: Any thoughts on where the problem might we lurking? -huima</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Session-timeout in web.xml has no effect</header>
    <date>Wed Mar 11 17:25:45 CET 2009</date>
    <body>Hi Heimo, I'm using 3.1.8 Pro and have following configuration working: This gives me max interval 1800 with your logging code and that is 30 minutes, as promised. So, at least 3.1.8 works, haven't ever used 3.17a (do you mean 3.1.7 here?). Cheers, Kai 2009/3/11 Heimo Laukkanen &amp;lt;hu...@iki.fi&amp;gt;: http://caucho.com/ns/resin" http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin Maven Plugin 3.2.1</header>
    <date>Tue Mar 10 22:43:22 CET 2009</date>
    <body>Hi, I just upgraded the resin-maven-plugin from 3.1.5 to 3.2.1.  The first time I entered "mvn resin:run", it began downloading a ton of libraries and eventually failed, When I try to launch Resin via a "mvn resin:run", Maven fails with a number of missing dependencies. It seems that the Caucho M2 Repository is missing a number of these dependencies: resin-ejb:jar:3.2.1 resin-j2ee-management:jar:3.2.1 resin-jca:jar:3.2.1 resin-jms:jar:3.2.1 resin-jsdk:jar:3.2.1 etc... Why are these dependencies not found in the Caucho M2 Repo?  ( http://caucho.com/m2 ) This is from my pom.xml: Regards, Rob</body>
  </mail>
  <mail>
    <header>[Resin-interest] Problem with rollover logs</header>
    <date>Tue Mar 10 21:59:19 CET 2009</date>
    <body>Hi! I just migrated from Resin 3.0.15 pro to 3.1.8 pro and have a problem with log rollovers on Windows. I have defined the logs like this into web-app-default: Actually I use rollover-period with a longer time in production, the above config just makes it faster to get to the error. I'm running Resin as a Windows service with local system account. Now, when the rollover happens, I see that the old log file gets renamed and a new log file created, but the new file gets created as read-only and writing to it fails with the following stack trace: [2009-03-10 22:44:59] Can't create log directory /C:/Progs/app/log/app.log java.io.IOException: 'C:\Progs\app\log\app.log' permission denied at com.caucho.vfs.JniFilePathImpl.nativeOpenWrite(Native Method) at com.caucho.vfs.JniFilePathImpl.openAppendImpl(JniFilePathImpl.java:422) at com.caucho.vfs.Path.openAppend(Path.java:1119) at com.caucho.log.AbstractRolloverLog.openLog(AbstractRolloverLog.java:504) ... Does anyone have any idea why Resin creates the new log file as read-only? Cheers, Kai</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problem with rollover logs</header>
    <date>Tue Mar 10 22:12:40 CET 2009</date>
    <body>It shouldn't.  They should be opened as read/write.  I've added this as http://bugs.caucho.com/view.php?id=3382 -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problem with rollover logs</header>
    <date>Tue Mar 10 23:41:30 CET 2009</date>
    <body>Can this bug be upgraded to Super Major Urgent? Ok, seriously, after hounding my management for weeks to finalize our Caucho contract, it's finally in "Accounting" to do the Purchase Order and release the funds. Then I'm on a tight schedule to start the upgrade process. I was planning on using 3.1.8. But if this bug is real, it makes 3.1.8 essentially useless for us because we rely on our log files and I can't upgrade to 3.1.8 and then upgrade *again* in a few weeks or months after this has been fixed. Rob http://bugs.caucho.com/view.php?id=3382 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problem with rollover logs</header>
    <date>Wed Mar 11 08:49:11 CET 2009</date>
    <body>Hi Rob, Can you (or anyone) reproduce this? The stack trace tells that the problem might lie with jni stuff, so I'm going to check if it works with non-pro Resin. Of course this is not a sufficient solution as we also planned to go into production with 3.1.8 and have to wait for a solution for this. Cheers, Kai 2009/3/11 Rob Lockstone &amp;lt;lockst...@mac.com&amp;gt;: http://bugs.caucho.com/view.php?id=3382 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problem with rollover logs</header>
    <date>Wed Mar 11 09:51:12 CET 2009</date>
    <body>Hi all, I did some more investigation and it seems that if I remove the Pro license, the rollovers start to work! So, this has definitely something to do with the Pro-stuff. The behavior is also not consistent in pro, because it sometimes manages to create the new log file correctly, but mostly fails this and creates it as read-only. Pretty spooky stuff... Cheers, Kai 2009/3/10 Kai Virkki &amp;lt;kai.vir...@gmail.com&amp;gt;:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problem with rollover logs</header>
    <date>Wed Mar 11 20:34:18 CET 2009</date>
    <body>It's a C/truncate/open issue specific to win32.  The new snapshot should have the fix. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problem with rollover logs</header>
    <date>Wed Mar 11 20:39:20 CET 2009</date>
    <body>Does that mean it won't happen on Windows 64-bit machines? Or are you speaking in general "Win32" API terms? Rob http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problem with rollover logs</header>
    <date>Wed Mar 11 21:23:27 CET 2009</date>
    <body>Sorry, all windows.  It's not 32-bit specific. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problem with rollover logs</header>
    <date>Wed Mar 11 23:08:41 CET 2009</date>
    <body>Thanks, Scott. Is there a schedule for the 3.1.9 release? Rob http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problem with rollover logs</header>
    <date>Thu Apr 16 09:50:37 CEST 2009</date>
    <body>Hi! BTW, Resin 3.1.9 was released earlier this week and the log rollover problem is fixed! :) Cheers, Kai 2009/3/12 Rob Lockstone &amp;lt;lockst...@mac.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problem with rollover logs</header>
    <date>Thu Apr 16 17:12:20 CEST 2009</date>
    <body>Good news! http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 19:01:04 CET 2009</date>
    <body>Thanks for asking this Aaron!  We're getting a lot of useful feedback. (You tell that you've hit a nerve when so many people respond so quickly... :-)) the equation, the complexity goes way up.  If there's any way you can avoid using Apache with Resin, I would recommend it.  For those who need things like mod_perl or run other application servers, you may have no other choice. Someone else mentioned Apache mod_rewrite, which we have an alternative for in our rewrite dispatch rules: http://caucho.com/resin/doc/rewrite-tags.xtp I find the XML syntax much more readable than the line-noise syntax of mod_rewrite. Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.0 and 3.1 with one Apache?</header>
    <date>Tue Mar 10 14:46:28 CET 2009</date>
    <body>Greetings, We run several web applications on Resin 3.0 with Apache and mod_caucho as a front-end. For a new web application that we're developing, which will run under the same site, we'd like to use Resin 3.1 in a different JVM. Something like this: +---&amp;gt; Web-app a (/a) (Resin 3.0, port 6802) | Apache--+---&amp;gt; Web-app b (/b) (Resin 3.0, port 6802) | +---&amp;gt; Web-app c (/c) (Resin 3.1, port 6800) We use Location-based dispatching to do this. Our configuration looks like this: # # mod_caucho Resin Configuration # LoadModule caucho_module /usr/libexec/apache2/mod_caucho.so ResinConfigServer localhost 6800 CauchoConfigCacheDirectory /tmp CauchoStatus yes ResinConfigServer localhost 6802 CauchoConfigCacheDirectory /tmp CauchoStatus yes We're using the mod_caucho from Resin 3.1 for requests to both Resin instances. This works well in basic tests but I'm wondering if there's anything we need to be aware of while using mod_caucho from Resin 3.1 with Resin 3.0. I would hate to find out that we were doing something risky when we got to our load tests so it seemed wise to ask the community in advance. Thanks, - Hari</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.0 and 3.1 with one Apache?</header>
    <date>Tue Mar 10 18:00:48 CET 2009</date>
    <body>I wouldn't recommend this, because we do change the communication between the two from time to time (generally relating to the pooling configuration items.) You might consider using something like mod_proxy for one of the versions.  Because mod_proxy just uses HTTP as the communication protocol, which any version of Resin understands, you'd avoid any conflict. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 18:14:56 CET 2009</date>
    <body>After watching a few of these threads about people using mod_caucho with Apache, it dawned on me to ask an open-ended question: Why use Apache at all? I am sure there are good reasons for it out there, so I am just curious what the use-case is for using Apache plus Resin instead of using just Resin?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 18:21:54 CET 2009</date>
    <body>Some of my developers prefer how Apache logs activity. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 18:29:55 CET 2009</date>
    <body>Can you give some more details?  The Apache /server-status or the log output or something else?  Some of that logging might be straightforward to add to Resin. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 18:40:53 CET 2009</date>
    <body>Apparently they prefer the log output.  I'll try to get you more specifics if I can. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 18:47:59 CET 2009</date>
    <body>I like very mych Resin as app. server. but if we talk about http servers I think apache is more reliable, more documented, more flexible and faster. e.g. Header set Cache-Control post-check=36000,pre-check=990000 Some of my developers prefer how Apache logs activity. Can you give some more details?  The Apache /server-status or the log output or something else?  Some of that logging might be straightforward to add to Resin. -- Scott After watching a few of these threads about people using mod_caucho with Apache, it dawned on me to ask an open-ended question: Why use Apache at all? I am sure there are good reasons for it out there, so I am just curious what the use-case is for using Apache plus Resin instead of using just Resin?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 19:11:35 CET 2009</date>
    <body>I like very mych Resin as app. server. but if we talk about http servers I think apache is more reliable, more documented, more flexible and faster. e.g. Header set Cache-Control post-check=36000,pre-check=990000 That's a very nice example.  I've added it as http://bugs.caucho.com/view.php?id=3381 . As part of the Resin 4.0 conversion to Java CanDI (JSR-299), we're making a standard JSR-299 syntax for rewrite-dispatch which might make that example easier (and easier to extend rewrite-dispatch): So we might be able to add something like: Or maybe (It's still a bit clunkier than Apache's syntax, but we need to keep to XML.) -- Scott Some of my developers prefer how Apache logs activity. Can you give some more details?  The Apache /server-status or the log output or something else?  Some of that logging might be straightforward to add to Resin. -- Scott After watching a few of these threads about people using mod_caucho with Apache, it dawned on me to ask an open-ended question: Why use Apache at all? I am sure there are good reasons for it out there, so I am just curious what the use-case is for using Apache plus Resin instead of using just Resin?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 18:43:54 CET 2009</date>
    <body>Hi, there's more than one reason. Serving different sites/services on the same server, not all can be served by resin for various reasons: a) Rewriting Service: mod_rewrite has no real pendent b) Different Servlet-Containers on port 80: There are a couple of services which just wont run under resin (my favorite is TeamCity which runs on a Tomcat instance because of that). c) PHP Not everything's running with resin and there are some projects out there which just need the Apache-PHP plugin d) Different resin-instances on port 80: I don't want my TestEnvironment interfere with Live Services when a restart of the container is necessary. Apache is a nice and powerful software to combine these different aspects all. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 18:49:54 CET 2009</date>
    <body>I don't agree with part 1 even, with the advent of vmware/xen/virtualbox there is no reason to cram a bunch of stuff on a single server.  It makes your infrastructure way less upgradable, reliable, and testable. a)  The rewriting in resin is pretty good, its all regex, just like any other rewrite.  You may have to learn some new stuff, but that kind of how IT works :) b)  You can do this with resin vhosts as well, either ip based or ipless. c)  You can also do this with resin :) http://quercus.caucho.com/ d) Same thing, but if you use a virtualization product its a no brainer to clone production instances for QA on the same hardware. I find resin by itself to be faster and easier to manage.  The less software you run the easier and safer your site will be.  Running apache introduces more code that you need to patch and manage, and apache is not the safest or fastest webserver on the market. Just some food for thought :) http://maillist.caucho.com/mailman/listinfo/resin-interest -- -jk</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 19:59:03 CET 2009</date>
    <body>Hi, the rewriting in resin has it's limits - at least the last time I tried (I actually wrote to this list to get a replacement in 2007 - and was directed back to mod_rewrite!). mod_rewrite is pretty powerful. You may have overlooked that I was talking about resin _not_ able to server as a servlet container for TeamCity, so I have to hook in TomCat. http://quercus.caucho.com/ No, you can't. And I don't want to bother about complaints of the 'normal' php-hacker serving low-traffic sites... I don't argue virtualization can be your friend. But handling all more servers doesn't always make your life easier! As long as one server happily fullfills the needs I wont go that road. --- Jan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 19:01:00 CET 2009</date>
    <body>These are the typical reasons.  If you're running a specific Apache module (like mod_perl) or running several different kinds of backends, or prefer the logging, or mod_rewrite works better for you than Resin's rewrite-dispatch, then Apache can be a good choice. But it doesn't usually make sense to use Apache just as a plain web- server in front of Resin, especially if you're dispatching most of the requests to Resin anyway. We have been toying with the idea of spending more time on our HttpProxy and FastCgiProxy to let people use Resin as a frontend for things like Ruby or other servers, but really aren't sure what the priority should be.  Of course, requests for rewrite-dispatch and admin/log improvements are always welcome (just add a bug report with the request.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Fri Mar 13 14:29:16 CET 2009</date>
    <body>there's more than one reason. Serving different sites/services on the same server, not all can be served by resin for various reasons: These are the typical reasons.  If you're running a specific Apache module (like mod_perl) or running several different kinds of backends, or prefer the logging, or mod_rewrite works better for you than Resin's rewrite-dispatch, then Apache can be a good choice. I didn't hear anybody talking about mod_evasive. How do you care about DoS attacks? Of course mod_evasive isn't a solution for that, but it helps a little. Helps to identify a suspicious attack when you see one or more IPs sending a huge amount of requests. Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Fri Mar 13 14:41:21 CET 2009</date>
    <body>If you have the money, you can alleviate that at another OSI level.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 20:11:35 CET 2009</date>
    <body>I would dearly love to ditch Apache! The answer for us is our dedicated hoster uses Plesk, so as there are other users/apps on it who use the Plesk PHP panel for their regular admin we have to keep that. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 18:45:53 CET 2009</date>
    <body>Static file serving, perhaps?  I don't know the current benchmarks but Apache has always had the reputation of being very fast for static files, whereas that's not what resin is optimized for. I say this from the POV of not using Apache at all, though: we use resin behind HAProxy for load balancing, and a lighttpd instance for image files. Rachel On Tue, Mar 10, 2009 at 10:14 AM, Aaron Freeman http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 18:54:02 CET 2009</date>
    <body>Actually, Resin's static file performance matches Apache's, because Apache really isn't all that fast. If you really need ultra fast static files, then something like lighttpd or nginx would be a better choice than Apache. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 19:11:27 CET 2009</date>
    <body>I actually love IIS for static content, its very fast and the caching is great.  It can beat apache hands down, but not sure on light ot ng. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- -jk</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 19:14:56 CET 2009</date>
    <body>Hi Scott, Here is my long wait question : How to configure Resin run with nginx? regards Wesley ----- Original Message ----- To: "General Discussion for the Resin application server" Sent: Wednesday, March 11, 2009 1:52 AM Subject: Re: [Resin-interest] Why Apache? http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 19:41:05 CET 2009</date>
    <body>Hmm.  nginx has a http proxy http://wiki.codemongers.com/NginxHttpProxyModule . However, it looks like they only support HTTP/1.0 on the backend, which is a big limitation because keepalives are very important in a proxy configuration.  I'd assumed they supported HTTP/1.1.  That's actually a problem. We could add a FastCgi frontend interface to Resin, which would let it run behind nginx efficiently. (e.g. for Resin 4.0.1 or 4.0.2 whenever we upgrade our own FastCgi.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 23:13:26 CET 2009</date>
    <body>Thanks Scott. How about Lighttpd? -Wesley ----- Original Message ----- To: "General Discussion for the Resin application server" Sent: Wednesday, March 11, 2009 2:30 AM Subject: Re: [Resin-interest] Why Apache? http://wiki.codemongers.com/NginxHttpProxyModule http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 19:41:02 CET 2009</date>
    <body>you may have a situation where you haven't got a single webapp, but many webapps and other creatures living under a single host.  in that case apache makes a nice top-level dispatcher, proxying requests to the various PHP, CGI, j2ee webapps, static content, and other assorted junk. -- joe</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Wed Mar 11 20:20:16 CET 2009</date>
    <body>This is my scenario. I've got 18 different webapps, mapping to hundreds of apache vhosts, each with its own security needs and varying services. We've got literally years of development tied up in the automated config generation system. Resin is a great appserver. Trying to replace Apache though is like trying to replace a dump truck with an SUV. Sure both can be used to carry stuff around, but they aren't really meant for the same things. Frederick R. Cooper Director of Information Technology The FeedRoom "The leader in live and on-demand enterprise online video solutions." P: 646.613.7860 M: 917.673.4559 F: 212.925.6471 -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Joseph Dane Sent: Tuesday, March 10, 2009 2:30 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Why Apache? you may have a situation where you haven't got a single webapp, but many webapps and other creatures living under a single host.  in that case apache makes a nice top-level dispatcher, proxying requests to the various PHP, CGI, j2ee webapps, static content, and other assorted junk. -- joe</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why Apache?</header>
    <date>Tue Mar 10 20:42:08 CET 2009</date>
    <body>Very timely question for me.  I've posted my failed attempts to build mod_caucho with no solution in sight.  Because of this I'm evaluating dropping Apache for Resin, moving some Apache services to Resin, or dropping Resin for Tomcat. I'm just beginning to go through Resin docs to see if/how some or all of these roles Apache can be done (living on port 80 with Apache, vanity urls, rewrites, reverse proxy to a tomcat app, load balancing etc.  We run multiple resin instances so I like the idea of modularizing each instance and removing a layer if I can. At the moment I am focusing on moving rewrites to Resin to avoid my current issue of a broken proxypassmatch.  With the high number of regex rewrites moved to Resin, I can get away with a simple ProxyPass and ProxyPassReverse in Apache.  This would make me happy. So ya, the short answer is moving out of Apache for my Resin apps is appealing.  Need to learn how, find out what the transfer breaks, and benchmark performance to know we've done no harm. Hopefully this discussion will continue. David</body>
  </mail>
  <mail>
    <header>[Resin-interest] ip and auth constraint</header>
    <date>Tue Mar 10 05:22:35 CET 2009</date>
    <body>hi. is it possible to use multiple security-constraint to accomplish this? like if i want to give access w/o authentication to trusted IPs listed in an ip-constraint and then redirecting all others to an auth-constraint? thanks!</body>
  </mail>
  <mail>
    <header>[Resin-interest] Extending Quercus by providing new classes</header>
    <date>Mon Mar 09 16:12:03 CET 2009</date>
    <body>The Quercus documentation explains how to extend PHP with new functions by subclassing AbstractQuercusModule and registering the derived class as an extension provider by adding its name to the service information file "classes/META-INF/services/com.caucho.quercus.QuercusModule". I was wondering if it was also possible to extend PHP with new classes that could be manipulated just as in PHP? What I had in mind was to map a subset of the functionality provided by the DOM and Xsl extensions for PHP, which are based on LibXML2 and LibXSLT, to Quercus. Code like the following could then run in Quercus: What would I have to do in order to get there? (Meanwhile I've seen that an upcoming release of Quercus will include the DOM module. That still leaves the XSL module to do, which would allow PHP code to tap into XSLT 2.0 by plugging Saxon into the JAXP interface. Pretty cool.) I tried to post this question to the quercus-interest list, but that wasn't working. Instead, I got an answer off-list by one of the Caucho engineers, which I'd like to share for everyone to benefit. The solution is easy, but as far as I can see, it has not been documented so far. In order to register a new class with Quercus, simply add the fully qualified class name to the service information file "classes/META-INF/services/com.caucho.quercus.QuercusClass". So this is what you have to do: 15:57:19,07 C:\MILU\Server\Tomcat60\webapps\quercus\WEB-INF\classes # type META-INF\services\com.caucho.quercus.QuercusClass milu.DOMDocument 15:58:03,89 C:\MILU\Server\Tomcat60\webapps\quercus\WEB-INF\classes # type milu\DOMDocument.java And then in PHP: # load some content, do some work Michael Ludwig</body>
  </mail>
  <mail>
    <header>[Resin-interest] Problems finding jar files in orbeon web	application</header>
    <date>Sun Mar 08 15:24:45 CET 2009</date>
    <body>I've been running orbeon xforms for a while now on one of my resin servers. while I haven't had any problems with it, ther's a bit of configuration that i have to do every time i install a new release and i'd really like to avoid doing it. when the orbeon war is unpacked you end up with http://java.sun.com/xml/ns/j2ee" xmlns:xsi=" http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation=" http://java.sun.com/xml/ns/j2ee http://j Orbeon Forms is an open source forms solution that handles the complexity of forms typical of the enterprise or government. It is delivered to standard web browsers (including Internet Explorer, Firefox, Safari and Opera) thanks to XForms and Ajax technology, with no need for client-side software or plugins. Orbeon Forms allows you to build fully interactive forms with features that include as-you-type validation, optional and repeated sections, always up-to-date error summaries, PDF output, full internationalization, and controls like auto-completion, tabs, dialogs, trees and menus. ................ Now if i try and access the orbeon xforms applications i get error messages about not finding any of the orbeon classes located in WEB-INF/lib/*.jar and WEB-INF/lib/private/*.jar The solution is to do:- http://java.sun.com/xml/ns/j2ee" xmlns:xsi=" http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation=" http://java.sun.com/xml/ns/j2ee http://j Orbeon Forms is an open source forms solution that handles the complexity of forms typical of the enterprise or government. It is delivered to standard web browsers (including Internet Explorer, Firefox, Safari and Opera) thanks to XForms and Ajax technology, with no need for client-side software or plugins. Orbeon Forms allows you to build fully interactive forms with features that include as-you-type validation, optional and repeated sections, always up-to-date error summaries, PDF output, full internationalization, and controls like auto-completion, tabs, dialogs, trees and menus. So I know i can't use the &amp;lt;class-loader &amp;gt;statement if I've got version="2.4" files are in WEB-INF/lib etc? Alex ***************************************************************************************** To view the terms under which this email is distributed, please go to http://www.hull.ac.uk/legal/email_disclaimer.html *****************************************************************************************</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problems finding jar files in orbeon	web	application</header>
    <date>Mon Mar 09 18:21:26 CET 2009</date>
    <body>Hi Alex, It sounds like your app-default.xml is not getting included in your resin.conf, which has those classloaders by default.  You can either import it as is done in the default resin.conf (which is probably best) or add the class loaders to a &amp;lt;web-app-default&amp;gt; in resin.conf. Take care, Emil http://java.sun.com/xml/ns/j2ee" ; xmlns:xsi=" http://www.w3.org/ http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee" ; xmlns:xsi="http:// http://java.sun.com/xml http://www.hull.ac.uk/legal/email_disclaimer.html http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problems finding jar files in	orbeonweb	application</header>
    <date>Mon Mar 09 18:39:33 CET 2009</date>
    <body>Thanks For this, I could have sworn that the app-default.xml was in there. Then again maybe it slipped out when i moved over to using a watchdog configuration supporting multiple VMS I'll check alex -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Emil Ong Sent: 09 March 2009 17:19 To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Problems finding jar files in orbeonweb application Hi Alex, It sounds like your app-default.xml is not getting included in your resin.conf, which has those classloaders by default.  You can either import it as is done in the default resin.conf (which is probably best) or add the class loaders to a &amp;lt;web-app-default&amp;gt; in resin.conf. Take care, Emil servers. configuration that i avoid http://java.sun.com/xml/ns/j2ee" xmlns:xsi=" http://www.w3.org/ xsi:schemaLocation=" http://java.sun.com/xml/ns/j2ee handles the web technology, interactive always auto-completion, messages WEB-INF/lib/*.jar and http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http:// xsi:schemaLocation=" http://java.sun.com/xml handles the web technology, interactive always auto-completion, version="2.4" jar ************************************************************************ ***************** http://www.hull.ac.uk/legal/email_disclaimer.html ************************************************************************ ***************** http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Java CanDI: contexts and dependency injection</body>
  </mail>
  <mail>
    <header>[Resin-interest] problems building resin-pro-4.0.s090304</header>
    <date>Sat Mar 07 16:55:39 CET 2009</date>
    <body>Hi, I'm trying to get resin-pro-4.0.s090304 up with JNI/SSL, but I'm not successful due to the following configure problem: # CFLAGS="-O3 -g"  ./configure --with-apxs=/usr/local/www/sbin/apxs --with-jni-include="-I/usr/java/default/include -I/usr/java/default/include/linux" --enable-jni --enable-ssl --with-java-home=/usr/java/default --with-perl=/usr/bin/perl [...] configure: creating ./config.status config.status: creating Makefile config.status: creating modules/c/src/Makefile config.status: creating modules/c/src/common/Makefile config.status: creating modules/c/src/apache2/Makefile config.status: creating modules/c/src/resin_os/Makefile config.status: error: cannot find input file: init.d/resin.in Any directions? Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>[Resin-interest] [OT] The Resin Linked In group is open for anyone	interested in Resin</header>
    <date>Fri Mar 06 17:02:44 CET 2009</date>
    <body>Those with a Linked In account might find this interesting: http://www.linkedin.com/groupInvitation?gid=132759</body>
  </mail>
  <mail>
    <header>[Resin-interest]  Change Port via web.xml</header>
    <date>Fri Mar 06 10:52:08 CET 2009</date>
    <body>Hello there! Some weeks ago I rented webspace on a hosted server with JSP-Support - a Resin is running. After enabling JSP-functionality, my websites (html and jsp) were not able to be accessed anymore without appending the port 8080 (e.g. http://myurl.com:8080/index.html , http://myurl.com:8080/test.jsp ). Without the port, the only answer was an 500-err. I don't like the fact, that I have to add the port everytime I (or someone else) wants to enter my website. After some correspondence the hoster told me, that I have to edit the web.xml, in which I can map the port 80 to every access. But how? I never found an example of someone doing this, but configuring Resin conf-file (on which I have no access - just my hoster). Any ideas? Greetings, Eric -- View this message in context: http://www.nabble.com/Change-Port-via-web.xml-tp22369236p22369236.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Change Port via web.xml</header>
    <date>Tue Mar 10 14:13:25 CET 2009</date>
    <body>Hi, I'm not sure how the hoster came to told you that, but the web.xml file is the configuration for a specific application/context inside a host, and there can be several applications configured for a host, so it asolutely makes no sense configuring the host's port at the application level. In order to configure the port, you have to have access to the resin.conf file, as that's where the host data is defined. On the other hand, the usual setup is having an Apache up-front (which has the 80 port configured) and that redirects to the appropriate resin instance. If that was the case, if the URLS do not work, one would think the Apache is not redirecting the requests correctly. "an 500-err" is certainly not enough information to know what is going on. In any case, back to the beginning, changing the server port is not someting one does from the application. It might have been a misunderstanding because it makes no sense. S! D. doneme escribió: http://myurl.com:8080/index.html , http://myurl.com:8080/test.jsp ).</body>
  </mail>
  <mail>
    <header>[Resin-interest] LDAP Connection Pooling</header>
    <date>Fri Mar 06 03:14:09 CET 2009</date>
    <body>Hello! I have an webapp that we deploy in Resin that does a whole lot of LDAP queries. As the application is written right now each query creates a new connection, performs the query, and then drops the connection. This takes on the order of 300-500ms. We're querying attributes that are indexed, and the queries themselves return results very quickly - it's the connection bring-up and tear down that takes so long. This wasn't much of an issue until we started throwing AJAX-y bits in there that do things like autocomplete fields based on LDAP queries. Obviously, this is the sort of thing that connection pooling was made for. I have started digging looking for examples of how to use LDAP connection pools, and it occurred to me that Resin may have something like this already built in, very similar to JDBC datasources.... more than once I started implementing something only to realize that Resin already had that functionally built in. I've been searching at the docs feverishly, but I'm not completely sure if I'm understanding what I'm reading. Does Resin have functionally built-in to do high-performance LDAP connection pools? We need to be able to bind to the directory as an authenticated user to perform our searches. Thanks! - Matt</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] LDAP Connection Pooling</header>
    <date>Fri Mar 06 17:49:49 CET 2009</date>
    <body>No, Resin doesn't have LDAP pools.  I'm not sure if it's possible. Because the LDAP implementations directly hook into javax.naming, there's nowhere for Resin to insert itself to pool the connections. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] LDAP Connection Pooling</header>
    <date>Fri Mar 06 19:05:58 CET 2009</date>
    <body>Thanks Scott! Thanks what I needed to know. - Matt</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] LDAP Connection Pooling</header>
    <date>Fri Mar 06 22:25:31 CET 2009</date>
    <body>You probably already found this with a google search, but I'll point it out anyway.  Sun describes simple pooling for the JNDI/LDAP stuff: http://java.sun.com/products/jndi/tutorial/ldap/connect/pool.html In addition the Spring framework has their own take on LDAP connection pooling: http://www.springsource.org/ldap Disclaimer: I haven't used any of these. -Knut http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin dies by itself</header>
    <date>Wed Mar 04 23:32:49 CET 2009</date>
    <body>I just started to see strange behaviour in which our server seems to kill itself without no apparent reason. Logs: jvm-default.log http://localhost:8080 ] active http://localhost:8080/resin-admin ] active [2009-03-05 00:01:41] closing server WebApp[ http://localhost:8080/resin-admin ] stopping http://localhost:8080 ] stopping http://localhost:8080 ] Shutting down log4j http://localhost:8080 ] Closing Spring root WebApplicationContext log4j:WARN No appenders could be found for logger (org.springframework.web.context.support.XmlWebApplicationContext). log4j:WARN Please initialize the log4j system properly. in Watchdog-manager.log [2009/03/04 22:01:45.064] Server[id=,cluster=] active [2009/03/04 22:01:45.099] WebApp[ http://resin-admin ] active [2009/03/04 22:01:45.137] WatchdogProcess[Watchdog[],1] starting Resin [2009/03/04 23:01:41.857] Watchdog stop: [2009/03/04 23:01:41.861] WatchdogProcess[Watchdog[],1] stopping Resin [2009/03/04 23:01:44.365] 'select-manager' requires Resin Professional.  See http://www.caucho.com for information and licensing. [2009/03/04 23:01:44.366] 'select-manager' requires Resin Professional.  See http://www.caucho.com for information and licensing. [2009/03/04 23:01:44.366] [2009/03/04 23:01:44.366] Linux 2.6.18-92.1.13.el5xen amd64 [2009/03/04 23:01:44.366] Java(TM) SE Runtime Environment 1.6.0_10-beta-b25, UTF-8, en [2009/03/04 23:01:44.366] Java HotSpot(TM) 64-Bit Server VM 11.0-b12, 64, mixed mode, Sun Microsystems Inc. [2009/03/04 23:01:44.366] user.name: onedidit [2009/03/04 23:01:44.369] resin.home = /opt/resin/resin-3.1.7a/ [2009/03/04 23:01:44.369] [2009/03/04 23:01:44.380] Host[resin-admin] active [2009/03/04 23:01:44.382] hmux listening to localhost.localdomain:6600 [2009/03/04 23:01:44.387] Server[id=,cluster=] active [2009/03/04 23:01:44.416] WebApp[ http://resin-admin ] active [2009/03/04 23:01:44.454] WatchdogProcess[Watchdog[],1] starting Resin [2009/03/05 00:01:41.540] Watchdog stop: [2009/03/05 00:01:41.541] WatchdogProcess[Watchdog[],1] stopping Resin [2009/03/05 00:01:43.290] java.lang.IllegalStateException: Can't start new task because of old task 'WatchdogTask[Watchdog[]]' [2009/03/05 00:01:43.290]       at com.caucho.boot.Watchdog.start(Watchdog.java:296) [2009/03/05 00:01:43.290]       at com.caucho.boot.WatchdogManager.startServer(WatchdogManager.java:295) [2009/03/05 00:01:43.290]       at com.caucho.boot.WatchdogServlet.start(WatchdogServlet.java:75) [2009/03/05 00:01:43.290]       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [2009/03/05 00:01:43.290]       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [2009/03/05 00:01:43.290]       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [2009/03/05 00:01:43.290]       at java.lang.reflect.Method.invoke(Method.java:597) [2009/03/05 00:01:43.290]       at com.caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java:180) [2009/03/05 00:01:43.290]       at com.caucho.hessian.server.HessianSkeleton.invoke(HessianSkeleton.java:109) [2009/03/05 00:01:43.290]       at com.caucho.hessian.server.HessianServlet.service(HessianServlet.java:396) [2009/03/05 00:01:43.290]       at com.caucho.server.dispatch.ServletFilterChain.doFilter(ServletFilterChain.java:103) [2009/03/05 00:01:43.290]       at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:187) [2009/03/05 00:01:43.290]       at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:266) [2009/03/05 00:01:43.290]       at com.caucho.server.hmux.HmuxRequest.handleRequest(HmuxRequest.java:435) [2009/03/05 00:01:43.290]       at com.caucho.server.port.TcpConnection.run(TcpConnection.java:678) [2009/03/05 00:01:43.290]       at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:721) [2009/03/05 00:01:43.290]       at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:643) [2009/03/05 00:01:43.290]       at java.lang.Thread.run(Thread.java:619) It seems that 00:01:41.540 watchdog process has decided to stop the resin. I don't know why as no-one was online on the machine on that time. Any help or thoughts how to debug what could be going on? -huima</body>
  </mail>
  <mail>
    <header>[Resin-interest]  Limiting access to caucho-status</header>
    <date>Wed Mar 04 22:15:27 CET 2009</date>
    <body>IP or per user/password? Have you checked out &amp;lt;Location&amp;gt;  directive? This works nicely. SetHandler default-handler Order Deny,Allow Deny from all Allow from 192.168. David</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Limiting access to caucho-status</header>
    <date>Fri Mar 06 13:14:16 CET 2009</date>
    <body>David, david day escreveu: Is there a way to limit access to "&amp;lt;site&amp;gt;/caucho-status" URL either per IP or per user/password? Have you checked out &amp;lt;Location&amp;gt;  directive? This works nicely. SetHandler default-handler Order Deny,Allow Deny from all Allow from 192.168. I did it. I helped, but caucho-status still answers when accessed via hostname:resin's port It helps but it isn't 100%. Thanks again, Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Limiting access to caucho-status</header>
    <date>Fri Mar 06 23:46:47 CET 2009</date>
    <body>OK, since you are bypassing Apache, try this.  A developer here used this method in WEB-INF/resin-web.xml http://caucho.com/ns/resin"</body>
  </mail>
  <mail>
    <header>[Resin-interest]  Apache issue</header>
    <date>Wed Mar 04 22:08:26 CET 2009</date>
    <body>Are you running caucho_module? Have you used netstat command during troubleshooting?  We had our thread-max fairly high and I was seeing mass quantities of connections to the srun port.  Shutting down the JVM would clear the connections, but it could take a long time for the count to drop.  Bouncing Apache at the same time had me going quickly.  Dropping thread-max helped. David</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Apache issue</header>
    <date>Fri Mar 06 13:11:17 CET 2009</date>
    <body>David, david day escreveu: I have a server with apache+resin-3.1.6 installed. Are you running caucho_module? Have you used netstat command during troubleshooting?  We had our thread-max fairly high and I was seeing mass quantities of connections to the srun port.  Shutting down the JVM would clear the connections, but it could take a long time for the count to drop.  Bouncing Apache at the same time had me going quickly.  Dropping thread-max helped. Thanks for answering. Well, I did. I'm not an expert in Java Application Servers, so it's possible my answer isn't 100% correct. This issue is really too weird for me. Actually, it seem we have more than one issue. Some times if a only reinit apache it solves the problem, other times not. I do need to restart resin, too. Usually (including times when the problem occurs) netstat doesn't shows a mass quantity of connections. Dropping thread-max took the system more instable. Best number for us seems to be 256. I'm sorry I don't have enough informations about this problem. Perhaps because my inexpertness with Java Application Servers. Thanks, Ronan</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin won't start with JSSE enabled</header>
    <date>Wed Mar 04 19:48:04 CET 2009</date>
    <body>My resin instance won't start if JSSE is enabled in the configuration, but I can't figure out what the problem is.  (Yes, I'm aware of the advice for using OpenSSL instead, but that's not an option for me for the time being.) And yet, if I enable JSSE *while resin is running*, it appears to work correctly. The failure message (e.g. as a result of running *service resin start*) is this: Stopping resin:/usr/local/web/conf/resin.xml:85:: java.io.FileNotFoundException: . declaration, which looks like this: I've verified that it's finding the key store okay (when I change the path to the &amp;lt;key-store-file&amp;gt;, I get a different error explaining that it can't find this file). One version of the resin http://www.caucho.com/resin/doc/port-tags.xtp#jsse-ssl that the &amp;lt;key-manager-factory&amp;gt; and &amp;lt;verify-client&amp;gt; values are mandatory, but I can't find any hints at legal values for this parameter in the Resin documentation. Nevertheless, if I comment out JSSE and start resin, I can get SSL going by uncommenting JSSE while resin is running.  It gets going without any complaints and indeed my site is accessible via SSL.  But obviously this is no good, since resin won't automatically start when it's configured in this way. I'd appreciate any hints or ideas as to what's going on. Regards, Michael</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin won't start with JSSE enabled</header>
    <date>Wed Mar 04 20:02:05 CET 2009</date>
    <body>Perhaps the key-store-file gets read by a different class at startup than it does at runtime.  Have you tried using an absolute path in the key-store-file? I use JSSE and only have the three nodes you show below. Aaron From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Michael Prescott Sent: Wednesday, March 04, 2009 12:46 PM To: General Discussion for the Resin application server Subject: [Resin-interest] Resin won't start with JSSE enabled My resin instance won't start if JSSE is enabled in the configuration, but I can't figure out what the problem is.  (Yes, I'm aware of the advice for using OpenSSL instead, but that's not an option for me for the time being.) And yet, if I enable JSSE while resin is running, it appears to work correctly. The failure message (e.g. as a result of running service resin start) is this: Stopping resin:/usr/local/web/conf/resin.xml:85:: java.io.FileNotFoundException: . declaration, which looks like this: I've verified that it's finding the key store okay (when I change the path to the &amp;lt;key-store-file&amp;gt;, I get a different error explaining that it can't find this file). http://www.caucho.com/resin/doc/port-tags.xtp#jsse-ssl resin docs states that the &amp;lt;key-manager-factory&amp;gt; and &amp;lt;verify-client&amp;gt; values are mandatory, but I can't find any hints at legal values for this parameter in the Resin documentation. Nevertheless, if I comment out JSSE and start resin, I can get SSL going by uncommenting JSSE while resin is running.  It gets going without any complaints and indeed my site is accessible via SSL.  But obviously this is no good, since resin won't automatically start when it's configured in this way. I'd appreciate any hints or ideas as to what's going on. Regards, Michael</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin won't start with JSSE enabled</header>
    <date>Wed Mar 04 20:12:07 CET 2009</date>
    <body>Well, that seems to have done it! I'd tried that in days gone by, and found it didn't work, but perhaps I wasn't being sufficiently scientific and had made some other mistake instead. Thanks very much, Aaron, I really appreciate it. Michael http://www.caucho.com/resin/doc/port-tags.xtp#jsse-ssl http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] 3.2 Docs?</header>
    <date>Wed Mar 04 18:47:54 CET 2009</date>
    <body>The 'Resin 3.2' link on the caucho.com front page takes me to the resin 4.0 http://caucho.com/resin-3.1/doc/ http://caucho.com/resin-3.1/doc/ Should I just be looking at 3.1 docs?  (If so, why the link to 3.2 on the front page?)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.2 Docs?</header>
    <date>Wed Mar 04 22:43:46 CET 2009</date>
    <body>The 'Resin 3.2' link on the caucho.com front page takes me to the resin 4.0 docs.  If I rewrite the 3.1. docs URL to say 3.2, I see a page showing 3.1. docs.  Should I just be looking at 3.1 docs?  (If so, why the link to 3.2 on the front page?) The resin docs on the caucho site are badly in need of revision, reorganization, and some TLC. Based on a private conversation I had with Emil, that is going to happen. Sorry Emil, didn't mean to "out" you! ;-) I haven't actually done a comparison, but it might be that if you download 3.2, you'll get the correct documentation and can look at it locally. OTOH, it might also just be the 3.1 docs. Rob</body>
  </mail>
  <mail>
    <header>[Resin-interest]  3.2 Docs?</header>
    <date>Thu Mar 05 01:55:04 CET 2009</date>
    <body>I'd love to see Caucho make their course material available.  I don't anticipate a training budget that includes travel, so am dependent on resin-interest and the documentation that is online.  Fortunately, documentation is good, just a bit disjointed.  I've not heard anyone talk about the courses now available, but I imagine its pretty good. Just a hint Caucho. David</body>
  </mail>
  <mail>
    <header>[Resin-interest] Load Balancing between resin 3.0.12 and 3.0.26</header>
    <date>Thu Mar 05 17:08:48 CET 2009</date>
    <body>Hi all We are currently upgrading a project. This project worked with resin 3.0.12 with a class in charge of Load Balancing. This class used a constructor for ClusterClient class from Caucho and some others methods: - openRecycle - getServerList The ClusterClient constructor and the openRecycle method are now protected in resin 3.0.26 and the method getServerList seems to be disappeared. I didn't found any explanation about these modifications. If someone has an idea about this and knows how we can continue to use this class and these methods, his help will be very appreciated. Is there another class to manage load balance with resin 3.0.26 launch as a cluster except com.caucho.servlets.LoadBalanceServlet? Rgds David</body>
  </mail>
  <mail>
    <header>[Resin-interest] cluster with different versions</header>
    <date>Tue Mar 03 13:29:24 CET 2009</date>
    <body>Hi, Is it possible to have a cluster with different nodes with different version? My plan is to install a higher version in only one node. Test it's stability and, after everything OK and tested (few days), upgrade the other ones. Thanks, Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] cluster with different versions</header>
    <date>Tue Mar 03 18:19:04 CET 2009</date>
    <body>You'd need to configure the new server with a separate configuration file to isolate it.  We change the communication between the servers in a cluster all the time, so mixing servers in a cluster has a good chance of breaking. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] ignore-serialization-errors does not seem to	work</header>
    <date>Fri Feb 27 14:04:34 CET 2009</date>
    <body>Hi we have an application which uses a 3rdparty filter, which of unknow reason puts a none serializable object in session. efter changing from 3.0.13 to 3.1.8, and updating java from  1.6.0_04 to 1.6.0_07 resin startet writing *SessionImpl[bac0M2BWFJQkahtIxe3_r,]: failed storing persistent session attribute 'NtlmHttpChal'.  *Persistent session values must extend java.io.Serializable. This is ok. But we find it a bit strange that this first startet after upgrading to resin. So we would think by adding the ignore-serialization-errors tag, the file would error would not come any more. But it still comes. And the session does not seem to move from one node to the other. If we dont use the 3rdpary filter, the session gets distrubute corretly. Any known issues of the ignore-serialization-errors not working? Thanks Nikolaj</body>
  </mail>
  <mail>
    <header>[Resin-interest] access.log not updated when request-secure=yes used</header>
    <date>Tue Feb 24 19:16:12 CET 2009</date>
    <body>I`m using external loadbalancer/ssl proxy with resin-3.1.8. To get https redirects working I`m using rewrite-dispatch to match a specific header in the incoming request to set the request-secure variable as advised here: http://maillist.caucho.com/pipermail/resin-interest/2007-June/001125.html Redirects are working, but request logging stops when I set request-secure. resin.conf: rollover-period="1W" The site is working, but no logs in RESIN_HOME/logs/access.log or /my.site.net/logs/access.log If I remove the rewrite-dispatch logging is working. Any advice ? -pinter</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Profiling...</header>
    <date>Mon Feb 23 17:06:39 CET 2009</date>
    <body>On Windows (tested on vista but should work elsewhere) for me worked copying all the dlls from jprofiler6\bin\windows to Windows\System32 cause that's one of the default locations where windows look for dll's http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- View this message in context: http://www.nabble.com/Profiling...-tp16572976p22164339.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Profiling...</header>
    <date>Mon Feb 23 21:02:47 CET 2009</date>
    <body>Hi, On Windows, the DLLs have to be somewhere in the PATH, not LD_LIBRARY_PATH which is a *nix thing. Moving them to Windows\System32 works as that's part of the standard PATH, but you can also do it just starting Resin with a .bat file with something like... *** set PATH=C:\Wherever\Your\DLLs\are;%PATH% set JAVA_TOOL_OPTIONS=your-profiler-extra-options %JAVA_TOOL_OPTIONS% httpd.exe *** I use something like that successfully with YourKit Java Profiler and Resin 3.1.X, 3.2.X (in this latter case it is resin.exe instead of httpd.exe) and I didn't have to move any DLLs around, which really helps when you have to upgrade your profiler. I hope it helps, D. PS: I have not used the -Xdebug, so I'm not sure if that affects or not. S'està citant Jan Simacek &amp;lt;pnept...@yahoo.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.nabble.com/Profiling...-tp16572976p22164339.html http://maillist.caucho.com/mailman/listinfo/resin-interest ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>[Resin-interest] XPath Parsing Error w/ Resin 4.0</header>
    <date>Thu Feb 19 20:11:48 CET 2009</date>
    <body>This code works on 3.0 and 3.1 ... I don't see why it would fail under Resin 4.0.  The exception is being thrown on the &amp;lt;x:parse&amp;gt; statement.  If you comment it out the error is not thrown.  First the error: 500 Servlet Exception [show] org.w3c.dom.DOMException: NAMESPACE_ERR: An attempt is made to create or change an object in a way which is incorrect with regard to namespaces. javax.servlet.ServletException: javax.servlet.jsp.JspException: org.w3c.dom.DOMException: NAMESPACE_ERR: An attempt is made to create or change an object in a way which is incorrect with regard to namespaces. at com.caucho.jsp.PageContextImpl.handlePageException(PageContextImpl.java:1237 ) at _jsp._test__jsp._jspService(_test__jsp.java:30) at com.caucho.jsp.JavaPage.service(JavaPage.java:61) at com.caucho.jsp.Page.pageservice(Page.java:536) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:195 ) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:1 84) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java: 264) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:303) at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:603) at com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java: 1242) at com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1183) at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:769) at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:686) at java.lang.Thread.run(Thread.java:619) And now the code that you can copy/paste into a test.jsp and run it verbatim to see the error. http://java.sun.com/jsp/jstl/core" http://java.sun.com/jsp/jstl/fmt" http://java.sun.com/jsp/jstl/xml" http://maps.google.com/maps/geo" value="ABQIAAAAgrj58PbXr2YriiRDqbnL1RRdqDCIfn-akWLPXbZqJg-hQ6eHehSRJ1rozvQIj</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] XPath Parsing Error w/ Resin 4.0</header>
    <date>Thu Feb 19 22:39:15 CET 2009</date>
    <body>Is there any way to swap out the library that 4.0 is bombing on with a 3.2 library to keep me going, or am I pretty much stuck at this point?  I love the IoC in 4.0 and don't want to have to go back to 3.2 if I can avoid it. Aaron http://java.sun.com/jsp/jstl/core" http://java.sun.com/jsp/jstl/fmt" http://java.sun.com/jsp/jstl/xml" http://maps.google.com/maps/geo" http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] XPath Parsing Error w/ Resin 4.0</header>
    <date>Wed Feb 25 23:44:53 CET 2009</date>
    <body>Do you have the "caused by" for that exception, or is that the full trace?  You might need to set level="finer" to see the information. The error message is coming from the JDK's XML parser, but when I'm trying it here I don't see this error. -- Scott http://java.sun.com/jsp/jstl/core" http://java.sun.com/jsp/jstl/fmt" http://java.sun.com/jsp/jstl/xml" http://maps.google.com/maps/geo" http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] XPath Parsing Error w/ Resin 4.0</header>
    <date>Thu Feb 19 23:41:20 CET 2009</date>
    <body>We've made some compatibility changes for the JSTL library in 4.0. This is probably just a regression.  I've added a bug report at http://bugs.caucho.com/view.php?id=3349 -- Scott http://java.sun.com/jsp/jstl/core" http://java.sun.com/jsp/jstl/fmt" http://java.sun.com/jsp/jstl/xml" http://maps.google.com/maps/geo" http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Building resin 3.1.8 from source</header>
    <date>Thu Feb 19 18:39:32 CET 2009</date>
    <body>Howdy, I have a need to build resin from source (long story) and have downloaded the source distribution.  The build.xml that's included in the distribution refers to both a local ivy repository and modules/ext directory that are empty.  I can't seem to find an ivy.xml file, so my attempts to use the update task to download dependencies is also failing. Has anyone got a HOWTO that describes how to build resin from source?  I looked around and found a lot of documentation describing how to use it, but almost nothing on how to build it. Thanks in advance, S.</body>
  </mail>
  <mail>
    <header>[Resin-interest] reverse proxy support like ProxyPass in apache?</header>
    <date>Wed Feb 18 22:19:45 CET 2009</date>
    <body>Does anyknow know if Resin 3.1 has any kind of reverse proxy support similar to the ProxyPass options in Apache? We are exploring whether Resin could be the font-end web server for our application instead of Apache - mostly due to issues we are having with mod_caucho communications. Ryan -- NOTICE: This e-mail message is for the sole use of the intended recipient(s) and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. Nothing contained in this message or in any attachment shall constitute a contract or electronic signature under the Electronic Signatures in Global and National Commerce Act, any version of the Uniform Electronic Transactions Act or any other statute governing electronic transactions.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] reverse proxy support like ProxyPass in apache?</header>
    <date>Thu Feb 19 00:27:00 CET 2009</date>
    <body>There's a proxy servlet name com.caucho.servlets.HttpProxyServlet. The servlet uses a "host" parameter to specify the backend servers: -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] reverse proxy support like ProxyPass in apache?</header>
    <date>Thu Feb 19 09:03:28 CET 2009</date>
    <body>In our case, we still use Apache, due to other things we need, but we have always used mod_proxy to communicate with the backoffice Resin instances, instead of mod_caucho. Even if you finally migrate to Resin as front-end web server, you could try to move to using mod_proxy in the interim with your current Apache. S! D. Scott Ferguson escribió:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] reverse proxy support like ProxyPass in apache?</header>
    <date>Thu Feb 19 11:55:44 CET 2009</date>
    <body>OOI, Is that hard to do?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] reverse proxy support like ProxyPass in apache?</header>
    <date>Thu Feb 19 13:16:52 CET 2009</date>
    <body>Quite simple: you just need to have mod_proxy* enabled in your Apache instalation and then add something like... ProxyPass /appx http://resin_host:resin_port/appx ProxyPassReverse /appx http://resin_host:resin_port/appx That's it. We have many web applications running at several hosts under different versions of Resin and JDK, and we even have some Tomcat instances (product-required). With this option you mainly redirect directories as a whole, as that's how mod_proxy works, but in case one needs more fine grained control, one can use mod_rewrite to filter some requests, forward them to a virtual directory that is then "proxied" to the appropriate host. Native, vendor-specific modules are probably more efficient, or they should be, but this way we've had no problems with compiling native modules, combining different versions of anything etc. We also use it as a way of having a persistent URL for each application while allowing us to change the server/port without a fuss. Migrating from one server to another can also be done quite easily as you can start the other server, test it etc. and then when you are ready, change the Apache configuration, reload the Apache configuration (no need to stop the server) and you are done (sessions are lost, of course, but that's another issue). All in all, we've used this approach for many years and all I can say is that we are still using it :). S! D. * Old apache versions (1.3.X) just require mod_proxy, newer versions (2.X) split the mod_proxy module in different modules, so you also need to enable mod_proxy_http, at least. Stargazer escribió:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] reverse proxy support like ProxyPass in apache?</header>
    <date>Thu Feb 19 14:23:55 CET 2009</date>
    <body>http://resin_host:resin_port/appx http://resin_host:resin_port/appx I am experiencing server memory leaks in my http child processes. I can't nail these down and they have been present for literally years, always using mod_caucho. I fix them by limiting the requests they serve in apaches httpd.conf - not ideal. Now I'm not pointing the finger here, far from it, but this approach is excellent as another test for me to perform. Sincere thanks...! I'd need to do all the virtual hosts plus their webapps -  defined as such in both apache and resin. Your example suggests just webapps? Also SSL? Does this impact resins sticky session handling? Performance? Basically, there must be some downside or there would be no need for mod_caucho at all. Plus my infamous bug http://bugs.caucho.com/view.php?id=3013 could have been sidestepped 6 months earlier than it took :-(</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] reverse proxy support like ProxyPass in apache?</header>
    <date>Fri Feb 20 09:41:05 CET 2009</date>
    <body>Hi, Stargazer escribió: We started with this approach long long ago when the first mod_jk versions were born. They were quite buggy and each new version always brought new problems. Moreover, we've had to "live" in a special OS for long time, Digital Unix, which for us means that native code is not fixed as soon as in other more popular platforms, even in popular projects. To tell you the truth, we never tried using mod_caucho as by the time we moved to Resin, around version 1.2.1 IIRC, we have already opted for the policy of using mod_proxy and avoiding native modules. In our case, we have the virtual hosts defined at the Apache level, the internal application servers just have a common name and a private internal IP. Each application server might hold a couple of Resin instances with a couple of applications each so the Apache decides, depending on virtual host and virtual path to which host/port/webapp needs to proxy the request. Real client IPs are added to the headers by the mod_proxy module (one has to take this into account as one cannot trust request.getRemoteHost() any longer). I understand that if an application has to modify its behaviour depending on the virtual host that has been called, one would need to be able to distinguish them at the Resin level, so something would need to be added. Regarding SSL, Apache is the one that handles the SSL traffic and we have applications that are proxied just through the "SSL virtual server". Traffic between the Apache server and the application server is not encripted as it is internal traffic. In our case, that's enough, I understand that might not be the case in some scenarios. Well, if I get you correctly, resin handling sticky sessions means ONE resin instance gets all the requests and redirects them to the appropriate cluster instance respecting the sticky sessions. In this case Apache in front would only add a layer of indirection. OTOTH, If you wanted to use Apache to redirect directly to the cluster instances, you would need to configure Apache to honor the "stickiness" of the sessions. We tested it adding mod_proxy_balancer to the mix and using cookie-append-server-index in Resin so Apache can have something to know wich server to redirect to. However, I have to say we have not used it in production yet, as our successful efforts to optimize the server configuration all through these years have been always "rewarded" with having just one server... so we don't have anything to balance it against :D. Regarding performance, we have done no tests, as going native is really not an option for us, but there probably is some penalty, as native modules are supposed to be more efficient. If that is significant vs the overall response time probably depends on your type of traffic and server load... http://bugs.caucho.com/view.php?id=3013 could have been sidestepped 6 As I said, I guess there probably is some performance penalty, important or not depending on your profile, but we have never felt the need to use native modules, so I'm not the right man to list the advantages of doing so :). The other difference is the remote host swap, but we implemented the routines to get the remote host from the X-Forwarded-For header a long time ago, so it's not an issue for us. If you use the REMOTE_HOST for anything, you have to take this into account. If there is something else one can do with native modules that one cannot do with pure apache modules, we have not needed it, yet. In any case, it might be a quick emergency fix to work around the bug while you move to a Resin-only approach. S! D.</body>
  </mail>
  <mail>
    <header>[Resin-interest]  reverse proxy support like ProxyPass in apache?</header>
    <date>Wed Mar 04 22:43:42 CET 2009</date>
    <body>This is a smashing idea, and I feel like an idiot for not seeing it. Unfortunately, ProxyPassMatch is broken in the RPM based RedHat Apache.  This is at the same time mod_caucho will not build on any new CentOS or RedHat servers. Is your use of mod_proxy fairly basic, or have you been required to do some imaginative directives with regex?  At least with mod_proxy, I can upgrade Apache and utilize ProxyPassMatch where mod_caucho fails under any configuration.  I'm not excited about this prospect either, but there is nothing we can do about mod_caucho.  You have given me another option out of this problem. David</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] reverse proxy support like ProxyPass in	apache?</header>
    <date>Thu Mar 05 20:13:18 CET 2009</date>
    <body>Hi, In our case, it is usually enough to use mod_proxy with simply a ProxxPass and ProxyPassReverse directive, forwarding complete "directories" to the back end. That means we forward all requests to the applications, which reside in another machine in the backend, as they also include styles, images... One could configure some requests to be served directly by Apache, but that would mean we would have to split the applications in two pieces, one to reside in the Apache host, the dynamic one to reside in the application server... and that is something we don't want, due to the number of applications we have to mantain. In any case, in those specific cases where we needed to proxy specific types of requests, we would then use mod_rewrite and then mod_proxy, as the version of Apache we use, for other unrelated reasons, still does not have ProxyPassMatch. So, even if ProxyPassMatch is broken, you could still go back to the good ol' mod_rewrite/mod_proxy combo for those specific needs. S! D. S'està citant david day &amp;lt;yaya...@gmail.com&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.1.8 Recompile with -Xlint:unchecked for	details</header>
    <date>Mon Feb 16 18:24:21 CET 2009</date>
    <body>Hi, I'm migrating from resin 2.1.16 to resin 3.1.8 and my logs are plenty of: [16:39:58.275][16:39:58.275]Note: /home/automat/www/bassist/WEB-INF/ work/_jsp/_bookassist_0admin/_users__jsp.java uses unchecked or unsafe operations. [16:39:58.275][16:39:58.275]Note: Recompile with -Xlint:unchecked for details. How can I configure the compilation to add -Xlint:unchecked option? Regards. Rafa.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.1.8 Recompile with -Xlint:unchecked	for	details</header>
    <date>Mon Feb 16 18:36:24 CET 2009</date>
    <body>If your resin.xml is using the &amp;lt;javac&amp;gt; tag, does this work? - Aaron mailto:resin-interest- http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] j_uri sanitising</header>
    <date>Mon Feb 16 14:52:58 CET 2009</date>
    <body>Hi list, Is it possible to inspect/manipulte the value of j_uri after it has been posted to j_security_check and before it's acted upon on a successful authentication? It has been suggested to us that parameter-based redirection is something of a security risk, so if we can ensure that the value of j_uri when posted conforms to certain guidelines it would keep people happy. rgds, Richard Richard Grantham Development ------------------------------- rgrant...@limehousesoftware.co.uk Limehouse Software Ltd DDI: (020) 7566 3336 Main: (020) 7566 3320 Fax: (020) 7566 3321 Limehouse Software Ltd Bridewell Gate 9 Bridewell Place London EC4V 6AW Check out Limehouse Software's innovative solutions www.limehousesoftware.co.uk - Transforming the way you publish and consult on information The information contained in this e-mail or in any attachments is confidential and is intended solely for the named addressee only. Access to this e-mail by anyone else is unauthorised. If you are not the intended recipient, please notify Limehouse Software Ltd immediately by returning this e-mail to sender or calling 020 7566 3320 and do not read, use or disseminate the information. Opinions expressed in this e-mail are those of the sender and not necessarily the company. Although an active anti-virus policy is operated, the company accepts no liability for any damage caused by any virus transmitted by this e-mail, including any attachments.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] j_uri sanitising</header>
    <date>Mon Feb 16 18:04:18 CET 2009</date>
    <body>Richard, This is a guess on my part, but perhaps you want a Custom Security Constraint. This page shows an example of setting up constraints: http://my-messages.setar.aw/ref/security.xtp So here is a tact you might try .. I didn't try to compile this so it's probably loaded with errors: public boolean isAuthorized(HttpServletRequest request, HttpServletResponse response, ServletContext application) then the resin.xml's security-constraint might look like: - Aaron mailto:resin-interest- http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] j_uri sanitising</header>
    <date>Mon Feb 16 18:47:24 CET 2009</date>
    <body>That works a treat. Fantastic. Thanks very much. -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Aaron Freeman Sent: 16 February 2009 17:04 To: 'General Discussion for the Resin application server' Subject: Re: [Resin-interest] j_uri sanitising Richard, This is a guess on my part, but perhaps you want a Custom Security Constraint. This page shows an example of setting up constraints: http://my-messages.setar.aw/ref/security.xtp So here is a tact you might try .. I didn't try to compile this so it's probably loaded with errors: public boolean isAuthorized(HttpServletRequest request, HttpServletResponse response, ServletContext application) then the resin.xml's security-constraint might look like: - Aaron mailto:resin-interest- the company. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] [ANN] VTD-XML 2.5</header>
    <date>Mon Feb 16 21:56:49 CET 2009</date>
    <body>VTD-XML 2.5 is now released. Please go to https://sourceforge.net/project/showfiles.php?group_id=110612&amp;amp;package_id=120172&amp;amp;release_id=661376  to download the latest version. Changes from Version 2.4 (2/2009) * Added separate VTD indexing generating and loading (see http://vtd-xml.sf.net/persistence.html for further info) * Integrated extended VTD supporting 256 GB doc (In Java only). * Added duplicateNav() for replicate multiple VTDNav instances sharing XML, VTD and LC buffer (availabe in Java and C#). * Various bug fixes and enhancements</body>
  </mail>
  <mail>
    <header>[Resin-interest] Issues with init.d files on Redhat/Centos</header>
    <date>Thu Feb 12 23:02:18 CET 2009</date>
    <body>I am using the bundled init files that come with Resin, but they are not updated for 3.x, they seem to be 2.x init scripts.  Is there a good working init script somewhere? Thanks guys! -- -jk</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Issues with init.d files on Redhat/Centos</header>
    <date>Fri Feb 13 00:20:29 CET 2009</date>
    <body>Hmm.  The 3.2.1 scripts were updated for debian/ubuntu, but we didn't make separate scripts for RedHat. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Issues with init.d files on Redhat/Centos</header>
    <date>Mon Feb 23 15:59:57 CET 2009</date>
    <body>Yeah not sure, but its not working on my boxes, it refers to the old filenames (not resin.xml) and the syntax is completely wrong.  I can show you output if you want to see it. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- -jk</body>
  </mail>
  <mail>
    <header>[Resin-interest] mod_caucho failure on CentOS 5.2/Apache 2.2</header>
    <date>Thu Feb 12 20:05:50 CET 2009</date>
    <body>We recently had problems building resin-pro-3.1.8 for Apache and applied the solution in 0003698 of removing line CFLAGS="$CFLAGS from the configure file.  That change allowed a successful build in a test environment. Using this same method on our new production server results in "Service Temporarily Unavailable" through Apache, but success direct to Resin.  I thought this was related to the previous build bug, but I have gone back to 3.1.3 and have the same issue. The new server is CentOS rel 5.2 with httpd/devel 2.2.3-11, libgcc/gcc 4.1.2 and built with:  ./configure --prefix=/opt/resin-318pro --enable-jni –with-apxs=/usr/sbin/apxs   Caucho-status returns a positive "Configuration Cluster" but "Unconfigured Default Virtual Host". Changing configure arguments, e.g. --with-apache-cflags="-DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -pthread" --enable-debug –enable-static=no has the same results, as does changing Apache conf between ResinConfigServer and CauchoHost.  Apache and Resin confs have been edited from basic post install to fully mimic our production confs. All variations have given the same result. Has anyone else seen this behavior with new builds of CentOS?  Can someone suggest a method to isolate the problem to the mod_caucho build or conf file. David</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] mod_caucho failure on CentOS 5.2/Apache 2.2</header>
    <date>Thu Feb 19 20:16:47 CET 2009</date>
    <body>I have test against another 32 bit server running 2.6.18-92.1.22.el5.centos.plusPAE with same installed packages as the older 32 bit server running 2.6.18-92.1.22.el5.centos.plus also fails. Another test on a new 64 bit CentOS release 5.2 (Final) build running 2.6.18-92.el5 yields same results. To take RedHat's Apache 2.2.3 out of the mix, source httpd-2.2.11-1/httpd-devel-2.2.11-1 was built/installed with same caucho-status result "Unconfigured Default Virtual Host". At this point, a functional mod_caucho cannot be built on any new CentOS server. David</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] mod_caucho failure on CentOS 5.2/Apache 2.2</header>
    <date>Thu Feb 19 21:02:55 CET 2009</date>
    <body>Can you check with the current 3.1.8 snapshot? We introduced a compile-time error where one of the CFLAGS (the large file defines), was messing up an internal Apache data structure, causing mod_caucho's configuration to be skipped. The 3.1.8 snapshot reverts those flags to the ones returned by Apache's apr info.  If you're still having trouble with the snapshot, then this may be a different issue. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] mod_caucho failure on CentOS 5.2/Apache 2.2</header>
    <date>Wed Feb 25 23:53:53 CET 2009</date>
    <body>I downloaded and installed resin-pro-3.1.s090218 but get the same results.  What options do I have with debugging mod_caucho? My current environment is: CentOS release 5.2 (Final) httpd-devel-2.2.3-11.el5_2.centos.4 httpd-2.2.3-11.el5_2.centos.4 mod_ssl-2.2.3-11.el5_2.centos.4 apr-devel-1.2.7-11 apr-1.2.7-11 apr-util-1.2.7-7.el5 apr-util-devel-1.2.7-7.el5 with: ./configure --prefix=/opt/resin-31snap --enable-debug --enable-jni --with-apxs=/usr/sbin/apxs This output now appears in Apache log [02/Feb/2009:16:05:58 -0600] 1707_-1219740784: config.c:1291:cse_update_host(): complete :0(0x9165388) old:0 now:1235599558() [02/Feb/2009:16:05:58 -0600] 1707_-1219740784: config.c:1683:cse_match_request(): entry qa4b.kpiint.com / match:yes [02/Feb/2009:16:05:58 -0600] 1707_-1219740784: mod_caucho.c:1288:cse_dispatch(): [1707] match qa4b.kpiint.com:/ [02/Feb/2009:16:05:58 -0600] 1707_-1219740784: mod_caucho.c:911:caucho_request(): session index: -1 [02/Feb/2009:16:05:58 -0600] 1707_-1219740784: mod_caucho.c:923:caucho_request(): no connection: cluster(0x91653c8)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] mod_caucho failure on CentOS 5.2/Apache 2.2</header>
    <date>Thu Feb 26 00:38:58 CET 2009</date>
    <body>Good.  In that case, you're not hitting the alignment bug, because that bug wouldn't try to connect to Resin. What does the /caucho-status show? The message is saying that mod_caucho can't connect to the Resin instance.  The /caucho-status should show the IP:port that mod_caucho is trying to use to connect to Resin. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] mod_caucho failure on CentOS 5.2/Apache 2.2</header>
    <date>Thu Feb 26 00:54:59 CET 2009</date>
    <body>Status : Caucho Servlet Engine Start Time  Wed Feb 25 16:01:29 2009 Now     Wed Feb 25 17:52:18 2009 Session Cookie   'JSESSIONID' Session URL   ';jsessionid=' Config Check Interval  15s Config Cache File       /tmp/localhost_6800 Configuration Cluster Host                             Active  Pooled  Connect Timeout Idle Time       Recover Time 1. localhost:6800 (ok)      0         0            2 10                20 Unconfigured Default Virtual Host Source: unconfigured Last-Update: Wed Dec 31 18:00:00 1969</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] mod_caucho failure on CentOS 5.2/Apache 2.2</header>
    <date>Fri Mar 13 18:19:52 CET 2009</date>
    <body>OK, there is a solution.  It was not APR which was high on our suspect list.  Mea culpa.  The test servers built to evaluate upgrading from 3.1.3 to 3.1.8 were built on CentOS 5 with SELinux enabled.  There, I've said it.  Self inflicted.  We don't use SELinux, not sure how it was missed on the test servers, but not its obvious it should have made the troubleshooting list. During the build so much focus was poured into C, Apache, and potential effects of breaking the mod_caucho build we never went further.  Once I switched my focus to implementing without mod_caucho I focussed on Apache logs rather than stack traces and debug. Error logs during mod_caucho testing were along these lines: mod_caucho.c:934:caucho_request(): no connection: cluster(0x89a0350) But with only Apache and reverse proxy to deal with, this output provided a huge lead: [error] proxy: HTTP: disabled connection for (192.168.1.2) [error] (13)Permission denied: proxy: HTTP: attempt to connect to localhost:8080 (192.168.1.2) failed [error] ap_proxy_connect_backend disabling worker for (192.168.1.2) That led me to SELinux, and the rest of the tale quickly revealed itself.  It has led me to evaluate using mod_proxy, and potentially resin.xml for rewrites which will loosen the tying of our various apps to the one instance of Apache.  So its not all bad news. David</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] mod_caucho failure on CentOS 5.2/Apache 2.2</header>
    <date>Fri Mar 13 19:44:13 CET 2009</date>
    <body>Interesting. FWIW, I am using Resin for about 10 web-apps on a single machine, where each web-app has different criteria for logging, virtual hosts, rewriting etc.  I know a couple of the posters pointed out that that was a good reason to use Apache as a front-end, but I haven't found it necessary at all.  I used to be a big Apache fan about 5 years ago, but since I have decoupled Apache from Resin and went exclusively with Resin I have had no regrets.  In fact I am much happier with the more simple configuration. Aaron -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of david day Sent: Friday, March 13, 2009 11:18 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] mod_caucho failure on CentOS 5.2/Apache 2.2 OK, there is a solution.  It was not APR which was high on our suspect list.  Mea culpa.  The test servers built to evaluate upgrading from 3.1.3 to 3.1.8 were built on CentOS 5 with SELinux enabled.  There, I've said it.  Self inflicted.  We don't use SELinux, not sure how it was missed on the test servers, but not its obvious it should have made the troubleshooting list. During the build so much focus was poured into C, Apache, and potential effects of breaking the mod_caucho build we never went further.  Once I switched my focus to implementing without mod_caucho I focussed on Apache logs rather than stack traces and debug. Error logs during mod_caucho testing were along these lines: mod_caucho.c:934:caucho_request(): no connection: cluster(0x89a0350) But with only Apache and reverse proxy to deal with, this output provided a huge lead: [error] proxy: HTTP: disabled connection for (192.168.1.2) [error] (13)Permission denied: proxy: HTTP: attempt to connect to localhost:8080 (192.168.1.2) failed [error] ap_proxy_connect_backend disabling worker for (192.168.1.2) That led me to SELinux, and the rest of the tale quickly revealed itself.  It has led me to evaluate using mod_proxy, and potentially resin.xml for rewrites which will loosen the tying of our various apps to the one instance of Apache.  So its not all bad news. David</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] mod_caucho failure on CentOS 5.2/Apache 2.2</header>
    <date>Fri Mar 13 20:53:23 CET 2009</date>
    <body>Good to know.  I've done the majority of site management via Apache, so transitioning quickly into Resin is painful.  Nice to know the list has participants who have implemented both approaches. David</body>
  </mail>
  <mail>
    <header>[Resin-interest] mod_caucho - Address already in use</header>
    <date>Tue Feb 24 04:04:33 CET 2009</date>
    <body>Hello: I am trying to install the Red5.war file, using mod_caucho, but I keep getting this error: 500 Servlet Exception || java.net.BindException: Address already in use at sun.nio.ch.Net.bind(Native Method) at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:119) at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59) at org.apache.mina.transport.socket.nio.SocketAcceptor.registerNew(SocketAcceptor.java:363) at org.apache.mina.transport.socket.nio.SocketAcceptor.access$800(SocketAcceptor.java:55) at org.apache.mina.transport.socket.nio.SocketAcceptor$Worker.run(SocketAcceptor.java:222) at org.apache.mina.util.NamePreservingRunnable.run(NamePreservingRunnable.java:51) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) at java.lang.Thread.run(Thread.java:619)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] mod_caucho - Address already in use</header>
    <date>Tue Feb 24 05:12:37 CET 2009</date>
    <body>Check your resin config file. Given that you mention using mod_caucho, it sounds like you're trying to run resin standalone with apache already running. Your resin config file will likely be configured to use either port 80 or 8080 (and possibly 443 or 8443 for SSL). That is conflicting with apache which is already running and bound to that port. Rob Hello: I am trying to install the Red5.war file, using mod_caucho, but I keep getting this error: 500 Servlet Exception java.net.BindException: Address already in use at sun.nio.ch.Net.bind(Native Method) at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java: 119) at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:59) at org .apache .mina .transport.socket.nio.SocketAcceptor.registerNew(SocketAcceptor.java: 363) at org.apache.mina.transport.socket.nio.SocketAcceptor.access $800(SocketAcceptor.java:55) at org.apache.mina.transport.socket.nio.SocketAcceptor $Worker.run(SocketAcceptor.java:222) at org .apache .mina.util.NamePreservingRunnable.run(NamePreservingRunnable.java:51) at java.util.concurrent.ThreadPoolExecutor $Worker.runTask(ThreadPoolExecutor.java:886) at java.util.concurrent.ThreadPoolExecutor $Worker.run(ThreadPoolExecutor.java:908) at java.lang.Thread.run(Thread.java:619)</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin Messaging using JCA</header>
    <date>Wed Feb 11 19:09:33 CET 2009</date>
    <body>Hi all, I¹m trying to figure out how to send jms messages between different resin servers. I was able to get the tutorial here, http://www.caucho.com/resin/examples/jms-listener/index.xtp , working with no issues when I¹m sending the message and receiving it on the same instance of resin. Now I need to extend this to be able to send the message from one machine and receive it in another but I can¹t find anything that tell me how to configure this. It is particularly frustrating that the documentation says ³Messaging lets a servlet delegate processing to a batch process either on the same machine or on a separate machine² then fails to talk about how to do it from a separate machine. Thanks for your time, Nick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin Messaging using JCA</header>
    <date>Thu Feb 12 18:47:40 CET 2009</date>
    <body>Hi all, I’m trying to figure out how to send jms messages between different resin servers. For now, you may want to use a different provider like ActiveMQ for remote JMS. We're revamping our clustered JMS in Resin 4.0 to use BAM/HMTP as the underlying messaging protocol.  One of the major motivations for BAM/ HMTP in Resin 4.0 is to improve the capabilities of all of our messaging, including JMS. The 3.1 and 3.2 capabilities only let you queue to a cluster, i.e. define a "client" queue that sends remote messages to servers in a "server" cluster.  If that's the capability you need, I can show the 3.1 configuration to make that possible. -- Scott I was able to get the tutorial here, http://www.caucho.com/resin/examples/jms-listener/index.xtp , working with no issues when I’m sending the message and receiving it on the same instance of resin. Now I need to extend this to be able to send the message from one machine and receive it in another but I can’t find anything that tell me how to configure this. It is particularly frustrating that the documentation says “Messaging lets a servlet delegate processing to a batch process either on the same machine or on a separate machine” then fails to talk about how to do it from a separate machine. Thanks for your time, Nick</body>
  </mail>
  <mail>
    <header>[Resin-interest] Is resin vulnerable to session cookie hijacking?</header>
    <date>Wed Feb 11 18:19:25 CET 2009</date>
    <body>Hello, I would like to know if resin 3 is vulnerable to session cookie hijacking. In the documentation it's written that : "It is conceivable that someone could use a packet sniffer to find the session id of a user and then make a fake request to Resin thus gaining access to the session. This can be avoided by using HTTPS." Does that mean that a session id is not tied to an IP address? For performance reasons I would like to use HTTPS on the login page only. Thanks in advance, John</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Is resin vulnerable to session cookie	hijacking?</header>
    <date>Wed Feb 11 18:54:30 CET 2009</date>
    <body>Correct.  Resin can't tie a session id to an IP address because client IP addresses legitimately change for the same cookie.  Ages ago, AOL was notorious for being particularly bad about this. If you need real security, you really need to use HTTPS. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Is resin vulnerable to session cookie hijacking?</header>
    <date>Wed Feb 11 19:38:37 CET 2009</date>
    <body>This is not a Resin issue, all application servers have this issue. This article presents some practical fixes: http://shiflett.org/articles/session-hijacking Note that HTTPS cookie can also be hijacked if it is not implemented properly. I am not going to delve into details on this topic. -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of John Livic Sent: Wednesday, February 11, 2009 9:17 AM To: resin-interest@caucho.com Subject: [Resin-interest] Is resin vulnerable to session cookie hijacking? Hello, I would like to know if resin 3 is vulnerable to session cookie hijacking. In the documentation it's written that : "It is conceivable that someone could use a packet sniffer to find the session id of a user and then make a fake request to Resin thus gaining access to the session. This can be avoided by using HTTPS." Does that mean that a session id is not tied to an IP address? For performance reasons I would like to use HTTPS on the login page only. Thanks in advance, John</body>
  </mail>
  <mail>
    <header>[Resin-interest] Context and Dependency Injection</header>
    <date>Wed Feb 11 17:40:20 CET 2009</date>
    <body>Scott, I have finally caught up with understanding where you are going with the new Resin IoC -- I am excited to use it.  I'd like to do some of the things on this doc: http://www.caucho.com/resin/doc/resin-ioc.xtp but I don't see where to download a release-candidate for the JSR-299 stuff?  I made it here: http://jcp.org/en/jsr/detail?id=299 but I don't see any release-candidates that I can download.  Any hints? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Context and Dependency Injection</header>
    <date>Wed Feb 11 19:07:33 CET 2009</date>
    <body>http://www.caucho.com/resin/doc/resin-ioc.xtp but I don't http://jcp.org/en/jsr/detail?id=299 but I don't see any I just put up a new 4.0 snapshot at http://caucho.com/download .  The 4.0 snapshot isn't stable, but it does implement the latest Java Injection draft, so you can start working with it. I've been very happy with how JSR-299 (Java Injection) has developed. It's amazingly powerful. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Context and Dependency Injection</header>
    <date>Wed Feb 11 20:19:47 CET 2009</date>
    <body>Scott, I downloaded the snapshot and holy cow man this stuff rocks! I was able to get my own "singleton" up and running and from your previous email I was stoked that you can simply @Named a class and use it directly in an EL expression -- that's just too awesome! Since I just beat through your new documentation I thought I would share the following two comments: Need to update your resin-web.xml to something like: WEB-INF/resin-web.xml http://caucho.com/ns/resin" Might be nice to add something like this to your comment in the beans.xml: - META-INF/beans.xml is used as a marker to tell Resin to scan all - classes in the directory tree for Java Injection beans.  The matching - beans will be available for injection using @javax.inject.Current - - Simply place this file in a META-INF folder under your classes - directory or in your jar file. Awesome job! Aaron mailto:resin-interest- http://www.caucho.com/resin/doc/resin-ioc.xtp but I don't http://jcp.org/en/jsr/detail?id=299 but I don't see any http://caucho.com/download .  The http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Annotations in the Comet demo</header>
    <date>Wed Feb 11 00:01:24 CET 2009</date>
    <body>I have a question about the one of the annotations in the Comet demo at: http://www.caucho.com/resin-3.1/examples/servlet-comet/comet I am not too familiar with Java's annotations, so I am wondering how I can get access to the _timerService, which is declared like: I would like to create a JSTL custom tag, for example, that can access the _timerService.  What does @In do? Do I just have to create a getter method that returns TimerService?  That wouldn't seem to work unless TimerService is a singleton -- but it's not declared statically.  I am thinking I can solve this easily with annotations, but I just don't understand them quite yet. Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Annotations in the Comet demo</header>
    <date>Wed Feb 11 18:09:32 CET 2009</date>
    <body>http://www.caucho.com/resin-3.1/examples/servlet-comet/comet I've updated the example at http://caucho.com/resin/examples/servlet-comet .  The example has been disabled because caucho.com isn't running the latest snapshot yet.  (Possible upgrade this weekend) The META-INF/beans.xml triggers a scan of all the classes to register the beans.  For the TimerService, I've marked it as @javax.context.ApplicationScoped, which means it has the same lifetime as the &amp;lt;web-app&amp;gt;, i.e. it's essentially a singleton. The TimerService has a default binding type of @javax.inject.Current. You use the binding annotation wherever you want the TimerService (as long as the class is managed by Resin).  Since JSP tags are managed by Resin, you can use @javax.inject.Current in a JSP tag definition's field to get a reference to the TimerService. With the latest Java DI spec draft, a bean/class like TimerService does not automatically get a name.  So it can't automatically be used by a JSP/JSF EL expression.  To register the bean with a name for EL, you use @javax.annotation.Named on the class, like: @javax.annotation.Named("timer") @javax.context.ApplicationScoped ... Correct.  TimerService is basically a singleton within the context of a web-app.  You should avoid static singletons because of classloader issues. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] upload limit</header>
    <date>Tue Feb 10 10:22:25 CET 2009</date>
    <body>Hi For one of my project I have to set &amp;lt;multipart-form enable='true' I guess this is a security problem, and I would rather let it to 100K except for the application administrator session where I would set dynamically to 300M. Is this possible ? Thanks (I use resin 3.2.0) -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] upload limit</header>
    <date>Tue Feb 10 16:39:19 CET 2009</date>
    <body>Riccardo are you using a JSP to process the file?  If so, according to this: https://www.gopay.com.cn/resin-doc/config/webapp.xtp#multipart-form you can set a request attribute at run time, caucho.multipart.form.upload-max to override the maximum file size. Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] upload limit</header>
    <date>Tue Feb 10 18:25:35 CET 2009</date>
    <body>I answer to these uploads with a servlet in java. The setting you suggest will apply for all sessions Am I right ? But I want to limit differently if it is the public or if it is the administrator of the application. https://www.gopay.com.cn/resin-doc/config/webapp.xtp#multipart-form http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] upload limit</header>
    <date>Tue Feb 10 18:52:42 CET 2009</date>
    <body>No it should be per request.  So somewhere at the beginning of the servlet that handles the fileupload you would do: Obviously you have to replace "administrator" in the "if" with the logic that tells you whether the person is an administrator or not.  For example if you are using HTTP AUTH then you would do something like: Aaron mailto:resin-interest- https://www.gopay.com.cn/resin-doc/config/webapp.xtp#multipart-form http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] upload limit</header>
    <date>Wed Feb 11 23:18:10 CET 2009</date>
    <body>Thanks for your answer, I have read the doc too quicly and now I understand the "per request" statement. I did this: public void service(HttpServletRequest req, HttpServletResponse res) req.setAttribute("caucho.multipart.form.upload-max", new Long This works all right. Now the "administrator" status is given to as session at the time where the administrator log-in. After that I keep in the session the fact that this user is the administrator. (this is to protect administrative tasks from being used by someone that knows the URL request and not the password). So actually my code is this : public void service(HttpServletRequest req, HttpServletResponse res) if (req.getSession().getAttribute("adl_stored_msmg")!=null) req.setAttribute("caucho.multipart.form.upload-max", new Long This one does not work. I beleive that if I call getSession() this breaks the flow and the uploaded file is already processed. So how do you suggest to handle the "administrator" status (I do not use HTTP AUTH because the administrator backoffice is in flex) ? Thanks. mailto:resin-interest- https://www.gopay.com.cn/resin-doc/config/webapp.xtp#multipart-form http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] upload limit</header>
    <date>Wed Feb 11 23:45:12 CET 2009</date>
    <body>Honestly I avoid using sessions like the plague, so I may not be the best person to answer your question.  However, I don't think calling getSession should cause your file upload to break at all.  What happens if the getSession() returns null though?  Maybe you want getSession(true)? What error are you getting? mailto:resin-interest- mailto:resin-interest- https://www.gopay.com.cn/resin-doc/config/webapp.xtp#multipart-form http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] upload limit</header>
    <date>Thu Feb 12 08:12:41 CET 2009</date>
    <body>I don't know exactly why because there is no exception on the server side, but when I call getSession() before req.setAttribute() the upload limit is not changed and I have an IO error on the flash side (error 2038 from hessian) if the file is too big. If I set the attribute before getSession(), the big file is uploaded correctly. If I call getSession(true) I understand from the doc that it is the same as getSession(), it will create the session if the request have no session. By the way, what do you mean by "avoid using sessions like the plague" ? Is it so bad coding using them ? I understand that it uses memory and has to be minimized, but if there is only some boolean or some little strings I thought it was acceptable. How can I keep session information like current language, current basket, manager status etc. ? Adding them in the request (like with cookies) does not seem very secure. I'd be interested in your expert opinion :) Thanks mailto:resin-interest- mailto:resin-interest- https://www.gopay.com.cn/resin-doc/config/webapp.xtp#multipart-form http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] upload limit</header>
    <date>Thu Feb 12 16:15:12 CET 2009</date>
    <body>Hmm, that is odd.  I haven't used sessions in a long time but if I remember correctly it was essentially just taking a value from a cookie and the pulling your data from a hashmap (conceptually).  And the cookie stuff should be in the header before the file is processed, so unless I am all scrambled up (and it's very, very possible), I don't see why sessions would be an issue.  We'll need a session expert to comment. :) Ah, okay, I just read the javadoc, you are right it's the same thing.  Again my memory with sessions has faded. Well I'm no expert. :) Sessions are not necessarily bad -- it's just in the architectures I work with we tend have lots and lots of backend servers and coordinating all that session data is a beast.  I know Resin solves making sessions consistent across servers, but I just prefer to architect our backend without even having that problem.  If you don't have those scalability issues, then sessions are just fine. There are several techniques for replacing sessions: store "session" information in the database, store it in a cookie, store it in XML files. For a basket I would probably store their data in a database so if the system crashes you won't lose the order.  For language settings, if you can't use the built in browser logic, I would probably use a cookie.  One technique I use quite often is to store an encrypted string in a cookie to identify the user.  Then on each access we decrypt the cookie server-side and the person is authenticated regardless which box they are on.  It really depends on what you need/want to achieve. Sorry I can't help you with the session problem above though -- but it does surprise me.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] upload limit</header>
    <date>Thu Feb 12 16:39:15 CET 2009</date>
    <body>Thanks for your precious help. http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.0/3.2 Inconsistency</header>
    <date>Fri Feb 06 22:24:03 CET 2009</date>
    <body>Under Resin-3.0.x the following code works whether I pass in a 'email' param or not.  However on Resin 3.2.1, which I just installed .. It throws an exception if an 'email' param wasn't passed in. However it works great if I do pass an email param in.  Any thoughts? The work around is to put a &amp;lt;c:if&amp;gt; test around the &amp;lt;x:forEach&amp;gt; and test if param.email is defined, but I am curious if the forEach should throw an exception when the $email variable is empty? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.0/3.2 Inconsistency</header>
    <date>Fri Feb 06 22:33:06 CET 2009</date>
    <body>Unfortunately, that exception is required by the JSTL specification, and Resin 3.2 is stricter about spec compliance. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.0/3.2 Inconsistency</header>
    <date>Fri Feb 06 22:58:09 CET 2009</date>
    <body>Oops, sorry if I double-posted -- I thought my original post bounced due to a missing subject. Interesting, thanks Scott. Aaron -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Friday, February 06, 2009 3:32 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Resin 3.0/3.2 Inconsistency Unfortunately, that exception is required by the JSTL specification, and Resin 3.2 is stricter about spec compliance. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.0/3.2 Inconsistency</header>
    <date>Mon Feb 09 22:07:41 CET 2009</date>
    <body>This question is related to my earlier post .. The following code snippet also throws a NullPointerException if both "cookie" and "someParam" are emtpy.  It seems to me that testing for empty on cookie.someParam shouldn't cause an exception, even if cookie is empty? Of course I don't know what the spec says, but I have seen countless examples like this. Causes "[Show] java.lang.NullPointerException" and won't render the page if cookie evaluates to empty ... Do I really have to verify if cookie is empty in a separate test? -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Friday, February 06, 2009 3:32 PM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Resin 3.0/3.2 Inconsistency Unfortunately, that exception is required by the JSTL specification, and Resin 3.2 is stricter about spec compliance. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] (no subject)</header>
    <date>Fri Feb 06 22:02:01 CET 2009</date>
    <body>Under Resin-3.0.x the following code works _whether I pass in a 'email' param or not_.  However on Resin 3.2.1, which I just installed .. It throws an exception if an 'email' param wasn't passed in. However it works great if I do pass an email param in.  Any thoughts? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>[Resin-interest] Different MD5-base64 digest passwords Resin 2.1	vs. Resin 3.1 with realm of none</header>
    <date>Fri Feb 06 17:16:21 CET 2009</date>
    <body>Hi all, I have a small Issue while trying to prepare the upgrade from Resin 2.1.14 to Resin 3.1 Snapshot as of 19th December with the Digest Password in Resin XmlAuthenticator. I used to have the following configuration in Resin 2.1.14 The passwords in the referenced file passwords.xml are for example like this: In 3.1 I have configured it as follows: =&amp;gt; I knew that the default realm is "resin", so I've set it explicitly to "none" so that I could reuse my old passwords. But trying to login with the Username and Passwords are now rejected. The password used for 2.1.14 have been generated with this utility class: System.out.println("Preparing Password '" + args[1] + "' String password = digest.getPasswordDigest(args[0], System.out.println("Digest Password: '" +password + java com.example.Digest myuser mypassword Preparing Password 'mypassword' for User 'myuser' Digest Password: 'cXSMXbxTmOz7Hv4lcVvrC3' In order to investigate why the login is rejected, I extended the utility class to allow the specification of the realm and used the 3.1 Jars of Resin to generate the password for a user and compare them System.out.println("Preparing Password '" + args[1] + "' String password = digest.getPasswordDigest(args[0], System.out.println("Digest Password: '" +password + java com.example.Digest31 myuser mypassword none Preparing Password 'mypassword' for User 'myuser' with realm 'none' Digest Password: 'cXSMXbxTmOz7Hv4lcVvrtw==' BTW: The same result is achieved when using the "Calculate Digest" on the Login Page of /resin-admin. The passwords look similar, but they are actually not the same - so the rejection is clear. 2.1: 'cXSMXbxTmOz7Hv4lcVvrC3' 3.1: 'cXSMXbxTmOz7Hv4lcVvrtw==' Has anybody else got such problems and figured out how to solve it? I don't know how I have to set the init values for the XmlAuthenticator in order to get the old passwords working. Thanks in advance Steffen</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Different MD5-base64 digest passwords Resin	2.1 vs. Resin 3.1 with realm of none</header>
    <date>Fri Feb 06 18:03:28 CET 2009</date>
    <body>2.1.14 had an incorrect implementation of base64 encoding. Is it possible to regenerate the passwords using the correct encoding?  There is a backward compatibility flag, but it would be much better to use the correct encoding. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Different MD5-base64 digest passwords Resin2.1	vs. Resin 3.1 with realm of none</header>
    <date>Fri Feb 06 18:23:31 CET 2009</date>
    <body>Thanks Scott, I think I'm aware of 80 % of the passwords and can regenerate them. As I'm having several external passwords files with the old base64 encoded passwords for different web-apps, it would be great if you could advise how to set the backward compatibility flag for those web-apps where it would be difficult for me to regenerate the passwords. Thanks, Steffen http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Different MD5-base64 digest passwords Resin2.1	vs. Resin 3.1 with realm of none</header>
    <date>Fri Feb 06 18:40:32 CET 2009</date>
    <body>It should just be "old-encoding", althout you might need to change the config to look like: -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Different MD5-base64 digest passwords	Resin2.1vs. Resin 3.1 with realm of none</header>
    <date>Fri Feb 06 19:27:40 CET 2009</date>
    <body>I've added the &amp;lt;password-digest old-encoding="true" algorithm="MD5" /&amp;gt;, but it was not immediately working. So I've added to my utility class and generated the Digest Password with old-encoding enabled: java com.example.Digest31 myuser mypassword none true Preparing Password 'mypassword' for User 'myuser' with realm 'none' Digest Password: 'cXSMXbxTmOz7Hv4lcVvrC3==' This nearly matches the 2.1.14 password: Digest Password: 'cXSMXbxTmOz7Hv4lcVvrC3' Now I just added the two additional "==" to my referenced passwords.xml file and it works (after changing role='r1,r2,r3' to roles='r1,r2,r3'). Steffen http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Apache issue</header>
    <date>Fri Feb 06 15:07:04 CET 2009</date>
    <body>Hi, I have a server with apache+resin-3.1.6 installed. Once in a while it have some performance issues. I have noted on that times: - theres is one (or two) httpd process consuming 200% (each process) from CPU - after some time (few hours) application gets almost unresponsive (most of request hangs for so long in the client's browser) - apache-only requests (static HTML, images) seems to be processed normally on that time - if I restart resin (java process) on that time the problem persists - if I "killall -1 httpd", problem is solved - I have found no log messages about that As a workaround I have written a script to run a "killall -1 httpd" every time it finds a httpd process consuming 200% from CPU It got the application much more stable, but once in a while (once in week for example) I have the same problem: server gets almost unresponsive. So as a workaround it run a "killall -1 httpd" each hour. It got the server much more stable, but it isn't the ideal behavior. Do you guys have some trouble like that? What do you suggest? The same application in another application server runs without this issue. Ronan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Apache issue</header>
    <date>Fri Feb 06 21:53:01 CET 2009</date>
    <body>I have an open report on that issue, but haven't been able to reproduce it here under stress testing.  Do you have any information in the logs suggesting something that might trigger this? (e.g. some connection issue on the Resin side.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Apache issue</header>
    <date>Mon Feb 09 15:00:34 CET 2009</date>
    <body>Scott, Scott Ferguson escreveu: It's really too weird. I have found no information about that in the logs (apache/resin/os), even in the exact moment of the problem. I´ve noted when there is a httpd process consuming 200% from cpu, system load (from OS) gets higher and dynamic pages get slower. Usually we have tens of process like that per day, even in not so overloaded times. But I haven't seen such a process in lighter times. I have monitored httpd process when it occurs to see what's running on that moment, but it seems to be normal requests. I didn't see anything wrong on that process, any suspicious request or URL. I even didn't see any relation like the same process present on every overloaded httpd process. It seems there is lack in communication between apache and resin, and this problem doesn't seem to be related to the 200% httpd process. Even I restarting httpd when it find and 200% httpd process, after some days the system got unresponsive. That's why I schedule an httpd restart once in a hour. I'm sorry for not supply more specific informations about that, but I didn't find it yet. Ronan</body>
  </mail>
  <mail>
    <header>[Resin-interest] Limiting access to caucho-status</header>
    <date>Fri Feb 06 14:44:06 CET 2009</date>
    <body>Hi, Is there a way to limit access to "&amp;lt;site&amp;gt;/caucho-status" URL either per IP or per user/password? I read that it's suggested to disable it in production servers, but it has good information for monitoring servers. I think it would be nice to just limit accesses. Ronan</body>
  </mail>
  <mail>
    <header>[Resin-interest] Why watchdog restart app server with no reason</header>
    <date>Fri Feb 06 05:16:08 CET 2009</date>
    <body>Hi guys, I have read the resin-doc,it says "The watchdog automatically restarts Resin if the Resin JVM ever crashes or exits", but I do not find any exception in out jvm log. In watchdog log , i find a strange things that sometimes watchdog restart resin after a minutes on my app server completely start up. anyone can help me ,thks! -------------- 2009-02-06 Wayne Wan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Why watchdog restart app server with no reason</header>
    <date>Fri Feb 06 06:05:13 CET 2009</date>
    <body>Here are some steps to troubleshoot: Look for any calls to System.exit(int) in your code and/or libraries you use. Look for files called hs_errXXX.pid in the server root directory, it could be a JVM crash. -Knut http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Proxy caching of dynamic url files</header>
    <date>Thu Feb 05 23:05:40 CET 2009</date>
    <body>Hi, Does anyone know or have any experience with dealing with file-based caching of content, not memory-based. I have images which I process to create multiple versions of the same image in different resolutions. I'd like to actually cache these for future use. My url is something like this: I'm actually hoping to use resin's reverse proxy caching system.  Is there a way for me to hook a filter or a servlet directly into the proxy cache and have Resin take care of caching details.  I can just query the system directly for the file.  Or should I use a separate caching system? I can also turn this into a more static-typed link: but the token at the end would make the link different either way. Any suggestions for working directly with the Resin cache?  Or does Resin have some sort of cache API/facility that I can use? Thanks.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Question about the Comet demo</header>
    <date>Wed Feb 04 22:36:28 CET 2009</date>
    <body>I know these are simpleton questions but I gotta ask 'em. ;) In the Comet demo on: http://www.caucho.com/resin-3.1/examples/servlet-comet/ , the IFRAME is referencing SRC="comet".  I looked in the example resin.conf and web-beans.xml but I don't see how and/or what that "comet" call is mapping to?  It's obviously connecting to TestCometServlet somehow, but I just can't figure out how it knows that. Also, when I call http://www.caucho.com/resin-3.1/examples/servlet-comet/comet directly, in order to see the "raw" output from TestCometServlet, I notice it has a nice pretty comment block in order to make sure the data gets rendered by IE, due to IE's needing to see some amount of bytes before it inteprets a page. That's not in the example code (understandably), and I am wondering if it's better to put that type of logic in a filter or just include it in the CometServlet? Thanks, Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about the Comet demo</header>
    <date>Wed Feb 04 23:40:36 CET 2009</date>
    <body>http://www.caucho.com/resin-3.1/examples/servlet-comet/ , the IFRAME It should be the servlet-mapping for the actual comet servlet in resin- web.xml. http://www.caucho.com/resin-3.1/examples/servlet-comet/comet Technically, I think it's Safari that has the problem.  I think IE's okay. I'd put it in the comet servlet, because it's just a buffer of 1024 bytes at the very beginning, and the comet servlet is a good place to put that logic. Filters are a bit weird with comet, conceptually, because filters really expect a simple, single response instead of the comet repeated calls. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about the Comet demo</header>
    <date>Wed Feb 04 23:47:37 CET 2009</date>
    <body>http://www.caucho.com/resin-3.1/examples/servlet-comet/ , Ah, the example resin.conf seems to have been updated -- magic. :) http://www.caucho.com/resin-3.1/examples/servlet-comet/comet Ah, okay, I can rule out filters on this project then. Thanks for the quick help. Aaron</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about the Comet demo</header>
    <date>Mon Feb 09 23:22:50 CET 2009</date>
    <body>I am trying to run the Comet demo referenced in the post below (only changing the package name in the example Java source), and everything compiles except CometState which can't find AddString.  What is AddString? Is there source missing in the example? Thanks, Aaron mailto:resin-interest- http://www.caucho.com/resin-3.1/examples/servlet-comet/ , the IFRAME http://www.caucho.com/resin-3.1/examples/servlet-comet/comet http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about the Comet demo</header>
    <date>Mon Feb 09 23:47:53 CET 2009</date>
    <body>Ok I was able to find the AddString source with Google.  Now at runtime I am receiving the exception below.  This feels like a configuration issue.  I didn't do anything with the sample web-beans.xml because it looks empty.  Am I supposed to place that somewhere, and is that the problem? 500 Servlet Exception [show] example.TestCometServlet._timerService: Can't find a component for 'example.TimerService' javax.servlet.ServletException: com.caucho.config.ConfigException: example.TestCometServlet._timerService: Can't find a component for 'example.TimerService' at com.caucho.server.dispatch.ServletConfigImpl.createServlet(ServletConfigImpl .java:790) at com.caucho.server.dispatch.CometServletFilterChain.doFilter(CometServletFilt erChain.java:101) at com.caucho.server.cache.CacheFilterChain.doFilter(CacheFilterChain.java:201) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:1 89) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java: 266) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:292) at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:577) at com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java: 1211) at com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1152) at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:759) at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:681) at java.lang.Thread.run(Thread.java:619) Caused by: com.caucho.config.ConfigException: example.TestCometServlet._timerService: Can't find a component for 'example.TimerService' at com.caucho.webbeans.manager.WebBeansContainer.injectError(WebBeansContainer. java:1121) at com.caucho.webbeans.manager.WebBeansContainer.createProgram(WebBeansContaine r.java:470) at com.caucho.config.j2ee.InjectIntrospector.introspectInjectImpl(InjectIntrosp ector.java:208) at com.caucho.config.j2ee.InjectIntrospector.introspectInject(InjectIntrospecto r.java:183) at com.caucho.webbeans.component.ClassComponent.bind(ClassComponent.java:411) at com.caucho.webbeans.manager.WebBeansContainer.createTransient(WebBeansContai ner.java:836) at com.caucho.server.dispatch.ServletConfigImpl.createServletImpl(ServletConfig Impl.java:834) at com.caucho.server.dispatch.ServletConfigImpl.createServlet(ServletConfigImpl .java:754) at com.caucho.server.dispatch.CometServletFilterChain.doFilter(CometServletFilt erChain.java:101) at com.caucho.server.cache.CacheFilterChain.doFilter(CacheFilterChain.java:201) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:1 89) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java: 266) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:292) at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:577) at com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java: 1211) at com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1152) at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:759) at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:681) at java.lang.Thread.run(Thread.java:619) mailto:resin-interest- mailto:resin-interest- http://www.caucho.com/resin-3.1/examples/servlet-comet/ , the http://www.caucho.com/resin-3.1/examples/servlet-comet/comet http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about the Comet demo</header>
    <date>Tue Feb 10 00:03:53 CET 2009</date>
    <body>That's a complicated question, because the Java Injection (webbeans) spec just changed all packages and  locations for the beans.xml. The best thing, really, is if I clean up the example with the new Java Injection packaging and release a 4.0 snapshot. -- Scott mailto:resin-interest- mailto:resin-interest- http://www.caucho.com/resin-3.1/examples/servlet-comet/ , the http://www.caucho.com/resin-3.1/examples/servlet-comet/comet http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about the Comet demo</header>
    <date>Tue Feb 10 00:28:55 CET 2009</date>
    <body>Ok I will wait patiently for that.   What URL should I check for the new example? I finally figured out that if I copy my classes to the WEB-INF folder and then create the META-INF/web-beans.xml under there I can get it working. But it could find the classes under my [project]/classes folder (I run Resin under Eclipse), so I am not sure why it wouldn't work when I created the META-INF folder under _that_ 'classes' folder?  Oh well I will first try to recreate your next environment and then shoot questions. Thanks, Aaron mailto:resin-interest- mailto:resin-interest- mailto:resin-interest- http://www.caucho.com/resin-3.1/examples/servlet-comet/ , the http://www.caucho.com/resin-3.1/examples/servlet-comet/comet http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Question about the Comet demo</header>
    <date>Tue Feb 10 00:35:56 CET 2009</date>
    <body>It would be http://caucho.com/resin/examples/servlet-comet.xtp . The beans.xml should work under any root (jar or classes).  Do you have a separate &amp;lt;class-loader&amp;gt; configuration for the eclipse work area?  In other words, how does Resin know about your classes directory? -- Scott mailto:resin-interest- mailto:resin-interest- mailto:resin-interest- http://www.caucho.com/resin-3.1/examples/servlet-comet/ , the http://www.caucho.com/resin-3.1/examples/servlet-comet/comet http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] is unknow bean property of</header>
    <date>Mon Feb 02 16:17:19 CET 2009</date>
    <body>Hi all! We are having a lot of "javax.el.PropertyNotFoundException" when updating from version 3.0 to 3.1.8. An example: this one : 500 'Price' is an unknown bean property of.... The only thing that seems to fix this is to change it to The problem is that we have alot of jsp files to be changed, just wondering if there is an easy way to fix this? Thanks! Tuan Tran</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] is unknow bean property of</header>
    <date>Mon Feb 02 17:47:33 CET 2009</date>
    <body>Tuan, We also found Resin 3.1.x to be more specific than 3.0.x about the conventions used with EL. We made a pass through our code looking for these capitalization differences and that solved our problems. + jay http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] is unknow bean property of</header>
    <date>Mon Feb 02 17:55:37 CET 2009</date>
    <body>Exactly.  Resin 3.1 is more strict than 3.0 for EL behavior (because it's based on a newer version of the EL spec.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] is unknow bean property of</header>
    <date>Tue Feb 03 22:32:27 CET 2009</date>
    <body>Does Resin 3.1.x have a 'backwards-compatibility' mode so that it's possible to upgrade from 3.0.x to 3.1.x without making the EL changes in the JSP files?  We looked for such a setting and didn't see anything. In other words, do you need to fix the JSP files in order to upgrade from 3.0.x to 3.1.x, or is there another (lazy but less risky) way? Ethan -----Original Message----- From: resin-interest-boun...@caucho.com [ mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson Sent: Monday, February 02, 2009 8:53 AM To: General Discussion for the Resin application server Subject: Re: [Resin-interest] is unknow bean property of Exactly.  Resin 3.1 is more strict than 3.0 for EL behavior (because it's based on a newer version of the EL spec.) -- Scott ------------------------------------------------------------------------ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] is unknow bean property of</header>
    <date>Tue Feb 03 22:40:28 CET 2009</date>
    <body>Unfortunately, that's not possible because of the way that EL is designed. The javax.el handlers themselves are doing the validation, not Resin classes, and the handlers can't be changed because their behavior is defined by the EL specification.  So we're stuck. -- Scott mailto:resin-interest-boun...@caucho.com ] On Behalf Of Scott Ferguson http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Quercus with Joomla and Apache mod_rewrite</header>
    <date>Mon Feb 02 10:53:47 CET 2009</date>
    <body>I'm trying to move an existing Joomla site to Quercus. On the current system I have set "search engine friendly URLs" on and this strips the ugly params out. I guess its handled by Apache using a module or the .htaccess file. In any case, when I run the same setup under Quercus (again with the Apache + mod_caucho setup) it seems these URL's don't get converted, so the site right now is full of broken links. Its a shame because some pages do work, and the content is there meaning the db is ok, the compilation and cache is ok and it runs 3x faster ;-) So any tips on how I can get Resin + Quercus to do what the current setup is doing with respect to these URL rewrites please? Resin 3.2.1 Pro / RH Fed7</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus with Joomla and Apache mod_rewrite</header>
    <date>Mon Feb 02 15:07:10 CET 2009</date>
    <body>You can use this library: http://tuckey.org/urlrewrite/ to emulate apache mod_rewritte rules 2009/2/2 Stargazer &amp;lt;starga...@blueyonder.co.uk&amp;gt;: http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus with Joomla and Apache mod_rewrite</header>
    <date>Mon Feb 02 17:59:44 CET 2009</date>
    <body>You should use Resin's &amp;lt;rewrite-dispatch&amp;gt; rules.  There's an example at http://wiki.caucho.com/Rewrite-dispatch_for_Mediawiki_and_Quercus . The full docs are at http://caucho.com/resin/rewrite.xtp http://caucho.com/resin/doc/rewrite-tags.xtp If you can post Joomla's recommended mod_rewrite rules, we can help convert them to &amp;lt;rewrite-dispatch&amp;gt;. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus with Joomla and Apache mod_rewrite</header>
    <date>Thu Feb 05 00:42:42 CET 2009</date>
    <body>http://wiki.caucho.com/Rewrite-dispatch_for_Mediawiki_and_Quercus . http://caucho.com/resin/rewrite.xtp http://caucho.com/resin/doc/rewrite-tags.xtp Thanks, well since you asked here it is: ## # @version $Id: htaccess.txt 10492 2008-07-02 06:38:28Z ircmaxell $ # @package Joomla # @copyright Copyright (C) 2005 - 2008 Open Source Matters. All rights reserved. # @license http://www.gnu.org/copyleft/gpl.html GNU/GPL # Joomla! is Free Software ## ##################################################### #  READ THIS COMPLETELY IF YOU CHOOSE TO USE THIS FILE # # The line just below this section: 'Options +FollowSymLinks' may cause problems # with some server configurations.  It is required for use of mod_rewrite, but may already # be set by your server administrator in a way that dissallows changing it in # your .htaccess file.  If using it causes your server to error out, comment it out (add # to # beginning of line), reload your site in your browser and test your sef url's.  If they work, # it has been set by your server administrator and you do not need it set here. # ##################################################### ##  Can be commented out if causes errors, see notes above. Options +FollowSymLinks # #  mod_rewrite in use RewriteEngine On ########## Begin - Rewrite rules to block out some common exploits ## If you experience problems on your site block out the operations listed below ## This attempts to block the most common type of exploit `attempts` to Joomla! # # Block out any script trying to set a mosConfig value through the URL # Block out any script trying to base64_encode crap to send via URL # Block out any script that includes a &amp;lt;script&amp;gt; tag in URL # Block out any script trying to set a PHP GLOBALS variable via URL # Block out any script trying to modify a _REQUEST variable via URL # Send all blocked request to homepage with 403 Forbidden error! RewriteRule ^(.*)$ index.php [F,L] # ########## End - Rewrite rules to block out some common exploits #  Uncomment following line if your webserver's URL #  is not directly related to physical file paths. #  Update Your Joomla! Directory (just / for root) # RewriteBase / ########## Begin - Joomla! core SEF Section # (/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$  [NC] RewriteRule (.*) index.php # ########## End - Joomla! core SEF Section http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus with Joomla and Apache mod_rewrite</header>
    <date>Thu Feb 05 19:39:12 CET 2009</date>
    <body>I believe this part should look something like: In other words, anything ending with the specific endings are passed through as normal.  Anything else is appended to /index.php. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] ISAPI disconnect/configuration in 3.0.27</header>
    <date>Fri Jan 30 19:56:08 CET 2009</date>
    <body>Hello all, I'm working with the new 3.0.27 release of Resin Professional with the ISAPI plugin on IIS 6.0/Win2K3.  We've been experiencing for some time an issue with timeout problems on long-running report pages. If I connect directly to Resin HTTP, my long-running page (time to return data &amp;gt; 20 min) completes properly. When connecting through IIS, I can see that on the Resin side everything completes normally, but data never comes back to the client. IIS logs show something like this: 2009-01-30 17:10:07 W3SVC1 10.1.1.11 GET /app/Servlet parm=0&amp;amp;parm2=All&amp;amp;submit=Submit+Query 80 - 10.1.1.130 Mozilla/5.0+(Windows;+U;+Windows+NT+5.1;+en-US;+rv:1.9.0.6)+Gecko/2009011913+Firefox/3.0.6+Ubiquity/0.1.5 200 0 64 0 2435093 Note that there's a value of 64 in the sc-win32-status position. This indicates that the connection is no longer available. The browser never gets any response from the server and will just spin indefinitely. There have been several seemingly related fixes recently, including: http://bugs.caucho.com/view.php?id=2264 http://bugs.caucho.com/view.php?id=2843 http://bugs.caucho.com/view.php?id=2040 http://bugs.caucho.com/view.php?id=1851 That said, my servlet does return inside of an hour, so it seems like it ought to work, and I'm not getting anywhere with trying to resolve this. Does anybody have any tips for configuring the ISAPI filter and/or getting things set up either to allow the script to complete successfully or to error out properly? Thanks, Matt</body>
  </mail>
  <mail>
    <header>[Resin-interest] Webbeans is dead</header>
    <date>Wed Jan 28 09:10:44 CET 2009</date>
    <body>http://blogs.sun.com/theaquarium/entry/jsr_299_webbeans_is_dead?intcmp=2223 No wonder you guys have such a hard time keeping up!</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Webbeans is dead</header>
    <date>Wed Jan 28 10:41:51 CET 2009</date>
    <body>Yup, the Public Draft JSR-299 nomenclature has changed. But, I don't know it looks like Resin is ahead of the wave here with regards to implementation.I'm really excited about using this moving forward. http://blogs.sun.com/theaquarium/entry/jsr_299_webbeans_is_dead?intcmp=2223 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Webbeans is dead</header>
    <date>Wed Jan 28 16:18:33 CET 2009</date>
    <body>http://blogs.sun.com/theaquarium/entry/jsr_299_webbeans_is_dead?intcmp=2223 WebBeans is dead.  Long live Java CanDI!  (Contexts and Dependency Injection) Yeah, I spent the whole weekend refactoring our implementation to deal with the new packaging, and put up a Resin 4.0 snapshot yesterday. The changes are good though.  Basic summary: javax.inject - core injection annotations like the @BindingType, @Current, etc. javax.inject.manager - programmatic access to Java injection javax.context - context/scope stuff like ApplicationScoped, RequestScoped, SessionScoped javax.event - all the event firing stuff javax.interceptor - Interceptors (now completely shared with EJB) javax.decorator - Decorators (also complete shared with EJB) javax.annotation - @Named, @Stereotype moved here It's all logical, but I'm amazed they got permission to create that many top-level packages. The config namespace and beans.xml location changed too (causing all tests to fail, plus lots of core Resin tests): META-INF/beans.xml The urn:java:ee can now import multiple packages (with a ee/namespace file).  So urn:java:ee automatically imports javax.injection, java.lang(!), java.util(!), javax.context, etc. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] groovy webbeans</header>
    <date>Tue Jan 27 21:50:57 CET 2009</date>
    <body>I'm guessing the Resin's webbeans feature works well with groovy classes.My question is how would @Named webbeans be called in a gsp? Is there a resin class that would implement calling @Named webbeans from a Controller for example? Thanks.</body>
  </mail>
  <mail>
    <header>[Resin-interest]  Micro hessian on Blackberry simulator</header>
    <date>Mon Jan 26 17:57:35 CET 2009</date>
    <body>I am trying to run a simple java test app on the BB simulator (JDE 4.6.1). It is the usual intro test code. I am running resin pro 3.1.8, have tested that the hessian servlet is working by running a hessian client test. The micro hessian jar file I created by compiling on the BB JDE by pulling the 5 classes from the resin source (hessian 3.1.6, no 3.1.8 release of Hessian?). Everything loads into the simulator with no errors; using the debugger, I can step up to the out.flush call. Remove the out.flush call, it hangs on the openInputStream call. The exception has a bytesTransferred field whose value is 0. No IO is happening. Anyone been here? os.flush(); // hangs on this call, eventually times out with a java.io.iointerrruptedexception -- View this message in context: http://www.nabble.com/Micro-hessian-on-Blackberry-simulator-tp21669022p21669022.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Micro hessian on Blackberry simulator</header>
    <date>Fri Jan 30 05:10:03 CET 2009</date>
    <body>Solved it. Use the MDS simulator for testing rather than using BB Internet Server. Include deviceside=false in URL. Also, ensure that the URL does not use localhost. Instead use your PC's name http://mypc:8080/test . -- View this message in context: http://www.nabble.com/Micro-hessian-on-Blackberry-simulator-tp21669022p21741140.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Which version?</header>
    <date>Sun Jan 25 16:03:22 CET 2009</date>
    <body>The resin downloads page currently has 3.2.1 (dev), 3.1.8 (stable) and 4.0 (snapshot). I understand 3.1.8 is the stable version so what is the point of 3.2.1 now 4.0 is present? Will the 3.2.x line ever get to stable before 4.0 is released? Which would you use for best Quercus performance? If bugs are fixed in Quercus, and applied to the 3.2.x line, are they to be fixed in future 3.1.x stable releases?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Which version?</header>
    <date>Sun Jan 25 20:48:02 CET 2009</date>
    <body>It's obsolete. You can either think of 3.2.x as a dead end, or as an early beta of 4.0. For Quercus, you really need to use the latest version, because the number of bug fixes and new functions is so large. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Which version?</header>
    <date>Sun Jan 25 23:12:11 CET 2009</date>
    <body>Ok so theres a dilemma here. We know 4.0 won't be stable until at least the summer, but you don't advise anyone to use anything other than stable in production environments. It seems a waste to see all these Quercus fixes but never really be able to use them for 6 months. Couldn't you consider one last stable 3.2.x release, with these latest Quercus fixes, just for this reason? http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.avg.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Which version?</header>
    <date>Mon Jan 26 18:01:36 CET 2009</date>
    <body>It's not really possible either from a code-management standpoint or from a time standpoint.  We're not going to delay 4.0 just to put in Quercus fixes in an older development release (and 3.2.x was always a development branch; the stable branch is 3.1.x). -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.avg.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest]  3.1.8 on PowerMac G5?</header>
    <date>Fri Jan 23 02:19:14 CET 2009</date>
    <body>Does 3.1.8 work on PowerMac G5?  Getting this error when starting up: 1.5.0_16-b06-284, MacRoman, en mode, Apple Inc. /Server/Users/tweihs/workspace/servers/resin-pro-3.1.8/ /Server/Users/tweihs/workspace/servers/resin-pro-3.1.8/ /Server/Users/tweihs/workspace/servers/resin-pro-3.1.8/conf/resin.conf http://localhost:8080 ] active http://localhost:8080/resin-admin ] active http://localhost:8080/resin-doc ] active dyld: lazy symbol binding failed: Symbol not found: _jvmti_can_reload_native Referenced from: /Server/Users/tweihs/workspace/servers/resin-pro-3.1.8/libexec/libresin_os.jnilib Expected in: flat namespace dyld: Symbol not found: _jvmti_can_reload_native Referenced from: /Server/Users/tweihs/workspace/servers/resin-pro-3.1.8/libexec/libresin_os.jnilib Expected in: flat namespace -- View this message in context: http://www.nabble.com/3.1.8-on-PowerMac-G5--tp21617119p21617119.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.1.8 on PowerMac G5?</header>
    <date>Fri Jan 23 05:38:32 CET 2009</date>
    <body>I have 3.2.0 Pro running on a ppc G5 Mac without issues. Did you perhaps copy resin from an intel Mac over to your ppc Mac? Whether or not you did that, did you build the native libs via: ./configure make make install Rob http://localhost:8080 ] active http://localhost:8080/resin-admin ] active http://localhost:8080/resin-doc ] active http://www.nabble.com/3.1.8-on-PowerMac-G5--tp21617119p21617119.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.1.8 on PowerMac G5?</header>
    <date>Fri Jan 23 05:57:34 CET 2009</date>
    <body>I did, but cleaned the build prior to reconfiging, building. Downloading a fresh bundle from the web and no probs.  &amp;lt;duh, fwaps self&amp;gt;. http://localhost:8080 ] active http://localhost:8080/resin-admin ] active http://localhost:8080/resin-doc ] active http://www.nabble.com/3.1.8-on-PowerMac-G5--tp21617119p21617119.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.1.8 on PowerMac G5?</header>
    <date>Fri Jan 23 07:17:48 CET 2009</date>
    <body>Yea, the reason I know this is because I did the same thing some time ago and learned that cleaning doesn't actually get rid of everything. Live and learn. Glad it's working for you now. Rob http://localhost:8080 ] active http://localhost:8080/resin-admin ] http://localhost:8080/resin-doc ] active http://www.nabble.com/3.1.8-on-PowerMac-G5--tp21617119p21617119.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Comet implementation details</header>
    <date>Tue Jan 20 20:44:29 CET 2009</date>
    <body>We're considering using Resin's comet implementation in an HTTP idle scenario (probably 30 minute wait period), where an HTTP client creates a connection and then waits up to 30 minutes for a response. I understand that one of the idle connections takes up a socket on the server but not a thread. However, does this mean that the server will never receive a close event from the client (since nothing is blocking on read)? If this is the case, then any background worker threads (spawned by me) responsible for calling CometController#wake will continue to work on behalf of that connection until the wait period is up. Is my understanding correct? Thanks, Caleb Richardson</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Comet implementation details</header>
    <date>Fri Jan 23 18:22:09 CET 2009</date>
    <body>Hmm.  I think that's true.  I've added a bug report at http://bugs.caucho.com/view.php?id=3294 . We may need to redesign the comet support for Servlet 3.0 (Resin 4.0), so that issue may be part of that design. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest]  JMS Exceptions, 3.1.8</header>
    <date>Sun Jan 18 22:09:21 CET 2009</date>
    <body>We finally upgraded to 3.1.8! ("Hallelujah, holy s**t, where's the tylenol" - Clark W. Griswald) The pain moving from 3.1.3, which we stuck ourselves on not knowing it was a dev release, was intense (changed just about every tag, new super classes for many of our objects, made the jump to configuring all our beans via IoC), but it seems to be paying off (better production performance, easier development using annotations, etc.). We're seeing the following exception in production now, though: message listener '_ejb.defaultexecutor.executor__...@149dd5b' failed for message 'ObjectMessageImpl[ID:4U5naCkuy/cAEe3cHn/wAC]' with exception java.lang.NullPointerException java.lang.NullPointerException com.caucho.jms.connection.JmsSession.commit(JmsSession.java:1018) com.caucho.transaction.TransactionImpl.commit(TransactionImpl.java:658) com.caucho.transaction.TransactionManagerImpl.commit(TransactionManagerImpl.java:271) com.caucho.jca.UserTransactionImpl.commit(UserTransactionImpl.java:436) com.caucho.jca.UserTransactionProxy.commit(UserTransactionProxy.java:167) com.caucho.ejb3.xa.XAManager.commit(XAManager.java:243) _ejb.DefaultExecutor.Executor__EJB.onMessage(Executor__EJB.java:81) com.caucho.jms.connection.MessageConsumerImpl.handleMessage(MessageConsumerImpl.java:326) com.caucho.jms.connection.JmsSession.run(JmsSession.java:1075) com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:730) com.caucho.util.ThreadPool$Item.run(ThreadPool.java:649) com.caucho.jms.file.FileQueue.acknowledge(FileQueue.java:261) com.caucho.jms.connection.JmsSession$ReceiveMessage.commit(JmsSession.java:1193) com.caucho.jms.connection.JmsSession.commit(JmsSession.java:667) com.caucho.jms.connection.JmsSession.commit(JmsSession.java:1016) We're using file queues for storage.  We're also seeing class cast exceptions occasionally when pulling the message objects out of the queue, where Message.getObject() is returning a java.lang.Long (and we've checked code to see that we're not injecting Longs).  Any ideas? -- View this message in context: http://www.nabble.com/JMS-Exceptions%2C-3.1.8-tp21532983p21532983.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JMS Exceptions, 3.1.8</header>
    <date>Tue Jan 20 18:03:08 CET 2009</date>
    <body>I've filed this as a bug, although I think we've already fixed it (it might need to be fixed back in 3.1.x) Do you know what the expected type is?  It's conceivable that a Byte is getting converted to a Long. -- Scott http://www.nabble.com/JMS-Exceptions%2C-3.1.8-tp21532983p21532983.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JMS Exceptions, 3.1.8</header>
    <date>Tue Jan 20 18:14:03 CET 2009</date>
    <body>The expected type is an instance of one of our serializable classes. Fixing that back in 3.1.8/9 would be greatly appreciated. http://www.nabble.com/JMS-Exceptions%2C-3.1.8-tp21532983p21532983.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JMS Exceptions, 3.1.8</header>
    <date>Tue Jan 20 18:30:06 CET 2009</date>
    <body>Hmm.  Is there any pattern when this happens? Yep.  I'll check. -- Scott http://www.nabble.com/JMS-Exceptions%2C-3.1.8-tp21532983p21532983.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] JMS Exceptions, 3.1.8</header>
    <date>Wed Jan 21 15:57:26 CET 2009</date>
    <body>I need to investigate further for patterns. http://www.nabble.com/JMS-Exceptions%2C-3.1.8-tp21532983p21532983.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Hybernate &amp;amp; Resin 3.1.8</header>
    <date>Fri Jan 16 01:01:44 CET 2009</date>
    <body>Hello - We are in the process of upgrading from Resin 3.0.22 to Resin 3.1.8. In our 3.0.22 environment Hibernate is working without issue.  With the upgrade to 3.1.8 we are experiencing the following issue that we know of. The mapping files are throwing error.  For example, in a one-to-one element, with in the mapping file, we have specified not-null="true". In 3.0.22 this works fine, in 3.1.8 this throws an error. Here is the error as displayed in the Resin console. [2009-01-13 16:35:14,146] ERROR XMLHelper:61 org.hibernate.util.XMLHelper.error(..) - Error parsing XML: XML InputStream(14) Attribute "not-null" must be declared for element type "one-to-one". [2009-01-13 16:35:14,149] ERROR XMLHelper:61 org.hibernate.util.XMLHelper.error(..) - Error parsing XML: XML InputStream(15) Attribute "lazy" with value "true" must have a value from the list "false proxy no-proxy ". [2009-01-13 16:35:14,158] ERROR XMLHelper:61 org.hibernate.util.XMLHelper.error(..) - Error parsing XML: XML InputStream(28) Attribute "not-null" must be declared for element type "one-to-one". Any help would be greatly appreciated.  Specificly if you have any documentation on how to integrate Hibernate with 3.1.8 or what the mapping files should be written. Thanks Todd Sowers -- Todd Sowers DList.com phone: 646-827-6766 t...@dlist.com www.dlist.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hybernate &amp;amp; Resin 3.1.8</header>
    <date>Fri Jan 16 01:13:45 CET 2009</date>
    <body>You may need to double check the XML, because the default XML parser changed from 3.0 to 3.1.  Resin 3.0 defaulted XML to its own XML parser.  Resin 3.1 uses the JDK's parser. I'm not familiar with the Hibernate syntax, but it's possible that Resin's XML parser was either allowing some syntax or was providing defaults that the standard JDK parser isn't providing. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hybernate &amp;amp; Resin 3.1.8</header>
    <date>Fri Jan 16 01:42:49 CET 2009</date>
    <body>When it comes to XML, I've come to the conclusion that it's best to always explicitly define the XML library/parser that you're going to use to avoid problems just like this. Luckily, Resin makes this easy in the resin.conf file: ... javax .xml .parsers .DocumentBuilderFactory javax .xml .parsers javax .xml .transform .TransformerFactory ... The above is from our Resin 3.0.x resin.conf file. I assume the same will work for Resin 3.1.x? Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hybernate &amp;amp; Resin 3.1.8</header>
    <date>Fri Jan 16 17:51:04 CET 2009</date>
    <body>Thanks - This worked perfect. The issue we now encounter is the Google Contact API is not returning any data.  We believe this is because the Google Contacts API needs javax.xml.parsers.SAXParserFactory and we have defaulted the parser (to fix the previous Hibernate issue) to com.caucho.xml.parsers.XmlSAXParserFactory Any suggestions? Todd -- Todd Sowers DList.com phone: 646-827-6766 t...@dlist.com www.dlist.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hybernate &amp;amp; Resin 3.1.8</header>
    <date>Fri Jan 16 18:47:16 CET 2009</date>
    <body>Have you tried using the Apache Xerces parser? There are definitely differences and assumptions that people make, often unknowingly, when crafting XML that result in the XML only being "parseable" by the parser they themselves are using. Anyway, that's what I would try. If that doesn't work, can you post the error you're getting? Preferably with the XML data that Google is sending you. I generally do this by issuing the request from within a browser that properly displays raw XML, such as Firefox (or IE on Windows or Camino on OS X, notably Safari does not), then you might be able to find out what the offending part of the XML is and go from there. Rob http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hybernate &amp;amp; Resin 3.1.8</header>
    <date>Fri Jan 16 19:15:24 CET 2009</date>
    <body>Rob - Yes we have tried using the Apache Xerces parser and it doesn't work The only time the Google API returns records is when we do not include the following: ... javax .xml .parsers .DocumentBuilderFactory javax .xml .parsers javax .xml .transform .TransformerFactory ... In this case, hibernate returns errors. We just are at a lose as what to do.  We absolutely need to use Hibernate, most of our application is developed using it.   By including the fore mentioned tags Hibernate works fine, but the Google API returns nothing. Todd -- Todd Sowers DList.com phone: 646-827-6766 t...@dlist.com www.dlist.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hybernate &amp;amp; Resin 3.1.8</header>
    <date>Fri Jan 16 21:21:52 CET 2009</date>
    <body>What Google API requests are resulting in errors? And what are the errors? Rob http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hybernate &amp;amp; Resin 3.1.8</header>
    <date>Fri Jan 16 21:37:55 CET 2009</date>
    <body>Rob - There are no errors.  When we call the function, we ask it to return the result set count.  In our case it should be 37.  However it returns 0. The API we are using is the Google Contacts Data API ( http://code.google.com/apis/contacts/docs/2.0/developers_guide_java.html ) This is the test class which should return data.  It returns nothing. /** * This is a test template */ // Create a new Contacts service ContactsService myService = new ContactsService("My myService .setUserCredentials ("****INSERT_GOOGLE_USER_NAME // Get a list of all entries URL metafeedUrl = new URL(" http://www.google.com/m8/feeds/contacts/default/full //ContactFeed resultFeed = myService.getFeed(metafeedUrl, ContactFeed resultFeed = myService.query(myQuery, If we run this class in Eclipse as a Java application, it returns the contact data without issue. Any help here would be greatly appreciated.  Thanks again. -- Todd Sowers DList.com phone: 646-827-6766 t...@dlist.com www.dlist.com -- Todd Sowers DList.com phone: 646-827-6766 t...@dlist.com www.dlist.com What Google API requests are resulting in errors? And what are the errors? Rob Rob - Yes we have tried using the Apache Xerces parser and it doesn't work The only time the Google API returns records is when we do not include the following: ... javax .xml .parsers .DocumentBuilderFactory javax .xml .parsers javax .xml .transform .TransformerFactory ... In this case, hibernate returns errors. We just are at a lose as what to do.  We absolutely need to use Hibernate, most of our application is developed using it.   By including the fore mentioned tags Hibernate works fine, but the Google API returns nothing. Todd</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hybernate &amp;amp; Resin 3.1.8</header>
    <date>Fri Jan 16 21:55:59 CET 2009</date>
    <body>I don't have time to look at it now, but will this weekend if you don't figure it out. Rob Rob - There are no errors.  When we call the function, we ask it to return the result set count.  In our case it should be 37.  However it returns 0. The API we are using is the Google Contacts Data API ( http://code.google.com/apis/contacts/docs/2.0/developers_guide_java.html ) This is the test class which should return data.  It returns nothing. /** * This is a test template */ // Create a new Contacts service ContactsService myService = new ContactsService("My myService .setUserCredentials ("****INSERT_GOOGLE_USER_NAME // Get a list of all entries URL metafeedUrl = new URL(" http://www.google.com/m8/feeds/contacts/default/full //ContactFeed resultFeed = myService.getFeed(metafeedUrl, ContactFeed resultFeed = myService.query(myQuery, If we run this class in Eclipse as a Java application, it returns the contact data without issue. Any help here would be greatly appreciated.  Thanks again. -- Todd Sowers DList.com phone: 646-827-6766 t...@dlist.com www.dlist.com -- Todd Sowers DList.com phone: 646-827-6766 t...@dlist.com www.dlist.com What Google API requests are resulting in errors? And what are the errors? Rob Rob - Yes we have tried using the Apache Xerces parser and it doesn't work The only time the Google API returns records is when we do not include the following: ... javax .xml .parsers .DocumentBuilderFactory javax .xml .parsers javax .xml .transform .TransformerFactory ... In this case, hibernate returns errors. We just are at a lose as what to do.  We absolutely need to use Hibernate, most of our application is developed using it.   By including the fore mentioned tags Hibernate works fine, but the Google API returns nothing. Todd</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hybernate &amp;amp; Resin 3.1.8</header>
    <date>Fri Jan 16 22:03:01 CET 2009</date>
    <body>Rob - Thank you so much.  I can promise you we will not figure it out.  We are out of ideas.  Any guidance you can provide would be very much appreciated. Thanks, Todd Sowers -- Todd Sowers DList.com phone: 646-827-6766 t...@dlist.com www.dlist.com I don't have time to look at it now, but will this weekend if you don't figure it out. Rob Rob - There are no errors.  When we call the function, we ask it to return the result set count.  In our case it should be 37.  However it returns 0. The API we are using is the Google Contacts Data API ( http://code.google.com/apis/contacts/docs/2.0/developers_guide_java.html ) This is the test class which should return data.  It returns nothing. /** * This is a test template */ // Create a new Contacts service ContactsService myService = new ContactsService("My myService .setUserCredentials ("****INSERT_GOOGLE_USER_NAME // Get a list of all entries URL metafeedUrl = new URL(" http://www.google.com/m8/feeds/contacts/default/full //ContactFeed resultFeed = myService.getFeed(metafeedUrl, Query myQuery = new ContactFeed resultFeed = myService.query(myQuery, If we run this class in Eclipse as a Java application, it returns the contact data without issue. Any help here would be greatly appreciated.  Thanks again. -- Todd Sowers DList.com phone: 646-827-6766 t...@dlist.com www.dlist.com -- Todd Sowers DList.com phone: 646-827-6766 t...@dlist.com www.dlist.com What Google API requests are resulting in errors? And what are the errors? Rob Rob - Yes we have tried using the Apache Xerces parser and it doesn't work The only time the Google API returns records is when we do not include the following: ... javax .xml .parsers .DocumentBuilderFactory javax .xml .parsers javax .xml .transform .TransformerFactory ... In this case, hibernate returns errors. We just are at a lose as what to do.  We absolutely need to use Hibernate, most of our application is developed using it.   By including the fore mentioned tags Hibernate works fine, but the Google API returns nothing. Todd</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hybernate &amp;amp; Resin 3.1.8</header>
    <date>Sat Jan 17 05:59:34 CET 2009</date>
    <body>Sorry, I don't have an answer for you. I used the jsp below along with the gdata libraries in my local resin configuration and it worked fine retrieving my contacts. It didn't matter if I specified the xerces xml parsers or not. It worked either way. I would guess you have something mis-configured or otherwise interfering, or perhaps one or more of the contacts you're retrieving has some bizarre or non-standard character(s) that are throwing off the xerces parser. My advice would be to try to boil it down to the simplest possible test case (one contact, no hibernate, nothing else) and then slowly start adding other code and features until it breaks. import=" com.google.gdata.client.Query, com.google.gdata.client.contacts.ContactsService, com.google.gdata.data.contacts.ContactEntry, com.google.gdata.data.contacts.ContactFeed, com.google.gdata.util.AuthenticationException, com.google.gdata.util.ServiceException, java.net.URL, java.util.List" out .println(System.getProperty("javax.xml.parsers.DocumentBuilderFactory") out.println(System.getProperty("javax.xml.parsers.SAXParserFactory") out .println(System.getProperty("javax.xml.transform.TransformerFactory") //Create a new Contacts service myService.setUserCredentials("****INSERT_GOOGLE_USER_NAME*******", //Get a list of all entries URL metafeedUrl = new URL(" http://www.google.com/m8/feeds/contacts/default/full //ContactFeed resultFeed = myService.getFeed(metafeedUrl, Rob - Thank you so much.  I can promise you we will not figure it out.  We are out of ideas.  Any guidance you can provide would be very much appreciated. Thanks, Todd Sowers I don't have time to look at it now, but will this weekend if you don't figure it out. Rob Rob - There are no errors.  When we call the function, we ask it to return the result set count.  In our case it should be 37. However it returns 0. The API we are using is the Google Contacts Data API ( http://code.google.com/apis/contacts/docs/2.0/developers_guide_java.html ) This is the test class which should return data.  It returns nothing. /** * This is a test template */ // Create a new Contacts service ContactsService myService = new ContactsService("My myService .setUserCredentials ("****INSERT_GOOGLE_USER_NAME // Get a list of all entries URL metafeedUrl = new URL(" http://www.google.com/m8/feeds/contacts/default/full //ContactFeed resultFeed = myService.getFeed(metafeedUrl, Query myQuery = new ContactFeed resultFeed = myService.query(myQuery, If we run this class in Eclipse as a Java application, it returns the contact data without issue. Any help here would be greatly appreciated.  Thanks again. What Google API requests are resulting in errors? And what are the errors? Rob Rob - Yes we have tried using the Apache Xerces parser and it doesn't work The only time the Google API returns records is when we do not include the following: ... javax .xml .parsers .DocumentBuilderFactory javax .xml .parsers javax .xml .transform .TransformerFactory ... In this case, hibernate returns errors. We just are at a lose as what to do.  We absolutely need to use Hibernate, most of our application is developed using it.   By including the fore mentioned tags Hibernate works fine, but the Google API returns nothing. Todd</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Hybernate &amp;amp; Resin 3.1.8</header>
    <date>Sun Jan 18 08:05:02 CET 2009</date>
    <body>I have just skimmed this thread, so I'm sorry if I'm trying to solve the "wrong" problem, but can't you just fix the errors in your Hibernate mapping files, which you quoted in your original post? Those are DTD errors, but some parsers (read: Resin) will ignore them silently. For us this meant that our XML was accepted in the runtime environment (Resin parser) but caused errors in our JUnit tests (Xerces parser). I'd highly recommend having JUnit tests for all your Hibernate mappings (i.e. a TestCase for each *DAOImpl class). Spring and hsqldb really is helpful here. Good luck. /Mattias Todd Sowers wrote (2009-01-16 19:13):</body>
  </mail>
  <mail>
    <header>[Resin-interest] 3.0.22 to 3.1.8</header>
    <date>Fri Jan 16 00:51:43 CET 2009</date>
    <body>Hello - We are in the process of upgrading our Resin 3.0.22 servers to Resin 3.1.8.  Is there any documentation for upgrading from Resin 3.0.x to 3.1.x.  We have encountered a couple of issues (slow loading of initial page) and want to make sure we have everything configured properly based on our 3.0.22 resin.conf file. Thanks, Todd Sowers -- Todd Sowers DList.com phone: 646-827-6766 t...@dlist.com www.dlist.com</body>
  </mail>
  <mail>
    <header>[Resin-interest] Fwd: Issue getting JNI up and running</header>
    <date>Wed Jan 14 18:36:32 CET 2009</date>
    <body>Sorry I had some issues getting on the mailinglist. You can see the SO is compiled, but for some reason it cannot be loaded. Any advice? I am on Resin Pro. [r...@x bin]# ./resin.sh start Resin/3.2.1 can't start -server '' for watchdog at 127.0.0.1:6600. com.caucho.config.ConfigException: &amp;lt;user-name&amp;gt; requires compiled JNI.  Check the $RESIN_HOME/libexec or $RESIN_HOME/libexec64 directory for libresin_os.so. [r...@x bin]# ls -la ../libexec/ total 180 drwxr-xr-x  2 root root   4096 Jan  2 19:38 . drwxr-xr-x 20 root root   4096 Jan  6 19:48 .. -rwxr-xr-x  1 root root 170308 Jan  3 00:11 libresin_os.so -- -jk -- -jk</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fwd: Issue getting JNI up and running</header>
    <date>Wed Jan 14 19:59:47 CET 2009</date>
    <body>Hi, You're missing 2 SOs: libresin.so and libresinssl.so.  You'll need to recompile and/or check for compilation errors. Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; BAM: lightweight high-speed messaging</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fwd: Issue getting JNI up and running</header>
    <date>Wed Jan 14 20:06:48 CET 2009</date>
    <body>That's been changed in 3.2.1.  The &amp;lt;user-name&amp;gt; feature only requires libresin_os now. -- Scott mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fwd: Issue getting JNI up and running</header>
    <date>Wed Jan 14 20:40:55 CET 2009</date>
    <body>Thanks, here is the output from verbose.  It looks like the DYLD_LIBRARY_PATH is set, but not correct in LD_LIBRARY_PATH.  Should I just change LD_LIBRARY_PATH to include the libexec64 directory? /usr/java/jdk1.6.0_11/bin/java \ -Djava.util.logging.manager=com.caucho.log.LogManagerImpl \ -Djava.system.class.loader=com.caucho.loader.SystemClassLoader \ -Djavax.management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl \ -Djava.awt.headless=true \ -Dresin.home=/usr/resin/ \ -d64 \ -Xmx1024m \ -Xss1m \ -Xdebug \ -Dcom.sun.management.jmxremote \ com.caucho.server.resin.Resin \ --root-directory \ /usr/resin/ \ -conf \ /usr/resin/conf/resin.xml \ -socketwait \ 57581 \ -verbose TERM: linux DYLD_LIBRARY_PATH: /usr/resin/libexec64 SHLVL: 2 XFILESEARCHPATH: /usr/dt/app-defaults/%L/Dt SSH_CLIENT: 192.168.1.51 59565 22 MAIL: /var/spool/mail/jkowall PWD: /usr/resin/bin HOSTNAME: gvahmfg02.gvah.mfgq.com SSH_TTY: /dev/pts/1 LOGNAME: jkowall CVS_RSH: ssh G_BROKEN_FILENAMES: 1 NLSPATH: /usr/dt/lib/nls/msg/%L/%N.cat LD_LIBRARY_PATH: /usr/resin/libexec64 /usr/java/jdk1.6.0_11/jre/lib/amd64/server /usr/java/jdk1.6.0_11/jre/lib/amd64 /usr/java/jdk1.6.0_11/jre/../lib/amd64 SSH_CONNECTION: 192.168.1.51 59565 10.10.50.72 22 INPUTRC: /etc/inputrc SHELL: /bin/bash HISTSIZE: 1000 CLASSPATH: /usr/resin//lib/resin.jar /usr/java/jdk1.6.0_11/lib/tools.jar /usr/resin/lib/pro.jar /usr/resin/lib/resin.jar /usr/resin/lib/jsf-12.jar /usr/resin/lib/webutil.jar /usr/resin/lib/activation.jar /usr/resin/lib/javamail-141.jar /usr/resin/lib/javaee-16.jar /usr/resin/lib/jaxstream-15.jar /usr/resin/lib/osgi-14.jar PATH: /usr/resin/win64:/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/home/jkowall/bin USER: jkowall HOME: /root LESSOPEN: |/usr/bin/lesspipe.sh %s LS_COLORS: no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=01;32:*.cmd=01;32:*.exe=01;32:*.com=01;32:*.btm=01;32:*.bat=01;32:*.sh=01;32:*.csh=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tz=01;31:*.rpm=01;31:*.cpio=01;31:*.jpg=01;35:*.gif=01;35:*.bmp=01;35:*.xbm=01;35:*.xpm=01;35:*.png=01;35:*.tif=01;35: SSH_ASKPASS: /usr/libexec/openssh/gnome-ssh-askpass LANG: en_US.UTF-8 mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- -jk</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fwd: Issue getting JNI up and running</header>
    <date>Wed Jan 14 22:48:19 CET 2009</date>
    <body>Thanks, here is the output from verbose.  It looks like the DYLD_LIBRARY_PATH is set, but not correct in LD_LIBRARY_PATH. Should I just change LD_LIBRARY_PATH to include the libexec64 directory? It looks like the ./configure process is compiling for 32 bits (libexec), but you're running in 64-bit mode (libexec64). Try running ./configure --enable-64bit, and check for libexec64/ libresin_os.so -- Scott /usr/java/jdk1.6.0_11/bin/java \ -Djava.util.logging.manager=com.caucho.log.LogManagerImpl \ -Djava.system.class.loader=com.caucho.loader.SystemClassLoader \ - Djavax .management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl \ -Djava.awt.headless=true \ -Dresin.home=/usr/resin/ \ -d64 \ -Xmx1024m \ -Xss1m \ -Xdebug \ -Dcom.sun.management.jmxremote \ com.caucho.server.resin.Resin \ --root-directory \ /usr/resin/ \ -conf \ /usr/resin/conf/resin.xml \ -socketwait \ 57581 \ -verbose TERM: linux DYLD_LIBRARY_PATH: /usr/resin/libexec64 SHLVL: 2 XFILESEARCHPATH: /usr/dt/app-defaults/%L/Dt SSH_CLIENT: 192.168.1.51 59565 22 MAIL: /var/spool/mail/jkowall PWD: /usr/resin/bin HOSTNAME: gvahmfg02.gvah.mfgq.com SSH_TTY: /dev/pts/1 LOGNAME: jkowall CVS_RSH: ssh G_BROKEN_FILENAMES: 1 NLSPATH: /usr/dt/lib/nls/msg/%L/%N.cat LD_LIBRARY_PATH: /usr/resin/libexec64 /usr/java/jdk1.6.0_11/jre/lib/amd64/server /usr/java/jdk1.6.0_11/jre/lib/amd64 /usr/java/jdk1.6.0_11/jre/../lib/amd64 SSH_CONNECTION: 192.168.1.51 59565 10.10.50.72 22 INPUTRC: /etc/inputrc SHELL: /bin/bash HISTSIZE: 1000 CLASSPATH: /usr/resin//lib/resin.jar /usr/java/jdk1.6.0_11/lib/tools.jar /usr/resin/lib/pro.jar /usr/resin/lib/resin.jar /usr/resin/lib/jsf-12.jar /usr/resin/lib/webutil.jar /usr/resin/lib/activation.jar /usr/resin/lib/javamail-141.jar /usr/resin/lib/javaee-16.jar /usr/resin/lib/jaxstream-15.jar /usr/resin/lib/osgi-14.jar PATH: /usr/resin/win64:/usr/kerberos/sbin:/usr/kerberos/bin:/usr/ local/bin:/bin:/usr/bin:/home/jkowall/bin USER: jkowall HOME: /root LESSOPEN: |/usr/bin/lesspipe.sh %s LS_COLORS: no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=01;32:*.cmd=01;32:*.exe=01;32:*.com=01;32:*.btm=01;32:*.bat=01;32:*.sh=01;32:*.csh=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tz=01;31:*.rpm=01;31:*.cpio=01;31:*.jpg=01;35:*.gif=01;35:*.bmp=01;35:*.xbm=01;35:*.xpm=01;35:*.png=01;35:*.tif=01;35: SSH_ASKPASS: /usr/libexec/openssh/gnome-ssh-askpass LANG: en_US.UTF-8 to That's been changed in 3.2.1.  The &amp;lt;user-name&amp;gt; feature only requires libresin_os now. -- Scott mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fwd: Issue getting JNI up and running</header>
    <date>Thu Jan 15 02:05:42 CET 2009</date>
    <body>Thanks Scott, its been a while since we spoke.  I used to post here many years ago :) The compile worked fine, but I got this error when I try to fire up resin. [r...@gvahmfg02 bin]# ./resin.sh # # An unexpected error has been detected by Java Runtime Environment: # #  SIGSEGV (0xb) at pc=0x00002aab0e81fba0, pid=4104, tid=1093785920 # # Java VM: Java HotSpot(TM) 64-Bit Server VM (11.0-b16 mixed mode linux-amd64) # Problematic frame: # C  [libresin_os.so+0x7ba0] # # An error report file with more information is saved as: # /usr/resin/bin/hs_err_pid4104.log # # If you would like to submit a bug report, please visit: # http://java.sun.com/webapps/bugreport/crash.jsp # Aborted mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- -jk</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fwd: Issue getting JNI up and running</header>
    <date>Thu Jan 15 21:38:04 CET 2009</date>
    <body>Thanks Scott, its been a while since we spoke.  I used to post here many years ago :) Can you send the hs_err_pid4104.log?  I'm pretty sure we checked &amp;lt;user- name&amp;gt; on the 64 bit systems. -- Scott The compile worked fine, but I got this error when I try to fire up resin. [r...@gvahmfg02 bin]# ./resin.sh # # An unexpected error has been detected by Java Runtime Environment: # #  SIGSEGV (0xb) at pc=0x00002aab0e81fba0, pid=4104, tid=1093785920 # # Java VM: Java HotSpot(TM) 64-Bit Server VM (11.0-b16 mixed mode linux-amd64) # Problematic frame: # C  [libresin_os.so+0x7ba0] # # An error report file with more information is saved as: # /usr/resin/bin/hs_err_pid4104.log # # If you would like to submit a bug report, please visit: # http://java.sun.com/webapps/bugreport/crash.jsp # Aborted Thanks, here is the output from verbose.  It looks like the DYLD_LIBRARY_PATH is set, but not correct in LD_LIBRARY_PATH. Should I just change LD_LIBRARY_PATH to include the libexec64 directory? It looks like the ./configure process is compiling for 32 bits (libexec), but you're running in 64-bit mode (libexec64). Try running ./configure --enable-64bit, and check for libexec64/ libresin_os.so -- Scott /usr/java/jdk1.6.0_11/bin/java \ -Djava.util.logging.manager=com.caucho.log.LogManagerImpl \ -Djava.system.class.loader=com.caucho.loader.SystemClassLoader \ - Djavax .management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl \ -Djava.awt.headless=true \ -Dresin.home=/usr/resin/ \ -d64 \ -Xmx1024m \ -Xss1m \ -Xdebug \ -Dcom.sun.management.jmxremote \ com.caucho.server.resin.Resin \ --root-directory \ /usr/resin/ \ -conf \ /usr/resin/conf/resin.xml \ -socketwait \ 57581 \ -verbose TERM: linux DYLD_LIBRARY_PATH: /usr/resin/libexec64 SHLVL: 2 XFILESEARCHPATH: /usr/dt/app-defaults/%L/Dt SSH_CLIENT: 192.168.1.51 59565 22 MAIL: /var/spool/mail/jkowall PWD: /usr/resin/bin HOSTNAME: gvahmfg02.gvah.mfgq.com SSH_TTY: /dev/pts/1 LOGNAME: jkowall CVS_RSH: ssh G_BROKEN_FILENAMES: 1 NLSPATH: /usr/dt/lib/nls/msg/%L/%N.cat LD_LIBRARY_PATH: /usr/resin/libexec64 /usr/java/jdk1.6.0_11/jre/lib/amd64/server /usr/java/jdk1.6.0_11/jre/lib/amd64 /usr/java/jdk1.6.0_11/jre/../lib/amd64 SSH_CONNECTION: 192.168.1.51 59565 10.10.50.72 22 INPUTRC: /etc/inputrc SHELL: /bin/bash HISTSIZE: 1000 CLASSPATH: /usr/resin//lib/resin.jar /usr/java/jdk1.6.0_11/lib/tools.jar /usr/resin/lib/pro.jar /usr/resin/lib/resin.jar /usr/resin/lib/jsf-12.jar /usr/resin/lib/webutil.jar /usr/resin/lib/activation.jar /usr/resin/lib/javamail-141.jar /usr/resin/lib/javaee-16.jar /usr/resin/lib/jaxstream-15.jar /usr/resin/lib/osgi-14.jar PATH: /usr/resin/win64:/usr/kerberos/sbin:/usr/kerberos/bin:/usr/ local/bin:/bin:/usr/bin:/home/jkowall/bin USER: jkowall HOME: /root LESSOPEN: |/usr/bin/lesspipe.sh %s LS_COLORS: no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=01;32:*.cmd=01;32:*.exe=01;32:*.com=01;32:*.btm=01;32:*.bat=01;32:*.sh=01;32:*.csh=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tz=01;31:*.rpm=01;31:*.cpio=01;31:*.jpg=01;35:*.gif=01;35:*.bmp=01;35:*.xbm=01;35:*.xpm=01;35:*.png=01;35:*.tif=01;35: SSH_ASKPASS: /usr/libexec/openssh/gnome-ssh-askpass LANG: en_US.UTF-8 need to That's been changed in 3.2.1.  The &amp;lt;user-name&amp;gt; feature only requires libresin_os now. -- Scott mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fwd: Issue getting JNI up and running</header>
    <date>Tue Jan 20 18:39:09 CET 2009</date>
    <body>Scott, do you have any update on the bug? http://java.sun.com/webapps/bugreport/crash.jsp mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- -jk</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fwd: Issue getting JNI up and running</header>
    <date>Tue Jan 20 19:24:18 CET 2009</date>
    <body>Scott, do you have any update on the bug? The attachment didn't come through (might have been too big?) I just checked on my ubuntu amd64 system for 3.2.1 and it started correctly with &amp;lt;user-name&amp;gt;.  Can you disable the &amp;lt;user-name&amp;gt;, start Resin and send the part that looks like the following: UTF-8, en mixed mode, sharing, Sun Microsystems Inc. resin.xml (The first three lines are the important ones.) -- Scott Please see attached file. Thanks. Thanks Scott, its been a while since we spoke.  I used to post here many years ago :) Can you send the hs_err_pid4104.log?  I'm pretty sure we checked -- Scott The compile worked fine, but I got this error when I try to fire up resin. [r...@gvahmfg02 bin]# ./resin.sh # # An unexpected error has been detected by Java Runtime Environment: # #  SIGSEGV (0xb) at pc=0x00002aab0e81fba0, pid=4104, tid=1093785920 # # Java VM: Java HotSpot(TM) 64-Bit Server VM (11.0-b16 mixed mode linux-amd64) # Problematic frame: # C  [libresin_os.so+0x7ba0] # # An error report file with more information is saved as: # /usr/resin/bin/hs_err_pid4104.log # # If you would like to submit a bug report, please visit: # http://java.sun.com/webapps/bugreport/crash.jsp # Aborted Thanks, here is the output from verbose.  It looks like the DYLD_LIBRARY_PATH is set, but not correct in LD_LIBRARY_PATH. Should I just change LD_LIBRARY_PATH to include the libexec64 directory? It looks like the ./configure process is compiling for 32 bits (libexec), but you're running in 64-bit mode (libexec64). Try running ./configure --enable-64bit, and check for libexec64/ libresin_os.so -- Scott /usr/java/jdk1.6.0_11/bin/java \ -Djava.util.logging.manager=com.caucho.log.LogManagerImpl \ -Djava.system.class.loader=com.caucho.loader.SystemClassLoader \ - Djavax .management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl \ -Djava.awt.headless=true \ -Dresin.home=/usr/resin/ \ -d64 \ -Xmx1024m \ -Xss1m \ -Xdebug \ -Dcom.sun.management.jmxremote \ com.caucho.server.resin.Resin \ --root-directory \ /usr/resin/ \ -conf \ /usr/resin/conf/resin.xml \ -socketwait \ 57581 \ -verbose TERM: linux DYLD_LIBRARY_PATH: /usr/resin/libexec64 SHLVL: 2 XFILESEARCHPATH: /usr/dt/app-defaults/%L/Dt SSH_CLIENT: 192.168.1.51 59565 22 MAIL: /var/spool/mail/jkowall PWD: /usr/resin/bin HOSTNAME: gvahmfg02.gvah.mfgq.com SSH_TTY: /dev/pts/1 LOGNAME: jkowall CVS_RSH: ssh G_BROKEN_FILENAMES: 1 NLSPATH: /usr/dt/lib/nls/msg/%L/%N.cat LD_LIBRARY_PATH: /usr/resin/libexec64 /usr/java/jdk1.6.0_11/jre/lib/amd64/server /usr/java/jdk1.6.0_11/jre/lib/amd64 /usr/java/jdk1.6.0_11/jre/../lib/amd64 SSH_CONNECTION: 192.168.1.51 59565 10.10.50.72 22 INPUTRC: /etc/inputrc SHELL: /bin/bash HISTSIZE: 1000 CLASSPATH: /usr/resin//lib/resin.jar /usr/java/jdk1.6.0_11/lib/tools.jar /usr/resin/lib/pro.jar /usr/resin/lib/resin.jar /usr/resin/lib/jsf-12.jar /usr/resin/lib/webutil.jar /usr/resin/lib/activation.jar /usr/resin/lib/javamail-141.jar /usr/resin/lib/javaee-16.jar /usr/resin/lib/jaxstream-15.jar /usr/resin/lib/osgi-14.jar PATH: /usr/resin/win64:/usr/kerberos/sbin:/usr/kerberos/bin:/usr/ local/bin:/bin:/usr/bin:/home/jkowall/bin USER: jkowall HOME: /root LESSOPEN: |/usr/bin/lesspipe.sh %s LS_COLORS: no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=01;32:*.cmd=01;32:*.exe=01;32:*.com=01;32:*.btm=01;32:*.bat=01;32:*.sh=01;32:*.csh=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tz=01;31:*.rpm=01;31:*.cpio=01;31:*.jpg=01;35:*.gif=01;35:*.bmp=01;35:*.xbm=01;35:*.xpm=01;35:*.png=01;35:*.tif=01;35: SSH_ASKPASS: /usr/libexec/openssh/gnome-ssh-askpass LANG: en_US.UTF-8 127.0.0.1:6600. need to That's been changed in 3.2.1.  The &amp;lt;user-name&amp;gt; feature only requires libresin_os now. -- Scott mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fwd: Issue getting JNI up and running</header>
    <date>Tue Jan 20 21:07:37 CET 2009</date>
    <body>It was only 19k. I commented out those two lines, and I'm still getting an abort: [r...@gvahmfg02 bin]# ./resin.sh --verbose # # An unexpected error has been detected by Java Runtime Environment: # #  SIGSEGV (0xb) at pc=0x00002aab0e93fba0, pid=28483, tid=1095792960 # # Java VM: Java HotSpot(TM) 64-Bit Server VM (11.0-b16 mixed mode linux-amd64) # Problematic frame: # C  [libresin_os.so+0x7ba0] # # An error report file with more information is saved as: # /usr/resin/bin/hs_err_pid28483.log # # If you would like to submit a bug report, please visit: # http://java.sun.com/webapps/bugreport/crash.jsp # Aborted http://java.sun.com/webapps/bugreport/crash.jsp mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- -jk</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fwd: Issue getting JNI up and running</header>
    <date>Tue Jan 20 21:54:53 CET 2009</date>
    <body>It was only 19k. I commented out those two lines, and I'm still getting an abort: Can you either cut-and-paste or send the attachment to me directly? thanks, -- Scott [r...@gvahmfg02 bin]# ./resin.sh --verbose # # An unexpected error has been detected by Java Runtime Environment: # #  SIGSEGV (0xb) at pc=0x00002aab0e93fba0, pid=28483, tid=1095792960 # # Java VM: Java HotSpot(TM) 64-Bit Server VM (11.0-b16 mixed mode linux-amd64) # Problematic frame: # C  [libresin_os.so+0x7ba0] # # An error report file with more information is saved as: # /usr/resin/bin/hs_err_pid28483.log # # If you would like to submit a bug report, please visit: # http://java.sun.com/webapps/bugreport/crash.jsp # Aborted Scott, do you have any update on the bug? The attachment didn't come through (might have been too big?) I just checked on my ubuntu amd64 system for 3.2.1 and it started correctly with &amp;lt;user-name&amp;gt;.  Can you disable the &amp;lt;user-name&amp;gt;, start Resin and send the part that looks like the following: UTF-8, en mixed mode, sharing, Sun Microsystems Inc. resin.xml (The first three lines are the important ones.) -- Scott Please see attached file. Thanks. Thanks Scott, its been a while since we spoke.  I used to post here many years ago :) Can you send the hs_err_pid4104.log?  I'm pretty sure we checked -- Scott The compile worked fine, but I got this error when I try to fire up resin. [r...@gvahmfg02 bin]# ./resin.sh # # An unexpected error has been detected by Java Runtime Environment: # #  SIGSEGV (0xb) at pc=0x00002aab0e81fba0, pid=4104, tid=1093785920 # # Java VM: Java HotSpot(TM) 64-Bit Server VM (11.0-b16 mixed mode linux-amd64) # Problematic frame: # C  [libresin_os.so+0x7ba0] # # An error report file with more information is saved as: # /usr/resin/bin/hs_err_pid4104.log # # If you would like to submit a bug report, please visit: # http://java.sun.com/webapps/bugreport/crash.jsp # Aborted Thanks, here is the output from verbose.  It looks like the DYLD_LIBRARY_PATH is set, but not correct in LD_LIBRARY_PATH. Should I just change LD_LIBRARY_PATH to include the libexec64 directory? It looks like the ./configure process is compiling for 32 bits (libexec), but you're running in 64-bit mode (libexec64). Try running ./configure --enable-64bit, and check for libexec64/ libresin_os.so -- Scott /usr/java/jdk1.6.0_11/bin/java \ -Djava.util.logging.manager=com.caucho.log.LogManagerImpl \ -Djava.system.class.loader=com.caucho.loader.SystemClassLoader \ - Djavax .management.builder.initial=com.caucho.jmx.MBeanServerBuilderImpl \ -Djava.awt.headless=true \ -Dresin.home=/usr/resin/ \ -d64 \ -Xmx1024m \ -Xss1m \ -Xdebug \ -Dcom.sun.management.jmxremote \ com.caucho.server.resin.Resin \ --root-directory \ /usr/resin/ \ -conf \ /usr/resin/conf/resin.xml \ -socketwait \ 57581 \ -verbose TERM: linux DYLD_LIBRARY_PATH: /usr/resin/libexec64 SHLVL: 2 XFILESEARCHPATH: /usr/dt/app-defaults/%L/Dt SSH_CLIENT: 192.168.1.51 59565 22 MAIL: /var/spool/mail/jkowall PWD: /usr/resin/bin HOSTNAME: gvahmfg02.gvah.mfgq.com SSH_TTY: /dev/pts/1 LOGNAME: jkowall CVS_RSH: ssh G_BROKEN_FILENAMES: 1 NLSPATH: /usr/dt/lib/nls/msg/%L/%N.cat LD_LIBRARY_PATH: /usr/resin/libexec64 /usr/java/jdk1.6.0_11/jre/lib/amd64/server /usr/java/jdk1.6.0_11/jre/lib/amd64 /usr/java/jdk1.6.0_11/jre/../lib/amd64 SSH_CONNECTION: 192.168.1.51 59565 10.10.50.72 22 INPUTRC: /etc/inputrc SHELL: /bin/bash HISTSIZE: 1000 CLASSPATH: /usr/resin//lib/resin.jar /usr/java/jdk1.6.0_11/lib/tools.jar /usr/resin/lib/pro.jar /usr/resin/lib/resin.jar /usr/resin/lib/jsf-12.jar /usr/resin/lib/webutil.jar /usr/resin/lib/activation.jar /usr/resin/lib/javamail-141.jar /usr/resin/lib/javaee-16.jar /usr/resin/lib/jaxstream-15.jar /usr/resin/lib/osgi-14.jar PATH: /usr/resin/win64:/usr/kerberos/sbin:/usr/kerberos/bin:/usr/ local/bin:/bin:/usr/bin:/home/jkowall/bin USER: jkowall HOME: /root LESSOPEN: |/usr/bin/lesspipe.sh %s LS_COLORS: no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=01;32:*.cmd=01;32:*.exe=01;32:*.com=01;32:*.btm=01;32:*.bat=01;32:*.sh=01;32:*.csh=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.bz=01;31:*.tz=01;31:*.rpm=01;31:*.cpio=01;31:*.jpg=01;35:*.gif=01;35:*.bmp=01;35:*.xbm=01;35:*.xpm=01;35:*.png=01;35:*.tif=01;35: SSH_ASKPASS: /usr/libexec/openssh/gnome-ssh-askpass LANG: en_US.UTF-8 127.0.0.1:6600. need to That's been changed in 3.2.1.  The &amp;lt;user-name&amp;gt; feature only requires libresin_os now. -- Scott mailto:e...@caucho.com http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Fwd: Issue getting JNI up and running</header>
    <date>Wed Jan 14 20:02:47 CET 2009</date>
    <body>Sorry I had some issues getting on the mailinglist. You can see the SO is compiled, but for some reason it cannot be loaded.  Any advice? Can you add -verbose to the start?  That will show the LD_LIBRARY_PATH which should help track this down. There might be information about that.  Also, make sure the Java 32 vs 64 matches the compilation. -- Scott I am on Resin Pro. [r...@x bin]# ./resin.sh start Resin/3.2.1 can't start -server '' for watchdog at 127.0.0.1:6600. com.caucho.config.ConfigException: &amp;lt;user-name&amp;gt; requires compiled JNI.  Check the $RESIN_HOME/libexec or $RESIN_HOME/libexec64 directory for libresin_os.so. [r...@x bin]# ls -la ../libexec/ total 180 drwxr-xr-x  2 root root   4096 Jan  2 19:38 . drwxr-xr-x 20 root root   4096 Jan  6 19:48 .. -rwxr-xr-x  1 root root 170308 Jan  3 00:11 libresin_os.so -- -jk -- -jk</body>
  </mail>
  <mail>
    <header>[Resin-interest] debugging mod_caucho</header>
    <date>Tue Jan 13 07:26:54 CET 2009</date>
    <body>I enabled debugging on mod_caucho and I am seeing line like : config.c:1286:cse_update_host(): foo.com:80(0x918ad50) old:0 now:1231827067() config.c:1164:cse_update_host_from_resin(): can't open any connections config.c:1291:cse_update_host(): complete foo.com:80(0x918ad50) old:0 now:1231827067() config.c:1286:cse_update_host(): :0(0x9189c70) old:0 now:1231827067() config.c:1164:cse_update_host_from_resin(): can't open any connections config.c:1291:cse_update_host(): complete :0(0x9189c70) old:0 now:1231827067() mod_caucho.c:922:caucho_request(): session index: -1 mod_caucho.c:934:caucho_request(): no connection: cluster(0x9189cb0) in my resin.conf I have : and netstat shows : # netstat -atnp  |grep 68 tcp        0      0 127.0.0.1:6802              0.0.0.0:* LISTEN      32667/java the httpd.conf has : LoadModule caucho_module /usr/lib/httpd/modules/mod_caucho.so ResinConfigServer 127.0.0.1 6800 CauchoHost 127.0.0.1 6800 AddHandler caucho-request .jsp SetHandler caucho-status resin 3.1.8 /apache 2.2.3 centos Any ideas? The future is here. It's just not widely distributed yet. -William Gibson</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] debugging mod_caucho</header>
    <date>Tue Jan 13 23:51:11 CET 2009</date>
    <body>This is resin-pro , I forgot to mention that. The future is here. It's just not widely distributed yet. -William Gibson</body>
  </mail>
  <mail>
    <header>[Resin-interest] Quercus w/ Virtual Hosts</header>
    <date>Mon Jan 12 23:17:16 CET 2009</date>
    <body>Hi all, I'm trying to get Quercus working on Resin 3.2.1 (open source) under virtual hosts. I can create PHP pages under the default host as defined in resin.xml, and they're interpreted and run just fine. However, if I create a new host, e.g.: PHP is not interpreted for that host. Instead, resin returns the php code as plain text. I'm at a bit of a loss as to why. I'm probably missing something absurdly simple, but it's just escaping me at the moment. Can anyone clue me in? Thanks, Tim</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus w/ Virtual Hosts</header>
    <date>Tue Jan 13 01:18:33 CET 2009</date>
    <body>Hi all, I'm trying to get Quercus working on Resin 3.2.1 (open source) under virtual hosts. I can create PHP pages under the default host as defined in resin.xml, and they're interpreted and run just fine. However, if I create a new host, e.g.: PHP is not interpreted for that host. Instead, resin returns the php code as plain text. I'm at a bit of a loss as to why. I'm probably missing something absurdly simple, but it's just escaping me at the moment. Can anyone clue me in? Have you  deleted the &amp;lt;resin:import&amp;gt; for the app-default.xml?  The app- default.xml contains the servlet definitions for Quercus.  (Inside -- Scott Thanks, Tim</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus w/ Virtual Hosts</header>
    <date>Tue Jan 13 01:47:31 CET 2009</date>
    <body>Okay, I'm an idiot. I was faked out by a second (pre-quercus) resin instance running on the server, with a nearly identical config as the new one I was setting up. I must've damaged some brain cells banging my head against this so as not to see the problem. Now let's all pretend this email exchange never happened. Thanks again, Scott. Tim http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0 clustering notes</header>
    <date>Mon Jan 12 20:02:43 CET 2009</date>
    <body>I've added some notes about our clustering direction for Resin 4.0 at http://blog.caucho.com/?p=120 The main capabilities that we want for 4.0 clustering are: 1. dynamic servers (for load matching, and power savings) 2. simplify the administration model The main complexity of the current distributed session is that every server acts as a primary and a backup for some data.  So it's difficult or impossible for an administrator to know exactly what happens when a server goes down due to maintenance or a crash. The new "triad" hub and spoke model simplifies that administration question.  All replication occurs on the triad hub servers.  So it's always safe to take down servers 4-64 at any time.  The 3 hub servers (servers 1-3) are critical, but administrators can take more care with them because it's only 3 servers, and they're known as being more important. Those two requirements sound relatively simple, but imply a good deal of underlying infrastructure work. For example, distributed sessions since we no longer have the concept of an "owning" server, which means I need to add a temporary leasing concept that gives the same performance gains. For users, the changes should be mostly invisible.  The first 3 servers in a cluster automatically form the triad, and all the replication and session caching happens under the covers using the current API.  Single and dual servers work just like today.  In other words, we're not adding a minimum requirement of 3 servers. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] a good ratio?</header>
    <date>Mon Jan 12 19:50:41 CET 2009</date>
    <body>httpd-2.2.3-11.el5_2.centos.4 resin 3.1.8 What should be a good ratio between external apache connections and mod_caucho connections. Here is a sample  are seeing this like this from netstat: [netstat -tan |grep \:80 | grep EST |wc -l ;  netstat -tan |grep \:6802 | grep EST |wc -l (80:) 26 (6802:)110 5 32 7 48 10 34 Do the connection between apache httpd and resin count against apache 's MaxClients config ? or resin's maximums in the server.xml? The future is here. It's just not widely distributed yet. -William Gibson</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] a good ratio?</header>
    <date>Tue Jan 13 01:26:29 CET 2009</date>
    <body>"ratio" isn't the right way of thinking about it.  The detailed answer gets into how Apache spawns its processes and reuses them for following requests. Basically, as long as the 6802 count is reasonably low (100-200ish) or a bit more for a heavy site, then you're fine.  The trouble starts when you have 10000 TIME_WAIT connections or so. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] /caucho-status showing wrong version number</header>
    <date>Mon Jan 12 19:00:33 CET 2009</date>
    <body>When I look at the bottom of the page for our /caucho-status, it says 3.1.6 when we are running 3.1.8. This is connected to apache via mod_caucho but ps shows only resin 3.1.8 is running. Could it be a cacheing issue? Thanks, Vincent The future is here. It's just not widely distributed yet. -William Gibson</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] /caucho-status showing wrong version number</header>
    <date>Mon Jan 12 19:45:40 CET 2009</date>
    <body>The version from /caucho-status comes from modules/src/c/common/ version.h (on unix), and is compiled in for Windows. So, it looks like you're using the 3.1.6 mod_caucho.  (It's conceivable that we didn't update the version string, but it is an automatic process on unix.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] /caucho-status showing wrong version number</header>
    <date>Mon Jan 12 21:00:54 CET 2009</date>
    <body>I checked and yes, we were indeed using the mod_caucho. It got loaded when we restarted apache. The bad news is that something was wrong with it. Apache and Resin stopped talking to each other over port 6802. netstat showed 0 connections. Any config changes between mod_caucho 3.1.6 and 3.1.8? Thanks for the help. The future is here. It's just not widely distributed yet. -William Gibson http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin embedded issues</header>
    <date>Tue Jan 13 09:42:01 CET 2009</date>
    <body>Hi, I'm trying to get a demo application to use Resin as embedded container. The application can be run successfully using Resin the usual way and it can also be run using Jetty as embedded container, so the application should be "fine". However, inside the application some action classes are loaded using Class.forName and that seems to be cause issues in embedded mode. The stack trace that is produces looks like this: ********************************************************************* ADVERTENCIA: java.lang.NoClassDefFoundError: org/leaf/util/ConnectionManagementHelper$SQLAction java.lang.NoClassDefFoundError: org/leaf/util/ConnectionManagementHelper$SQLAction at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Unknown Source) at org.leaf.xml.ClassSource.getSource(ClassSource.java:134) at org.leaf.xml.ClassSource.getXMLSource(ClassSource.java:264) ... Caused by: java.lang.ClassNotFoundException: org.leaf.util.ConnectionManagementHelper$SQLAction at java.net.URLClassLoader$1.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source) at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source) at java.lang.ClassLoader.loadClassInternal(Unknown Source) ... 27 more ********************************************************************* You can see that the class that isn't found(org/leaf/util/ConnectionManagementHelper) is in the same package as the loading class(org.leaf.xml.ClassSource) and they all come included in the same .jar file. Moreover, the error does not happen just with that specific class, but with any class from that .jar that is loaded through Class.forName. The .jar file is just inside WEB-INF/lib and there is just one copy of it in the classpath. It looks as if the main classes for the framework (basically, a servlet) would have been loaded through the system classloader, even if just present in WEB-INF/lib, and that causes the problem when looking for classes inside the same .jar file. On a related note, the caucho maven repository seems to be lacking some files, resin.jar 3.2.1 declares some files as dependencies that are not there: *********************************************************************** [ivy:retrieve]          :::::::::::::::::::::::::::::::::::::::::::::: [ivy:retrieve]          ::          UNRESOLVED DEPENDENCIES         :: [ivy:retrieve]          :::::::::::::::::::::::::::::::::::::::::::::: [ivy:retrieve]          :: com.caucho#resin-ejb;3.2.1: not found [ivy:retrieve]          :: com.caucho#resin-j2ee-management;3.2.1: not found [ivy:retrieve]          :: com.caucho#resin-jca;3.2.1: not found [ivy:retrieve]          :: com.caucho#resin-jms;3.2.1: not found [ivy:retrieve]          :: com.caucho#resin-jsdk;3.2.1: not found [ivy:retrieve]          :: com.caucho#resin-jstl;3.2.1: not found [ivy:retrieve]          :: com.caucho#resin-jpa;3.2.1: not found [ivy:retrieve]          :: com.caucho#resin-jta;3.2.1: not found [ivy:retrieve]          :: com.caucho#resin-jws;3.2.1: not found [ivy:retrieve]          :: com.caucho#resin-support;3.2.1: not found [ivy:retrieve]          :: com.caucho#resin-webbeans;3.2.1: not found [ivy:retrieve]          :::::::::::::::::::::::::::::::::::::::::::::: *********************************************************************** So, I had to grab the files from a Resin 3.2.1 installation, including osgi-14.jar and javaee-16.jar which are not listed as dependencies but are needed to run Resin embedded, at least with the resin.jar from a normal installation, as it is different from the one you can get from the Maven repository. And a tiny detail, the default log level using Resin embedded is kind of verbose, as it is set to spit the full date, the full classname and the method for each log line, which makes each log line twice as big. A bit too much for a default, IMHO. Cheers! D.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin embedded issues</header>
    <date>Tue Jan 13 11:16:06 CET 2009</date>
    <body>Hi, sadly, that's true for most versions &amp;gt; 3.1.6 :-( I already reported that here on 2008/10/20 - but never got any feedback on this. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Cauch Maven Repository [was Resin embedded issues]</header>
    <date>Tue Jan 13 13:25:16 CET 2009</date>
    <body>While we are at it, resin-quercus module seems to be missing some classes, as they are listed in META-INF/services/com.caucho.quercus.QuercusClass but they are missing in the resin-quercus.jar file. The missing classes include, at least: com.caucho.quercus.lib.pdf.PDF com.caucho.quercus.lib.dom.DOMXPath com.caucho.quercus.lib.dom.DOMText com.caucho.quercus.lib.dom.DOMProcessingInstruction com.caucho.quercus.lib.dom.DOMImplementation com.caucho.quercus.lib.dom.DOMEntityReference com.caucho.quercus.lib.dom.DOMElement com.caucho.quercus.lib.dom.DOMDocument com.caucho.quercus.lib.dom.DOMComment com.caucho.quercus.lib.dom.DOMAttr com.caucho.quercus.lib.bam.BamModule com.caucho.quercus.lib.ResinModule com.caucho.quercus.lib.pdf.PDFModule S! D. Jan Kriesten escribió: http://maillist.caucho.com/mailman/listinfo/resin-interest -- ------------------------------------------- Daniel Lopez Janariz (d.lo...@uib.es) Web Services Centre for Information and Technology Balearic Islands University (SPAIN) -------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin embedded issues</header>
    <date>Tue Jan 13 17:34:59 CET 2009</date>
    <body>bugs.caucho.com is really the best place to report these things. At the moment, we're all tied up with the 4.0 logjam, so the bug squashing is slow.  That's important for 3.2.1 since 4.0.0 is the following release.  In other words, it makes more sense to make a 4.0 snapshot usable and then fix bugs against it, rather than fixing bugs on an unusable snapshot.  But right now, it's a bit frustrating. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin embedded issues</header>
    <date>Wed Jan 14 10:35:30 CET 2009</date>
    <body>Scott Ferguson escribió: There you go: 0003251: Resin dependencies are broken for version 3.2.1 at the Caucho Maven 2 repository: http://bugs.caucho.com/view.php?id=3251 0003250: Quercus .jar published at the maven repository is not propertly packaged: http://bugs.caucho.com/view.php?id=3250 0003252: Resin embedded cannot find classes in WEB-INF/lib using Class.forName from the very same .jar: http://bugs.caucho.com/view.php?id=3252 Good luck with version 4.0 ;) D.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CentOS 5 mod_caucho compile issue</header>
    <date>Mon Jan 12 08:18:44 CET 2009</date>
    <body>I think this may be my issue as well. How do I add those apr flags to my mod_caucho build? The future is here. It's just not widely distributed yet. -William Gibson http://mail-archives.apache.org/mod_mbox/apr-dev/200410.mbox/%3c20041022090014.ga9...@redhat.com%3e http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] CentOS 5 mod_caucho compile issue</header>
    <date>Mon Jan 12 19:01:32 CET 2009</date>
    <body>Actually, I got it compile without errors by puttung the absolute path to apxs. Thanks The future is here. It's just not widely distributed yet. -William Gibson http://mail-archives.apache.org/mod_mbox/apr-dev/200410.mbox/%3c20041022090014.ga9...@redhat.com%3e http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] implicit stack memory size?</header>
    <date>Thu Jan 08 22:52:59 CET 2009</date>
    <body>Hi everyone, We're running Resin 3.0.18 Pro on a Windows 32-bit system and we're looking to understand/tune our memory settings a bit. According to http://www.caucho.com/resin-3.0/performance/jvm-tuning.xtp the stack size is set to 2048k unless set otherwise. Is this true? In using JConsole we can't see where any explicit -Xss setting is passed and we can't readily determine what the current stack size is set to. So, here's a short list of questions. And thanks for your help. - If JConsole doesn't show -Xss, is it really there for resin? - How was "2048k is an appropriate value for most situations." determined? - Can resin/jvm/jconsole report the current stack memory setting? (general sun jvm on windows questions) - What is the default stack memory size? - When a thread is created, does it grab all of the stack memory, or can the stack memory start small and grow to the default or -Xss size? Thanks, everyone. + jay</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] implicit stack memory size?</header>
    <date>Fri Jan 09 00:36:12 CET 2009</date>
    <body>If I'm not mistaken the memory is allocated, but it is virtual memory, so unless it is actually used there is no penalty. The only problem with allocating too much stack space is that you can run out of address space on a 32 bit JVM. With typically 2GB max addressable for the app and 10 MBytes per stack you are limited to 200 threads. -Knut</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] implicit stack memory size?</header>
    <date>Fri Jan 09 01:57:18 CET 2009</date>
    <body>Knut, Thanks for the info. Just a check on the math - if Win32 has a 2GB max addressable space, that includes heap and stack and misc. overhead, right? If we set resin heap to 1GB and allow each thread to use the 'default' of 2048k, and we see the number of threads running at about 700, then we have the potential of 2.4GB total memory usage [ 1024MB + (700*2MB) ]. This exceeds the 2GB limit. However, if, as you suggest, each thread only uses a fraction of the 2MB available to each thread, we could see the total memory somewhere between 1GB and 2GB. So, my question is if we use -Xss1024k, each thread is really using between 0 and 1024k depending on what that thread really needs? + jay http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] implicit stack memory size?</header>
    <date>Fri Jan 09 02:24:20 CET 2009</date>
    <body>http://www.caucho.com/resin-3.0/performance/jvm-tuning.xtp I think Caucho tends to err on the side of caution in this regard, and is also (understandably) more *nix-central than Windows. So take that 2048K as being "appropriate for most situations" with a grain of salt because situations can vary wildly. Whether it's explicitly set or not, there IS a stack size, which would end up being the default stack size of the operating system if the JVM itself doesn't set it (I do not think it does, but could be wrong and don't feel like looking it up now). See above. I don't know if there's a way to query a running JVM for this information. It's best if you explicitly set the stack size using the JVM option -Xss (but see below). That's too general of a question. It depends on the OS, and (perhaps) the version of the OS. Again, might depend on the operating system. Contrary to what Knut said, and to the best of my knowledge and in the testing that I did (it's been a while), all of the memory for the stack is pre-allocated (at least from the perspective of the JVM itself). But it's easy enough to write a program to check this. Thread stacks, at least on Windows, are more complicated than just a single memory allocation (down at the Windows API level) because you've got both reserved and committed memory allocations, and one always has to be &amp;gt;= the other (I forget which), and there's a 64K granularity in sizing, and you're dealing with physical and virtual memory, and this is all set in the linker and therefore configurable, but can also be set programmatically on a per-thread basis. In other words, it's quite involved. See this page as an example of how complex this kind of memory management is when you go into how the underlying OS is actually managing all of this http://msdn.microsoft.com/en-us/library/ms686774 (VS.85).aspx Remember, thread allocation/destruction as well as context switching and just about everything else is managed by the operating system, not Java (unless you're running "green" threads, which I don't think is even around anymore?). This is why the memory used by the thread's stack is not part of the Java heap. On a 32-bit machine, the maximum addressable space for an individual java program is 2G. So, for example, if you run java with these parameters on a 32-bit machine: java -server -Xms1500M -Xmx1500M -Xss1M then you'll leave enough room to run ~548 threads (2048M - 1500M = 548M / 1M stack = 548 threads). Of course, that assumes that none of the 548M of non-java-heap memory is being used for anything else, which is a false assumption, perhaps hugely false  depending on what your java program is doing, e.g. graphics operations or the like. Something I discovered while optimizing our Resin on Windows environments is that the version of Windows and Java we use (64-bit Windows 2003 Server with Java 1.5) will allow a minimum stack size of 128K, and if you try to specify a stack size of 256K or 512K, Windows (or maybe the JVM, I don't know which one for sure) automatically jumps you up to 1M. So you have a choice between 128K, 1M, 2M, ??? (I didn't test above 2M). Fwiw, we've got dozens of Windows servers running Resin Pro 3.0.x (upgrading to 3.1.x in the not-too-distant future), and we run all of them with a 128K stack size. In general, unless you're running code that's highly recursive, you don't need very large stack sizes in Java programming. Rob</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] implicit stack memory size?</header>
    <date>Fri Jan 09 02:30:20 CET 2009</date>
    <body>I did this research a while ago, but seems relevant: Default in Sun JDK 1.2 on unix was 128kb Default in Sun JDK 1.3 on unix was 256kb Default in Sun JDK 1.4 on windows is 512kb Default in IBM JDK 1.5 is 256kb on all platforms ( http://tinyurl.com/gbfd4 ) Default in JRockit JDK 1.5 is 64k (win) or 128kb (linux) ( http://tinyurl.com/2hevdw ) The old volano chat scalability reports used 32kb -- Serge Knystautas http://www.lokitech.com p. 301.656.5501 e. ser...@lokitech.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] implicit stack memory size?</header>
    <date>Fri Jan 09 02:39:20 CET 2009</date>
    <body>As you can see, it's all over the map, which is probably why: (1) Caucho sets it explicitly (and to a very conservative value); (2) it's always best to set the stack size yourself so you know what you're getting; and (3) test it yourself with the value(s) you'd like to use in the environments you want to use it to make sure it works (see my previous comment about only 128K and 1M working when I did my testing). Rob http://tinyurl.com/gbfd4 ) http://tinyurl.com/2hevdw ) http://www.lokitech.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] implicit stack memory size?</header>
    <date>Fri Jan 09 02:55:22 CET 2009</date>
    <body>http://www.caucho.com/resin-3.0/performance/jvm-tuning.xtp Try -verbose when starting.  Since the -Xss is a command line option, it should be reported.  Also, JConsole should be able to see the command line options on one of the system beans. Basically.  There's no way for us to know if your application needs more stack or more threads.  So I assumed 1G heap, leaving 1G for other stuff, and then figured the default should support 1000 threads, giving 1m as a default, which should be enough stack unless you have massively recursive applications, and enough threads for most apps. You know your own requirements best, of course. I believe Linux is the most finicky about the stack allocation, so it was the OS we needed to solve (and it was the OS which exposed the issue first.) I'm really looking forward for the 64-bit transition to complete so we can use as much VM as possible. -- Scott http://msdn.microsoft.com/en-us/library/ms686774 (VS.85).aspx http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] implicit stack memory size?</header>
    <date>Sat Jan 10 01:21:11 CET 2009</date>
    <body>Thanks much, guys, for the replies. We've arrived at the same conclusion that Scott suggests - a GB for the heap and the other GB for the product (roughly) of the threads and the stack size in our windows 32-bit environment. Now it's an exercise in testing the actual -Xss size that we want to run with - which is proving to be a bit elusive. Understanding that local primitives and heap-object addresses are stored on the stack, I can't envision a need for a stack size anywhere bigger than 1MB (for our app, YMMV). Even 1MB is probably way over doing it. There's a few of us here at work who have been lurkers on this list for a long time - or at least a couple of years anyway. We've always found this list valuable and appreciate everyone's involvement. Thanks again. + jay http://www.caucho.com/resin-3.0/performance/jvm-tuning.xtp http://msdn.microsoft.com/en-us/library/ms686774 (VS.85).aspx http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest]  resin 3.2.1 , mod_caucho seems not working ???</header>
    <date>Thu Jan 08 22:32:56 CET 2009</date>
    <body>I've also been looking into versions installed with mod_caucho after 3.1.6 and get not communication between mod_caucho and Resin. http://bugs.caucho.com/view.php?id=3013 indicates build scripts are fixed in 4.0.0.  Does this mean there is a fix I can apply in a later stable, or will I have to wait until 4.0.0? Installation attempted on CentOS release 5.2 with Apache/2.2.3, and CentOS release 4.7 (Final) with Apache/2.0.52.  No versions after 3.1.6 works, and the solution in the bug is confusing: (0003698) emil 01-05-09 23:14 Starting in Resin 3.1.7, LFS support was enabled by default. Older versions of Apache do not have LFS support and are not 64-bit clean when LFS CFLAGS are given. The fix to the configure script in 4.0.0 makes sure only the CFLAGS given by apache are used, but allows LFS to be enabled explicitly. regards, David</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 3.2.1 , mod_caucho seems not working	???</header>
    <date>Thu Jan 08 23:31:05 CET 2009</date>
    <body>http://bugs.caucho.com/view.php?id=3013 indicates build scripts are Hi David, You can delete the following line from the configure script: CFLAGS="$CFLAGS -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64" Then run configure again.  It's probably safest to do this on a fresh installation in case you've already run configure once before. Take care, Emil http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; BAM: lightweight high-speed messaging</body>
  </mail>
  <mail>
    <header>[Resin-interest] OpenSSL configuration</header>
    <date>Wed Jan 07 21:44:37 CET 2009</date>
    <body>Is there any way to tell whether my resin auto-detected the location of OpenSSL installed on my Linux system, as described here: http://caucho.com/resin/doc/resin-security.xtp#openssl I'd rather not re-run .configure if it's not necessary. Any tips would be appreciated! Michael</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] OpenSSL configuration</header>
    <date>Thu Jan 08 00:30:01 CET 2009</date>
    <body>http://caucho.com/resin/doc/resin-security.xtp#openssl If you look in config.log and see that SSL_LIBS has '-lssl -lcrypto' or something similar, that should do it.  Why wouldn't you want to rerun configure? Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; BAM: lightweight high-speed messaging</body>
  </mail>
  <mail>
    <header>[Resin-interest] re sin 3.2.1 comet and keepalive time question</header>
    <date>Tue Jan 06 22:23:48 CET 2009</date>
    <body>Hi, We upgraded to resin 3.2.1 and start testing comet with keepalive enabled. We set keepalive-timeout to 45 seconds in the resin.xml. When we ran our comet test for an hour, we notice that resin close the connection every 10 minutes. Hence, the connection only keep alive for 10 minutes.  We use Wireshark to monitor the communication between the client and server requests and responses. Every 10 minutes, resin send the "close connection" in the response header to the client side to close the connection. Is this something that resin does to clean up the connection? Is the 10 minutes configurable in resin.xml? Thanks, -- View this message in context: http://www.nabble.com/resin-3.2.1-comet-and-keepalive-time-question-tp21319395p21319395.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] re sin 3.2.1 comet and keepalive question</header>
    <date>Tue Jan 06 22:19:46 CET 2009</date>
    <body>Hi, We upgraded to resin 3.2.1 and start testing comet with keepalive enabled. We set keepalive-timeout to 45 seconds in the resin.xml. When we ran our comet test for an hour, we notice that resin close the connection every 10 minutes. Hence, the connection only keep alive for 10 minutes.  We use Wireshark to monitor the communication between the client and server requests and responses. Every 10 minutes, resin send the "close connection" in the response header to the client side to close the connection. Is this something that resin does to clean up the connection? Is the 10 minutes configurable in resin.xml? Thanks, -- View this message in context: http://www.nabble.com/resin-3.2.1-comet-and-keepalive-question-tp21319299p21319299.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] re sin 3.2.1 comet and keepalive question</header>
    <date>Tue Jan 06 22:21:46 CET 2009</date>
    <body>Hi, We upgraded to resin 3.2.1 and start testing comet with keepalive enabled. We set keepalive-timeout to 45 seconds in the resin.xml. When we ran our comet test for an hour, we notice that resin close the connection every 10 minutes. Hence, the connection only keep alive for 10 minutes.  We use Wireshark to monitor the communication between the client and server requests and responses. Every 10 minutes, resin send the "close connection" in the response header to the client side to close the connection. Is this something that resin does to clean up the connection? Is the 10 minutes configurable in resin.xml? Thanks, -- View this message in context: http://www.nabble.com/resin-3.2.1-comet-and-keepalive-question-tp21319342p21319342.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Caucho servlet-mapping url-pattern</header>
    <date>Tue Jan 06 20:12:23 CET 2009</date>
    <body>Hello All, I combed the mailing list archive and read the Caucho documentation but still no answer for this issue, so here it is: I need to match a url pattern to forward to resin. The interesting part is the pattern contains foreign characters. I used the UTF-8 url encoded pattern, but the pattern did not get matched. Here's an example: I've also tried it without url encoding (Russian in this case): Everything I read says Caucho supports UTF-8 by default. Any suggestion on what else to try will be greatly appreciated. thanks, Tanya</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caucho servlet-mapping url-pattern</header>
    <date>Tue Jan 06 20:36:28 CET 2009</date>
    <body>I think the old URL spec (I forget the RFC number ) didn't specify any character set. Apparently the new one (RFC 3986) does.  But there has been a bug in Resin which http://bugs.caucho.com/view.php?id=1596 you run version 3.1.2 or later. -Knut http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caucho servlet-mapping url-pattern</header>
    <date>Tue Jan 06 20:42:29 CET 2009</date>
    <body>Hi Knut, Thanks for the lightening fast response! This really helps clarify the issue. We're running resin 2. Time to upgrade :) thanks, Tanya http://bugs.caucho.com/view.php?id=1596 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caucho servlet-mapping url-pattern</header>
    <date>Tue Jan 06 21:12:34 CET 2009</date>
    <body>With Resin 2.1 you may want to check out http://www.caucho.com/resin-2.1/ref/http-config.xtp#url-character-encoding For spelling out the mapping in web.xml I think you want to spell it out in text rather than the %xx url syntax.  To avoid any text file encoding problems you may want to use XML entity escapes (&amp;amp;#ddd;). -Knut http://bugs.caucho.com/view.php?id=1596 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Caucho servlet-mapping url-pattern</header>
    <date>Tue Jan 06 22:32:49 CET 2009</date>
    <body>Good points, thanks Knut :) Tanya http://www.caucho.com/resin-2.1/ref/http-config.xtp#url-character-encoding http://bugs.caucho.com/view.php?id=1596 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] URL rewrite syntax problem</header>
    <date>Sat Jan 03 02:10:07 CET 2009</date>
    <body>Hello all, I have a URL that I would like to permanently redirect.  The original is: http://localhost/confirm/?c=ZK2G372GLJBMGQ7MVVX2LJW7 and I want to redirect it to http://localhost/account/confirm/?c=ZK2G372GLJBMGQ7MVVX2LJW7 In my resin.conf file, I have this code which does not work: ... The result is that my application still gets the request for /confirm. I tried adjusting it to this (dropping the ^ character): ... In this case I get a circular redirect, a neverending URL like http://localhost/account/account/account/account/ ... /account/account/confirm/?c=ZK2G372GLJBMGQ7MVVX2LJW7 where the /confirm/ is replaced by /account/confirm/, indefinitely, until the browser gives up.  This is what I would expect.  But I haven't any idea why the first one is wrong.  Surely I am missing something very simple... Any help much appreciated, even a log level that might shed light on this (I tried some work with this but wasn't able to find any useful output). Thanks, Rachel</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] URL rewrite syntax problem</header>
    <date>Sat Jan 03 07:54:31 CET 2009</date>
    <body>Try moving it into your web-app (or web-app-default) block. You don't mention which version of resin you're using, but I don't think you want the server block for this type of rewrite. Also, are you sure you want to use a moved-permanently? I'd think that would be more for search engines since it sends a 301 back to the requester. That request looks more like a user-level request and I'm not sure it's going to help any to send a 301 back in that case (but I'm no expert). Anyway, here's what I'd try (should work with moved-permanently, as well): ... ... Rob http://localhost/confirm/?c=ZK2G372GLJBMGQ7MVVX2LJW7 http://localhost/account/confirm/?c=ZK2G372GLJBMGQ7MVVX2LJW7 http://localhost/account/account/account/account/ ... http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin and Seam</header>
    <date>Sat Jan 03 01:55:07 CET 2009</date>
    <body>Never have used Resin. Can Seam 2.1.x applications run in Resin?  If so, any docs?  I tried copying a seam .ear file in the webapps dir to see what happens and I received no message. Any help or direction is appreciated.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin and Seam</header>
    <date>Mon Jan 05 19:16:11 CET 2009</date>
    <body>The difficulty is really EJB 3.0 vs EJB-lite (EJB 3.1), because Seam uses EJB in all its examples.  (And EJB 3.0 doesn't define things like standard JNDI locations, which makes examples trickier.) Our direction for Resin 4.0 is for EJB-lite, since we're focusing on the web profile.  (The rest of EJB has backward compatibility and CORBA.)    So currently, we're stuck in between two specs. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] bam sudoku example</header>
    <date>Tue Dec 30 01:09:39 CET 2008</date>
    <body>I am trying to reproduce the bam sudoku example from the magazine. What version of resin should I use? (4?) What version of "hessian" .as? ( http://hessian.caucho.com has 2008/10/16 snap source) .V</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] bam sudoku example</header>
    <date>Fri Jan 02 18:23:38 CET 2009</date>
    <body>(hope everyone had a good holidays) Following up:... what version of resin (4.0?) and .as hessian (2008/10/16 snap source?) should I use to duplicate bam/sudoku/hessian write up? tia, .V http://hessian.caucho.com has</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] bam sudoku example</header>
    <date>Sat Jan 03 00:49:03 CET 2009</date>
    <body>Hi Vic, The easiest thing to do is use Resin 3.2.0 or 3.1 with the latest Flash/Flex version of Hessian.  Hessian changed in 3.2.1 and we've got a version of the Flex libraries which are compatible with those changes, but there a just a couple of tests related to lists that still need to be run before I can release a snapshot.  I'll try to get one out early next week. Emil http://hessian.caucho.com has http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:e...@caucho.com http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; BAM: lightweight high-speed messaging</body>
  </mail>
  <mail>
    <header>[Resin-interest] Railo/Resin/IIS6</header>
    <date>Tue Dec 30 00:43:36 CET 2008</date>
    <body>I just typed a lengthy email but gmail ate it. I'll try to cut to the point. :) I've just installed/configured Railo 3.0, Resin 3.1 and IIS6 to work together but ran into a snag on an odd-ball scenario. Our users are accustomed to typing "intranet" into their browser, pressing &amp;lt;enter&amp;gt; and viewing the default document. IIS6 allowed us to use "intranet" as a valid host name in the header, and therefore routed accordingly. It seems that Resin doesn't allow us to do the same thing? It's my understanding that I need to declare sites that route based upon a host name in my resin.conf XML file. This is what I added... This results in a 404 error from IIS when attempting to access a dynamic template (.CFM in this case). However, if I change the host id to "intranet.foo", I'm able to retrieve .CFM templates (I'm altering my HOSTS file so I'm hitting the same machine). It seems that Resin requires an extension on the host? Is there a work-around for this? TIA Jason</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Railo/Resin/IIS6</header>
    <date>Tue Dec 30 01:46:40 CET 2008</date>
    <body>Resin itself doesn't care, it just treats the Host header as a string.  Can you check both /caucho-status and enable logging level="fine" on Resin? The /caucho-status should show the host strings that isapi_srun is matching against.  The level="fine" logging will show the HTTP headers that Resin receives, and should help track down why it's not being matched. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Railo/Resin and IIS6</header>
    <date>Tue Dec 30 00:33:36 CET 2008</date>
    <body>I have Railo/Resin and IIS6 working together except for a particular scenario. The server is currently hosting our Intranet. Users are accustomed to typing "intranet" (no .com, .local, .foo) in their address bar, pressing enter and seeing a default document. In IIS, we simply set the web site to route on the host header, which worked fine. However, it seems that Resin doesn't see "intranet" has a valid host. Here is why I think it... As found in the documentation, it's my understanding that situations where you previously routed via host header (IIS), you must now add a declaration in the resin.conf file. Here is what I'm using... However, this results in a 404 when attempting to access a .CFM file (static files load fine). If I change the host id to "internet.com", I'm able to execute .CFM files correctly. Was my assumption correct? If so, is there a work-around, even if "intranet" may not fit the definition of a host name. If my assumption is wrong, could anyone shed any light on where I might have made a mistake? Regards, Jason</body>
  </mail>
  <mail>
    <header>[Resin-interest] Railo/Resin and IIS6</header>
    <date>Tue Dec 30 00:42:36 CET 2008</date>
    <body>I just typed a lengthy email but gmail ate it. I'll try to cut to the point. :) I've just installed/configured Railo 3.0, Resin 3.1 and IIS6 to work together but ran into a snag on an odd-ball scenario. Our users are accustomed to typing "intranet" into their browser, pressing &amp;lt;enter&amp;gt; and viewing the default document. IIS6 allowed us to use "intranet" as a valid host name in the header, and therefore routed accordingly. It seems that Resin doesn't allow us to do the same thing? It's my understanding that I need to declare sites that route based upon a host name in my resin.conf XML file. This is what I added... This results in a 404 error from IIS when attempting to access a dynamic template (.CFM in this case). However, if I change the host id to "intranet.foo", I'm able to retrieve .CFM templates (I'm altering my HOSTS file so I'm hitting the same machine). It seems that Resin requires an extension on the host? Is there a work-around for this? TIA Jason</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 4.0 snapshot</header>
    <date>Mon Dec 29 20:43:16 CET 2008</date>
    <body>I've just made an early Resin 4.0 snapshot available.  Resin 4.0 will take over from the 3.2 branch. It will take a little longer than usual for the next 4.0.0 release for two main reasons.  First, there are significant, core changes to the configuration and also to the clustering (including distributed sessions.)  Second, based on feedback, we want to add any planned configuration changes in the 4.0.0 release, rather than updating different modules in 4.0.1, 4.0.2, etc. The 4.0.x tree is tied to the JavaEE 6 specifications, so we won't have a final production version until after those specs are completed. 1. Configuration The main configuration change in 4.0 is the new draft of the Web Beans specification, which changed the XML configuration dramatically, and allows for a more modular configuration style.  We've started migrating appropriate modules to the new style.  The planned modules will be: security, rewrite, cluster, remote, and JMS. For example, the current snapshot includes the security changes.  (The old style will still exist for backward compatibility.)  To configuration an authenticator, you could write the following: http://caucho.com/ns/resin" (Note, the exact syntax is subject to the Web Bean specification, which is still in draft.) 2. Clustering With 4.0, we will enable the addition/removal of dynamic servers to help manage load.  The visible changes should be minor, however, the internal changes are very large (and a major cause for 4.0.0 taking time.) Specifically, the distributed sessions need a changed underlying model to properly handle the situation of server creation and removal.  The current session backup model assumes the set of servers is fixed.  The clustering changes also affect the load balancing, but in a less complicated fashion. The new snapshot includes the session refactoring, but the load testing has been minimal.  In other words, the snapshot is suited for experimentation only, not for any kind of production. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] A config question about IIS ISAPI plugin</header>
    <date>Sat Dec 27 08:30:37 CET 2008</date>
    <body>Hi there, I'm using IIS as the frontend contacting resin by isapi_srun.dll. I've trouble to find the document about how to configure the params below: connect-timeout live-time dead-time which /caucho-status servlet showed me. The running value I saw in my webapp: connect-timeout: 2 live-time: 10 dead-time: 20 The connect-timeout was too low to make IIS sometimes think the backend resin could not be contacted as returns HTTP 5xx to client. How could I configure these params in httpd.conf or anywhere? BTW: I know exactly how to configure timeout/pool/keepalive params for apache plugin. I'm using Resin 3.1.7a. regards -Wesley</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] A config question about IIS ISAPI plugin</header>
    <date>Mon Dec 29 20:14:12 CET 2008</date>
    <body>Hi there, I'm using IIS as the frontend contacting resin by isapi_srun.dll. I've trouble to find the document about how to configure the params below: connect-timeout live-time dead-time which /caucho-status servlet showed me. The running value I saw in my webapp: connect-timeout: 2 live-time: 10 dead-time: 20 These should be the following in the resin.xml The isapi_srun.dll should pick up the values automatically from the backend.  I can't remember, though, if there have been fixes in the 3.2 tree.  I think 3.1 is current on those issues. -- Scott The connect-timeout was too low to make IIS sometimes think the backend resin could not be contacted as returns HTTP 5xx to client. How could I configure these params in httpd.conf or anywhere? BTW: I know exactly how to configure timeout/pool/keepalive params for apache plugin. I'm using Resin 3.1.7a. regards -Wesley</body>
  </mail>
  <mail>
    <header>[Resin-interest] [CoCCA] Help with 500 Servlet Exception</header>
    <date>Wed Dec 24 14:02:24 CET 2008</date>
    <body>Hi all Sorry for indirect question. Thank you so much for your understanding. I hope someone in the list might have experience with CoCCA, http://cocca.cx , http://cocca.cx/index.php?option=com_content&amp;amp;view=article&amp;amp;id=113&amp;amp;Itemid=312 I can't install according to their guide. All time I'm getting 500 Servlet Exception java.lang.NoClassDefFoundError: Could not initialize class cocca.cx.hibernate.HibernateUtil javax.servlet.ServletException: java.lang.NoClassDefFoundError: Could not initialize class cocca.cx.hibernate.HibernateUtil at com.caucho.server.dispatch.FilterManager.createFilter(FilterManager.java:174) at com.caucho.server.dispatch.FilterMapper.buildDispatchChain(FilterMapper.java:166) at com.caucho.server.webapp.WebApp.buildInvocation(WebApp.java:2067) at com.caucho.server.webapp.WebAppContainer.buildInvocation(WebAppContainer.java:716) at com.caucho.server.host.Host.buildInvocation(Host.java:489) at com.caucho.server.host.HostContainer.buildInvocation(HostContainer.java:314) at com.caucho.server.cluster.Server.buildInvocation(Server.java:1009) at com.caucho.server.dispatch.DispatchServer.buildInvocation(DispatchServer.java:209) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:262) at com.caucho.server.port.TcpConnection.run(TcpConnection.java:678) at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:721) at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:643) at java.lang.Thread.run(Thread.java:619) Caused by: java.lang.NoClassDefFoundError: Could not initialize class cocca.cx.hibernate.HibernateUtil at cocca.cx.hibernate.OpenSessionInViewFilterJTA.init(OpenSessionInViewFilterJTA.java:26) at com.caucho.server.dispatch.FilterManager.createFilter(FilterManager.java:144) at com.caucho.server.dispatch.FilterMapper.buildDispatchChain(FilterMapper.java:166) at com.caucho.server.webapp.WebApp.buildInvocation(WebApp.java:2067) at com.caucho.server.webapp.WebAppContainer.buildInvocation(WebAppContainer.java:716) at com.caucho.server.host.Host.buildInvocation(Host.java:489) at com.caucho.server.host.HostContainer.buildInvocation(HostContainer.java:314) at com.caucho.server.cluster.Server.buildInvocation(Server.java:1009) at com.caucho.server.dispatch.DispatchServer.buildInvocation(DispatchServer.java:209) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:262) at com.caucho.server.port.TcpConnection.run(TcpConnection.java:678) at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:721) at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:643) at java.lang.Thread.run(Thread.java:619)</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [CoCCA] Help with 500 Servlet Exception</header>
    <date>Wed Dec 24 16:42:34 CET 2008</date>
    <body>7Lyrix schrieb am 24.12.2008 um 19:31:22 (+0630): Never heard of Cocca, but you must put the JAR file containing, among others, the class cocca.cx.hibernate.HibernateUtil in the WEB-INF/lib directory of your webapp, so the server can find it. Michael Ludwig</body>
  </mail>
  <mail>
    <header>[Resin-interest] re sin 3.2.1 apache 2.0.59 problem</header>
    <date>Wed Dec 24 00:31:08 CET 2008</date>
    <body>Hi, We tried to test resin 3.2.1 on one of our developer environment but we run into a problem with apache. The apache version we are using is 2.0.59. The java version is jdk1.5.0_17. The OS is windows XP. The following is the configuration that we did in apache httpd.conf: LoadModule caucho_module "&amp;lt;resin install dir&amp;gt;/win32/apache-2.0/mod_caucho.dll" ResinConfigServer 127.0.0.1 6802 CauchoStatus yes Alias /test "c:/test" The following is the configuration that we did in the resin.xml: ... The "c:/test" is the directory that we put all our static html contents such as .html, images, .js files. When resin 3.2.1 is started, it automatically create the following directories (with no file) in &amp;lt;resin home dir&amp;gt;\webapps\test: WEB-INF WEB-INF\classes WEB-INF\tmp I can access a html page in the static directory (c:/test) from a web browser. I shut down resin and add a simple jsp page in &amp;lt;resin home dir&amp;gt;\webapps\test. I started resin again. This time I can no longer access the html page in the static directory (c:/test) from a web browser. I got the 404 not found error. I'm, however, can access the jsp page from the web browser. Is there any other setup I need to do in order for me to access the static contents through resin 3.2.1 and apache? Thanks, -- View this message in context: http://www.nabble.com/resin-3.2.1-apache-2.0.59-problem-tp21151732p21151732.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] HTTPS/SSL Client authentication</header>
    <date>Mon Dec 22 19:33:29 CET 2008</date>
    <body>Hi, We need to set up client authentication for one web application (web services) in Resin. This resin instance is running other web applications, which required SSL (but not client authentication). SSL configuration is a part of server configuration, not a particular web application. Does it mean if I set a flag of authenticate-client = "true" in &amp;lt;ssl&amp;gt; in resin.conf, all clients of other web applications, which are running on this server and using SSL, will be required to provide client certificate for authentications? Do I need a separate instance of resin for the application which required ssl client authentication in case the other applications would use server authentication? Victor Chugunov Pearson (650) 470-3527 mailto:vchugu...@ordinate.com</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] HTTPS/SSL Client authentication</header>
    <date>Tue Dec 23 01:29:09 CET 2008</date>
    <body>... If I have understood things correctly that is exactly what happens.  The TCP connection will be rejected if no valid client certificate is presented. You would need a separate listening port with a separate SSL configuration. I think you could do it in the same instance, although I have never tried. -Knut</body>
  </mail>
  <mail>
    <header>[Resin-interest] re sin 3.1.8 comet keepalive problem</header>
    <date>Sat Dec 20 02:19:18 CET 2008</date>
    <body>Hi, We upgraded from resin 3.1.6 to 3.1.8. We have an application that use resin comet to push message to flash client. We implement a servlet that extends resin GenericCometServlet. Both the service and resume methods in the servlet return true. Evertime a resume method is called, a message is pushed to the output stream, CometController is closed and the method return true so that the connection can be keep alive. We tested on the resin 3.1.6 and the keepalive was working. When we did the same test on resin 3.1.8, the keepalive is no longer work. We use Charles to capture the request and response from client and server. We saw the "Connection closed" in the response request header which mean that the keepalive is not enabled. Is there any way to enable keepalive for comet on resin 3.1.8? Thanks, -- View this message in context: http://www.nabble.com/resin-3.1.8-comet-keepalive-problem-tp21100841p21100841.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] re sin 3.1.8 comet keepalive problem</header>
    <date>Mon Dec 22 19:57:32 CET 2008</date>
    <body>No, but it does exist in 3.2.1.  The logic to make both comet and keepalives work isn't possible in the 3.1.x tree. -- Scott http://www.nabble.com/resin-3.1.8-comet-keepalive-problem-tp21100841p21100841.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] 304 Not Modified, Content-Length,	and entity headers</header>
    <date>Fri Dec 19 11:56:27 CET 2008</date>
    <body>Hello *! For some reason, Resin 3.1, when responding with 304 due to sendError(SC_NOT_MODIFIED), is going to reply with the header Content-Length = zero: 0x0030:  068c 94f5 4854 5450 2f31 2e30 2033 3034  ....HTTP/1.0.304 0x0040:  204e 6f74 204d 6f64 6966 6965 640d 0a53  .Not.Modified..S 0x0050:  6572 7665 723a 2052 6573 696e 2f33 2e31  erver:.Resin/3.1 0x0060:  2e37 610d 0a45 7870 6972 6573 3a20 4672  .7a..Expires:.Fr 0x0070:  692c 2031 3920 4465 6320 3230 3038 2030  i,.19.Dec.2008.0 0x0080:  323a 3036 3a30 3720 474d 540d 0a45 5461  2:06:07.GMT..ETa 0x0090:  673a 2022 3669 566e 4c56 2b66 4958 4922  g:."6iVnLV+fIXI" 0x00a0:  0d0a 436f 6e74 656e 742d 4c65 6e67 7468  ..Content-Length 0x00b0:  3a20 300d 0a44 6174 653a 2054 6875 2c20  :.0..Date:.Thu,. 0x00c0:  3138 2044 6563 2032 3030 3820 3232 3a30  18.Dec.2008.22:0 0x00d0:  363a 3036 2047 4d54 0d0a 0d0a            6:06.GMT.... In fact, this isn't compliant with HTTP 1.1 specification, which reads: [10.3.5] If the conditional GET used a strong cache validator (see section 13.3.3), the response SHOULD NOT include other entity-headers. Otherwise (i.e., the conditional GET used a weak validator), the response *MUST NOT* include other entity-headers; this *prevents inconsistencies* between cached entity-bodies and updated headers. And, in fact, it broke our mod_accel, which responded to client with 200 OK, Content-Length: 0, following with full body ....JFIF...., and was very surprised when client dropped connection. I understand that using mod_accel == DINOSAUR! in 2008, but still, why does resin do that? There's a special section in resin/src/com/caucho/server/http/HttpResponse.java line 365: if (debug) After I've commented that, front-end ceased malfunction and we didn't see the problem. Still, is there a reason the above code is included? Maybe there's a useful client which fails to work properly when it see 304 without content-length? Or it's just a rudiment and can be removed? Thanks for suggestions!</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 304 Not Modified, Content-Length,	and entity headers</header>
    <date>Fri Dec 19 17:58:11 CET 2008</date>
    <body>I've removed that in the 4.0 tree.  It was added as part of a bug report for some clients that needed the content-length: 0. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Deployment question - mix of webserver- and	war-style deployment</header>
    <date>Thu Dec 18 11:16:28 CET 2008</date>
    <body>Greetings, I'm trying to determine how to configure Resin 3.0 to do a mix of webserver-style and war-style deployment. This is the situation: We have some web applications, say a, b and c, which are all deployed war-style: webapps/a.war webapps/b.war webapps/c.war These web applications are a mixture of JSP pages, servlets and struts actions. There are no problems with these. We also have a set of JSP pages, organized by directory, under the ROOT webapp: webapps/ROOT/1.jsp webapps/ROOT/directory-a/2.jsp webapps/ROOT/directory-a/3.jsp webapps/ROOT/directory-b/4.jsp webapps/ROOT/directory-c/5.jsp We expect these JSP pages to be accessible with the following URLs: http://somesite/directory-a/2.jsp http://somesite/directory-b/4.jsp etc. The JSP pages are organized by directory to improve the readability of the URL and to help with search engine categorization and rankings. However, I'm finding that, with the default configuration, resin complains that it can't find any of the files under webapps/ROOT/directory-a or directory-b or directory-c and returns a 404 status code for these pages. The JSP pages directly under ROOT (like 1.jsp) are served OK. After turning on finer logging, I found that this is because resin thinks that directory-a, directory-b and directory-c are web application contexts, and should be served from the web applications directory-a, directory-b and directory-c. This is, of course, not the way that the web application has been laid out. Is there any way around this? The site structure has been created by an Information Architect and I see sense in its organization, but I would like to preserve the directories under ROOT/ and not have to create a web application for every category. I've tried various configuration options and haven't been able to find a solution. Thanks for any pointers, Hari</body>
  </mail>
  <mail>
    <header>[Resin-interest] Deployment question - mix of webserver- and	war-style deployment</header>
    <date>Thu Dec 18 11:17:26 CET 2008</date>
    <body>Greetings, I'm trying to determine how to configure Resin 3.0 to do a mix of webserver-style and war-style deployment. This is the situation: We have some web applications, say a, b and c, which are all deployed war-style: webapps/a.war webapps/b.war webapps/c.war These web applications are a mixture of JSP pages, servlets and struts actions. There are no problems with these. We also have a set of JSP pages, organized by directory, under the ROOT webapp: webapps/ROOT/1.jsp webapps/ROOT/directory-a/2.jsp webapps/ROOT/directory-a/3.jsp webapps/ROOT/directory-b/4.jsp webapps/ROOT/directory-c/5.jsp We expect these JSP pages to be accessible with the following URLs: http://somesite/directory-a/2.jsp http://somesite/directory-b/4.jsp etc. The JSP pages are organized by directory to improve the readability of the URL and to help with search engine categorization and rankings. However, I'm finding that, with the default configuration, resin complains that it can't find any of the files under webapps/ROOT/directory-a or directory-b or directory-c and returns a 404 status code for these pages. The JSP pages directly under ROOT (like 1.jsp) are served OK. After turning on finer logging, I found that this is because resin thinks that directory-a, directory-b and directory-c are web application contexts, and should be served from the web applications directory-a, directory-b and directory-c. This is, of course, not the way that the web application has been laid out. Is there any way around this? The site structure has been created by an Information Architect and I see sense in its organization, but I would like to preserve the directories under ROOT/ and not have to create a web application for every category. I've tried various configuration options and haven't been able to find a solution. Thanks for any pointers, Hari</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Deployment question - mix of webserver- and	war-style deployment</header>
    <date>Thu Dec 18 18:04:24 CET 2008</date>
    <body>Following this message, I realized that a stray unzip had left the empty equivalents of directory-a, directory-b and directory-c in webapps/. Resin was just doing what it was supposed to. Everything works as it should now. - Hari -------- Original Message -------- Subject: Deployment question - mix of webserver- and war-style deployment Date: Thu, 18 Dec 2008 15:45:44 +0530 To: resin-interest@caucho.com Greetings, I'm trying to determine how to configure Resin 3.0 to do a mix of webserver-style and war-style deployment. This is the situation: We have some web applications, say a, b and c, which are all deployed war-style: webapps/a.war webapps/b.war webapps/c.war These web applications are a mixture of JSP pages, servlets and struts actions. There are no problems with these. We also have a set of JSP pages, organized by directory, under the ROOT webapp: webapps/ROOT/1.jsp webapps/ROOT/directory-a/2.jsp webapps/ROOT/directory-a/3.jsp webapps/ROOT/directory-b/4.jsp webapps/ROOT/directory-c/5.jsp We expect these JSP pages to be accessible with the following URLs: http://somesite/directory-a/2.jsp http://somesite/directory-b/4.jsp etc. The JSP pages are organized by directory to improve the readability of the URL and to help with search engine categorization and rankings. However, I'm finding that, with the default configuration, resin complains that it can't find any of the files under webapps/ROOT/directory-a or directory-b or directory-c and returns a 404 status code for these pages. The JSP pages directly under ROOT (like 1.jsp) are served OK. After turning on finer logging, I found that this is because resin thinks that directory-a, directory-b and directory-c are web application contexts, and should be served from the web applications directory-a, directory-b and directory-c. This is, of course, not the way that the web application has been laid out. Is there any way around this? The site structure has been created by an Information Architect and I see sense in its organization, but I would like to preserve the directories under ROOT/ and not have to create a web application for every category. I've tried various configuration options and haven't been able to find a solution. Thanks for any pointers, Hari</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Deployment question - mix of webserver- and	war-style deployment</header>
    <date>Thu Dec 18 19:07:38 CET 2008</date>
    <body>Cool.  The best kind of issue :) -- Scott http://somesite/directory-a/2.jsp http://somesite/directory-b/4.jsp http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] manytoone only one field</header>
    <date>Thu Dec 18 10:19:14 CET 2008</date>
    <body>Hello In the sample ManyToOne : http://caucho.com/resin/examples/amber-many2one/index.xtp I can see how to get the corresponding bean in the other table, thanks to its house id. Now as I transmit the object through hessian, I would like to retreive only the one field name (for instance the house name) and not the whole object. Is it possible ? Thanks -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] manytoone only one field</header>
    <date>Thu Dec 18 19:15:38 CET 2008</date>
    <body>http://caucho.com/resin/examples/amber-many2one/index.xtp I can see You could try making the @Many2One field transient (which would stop Hessian from sending it.) And then you could add a new field just for the house name and write the setHouse(House) to store the house name.  When Amber fills the house from the database, it will call setHouse, and you can store any field you like in a serializable field. -- Scott http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] manytoone only one field</header>
    <date>Fri Dec 19 18:51:22 CET 2008</date>
    <body>Great solution, thanks http://caucho.com/resin/examples/amber-many2one/index.xtp I can see http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re sin Cron Jobs</header>
    <date>Wed Dec 17 05:37:42 CET 2008</date>
    <body>Dittos.  I looked at the source, and it seems the thread pool isn't getting injected via @In. http://www.caucho.com/resin-3.0/resource/cron.xtp http://maillist.caucho.com/mailman/listinfo/resin-interest -- View this message in context: http://www.nabble.com/Resin-Cron-Jobs-tp19558588p21047044.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Cant access Resin Admin page - 403 error Forbidden IP Address (Vista)</header>
    <date>Thu Dec 11 17:04:14 CET 2008</date>
    <body>Hi all, i've installed Resin on XP and all seemed ok. I install over Vista and when i click the 'admin' link i just get a 403 error i.e 403 Forbidden IP Address Resin/3.1.8 anyone seen this one before? one person did.. http://bugs.caucho.com/print_bug_page.php?bug_id=1611 ...but the problem is listed as 'solved' as of many version prior to 3.1 : thanks in advance for any help -- View this message in context: http://www.nabble.com/Cant-access-Resin-Admin-page---403-error-Forbidden-IP-Address-%28Vista%29-tp20958366p20958366.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Cant access Resin Admin page - 403 error	Forbidden IP Address (Vista)</header>
    <date>Thu Dec 11 17:20:19 CET 2008</date>
    <body>Check the resin.conf for the web-app entry for /resin-admin and change - Administration application /resin-admin to - Administration application /resin-admin This should resolve the 403 Error. Best regards, Steffen -----Ursprüngliche Nachricht----- Von: [EMAIL PROTECTED] [ mailto:[EMAIL PROTECTED] Im Auftrag von Javabeat Gesendet: Donnerstag, 11. Dezember 2008 17:03 An: resin-interest@caucho.com Betreff: [Resin-interest] Cant access Resin Admin page - 403 error Forbidden IP Address (Vista) Hi all, i've installed Resin on XP and all seemed ok. I install over Vista and when i click the 'admin' link i just get a 403 error i.e 403 Forbidden IP Address Resin/3.1.8 anyone seen this one before? one person did.. http://bugs.caucho.com/print_bug_page.php?bug_id=1611 ...but the problem is listed as 'solved' as of many version prior to 3.1 : thanks in advance for any help -- View this message in context: http://www.nabble.com/Cant-access-Resin-Admin-page---403-error-Forbidden-IP-Address-%28Vista%29-tp20958366p20958366.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] srun vs server ?</header>
    <date>Thu Dec 11 16:44:12 CET 2008</date>
    <body>Hello All, Still working on my Apache/Resin issues and looking through the docs I found : http://caucho.com/resin-3.1/doc/install-apache.xtp#Configuring%20resin.conf In the wild I have seen both this: *&amp;lt;srun server-id="" host="127.0.0.1" port="6802"/&amp;gt;* and this: which one is correct when using mod_caucho but not using a cluster? Tnanks The future is here. It's just not widely distributed yet. -William Gibson</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] srun vs server ?</header>
    <date>Thu Dec 11 17:54:26 CET 2008</date>
    <body>Hello All, Still working on my Apache/Resin issues and looking through the docs I found : http://caucho.com/resin-3.1/doc/install-apache.xtp#Configuring%20resin.conf In the wild I have seen both this: and this: which one is correct when using mod_caucho but not using a cluster? They're equivalent.  The first one is the old, Resin 3.0 syntax for backward compatibility. In Resin 3.1, every server belongs to a cluster because we want one unified deployment model, not a bunch of different cases.  If you have a single server, it belongs to a cluster with one server.  In previous versions, clustering was a feature, but now it's part of the architecture. -- Scott Tnanks The future is here. It's just not widely distributed yet. -William Gibson</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] srun vs server ?</header>
    <date>Thu Dec 11 19:06:41 CET 2008</date>
    <body>Ah, got it. Thanks The future is here. It's just not widely distributed yet. -William Gibson http://caucho.com/resin-3.1/doc/install-apache.xtp#Configuring%20resin.conf http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Class loader issue finding resources in	WEB-INF/lib .jar files</header>
    <date>Thu Dec 11 14:21:48 CET 2008</date>
    <body>Under Resin 3.1.6, I'm trying to get a Stripes-based project working. Stripes supports an auto-discovery mechanism whereby it searches the classpath for components that extend its functionality. I'm finding that when the mechanism tries to use the Resin "EnvironmentClassLoader" (which it plucks off the thread) to find resources, it cannot locate anything that's in a WEB-INF/lib jar file. It can find resources in the WEB-INF/classes directory however. Is this some sort of configuration issue, in that I need to tell Resin to allow those jar files to be searched? (What's happening specifically is that the call to getResources() is returning an empty Enumeration.) -- Turtle, turtle, on the ground, Pink and shiny, turn around.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Class loader issue finding resources in	WEB-INF/lib .jar files</header>
    <date>Thu Dec 11 18:05:28 CET 2008</date>
    <body>I've filed it at http://bugs.caucho.com/view.php?id=3150 Do you know what the exact string for the getResources argument is? There have been problems in the past related to things like "/foo" vs "foo". -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Class loader issue finding resources in	WEB-INF/lib .jar files</header>
    <date>Thu Dec 11 18:10:30 CET 2008</date>
    <body>http://bugs.caucho.com/view.php?id=3150 By convention the Stripes config here is based on package names (or package name prefixes; in other words, package "com.giganticorp" means all packages under that prefix).  There are no slashes, just "." separators.  In my particular case the specific string was "org.stripesstuff". -- Turtle, turtle, on the ground, Pink and shiny, turn around.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Class loader issue finding resources in	WEB-INF/lib .jar files</header>
    <date>Thu Dec 11 18:49:37 CET 2008</date>
    <body>Also: some people on the Stripes list have pointed out that .jar files lacking explicit directory entries might cause problems.  That may be the case, but my .jar file has directory entries. (I suppose that, on the other hand, the *presence* of the directories might cause problems.) -- Turtle, turtle, on the ground, Pink and shiny, turn around.</body>
  </mail>
  <mail>
    <header>[Resin-interest] thread dump from StatService</header>
    <date>Wed Dec 10 23:20:27 CET 2008</date>
    <body>Running Resin 3.1.6 on centos linux 5,  2.0ghz proc , 2G ram. I have a box that is running a bunch of virtual hosts configured in resin and also connects to Apache 2.2.3 via mod_caucho. I am getting these in the logs and I'm wondering how I can read this in order to figure out why my cpu load is being pegged so high Thanks in advance: ==&amp;gt; /usr/local/resin/log/jvm-default.log &amp;lt;== [21:36:00.000] StatService[] cpu-load=11.57 [21:36:00.001] StatService[] dumping threads due to cpu load=11.57 [21:36:00.003] Thread Dump: [21:36:00.003] [21:36:00.003] "Signal Dispatcher" id=5 RUNNABLE [21:36:00.003] [21:36:00.003] "Surrogate Locker Thread (CMS)" id=4 RUNNABLE [21:36:00.003] [21:36:00.003] "resin-pro-statistics" id=27 RUNNABLE [21:36:00.003]   at sun.management.ThreadImpl.getThreadInfo0 (ThreadImpl.java) (native) [21:36:00.003]   at sun.management.ThreadImpl.getThreadInfo (ThreadImpl.java:147) [21:36:00.003]   at com.caucho.server.admin.ThreadDump.threadDumpImpl (ThreadDump.java:46) [21:36:00.003]   at com.caucho.server.admin.ThreadDump.dumpThreads (ThreadDump.java:38) [21:36:00.003]   at com.caucho.server.admin.StatService.run (StatService.java:135) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "RMI TCP Accept-0" id=10 RUNNABLE (in native) [21:36:00.003]   at java.net.PlainSocketImpl.socketAccept (PlainSocketImpl.java) (native) [21:36:00.003]   at java.net.PlainSocketImpl.accept (PlainSocketImpl.java:384) [21:36:00.003]   at java.net.ServerSocket.implAccept (ServerSocket.java:453) [21:36:00.003]   at java.net.ServerSocket.accept (ServerSocket.java:421) [21:36:00.003]   at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop (TCPTransport.java:369) [21:36:00.003]   at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run (TCPTransport.java:341) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "hmux-127.0.0.1:6802-105" id=1859 RUNNABLE (in native) [21:36:00.003]   at com.caucho.vfs.JniSocketImpl.readNative (JniSocketImpl.java) (native) [21:36:00.003]   at com.caucho.vfs.JniSocketImpl.read (JniSocketImpl.java:279) [21:36:00.003]   at com.caucho.vfs.JniStream.readTimeout (JniStream.java:87) [21:36:00.003]   at com.caucho.vfs.ReadStream.fillWithTimeout (ReadStream.java:982) [21:36:00.003]   at com.caucho.server.port.TcpConnection.waitForKeepalive (TcpConnection.java:208) [21:36:00.003]   at com.caucho.server.port.TcpConnection.run (TcpConnection.java:691) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:721) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "hmux-127.0.0.1:6802-107" id=1881 RUNNABLE (in native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.nativeAccept (JniServerSocketImpl.java) (native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.accept (JniServerSocketImpl.java:199) [21:36:00.003]   at com.caucho.server.port.Port.accept (Port.java:1176) [21:36:00.003]   at com.caucho.server.port.TcpConnection.run (TcpConnection.java:655) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:721) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "hmux-127.0.0.1:6802-108" id=1871 RUNNABLE (in native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.nativeAccept (JniServerSocketImpl.java) (native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.accept (JniServerSocketImpl.java:199) [21:36:00.003]   at com.caucho.server.port.Port.accept (Port.java:1176) [21:36:00.003]   at com.caucho.server.port.TcpConnection.run (TcpConnection.java:655) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:721) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "hmux-127.0.0.1:6802-57" id=1897 RUNNABLE (in native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.nativeAccept (JniServerSocketImpl.java) (native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.accept (JniServerSocketImpl.java:199) [21:36:00.003]   at com.caucho.server.port.Port.accept (Port.java:1176) [21:36:00.003]   at com.caucho.server.port.TcpConnection.run (TcpConnection.java:655) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:721) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "hmux-127.0.0.1:6802-79" id=1899 RUNNABLE (in native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.nativeAccept (JniServerSocketImpl.java) (native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.accept (JniServerSocketImpl.java:199) [21:36:00.003]   at com.caucho.server.port.Port.accept (Port.java:1176) [21:36:00.003]   at com.caucho.server.port.TcpConnection.run (TcpConnection.java:655) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:721) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "hmux-127.0.0.1:6802-87" id=1898 RUNNABLE (in native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.nativeAccept (JniServerSocketImpl.java) (native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.accept (JniServerSocketImpl.java:199) [21:36:00.003]   at com.caucho.server.port.Port.accept (Port.java:1176) [21:36:00.003]   at com.caucho.server.port.TcpConnection.run (TcpConnection.java:655) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:721) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "http--8080-1" id=24 RUNNABLE (in native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.nativeAccept (JniServerSocketImpl.java) (native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.accept (JniServerSocketImpl.java:199) [21:36:00.003]   at com.caucho.server.port.Port.accept (Port.java:1176) [21:36:00.003]   at com.caucho.server.port.TcpConnection.run (TcpConnection.java:655) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:721) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "http--8080-3" id=22 RUNNABLE (in native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.nativeAccept (JniServerSocketImpl.java) (native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.accept (JniServerSocketImpl.java:199) [21:36:00.003]   at com.caucho.server.port.Port.accept (Port.java:1176) [21:36:00.003]   at com.caucho.server.port.TcpConnection.run (TcpConnection.java:655) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:721) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "http--8080-5" id=20 RUNNABLE (in native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.nativeAccept (JniServerSocketImpl.java) (native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.accept (JniServerSocketImpl.java:199) [21:36:00.003]   at com.caucho.server.port.Port.accept (Port.java:1176) [21:36:00.003]   at com.caucho.server.port.TcpConnection.run (TcpConnection.java:655) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:721) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "http--8080-7" id=18 RUNNABLE (in native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.nativeAccept (JniServerSocketImpl.java) (native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.accept (JniServerSocketImpl.java:199) [21:36:00.003]   at com.caucho.server.port.Port.accept (Port.java:1176) [21:36:00.003]   at com.caucho.server.port.TcpConnection.run (TcpConnection.java:655) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:721) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "http--8080-9" id=33 RUNNABLE (in native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.nativeAccept (JniServerSocketImpl.java) (native) [21:36:00.003]   at com.caucho.vfs.JniServerSocketImpl.accept (JniServerSocketImpl.java:199) [21:36:00.003]   at com.caucho.server.port.Port.accept (Port.java:1176) [21:36:00.003]   at com.caucho.server.port.TcpConnection.run (TcpConnection.java:655) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:721) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "main" id=1 RUNNABLE (in native) [21:36:00.003]   at java.net.SocketInputStream.socketRead0 (SocketInputStream.java) (native) [21:36:00.003]   at java.net.SocketInputStream.read (SocketInputStream.java:129) [21:36:00.003]   at java.net.SocketInputStream.read (SocketInputStream.java:182) [21:36:00.003]   at com.caucho.server.resin.Resin.waitForExit (Resin.java:1265) [21:36:00.003]   at com.caucho.server.resin.Resin.main (Resin.java:1367) [21:36:00.003] [21:36:00.003] "resin-select-manager" id=28 RUNNABLE (in native) [21:36:00.003]   at com.caucho.server.port.JniSelectManager.selectNative (JniSelectManager.java) (native) [21:36:00.003]   at com.caucho.server.port.JniSelectManager.run (JniSelectManager.java:289) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "Finalizer" id=3 WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at java.lang.ref.ReferenceQueue.remove (ReferenceQueue.java:116) [21:36:00.003]   at java.lang.ref.ReferenceQueue.remove (ReferenceQueue.java:132) [21:36:00.003]   at java.lang.ref.Finalizer$FinalizerThread.run (Finalizer.java:159) [21:36:00.003] [21:36:00.003] "Reference Handler" id=2 WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at java.lang.Object.wait (Object.java:485) [21:36:00.003]   at java.lang.ref.Reference$ReferenceHandler.run (Reference.java:116) [21:36:00.003] [21:36:00.003] "resin-block-manager-writer" id=13 WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at java.lang.Object.wait (Object.java:485) [21:36:00.003]   at com.caucho.db.store.BlockManager$BlockManagerWriter.run (BlockManager.java:354) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-destroy" id=31 WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at java.lang.Object.wait (Object.java:485) [21:36:00.003]   at com.caucho.server.resin.Resin$DestroyThread.run (Resin.java:1774) [21:36:00.003] [21:36:00.003] "resin-1843" id=1868 TIMED_WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:705) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-1853" id=1878 TIMED_WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:705) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-1854" id=1879 TIMED_WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:705) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-1855" id=1880 TIMED_WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:705) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-1858" id=1883 TIMED_WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:705) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-1859" id=1884 TIMED_WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:705) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-1863" id=1888 TIMED_WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:705) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-1867" id=1892 TIMED_WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:705) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-1868" id=1893 TIMED_WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:705) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-1870" id=1895 TIMED_WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:705) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-1875" id=1900 TIMED_WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.runTasks (ThreadPool.java:705) [21:36:00.003]   at com.caucho.util.ThreadPool$Item.run (ThreadPool.java:643) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-alarm" id=14 TIMED_WAITING [21:36:00.003]   at java.lang.Thread.sleep (Thread.java) (native) [21:36:00.003]   at com.caucho.util.Alarm$AlarmThread.run (Alarm.java:586) [21:36:00.003] [21:36:00.003] "resin-ping" id=26 TIMED_WAITING [21:36:00.003]   at java.lang.Thread.sleep (Thread.java) (native) [21:36:00.003]   at com.caucho.server.admin.PingThread.run (PingThread.java:334) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-port-6802" id=29 TIMED_WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at com.caucho.server.port.Port.run (Port.java:1513) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-port-8080" id=30 TIMED_WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at com.caucho.server.port.Port.run (Port.java:1513) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-thread-launcher" id=11 TIMED_WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at com.caucho.util.ThreadPool$ThreadLauncher.startConnection (ThreadPool.java:828) [21:36:00.003]   at com.caucho.util.ThreadPool$ThreadLauncher.run (ThreadPool.java:851) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] [21:36:00.003] "resin-thread-scheduler" id=12 TIMED_WAITING [21:36:00.003]     waiting on [EMAIL PROTECTED] [21:36:00.003]   at java.lang.Object.wait (Object.java) (native) [21:36:00.003]   at com.caucho.util.ThreadPool$ScheduleThread.run (ThreadPool.java:895) [21:36:00.003]   at java.lang.Thread.run (Thread.java:619) [21:36:00.003] The future is here. It's just not widely distributed yet. -William Gibson</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] thread dump from StatService</header>
    <date>Thu Dec 11 00:09:31 CET 2008</date>
    <body>Can you do a 'ps' or 'top' to make sure that Resin is the overloading process?  Since that thread dump doesn't show any active threads, if the Resin JVM has a high CPU, then something odd is happening. With the exception of the "CMS" thread, those are all idle Resin threads.  So the load due to Resin should be zero based on that thread dump. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin (non-pro) 3.2.0.x won't start.... error w/	watchdog:</header>
    <date>Wed Dec 10 20:32:56 CET 2008</date>
    <body>[EMAIL PROTECTED] bin]# ./resin.sh start Resin/3.2.0 can't start -server '' for watchdog at 127.0.0.1:6600. com.caucho.config.ConfigException: &amp;lt;user-name&amp;gt; requires compiled JNI. Check the $RESIN_HOME/libexec or $RESIN_HOME/libexec64 directory for libresin_os.so. [EMAIL PROTECTED] bin]# help?</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin (non-pro) 3.2.0.x won't start.... error w/ watchdog:</header>
    <date>Wed Dec 10 20:47:00 CET 2008</date>
    <body>Open your resin.xml file and search for user-name. Comment that section out or bracket with: ... Rob</body>
  </mail>
  <mail>
    <header>[Resin-interest] Help: how to deploy and configure EAR for message driven bean (MDB)?</header>
    <date>Wed Dec 10 01:46:41 CET 2008</date>
    <body>I'm trying to deploy an MDB (Message Driven Bean) to Resin 3.2.1 and having trouble figuring out how to configure it.  I'm generally pretty familiar with deploying webapps, but new to EJBs. Here's what I've done so far.  I added an &amp;lt;ear-deploy&amp;gt; section to the Then, I built my_mdb.ear and copied it to $RESIN_HOME/ear-deploy.  Resin then unpacked it to _ear_my_mdb.  In the console, I see: EnterpriseApplication[my_mdb] active suggesting that everything is working OK. This is where I'm stumped.  The documentation explains how to connect my MDB to ActiveMQ by putting config entries in WEB-INF/resin-web.xml.  This is puzzling because my EAR doesn't even have a WEB-INF and it doesn't seem like I should be putting server-specific configuration information inside an archive file.  I would expect to be able to put the URL for the ActiveMQ server in resin.xml or some other file external to the EAR. Does this make sense and can anyone tell me the proper way to configure it? -- View this message in context: http://www.nabble.com/Help%3A-how-to-deploy-and-configure-EAR-for-message-driven-bean-%28MDB%29--tp20926967p20926967.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] when will v 3.2 will be stable</header>
    <date>Mon Dec 08 00:23:59 CET 2008</date>
    <body>Hello I'm currently using v3.2.0 and it is relatively stable, except for certain non-critical points. I'd like to know if there is planned date for a "stable" 3.2 ? Thanks -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] when will v 3.2 will be stable</header>
    <date>Mon Dec 08 00:36:59 CET 2008</date>
    <body>May/June 2009 :-( We're tied to the release of the JavaEE 6 specifications, which won't be final until JavaOne 2009.  And the  draft specs are changing radically.   For example, WebBeans configuration has been totally reworked (it's very nice.)  And the Servlet support for comet is totally different from the early draft. So we already know there will be large changes in the APIs and configuration files in the next few release.  (Based on those changes and a bunch of our own, we're renaming 3.2 to 4.0, so people will be less surprised by the scope of the changes.) The 4.0 (3.2) releases will be fully tested, but we just can't call it "stable" while the APIs and configuration files are changing so much. -- Scott http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] when will v 3.2 will be stable</header>
    <date>Mon Dec 08 08:07:49 CET 2008</date>
    <body>Thanks a lot http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>[Resin-interest] feature list comparison</header>
    <date>Fri Dec 05 21:45:03 CET 2008</date>
    <body>Where can i find a detailed feature list that compares open source resin with pro version so that my organization can have a all the info for our decision on which version to use. iovation 111 SW Fifth Avenue Suite 3200 Portland, OR 97204 http://www.iovation.com/ The information contained in this email message may be privileged, confidential and protected from disclosure. If you are not the intended recipient, any dissemination, distribution or copying is strictly prohibited. If you think that you have received this email message in error, please notify the sender by reply email and delete the message and any attachments.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] feature list comparison</header>
    <date>Fri Dec 05 22:31:09 CET 2008</date>
    <body>http://caucho.com/resin-3.0/features/overview.xtp Bill On Fri, Dec 5, 2008 at 3:43 PM, Arthur Copeland &amp;lt;[EMAIL PROTECTED] http://www.iovation.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Using php views in Spring framework - can one	benefit from resin Pro compilation features?</header>
    <date>Fri Dec 05 04:18:20 CET 2008</date>
    <body>Hi all, I'm using Quercus views in out project as Spring Framework MVC views with in similar way as is done in Resin's quercus servlet. I was just wondering whether we could benefit from or use Caucho Pro's capabilities to compile php code into javacode in our project somehow - even when we are not using QuercusServlet? Is there a source-code available for QuercusServlet in the pro-version that could be used as a base, if we would like to use the pro version of the appserver and quercus? -huima</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using php views in Spring framework - can one	benefit from resin Pro compilation features?</header>
    <date>Fri Dec 05 19:00:02 CET 2008</date>
    <body>Very cool. If you're calling the classes directly, you can instantiate a com.caucho.quercus.ProQuercus instead of a com.caucho.quercus.Quercus.  I haven't tried that directly, but that should be the only difference. At some point, we should add that capability to javax.script, although Quercus does need a work directory, and for embedded servers or other app-servers we'll probably need to add some kind of config option. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Using php views in Spring framework - can one	benefit from resin Pro compilation features?</header>
    <date>Thu Dec 11 08:59:06 CET 2008</date>
    <body>Hi Huima, I just gave a talk at Devoxx about Quercus and I mentioned that you were using Spring MVC and Quercus in this way.  I got a couple of questions about details and code samples.  Any chance you can share some with us? Thanks! Emil ----- Original Message ---- http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problems installing TeamCity 4.0 on Resin Professional 3.1.8</header>
    <date>Thu Dec 04 13:38:52 CET 2008</date>
    <body>Hello Jan and thanks for your reply. Youre so right what you say about installing Tomcat. Id rather not do that, but Im afraid Id had to unless Caucho can provide some quick solution. Best regards, Tero Hi Tero, no solution from my sidem sorry. I find it a bit strange that Caucho has more focus on PHP compatibility than to support major web applications. :-( I still like resin better than Tomcat, Jetty et. al, but for TeamCity I had to configure a Tomcat server myself. And when I have to do that, what's the point of running resin at all? Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Cluster sessions don't expire</header>
    <date>Thu Dec 04 11:45:43 CET 2008</date>
    <body>My woes with clustered sessions and Resin never seem to end! We switched from database-backed sessions to clustered sessions due to issue whereby sessions did not invalidate immediately, which lead to people logging out and finding themselves still logged in. Now we find that sessions do not expire after the configured period of inactivity. I'm using Resin-Pro 3.1.7a in a three-node cluster. Is this a known issue or am I able to configure my way out of it? rgds, Richard Richard Grantham Development ------------------------------- [EMAIL PROTECTED] Limehouse Software Ltd DDI: (020) 7566 3336 Main: (020) 7566 3320 Fax: (020) 7566 3321 Limehouse Software Ltd Bridewell Gate 9 Bridewell Place London EC4V 6AW Manchester Office: 3rd Floor, The Triangle, Exchange Square, Manchester M4 3TR Tel: (0161) 240 2440, Fax: (0161) 240 2441, ISDN: 08700 119 400 Check out Limehouse Software's innovative solutions www.limehousesoftware.co.uk - Transforming the way you publish and consult on information The information contained in this e-mail or in any attachments is confidential and is intended solely for the named addressee only. Access to this e-mail by anyone else is unauthorised. If you are not the intended recipient, please notify Limehouse Software Ltd immediately by returning this e-mail to sender or calling 020 7566 3320 and do not read, use or disseminate the information. Opinions expressed in this e-mail are those of the sender and not necessarily the company. Although an active anti-virus policy is operated, the company accepts no liability for any damage caused by any virus transmitted by this e-mail, including any attachments.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Cluster sessions don't expire</header>
    <date>Thu Dec 04 17:28:35 CET 2008</date>
    <body>Does the logout code call session.invalidate()?  Or are you relying on the timeout?  invalidate() is the correct, reliable way of closing the session, while the timeout is heuristic. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Cluster sessions don't expire</header>
    <date>Thu Dec 04 18:33:57 CET 2008</date>
    <body>Yes, the logout code calls session.invalidate() and it works fine. I have some application logic in SessionListener.sessionDestroyed(...) which does some housekeeping after someone presses logout or their session times out, so it's important it's called. I'm finding that the session does not time out in the configured time (60 seconds) when, for instance, you close the browser, so SessionListener.sessionDestroyed() is not called. -----Original Message----- From: [EMAIL PROTECTED] [ mailto:[EMAIL PROTECTED] On Behalf Of Scott Ferguson Sent: 04 December 2008 16:27 To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Cluster sessions don't expire Does the logout code call session.invalidate()?  Or are you relying on the timeout?  invalidate() is the correct, reliable way of closing the session, while the timeout is heuristic. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Cluster sessions don't expire</header>
    <date>Thu Dec 04 18:49:03 CET 2008</date>
    <body>I assume the application is some kind of ajax connection so a 60 second timeout makes sense? We might need to do some work to add that kind of precision.  Because the session timeout was designed when 30 minute timeouts were the norm, not short values, the session reaping is fairly slow. I've added a report at http://bugs.caucho.com/view.php?id=3116 -- Scott mailto:[EMAIL PROTECTED] On Behalf Of Scott Ferguson http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Cluster sessions don't expire</header>
    <date>Fri Dec 05 10:31:35 CET 2008</date>
    <body>Well, usually it's 60 minutes. The 60 second timeout is set when someone closes the browser without logging out (JavaScript catches the event and calls a JSP which sets the new session timeout with session.setMaxInactiveInterval(60)). This is so that if someone loses their connection to the internet they will be able to continue working without issue when it comes back (assuming it's back in under an hour). The timeout is being set by the JSP but is not acted upon. Perhaps I should explain the use case. Our application maintains a list who is logged into the system. It also allows people to lock things for editing. So that people can't lock things and go off on holiday preventing others from working we unlock anything they have locked and clear them out of the logged in list when a session is invalidated. Right now people are just closing the browser and going home and their colleagues are unable to continue the work the next day. I'd agree that half the issue is education ("please press logout") but it's also something we need to be pro-active about. -----Original Message----- From: [EMAIL PROTECTED] [ mailto:[EMAIL PROTECTED] On Behalf Of Scott Ferguson Sent: 04 December 2008 17:47 To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Cluster sessions don't expire I assume the application is some kind of ajax connection so a 60 second timeout makes sense? We might need to do some work to add that kind of precision.  Because the session timeout was designed when 30 minute timeouts were the norm, not short values, the session reaping is fairly slow. I've added a report at http://bugs.caucho.com/view.php?id=3116 -- Scott mailto:[EMAIL PROTECTED] On Behalf Of Scott Ferguson http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Cluster sessions don't expire</header>
    <date>Fri Dec 05 18:19:29 CET 2008</date>
    <body>Thanks.  I've filed a bug report at http://bugs.caucho.com/view.php?id=3122 . Your symptoms are a definite bug, since the maximum slack should be about 15 minutes for session expiry (because of the implementation limitations I'd mentioned).  Nothing at all like a day. -- Scott mailto:[EMAIL PROTECTED] On Behalf Of Scott Ferguson http://bugs.caucho.com/view.php?id=3116 mailto:[EMAIL PROTECTED] On Behalf Of Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Problems installing TeamCity 4.0 on Resin	Professional 3.1.8</header>
    <date>Thu Dec 04 09:20:42 CET 2008</date>
    <body>Hello, I tried to install TeamCity 4.0 by simply placing the .war file in an appropriate directory and then configuring it in resin.conf. When I try to access /teamCity, I get this exception: javax.servlet.ServletException: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'defaultMessageProcessorFactory' defined in URL [jar:file:/D:/Teamcity/webapp/WEB-INF/lib/server.jar!/META-INF/buildServerSpring.xml]: Unsatisfied dependency expressed through constructor argument with index 0 of type [jetbrains.buildServer.serverSide.BuildServerEx]: Ambiguous constructor argument types - did you specify the correct bean references as constructor arguments? at com.caucho.server.dispatch.ServletConfigImpl.createServlet(ServletConfigImpl.java:768) at com.caucho.server.dispatch.ServletManager.init(ServletManager.java:159) at com.caucho.server.webapp.WebApp.start(WebApp.java:1874) at com.caucho.server.deploy.DeployController.startImpl(DeployController.java:667) at com.caucho.server.deploy.DeployController.restartImpl(DeployController.java:630) at com.caucho.server.deploy.StartAutoRedeployAutoStrategy.alarm(StartAutoRedeployAutoStrategy.java:177) at com.caucho.server.deploy.DeployController.handleAlarm(DeployController.java:789) at com.caucho.util.Alarm.handleAlarm(Alarm.java:375) at com.caucho.util.Alarm.run(Alarm.java:345) at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:730) at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:649) at java.lang.Thread.run(Thread.java:619) This is how Ive got it configured: Ive followed instructions here, http://www.jetbrains.net/confluence/display/TCD4/Installing+and+Configuring+the+TeamCity+Server#InstallingandConfiguringtheTeamCityServer-InstallingandConfiguringtheTeamCityserver , and got my data directory, %TEAMCITY_DATA_PATH%, pointing to D:\Teamcity\data. Any ideas whats broken? JetBrains confirmed that TeamCity works fine with TomCat, Glassfish (well, they can be both considered as TomCat in this case) and Jetty. Thanks, Tero</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problems installing TeamCity 4.0 on Resin	Professional 3.1.8</header>
    <date>Thu Dec 04 13:19:50 CET 2008</date>
    <body>Hi Tero, no solution from my sidem sorry. I find it a bit strange that Caucho has more focus on PHP compatibility than to support major web applications. :-( I still like resin better than Tomcat, Jetty et. al, but for TeamCity I had to configure a Tomcat server myself. And when I have to do that, what's the point of running resin at all? Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Problems installing TeamCity 4.0 on Resin	Professional 3.1.8</header>
    <date>Thu Dec 04 17:23:33 CET 2008</date>
    <body>I've filed a bug on this http://bugs.caucho.com/view.php?id=3115 That's an odd bug, though, since I'm not sure how Resin would affect Spring in that way. -- Scott http://www.jetbrains.net/confluence/display/TCD4/Installing+and+Configuring+the+TeamCity+Server#InstallingandConfiguringtheTeamCityServer-InstallingandConfiguringtheTeamCityserver http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] hessian: toDictionary(..); toMap(); and reverse</header>
    <date>Wed Dec 03 23:12:30 CET 2008</date>
    <body>(I am waiting on comet... and in the mean time will write my own nio socket server) I need help finding methods in .as that encode fromStreamToDictionary(..) and dictionaryToStream(..) and in Java from streamToMap(..) and mapToStream(..) So can I get some help finding such methods or maybe it's a RFE? .V</body>
  </mail>
  <mail>
    <header>[Resin-interest] &amp;lt;jsp:useBean type="..." /&amp;gt;</header>
    <date>Wed Nov 19 19:19:28 CET 2008</date>
    <body>Hi, I just came along another problem with resin (3.2.1 this time): Error message: java.lang.InstantiationException: jsp:useBean needs 'bean' or 'class' Show stacktrace That shouldn't happen I suppose, right?! The syntax ref at Sun says: ---8&amp;lt;--- type="package.class" If the Bean already exists in the scope, gives the Bean a data type other than the class from which it was instantiated. If you use type without class or beanName, no Bean is instantiated. The package and class name are case sensitive. ---8&amp;lt;--- So, why is resin complaining at this? Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] &amp;lt;jsp:useBean type="..." /&amp;gt;</header>
    <date>Wed Nov 19 19:30:30 CET 2008</date>
    <body>Does the bean exist?  If the bean isn't in the scope, then you do need the bean or class, because the type attribute is only allowed for pre- existing beans. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] &amp;lt;jsp:useBean type="..." /&amp;gt;</header>
    <date>Wed Nov 19 20:14:38 CET 2008</date>
    <body>Hi Scott, yes, it is. It's TeamCity again - after I changed all references from After that resin 3.1.8 complained about Caused by: java.lang.ClassNotFoundException: _jsp._WEB_22dINF._tags._linkScript__tag [java.io.IOException: class file length mismatch] which isn't fixed in the 3.1.x branch, so I took my chances and tried 3.2.1 - with no luck due to the useBean-type problem. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] &amp;lt;jsp:useBean type="..." /&amp;gt;</header>
    <date>Wed Nov 19 20:26:39 CET 2008</date>
    <body>You should be able to delete the WEB-INF/work to work around that. Resin should be deleting broken .class files for JSP, but I'm not sure if that auto-delete functionality was added for .tag as well. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] Are you using Quercus?</header>
    <date>Mon Nov 17 20:18:13 CET 2008</date>
    <body>I'll be giving a talk on Quercus at Devoxx next month and I'd like to get some idea of who's using Quercus and for what.  If you're using Quercus, please fill out the quick survey below.  Feel free to respond to the list or directly to me.  If you're not using Quercus, but you want to, please let me know what's keeping you from using it. 1. What application or applications are you using on Quercus?  What are you using them for? 2. Did you use this application before with the C version of PHP?  If so, why did you switch?  Have you seen a performance/stability improvement? 3. Have you integrated Java and PHP in any way?  (e.g. calling Java libraries from PHP or calling PHP from Java using javax.script) 4. What was your experience in installing a PHP app on Quercus? 5. Has your company/team's organization changed because of using Quercus?  For example, have you been able to hire PHP talent for a previously Java-only site? 6. Are you using Quercus with Resin Pro?  Resin Open Source?  another app server/servlet engine? Feel free to promote your Quercus-based site - I'd like to see it in action! Thanks! Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:[EMAIL PROTECTED] http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; BAM: lightweight high-speed messaging</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin 3.1.7a &amp;amp; TeamCity</header>
    <date>Sat Nov 15 15:51:01 CET 2008</date>
    <body>Hi, has anyone successfully installed TeamCity with resin? I get errors like the following during setting up my admin account: Error message: javax.el.PropertyNotFoundException: 'fullServerVersion' is an unknown bean property of 'com.caucho.server.cluster.Cluster$ServerVar' and Error message: javax.el.PropertyNotFoundException: 'queue' is an unknown bean property of 'com.caucho.server.cluster.Cluster$ServerVar' The first one is referenced in file 'WEB-INF/tags/version.tag' as Can it be that resin tries to evaluate this on a false bean? Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 3.1.7a &amp;amp; TeamCity</header>
    <date>Mon Nov 17 17:36:43 CET 2008</date>
    <body>variable is conflicting with one of TeamCity's variables, which shouldn't happen because Resin's internal variable lookup should have a lower priority.  I'll need to check on that behavior.  It's possible the priorities are incorrect. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] session persistence - JDBC vs cluster.</header>
    <date>Fri Nov 14 09:22:24 CET 2008</date>
    <body>I have a question: Is cluster-store/tcp-store only available in resin 3.x pro version ? I think for 2.1.7 it was allowed in non pro version. It would be very nice if some one can clarify. Thanks. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- View this message in context: http://www.nabble.com/session-persistence---JDBC-vs-cluster.-tp16058626p20496225.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] session persistence - JDBC vs cluster.</header>
    <date>Fri Nov 14 19:26:00 CET 2008</date>
    <body>Correct. I believe that was true.  2.1 split the pro/non-pro by APIs, while 3.x splits by clustering/performance/reliability, but includes all the APIs in the non-pro. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.nabble.com/session-persistence---JDBC-vs-cluster.-tp16058626p20496225.html http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] session persistence - JDBC vs cluster.</header>
    <date>Mon Nov 17 08:44:13 CET 2008</date>
    <body>Thanks Scott. http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.nabble.com/session-persistence---JDBC-vs-cluster.-tp16058626p20496225.html http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- View this message in context: http://www.nabble.com/session-persistence---JDBC-vs-cluster.-tp16058626p20535009.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Can I use Resin as a HTTP load balancer?</header>
    <date>Thu Nov 13 04:00:09 CET 2008</date>
    <body>Hi, All: Can anyone kindly tell me if I can use Resin as a HTTP load balancer? I have a cluster which contains several machines having JBoss or similar application server running on them. Can I use Resin to dispatch HTTP request? That is if I sent a HTTP request to Resin, can it forward the request to one of the application server in the cluster? If so, can it support "sticky" HTTP session and fail-over? Thanks! Zeke</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Can I use Resin as a HTTP load balancer?</header>
    <date>Thu Nov 13 21:34:28 CET 2008</date>
    <body>Hi, All: Can anyone kindly tell me if I can use Resin as a HTTP load balancer? I have a cluster which contains several machines having JBoss or similar application server running on them. Can I use Resin to dispatch HTTP request? That is if I sent a HTTP request to Resin, can it forward the request to one of the application server in the cluster? If so, can it support "sticky" HTTP session and fail-over? Well, you can use the proxy in rewrite-dispatch, but it's not as capable as Resin's native load balancer.  It is would be possible for us to enhance it to have the same capabilities, although it would require a bit of a refactor. -- Scott Thanks! Zeke [广告] 金秋最关注楼盘-房不胜房</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.1.8 pre-release snapshot</header>
    <date>Wed Nov 12 20:12:15 CET 2008</date>
    <body>I've put up a snapshot that should be the final release for 3.1.8, but I'll be leaving it up until Monday before the actual release to give a bit of extra stress test time and let people find anything critical that we missed. -- Scott</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin: tags in resin.xml</header>
    <date>Wed Nov 12 16:47:34 CET 2008</date>
    <body>Hi, I'm in the middle of reworking our Resin configuration so we can have a consistent configuration across both development and production. I'm trying to use the &amp;lt;resin:if&amp;gt; and &amp;lt;resin:import&amp;gt; tags to conditionally use a particular configuration based on whether it's a devel or production box. The problem I'm running into is that the watchdog seems to know nothing about the resin: tags in the config file. For example, if I have in conf/resin.xml a few lines that say: ...and then I start resin by running "bin/resin.sh , I get an error message saying: server-id 'myserver' has no matching &amp;lt;server&amp;gt; definition. However, if I remove the open and close tags for resin:if, it works fine. This is why I believe that the watchdog is not really parsing the whole config file and processing the resin:* tags... Any suggestions? Best, -- Elliot</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin: tags in resin.xml</header>
    <date>Wed Nov 12 18:12:53 CET 2008</date>
    <body>That should be fixed in the latest version (although it might just be the snapshots.) -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin: tags in resin.xml</header>
    <date>Wed Nov 12 18:29:55 CET 2008</date>
    <body>Hi Scott, Thanks for the fast reply... I forgot to mention that this was with 3.2.1. I guess I'll try a snapshot or wait for the next release... Best, -- Elliot</body>
  </mail>
  <mail>
    <header>[Resin-interest] Displaytag problem</header>
    <date>Tue Nov 11 00:50:10 CET 2008</date>
    <body>I'm trying to get a pretty simple Stripes-based web application running in a fresh install of Resin 3.1.6.  The application works *except* for a page that attempts to use the "displaytag" tag library (which I've not used before). It seems that Resin is unable/unwilling to recognize any of the setters in the displaytag tag implementation classes, in all cases failing with: attribute 'id' in tag 'display:table' has no corresponding set method in tag class 'org.displaytag.tags.TableTag' It doesn't matter what attribute I use or what sort of value I pass to it from the .jsp page. Resin 3.0.x and 3.1.6 all do pretty much the same thing. Looking at the displaytag sources and the Resin source, I can't see where it's getting hung up. There are in fact public setter methods in the displaytag code, and they seem OK to me. I'm pretty sure I've seen implications from random forum questions that there are people using displaytag with Resin, so I suspect there's something I'm just not doing right. Again, Resin 3.1.6, Displaytag 1.1.1, JDK 6, Linux. Thanks for any hints or sympathy :) -- Turtle, turtle, on the ground, Pink and shiny, turn around.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Displaytag problem</header>
    <date>Tue Nov 11 01:03:11 CET 2008</date>
    <body>I'm trying to get a pretty simple Stripes-based web application running in a fresh install of Resin 3.1.6.  The application works *except* for a page that attempts to use the "displaytag" tag library (which I've not used before). It seems that Resin is unable/unwilling to recognize any of the setters in the displaytag tag implementation classes, in all cases failing with: attribute 'id' in tag 'display:table' has no corresponding set method in tag class 'org.displaytag.tags.TableTag' It doesn't matter what attribute I use or what sort of value I pass to it from the .jsp page. Resin 3.0.x and 3.1.6 all do pretty much the same thing. Looking at the displaytag sources and the Resin source, I can't see where it's getting hung up. There are in fact public setter methods in the displaytag code, and they seem OK to me. I'm pretty sure I've seen implications from random forum questions that there are people using displaytag with Resin, so I suspect there's something I'm just not doing right. Scanning the TableTag API, it doesn't look like there is a setId method in TableTag (there is a setHtmlId).  So I wouldn't expect Resin to allow that to work. Do you know what the *.tld looks like for that Tag? -- Scott Again, Resin 3.1.6, Displaytag 1.1.1, JDK 6, Linux. Thanks for any hints or sympathy :) -- Turtle, turtle, on the ground, Pink and shiny, turn around.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Displaytag problem</header>
    <date>Tue Nov 11 01:11:11 CET 2008</date>
    <body>The same thing happens with "name", "nameString", "list", etc. Not yet but I will now. -- Turtle, turtle, on the ground, Pink and shiny, turn around.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Displaytag problem</header>
    <date>Tue Nov 11 01:18:12 CET 2008</date>
    <body>The .tld looks pretty ordinary (to me), though its &amp;lt;jsp-version&amp;gt; tag is 1.2 and not 2.0.  I don't know what evil that might cause but I can sure find out. -- Turtle, turtle, on the ground, Pink and shiny, turn around.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Displaytag problem</header>
    <date>Tue Nov 11 18:57:13 CET 2008</date>
    <body>Well, the issue is the "id" attribute to getHtmlId (?) mapping.  I can't remember any part of the JSP spec that does that mapping (which is why the .tld was important), but it's possible there's something I've missed. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Displaytag problem</header>
    <date>Tue Nov 11 19:16:17 CET 2008</date>
    <body>OK, well again, it's not just that attribute that doesn't work -- *none* of the tag attributes can be set. That example was just one iteration of trying various things. In point of fact it's the "name" attribute that I really want to use. -- Turtle, turtle, on the ground, Pink and shiny, turn around.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Displaytag problem</header>
    <date>Tue Nov 11 19:22:19 CET 2008</date>
    <body>Well, the issue is the "id" attribute to getHtmlId (?) mapping.  I can't remember any part of the JSP spec that does that mapping (which is why the .tld was important), but it's possible there's something I've missed. OK, well again, it's not just that attribute that doesn't work -- *none* of the tag attributes can be set. That example was just one iteration of trying various things. In point of fact it's the "name" attribute that I really want to use. Can you send the error message for the name attribute?  It should be different from the id message since setName does exist. -- Scott -- Turtle, turtle, on the ground, Pink and shiny, turn around.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Displaytag problem</header>
    <date>Tue Nov 11 19:29:20 CET 2008</date>
    <body>I agree that it should be different, but it is not. Therein, of course, lies all of my confusion. Every attribute generates exactly the same error (modulo the name of the attribute, of course.) -- Turtle, turtle, on the ground, Pink and shiny, turn around.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Displaytag problem</header>
    <date>Tue Nov 11 21:46:46 CET 2008</date>
    <body>Well I got the app more-or-less working in Tomcat, and I decided to try Resin again. It's perfectly happy now. The only thing I can think of is that while banging on it in Tomcat I had some issues with Stripes needing a few .jar files from the Apache Commons collection.  I have no idea how or why that'd affect the Resin JSP processor, but there you go. I appreciate the effort put into my goose chase nevertheless. I'm so happy that I don't have to deal with Tomcat now :) -- Turtle, turtle, on the ground, Pink and shiny, turn around.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Displaytag problem</header>
    <date>Tue Nov 11 21:54:47 CET 2008</date>
    <body>Ah.  I've added a bug report.  It's possible that the missing .jar files are messing up Resin's introspection and instead of reporting the error as a linking problem, it's getting reported as a missing method.  In other words, Resin's error report might be very misleading.  I'll need to see if I can duplicate the problem. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin not picking jars from WEB-INF lib folder</header>
    <date>Wed Nov 05 08:45:11 CET 2008</date>
    <body>Hi All, There is a strange problem we are encountering while deploying one of our webapp on resin. The problem what it seems is that resin is not able to pick jars present in the WEB-INF lib folder of the deployed web application. Can someone throw some light on why this could happen and the possible remedy/configuration change to be done on our part. It would be great if some can also provide some pointers to how resin classloading process begins, i.e. how. where and in what order resin loads classes and provide it to deployed web app. Any info, or direct link pointing to related information would be utmost appreciated. Thanks in Advance, Vidhu Singhal Tech. Lead. GCS</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin not picking jars from WEB-INF lib folder</header>
    <date>Wed Nov 05 08:52:10 CET 2008</date>
    <body>You didn't mess with the &amp;lt;class-loader&amp;gt; setting of that app by mistake, did you...? http://www.caucho.com/resin-3.0/config/env.xtp#class-loader Vidhu Singhal wrote (2008-11-05 08:43): http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re sin not picking jars from WEB-INF lib folder</header>
    <date>Wed Nov 05 12:16:01 CET 2008</date>
    <body>No i dont think so as we are using Resin 2.1.11 and the class loader settings are present in Resin 3.x (please correct me if i am wrong). Can you specify a solution or similar configuration which needs to be set/validated for Resin 2.1.11 version. Thanks for your help, Vidhu -- View this message in context: http://www.nabble.com/Resin-not-picking-jars-from-WEB-INF-lib-folder-tp20337316p20339830.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin not picking jars from WEB-INF lib folder</header>
    <date>Sat Nov 08 02:04:29 CET 2008</date>
    <body>Hello Vidhu Singhal: How you are deploying the app on resin, on which user account. Make sure that user has privileges to read/write permissions to that jar files under lib directory. Did you see any errors in the log files? What platform you are in? Thanks! Prasoona http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re sin not picking jars from WEB-INF lib folder</header>
    <date>Thu Mar 05 18:52:05 CET 2009</date>
    <body>Vidhu, Did you find the solution to your problem. I have the same issue, it is not picking up any of the Jar files in lib directory. Please let me know how you resolved it. Thanks http://maillist.caucho.com/mailman/listinfo/resin-interest -- View this message in context: http://www.nabble.com/Resin-not-picking-jars-from-WEB-INF-lib-folder-tp20337316p22356827.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] [Fwd:  resin-maven-plugin / dependencies]</header>
    <date>Tue Nov 04 10:01:57 CET 2008</date>
    <body>Since this seems to be overlooked, could anyone give me some feedback on this? Thanks! Best regards, --- Jan. -------- Original Message -------- Subject: [Resin-interest] resin-maven-plugin / dependencies Date: Mon, 20 Oct 2008 07:06:17 +0200 Reply-To: General Discussion for the Resin application server Organization: sign of renitence GmbH &amp;amp; Co. KG To: General Discussion for the Resin application server Hi, most of the resin-maven-plugins of version &amp;gt; 3.1.6 lack dependencies in the caucho m2 repository. E.g., these are missing for the 3.2.1 branch: com.caucho:resin-ejb:jar:3.2.1 com.caucho:resin-j2ee-management:jar:3.2.1 com.caucho:resin-jca:jar:3.2.1 com.caucho:resin-jms:jar:3.2.1 com.caucho:resin-jsdk:jar:3.2.1 com.caucho:resin-jstl:jar:3.2.1 com.caucho:resin-jpa:jar:3.2.1 com.caucho:resin-jta:jar:3.2.1 com.caucho:resin-jws:jar:3.2.1 com.caucho:resin-support:jar:3.2.1 com.caucho:resin-webbeans:jar:3.2.1 Also, v3.1.7a isn't in the repository as well. Could you take a look at it? Thanks! Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>[Resin-interest] webApp.url &amp;amp;&amp;amp; UnknownHostException</header>
    <date>Mon Nov 03 14:45:55 CET 2008</date>
    <body>Hi all! When I test Hessian service (resin-doc) I have error UnknownHostException: === com.caucho.hessian.client.HessianRuntimeException: java.net.UnknownHostException: default at com.caucho.hessian.client.HessianProxy.sendRequest(HessianProxy.java:321) at com.caucho.hessian.client.HessianProxy.invoke(HessianProxy.java:166) at $Proxy37.add(Unknown Source) at _jsp._demo__jsp._jspService(demo.jsp:7) at _jsp._demo__jsp._jspService(demo.jsp:5) at com.caucho.jsp.JavaPage.service(JavaPage.java:61) at com.caucho.jsp.Page.pageservice(Page.java:580) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:195) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:189) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:266) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:292) at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:577) at com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java:1211) at com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1152) at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:759) at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:681) at java.lang.Thread.run(Thread.java:595) Caused by: java.net.UnknownHostException: default at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:177) at java.net.Socket.connect(Socket.java:520) at java.net.Socket.connect(Socket.java:470) at sun.net.NetworkClient.doConnect(NetworkClient.java:157) at sun.net.www.http.HttpClient.openServer(HttpClient.java:388) at sun.net.www.http.HttpClient.openServer(HttpClient.java:523) at sun.net.www.http.HttpClient.&amp;lt;init&amp;gt;(HttpClient.java:231) at sun.net.www.http.HttpClient.New(HttpClient.java:304) at sun.net.www.http.HttpClient.New(HttpClient.java:321) at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:813) at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:765) at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:690) at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:857) at com.caucho.hessian.client.HessianProxy.sendRequest(HessianProxy.java:319) at com.caucho.hessian.client.HessianProxy.invoke(HessianProxy.java:166) at $Proxy37.add(Unknown Source) at _jsp._demo__jsp._jspService(demo.jsp:7) at _jsp._demo__jsp._jspService(demo.jsp:5) at com.caucho.jsp.JavaPage.service(JavaPage.java:61) at com.caucho.jsp.Page.pageservice(Page.java:580) at com.caucho.server.dispatch.PageFilterChain.doFilter(PageFilterChain.java:195) at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:189) at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:266) at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:292) at com.caucho.server.port.TcpConnection.handleRequests(TcpConnection.java:577) at com.caucho.server.port.TcpConnection$AcceptTask.doAccept(TcpConnection.java:1211) at com.caucho.server.port.TcpConnection$AcceptTask.run(TcpConnection.java:1152) at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:759) at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:681) at java.lang.Thread.run(Thread.java:595) === If I change in resin-web.xml === === to === http://myhost:8080/resin-doc/examples/hessian-service/math/ === demo can work properly. -- Sincerely yours, Vitaliy Berdinskikh (Виталий Бердинских)</body>
  </mail>
  <mail>
    <header>[Resin-interest] Issue with Resin setup in IIS</header>
    <date>Sun Nov 02 06:23:26 CET 2008</date>
    <body>Hi All, I have a Windows 2003 server running an the 2.1.14 version of resin. We have multiple sites setup in resin at the moment. I've been attempting to upgrade to version 3.0 of Resin and had troubles surfing to my site I have. Basically, I am able to access my site via http://localhost:8080/application but when I try to get to it via the external IP address http://888.888.888.88/application it does not find it for some reason. I am guessing it's resin.conf file tag that needs to be modified. I include below the host section (which I thought would need modifying in order to get the site running via the IP). Reading off the documentation, it states to set the IIS directory for the webapp root below.. Not sure what else I need to be wary of. Any help would be much appreciated. - configures an explicit root web-app matching the - webapp's ROOT - Administration application /resin-admin - - password is the md5 hash of the password. - localhost is true to limit access to the localhost Regards, Stavros Stavrakis [cid:image001.jpg@01C93D06.BF28F3C0] ASTA Solutions Pty Ltd Address: Suite 9, 2 Park Drive, Bundoora, VIC 3083 Tel:   +61 3 9479 3779 Fax:  +61 3 9277 7130 Mob: +61 409 055 403 Web: http://www.astasolutions.com.au http://www.astasolutions.com.au/</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Issue with Resin setup in IIS</header>
    <date>Mon Nov 03 19:29:03 CET 2008</date>
    <body>Hi All, I have a Windows 2003 server running an the 2.1.14 version of resin. We have multiple sites setup in resin at the moment. I’ve been attempting to upgrade to version 3.0 of Resin and had troubles surfing to my site I have. The main thing to check with IIS or Apache is the /caucho-status page, e.g. http://192.168.1.10/caucho-status . That page will show you the isapi_srun.dll version, the Resin instance used as a config server (to pass configuration from Resin to isapi_srun), and show the URL mapping and cluster configuration. So, you should look at that page first to understand why IIS isn't contacting Resin. -- Scott Basically, I am able to access my site via http://localhost:8080/application but when I try to get to it via the external IP address http://888.888.888.88/application it does not find it for some reason. I am guessing it’s resin.conf file tag that needs to be modified. I include below the host section (which I thought would need modifying in order to get the site running via the IP). Reading off the documentation, it states to set the IIS directory for the webapp root below.. Not sure what else I need to be wary of. Any help would be much appreciated. - configures an explicit root web-app matching the - webapp's ROOT - Administration application /resin-admin - - password is the md5 hash of the password. - localhost is true to limit access to the localhost Regards, Stavros Stavrakis ASTA Solutions Pty Ltd Address: Suite 9, 2 Park Drive, Bundoora, VIC 3083 Tel:   +61 3 9479 3779 Fax:  +61 3 9277 7130 Mob: +61 409 055 403 Web: http://www.astasolutions.com.au</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Issue with Resin setup in IIS</header>
    <date>Fri Nov 07 07:31:26 CET 2008</date>
    <body>Hi Scott, Thanks for the response, but is /caucho-status available in version 3 of Resin? Regards, Stavros Stavrakis ASTA Solutions Pty Ltd Address: Suite 9, 2 Park Drive, Bundoora, VIC 3083 Tel:            +61 3 9479 3779 Fax:           +61 3 9277 7130 From: [EMAIL PROTECTED] [ mailto:[EMAIL PROTECTED] On Behalf Of Scott Ferguson Sent: Tuesday, 4 November 2008 5:08 AM To: General Discussion for the Resin application server Cc: Bill Angelidis; Con Terzoglou Subject: Re: [Resin-interest] Issue with Resin setup in IIS Hi All, I have a Windows 2003 server running an the 2.1.14 version of resin. We have multiple sites setup in resin at the moment. I've been attempting to upgrade to version 3.0 of Resin and had troubles surfing to my site I have. The main thing to check with IIS or Apache is the /caucho-status page, e.g. http://192.168.1.10/caucho-status . That page will show you the isapi_srun.dll version, the Resin instance used as a config server (to pass configuration from Resin to isapi_srun), and show the URL mapping and cluster configuration. So, you should look at that page first to understand why IIS isn't contacting Resin. -- Scott Basically, I am able to access my site via http://localhost:8080/application but when I try to get to it via the external IP address http://888.888.888.88/application it does not find it for some reason. I am guessing it's resin.conf file tag that needs to be modified. I include below the host section (which I thought would need modifying in order to get the site running via the IP). Reading off the documentation, it states to set the IIS directory for the webapp root below.. Not sure what else I need to be wary of. Any help would be much appreciated. - configures an explicit root web-app matching the - webapp's ROOT - Administration application /resin-admin - - password is the md5 hash of the password. - localhost is true to limit access to the localhost Regards, Stavros Stavrakis ASTA Solutions Pty Ltd Address: Suite 9, 2 Park Drive, Bundoora, VIC 3083 Tel:   +61 3 9479 3779 Fax:  +61 3 9277 7130 Mob: +61 409 055 403 Web: http://www.astasolutions.com.au http://www.astasolutions.com.au/</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Issue with Resin setup in IIS</header>
    <date>Fri Nov 07 07:34:26 CET 2008</date>
    <body>Stavros, /caucho-status is generated by the ISAPI filter DLL. If you're unable to get to that page, it means the filter is not properly installed and loaded into IIS. -- Matt Pangaro Lokitech &amp;gt;&amp;gt; software . strategy . design http://www.lokitech.com m. 1.301.728.6906 f. 1.815.364.0656 e. [EMAIL PROTECTED] mailto:[EMAIL PROTECTED] *On Behalf Of *Scott Ferguson http://192.168.1.10/caucho-status . http://localhost:8080/application but when I try to get to it via http://888.888.888.88/application it does not find it for some reason. I http://www.astasolutions.com.au http://www.astasolutions.com.au/ mailto:resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin 3.2.1 , mod_caucho seems not working ???</header>
    <date>Fri Oct 31 09:30:16 CET 2008</date>
    <body>$ tail /etc/httpd/conf/httpd.conf LoadModule caucho_module /usr/lib/httpd/modules/mod_caucho.so ResinConfigServer localhost 6800 CauchoConfigCacheDirectory /tmp CauchoStatus yes in resin.xml When I try to connect to http://foo.bar.com/index.jsp , the JSPs are not compiled , the jsp source is leaked. I have to connect to http://foo.bar.com:8080/index.jsp to see it compiled. There is a web.xml (web-app version="2.4") in /home/foobar/www/WEB-INF , and all jsps are in /home/foobar/www , all servlets are in /home/foobar/www/WEB-INF/classes The configuration works in 3.0.x and 3.1.x (but because of this bug : http://bugs.caucho.com/view.php?id=2862 , I cannot stay with 3.1.x )</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] resin 3.2.1 , mod_caucho seems not working ???</header>
    <date>Sat Nov 01 11:27:15 CET 2008</date>
    <body>http://foo.bar.com/index.jsp , the JSPs are http://foo.bar.com:8080/index.jsp to see it compiled. Sounds like http://bugs.caucho.com/view.php?id=3013 ?</body>
  </mail>
  <mail>
    <header>[Resin-interest] Memory leak - in Resin?</header>
    <date>Thu Oct 30 14:42:00 CET 2008</date>
    <body>Although embarrassed to admit it, we have had long standing problems with PermGen memory leaks. We have gotten used to restarting the server every time we redeploy, to avoid OutOfMemoryError. Since we would like to make use of - or at least evaluate - some of the new Resin features like WAR versioning, I thought I’d give fixing this another shot. JDBC drivers, log factories, ThreadLocals, explicit ClassLoader references etc. There has also been at least one bug within Resin causing leaks (bug 951 in Mantis). A while back I tried tracking this down using jhat, but since I have limited experience with this, time did not allow me to get to the bottom of it. Today I found some more time, and also a tip on how to use YourKit to track this down ( http://ampedandwired.com/2008/05/05/finding-permgen-memory-leaks-with-yourkit/ for those interested). This lead me to something interesting, which I don’t quite understand. If I interpret the YourKit memory snapshot correctly, here is what is happening (from a Resin 3.1.6 perspective): In com.caucho.server.dispatch.ServletInvocation there is a static ThreadLocal holding references to the current (original) request (while dispatching?). This means that as long as the executing (and dispatching) thread remains in Resins thread pool, but is not used for another dispatch, a handle to the original com.caucho.server.http.HttpRequest is held. In the request, there is a handle to a com.caucho.server.dispatch.Invocation, which in turn has a handle to - the application classloader! (And there is your PermGen leak) Isn’t the fact that the ThreadLocal is never cleared an obvious memory leak? Or why haven’t this been fixed even though Scott seems to have noticed this (see http://bugs.caucho.com/bug_view_advanced_page.php?bug_id=2883 )? If the leak actually is in Resin, why isn’t anybody else seeing this??? Are we doing something unusual? (The only thing I could think of was ServletRequest implementations inside the application being dispatched, however I can't find any such implementations in use) /Mattias Jiderhamn</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Thu Oct 30 16:02:23 CET 2008</date>
    <body>We are also on REsin 3.1.6.  We restart the server each deploy because of behavior exactly described below. Possibly unrelated but also strange issue we see is abnormally long re-start times, on a 2 server cluster where the process is: kill server 1 deploy war 1 restart server 1... wait long time for it to restart then repeat for server 2 http://ampedandwired.com/2008/05/05/finding-permgen-memory-leaks-with-yourkit/ http://bugs.caucho.com/bug_view_advanced_page.php?bug_id=2883 )? http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Thu Oct 30 15:57:26 CET 2008</date>
    <body>Do you have a lot of jsp's? We don't deploy war files, but I do notice that when we have any old jsp's laying around that have errors in them, resin attempts to recompile them every time it starts, and this slows down the start time considerably. So, if you have jsp's in your war, you might want to consider compiling them before you create your war file. Not sure if that's even possible, but I bet it would reduce your start times considerably, at the expense of increasing the size of your war file, of course. Rob We are also on REsin 3.1.6.  We restart the server each deploy because of behavior exactly described below. Possibly unrelated but also strange issue we see is abnormally long re-start times, on a 2 server cluster where the process is: kill server 1 deploy war 1 restart server 1... wait long time for it to restart then repeat for server 2</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Thu Oct 30 16:12:35 CET 2008</date>
    <body>I've added this as http://bugs.caucho.com/view.php?id=3031 That ThreadLocal needs to be cleared in a finally block when the request completes.  I'll need to check on that. -- Scott http://ampedandwired.com/2008/05/05/finding-permgen-memory-leaks-with-yourkit/ http://bugs.caucho.com/bug_view_advanced_page.php?bug_id=2883 )? http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Tue Nov 04 22:26:36 CET 2008</date>
    <body>I noticed this bug was marked as resolved, so I tried reloading our webapp running on Resin compiled from SVN. Same problem. Familiarizing myself a bit further with YourKit and comparing with the sources, I believe both com.caucho.jca.UserTransactionProxy._threadTransaction and com.caucho.transaction.TransactionManagerImpl._threadTransaction should be cleared properly. Although I have not yet found the path to the HttpRequest. I could send you my YourKit snapshot if that helps in tracking this down. /Mattias Scott Ferguson wrote (2008-10-30 16:11): http://bugs.caucho.com/view.php?id=3031 http://bugs.caucho.com/bug_view_advanced_page.php?bug_id=2883 )? http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Tue Nov 04 23:04:59 CET 2008</date>
    <body>I noticed this bug was marked as resolved, so I tried reloading our webapp running on Resin compiled from SVN. Same problem. Familiarizing myself a bit further with YourKit and comparing with the sources, I believe both com.caucho.jca.UserTransactionProxy._threadTransaction and com.caucho.transaction.TransactionManagerImpl._threadTransaction should be cleared properly. Although I have not yet found the path to the HttpRequest. I could send you my YourKit snapshot if that helps in tracking this down. Did you build from resin/branches/3.1 or the trunk?  The trunk changes aren't checked in yet. The fix is only for the SecurityContext clearing.  The comet changes had messed up the automatic clearing of that ThreadLocal. -- Scott /Mattias Scott Ferguson wrote (2008-10-30 16:11): Although embarrassed to admit it, we have had long standing problems with PermGen memory leaks. We have gotten used to restarting the server every time we redeploy, to avoid OutOfMemoryError. Since we would like to make use of - or at least evaluate - some of the new Resin features like WAR versioning, I thought I’d give fixing this another shot. I've added this as http://bugs.caucho.com/view.php?id=3031 That ThreadLocal needs to be cleared in a finally block when the request completes.  I'll need to check on that. -- Scott In com.caucho.server.dispatch.ServletInvocation there is a static ThreadLocal holding references to the current (original) request (while dispatching?). This means that as long as the executing (and dispatching) thread remains in Resins thread pool, but is not used for another dispatch, a handle to the original com.caucho.server.http.HttpRequest is held. In the request, there is a handle to a com.caucho.server.dispatch.Invocation, which in turn has a handle to - the application classloader! (And there is your PermGen leak) Isn’t the fact that the ThreadLocal is never cleared an obvious memory leak? Or why haven’t this been fixed even though Scott seems to have noticed this (see http://bugs.caucho.com/bug_view_advanced_page.php?bug_id=2883 )? If the leak actually is in Resin, why isn’t anybody else seeing this??? Are we doing something unusual? (The only thing I could think of was ServletRequest implementations inside the application being dispatched, however I can't find any such implementations in use) /Mattias Jiderhamn</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Tue Nov 04 23:11:50 CET 2008</date>
    <body>3.1 branch. Now I'm browsing around the com.caucho.server.port.TcpConnection._request which is never explicitly release, but I realize it's getting a bit too late on this side of the Atlantic ocean so I better continue tomorrow unless you find the source of the problem until then. /Mattias Mattias Jiderhamn wrote (2008-11-04 22:24): http://bugs.caucho.com/view.php?id=3031</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Tue Nov 04 23:20:53 CET 2008</date>
    <body>Did you build from resin/branches/3.1 or the trunk? 3.1 branch. Now I'm browsing around the com.caucho.server.port.TcpConnection._request which is never explicitly release, but I realize it's getting a bit too late on this side of the Atlantic ocean so I better continue tomorrow unless you find the source of the problem until then. That field is never released.  The TcpConnection, Request and Response triple are reused together. -- Scott /Mattias Mattias Jiderhamn wrote (2008-11-04 22:24): I noticed this bug was marked as resolved, so I tried reloading our webapp running on Resin compiled from SVN. Same problem. Familiarizing myself a bit further with YourKit and comparing with the sources, I believe both com.caucho.jca.UserTransactionProxy._threadTransaction and com.caucho.transaction.TransactionManagerImpl._threadTransaction should be cleared properly. Although I have not yet found the path to the HttpRequest. I could send you my YourKit snapshot if that helps in tracking this down. /Mattias Scott Ferguson wrote (2008-10-30 16:11): Although embarrassed to admit it, we have had long standing problems with PermGen memory leaks. We have gotten used to restarting the server every time we redeploy, to avoid OutOfMemoryError. Since we would like to make use of - or at least evaluate - some of the new Resin features like WAR versioning, I thought I’d give fixing this another shot. I've added this as http://bugs.caucho.com/view.php?id=3031 That ThreadLocal needs to be cleared in a finally block when the request completes.  I'll need to check on that. -- Scott</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Tue Nov 04 23:29:58 CET 2008</date>
    <body>Scott Ferguson wrote (2008-11-04 23:16): Wouldn't that be the problem then? As long as there is one such triplet that has not been reused since the webapp was reloaded, the request will point to (the Invocatoin that will point to) the classloader of the old version of the app? (That could also explain why the problem has seemed to appear more often on low load test sites than on production instances.) /Mattias</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Wed Nov 05 06:44:58 CET 2008</date>
    <body>In support of this latest theory is the fact that YourKit shows two GC roots for the HttpRequest. Apart from the com.caucho.server.port.TcpConnection._request reference, the request is a root itself by being on the stack of a thread (http--8080-...). This could indicate a thread currently waiting in the com.caucho.server.port.TcpConnection.run() method, where the ServerRequest of the parent is also a local variable. Even if the request is reused, I believe the Invocation or the ClassLoader of the invocation needs to be reset somehow, to release the webapp classloader. I can help try out a proposed fix to see if it solves the problem (= feel free to mail me off list). I might even give it a shot myself. /Mattias Mattias Jiderhamn wrote (2008-11-04 23:28):</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Tue Nov 25 08:10:05 CET 2008</date>
    <body>I'm still battling this PermGen leak and frankly I'm really starting to doubt that I know what I'm doing anymore. I'd be very happy if anyone would care to explain that to me... Since my last post Scott and I have discussed potential class loader leaks and some of them have been fixed in the 3.1.8 release. It seems there is (at least) one leak that didn't get fixed in 3.1.8. I have made a quick and dirty patch to avoid that leak. If anyone would care to try, the patch (which includes a few other things probably fixed in 3.1.8 already) can be found here: http://jiderhamn.se/resin-leak.patch However, even with that patch, it seems there is still some kind of PermGen leak that eventually leads to OutOfMemoryError. I have created a small application with the sole purpose of detecting these leaks. If anyone would care to try, it can be found here (sources included): http://jiderhamn.se/leak.war You will need to add some JARs to the WEB-INF/lib directory; preferrably a couple of large ones like spring.jar and hibernate.jar (don't use Resin JARs though). Then just drop the WAR in a clean installation of Resin 3.1.8 (preferrably patched with the patch above). Hit http://...:nn/leak (once is enough) Force a redeploy by either deleting the webapps/leak dir or touch:ing leak.war Hit http://...:nn/leak again Repeat the last two steps for as long as you'd like What you should see - or at least what I see on one Linux machine and one Windows machine - is the (ClassLoadingMXBean) loadedClassCount and the (MemoryPoolMXBean) Used Perm Gen steadily increasing (while the unloadedClassCount remains pretty stable) for every redeploy, which indicates a classloader leak. But I just can't find that leak. Now, here are the things really bugging me: 1. If I keep redeploying over and over, I will eventually get closer and closer to the Perm Gen Max (in some instances, I have seen the following behaivour instead turn up when Used reaches Init if Init is large enough). Then suddenly the unloadedClassCount is increased, but not with all the unused classes - only about the amount of one redeployment. Redeploy again, and it will increase another step. Meanwhile, the loadedClassCount remains pretty stable, since we are loading as many new classes as are unloaded. It's as if there was a FIFO queue/LRU cache of classloaders, so that the oldest one is garbage collected once there is not enough space for a new one. However, after a while there is (assumably) not enough space to create the new classloader before the old one is garbage collected, and I get OutOfMemoryError somewhere in the middle. Sometimes I am actually able to recover from this error by waiting for the GC to do it's job and then just try again. 2. Now I attached YourKit, looking for dangling classloaders as of the inital post. I found none. In fact, the Classes without Instances inspection only shows the classes in the added JARs from the last redeployment, so when tracing back to GC root, it goes via the current EnvironmentClassLoader which is correct. There are also no excessive instances of EnvironmentClassLoader. Hmm... Now wait a minute. Look at the total number of java.lang.Class objects. It does not match with the totalLoadedClassCount. In fact, the total number of classes found by YourKit is about the same as the totalLoadedClassCount on the very first hit of the application, before any redeployments. So from YourKits point of view, there is no classloader leak! But why then isn't the PermGen space reclaimed. This led me to wonder if there was some kind of JVM bug. (As a side note, I have yet to try with some other profiler) 3. So, I modified the test application (see commented out code in MyServlet.java) to load the classes of the JARs in a regular java.net.URLClassLoader which is then immediately thrown away. No leak. loadedClassCount is immediately decreased (and unloadedClassCount increased), as is the Used Perm Gen. That is, it behave the way we want the redeployment to behave. Ok, lets take one step down in the classloader hierachy and load all the classes via a disposable com.caucho.loader.DynamicClassLoader. No leak. So, what if I load them with a com.caucho.loader.EnvironmentClassLoader which is then destroy()ed and left for garbage collection. The leak is back! EnvironmentClassLoader has now applied to become prime suspect. In order to track things down I subclassed EnvironmentClassLoader inside my application and planned to make changes there. Well ... before any changes, the leak is nowhere to be found. What is going on here????? Anything that might help my sanity would be appreciated. /Mattias Jiderhamn Mattias Jiderhamn wrote (2008-11-05 06:43):</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Wed Nov 26 16:54:32 CET 2008</date>
    <body>I'm still battling this PermGen leak and frankly I'm really starting to doubt that I know what I'm doing anymore. I'd be very happy if anyone would care to explain that to me... Since my last post Scott and I have discussed potential class loader leaks and some of them have been fixed in the 3.1.8 release. It seems there is (at least) one leak that didn't get fixed in 3.1.8. I have made a quick and dirty patch to avoid that leak. If anyone would care to try, the patch (which includes a few other things probably fixed in 3.1.8 already) can be found here: http://jiderhamn.se/resin-leak.patch However, even with that patch, it seems there is still some kind of PermGen leak that eventually leads to OutOfMemoryError. I have created a small application with the sole purpose of detecting these leaks. If anyone would care to try, it can be found here (sources included): http://jiderhamn.se/leak.war preferrably a couple of large ones like spring.jar and hibernate.jar (don't use Resin JARs though). Then just drop the WAR in a clean installation of Resin 3.1.8 (preferrably patched with the patch above). Hit http://...:nn/leak (once is enough) Force a redeploy by either deleting the webapps/leak dir or touch:ing leak.war Hit http://...:nn/leak again Repeat the last two steps for as long as you'd like What you should see - or at least what I see on one Linux machine and one Windows machine - is the (ClassLoadingMXBean) loadedClassCount and the (MemoryPoolMXBean) Used Perm Gen steadily increasing (while the unloadedClassCount remains pretty stable) for every redeploy, which indicates a classloader leak. But I just can't find that leak. Thanks. Right now, our code base is a bit stuck due to the WebBeans/OSGi upgrade (for Resin 4.0.0, was 3.2.2).  Once that's cleaned up and I can put up a snapshot I can take a look. -- Scott Now, here are the things really bugging me: 1. If I keep redeploying over and over, I will eventually get closer and closer to the Perm Gen Max (in some instances, I have seen the following behaivour instead turn up when Used reaches Init if Init is large enough). Then suddenly the unloadedClassCount is increased, but not with all the unused classes - only about the amount of one redeployment. Redeploy again, and it will increase another step. Meanwhile, the loadedClassCount remains pretty stable, since we are loading as many new classes as are unloaded. It's as if there was a FIFO queue/LRU cache of classloaders, so that the oldest one is garbage collected once there is not enough space for a new one. However, after a while there is (assumably) not enough space to create the new classloader before the old one is garbage collected, and I get OutOfMemoryError somewhere in the middle. Sometimes I am actually able to recover from this error by waiting for the GC to do it's job and then just try again. 2. Now I attached YourKit, looking for dangling classloaders as of the inital post. I found none. In fact, the Classes without Instances inspection only shows the classes in the added JARs from the last redeployment, so when tracing back to GC root, it goes via the current EnvironmentClassLoader which is correct. There are also no excessive instances of EnvironmentClassLoader. Hmm... Now wait a minute. Look at the total number of java.lang.Class objects. It does not match with the totalLoadedClassCount. In fact, the total number of classes found by YourKit is about the same as the totalLoadedClassCount on the very first hit of the application, before any redeployments. So from YourKits point of view, there is no classloader leak! But why then isn't the PermGen space reclaimed. This led me to wonder if there was some kind of JVM bug. (As a side note, I have yet to try with some other profiler) 3. So, I modified the test application (see commented out code in MyServlet.java) to load the classes of the JARs in a regular java.net.URLClassLoader which is then immediately thrown away. No leak. loadedClassCount is immediately decreased (and unloadedClassCount increased), as is the Used Perm Gen. That is, it behave the way we want the redeployment to behave. Ok, lets take one step down in the classloader hierachy and load all the classes via a disposable com.caucho.loader.DynamicClassLoader. No leak. So, what if I load them with a com.caucho.loader.EnvironmentClassLoader which is then destroy()ed and left for garbage collection. The leak is back! EnvironmentClassLoader has now applied to become prime suspect. In order to track things down I subclassed EnvironmentClassLoader inside my application and planned to make changes there. Well ... before any changes, the leak is nowhere to be found. What is going on here????? Anything that might help my sanity would be appreciated. /Mattias Jiderhamn Mattias Jiderhamn wrote (2008-11-05 06:43): In support of this latest theory is the fact that YourKit shows two GC roots for the HttpRequest. Apart from the com.caucho.server.port.TcpConnection._request reference, the request is a root itself by being on the stack of a thread (http--8080-...). This could indicate a thread currently waiting in the com.caucho.server.port.TcpConnection.run() method, where the ServerRequest of the parent is also a local variable. Even if the request is reused, I believe the Invocation or the ClassLoader of the invocation needs to be reset somehow, to release the webapp classloader. I can help try out a proposed fix to see if it solves the problem (= feel free to mail me off list). I might even give it a shot myself. /Mattias</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Fri Jan 09 09:24:40 CET 2009</date>
    <body>Scott Ferguson wrote (2008-11-26 16:53): http://jiderhamn.se/resin-leak.patch http://jiderhamn.se/leak.war http://...:nn/leak (once is enough) http://...:nn/leak again Scott Ferguson wrote (2008-12-29 20:41): Does this mean we can assume you will be able to look more closely at the memory leaks in 3.1 sometime soon...? /Mattias</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Fri Jan 09 16:36:44 CET 2009</date>
    <body>I trick that I use to trouble shoot perm gen memory leak involves using jconsole and , jmap, and jhat.  I would attach to resin with jconsole, then reload the webapp a few times to trigger the perm gen leak.  That I will stop the webapp completely, and then go to the memory tab to trigger some full GC.  What I found is that I would need to trigger a few full GC back to back in order for the garbage collector to actually clean up the perm gen. At this point I take a heap dump with jmap and look at the heap dump with jhat.  The webapp had been stopped and perm gen had been clean so if there is no leak, classes loaded by the webapp classlloader should not be in the heap dump anymore.  So if you still see them it mean there is a perm gen leak.  In jhat the detail page for any leaked classes has a link to the classloader which loaded that c lass.  Follow that link and you will see a link for the reference chains from rootset (exclude weak ref) for the leaked classloader.  That page will show you where the leak is. Bill On Fri, Jan 9, 2009 at 3:22 AM, Mattias Jiderhamn &amp;lt;mj-li...@expertsystems.se http://jiderhamn.se/resin-leak.patch http://jiderhamn.se/leak.war http://...:nn/leak (once is enough) http://...:nn/leak again http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Fri Jan 09 17:09:50 CET 2009</date>
    <body>I was hoping you could verify the 4.0 memory fixes before looking at 3.1  Because several of those changes were more involved than I'm comfortable with for 3.1, I'd prefer to make sure they work in 4.0 first. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Fri Mar 20 17:51:02 CET 2009</date>
    <body>Bumping this and also bug 0002963, as we're still having memory issues in production that we can't trace back to our application, causing PermGen to build with every request and eventual OutOfMem/restart.  Hoping issues in this thread can be resolved and pushed into the 3.1.8 trunk.  Our app is a heavy hessian user. -tyson http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- View this message in context: http://www.nabble.com/Memory-leak---in-Resin--tp20247254p22624080.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Wed Mar 25 15:37:38 CET 2009</date>
    <body>Scott Ferguson wrote (2009-01-09 17:08): Seems to me nothing has changed in this regard in the 4.0 snapshot. I did my leak test as previously described, see below, and no classes were unloaded. - Dowload http://jiderhamn.se/leak.war - Add some JARs to the WEB-INF/lib directory; preferrably a couple of large ones like spring.jar and hibernate.jar (don't use Resin JARs though). - Drop the WAR in a clean installation of Resin - Hit http://...:nn/leak (once is enough) - Force a redeploy by either deleting the webapps/leak dir or touch:ing leak.war - Hit http://...:nn/leak again - Repeat the last two steps for as long as you'd like /Mattias</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Thu Mar 26 01:48:18 CET 2009</date>
    <body>I'm glad to see there's someone else with these problems. I've had problems with leaks since 3.0. I rely on resin to re-load my webapp every time I rebuild a class, and it will do that a few times before getting a PermGen exception, at which point I have to kill and restart resin. I'm on 3.2.1 now, but won't be moving to 4.0 for a bit yet. http://jiderhamn.se/leak.war http://...:nn/leak (once is enough) http://...:nn/leak again http://maillist.caucho.com/mailman/listinfo/resin-interest -- Rick</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Sun Mar 29 14:53:31 CEST 2009</date>
    <body>Hi, Using that .war as a sample application, I did some more tests and found some things that might be interesting: I added groovy-1.5.7.jar, hibernate-3.2.6.ga.jar and scala-compiler-2.7.2.jar to WEB-INF/lib. Nothing is done with them, they simply live there. Important data: total size for WEB-INF/lib: 10.3 MB. I then deployed the application, start it and here's some data I gathered after accessing the application a couple of times and hitting "Force Garbage Collector" until the memory is stable: Heap Memory used: 31MB Instances of com.caucho.loader.EnvironmentClassLoader: 1 I then re-save web.xml so the context is reloaded, access and force GC until memory is stable again: Heap Memory used: 41MB Instances of com.caucho.loader.EnvironmentClassLoader: 2 Once again: Heap Memory used: 51MB Instances of com.caucho.loader.EnvironmentClassLoader: 3 Focusing on the last memory snapshot the 3 EnvironmentClassLoader come from (shortest GC roots): 1.- contextClassLoader of java.util.prefs.AbstractPreferences$EventDispatchThread [Stack Local, Thread] contextClassLoader of java.util.prefs.AbstractPreferences$EventDispatchThread [Stack Local, Thread] They are ordered using order of appearance (in the first memory SS, one like 1 is present, after the first restart one like the 2 is present). And looking at one of the suspected classes to be replicated, org.codehaus.groovy.tools.shell.util.Preferences, you can see that indeed there are 3 instances of that class, each one loaded by a different EnvironmentClassLoader. So, I would say there is indeed a leak and the jackpot would be to find out why the EnvironmentClassLoader instances are not being cleaned. Without knowing how Resin is internally supposed to work and which loaders are supposed not to be there, it's difficult to know. As the classes inside the lib directory are not even used at all, one would suspect is a Resin internal issue, but seeing Preferences classes and ThreadLocal in the mix makes the whole thing quite suspicious :). Any idea or test to find out more? D. http://jiderhamn.se/leak.war http://...:nn/leak (once is enough) http://...:nn/leak again ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Mon Mar 30 08:42:09 CEST 2009</date>
    <body>Daniel, your findings confirms EnvironmentClassLoader as the prime suspect (my own tests are a bit more detailed in an earlier post, http://maillist.caucho.com/pipermail/resin-interest/2008-November/003158.html ) Regarding your GC root paths for this class: 1. I haven't noticed any uses of java.util.prefs - could this be part of any of your added JARs (like groovy)? 2. This is the error I have found within Resin that is still to be fixed. As mentioned earlier, there is a quick and dirty patch for Resin 3.1 available at http://jiderhamn.se/resin-leak.patch to avoid this leak. However even with the patch applied I'm still having leaks. 3. This obviously seems like a groovy problem, probably a static initialization triggered at class load. So would you mind giving this another try with groovy removed and with a patched version of Resin? (I can provide a patched resin.jar if that helps) Cheers, Mattias Jiderhamn Daniel Lopez wrote (2009-03-29 14:52): http://jiderhamn.se/leak.war http://...:nn/leak (once is enough) http://...:nn/leak again --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Mon Mar 30 11:41:59 CEST 2009</date>
    <body>Just tried a new idea: I subclassed EnvironmentClassLoader within the Resin sources and compiled into resin.jar. There is still a leak (in contrast to when I subclassed EnvironmentClassLoader within my own application). Conclusion: The classloader that loads the (Environment)ClassLoader class is somehow of importance. /Mattias Mattias Jiderhamn wrote (2009-03-30 08:40): http://maillist.caucho.com/pipermail/resin-interest/2008-November/003158.html ) http://jiderhamn.se/resin-leak.patch to avoid http://jiderhamn.se/leak.war http://...:nn/leak (once is enough) http://...:nn/leak again</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Mon Mar 30 12:55:00 CEST 2009</date>
    <body>After drawing the conclusion below, it isn't very far away to realize it probably has to do with some static (i.e. class loader specific) member of EnvironmentClassLoader. And just as I thought, the heart of the problem is _addLoaderListeners More specifically, if line 234 of com.caucho.server.resin.Resin is commented out, the leak is removed (assuming my HttpRequest._invocation patch is also applied) // Environment.addChildLoaderListener(new WebBeansAddLoaderListener()) Scott, you said the WebBeans caches were not to blame because they are classloader local. Well, it seems something about this classloader locality isn't working the way it should, doesn't it...? Do you have enough info to try to fix this in a future (hopefully soon to be released) 3.1 release? Maybe we are now seeing the end to all these memory leaks!!! /Mattias Mattias Jiderhamn wrote (2009-03-30 11:40): http://maillist.caucho.com/pipermail/resin-interest/2008-November/003158.html ) http://jiderhamn.se/resin-leak.patch to avoid http://jiderhamn.se/leak.war http://...:nn/leak (once is enough) http://...:nn/leak again</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Mon Mar 30 18:21:45 CEST 2009</date>
    <body>After drawing the conclusion below, it isn't very far away to realize it probably has to do with some static (i.e. class loader specific) member of EnvironmentClassLoader. And just as I thought, the heart of the problem is _addLoaderListeners More specifically, if line 234 of com.caucho.server.resin.Resin is commented out, the leak is removed (assuming my HttpRequest._invocation patch is also applied) // Environment.addChildLoaderListener(new WebBeansAddLoaderListener()) Scott, you said the WebBeans caches were not to blame because they are classloader local. Well, it seems something about this classloader locality isn't working the way it should, doesn't it...? Do you have enough info to try to fix this in a future (hopefully soon to be released) 3.1 release? In the early work with 4.0, I'd cleaned a number of dead links (primarily WebBeans, but also some JMX).  I believe the current 4.0 still has a few left, so I'll need to run a final pass at the end of the release cycle. -- Scott Maybe we are now seeing the end to all these memory leaks!!! /Mattias Mattias Jiderhamn wrote (2009-03-30 11:40): Just tried a new idea: I subclassed EnvironmentClassLoader within the Resin sources and compiled into resin.jar. There is still a leak (in contrast to when I subclassed EnvironmentClassLoader within my own application). Conclusion: The classloader that loads the (Environment)ClassLoader class is somehow of importance. /Mattias Mattias Jiderhamn wrote (2009-03-30 08:40): Daniel, your findings confirms EnvironmentClassLoader as the prime suspect (my own tests are a bit more detailed in an earlier post, http://maillist.caucho.com/pipermail/resin-interest/2008-November/003158.html ) Regarding your GC root paths for this class: 1. I haven't noticed any uses of java.util.prefs - could this be part of any of your added JARs (like groovy)? 2. This is the error I have found within Resin that is still to be fixed. As mentioned earlier, there is a quick and dirty patch for Resin 3.1 available at http://jiderhamn.se/resin-leak.patch to avoid this leak. However even with the patch applied I'm still having leaks. 3. This obviously seems like a groovy problem, probably a static initialization triggered at class load. So would you mind giving this another try with groovy removed and with a patched version of Resin? (I can provide a patched resin.jar if that helps) Cheers, Mattias Jiderhamn Daniel Lopez wrote (2009-03-29 14:52): Hi, Using that .war as a sample application, I did some more tests and found some things that might be interesting: I added groovy-1.5.7.jar, hibernate-3.2.6.ga.jar and scala-compiler-2.7.2.jar to WEB-INF/lib. Nothing is done with them, they simply live there. Important data: total size for WEB-INF/lib: 10.3 MB. I then deployed the application, start it and here's some data I gathered after accessing the application a couple of times and hitting "Force Garbage Collector" until the memory is stable: Heap Memory used: 31MB Instances of com.caucho.loader.EnvironmentClassLoader: 1 I then re-save web.xml so the context is reloaded, access and force GC until memory is stable again: Heap Memory used: 41MB Instances of com.caucho.loader.EnvironmentClassLoader: 2 Once again: Heap Memory used: 51MB Instances of com.caucho.loader.EnvironmentClassLoader: 3 Focusing on the last memory snapshot the 3 EnvironmentClassLoader come from (shortest GC roots): 1.- contextClassLoader of java.util.prefs.AbstractPreferences$EventDispatchThread [Stack Local, Thread] _invocation of com.caucho.server.http.HttpRequest [Stack 3.- &amp;lt;loader&amp;gt; of org.codehaus.groovy.tools.shell.util.Preferences contextClassLoader of java.util.prefs.AbstractPreferences$EventDispatchThread [Stack Local, Thread] They are ordered using order of appearance (in the first memory SS, one like 1 is present, after the first restart one like the 2 is present). And looking at one of the suspected classes to be replicated, org.codehaus.groovy.tools.shell.util.Preferences, you can see that indeed there are 3 instances of that class, each one loaded by a different EnvironmentClassLoader. So, I would say there is indeed a leak and the jackpot would be to find out why the EnvironmentClassLoader instances are not being cleaned. Without knowing how Resin is internally supposed to work and which loaders are supposed not to be there, it's difficult to know. As the classes inside the lib directory are not even used at all, one would suspect is a Resin internal issue, but seeing Preferences classes and ThreadLocal in the mix makes the whole thing quite suspicious :). Any idea or test to find out more? D. Seems to me nothing has changed in this regard in the 4.0 snapshot. I did my leak test as previously described, see below, and no classes were unloaded. - Dowload http://jiderhamn.se/leak.war - Add some JARs to the WEB-INF/lib directory; preferrably a couple of large ones like spring.jar and hibernate.jar (don't use Resin JARs though). - Drop the WAR in a clean installation of Resin - Hit http://...:nn/leak (once is enough) - Force a redeploy by either deleting the webapps/leak dir or touch:ing leak.war - Hit http://...:nn/leak again - Repeat the last two steps for as long as you'd like /Mattias</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Thu Apr 02 11:24:55 CEST 2009</date>
    <body>Scott Ferguson wrote (2009-03-30 18:20): Are you saying this won't be fixed in the 3.1 branch? I'm assuming the 4.0 production release is still months ahead? Could we provide you any additional information to change your mind...? --</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Wed Jun 03 22:31:09 CEST 2009</date>
    <body>My initial testing indicates that the leak indeed has been fixed in 4.0! I'll have to get back on this once I have our real application up and running in 4.0 /Mattias Mattias Jiderhamn wrote (2009-04-02 11:23):</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Memory leak - in Resin?</header>
    <date>Mon Mar 30 22:32:38 CEST 2009</date>
    <body>Hi, I did some more tests today, as, like you, I suspected that the listener pointing to the Groovy classes where quite suspicious but ran out of time. I repeated the tests substituting the groovy jar file with Xalan and the leak is gone. I performed the same tests and re-initialised the application several times. After each initialisation, the non-heap memory would grow, then go back to a stable number, and the number of instances of EnvironmentClassLoader would also grow and then schrink. To confirm, I re-added the Groovy.jar file and there it was: after each context restart, one extra EnvironmentClassLoader could not be GC-ed and the non-Heap memory would keep growing with the aprox. amount of WEB-INF/lib size. That's the problem with these kind of leaks, the container classloaders always look suspicious because they are always involved in the process and they are the ones that hold the bigger space. But while they can be the problem, just a single problem with one of the libraries and the EnvironmentClassLoader cannot be GC-ed effectively. Well, that means that Groovy is also on the list of buggy libraries for such kind of environment, along with some JDBC drivers, like HSQLDB that starts a thread that is never stopped unless you add some custom-driver-specific code, and with some jakarta commons that do not clean ThreadLocal references appropriately. Not sure what it can be done, apart of notifying the library developers so they can fix those bugs, but it really is a global problem as there are way too many libraries not ready for a throw-away classloader environment :(. S! D. S'està citant Mattias Jiderhamn &amp;lt;mj-li...@expertsystems.se&amp;gt;: http://maillist.caucho.com/pipermail/resin-interest/2008-November/003158.html ) http://jiderhamn.se/resin-leak.patch to avoid http://jiderhamn.se/leak.war http://...:nn/leak (once is enough) http://...:nn/leak again ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>[Resin-interest] Memory leak - in Resin?</header>
    <date>Thu Oct 30 15:01:06 CET 2008</date>
    <body>I've got a similar experience, but not enough evidence to name a root cause.</body>
  </mail>
  <mail>
    <header>[Resin-interest] 3.2 experience?</header>
    <date>Wed Oct 29 17:36:42 CET 2008</date>
    <body>Resin 3.2.1 is our latest release in the 3.2 branch, which is our development branch.  This branch still undergoes our extensive release testing, but has many changes which have not been quite as vetted Resin 3.1 in production use. If you are using 3.2.0 or 3.2.1, what have your experiences been? Are you using it in production?  After testing, did you decide to use Resin 3.2. or to stick with Resin 3.1?  Why?  What did your testing include?  What features do you like and what would you like to see? I appreciate any feedback you have to offer as we've gotten a few questions from people interested in using Resin 3.2, but want to hear from other folks who've kicked the tires a bit. Thanks, Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:[EMAIL PROTECTED] http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Hessian Web Services</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.2 experience?</header>
    <date>Wed Oct 29 17:57:54 CET 2008</date>
    <body>http://bugs.caucho.com/view.php?id=3013 is a complete show stopper here, so I'm afraid I can't answer these questions as we've not been able to use any version of resin later than 3.1.6.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.2 experience?</header>
    <date>Wed Oct 29 18:07:59 CET 2008</date>
    <body>http://bugs.caucho.com/view.php?id=3013 is a complete show stopper here, Thanks for the feedback - I bumped up the priority.  Just to check, there's some suspicion that this is specific to Apache 2.0 or maybe even 2.0.54.  What version of Apache are you running?  Any other info you could add to the bug report would also help. Thanks, Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:[EMAIL PROTECTED] http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Hessian Web Services</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.2 experience?</header>
    <date>Wed Oct 29 18:29:08 CET 2008</date>
    <body>As you may know, http://www.musicalpresence.com is in production with 3.2 All tests have been successful (utf-8, ejb, flex hessian). I kept 3.2 mostly because I needed some correction on hessian with flex. mailto:[EMAIL PROTECTED] http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.2 experience?</header>
    <date>Wed Oct 29 18:46:20 CET 2008</date>
    <body>In general I like how 3.2 has fewer jars to go around. Hessian is the exception. It would be nice if all of Hessian code was factored out into a separate library in 3.2.x, so we can drop it into other containers, whether they are applications running 3.1.x or perhaps third party apps like tomcat. Also it appears 3.2 is not backward compatible from config stand-point. It is not enough to simply rename .conf to .xml, some configuration elements that used to be optional are required now. This raises the barrier to upgrade from 3.1.x to 3.2.x -Leonid -----Original Message----- From: [EMAIL PROTECTED] [ mailto:[EMAIL PROTECTED] On Behalf Of Emil Ong Sent: Wednesday, October 29, 2008 12:36 PM To: General Discussion for the Resin application server Subject: [Resin-interest] 3.2 experience? Resin 3.2.1 is our latest release in the 3.2 branch, which is our development branch.  This branch still undergoes our extensive release testing, but has many changes which have not been quite as vetted Resin 3.1 in production use. If you are using 3.2.0 or 3.2.1, what have your experiences been? Are you using it in production?  After testing, did you decide to use Resin 3.2. or to stick with Resin 3.1?  Why?  What did your testing include?  What features do you like and what would you like to see? I appreciate any feedback you have to offer as we've gotten a few questions from people interested in using Resin 3.2, but want to hear from other folks who've kicked the tires a bit. Thanks, Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:[EMAIL PROTECTED] http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Hessian Web Services</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.2 experience?</header>
    <date>Thu Oct 30 00:44:58 CET 2008</date>
    <body>I'm with you, Leonid! The config file changes from one "major" release to the next has always been a big pain. I know that some are needed from time to time, but this has often been the biggest hurdle in upgrading for us. We're still on 3.0.x because I haven't yet had the time to vet and apply the significant config file changes between 3.0 and 3.1. 3.2? Forget about it! (Not stable enough for us yet anyway.) Rob mailto:[EMAIL PROTECTED]</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.2 experience?</header>
    <date>Thu Oct 30 01:18:01 CET 2008</date>
    <body>Same here.  I don't quite get why the old style files can't be parsed to whatever newfangled data structure is used by the new version, with whatever defaults best approximate the old behaviour. Jean-François Lamy Teximus -----Message d'origine----- De : [EMAIL PROTECTED] [ mailto:[EMAIL PROTECTED] De la part de Rob Lockstone Envoyé : 29 octobre 2008 19:43 À : General Discussion for the Resin application server Objet : Re: [Resin-interest] 3.2 experience? I'm with you, Leonid! The config file changes from one "major" release to the next has always been a big pain. I know that some are needed from time to time, but this has often been the biggest hurdle in upgrading for us. We're still on 3.0.x because I haven't yet had the time to vet and apply the significant config file changes between 3.0 and 3.1. 3.2? Forget about it! (Not stable enough for us yet anyway.) Rob [ mailto:[EMAIL PROTECTED]</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.2 experience?</header>
    <date>Thu Oct 30 01:24:02 CET 2008</date>
    <body>Same here.  We're still on 3.0 'cause we haven't found the time to port our configs to 3.1.  Just got the 3.0 configs to a point where I liked 'em, too. Saludos, Jose. mailto:[EMAIL PROTECTED] De la part de Rob Lockstone mailto:[EMAIL PROTECTED] http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.2 experience?</header>
    <date>Thu Oct 30 10:14:10 CET 2008</date>
    <body>I must admit that there are some "non-compatible" changes in the config, AND the Api (in particular ejb syntax). But from my point of view, this comes because Caucho provide tools really efficients before they are completely defined by the community. There is good and bad in everything. I never found difficult to upgrade, except that it costs... for all the changes we have to make, and the time to find the new syntax. This process have been difficult for me because it was at a time where the docs were in unstable state. For instance there was a clickable index of config tags in 3.0 documentation, that disappeared for months (no more clickable). Now it's back, and it seems that the new 3.2 doc is really good. mailto:[EMAIL PROTECTED] De la part de Rob Lockstone mailto:[EMAIL PROTECTED] http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>[Resin-interest] Quercus + Web Services / Zend</header>
    <date>Thu Oct 30 14:03:51 CET 2008</date>
    <body>Hi, I'm doing some experiments with Quercus and one of the things I wanted to do is accessing an already existing web service written in Java. I also tried implementing the experiments using Zend Framework, even though that failed, first with a problem I solved by upgrading to 3.1.7 and then with more problems I found no information about. I then tried to go back to the basics and use NuSoap and all I get when I use it is "server failed to send headers" and from the error trace, it seems it never reads any answer from the server ( I tried with public servers with WSDLs that work ) but I still have to verify if it is a problem with Quercus or my setup. As all I could find is that the simple 3 lines I wrote "should work" and they are quite basic... well, I'll check this weekend :). In any case, what's the status of Quercus regarding those subjects? Was anybody able to run the Zend framework under Quercus? Or develop some kind of Web Service client? The information is quite scarce and the documentation is not too thorough, specially the list of applications supported as the link simply goes to the documentation page ;). The forums ( http://forum.caucho.com/ ) are kind of weird... how can one see the replies to the topics? Do I have to be registered for that? As a "newbie" in this topic, I have to say the information about the subject is spread and difficult to follow. There are different web sites with different styles, the wiki, the mailing lists, the forums... S! D. ------------------------------------------- Daniel Lopez Janariz ([EMAIL PROTECTED]) Web Services Centre for Information and Technology Balearic Islands University (SPAIN) -------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus + Web Services / Zend</header>
    <date>Thu Oct 30 14:20:56 CET 2008</date>
    <body>Hello Daniel, I had success running my project that uses ZF 1.5.2 on top of Quercus, as it is using PDO, and the Quercus support at that time (dunno know, I'm not watching its progress) didn't implement some necessary things, I did implement and so it worked fine. Which version of ZF were you using? Share your basic test too, so we can try to figure out what is happening. Regards, -Adriano http://forum.caucho.com/ ) are kind of weird... how can one http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus + Web Services / Zend</header>
    <date>Fri Oct 31 11:06:35 CET 2008</date>
    <body>Hi Adriano, Thanks for your answer. I'm trying with the latest release of Zend, (1.6.2)  fresh from their site. I follow their "quickstart guide", substituting the Apache .htaccess file with the URLRewrite filter to redirect all requests to WEB-INF/php/public/index.php, storing the Zend framework in WEB-INF/php/library/Zend and creating the WEB-INF/php/application/bootstrap.php file the instructions mandate. If using Resin 3.1.5, accessing the application raises a *** Fatal Error: 'Array' is an unknown function. [spl_autoload_register] *** but that's a well-know bug of Quercus in 3.1.5, fixed in 3.1.7. I then try with 3.1.7a and I get these errors: *** ...bootstrap.php:16: Fatal Error: Zend_Controller_Front::$_instance is an undeclared static property An exception occured while bootstrapping the application. ...bootstrap.php:16: Fatal Error: Zend_Controller_Front::$_instance is an undeclared static property Stack Trace: *** As I used copy/paste and I used the same files in a MAMP environment some days ago, I thought it might be a Quercus thing, but I could not find anything about it. I can send you my setup if you wish, but I just followed the steps in the quickstart guide, copy/pasting the content of index.php and bootstrap.php. Regarding the simple NuSOAP test, I include the library and try one of the samples that issues something like: *** ... $client = new soapclient(' http://www.scottnichol.com/samples/hellowsdl3.wsdl ', ... *** And always in these lines I get "Server failed to send headers", even though if I try accessing the WSDL files with my browser, I can see them normally. The debug trace claims that the answer returned an empty answer... but they are answering the browser so... Thanks for your help, S! D. Adriano Bonat &amp;lt;[EMAIL PROTECTED]&amp;gt; ha escrito: ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus + Web Services / Zend</header>
    <date>Sun Nov 02 19:42:04 CET 2008</date>
    <body>Hi again, I think I found something related to the issue, as Quercus seems to have some problems with PHP static members. I created the following test: *************************************** class Test /** * Singleton instance */ public static function getInstance() echo "Member: ".$name."&amp;lt;BR /&amp;gt;" *************************************** If I execute the test under regular PHP, the result is: --- Member: _instance Member: _variable --- If I execute it under Quercus, I just get --- Member: _variable --- The strange thing is that accessing the $_instance static memeber in this little test works, but a very similar code is inside Zend_Controller_Front class in the Zend framework and there it complains that $_instance has not been declared, even though you can see the declaration a couple of lines above. So, even though is seems it is not the full issue, it seems to be strongly related. In any case, one would say that reflection in Quercus is broken, right? Tested using Resin 3.1.7a and resin 3.2.1. Trying to use Zend in 3.2.1 I don't get the error I was showing above, but a blank page and no error message anywhere. S! D. ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus + Web Services / Zend</header>
    <date>Sun Nov 02 20:25:24 CET 2008</date>
    <body>Well, moving forward.... I've advanced a bit on the 3.2.1 front as the "$_instance not defined" problem is no longer there, even if reflection is still broken. The is expected to return "false" directly as the object is not really inside the stack. Not sure how that is supposed to work in PHP, but Zend checked with isset() for existance, this failing. This happens in Zend/Controller/Action/HelperBroker.pjp, line 232 Then I also found out PHP_EOL is not defined, which is not exactly a "bug", but Zend uses it, so I defined it not to get tons of PHP_EOL all around :). With those changes I was able to render the layout, but not content is being displayed and, if I have to believe the traces, neither the Controller or the View are being called. This time I'm getting no error, trace or anything... Aren't interpreted languages fun? :) S! D. ----------------------------------------------------------------</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus + Web Services / Zend</header>
    <date>Mon Nov 03 19:12:43 CET 2008</date>
    <body>I've files this at: http://bugs.caucho.com/view.php?id=3038 -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.2 experience?</header>
    <date>Thu Oct 30 16:38:51 CET 2008</date>
    <body>I still don't see why old config files stop working.  I can still configure Log4j using log4j.properties even though there are newer/better config file formats.  Config files for production sites are tricky, and testing them is very painstaking. The pain factor for people that manage many sites is quite high. Jean-François Lamy Teximus C : +1 514 992-2759 -----Message d'origine----- De : [EMAIL PROTECTED] [ mailto:[EMAIL PROTECTED] De la part de Riccardo Cohen Envoyé : 30 octobre 2008 05:14 À : General Discussion for the Resin application server Objet : Re: [Resin-interest] 3.2 experience? I must admit that there are some "non-compatible" changes in the config, AND the Api (in particular ejb syntax). But from my point of view, this comes because Caucho provide tools really efficients before they are completely defined by the community. There is good and bad in everything. I never found difficult to upgrade, except that it costs... for all the changes we have to make, and the time to find the new syntax. This process have been difficult for me because it was at a time where the docs were in unstable state. For instance there was a clickable index of config tags in 3.0 documentation, that disappeared for months (no more clickable). Now it's back, and it seems that the new 3.2 doc is really good. mailto:[EMAIL PROTECTED] De la part de Rob Lockstone mailto:[EMAIL PROTECTED] http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 3.2 experience?</header>
    <date>Thu Oct 30 16:51:56 CET 2008</date>
    <body>+1 mailto:[EMAIL PROTECTED] De la part de Riccardo mailto:[EMAIL PROTECTED] De la part de Rob mailto:[EMAIL PROTECTED] http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] hessian: flash snap broken?!</header>
    <date>Wed Oct 29 04:26:28 CET 2008</date>
    <body>I download latest hessian flash source snap (10/18) w/ latest Resin Java server side snap 3.2.1 (10/8)... and I now get a npe in flash source doing a simple hessian call. I reverted back to release hessian flash, works fine. This is just the simple year old stuff, call and return an array of maps - it should work? For map on client I use object, should I switch to dictionary now, I looked at some of your source? Of course, I am eager to duplicate BAM examples for full duplex communications.... and I need a working flash hessian snap for that. tia, .V</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] hessian: flash snap broken?!</header>
    <date>Wed Oct 29 17:31:40 CET 2008</date>
    <body>None of the Hessian Flash versions should work with the latest Resin, which includes many changes to the Hessian protocol.  Take a look at Hessian-interest from a couple of months ago.  I'll be updating the Hessian Flash to be compatible with the changes in 3.2.1, but that will be a couple of weeks. Emil http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:[EMAIL PROTECTED] http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Hessian Web Services</body>
  </mail>
  <mail>
    <header>[Resin-interest] Update on 3.0.27</header>
    <date>Fri Oct 24 20:43:01 CEST 2008</date>
    <body>Hi, I was just wondering if we could get a status update on 3.0.27, since there are a number of fixes in it, plus the newly discovered issue with SSL JNI. Thanks, Matt</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Update on 3.0.27</header>
    <date>Fri Oct 24 23:37:01 CEST 2008</date>
    <body>The plan is to work through the 3.1.x and 3.0.x regressions for next week and release when they're clean. I can put up a new snapshot before that. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Update on 3.0.27</header>
    <date>Fri Oct 31 06:08:01 CET 2008</date>
    <body>Thanks for the update. A snapshot to vet the changes would be great. Thanks, Matt</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Update on 3.0.27</header>
    <date>Fri Oct 31 17:36:36 CET 2008</date>
    <body>http://caucho.com/download now has the most up-to-date 3.0 snapshot. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Quercus and Spring proxy beans</header>
    <date>Fri Oct 24 18:19:05 CEST 2008</date>
    <body>Hi all, I just noticed that Quercus does not seem to work with Spring's proxy objects that get created for example with annotation based configurations for security or transactions. @Transactional And in php page: Creates error message: resource([EMAIL PROTECTED]) /home/huima/programming/appservers/resin/resin-3.1.7/webapps/webapp/phptest.php:8: Fatal Error: '$Proxy15::getText' is an unknown method Any ideas on how to circumvent this? I already thought about creating a dummy service that would get that the real service injected into it, but I'm not yet so familiar with the AOP mechanisms that I would what class these proxy objects are and how to inject them into my own object. I will study that little during the weekend, but would be interested to know if anyone else has any ideas. -huima</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Quercus and Spring proxy beans</header>
    <date>Fri Oct 24 21:26:15 CEST 2008</date>
    <body>Do you know if the proxy object is introspectable, specifically if you can use getClass().getMethod() to find the method? It's possible Quercus needs to change the introspection (e.g. by scanning interfaces differently), but I'm not sure what exactly Spring is doing for those beans. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] inode block/fragment mixup???</header>
    <date>Wed Oct 22 21:08:49 CEST 2008</date>
    <body>We have a strange problem with Resin that looks like a bug but might be some configuration issue. We hit the bug while storing more than the usual amount of data in a session (during a process that takes quite a lot of time). If we narrow things down so we store the same kind of data, although not as much (and not using so much time), the error does not come about. The symptoms are that the slow request seems to finish correcly and the data is returned to the browser, however on the next request the session does no longer exist. Other sessions does not seem to be affected. There are errors in the log file which makes me believe the session is lost during serializing/deserializing. With the same input data, the error is always reproducible. Further below is some detailed information. My questions are: - Is there a limit to the amount of data Resin can keep in a session? Is there a setting we should just increase? - Or is this a bug? Is there any workaround for now? Resin version: 3.1.6 Pro Session config: Related errors or flavors of the same error: [18:41:24.000] java.lang.IllegalStateException: block/fragment mixup [18:41:24.000]  at com.caucho.db.store.Inode.writeBlockAddr(Inode.java:1078) [18:41:24.000]  at com.caucho.db.store.Inode.appendBlock(Inode.java:492) [18:41:24.000]  at com.caucho.db.store.Inode.append(Inode.java:388) [18:41:24.000]  at com.caucho.db.store.BlobOutputStream.flushBlock(BlobOutputStream.java:188) [18:41:24.000]  at com.caucho.db.store.BlobOutputStream.write(BlobOutputStream.java:117) [18:41:24.000]  at com.caucho.db.table.BlobColumn.setStream(BlobColumn.java:179) [18:41:24.000]  at com.caucho.db.table.BlobColumn.set(BlobColumn.java:267) [18:41:24.000]  at com.caucho.db.sql.UpdateQuery.execute(UpdateQuery.java:110) [18:41:24.000]  at com.caucho.db.jdbc.PreparedStatementImpl.execute(PreparedStatementImpl.java:345) [18:41:24.000]  at com.caucho.db.jdbc.PreparedStatementImpl.executeUpdate(PreparedStatementImpl.java:313) [18:41:24.000]  at com.caucho.server.cluster.FileBacking.storeSelfUpdate(FileBacking.java:524) [18:41:24.000]  at com.caucho.server.cluster.FileBacking.storeSelf(FileBacking.java:474) [18:41:24.000]  at com.caucho.server.cluster.FileStore.store(FileStore.java:169) [18:41:24.000]  at com.caucho.server.cluster.ClusterObject.store(ClusterObject.java:414) [18:41:24.000]  at com.caucho.server.session.SessionImpl.save(SessionImpl.java:960) [18:41:24.000]  at com.caucho.server.session.SessionImpl.saveAfterRequest(SessionImpl.java:946) [18:41:24.000]  at com.caucho.server.session.SessionImpl.finish(SessionImpl.java:908) [18:41:24.000]  at com.caucho.server.connection.AbstractHttpRequest.finish(AbstractHttpRequest.java:2506) [18:41:24.000]  at com.caucho.server.http.HttpRequest.finish(HttpRequest.java:1466) [18:41:24.000]  at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:212) [18:41:24.000]  at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:266) [18:41:24.000]  at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:269) [18:41:24.000]  at com.caucho.server.port.TcpConnection.run(TcpConnection.java:603) [18:41:24.000]  at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:721) [18:41:24.000]  at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:643) [18:41:24.000]  at java.lang.Thread.run(Thread.java:595) [18:47:31.281] java.lang.IllegalStateException: Table[srun_:2]: inode block 420000 has 0 fragment [18:47:31.281]  at com.caucho.db.store.Inode.stateError(Inode.java:1164) [18:47:31.281]  at com.caucho.db.store.Inode.remove(Inode.java:836) [18:47:31.281]  at com.caucho.db.store.Transaction.writeData(Transaction.java:568) [18:47:31.281]  at com.caucho.db.sql.QueryContext.unlock(QueryContext.java:537) [18:47:31.281]  at com.caucho.db.sql.RowIterateExpr.nextBlock(RowIterateExpr.java:86) [18:47:31.281]  at com.caucho.db.sql.Query.nextBlock(Query.java:721) [18:47:31.281]  at com.caucho.db.sql.Query.nextTuple(Query.java:698) [18:47:31.281]  at com.caucho.db.sql.DeleteQuery.execute(DeleteQuery.java:81) [18:47:31.281]  at com.caucho.db.jdbc.PreparedStatementImpl.execute(PreparedStatementImpl.java:345) [18:47:31.281]  at com.caucho.db.jdbc.PreparedStatementImpl.executeUpdate(PreparedStatementImpl.java:313) [18:47:31.281]  at com.caucho.server.cluster.FileBacking.clearOldObjects(FileBacking.java:270) [18:47:31.281]  at com.caucho.server.cluster.FileStore.clearOldObjects(FileStore.java:115) [18:47:31.281]  at com.caucho.server.cluster.StoreManager.handleAlarm(StoreManager.java:636) [18:47:31.281]  at com.caucho.util.Alarm.handleAlarm(Alarm.java:375) [18:47:31.281]  at com.caucho.util.Alarm.run(Alarm.java:345) [18:47:31.281]  at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:721) [18:47:31.281]  at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:643) [18:47:31.281]  at java.lang.Thread.run(Thread.java:595) [17:24:07.351] java.lang.IllegalStateException: block/fragment mixup [17:24:07.351]     at com.caucho.db.store.Inode.readBlockAddr(Inode.java:1047) [17:24:07.351]     at com.caucho.db.store.Inode.read(Inode.java:319) [17:24:07.351]     at com.caucho.db.store.BlobInputStream.read(BlobInputStream.java:114) [17:24:07.351]     at com.caucho.vfs.VfsStream.read(VfsStream.java:140) [17:24:07.351]     at com.caucho.vfs.Crc64Stream.read(Crc64Stream.java:84) [17:24:07.351]     at com.caucho.vfs.ReadStream.readBuffer(ReadStream.java:1015) [17:24:07.351]     at com.caucho.vfs.ReadStream.read(ReadStream.java:425) [17:24:07.351]     at java.io.ObjectInputStream$PeekInputStream.read(ObjectInputStream.java:2266) [17:24:07.351]     at java.io.ObjectInputStream$PeekInputStream.readFully(ObjectInputStream.java:2279) [17:24:07.351]     at java.io.ObjectInputStream$BlockDataInputStream.readShort(ObjectInputStream.java:2750) [17:24:07.351]     at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:780) [17:24:07.351]     at java.io.ObjectInputStream.&amp;lt;init&amp;gt;(ObjectInputStream.java:280) [17:24:07.351]     at com.caucho.server.session.SessionManager$DistributedObjectInputStream.&amp;lt;init&amp;gt;(SessionManager.java:1749) [17:24:07.351]     at com.caucho.server.session.SessionManager.load(SessionManager.java:1552) [17:24:07.351]     at com.caucho.server.cluster.ClusterObject.load(ClusterObject.java:299) [17:24:07.351]     at com.caucho.server.cluster.FileBacking.loadSelf(FileBacking.java:314) [17:24:07.351]     at com.caucho.server.cluster.FileStore.load(FileStore.java:147) [17:24:07.351]     at com.caucho.server.cluster.ClusterObject.load(ClusterObject.java:268) [17:24:07.351]     at com.caucho.server.session.SessionImpl.load(SessionImpl.java:774) [17:24:07.351]     at com.caucho.server.session.SessionManager.getSession(SessionManager.java:1363) [17:24:07.351]     at com.caucho.server.connection.AbstractHttpRequest.createSession(AbstractHttpRequest.java:1517) [17:24:07.351]     at com.caucho.server.connection.AbstractHttpRequest.getSession(AbstractHttpRequest.java:1326) [17:24:07.351]     at se.exder.servlet.SessionCacheFilter.doFilter(SessionCacheFilter.java:34) [17:24:07.351]     at com.caucho.server.dispatch.FilterFilterChain.doFilter(FilterFilterChain.java:87) [17:24:07.351]     at com.caucho.server.cache.CacheFilterChain.doFilter(CacheFilterChain.java:194) [17:24:07.351]     at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:187) [17:24:07.351]     at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:266) [17:24:07.351]     at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:270) [17:24:07.351]     at com.caucho.server.port.TcpConnection.run(TcpConnection.java:678) [17:24:07.351]     at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:721) [17:24:07.351]     at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:643) [17:24:07.351]     at java.lang.Thread.run(Thread.java:619) [17:24:07.355] java.lang.ArrayIndexOutOfBoundsException: 16515117 [17:24:07.355]     at com.caucho.db.store.Store.deleteFragment(Store.java:1041) [17:24:07.355]     at com.caucho.db.store.Inode.remove(Inode.java:844) [17:24:07.355]     at com.caucho.db.store.Transaction.writeData(Transaction.java:568) [17:24:07.355]     at com.caucho.db.sql.QueryContext.unlock(QueryContext.java:537) [17:24:07.355]     at com.caucho.db.sql.UpdateQuery.execute(UpdateQuery.java:118) [17:24:07.355]     at com.caucho.db.jdbc.PreparedStatementImpl.execute(PreparedStatementImpl.java:345) [17:24:07.355]     at com.caucho.db.jdbc.PreparedStatementImpl.executeUpdate(PreparedStatementImpl.java:313) [17:24:07.355]     at com.caucho.server.cluster.FileBacking.storeSelfUpdate(FileBacking.java:524) [17:24:07.355]     at com.caucho.server.cluster.FileBacking.storeSelf(FileBacking.java:474) [17:24:07.355]     at com.caucho.server.cluster.FileStore.store(FileStore.java:169) [17:24:07.355]     at com.caucho.server.cluster.ClusterObject.store(ClusterObject.java:414) [17:24:07.355]     at com.caucho.server.session.SessionImpl.save(SessionImpl.java:952) [17:24:07.355]     at com.caucho.server.connection.AbstractHttpRequest.saveSession(AbstractHttpRequest.java:2488) [17:24:07.355]     at com.caucho.server.connection.AbstractHttpResponse.sendRedirect(AbstractHttpResponse.java:655) [13:31:29.115] java.lang.IllegalStateException: Table[srun_:2]: inode block 420000 has invalid fragment ee800036ee807871 [13:31:29.115]     at com.caucho.db.store.Inode.stateError(Inode.java:1164) [13:31:29.115]     at com.caucho.db.store.Inode.remove(Inode.java:841) [13:31:29.115]     at com.caucho.db.store.Transaction.writeData(Transaction.java:568) [13:31:29.115]     at com.caucho.db.sql.QueryContext.unlock(QueryContext.java:537) [13:31:29.115]     at com.caucho.db.sql.UpdateQuery.execute(UpdateQuery.java:118) [13:31:29.115]     at com.caucho.db.jdbc.PreparedStatementImpl.execute(PreparedStatementImpl.java:345) [13:31:29.115]     at com.caucho.db.jdbc.PreparedStatementImpl.executeUpdate(PreparedStatementImpl.java:313) [13:31:29.115]     at com.caucho.server.cluster.FileBacking.storeSelfUpdate(FileBacking.java:524) [13:31:29.115]     at com.caucho.server.cluster.FileBacking.storeSelf(FileBacking.java:474) [13:31:29.115]     at com.caucho.server.cluster.FileStore.store(FileStore.java:169) [13:31:29.115]     at com.caucho.server.cluster.ClusterObject.store(ClusterObject.java:414) [13:31:29.115]     at com.caucho.server.session.SessionImpl.save(SessionImpl.java:952) [13:31:29.115]     at com.caucho.server.session.SessionImpl.saveAfterRequest(SessionImpl.java:938) [13:31:29.115]     at com.caucho.server.session.SessionImpl.finish(SessionImpl.java:900) [13:31:29.115]     at com.caucho.server.connection.AbstractHttpRequest.finish(AbstractHttpRequest.java:2509) [13:31:29.115]     at com.caucho.server.http.HttpRequest.finish(HttpRequest.java:1467) [13:31:29.115]     at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:219) [13:31:29.115]     at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:266) [13:31:29.115]     at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:270) [13:31:29.115]     at com.caucho.server.port.TcpConnection.run(TcpConnection.java:678) [13:31:29.115]     at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:721) [13:31:29.115]     at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:643) [13:31:29.115]     at java.lang.Thread.run(Thread.java:619) Thanks in advance, Mattias</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] inode block/fragment mixup???</header>
    <date>Thu Oct 23 19:07:59 CEST 2008</date>
    <body>Do you know how large the session is?  Also, does "finer" show anything interesting? There may be a limit at 64M of session data, but I doubt you're hitting that.  It's possible there's an off-by-one issue at one of the boundaries (since the data is split into fragments).  Does adding 1 to the session length still produce the same error? -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] inode block/fragment mixup???</header>
    <date>Fri Oct 24 20:31:52 CEST 2008</date>
    <body>Scott Ferguson wrote (2008-10-23 18:39): See below if there is anything you consider interesting. A quick test with session.setAttribute("foo", "bar") actually seemed to do the trick! Is there anything specific you would like me to try with regards to this? Here is the finer log: ... [18:00:06.234] Transaction[01:908024ea] committing [18:00:06.234] commit-local: [EMAIL PROTECTED] [18:00:06.328] idle PoolItem[jdbc/exder,7,ManagedConnectionImpl] [18:00:07.593] Table[srun_:2] allocating block 270 fragment [18:00:07.609] Table[srun_:2] allocating block 271 fragment [18:00:07.609] Table[srun_:2] allocating block 272 fragment (and so on...) [18:00:08.312] Table[srun_:2] allocating block 333 fragment [18:00:08.312] Table[srun_:2] allocating block 334 fragment [18:00:08.343] java.lang.IllegalStateException: block/fragment mixup [18:00:08.343] at com.caucho.db.store.Inode.writeBlockAddr(Inode.java:1078) [18:00:08.343] at com.caucho.db.store.Inode.appendBlock(Inode.java:492) [18:00:08.343] at com.caucho.db.store.Inode.append(Inode.java:388) [18:00:08.343] at com.caucho.db.store.BlobOutputStream.flushBlock(BlobOutputStream.java:188) [18:00:08.343] at com.caucho.db.store.BlobOutputStream.write(BlobOutputStream.java:117) [18:00:08.343] at com.caucho.db.table.BlobColumn.setStream(BlobColumn.java:179) [18:00:08.343] at com.caucho.db.table.BlobColumn.set(BlobColumn.java:267) [18:00:08.343] at com.caucho.db.sql.UpdateQuery.execute(UpdateQuery.java:110) [18:00:08.343] at com.caucho.db.jdbc.PreparedStatementImpl.execute(PreparedStatementImpl.java:345) [18:00:08.343] at com.caucho.db.jdbc.PreparedStatementImpl.executeUpdate(PreparedStatementImpl.java:313) [18:00:08.343] at com.caucho.server.cluster.FileBacking.storeSelfUpdate(FileBacking.java:524) [18:00:08.343] at com.caucho.server.cluster.FileBacking.storeSelf(FileBacking.java:474) [18:00:08.343] at com.caucho.server.cluster.FileStore.store(FileStore.java:169) [18:00:08.343] at com.caucho.server.cluster.ClusterObject.store(ClusterObject.java:414) [18:00:08.343] at com.caucho.server.session.SessionImpl.save(SessionImpl.java:960) [18:00:08.343] at com.caucho.server.session.SessionImpl.saveAfterRequest(SessionImpl.java:946) [18:00:08.343] at com.caucho.server.session.SessionImpl.finish(SessionImpl.java:908) [18:00:08.343] at com.caucho.server.connection.AbstractHttpRequest.finish(AbstractHttpRequest.java:2506) [18:00:08.343] at com.caucho.server.http.HttpRequest.finish(HttpRequest.java:1466) [18:00:08.343] at com.caucho.server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:212) [18:00:08.343] at com.caucho.server.dispatch.ServletInvocation.service(ServletInvocation.java:266) [18:00:08.343] at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java:269) [18:00:08.343] at com.caucho.server.port.TcpConnection.run(TcpConnection.java:603) [18:00:08.343] at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:721) [18:00:08.343] at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:643) [18:00:08.343] at java.lang.Thread.run(Thread.java:595) [18:00:08.421] Http[15] no-keepalive [18:00:08.421] Tcp[,15] closing connection TcpConnection[id=http--80-15,socket=JniSocketImpl$15452578[90827352,fd=4488], port=Port[null:80]], total=13 (... six more...) [18:01:06.890] Tcp[,6] com.caucho.vfs.ClientDisconnectException: client timeout [18:01:06.890] Tcp[,6] closing connection TcpConnection[id=http--80-6,socket=JniSocketImpl$5256758[90830936,fd=4076],por t=Port[null:80]], total=11 [18:03:04.875] Database[/c:/temp/resin-sessions]: DELETE FROM srun_ WHERE access_time + 5 * expire_interval / 4 &amp;lt; ? [18:03:04.875] where-1: static null [18:03:04.875] where-0: FromItem[srun_ AS srun_] ((srun_.access_time + ((5 * srun_.expire_interval) / 4)) &amp;lt; ?0) [18:03:04.875] java.lang.ArrayIndexOutOfBoundsException: 48685569 [18:03:04.875] at com.caucho.db.store.Store.deleteFragment(Store.java:1035) [18:03:04.875] at com.caucho.db.store.Inode.remove(Inode.java:844) [18:03:04.875] at com.caucho.db.store.Transaction.writeData(Transaction.java:568) [18:03:04.875] at com.caucho.db.sql.QueryContext.unlock(QueryContext.java:537) [18:03:04.875] at com.caucho.db.sql.RowIterateExpr.nextBlock(RowIterateExpr.java:86) [18:03:04.875] at com.caucho.db.sql.Query.nextBlock(Query.java:721) [18:03:04.875] at com.caucho.db.sql.Query.nextTuple(Query.java:698) [18:03:04.875] at com.caucho.db.sql.DeleteQuery.execute(DeleteQuery.java:81) [18:03:04.875] at com.caucho.db.jdbc.PreparedStatementImpl.execute(PreparedStatementImpl.java:345) [18:03:04.875] at com.caucho.db.jdbc.PreparedStatementImpl.executeUpdate(PreparedStatementImpl.java:313) [18:03:04.875] at com.caucho.server.cluster.FileBacking.clearOldObjects(FileBacking.java:270) [18:03:04.875] at com.caucho.server.cluster.FileStore.clearOldObjects(FileStore.java:115) [18:03:04.875] at com.caucho.server.cluster.StoreManager.handleAlarm(StoreManager.java:636) [18:03:04.875] at com.caucho.util.Alarm.handleAlarm(Alarm.java:375) [18:03:04.875] at com.caucho.util.Alarm.run(Alarm.java:345) [18:03:04.875] at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:721) [18:03:04.875] at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:643) [18:03:04.875] at java.lang.Thread.run(Thread.java:595) [18:03:05.750] FileBacking[srun_] purged 1 old sessions ... [18:08:05.390] Database[/c:/temp/resin-sessions]: DELETE FROM srun_ WHERE access_time + 5 * expire_interval / 4 &amp;lt; ? [18:08:05.390] where-1: static null [18:08:05.390] where-0: FromItem[srun_ AS srun_] ((srun_.access_time + ((5 * srun_.expire_interval) / 4)) &amp;lt; ?0) ...</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] inode block/fragment mixup???</header>
    <date>Tue Oct 28 06:50:59 CET 2008</date>
    <body>I have now filed a report here: http://bugs.caucho.com/view.php?id=3025 /Mattias Mattias Jiderhamn wrote (2008-10-24 20:30): http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] inode block/fragment mixup???</header>
    <date>Tue Oct 28 17:37:59 CET 2008</date>
    <body>I have now filed a report here: http://bugs.caucho.com/view.php ? id=3025 Thanks.  I'd already filed a bug, but this has more detail. -- Scott /Mattias Mattias Jiderhamn wrote (2008-10-24 20:30): Scott Ferguson wrote (2008-10-23 18:39): We have a strange problem with Resin that looks like a bug but might be some configuration issue. We hit the bug while storing more than the usual amount of data in a session (during a process that takes quite a lot of time). If we narrow things down so we store the same kind of data, although not as much (and not using so much time), the error does not come about. The symptoms are that the slow request seems to finish correcly and the data is returned to the browser, however on the next request the session does no longer exist. Other sessions does not seem to be affected. There are errors in the log file which makes me believe the session is lost during serializing/deserializing. With the same input data, the error is always reproducible. Do you know how large the session is? Also, does "finer" show anything interesting? See below if there is anything you consider interesting. There may be a limit at 64M of session data, but I doubt you're hitting that.  It's possible there's an off-by-one issue at one of the boundaries (since the data is split into fragments).  Does adding 1 to the session length still produce the same error? A quick test with session.setAttribute("foo", "bar") actually seemed to do the trick! Is there anything specific you would like me to try with regards to this? Here is the finer log: ... [18:00:06.234] Transaction[01:908024ea] committing [18:00:06.234] commit-local: com.caucho.sql.ManagedConnectionImpl [EMAIL PROTECTED] [18:00:06.328] idle PoolItem[jdbc/exder,7,ManagedConnectionImpl] [18:00:07.593] Table[srun_:2] allocating block 270 fragment [18:00:07.609] Table[srun_:2] allocating block 271 fragment [18:00:07.609] Table[srun_:2] allocating block 272 fragment (and so on...) [18:00:08.312] Table[srun_:2] allocating block 333 fragment [18:00:08.312] Table[srun_:2] allocating block 334 fragment [18:00:08.343] java.lang.IllegalStateException: block/fragment mixup [18:00:08.343]  at com.caucho.db.store.Inode.writeBlockAddr(Inode.java:1078) [18:00:08.343]  at com.caucho.db.store.Inode.appendBlock(Inode.java: 492) [18:00:08.343]  at com.caucho.db.store.Inode.append(Inode.java:388) [18:00:08.343]  at com .caucho.db.store.BlobOutputStream.flushBlock(BlobOutputStream.java: 188) [18:00:08.343]  at com.caucho.db.store.BlobOutputStream.write(BlobOutputStream.java:117) [18:00:08.343]  at com.caucho.db.table.BlobColumn.setStream(BlobColumn.java:179) [18:00:08.343]  at com.caucho.db.table.BlobColumn.set(BlobColumn.java:267) [18:00:08.343]  at com.caucho.db.sql.UpdateQuery.execute(UpdateQuery.java:110) [18:00:08.343]  at com .caucho .db.jdbc.PreparedStatementImpl.execute(PreparedStatementImpl.java: 345) [18:00:08.343]  at com .caucho .db .jdbc .PreparedStatementImpl.executeUpdate(PreparedStatementImpl.java:313) [18:00:08.343]  at com .caucho.server.cluster.FileBacking.storeSelfUpdate(FileBacking.java: 524) [18:00:08.343]  at com.caucho.server.cluster.FileBacking.storeSelf(FileBacking.java:474) [18:00:08.343]  at com.caucho.server.cluster.FileStore.store(FileStore.java:169) [18:00:08.343]  at com.caucho.server.cluster.ClusterObject.store(ClusterObject.java:414) [18:00:08.343]  at com.caucho.server.session.SessionImpl.save(SessionImpl.java:960) [18:00:08.343]  at com .caucho .server.session.SessionImpl.saveAfterRequest(SessionImpl.java:946) [18:00:08.343]  at com.caucho.server.session.SessionImpl.finish(SessionImpl.java:908) [18:00:08.343]  at com .caucho .server .connection.AbstractHttpRequest.finish(AbstractHttpRequest.java:2506) [18:00:08.343]  at com.caucho.server.http.HttpRequest.finish(HttpRequest.java:1466) [18:00:08.343]  at com .caucho .server.webapp.WebAppFilterChain.doFilter(WebAppFilterChain.java:212) [18:00:08.343]  at com .caucho .server.dispatch.ServletInvocation.service(ServletInvocation.java: 266) [18:00:08.343]  at com.caucho.server.http.HttpRequest.handleRequest(HttpRequest.java: 269) [18:00:08.343]  at com.caucho.server.port.TcpConnection.run(TcpConnection.java:603) [18:00:08.343]  at com.caucho.util.ThreadPool $Item.runTasks(ThreadPool.java:721) [18:00:08.343]  at com.caucho.util.ThreadPool $Item.run(ThreadPool.java:643) [18:00:08.343]  at java.lang.Thread.run(Thread.java:595) [18:00:08.421] Http[15] no-keepalive [18:00:08.421] Tcp[,15] closing connection TcpConnection[id=http--80-15,socket=JniSocketImpl $15452578[90827352,fd=4488], port=Port[null:80]], total=13 (... six more...) [18:01:06.890] Tcp[,6] com.caucho.vfs.ClientDisconnectException: client timeout [18:01:06.890] Tcp[,6] closing connection TcpConnection[id=http--80-6,socket=JniSocketImpl $5256758[90830936,fd=4076],por t=Port[null:80]], total=11 [18:03:04.875] Database[/c:/temp/resin-sessions]: DELETE FROM srun_ WHERE access_time + 5 * expire_interval / 4 &amp;lt; ? [18:03:04.875] where-1: static null [18:03:04.875] where-0: FromItem[srun_ AS srun_] ((srun_.access_time + ((5 * srun_.expire_interval) / 4)) &amp;lt; ?0) [18:03:04.875] java.lang.ArrayIndexOutOfBoundsException: 48685569 [18:03:04.875]  at com.caucho.db.store.Store.deleteFragment(Store.java:1035) [18:03:04.875]  at com.caucho.db.store.Inode.remove(Inode.java:844) [18:03:04.875]  at com.caucho.db.store.Transaction.writeData(Transaction.java:568) [18:03:04.875]  at com.caucho.db.sql.QueryContext.unlock(QueryContext.java:537) [18:03:04.875]  at com.caucho.db.sql.RowIterateExpr.nextBlock(RowIterateExpr.java:86) [18:03:04.875]  at com.caucho.db.sql.Query.nextBlock(Query.java:721) [18:03:04.875]  at com.caucho.db.sql.Query.nextTuple(Query.java:698) [18:03:04.875]  at com.caucho.db.sql.DeleteQuery.execute(DeleteQuery.java:81) [18:03:04.875]  at com .caucho .db.jdbc.PreparedStatementImpl.execute(PreparedStatementImpl.java: 345) [18:03:04.875]  at com .caucho .db .jdbc .PreparedStatementImpl.executeUpdate(PreparedStatementImpl.java:313) [18:03:04.875]  at com .caucho.server.cluster.FileBacking.clearOldObjects(FileBacking.java: 270) [18:03:04.875]  at com.caucho.server.cluster.FileStore.clearOldObjects(FileStore.java: 115) [18:03:04.875]  at com .caucho.server.cluster.StoreManager.handleAlarm(StoreManager.java: 636) [18:03:04.875]  at com.caucho.util.Alarm.handleAlarm(Alarm.java:375) [18:03:04.875]  at com.caucho.util.Alarm.run(Alarm.java:345) [18:03:04.875]  at com.caucho.util.ThreadPool $Item.runTasks(ThreadPool.java:721) [18:03:04.875]  at com.caucho.util.ThreadPool $Item.run(ThreadPool.java:643) [18:03:04.875]  at java.lang.Thread.run(Thread.java:595) [18:03:05.750] FileBacking[srun_] purged 1 old sessions ... [18:08:05.390] Database[/c:/temp/resin-sessions]: DELETE FROM srun_ WHERE access_time + 5 * expire_interval / 4 &amp;lt; ? [18:08:05.390] where-1: static null [18:08:05.390] where-0: FromItem[srun_ AS srun_] ((srun_.access_time + ((5 * srun_.expire_interval) / 4)) &amp;lt; ?0) ...</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin 3.2.1 release notes</header>
    <date>Mon Oct 20 19:51:59 CEST 2008</date>
    <body>More complete notes are at http://caucho.com/resin/changes/resin-3.2.1.xtp and the changelog is at http://caucho.com/resin/changes/changes.xtp . Resin 3.2.1 is the development branch and is subject to large changes for each revision, including a fairly high probability of introduced bugs.   The Resin 3.2.x branch is the working branch for the upcoming JavaEE 6 specifications.  Since those specifications are still in the early draft stage, even the APIs may change from revision to revision.  Most deployments needing more stability will want to use the Resin 3.1.x branch. Resin 3.2.1 had three major changes: Quercus fixed a large number of accumulated bugs, the Hessian 2.0 draft and implementation had a major bytecode revision, and OSGi has been introduced as a mechanism for managing jars, libraries, and services. 1) Security - two potential security issues fixed in 3.2.1: *) a potential denial-of-service issue with mod_caucho and virtual hosts (main symptom is a very large /tmp/localhost_6800 file) *) a potential XSS issue with Resin's 404 involving UTF-7. We're also working on a 3.0 release for early next week including those fixes. 2) Quercus. *) We've added Moodle to our focus applications (Mediawiki, Wordpress and Drupal).  Moodle is an academic courseware framework that has become very popular. *) Many, many bug fixes. 3) Hessian 2.0 *) We're revising the Hessian 2.0 draft so we can finally submit it to the IETF.  The changes in the bytecode allocation are not compatible for earlier versions of the Hessian 2.0 draft, so you will need to update both clients and servers for Hessian 2.0. 4) OSGi support *) We're treating OSGi as a versioning manager for Resin's class loaders and jars, and as a service manager.  Each web-app has its own OSGi manager serving jars and services.  We'll be writing more details on how this works in the next few weeks.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin 3.2.1 release notes</header>
    <date>Tue Oct 21 13:27:03 CEST 2008</date>
    <body>One tiny point - currently the download page points the pro .zip to 3.2.1 but the pro tgz is still at 3.2.0.</body>
  </mail>
  <mail>
    <header>[Resin-interest] content-type's set</header>
    <date>Mon Oct 20 13:24:48 CEST 2008</date>
    <body>hi, In oder to set all page with the same charset, I want to set content-type in configure file (eg. resin.conf) ,rather than type "&amp;lt;%@ page contentType="text/html; charset=**"%&amp;gt;" in all .jsp file. how can I do? Are there the special filter in resin,that can transform the contentType of page? Thanks!</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] content-type's set</header>
    <date>Mon Oct 20 14:30:58 CEST 2008</date>
    <body>There is a small tutorial to build a full utf-8 application with resin/mysql here : http://www.architectedulogiciel.fr/tutorials/resinutf8.php http://maillist.caucho.com/mailman/listinfo/resin-interest -- Riccardo Cohen Architecte du Logiciel http://www.architectedulogiciel.fr +33 (0)6.09.83.64.49</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] content-type's set</header>
    <date>Tue Oct 21 05:15:56 CEST 2008</date>
    <body>http://www.architectedulogiciel.fr/tutorials/resinutf8.php I already read the page.but I only get a solution that use  the configure of encoding in resin.conf as instead of typing "&amp;lt;%@ page contentType="text/html; charset=**"%&amp;gt;" in  .jsp  file. thanks http://www.architectedulogiciel.fr/tutorials/resinutf8.php http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] content-type's set</header>
    <date>Tue Oct 21 06:10:03 CEST 2008</date>
    <body>http://caucho.com/resin/doc/env-tags.xtp#character-encoding -Knut http://www.architectedulogiciel.fr/tutorials/resinutf8.php http://www.architectedulogiciel.fr/tutorials/resinutf8.php http://maillist.caucho.com/mailman/listinfo/resin-interest http://www.architectedulogiciel.fr http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] resin-maven-plugin / dependencies</header>
    <date>Mon Oct 20 07:08:00 CEST 2008</date>
    <body>Hi, most of the resin-maven-plugins of version &amp;gt; 3.1.6 lack dependencies in the caucho m2 repository. E.g., these are missing for the 3.2.1 branch: com.caucho:resin-ejb:jar:3.2.1 com.caucho:resin-j2ee-management:jar:3.2.1 com.caucho:resin-jca:jar:3.2.1 com.caucho:resin-jms:jar:3.2.1 com.caucho:resin-jsdk:jar:3.2.1 com.caucho:resin-jstl:jar:3.2.1 com.caucho:resin-jpa:jar:3.2.1 com.caucho:resin-jta:jar:3.2.1 com.caucho:resin-jws:jar:3.2.1 com.caucho:resin-support:jar:3.2.1 com.caucho:resin-webbeans:jar:3.2.1 Also, v3.1.7a isn't in the repository as well. Could you take a look at it? Thanks! Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>[Resin-interest]  Help! How to fix the error when staring Resin, `org.apache.axis2.transport.http.AxisServlet' is not a known servlet?</header>
    <date>Sat Oct 18 05:18:12 CEST 2008</date>
    <body>Hi all, Recently I tried to integrated Apache Axis2 to my web app using Resin pro 3.0.24. Java version is jdk1.5.0_16. Basically I copy all the needed Axis2 jar files to myApp/WEB-INF/lib and added the following mapping to web.xml But when I start Resin, the following error showed up. WEB-INF/web.xml:145: `org.apache.axis2.transport.http.AxisServlet' is not a known servlet. Servlets belong in the classpath, often in WEB-INF/classes. IN web.xml, I have another mapping for another class whose jar also in WEB-INF/lib directory and it works just fine. Meaning the Axis.jar that includes the AxisServlet.class is definitely in the classpath. Can anyone tell me what's wrong and how to fix the problem? I'd really appreciate it. thanks in advance, -tian -- View this message in context: http://www.nabble.com/Help%21-How-to-fix-the-error-when-staring-Resin%2C-%60org.apache.axis2.transport.http.AxisServlet%27-is-not-a-known-servlet--tp20043802p20043802.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Looking for build-common.xml</header>
    <date>Fri Oct 17 23:49:29 CEST 2008</date>
    <body>Basically have downloaded resin-3.2.0-src.zip and loaded it into Eclipse for build. Have build.xml from zip but can't find subject xml file in this src distribution nor in previous distribution. Pretty extensive search of site and archives failed to reveal availability of subject file. Download location would be much appreciated. Email Confidentiality Notice: The information contained in this transmission is confidential, proprietary or privileged and may be subject to protection under the law, including the Health Insurance Portability and Accountability Act (HIPAA). The message is intended for the sole use of the individual or  entity to whom it is addressed.  If you are not the intended recipient, you are notified that any use, distribution or copying of the message is strictly prohibited and may subject you to criminal or civil penalties.  If you received this transmission in error, please contact the sender immediately by replying to this email and delete the material from any  computer.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Looking for build-common.xml</header>
    <date>Sat Oct 18 00:14:34 CEST 2008</date>
    <body>Basically have downloaded resin-3.2.0-src.zip and loaded it into Eclipse for build. Have build.xml from zip but can't find subject xml file in this src distribution nor in previous distribution. Pretty extensive search of site and archives failed to reveal availability of subject file. Thanks.  We split build.xml into two pieces, but didn't add the build- common.xml to the distribution.  It'll be changed in 3.2.1. -- Scott Download location would be much appreciated. Email Confidentiality Notice: The information contained in this transmission is confidential, proprietary or privileged and may be subject to protection under the law, including the Health Insurance Portability and Accountability Act (HIPAA). The message is intended for the sole use of the individual or entity to whom it is addressed. If you are not the intended recipient, you are notified that any use, distribution or copying of the message is strictly prohibited and may subject you to criminal or civil penalties. If you received this transmission in error, please contact the sender immediately by replying to this email and delete the material from any computer. _______________________________________________ resin-interest mailing list resin-interest@caucho.com http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Form data encoding different than server encoding</header>
    <date>Fri Oct 17 11:00:46 CEST 2008</date>
    <body>How would I go about posting a form on a page using UTF-8 encoding to a Resin instance using ISO-8859-1 encoding...? Resin does not seem to support the hidden "_charset_" parameter workaround. /Mattias</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Form data encoding different than server	encoding</header>
    <date>Fri Oct 17 11:24:48 CEST 2008</date>
    <body>You can insert this in your page http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Form data encoding different than server	encoding</header>
    <date>Fri Oct 17 11:31:49 CEST 2008</date>
    <body>Well I simplified a bit too much. The same servlet handles POSTs from two different servers, one using UTF-8 and one (the local) using ISO-8859-1. So I cannot assume it is always UTF-8. My best shots so far: - Add a parameter telling what encoding is used and re-encode strings manually when needed. - Look at the referrer header to see what server is posting... /Mattas Andrea Sodomaco wrote (2008-10-17 11:24):</body>
  </mail>
  <mail>
    <header>[Resin-interest] unable to restart resin</header>
    <date>Fri Oct 17 08:19:30 CEST 2008</date>
    <body>Hello, I try to restart resin by calling the (unmodified) httpd.sh script like so: $RESIN_HOME/bin/httpd.sh -server app-a  restart and get: Can't start new task because of old task 'WatchdogTask[Watchdog[app-a]]' When calling the same statement again resin starts. Any idea what the reason might be and how to resolve it? We use resin pro 3.1.6 Kind regards, Martin "The information in this e-mail and in any attachments is confidential and intended solely for the attention and use of the named addressee(s). This information may be subject to legal, professional or other privilege and further distribution of it is strictly prohibited without our authority. If you are not the intended recipient, you are not authorised to and must not disclose, copy, distribute, or retain this message or any part of it, and should notify us immediately. This footnote also confirms that this email has been automatically scanned for the presence of computer viruses, profanities and certain file types."</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin/Quercus with PHP/Wordpress</header>
    <date>Thu Oct 16 19:06:45 CEST 2008</date>
    <body>Hello all, If there is anyone with experience in configuring resin/quercus to run Wordpress, would you mind contacting me? I'm specifically working with WordPress MU and previously had it running successfully with Apache. I've setup a virtual host and can get the initial index page to load, but all links from that page produce 404s. I'm guessing there is a url rewriting issue perhaps? I've been trying to follow this page ( http://wiki.caucho.com/Quercus:_Wordpress_Mu ) and various other pages online. At the moment, I'm using Wordpress MU 1.2.1 and Resin Pro 3.1.2. I'm going to try to upgrade to Resin Pro 3.2 as the url rewriting section from the wiki url above doesn't seem to be working. Thanks, -Dan</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin/Quercus with PHP/Wordpress</header>
    <date>Thu Oct 16 19:18:44 CEST 2008</date>
    <body>I ran into a problem in Resin Pro 3.1.2 where the forward tag in has a bug and doesn't work.  I believe this was fixed in 3.1.6. -Jason http://wiki.caucho.com/Quercus:_Wordpress_Mu ) and various other pages http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin/Quercus with PHP/Wordpress</header>
    <date>Thu Oct 16 19:54:58 CEST 2008</date>
    <body>For Quercus, it's a good idea to keep up with recent versions of Resin.  Each release includes a large number of Quercus bug fixes. The number of details and corner cases in PHP is amazingly high. -- Scott http://wiki.caucho.com/Quercus:_Wordpress_Mu ) and various other http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin/Quercus with PHP/Wordpress</header>
    <date>Thu Oct 16 20:31:12 CEST 2008</date>
    <body>I second Scott's recommendation. My experience with Resin, Quercus, and Wordpress is that you pretty much have to be using 3.2.x if you want to get WP working properly. Rob http://wiki.caucho.com/Quercus:_Wordpress_Mu ) and various other</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin/Quercus with PHP/Wordpress</header>
    <date>Thu Oct 16 22:14:01 CEST 2008</date>
    <body>Dan, I was the one who wrote the Wordpress Mu wiki page and you'll notice that it explicitly mentions 3.2.0, so Rob and Scott are both right that you'll need to use at least Resin/Quercus 3.2.0.  If you can wait a couple of days for 3.2.1, you'll be in even better shape. Emil http://wiki.caucho.com/Quercus:_Wordpress_Mu ) and various other http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:[EMAIL PROTECTED] http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Hessian Web Services</body>
  </mail>
  <mail>
    <header>[Resin-interest] BAM presentation next week?</header>
    <date>Thu Oct 16 23:36:31 CEST 2008</date>
    <body>Emil, what is the url for your upcoming presentation on Bam in bay area again? I had it, signed up, .... then lost it. .V</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] BAM presentation next week?</header>
    <date>Fri Oct 17 17:32:27 CEST 2008</date>
    <body>It's at the Silicon Valley Code Camp, but not until November 8 &amp;amp; 9: http://www.siliconvalley-codecamp.com/ I'll also be talking about Quercus there.  Should be a good time. :-) Emil ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:[EMAIL PROTECTED] http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Hessian Web Services</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin/Quercus with PHP/Wordpress</header>
    <date>Fri Oct 17 16:56:58 CEST 2008</date>
    <body>Thanks for the replies. I upgraded to resin pro 3.2.s081008 and have gotten a bit further. I am seeing this in the jvm-default.log quite a bit: com/caucho/quercus/env/InternStringValue com/caucho/quercus/env/InternStringValue Anyone know what causes this and if it's anything to be concerned about?</body>
  </mail>
  <mail>
    <header>[Resin-interest] 0002988: OpenSSL timeout</header>
    <date>Thu Oct 16 16:57:43 CEST 2008</date>
    <body>How can we gain access to this fix?  Thanks much, Tom</body>
  </mail>
  <mail>
    <header>[Resin-interest] Amber, EntityManagerFactory &amp;amp; JNDI-Lookup</header>
    <date>Wed Oct 15 19:15:01 CEST 2008</date>
    <body>Hi, I'm currently a bit puzzled since I don't get to work what yesterday has already. As I understand it should be possible to lookup an EntityManagerFactory via JNDI as java:comp/env/persistence/PersistenceUnit/xxx - but I just can't get that to work. My persistence.xml has in it. resin-web.xml contains: The data-source is defined as well, so everything should be fine. But starting the application gives me: [18:56:46.431] Compiling de/footprint/domreg/persistence/entities/Rezept__ResinExt.java [18:56:46.431] Compiling de/footprint/domreg/persistence/entities/Zutat__ResinExt.java [18:56:47.819] Note: /usr/local/www/services/domreg/html/WEB-INF/work/pre-enhance/de/footprint/domreg/persistence/entities/Rezept__R esinExt.java uses unchecked or unsafe operations. [18:56:47.819] Note: Recompile with -Xlint:unchecked for details. [18:56:47.860] Amber enhancing class de.footprint.domreg.persistence.entities.Rezept [18:56:47.922] Compiling de/footprint/domreg/persistence/entities/Rezept__ResinExt.java [18:56:48.567] Note: /usr/local/www/services/domreg/html/WEB-INF/work/pre-enhance/de/footprint/domreg/persistence/entities/Rezept__R esinExt.java uses unchecked or unsafe operations. [18:56:48.567] Note: Recompile with -Xlint:unchecked for details. [18:56:48.697] Amber enhancing class de.footprint.domreg.persistence.entities.Zutat [18:56:48.730] Compiling de/footprint/domreg/persistence/entities/Zutat__ResinExt.java 18:56:50.438 INFO  [reg.web.application.DomainRegistryApplication] - Application init... 18:56:50.542 INFO  [application.DomainRegistryApplication$$anon$1] - Configuring application bindings... javax.naming.NameNotFoundException: java:comp/env/persistence/PersistenceUnit/DomainRegistryService Manual EMF Which means that looking up the PersistenceUnit doesn't work. I can manually create the EntityManagerFactory with Persistence.createEntityManagerFactory( "DomainRegistryService" ) though. Queries are running with the manual setup (only lazy fetches aren't resolved this way!). I'm running resin 3.1.7 pro. Can someone give me a hint what I'm doing wrong?! Also - when I change the persistence-provider to eclipselink, will Amber put then the created EntityManagerFactory also into the JNDI context? Thanks in advance! Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Amber, EntityManagerFactory &amp;amp; JNDI-Lookup</header>
    <date>Thu Oct 16 02:01:44 CEST 2008</date>
    <body>The official JavaEE JNDI system is really weird.  (I believe it's getting changed for JavaEE 6, but that spec is still in early draft.) Technically, the persistence.xml scanning does not automatically populate JNDI with the EntityManager.  It populates an app-server dependent space (in Resin it's WebBeans) that's available for injection using @PersistenceUnit and @PersistenceContext. If you have a @PersistenceUnit or @PersistenceContext (or &amp;lt;persistence- unit&amp;gt; or &amp;lt;persistence-context&amp;gt; in your web.xml), those declarations populate the JNDI space with their JNDI name.  So you're technically missing a JNDI linking step. Personally, I'd stick with the injection annotations when possible and avoid JNDI, since JNDI is really a previous-technology solution. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Amber, EntityManagerFactory &amp;amp; JNDI-Lookup</header>
    <date>Thu Oct 16 07:27:57 CEST 2008</date>
    <body>Hi Scott, the wiki on http://wiki.caucho.com/Amber:_EntityManagerFactory says: -- In Amber, the EntityManagerFactory for a persistence unit is stored as "java:comp/env/persistence/PersistenceUnit/xxx", where "xxx" is the name of the persistence unit. -- Could you give me an example on how to configure this with xml? All I got to work with resin-xml is &amp;lt;ejb-server&amp;gt; - which doesn't allow that keyword. @PersistenceUnit isn't injected in my JPA managing class - which I use to also be able to run the application in a non-j2ee environment. That leaves me only the option to get it somehow from the context. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>[Resin-interest] j2ee class not available in 3.2.0</header>
    <date>Wed Oct 15 17:24:40 CEST 2008</date>
    <body>Why are some of the j2ee standard classes not available in 3.2.0 that were available in 3.1.6?  As an example j2ee-management-10.jar all the classes in the javax.management.* packages are no longer available in the javaee-1.6.jar. Are there any plans to put them back in? iovation 111 SW Fifth Avenue Suite 3200 Portland, OR 97204 http://www.iovation.com/ The information contained in this email message may be privileged, confidential and protected from disclosure. If you are not the intended recipient, any dissemination, distribution or copying is strictly prohibited. If you think that you have received this email message in error, please notify the sender by reply email and delete the message and any attachments.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] j2ee class not available in 3.2.0</header>
    <date>Wed Oct 15 18:21:23 CEST 2008</date>
    <body>Why are some of the j2ee standard classes not available in 3.2.0 that were available in 3.1.6?  As an example j2ee-management-10.jar all the classes in the javax.management.* packages are no longer available in the javaee-1.6.jar.  Are there any plans to put them back in? JavaEE is splitting out the web profile from the enterprise profile for version 1.6, so the classes we'll be distributing would only be the web profile classes (plus any individual specifications we implement.)  Since javax.management is not part of the web profile (for the current draft specification, we've removed them from the distribution.) -- Scott iovation 111 SW Fifth Avenue Suite 3200 Portland, OR 97204 www.iovation.com The information contained in this email message may be privileged, confidential and protected from disclosure. If you are not the intended recipient, any dissemination, distribution or copying is strictly prohibited. If you think that you have received this email message in error, please notify the sender by reply email and delete the message and any attachments.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Logs not rotating correctly</header>
    <date>Wed Oct 15 13:35:09 CEST 2008</date>
    <body>Hi list, I've got a major issue with our live servers. The logs don't appear to be rotating correctly. This is filling the disk and causing performance issues. Resin is running as the resin user - therefore will have reduced permissions but, even so, this shouldn't be happening as that user is the owner of the folder that is being written to. Any ideas on how to sort this or is it a bug? [EMAIL PROTECTED] logs]# ls -l total 3431672 -rw-r--r-- 1 resin apache 1073979392 Oct 15 11:30 access.log -rw-r--r-- 1 resin apache 1073745275 Oct 15 00:50 access.log.20081015 -rw-r--r-- 1 resin apache 1073892465 Oct 15 00:52 access.log.20081015.0052 -rw-r--r-- 1 resin apache   49848320 Oct 15 00:54 access.log.20081015.0054 -rw-r--r-- 1 resin apache          0 Oct 15 00:56 access.log.20081015.0056 -rw-r--r-- 1 resin apache          0 Oct 15 00:58 access.log.20081015.0058 -rw-r--r-- 1 resin apache          0 Oct 15 01:00 access.log.20081015.0100 -rw-r--r-- 1 resin apache          0 Oct 15 01:02 access.log.20081015.0102 -rw-r--r-- 1 resin apache          0 Oct 15 01:04 access.log.20081015.0104 -rw-r--r-- 1 resin apache          0 Oct 15 01:06 access.log.20081015.0106 -rw-r--r-- 1 resin apache          0 Oct 15 01:08 access.log.20081015.0108 -rw-r--r-- 1 resin apache          0 Oct 15 01:10 access.log.20081015.0110 -rw-r--r-- 1 resin apache          0 Oct 15 01:12 access.log.20081015.0112 -rw-r--r-- 1 resin apache          0 Oct 15 01:14 access.log.20081015.0114 -rw-r--r-- 1 resin apache          0 Oct 15 01:16 access.log.20081015.0116 -rw-r--r-- 1 resin apache          0 Oct 15 01:18 access.log.20081015.0118 -rw-r--r-- 1 resin apache          0 Oct 15 01:20 access.log.20081015.0120 -rw-r--r-- 1 resin apache          0 Oct 15 01:22 access.log.20081015.0122 -rw-r--r-- 1 resin apache          0 Oct 15 01:24 access.log.20081015.0124 -rw-r--r-- 1 resin apache          0 Oct 15 01:26 access.log.20081015.0126 -rw-r--r-- 1 resin apache          0 Oct 15 01:28 access.log.20081015.0128 -rw-r--r-- 1 resin apache          0 Oct 15 01:30 access.log.20081015.0130 -rw-r--r-- 1 resin apache          0 Oct 15 01:32 access.log.20081015.0132 -rw-r--r-- 1 resin apache          0 Oct 15 01:34 access.log.20081015.0134 -rw-r--r-- 1 resin apache          0 Oct 15 01:36 access.log.20081015.0136 -rw-r--r-- 1 resin apache          0 Oct 15 01:38 access.log.20081015.0138 -rw-r--r-- 1 resin apache          0 Oct 15 01:40 access.log.20081015.0140 -rw-r--r-- 1 resin apache          0 Oct 15 01:42 access.log.20081015.0142 -rw-r--r-- 1 resin apache          0 Oct 15 01:44 access.log.20081015.0144 -rw-r--r-- 1 resin apache          0 Oct 15 01:46 access.log.20081015.0146 -rw-r--r-- 1 resin apache          0 Oct 15 01:48 access.log.20081015.0148 -rw-r--r-- 1 resin apache          0 Oct 15 01:50 access.log.20081015.0150 -rw-r--r-- 1 resin apache          0 Oct 15 01:52 access.log.20081015.0152 -rw-r--r-- 1 resin apache          0 Oct 15 01:54 access.log.20081015.0154 -rw-r--r-- 1 resin apache          0 Oct 15 01:56 access.log.20081015.0156 -rw-r--r-- 1 resin apache          0 Oct 15 01:58 access.log.20081015.0158 -rw-r--r-- 1 resin apache          0 Oct 15 02:00 access.log.20081015.0200 -rw-r--r-- 1 resin apache          0 Oct 15 02:02 access.log.20081015.0202 -rw-r--r-- 1 resin apache          0 Oct 15 02:04 access.log.20081015.0204 -rw-r--r-- 1 resin apache          0 Oct 15 02:06 access.log.20081015.0206 -rw-r--r-- 1 resin apache          0 Oct 15 02:08 access.log.20081015.0208 Richard Grantham Development ------------------------------- [EMAIL PROTECTED] Limehouse Software Ltd DDI: (020) 7566 3336 Main: (020) 7566 3320 Fax: (020) 7566 3321 Limehouse Software Ltd Bridewell Gate 9 Bridewell Place London EC4V 6AW Manchester Office: 3rd Floor, The Triangle, Exchange Square, Manchester M4 3TR Tel: (0161) 240 2440, Fax: (0161) 240 2441, ISDN: 08700 119 400 Check out Limehouse Software's innovative solutions www.limehousesoftware.co.uk - Transforming the way you publish and consult on information The information contained in this e-mail or in any attachments is confidential and is intended solely for the named addressee only. Access to this e-mail by anyone else is unauthorised. If you are not the intended recipient, please notify Limehouse Software Ltd immediately by returning this e-mail to sender or calling 020 7566 3320 and do not read, use or disseminate the information. Opinions expressed in this e-mail are those of the sender and not necessarily the company. Although an active anti-virus policy is operated, the company accepts no liability for any damage caused by any virus transmitted by this e-mail, including any attachments.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Logs not rotating correctly</header>
    <date>Wed Oct 15 16:54:23 CEST 2008</date>
    <body>My first question would be why would you want to maintain (on an ongoing basis) access logs for what appears to be a pretty busy server? An important piece of information that's missing is the version of resin that you're running. I know from personal experience that older versions, in the 2.x world, did not properly rotate log files. Also, what settings for the logs do you have configured in your resin configuration? If you're running resin with apache, then (usually) apache is in control of the access logs, not resin. It's hard to tell from what you've said how you have resin configured, standalone or with apache. Rob Hi list, I've got a major issue with our live servers. The logs don't appear to be rotating correctly. This is filling the disk and causing performance issues. Resin is running as the resin user - therefore will have reduced permissions but, even so, this shouldn't be happening as that user is the owner of the folder that is being written to. Any ideas on how to sort this or is it a bug? [EMAIL PROTECTED] logs]# ls -l total 3431672 -rw-r--r-- 1 resin apache 1073979392 Oct 15 11:30 access.log -rw-r--r-- 1 resin apache 1073745275 Oct 15 00:50 access.log.20081015 -rw-r--r-- 1 resin apache 1073892465 Oct 15 00:52 access.log. 20081015.0052 -rw-r--r-- 1 resin apache   49848320 Oct 15 00:54 access.log. 20081015.0054 -rw-r--r-- 1 resin apache          0 Oct 15 00:56 access.log. 20081015.0056 -rw-r--r-- 1 resin apache          0 Oct 15 00:58 access.log. 20081015.0058 -rw-r--r-- 1 resin apache          0 Oct 15 01:00 access.log. 20081015.0100 -rw-r--r-- 1 resin apache          0 Oct 15 01:02 access.log. 20081015.0102 -rw-r--r-- 1 resin apache          0 Oct 15 01:04 access.log. 20081015.0104 [rest deleted for brevity]</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Logs not rotating correctly</header>
    <date>Tue Oct 21 17:12:31 CEST 2008</date>
    <body>Sorry, you're right. All that is missing. I'm running Resin 3.1.7a. My log configuration is as follows: We don't run Resin with Apache as we use a hardware load balancer. What I see happening is the log being rotated but a file handle is maintained on access.log (it's all the logs mentioned above this is happening with, not just access.log) and not recycled after the log is rotated. The result is that the log is copied to another file but then not cleared. It continues to be written to. Hope that makes sense. rgds, Richard Richard Grantham Development ------------------------------- [EMAIL PROTECTED] Limehouse Software Ltd DDI: (020) 7566 3336 Main: (020) 7566 3320 Fax: (020) 7566 3321 Limehouse Software Ltd Bridewell Gate 9 Bridewell Place London EC4V 6AW Manchester Office: 3rd Floor, The Triangle, Exchange Square, Manchester M4 3TR Tel: (0161) 240 2440, Fax: (0161) 240 2441, ISDN: 08700 119 400 Check out Limehouse Software's innovative solutions www.limehousesoftware.co.uk - Transforming the way you publish and consult on information The information contained in this e-mail or in any attachments is confidential and is intended solely for the named addressee only. Access to this e-mail by anyone else is unauthorised. If you are not the intended recipient, please notify Limehouse Software Ltd immediately by returning this e-mail to sender or calling 020 7566 3320 and do not read, use or disseminate the information. Opinions expressed in this e-mail are those of the sender and not necessarily the company. Although an active anti-virus policy is operated, the company accepts no liability for any damage caused by any virus transmitted by this e-mail, including any attachments.-----Original Message----- From: [EMAIL PROTECTED] [ mailto:[EMAIL PROTECTED] On Behalf Of Rob Lockstone Sent: 15 October 2008 15:52 To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Logs not rotating correctly My first question would be why would you want to maintain (on an ongoing basis) access logs for what appears to be a pretty busy server? An important piece of information that's missing is the version of resin that you're running. I know from personal experience that older versions, in the 2.x world, did not properly rotate log files. Also, what settings for the logs do you have configured in your resin configuration? If you're running resin with apache, then (usually) apache is in control of the access logs, not resin. It's hard to tell from what you've said how you have resin configured, standalone or with apache. Rob Hi list, I've got a major issue with our live servers. The logs don't appear to be rotating correctly. This is filling the disk and causing performance issues. Resin is running as the resin user - therefore will have reduced permissions but, even so, this shouldn't be happening as that user is the owner of the folder that is being written to. Any ideas on how to sort this or is it a bug? [EMAIL PROTECTED] logs]# ls -l total 3431672 -rw-r--r-- 1 resin apache 1073979392 Oct 15 11:30 access.log -rw-r--r-- 1 resin apache 1073745275 Oct 15 00:50 access.log.20081015 -rw-r--r-- 1 resin apache 1073892465 Oct 15 00:52 access.log.20081015.0052 -rw-r--r-- 1 resin apache   49848320 Oct 15 00:54 access.log.20081015.0054 -rw-r--r-- 1 resin apache          0 Oct 15 00:56 access.log.20081015.0056 -rw-r--r-- 1 resin apache          0 Oct 15 00:58 access.log.20081015.0058 -rw-r--r-- 1 resin apache          0 Oct 15 01:00 access.log.20081015.0100 -rw-r--r-- 1 resin apache          0 Oct 15 01:02 access.log.20081015.0102 -rw-r--r-- 1 resin apache          0 Oct 15 01:04 access.log.20081015.0104 [rest deleted for brevity]</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Logs not rotating correctly</header>
    <date>Thu Oct 23 06:06:06 CEST 2008</date>
    <body>I don't have a definitive answer for you. We're not currently running 3.1.x, so I don't have any direct experience with it. Have you tried using rollover-size instead of rollover-period? Just to see if it makes any difference. With 3.0.x standalone (on Windows), rollover- size works fine. If you can't get it working, I'd recommend filing a bug at http://bugs.caucho.com/ Rob mailto:[EMAIL PROTECTED] On Behalf Of Rob Lockstone</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Logs not rotating correctly</header>
    <date>Thu Oct 30 10:50:15 CET 2008</date>
    <body>I think it could be related to http://bugs.caucho.com/view.php?id=2941 as I see this error in the logs: [2008-10-30 09:35:39.569] java.lang.UnsatisfiedLinkError: com.caucho.vfs.JniFilePathImpl.nativeTruncate([BI)I [2008-10-30 09:35:39.569]       at com.caucho.vfs.JniFilePathImpl.nativeTruncate(Native Method) [2008-10-30 09:35:39.569]       at com.caucho.vfs.JniFilePathImpl.truncate(JniFilePathImpl.java:363) [2008-10-30 09:35:39.569]       at com.caucho.vfs.Path.truncate(Path.java:940) [2008-10-30 09:35:39.569]       at com.caucho.log.AbstractRolloverLog.movePathToArchive(AbstractRolloverLog java:584) [2008-10-30 09:35:39.569]       at com.caucho.log.AbstractRolloverLog.access$100(AbstractRolloverLog.java:5 9) [2008-10-30 09:35:39.569]       at com.caucho.log.AbstractRolloverLog$ArchiveTask.run(AbstractRolloverLog.j ava:827) [2008-10-30 09:35:39.569]       at com.caucho.util.ThreadPool$Item.runTasks(ThreadPool.java:721) [2008-10-30 09:35:39.569]       at com.caucho.util.ThreadPool$Item.run(ThreadPool.java:643) [2008-10-30 09:35:39.569]       at java.lang.Thread.run(Thread.java:619) This is meant to have been fixed in 3.1.7a but that's what I'm running and I still see it. Richard Grantham Development ------------------------------- [EMAIL PROTECTED] Limehouse Software Ltd DDI: (020) 7566 3336 Main: (020) 7566 3320 Fax: (020) 7566 3321 Limehouse Software Ltd Bridewell Gate 9 Bridewell Place London EC4V 6AW Manchester Office: 3rd Floor, The Triangle, Exchange Square, Manchester M4 3TR Tel: (0161) 240 2440, Fax: (0161) 240 2441, ISDN: 08700 119 400 Check out Limehouse Software's innovative solutions www.limehousesoftware.co.uk - Transforming the way you publish and consult on information The information contained in this e-mail or in any attachments is confidential and is intended solely for the named addressee only. Access to this e-mail by anyone else is unauthorised. If you are not the intended recipient, please notify Limehouse Software Ltd immediately by returning this e-mail to sender or calling 020 7566 3320 and do not read, use or disseminate the information. Opinions expressed in this e-mail are those of the sender and not necessarily the company. Although an active anti-virus policy is operated, the company accepts no liability for any damage caused by any virus transmitted by this e-mail, including any attachments.-----Original Message----- From: [EMAIL PROTECTED] [ mailto:[EMAIL PROTECTED] On Behalf Of Rob Lockstone Sent: 23 October 2008 05:05 To: General Discussion for the Resin application server Subject: Re: [Resin-interest] Logs not rotating correctly I don't have a definitive answer for you. We're not currently running 3.1.x, so I don't have any direct experience with it. Have you tried using rollover-size instead of rollover-period? Just to see if it makes any difference. With 3.0.x standalone (on Windows), rollover- size works fine. If you can't get it working, I'd recommend filing a bug at http://bugs.caucho.com/ Rob mailto:[EMAIL PROTECTED] On Behalf Of Rob Lockstone appear user is</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Logs not rotating correctly</header>
    <date>Tue Oct 28 01:09:15 CET 2008</date>
    <body>Hi Richard, I've filed a bug for this here: http://bugs.caucho.com/view.php?id=3024 If you discover more information, please add it to this bug report. In the meantime, try changing the archive-format to have a filename with a .gz extension to have Resin automatically gzip the rotated logs. This should help with the disk filling up. Take care, Emil mailto:[EMAIL PROTECTED] On Behalf Of Rob Lockstone http://maillist.caucho.com/mailman/listinfo/resin-interest ============================================================ Emil Ong Chief Evangelist Caucho Technology, Inc. Tel. (858) 456-0300 mailto:[EMAIL PROTECTED] http://blog.caucho.com/ Caucho: Reliable Open Source --&amp;gt; Resin: application server --&amp;gt; Quercus: PHP in Java --&amp;gt; Hessian Web Services</body>
  </mail>
  <mail>
    <header>[Resin-interest] Amber &amp;amp; SessionListeners</header>
    <date>Wed Oct 15 12:51:59 CEST 2008</date>
    <body>Hi, is it possible to register SessionListeners with Amber to e.g. embed Compass ( http://www.compass-project.org/ ) with it? I haven't found any API for Amber. Best regards, --- Jan.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Amber &amp;amp; SessionListeners</header>
    <date>Wed Oct 15 18:06:09 CEST 2008</date>
    <body>http://www.compass-project.org/ ) with it? I'm not sure what would be required.  You can use @In or @PersistenceContext in a SessionListener to get an EntityManager or EntityManagerFactory. -- Scott http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [Resin 0002988]: OpenSSL timeout</header>
    <date>Wed Oct 15 06:58:47 CEST 2008</date>
    <body>Since it's not marked on the bug in Mantis, and I can't remember, was this issue found in the 3.0.x tree? If so, does it affect all versions? Thanks, Matt http://bugs.caucho.com/view.php?id=2988</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] [Resin 0002988]: OpenSSL timeout</header>
    <date>Wed Oct 15 18:04:09 CEST 2008</date>
    <body>It affects all versions.  I've just made changes to all the trees. -- Scott http://bugs.caucho.com/view.php?id=2988 http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Resin inside VMWare Player</header>
    <date>Tue Oct 14 22:52:36 CEST 2008</date>
    <body>I've installed Resin 3.2.0 in a minimal CentOS running inside VMWare Player 2.5, but I can't hit the running Resin in the VM from the host machine. The VM is running in 'Bridged' mode, so it grabs a DHCP-assigned IP address for the local LAN.  I can SSH into the VM through that IP address.  I can also wget content from resin from within the VM, so resin is clearly running. Is there anything in the default resin.xml that would cause this?  All of the address attributes look okay. Any ideas appreciated! Regards, Michael</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin inside VMWare Player</header>
    <date>Tue Oct 14 22:57:38 CEST 2008</date>
    <body>you checked all the obvious stuff like iptables config, etc.?  I use vmware ws for resin dev, running FC6.  works good. http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Resin inside VMWare Player</header>
    <date>Tue Oct 14 23:26:50 CEST 2008</date>
    <body>No, of course not!  I come from the world of Windows, where servers are an implied donation to the botnet community.  Closed source, open ports. :-) Thanks for the tip, that was the problem. Michael http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
  <mail>
    <header>[Resin-interest] Re sin And Groovy</header>
    <date>Tue Oct 14 18:16:39 CEST 2008</date>
    <body>Is anyone successfully using Groovy with Resin ? What does your resin.conf look like ? This is on the resin website, but it doesn't work for me in 3.1.5. When it gets to a groovy file the compilation just stops or times out. resin.conf compiler="groovyc" -- View this message in context: http://www.nabble.com/Resin-And-Groovy-tp19976910p19976910.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re sin And Groovy</header>
    <date>Tue Oct 14 18:26:47 CEST 2008</date>
    <body>I do, but I compile all my groovy code into classes with Ant and embed them in our .war file deployment (We're mostly Java). I haven't tried to run groovy scripts directly like you mention - I believe I did get a demo of grails going at one point, but it was probably 3.1.3. Ryan ----- Original Message ----- To: resin-interest@caucho.com Sent: Tuesday, October 14, 2008 11:15:12 AM GMT -06:00 US/Canada Central Subject: [Resin-interest] Re sin And Groovy Is anyone successfully using Groovy with Resin ? What does your resin.conf look like ? This is on the resin website, but it doesn't work for me in 3.1.5. When it gets to a groovy file the compilation just stops or times out. resin.conf compiler="groovyc" -- View this message in context: http://www.nabble.com/Resin-And-Groovy-tp19976910p19976910.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re sin And Groovy</header>
    <date>Tue Oct 14 18:30:49 CEST 2008</date>
    <body>Yeah, it works for me too all pre-compiled, but I'm trying to get a better development environment. Resin will compile your java classes and reload changes and supposedly do this with groovy too, but I've not been able to get it to work. -- View this message in context: http://www.nabble.com/Resin-And-Groovy-tp19976910p19977195.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re sin And Groovy</header>
    <date>Wed Oct 15 08:39:09 CEST 2008</date>
    <body>Hi, What we do is to use the Groovy scripts through the Java Scripting API during development and then compile them into class, if desired, for production. Accessing Groovy scripts is not too slow, after the first access, if you are careful not to throw the ScriptingEngine object after each access, as creating them is the most expensive operation. I did some experiments with it not that long ago: http://www.jroller.com/greeneyed/entry/don_t_throw_your_scriptengines So we opted for scripting during development, as even though you might get groovyc compilation to work, I'm not sure why but Hot Swapping does not seem to work with groovyc generated classes and each time you make a change, the context is restarted and it can become quite a pain. S! D. bumzee escribió:</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re  sin And Groovy</header>
    <date>Wed Oct 15 15:49:51 CEST 2008</date>
    <body>I've come to learn that the problem is not Resin.  As you've noted, it's groovyc.  I've not considered your suggestion before but I will give it a try.  Your blog post is quite interesting.  Not sure what to make of this whole thing and what it really says about groovy's use out said of grails. It sucks to have to dig this deep just to use Groovy in a covenient way. Thanks for the help. http://www.jroller.com/greeneyed/entry/don_t_throw_your_scriptengines http://maillist.caucho.com/mailman/listinfo/resin-interest -- View this message in context: http://www.nabble.com/Resin-And-Groovy-tp19976910p19993879.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>[Resin-interest] Re sin 3.15, Groovy and hotswap</header>
    <date>Mon Oct 13 16:58:03 CEST 2008</date>
    <body>I use intellij 7.0.4 as my ide ,  resin 3.15, groovy 1.5.1 &amp;amp;  JDK 1.5  and whether i use the resin plugin or start resin stand alone w/remote debugging enabled, if I modify any groovy class the context restarts.  However, if I modify a java class it's changes are reloaded w/o a context restart. Is there anyway to get hotswap to work w/groovy classes the same as it does for java classes ? -- View this message in context: http://www.nabble.com/Resin-3.15%2C-Groovy-and-hotswap-tp19956414p19956414.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re sin 3.15, Groovy and hotswap</header>
    <date>Mon Oct 13 19:09:48 CEST 2008</date>
    <body>I'm not all that familiar with Ruby, but do your Ruby classes implement the Servlet api somehow?  Usually, the context has to restart when your servlets change signature. -----Original Message----- From: [EMAIL PROTECTED] [ mailto:[EMAIL PROTECTED] On Behalf Of bumzee Sent: Monday, October 13, 2008 7:57 AM To: resin-interest@caucho.com Subject: [Resin-interest] Re sin 3.15, Groovy and hotswap I use intellij 7.0.4 as my ide ,  resin 3.15, groovy 1.5.1 &amp;amp;  JDK 1.5 and whether i use the resin plugin or start resin stand alone w/remote debugging enabled, if I modify any groovy class the context restarts. However, if I modify a java class it's changes are reloaded w/o a context restart. Is there anyway to get hotswap to work w/groovy classes the same as it does for java classes ? -- View this message in context: http://www.nabble.com/Resin-3.15%2C-Groovy-and-hotswap-tp19956414p199564 14.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re  sin 3.15, Groovy and hotswap</header>
    <date>Mon Oct 13 19:32:15 CEST 2008</date>
    <body>By ruby, I assume you mean Groovy and no, the Groovy classes don't implement the servlet API.  They are not Groovlets and the context restarts when a change is made to a groovy class even when all of the method signatures stay the same. It restarts the context no matter what the change mailto:[EMAIL PROTECTED] On Behalf Of bumzee http://www.nabble.com/Resin-3.15%2C-Groovy-and-hotswap-tp19956414p199564 http://maillist.caucho.com/mailman/listinfo/resin-interest http://maillist.caucho.com/mailman/listinfo/resin-interest -- View this message in context: http://www.nabble.com/Resin-3.15%2C-Groovy-and-hotswap-tp19956414p19959203.html Sent from the Resin mailing list archive at Nabble.com.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] Re  sin 3.15, Groovy and hotswap</header>
    <date>Tue Oct 14 09:31:14 CEST 2008</date>
    <body>Hi there, The same thing is happening to me, and the combined with the Ant Groovyc task not checking if the file has been modified or not and always recompiling, it's quite a pain. However, if I'm not mistaken, I think hotswapping is "enabled" by Resin but provided by Java itself, so we might have to look for the cause/solution at the JDK level. S! D. bumzee escribió: mailto:[EMAIL PROTECTED] On Behalf Of bumzee</body>
  </mail>
  <mail>
    <header>[Resin-interest] Load Balancing issues</header>
    <date>Sat Oct 11 03:34:05 CEST 2008</date>
    <body>Hello, We're using resin pro 3.1.5.  Our current setup includes three application servers (serverids asv, bsv, and csv) in a cluster with a shared load balancer.  The load balancer seems to be load-balancing, but at some point two of our app servers stop being responsive and all requests end up going to one of the three servers.  The cluster page on the resin-admin application correctly shows that only one server is working.  What's interesting is that refreshing the cluster page a few times will "wake up" the failing servers.  Has anyone else experienced this? Eric</body>
  </mail>
  <mail>
    <header>[Resin-interest] 'tlibversion' is an unknown property of	'com.caucho.jsp.cfg.TldTaglib'</header>
    <date>Fri Oct 10 20:04:00 CEST 2008</date>
    <body>We recently updgraded from Resin 3.0.23 to 3.1.6.  We use Struts 1.2.8. We are currently getting the following exception, "Unhandled exception 'jar:file:/usr/local/web0/webapps/cons/WEB-INF/lib/struts-1.2.8.jar!/MET A-INF/tlds/struts-logic.tld:10: 'tlibversion' is an unknown property of 'com.caucho.jsp.cfg.TldTaglib'. Here's the top of struts-logic.tld: 1.1//EN" " http://java.sun.com/j2ee/dtds/web-jsptaglibrary_1_1.dtd" I know the JSP 1.2 DTD changed the tag to &amp;lt;tlib-version&amp;gt; instead of Another possibility I've considered is the case-sensitivity of the getters.  The getter in com.caucho.jsp.cfg.TldTaglib is getTlibVersion(), should it be getTlibversion() instead?  When we upgraded to 3.1.6 we had to change a bunch of our JSP to match the case of the property getters.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 'tlibversion' is an unknown property	of'com.caucho.jsp.cfg.TldTaglib'</header>
    <date>Fri Oct 10 20:14:04 CEST 2008</date>
    <body>I just saw found a similar bug fixed in 3.1.7, http://bugs.caucho.com/bug_view_advanced_page.php?bug_id=2672 Is this my bug? From: [EMAIL PROTECTED] [ mailto:[EMAIL PROTECTED] On Behalf Of Miguel Vargas Sent: Friday, October 10, 2008 11:02 AM To: resin-interest@caucho.com Subject: [Resin-interest] 'tlibversion' is an unknown property of'com.caucho.jsp.cfg.TldTaglib' We recently updgraded from Resin 3.0.23 to 3.1.6.  We use Struts 1.2.8. We are currently getting the following exception, "Unhandled exception 'jar:file:/usr/local/web0/webapps/cons/WEB-INF/lib/struts-1.2.8.jar!/MET A-INF/tlds/struts-logic.tld:10: 'tlibversion' is an unknown property of 'com.caucho.jsp.cfg.TldTaglib'. Here's the top of struts-logic.tld: 1.1//EN" " http://java.sun.com/j2ee/dtds/web-jsptaglibrary_1_1.dtd" I know the JSP 1.2 DTD changed the tag to &amp;lt;tlib-version&amp;gt; instead of Another possibility I've considered is the case-sensitivity of the getters.  The getter in com.caucho.jsp.cfg.TldTaglib is getTlibVersion(), should it be getTlibversion() instead?  When we upgraded to 3.1.6 we had to change a bunch of our JSP to match the case of the property getters. This electronic message contains information from Multifamily Technology Solutions, Inc. (MyNewPlace.com) and is confidential or privileged. The information is intended to be for the use of the individual or entity named above. If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this message is prohibited. If you have received this electronic message in error, please notify us immediately by telephone at (415) 348-2000 or electronic mail.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] 'tlibversion' is an unknown property	of'com.caucho.jsp.cfg.TldTaglib'</header>
    <date>Fri Oct 10 22:08:39 CEST 2008</date>
    <body>I just saw found a similar bug fixed in 3.1.7, http://bugs.caucho.com/bug_view_advanced_page.php?bug_id=2672 Is this my bug? Yes, that should be the same issue.  There was a change in how we were handling capitalization for Resin's IoC that messed up some .tld files. -- Scott From: [EMAIL PROTECTED] [ mailto:[EMAIL PROTECTED] ] On Behalf Of Miguel Vargas Sent: Friday, October 10, 2008 11:02 AM To: resin-interest@caucho.com Subject: [Resin-interest] 'tlibversion' is an unknown property of'com.caucho.jsp.cfg.TldTaglib' We recently updgraded from Resin 3.0.23 to 3.1.6.  We use Struts 1.2.8.  We are currently getting the following exception, "Unhandled exception 'jar:file:/usr/local/web0/webapps/cons/WEB-INF/ lib/struts-1.2.8.jar!/META-INF/tlds/struts-logic.tld:10: 'tlibversion' is an unknown property of 'com.caucho.jsp.cfg.TldTaglib'. Here’s the top of struts-logic.tld: Library 1.1//EN" " http://java.sun.com/j2ee/dtds/web-jsptaglibrary_1_1.dtd I know the JSP 1.2 DTD changed the tag to &amp;lt;tlib-version&amp;gt; instead of Another possibility I’ve considered is the case-sensitivity of the getters.  The getter in com.caucho.jsp.cfg.TldTaglib is getTlibVersion(), should it be getTlibversion() instead?  When we upgraded to 3.1.6 we had to change a bunch of our JSP to match the case of the property getters. This electronic message contains information from Multifamily Technology Solutions, Inc. (MyNewPlace.com) and is confidential or privileged. The information is intended to be for the use of the individual or entity named above. If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this message is prohibited. If you have received this electronic message in error, please notify us immediately by telephone at (415) 348-2000 or electronic mail. This electronic message contains information from Multifamily Technology Solutions, Inc. (MyNewPlace.com) and is confidential or privileged. The information is intended to be for the use of the individual or entity named above. If you are not the intended recipient, be aware that any disclosure, copying, distribution or use of the contents of this message is prohibited. If you have received this electronic message in error, please notify us immediately by telephone at (415) 348-2000 or electronic mail.</body>
  </mail>
  <mail>
    <header>Re: [Resin-interest] where is &amp;lt;error-log&amp;gt; tag?</header>
    <date>Fri Oct 10 06:36:47 CEST 2008</date>
    <body>thanks for your reply. when I configured resin.conf as： - 'info' for production - 'fine' or 'finer' for development and troubleshooting and then，vi a jsp as： line 1: &amp;lt;[EMAIL PROTECTED] session="false"%&amp;gt;&amp;lt;[EMAIL PROTECTED] contentType="text/html;charset=utf-8" language="java"%&amp;gt;&amp;lt;% line 2: %&amp;gt;&amp;lt;[EMAIL PROTECTED] import="java.util.Date,java.util.HashMap"%&amp;gt;&amp;lt;% %&amp;gt;&amp;lt;jsp:useBean id="cacheserv" scope="application" class="com.ufqi.base.CacheService"&amp;gt;&amp;lt;jsp:setProperty name="cacheserv" pro perty="*"/&amp;gt;&amp;lt;% which contains an error： unclosed jsp:useBean in line 2. when run the jsp under resin-2.1.17, it displayed the error as: HTTP/1.1 500 Internal Server Error Date: Fri, 10 Oct 2008 04:18:45 GMT Server: Apache Content-Length: 323 Connection: close Content-Type: text/html /www/webroot/wap/phone/loadtemplate1.0.jsp:2436: `&amp;amp;lt;/jsp:useBean&amp;gt;' expected at end of file.  For XML, the top-level tag must have a matching closing tag. Resin 2.1.17 (built Tue Jul 11 09:01:03 PDT 2006) but when run the same jsp under resin3.1.6 configured as above logging, it echoed: HTTP/1.1 200 OK Date: Fri, 10 Oct 2008 04:21:17 GMT Server: Apache Content-Length: 0 Content-Type: text/html; charset=utf-8 Connection: close (nothing to be displayed, for Content-Length=0 ) as the jsp run, nothing to be logged in /www/log/htttp/resin_msg.log (configured above) . that's the key point, so what's wrong? and how to? thank you very much if there is any more reply. [EMAIL PROTECTED] -------------------------------------------------- Sent: Thursday, October 09, 2008 23:56 To: "General Discussion for the Resin application server" Subject: Re: [Resin-interest] where is &amp;lt;error-log&amp;gt; tag? mailto:[EMAIL PROTECTED] http://blog.caucho.com/ http://maillist.caucho.com/mailman/listinfo/resin-interest</body>
  </mail>
</mails>

